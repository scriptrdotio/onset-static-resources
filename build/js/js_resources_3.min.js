!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.agGrid=b():a.agGrid=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){var d=c(1);Object.keys(d).forEach(function(a){b[a]=d[a]}),c(129),c(133),c(135),c(137),c(139),c(141)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2);b.BalancedColumnTreeBuilder=d.BalancedColumnTreeBuilder;var e=c(14);b.ColumnController=e.ColumnController;var f=c(101);b.ColumnKeyCreator=f.ColumnKeyCreator;var g=c(17);b.ColumnUtils=g.ColumnUtils;var h=c(20);b.DisplayedGroupCreator=h.DisplayedGroupCreator;var i=c(97);b.GroupInstanceIdCreator=i.GroupInstanceIdCreator;var j=c(9);b.ComponentUtil=j.ComponentUtil;var k=c(102);b.initialiseAgGridWithAngular1=k.initialiseAgGridWithAngular1;var l=c(123);b.initialiseAgGridWithWebComponents=l.initialiseAgGridWithWebComponents;var m=c(43);b.BeanStub=m.BeanStub;var n=c(6);b.Context=n.Context,b.Autowired=n.Autowired,b.PostConstruct=n.PostConstruct,b.PreConstruct=n.PreConstruct,b.Optional=n.Optional,b.Bean=n.Bean,b.Qualifier=n.Qualifier,b.PreDestroy=n.PreDestroy;var o=c(44);b.QuerySelector=o.QuerySelector,b.Listener=o.Listener,b.RefSelector=o.RefSelector;var p=c(83);b.DragAndDropService=p.DragAndDropService,b.DragSourceType=p.DragSourceType,b.HDirection=p.HDirection,b.VDirection=p.VDirection;var q=c(25);b.DragService=q.DragService;var r=c(16);b.Column=r.Column;var s=c(15);b.ColumnGroup=s.ColumnGroup;var t=c(34);b.GridCell=t.GridCell;var u=c(35);b.GridRow=u.GridRow;var v=c(18);b.OriginalColumnGroup=v.OriginalColumnGroup;var w=c(29);b.RowNode=w.RowNode;var x=c(41);b.BaseFilter=x.BaseFilter;var y=c(46);b.DateFilter=y.DateFilter;var z=c(38);b.FilterManager=z.FilterManager;var A=c(45);b.NumberFilter=A.NumberFilter;var B=c(40);b.TextFilter=B.TextFilter;var C=c(23);b.GridPanel=C.GridPanel;var D=c(59);b.ScrollVisibleService=D.ScrollVisibleService;var E=c(27);b.MouseEventService=E.MouseEventService;var F=c(95);b.BodyDropPivotTarget=F.BodyDropPivotTarget;var G=c(93);b.BodyDropTarget=G.BodyDropTarget;var H=c(88);b.CssClassApplier=H.CssClassApplier;var I=c(82);b.HeaderContainer=I.HeaderContainer;var J=c(81);b.HeaderRenderer=J.HeaderRenderer;var K=c(84);b.HeaderRowComp=K.HeaderRowComp;var L=c(86);b.HeaderTemplateLoader=L.HeaderTemplateLoader;var M=c(87);b.HorizontalDragService=M.HorizontalDragService;var N=c(94);b.MoveColumnController=N.MoveColumnController;var O=c(85);b.RenderedHeaderCell=O.RenderedHeaderCell;var P=c(104);b.StandardMenuFactory=P.StandardMenuFactory;var Q=c(24);b.BorderLayout=Q.BorderLayout;var R=c(124);b.TabbedLayout=R.TabbedLayout;var S=c(125);b.VerticalStack=S.VerticalStack;var T=c(36);b.FocusService=T.FocusService;var U=c(126);b.simpleHttpRequest=U.simpleHttpRequest;var V=c(66);b.LargeTextCellEditor=V.LargeTextCellEditor;var W=c(63);b.PopupEditorWrapper=W.PopupEditorWrapper;var X=c(65);b.PopupSelectCellEditor=X.PopupSelectCellEditor;var Y=c(64);b.PopupTextCellEditor=Y.PopupTextCellEditor;var Z=c(62);b.SelectCellEditor=Z.SelectCellEditor;var $=c(61);b.TextCellEditor=$.TextCellEditor;var _=c(69);b.AnimateShowChangeCellRenderer=_.AnimateShowChangeCellRenderer;var aa=c(68);b.AnimateSlideCellRenderer=aa.AnimateSlideCellRenderer;var ba=c(70);b.GroupCellRenderer=ba.GroupCellRenderer;var ca=c(55);b.SetLeftFeature=ca.SetLeftFeature;var da=c(21);b.AutoWidthCalculator=da.AutoWidthCalculator;var ea=c(60);b.CellEditorFactory=ea.CellEditorFactory;var fa=c(67);b.CellRendererFactory=fa.CellRendererFactory;var ga=c(71);b.CellRendererService=ga.CellRendererService;var ha=c(73);b.CheckboxSelectionComponent=ha.CheckboxSelectionComponent;var ia=c(28);b.CellComp=ia.CellComp;var ja=c(76);b.RowComp=ja.RowComp;var ka=c(22);b.RowRenderer=ka.RowRenderer;var la=c(72);b.ValueFormatterService=la.ValueFormatterService;var ma=c(105);b.FilterStage=ma.FilterStage;var na=c(109);b.FlattenStage=na.FlattenStage;var oa=c(107);b.SortStage=oa.SortStage;var pa=c(79);b.PinnedRowModel=pa.PinnedRowModel;var qa=c(116);b.InMemoryRowModel=qa.InMemoryRowModel;var ra=c(118);b.ChangedPath=ra.ChangedPath;var sa=c(117);b.InMemoryNodeManager=sa.InMemoryNodeManager;var ta=c(110);b.InfiniteRowModel=ta.InfiniteRowModel;var ua=c(113);b.RowNodeBlock=ua.RowNodeBlock;var va=c(115);b.RowNodeBlockLoader=va.RowNodeBlockLoader;var wa=c(114);b.RowNodeCache=wa.RowNodeCache;var xa=c(74);b.StylingService=xa.StylingService;var ya=c(90);b.AgCheckbox=ya.AgCheckbox;var za=c(42);b.Component=za.Component;var Aa=c(39);b.PopupService=Aa.PopupService;var Ba=c(50);b.TouchListener=Ba.TouchListener;var Ca=c(119);b.BaseFrameworkFactory=Ca.BaseFrameworkFactory;var Da=c(80);b.CellNavigationService=Da.CellNavigationService;var Ea=c(96);b.ColumnChangeEvent=Ea.ColumnChangeEvent;var Fa=c(78);b.AlignedGridsService=Fa.AlignedGridsService;var Ga=c(8);b.Constants=Ga.Constants;var Ha=c(12);b.CsvCreator=Ha.CsvCreator,b.BaseCreator=Ha.BaseCreator;var Ia=c(99);b.Downloader=Ia.Downloader;var Ja=c(103);b.Grid=Ja.Grid;var Ka=c(11);b.GridApi=Ka.GridApi;var La=c(10);b.Events=La.Events;var Ma=c(33);b.FocusedCellController=Ma.FocusedCellController;var Na=c(127);b.defaultGroupComparator=Na.defaultGroupComparator;var Oa=c(3);b.GridOptionsWrapper=Oa.GridOptionsWrapper;var Pa=c(4);b.EventService=Pa.EventService;var Qa=c(37);b.GridCore=Qa.GridCore;var Ra=c(5);b.Logger=Ra.Logger;var Sa=c(26);b.SelectionController=Sa.SelectionController;var Ta=c(52);b.SortController=Ta.SortController;var Ua=c(49);b.SvgFactory=Ua.SvgFactory;var Va=c(32);b.TemplateService=Va.TemplateService;var Wa=c(7);b.Utils=Wa.Utils,b.NumberSequence=Wa.NumberSequence,b._=Wa._;var Xa=c(30);b.ValueService=Xa.ValueService;var Ya=c(19);b.ExpressionService=Ya.ExpressionService;var Za=c(120);b.XmlFactory=Za.XmlFactory;var $a=c(13);b.GridSerializer=$a.GridSerializer,b.BaseGridSerializingSession=$a.BaseGridSerializingSession,b.RowType=$a.RowType;var _a=c(5);b.LoggerFactory=_a.LoggerFactory;var ab=c(14);b.ColumnApi=ab.ColumnApi;var bb=c(128);b.BaseComponentWrapper=bb.BaseComponentWrapper},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(3),h=c(5),i=c(17),j=c(101),k=c(18),l=c(16),m=c(6),n=c(6),o=c(6),p=c(6),q=c(7),r=function(){function a(){}return a.prototype.setBeans=function(a){this.logger=a.create("BalancedColumnTreeBuilder")},a.prototype.createBalancedColumnGroups=function(a,b){var c=new j.ColumnKeyCreator,d=this.recursivelyCreateColumns(a,0,c,b),e=this.findMaxDept(d,0);this.logger.log("Number of levels for grouped columns is "+e);var f=this.balanceColumnTree(d,0,e,c);return this.columnUtils.depthFirstOriginalTreeSearch(f,function(a){a instanceof k.OriginalColumnGroup&&a.calculateExpandable()}),{balancedTree:f,treeDept:e}},a.prototype.balanceColumnTree=function(a,b,c,d){var e=this,f=[];return a.forEach(function(a){if(a instanceof k.OriginalColumnGroup){var g=a,h=e.balanceColumnTree(g.getChildren(),b+1,c,d);g.setChildren(h),f.push(g)}else{for(var i=a,j=c-1;j>=b;j--){var l=d.getUniqueKey(null,null),m=e.createMergedColGroupDef(null),n=new k.OriginalColumnGroup(m,l,!0);n.setChildren([i]),i=n}f.push(i)}}),f},a.prototype.findMaxDept=function(a,b){for(var c=b,d=0;d<a.length;d++){var e=a[d];if(e instanceof k.OriginalColumnGroup){var f=e,g=this.findMaxDept(f.getChildren(),b+1);c<g&&(c=g)}}return c},a.prototype.recursivelyCreateColumns=function(a,b,c,d){var e=this,f=[];return a?(a.forEach(function(a){var g;g=e.isColumnGroup(a)?e.createColumnGroup(c,d,a,b):e.createColumn(c,d,a),f.push(g)}),f):f},a.prototype.createColumnGroup=function(a,b,c,d){var e=this.createMergedColGroupDef(c),f=a.getUniqueKey(e.groupId,null),g=new k.OriginalColumnGroup(e,f,!1),h=this.recursivelyCreateColumns(e.children,d+1,a,b);return g.setChildren(h),g},a.prototype.createMergedColGroupDef=function(a){var b={};return q.Utils.assign(b,this.gridOptionsWrapper.getDefaultColGroupDef()),q.Utils.assign(b,a),this.checkForDeprecatedItems(b),b},a.prototype.createColumn=function(a,b,c){var d=this,e={};if(q.Utils.assign(e,this.gridOptionsWrapper.getDefaultColDef()),c.type){c.type.split(",").forEach(function(a){var b=d.gridOptionsWrapper.getColumnTypes()[a.trim()];b?q.Utils.assign(e,b):console.warn("ag-grid: colDef.type '"+a+"' does not correspond to defined gridOptions.columnTypes")})}q.Utils.assign(e,c),this.checkForDeprecatedItems(e);var f=a.getUniqueKey(e.colId,e.field),g=new l.Column(e,f,b);return this.context.wireBean(g),g},a.prototype.checkForDeprecatedItems=function(a){if(a){var b=a;void 0!==b.group&&console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==b.headerGroup&&console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3"),void 0!==b.headerGroupShow&&console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3"),void 0!==b.suppressRowGroup&&console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead"),void 0!==b.suppressAggregation&&console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead"),(b.suppressRowGroup||b.suppressAggregation)&&console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead"),b.displayName&&(console.warn("ag-grid: Found displayName "+b.displayName+", please use headerName instead, displayName is deprecated."),b.headerName=b.displayName)}},a.prototype.isColumnGroup=function(a){return void 0!==a.children},d([o.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([o.Autowired("columnUtils"),e("design:type",i.ColumnUtils)],a.prototype,"columnUtils",void 0),d([o.Autowired("context"),e("design:type",p.Context)],a.prototype,"context",void 0),d([f(0,n.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[h.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([m.Bean("balancedColumnTreeBuilder")],a)}();b.BalancedColumnTreeBuilder=r},function(a,b,c){"use strict";function d(a){return!0===a||"true"===a}function e(a,b){return a>=0?a:b}function f(a,b){return a>0?a:b}var g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},i=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var j=c(4),k=c(8),l=c(9),m=c(11),n=c(6),o=c(14),p=c(7),q=function(){function a(){this.propertyEventService=new j.EventService,this.domDataKey="__AG_"+Math.random().toString()}return b=a,a.prototype.agWire=function(a,b){this.gridOptions.api=a,this.gridOptions.columnApi=b,this.checkForDeprecated()},a.prototype.destroy=function(){this.gridOptions.api=null,this.gridOptions.columnApi=null},a.prototype.init=function(){var a=this.useAsyncEvents();this.eventService.addGlobalListener(this.globalEventHandler.bind(this),a),this.setupFrameworkComponents(),this.isGroupSelectsChildren()&&this.isSuppressParentsInRowNodes()&&console.warn("ag-Grid: groupSelectsChildren does not work wth suppressParentsInRowNodes, this selection method needs the part in rowNode to work"),this.isGroupSelectsChildren()&&(this.isRowSelectionMulti()||console.warn("ag-Grid: rowSelectionMulti must be true for groupSelectsChildren to make sense"),this.isRowModelEnterprise()&&console.warn("ag-Grid: group selects children is NOT support for Enterprise Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.")),this.isGroupRemoveSingleChildren()&&this.isGroupHideOpenParents()&&console.warn("ag-Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!")},a.prototype.setupFrameworkComponents=function(){this.fullWidthCellRenderer=this.frameworkFactory.gridOptionsFullWidthCellRenderer(this.gridOptions),this.groupRowRenderer=this.frameworkFactory.gridOptionsGroupRowRenderer(this.gridOptions),this.groupRowInnerRenderer=this.frameworkFactory.gridOptionsGroupRowInnerRenderer(this.gridOptions)},a.prototype.getDomData=function(a,b){var c=a[this.domDataKey];return c?c[b]:void 0},a.prototype.setDomData=function(a,b,c){var d=a[this.domDataKey];p.Utils.missing(d)&&(d={},a[this.domDataKey]=d),d[b]=c},a.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},a.prototype.getGroupRowRenderer=function(){return this.groupRowRenderer},a.prototype.getGroupRowInnerRenderer=function(){return this.groupRowInnerRenderer},a.prototype.isEnterprise=function(){return this.enterprise},a.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},a.prototype.isRowDeselection=function(){return d(this.gridOptions.rowDeselection)},a.prototype.isRowSelectionMulti=function(){return"multiple"===this.gridOptions.rowSelection},a.prototype.getContext=function(){return this.gridOptions.context},a.prototype.isPivotMode=function(){return d(this.gridOptions.pivotMode)},a.prototype.isPivotTotals=function(){return d(this.gridOptions.pivotTotals)},a.prototype.isRowModelInfinite=function(){return this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_INFINITE},a.prototype.isRowModelViewport=function(){return this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_VIEWPORT},a.prototype.isRowModelEnterprise=function(){return this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_ENTERPRISE},a.prototype.isRowModelDefault=function(){return p.Utils.missing(this.gridOptions.rowModelType)||this.gridOptions.rowModelType===k.Constants.ROW_MODEL_TYPE_IN_MEMORY},a.prototype.isFullRowEdit=function(){return"fullRow"===this.gridOptions.editType},a.prototype.isSuppressFocusAfterRefresh=function(){return d(this.gridOptions.suppressFocusAfterRefresh)},a.prototype.isShowToolPanel=function(){return d(this.gridOptions.showToolPanel)},a.prototype.isToolPanelSuppressRowGroups=function(){return d(this.gridOptions.toolPanelSuppressRowGroups)},a.prototype.isToolPanelSuppressValues=function(){return d(this.gridOptions.toolPanelSuppressValues)},a.prototype.isToolPanelSuppressPivots=function(){return!!this.isRowModelEnterprise()||d(this.gridOptions.toolPanelSuppressPivots)},a.prototype.isToolPanelSuppressPivotMode=function(){return!!this.isRowModelEnterprise()||d(this.gridOptions.toolPanelSuppressPivotMode)},a.prototype.isSuppressTouch=function(){return d(this.gridOptions.suppressTouch)},a.prototype.useAsyncEvents=function(){return!d(this.gridOptions.suppressAsyncEvents)},a.prototype.isEnableCellChangeFlash=function(){return d(this.gridOptions.enableCellChangeFlash)},a.prototype.isGroupSelectsChildren=function(){return d(this.gridOptions.groupSelectsChildren)},a.prototype.isGroupSelectsFiltered=function(){return d(this.gridOptions.groupSelectsFiltered)},a.prototype.isGroupHideOpenParents=function(){return d(this.gridOptions.groupHideOpenParents)},a.prototype.isGroupMultiAutoColumn=function(){return d(this.gridOptions.groupMultiAutoColumn)||d(this.gridOptions.groupHideOpenParents)},a.prototype.isGroupRemoveSingleChildren=function(){return d(this.gridOptions.groupRemoveSingleChildren)},a.prototype.isGroupIncludeFooter=function(){return d(this.gridOptions.groupIncludeFooter)},a.prototype.isGroupSuppressBlankHeader=function(){return d(this.gridOptions.groupSuppressBlankHeader)},a.prototype.isSuppressRowClickSelection=function(){return d(this.gridOptions.suppressRowClickSelection)},a.prototype.isSuppressCellSelection=function(){return d(this.gridOptions.suppressCellSelection)},a.prototype.isSuppressMultiSort=function(){return d(this.gridOptions.suppressMultiSort)},a.prototype.isGroupSuppressAutoColumn=function(){return d(this.gridOptions.groupSuppressAutoColumn)},a.prototype.isSuppressDragLeaveHidesColumns=function(){return d(this.gridOptions.suppressDragLeaveHidesColumns)},a.prototype.isSuppressScrollOnNewData=function(){return d(this.gridOptions.suppressScrollOnNewData)},a.prototype.isForPrint=function(){return"forPrint"===this.gridOptions.domLayout},a.prototype.isAutoHeight=function(){return"autoHeight"===this.gridOptions.domLayout},a.prototype.isSuppressHorizontalScroll=function(){return d(this.gridOptions.suppressHorizontalScroll)},a.prototype.isSuppressLoadingOverlay=function(){return d(this.gridOptions.suppressLoadingOverlay)},a.prototype.isSuppressNoRowsOverlay=function(){return d(this.gridOptions.suppressNoRowsOverlay)},a.prototype.isSuppressFieldDotNotation=function(){return d(this.gridOptions.suppressFieldDotNotation)},a.prototype.getPinnedTopRowData=function(){return this.gridOptions.pinnedTopRowData},a.prototype.getPinnedBottomRowData=function(){return this.gridOptions.pinnedBottomRowData},a.prototype.isFunctionsPassive=function(){return d(this.gridOptions.functionsPassive)},a.prototype.isSuppressRowHoverClass=function(){return d(this.gridOptions.suppressRowHoverClass)},a.prototype.isSuppressTabbing=function(){return d(this.gridOptions.suppressTabbing)},a.prototype.isSuppressChangeDetection=function(){return d(this.gridOptions.suppressChangeDetection)},a.prototype.getQuickFilterText=function(){return this.gridOptions.quickFilterText},a.prototype.isCacheQuickFilter=function(){return d(this.gridOptions.cacheQuickFilter)},a.prototype.isUnSortIcon=function(){return d(this.gridOptions.unSortIcon)},a.prototype.isSuppressMenuHide=function(){return d(this.gridOptions.suppressMenuHide)},a.prototype.getRowStyle=function(){return this.gridOptions.rowStyle},a.prototype.getRowClass=function(){return this.gridOptions.rowClass},a.prototype.getRowStyleFunc=function(){return this.gridOptions.getRowStyle},a.prototype.getRowClassFunc=function(){return this.gridOptions.getRowClass},a.prototype.getPostProcessPopupFunc=function(){return this.gridOptions.postProcessPopup},a.prototype.getDoesDataFlowerFunc=function(){return this.gridOptions.doesDataFlower},a.prototype.getIsFullWidthCellFunc=function(){return this.gridOptions.isFullWidthCell},a.prototype.getFullWidthCellRendererParams=function(){return this.gridOptions.fullWidthCellRendererParams},a.prototype.isEmbedFullWidthRows=function(){return this.isAutoHeight()||d(this.gridOptions.embedFullWidthRows)},a.prototype.getBusinessKeyForNodeFunc=function(){return this.gridOptions.getBusinessKeyForNode},a.prototype.getHeaderCellRenderer=function(){return this.gridOptions.headerCellRenderer},a.prototype.getApi=function(){return this.gridOptions.api},a.prototype.getColumnApi=function(){return this.gridOptions.columnApi},a.prototype.isDeltaRowDataMode=function(){return d(this.gridOptions.deltaRowDataMode)},a.prototype.isEnsureDomOrder=function(){return d(this.gridOptions.ensureDomOrder)},a.prototype.isEnableColResize=function(){return d(this.gridOptions.enableColResize)},a.prototype.isSingleClickEdit=function(){return d(this.gridOptions.singleClickEdit)},a.prototype.isSuppressClickEdit=function(){return d(this.gridOptions.suppressClickEdit)},a.prototype.isStopEditingWhenGridLosesFocus=function(){return d(this.gridOptions.stopEditingWhenGridLosesFocus)},a.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded},a.prototype.getAutoSizePadding=function(){return this.gridOptions.autoSizePadding},a.prototype.getMaxConcurrentDatasourceRequests=function(){return this.gridOptions.maxConcurrentDatasourceRequests},a.prototype.getMaxBlocksInCache=function(){return this.gridOptions.maxBlocksInCache},a.prototype.getCacheOverflowSize=function(){return this.gridOptions.cacheOverflowSize},a.prototype.getPaginationPageSize=function(){return this.gridOptions.paginationPageSize},a.prototype.getCacheBlockSize=function(){return this.gridOptions.cacheBlockSize},a.prototype.getInfiniteInitialRowCount=function(){return this.gridOptions.infiniteInitialRowCount},a.prototype.isPurgeClosedRowNodes=function(){return d(this.gridOptions.purgeClosedRowNodes)},a.prototype.isSuppressPaginationPanel=function(){return d(this.gridOptions.suppressPaginationPanel)},a.prototype.getRowData=function(){return this.gridOptions.rowData},a.prototype.isGroupUseEntireRow=function(){return d(this.gridOptions.groupUseEntireRow)},a.prototype.isEnableRtl=function(){return d(this.gridOptions.enableRtl)},a.prototype.getAutoGroupColumnDef=function(){return this.gridOptions.autoGroupColumnDef},a.prototype.isGroupSuppressRow=function(){return d(this.gridOptions.groupSuppressRow)},a.prototype.getRowGroupPanelShow=function(){return this.gridOptions.rowGroupPanelShow},a.prototype.getPivotPanelShow=function(){return this.gridOptions.pivotPanelShow},a.prototype.isAngularCompileRows=function(){return d(this.gridOptions.angularCompileRows)},a.prototype.isAngularCompileFilters=function(){return d(this.gridOptions.angularCompileFilters)},a.prototype.isAngularCompileHeaders=function(){return d(this.gridOptions.angularCompileHeaders)},a.prototype.isDebug=function(){return d(this.gridOptions.debug)},a.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs},a.prototype.getColumnTypes=function(){return this.gridOptions.columnTypes},a.prototype.getDatasource=function(){return this.gridOptions.datasource},a.prototype.getViewportDatasource=function(){return this.gridOptions.viewportDatasource},a.prototype.getEnterpriseDatasource=function(){return this.gridOptions.enterpriseDatasource},a.prototype.isEnableSorting=function(){return d(this.gridOptions.enableSorting)||d(this.gridOptions.enableServerSideSorting)},a.prototype.isAccentedSort=function(){return d(this.gridOptions.accentedSort)},a.prototype.isEnableCellExpressions=function(){return d(this.gridOptions.enableCellExpressions)},a.prototype.isEnableGroupEdit=function(){return d(this.gridOptions.enableGroupEdit)},a.prototype.isSuppressMiddleClickScrolls=function(){return d(this.gridOptions.suppressMiddleClickScrolls)},a.prototype.isSuppressPreventDefaultOnMouseWheel=function(){return d(this.gridOptions.suppressPreventDefaultOnMouseWheel)},a.prototype.isSuppressColumnVirtualisation=function(){return d(this.gridOptions.suppressColumnVirtualisation)},a.prototype.isSuppressContextMenu=function(){return d(this.gridOptions.suppressContextMenu)},a.prototype.isAllowContextMenuWithControlKey=function(){return d(this.gridOptions.allowContextMenuWithControlKey)},a.prototype.isSuppressCopyRowsToClipboard=function(){return d(this.gridOptions.suppressCopyRowsToClipboard)},a.prototype.isEnableFilter=function(){return d(this.gridOptions.enableFilter)||d(this.gridOptions.enableServerSideFilter)},a.prototype.isPagination=function(){return d(this.gridOptions.pagination)},a.prototype.isEnableServerSideFilter=function(){return this.gridOptions.enableServerSideFilter},a.prototype.isEnableServerSideSorting=function(){return d(this.gridOptions.enableServerSideSorting)},a.prototype.isSuppressScrollLag=function(){return d(this.gridOptions.suppressScrollLag)},a.prototype.isSuppressMovableColumns=function(){return d(this.gridOptions.suppressMovableColumns)},a.prototype.isAnimateRows=function(){return!this.isEnsureDomOrder()&&d(this.gridOptions.animateRows)},a.prototype.isSuppressColumnMoveAnimation=function(){return d(this.gridOptions.suppressColumnMoveAnimation)},a.prototype.isSuppressAggFuncInHeader=function(){return d(this.gridOptions.suppressAggFuncInHeader)},a.prototype.isSuppressAggAtRootLevel=function(){return d(this.gridOptions.suppressAggAtRootLevel)},a.prototype.isEnableRangeSelection=function(){return d(this.gridOptions.enableRangeSelection)},a.prototype.isPaginationAutoPageSize=function(){return d(this.gridOptions.paginationAutoPageSize)},a.prototype.isRememberGroupStateWhenNewData=function(){return d(this.gridOptions.rememberGroupStateWhenNewData)},a.prototype.getIcons=function(){return this.gridOptions.icons},a.prototype.getAggFuncs=function(){return this.gridOptions.aggFuncs},a.prototype.getIsScrollLag=function(){return this.gridOptions.isScrollLag},a.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder},a.prototype.getAlignedGrids=function(){return this.gridOptions.alignedGrids},a.prototype.getGroupRowRendererParams=function(){return this.gridOptions.groupRowRendererParams},a.prototype.getOverlayLoadingTemplate=function(){return this.gridOptions.overlayLoadingTemplate},a.prototype.getOverlayNoRowsTemplate=function(){return this.gridOptions.overlayNoRowsTemplate},a.prototype.isSuppressAutoSize=function(){return d(this.gridOptions.suppressAutoSize)},a.prototype.isSuppressParentsInRowNodes=function(){return d(this.gridOptions.suppressParentsInRowNodes)},a.prototype.isEnableStatusBar=function(){return d(this.gridOptions.enableStatusBar)},a.prototype.isAlwaysShowStatusBar=function(){return d(this.gridOptions.alwaysShowStatusBar)},a.prototype.isFunctionsReadOnly=function(){return d(this.gridOptions.functionsReadOnly)},a.prototype.isFloatingFilter=function(){return this.gridOptions.floatingFilter},a.prototype.getDefaultColDef=function(){return this.gridOptions.defaultColDef},a.prototype.getDefaultColGroupDef=function(){return this.gridOptions.defaultColGroupDef},a.prototype.getDefaultExportParams=function(){return this.gridOptions.defaultExportParams},a.prototype.getHeaderCellTemplate=function(){return this.gridOptions.headerCellTemplate},a.prototype.getHeaderCellTemplateFunc=function(){return this.gridOptions.getHeaderCellTemplate},a.prototype.getNodeChildDetailsFunc=function(){return this.gridOptions.getNodeChildDetails},a.prototype.getGroupRowAggNodesFunc=function(){return this.gridOptions.groupRowAggNodes},a.prototype.getContextMenuItemsFunc=function(){return this.gridOptions.getContextMenuItems},a.prototype.getMainMenuItemsFunc=function(){return this.gridOptions.getMainMenuItems},a.prototype.getRowNodeIdFunc=function(){return this.gridOptions.getRowNodeId},a.prototype.getNavigateToNextCellFunc=function(){return this.gridOptions.navigateToNextCell},a.prototype.getTabToNextCellFunc=function(){return this.gridOptions.tabToNextCell},a.prototype.isValueCache=function(){return d(this.gridOptions.valueCache)},a.prototype.isValueCacheNeverExpires=function(){return d(this.gridOptions.valueCacheNeverExpires)},a.prototype.isAggregateOnlyChangedColumns=function(){return d(this.gridOptions.aggregateOnlyChangedColumns)},a.prototype.getProcessSecondaryColDefFunc=function(){return this.gridOptions.processSecondaryColDef},a.prototype.getProcessSecondaryColGroupDefFunc=function(){return this.gridOptions.processSecondaryColGroupDef},a.prototype.getSendToClipboardFunc=function(){return this.gridOptions.sendToClipboard},a.prototype.getProcessCellForClipboardFunc=function(){return this.gridOptions.processCellForClipboard},a.prototype.getProcessCellFromClipboardFunc=function(){return this.gridOptions.processCellFromClipboard},a.prototype.getViewportRowModelPageSize=function(){return f(this.gridOptions.viewportRowModelPageSize,5)},a.prototype.getViewportRowModelBufferSize=function(){return e(this.gridOptions.viewportRowModelBufferSize,5)},a.prototype.getClipboardDeliminator=function(){return p.Utils.exists(this.gridOptions.clipboardDeliminator)?this.gridOptions.clipboardDeliminator:"\t"},a.prototype.setProperty=function(a,b){var c=this.gridOptions,d=c[a];d!==b&&(c[a]=b,this.propertyEventService.dispatchEvent(a,{currentValue:b,previousValue:d}))},a.prototype.addEventListener=function(a,b){this.propertyEventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.propertyEventService.removeEventListener(a,b)},a.prototype.executeProcessRowPostCreateFunc=function(a){this.gridOptions.processRowPostCreate&&this.gridOptions.processRowPostCreate(a)},a.prototype.getHeaderHeight=function(){return"number"==typeof this.gridOptions.headerHeight?this.gridOptions.headerHeight:25},a.prototype.getFloatingFiltersHeight=function(){return"number"==typeof this.gridOptions.floatingFiltersHeight?this.gridOptions.floatingFiltersHeight:20},a.prototype.getGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.groupHeaderHeight?this.gridOptions.groupHeaderHeight:this.getHeaderHeight()},a.prototype.getPivotHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotHeaderHeight?this.gridOptions.pivotHeaderHeight:this.getHeaderHeight()},a.prototype.getPivotGroupHeaderHeight=function(){return"number"==typeof this.gridOptions.pivotGroupHeaderHeight?this.gridOptions.pivotGroupHeaderHeight:this.getGroupHeaderHeight()},a.prototype.isExternalFilterPresent=function(){return"function"==typeof this.gridOptions.isExternalFilterPresent&&this.gridOptions.isExternalFilterPresent()},a.prototype.doesExternalFilterPass=function(a){return"function"==typeof this.gridOptions.doesExternalFilterPass&&this.gridOptions.doesExternalFilterPass(a)},a.prototype.getDocument=function(){var a;return p.Utils.exists(this.gridOptions.getDocument)&&(a=this.gridOptions.getDocument()),p.Utils.exists(a)?a:document},a.prototype.getLayoutInterval=function(){return"number"==typeof this.gridOptions.layoutInterval?this.gridOptions.layoutInterval:k.Constants.LAYOUT_INTERVAL},a.prototype.getMinColWidth=function(){return this.gridOptions.minColWidth>b.MIN_COL_WIDTH?this.gridOptions.minColWidth:b.MIN_COL_WIDTH},a.prototype.getMaxColWidth=function(){return this.gridOptions.maxColWidth>b.MIN_COL_WIDTH?this.gridOptions.maxColWidth:null},a.prototype.getColWidth=function(){return"number"!=typeof this.gridOptions.colWidth||this.gridOptions.colWidth<b.MIN_COL_WIDTH?200:this.gridOptions.colWidth},a.prototype.getRowBuffer=function(){return"number"==typeof this.gridOptions.rowBuffer?(this.gridOptions.rowBuffer<0&&console.warn("ag-Grid: rowBuffer should not be negative"),this.gridOptions.rowBuffer):k.Constants.ROW_BUFFER_SIZE},a.prototype.getScrollbarWidth=function(){var a=this.gridOptions.scrollbarWidth;return("number"!=typeof a||a<0)&&(a=p.Utils.getScrollbarWidth()),a},a.prototype.checkForDeprecated=function(){var a=this.gridOptions;a.suppressUnSort&&console.warn("ag-grid: as of v1.12.4 suppressUnSort is not used. Please use sortOrder instead."),a.suppressDescSort&&console.warn("ag-grid: as of v1.12.4 suppressDescSort is not used. Please use sortOrder instead."),a.groupAggFields&&console.warn("ag-grid: as of v3 groupAggFields is not used. Please add appropriate agg fields to your columns."),a.groupHidePivotColumns&&console.warn("ag-grid: as of v3 groupHidePivotColumns is not used as pivot columns are now called rowGroup columns. Please refer to the documentation"),a.groupKeys&&console.warn("ag-grid: as of v3 groupKeys is not used. You need to set rowGroupIndex on the columns to group. Please refer to the documentation"),
"boolean"==typeof a.groupDefaultExpanded&&console.warn("ag-grid: groupDefaultExpanded can no longer be boolean. for groupDefaultExpanded=true, use groupDefaultExpanded=9999 instead, to expand all the groups"),(a.onRowDeselected||a.rowDeselected)&&console.warn("ag-grid: since version 3.4 event rowDeselected no longer exists, please check the docs"),a.rowsAlreadyGrouped&&console.warn("ag-grid: since version 3.4 rowsAlreadyGrouped no longer exists, please use getNodeChildDetails() instead"),a.groupAggFunction&&console.warn("ag-grid: since version 4.3.x groupAggFunction is now called groupRowAggNodes"),a.checkboxSelection&&console.warn("ag-grid: since version 8.0.x checkboxSelection is not supported as a grid option. If you want this on all columns, use defaultColDef instead and set it there"),a.paginationInitialRowCount&&console.warn("ag-grid: since version 9.0.x paginationInitialRowCount is now called infiniteInitialRowCount"),a.infinitePageSize&&console.warn("ag-grid: since version 9.0.x infinitePageSize is now called cacheBlockSize"),a.infiniteBlockSize&&console.warn("ag-grid: since version 10.0.x infiniteBlockSize is now called cacheBlockSize"),a.maxPagesInCache&&console.warn("ag-grid: since version 10.0.x maxPagesInCache is now called maxBlocksInCache"),a.paginationOverflowSize&&console.warn("ag-grid: since version 10.0.x paginationOverflowSize is now called cacheOverflowSize"),a.forPrint&&console.warn('ag-grid: since version 10.1.x, use property domLayout="forPrint" instead of forPrint=true'),a.suppressMenuFilterPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['filterMenuTab'] instead of suppressMenuFilterPanel=true"),a.suppressMenuMainPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['generalMenuTab'] instead of suppressMenuMainPanel=true"),a.suppressMenuColumnPanel&&console.warn("ag-grid: since version 11.0.x, use property colDef.menuTabs=['columnsMenuTab'] instead of suppressMenuColumnPanel=true"),a.suppressUseColIdForGroups&&console.warn("ag-grid: since version 11.0.x, this is not in use anymore. You should be able to remove it from your definition"),a.groupColumnDef&&console.warn("ag-grid: since version 11.0.x, groupColumnDef has been renamed, this property is now called autoGroupColumnDef. Please change your configuration accordingly"),a.slaveGrids&&console.warn("ag-grid: since version 12.x, slaveGrids has been renamed, this property is now called alignedGrids. Please change your configuration accordingly"),a.floatingTopRowData&&console.warn("ag-grid: since version 12.x, floatingTopRowData is now called pinnedTopRowData"),a.floatingBottomRowData&&console.warn("ag-grid: since version 12.x, floatingBottomRowData is now called pinnedBottomRowData"),a.paginationStartPage&&console.warn("ag-grid: since version 12.x, paginationStartPage is gone, please call api.paginationGoToPage("+a.paginationStartPage+") instead.")},a.prototype.getLocaleTextFunc=function(){if(this.gridOptions.localeTextFunc)return this.gridOptions.localeTextFunc;var a=this;return function(b,c){var d=a.gridOptions.localeText;return d&&d[b]?d[b]:c}},a.prototype.globalEventHandler=function(a,b){var c=l.ComponentUtil.getCallbackForEvent(a);"function"==typeof this.gridOptions[c]&&this.gridOptions[c](b)},a.prototype.getRowHeightAsNumber=function(){var a=this.gridOptions.rowHeight;return p.Utils.missing(a)?25:this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:(console.warn("ag-Grid row height must be a number if not using standard row model"),25)},a.prototype.getRowHeightForNode=function(a){if("function"==typeof this.gridOptions.getRowHeight){var b={node:a,data:a.data,api:this.gridOptions.api,context:this.gridOptions.context};return this.gridOptions.getRowHeight(b)}return this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:25},a.prototype.isDynamicRowHeight=function(){return"function"==typeof this.gridOptions.getRowHeight},a.prototype.isNumeric=function(a){return!isNaN(a)&&"number"==typeof a},a.MIN_COL_WIDTH=10,a.PROP_HEADER_HEIGHT="headerHeight",a.PROP_GROUP_REMOVE_SINGLE_CHILDREN="groupRemoveSingleChildren",a.PROP_PIVOT_HEADER_HEIGHT="pivotHeaderHeight",a.PROP_GROUP_HEADER_HEIGHT="groupHeaderHeight",a.PROP_PIVOT_GROUP_HEADER_HEIGHT="pivotGroupHeaderHeight",a.PROP_FLOATING_FILTERS_HEIGHT="floatingFiltersHeight",g([n.Autowired("gridOptions"),h("design:type",Object)],a.prototype,"gridOptions",void 0),g([n.Autowired("columnController"),h("design:type",o.ColumnController)],a.prototype,"columnController",void 0),g([n.Autowired("eventService"),h("design:type",j.EventService)],a.prototype,"eventService",void 0),g([n.Autowired("enterprise"),h("design:type",Boolean)],a.prototype,"enterprise",void 0),g([n.Autowired("frameworkFactory"),h("design:type",Object)],a.prototype,"frameworkFactory",void 0),g([i(0,n.Qualifier("gridApi")),i(1,n.Qualifier("columnApi")),h("design:type",Function),h("design:paramtypes",[m.GridApi,o.ColumnApi]),h("design:returntype",void 0)],a.prototype,"agWire",null),g([n.PreDestroy,h("design:type",Function),h("design:paramtypes",[]),h("design:returntype",void 0)],a.prototype,"destroy",null),g([n.PostConstruct,h("design:type",Function),h("design:paramtypes",[]),h("design:returntype",void 0)],a.prototype,"init",null),a=b=g([n.Bean("gridOptionsWrapper")],a);var b}();b.GridOptionsWrapper=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(5),h=c(7),i=c(6),j=c(6),k=c(3),l=function(){function a(){this.allSyncListeners={},this.allAsyncListeners={},this.globalSyncListeners=[],this.globalAsyncListeners=[],this.asyncFunctionsQueue=[],this.scheduled=!1}return b=a,a.prototype.setBeans=function(a,b,c){if(void 0===c&&(c=null),this.logger=a.create("EventService"),c){var d=b.useAsyncEvents();this.addGlobalListener(c,d)}},a.prototype.getListenerList=function(a,b){var c=b?this.allAsyncListeners:this.allSyncListeners,d=c[a];return d||(d=[],c[a]=d),d},a.prototype.addEventListener=function(a,b,c){if(void 0===c&&(c=!1),this.assertNotDeprecated(a)){var d=this.getListenerList(a,c);d.indexOf(b)<0&&d.push(b)}},a.prototype.assertNotDeprecated=function(a){return"floatingRowDataChanged"!==a||(console.warn("ag-Grid: floatingRowDataChanged is now called pinnedRowDataChanged"),!1)},a.prototype.addModalPriorityEventListener=function(a,c,d){void 0===d&&(d=!1),this.assertNotDeprecated(a)&&this.addEventListener(a+b.PRIORITY,c,d)},a.prototype.addGlobalListener=function(a,b){void 0===b&&(b=!1),b?this.globalAsyncListeners.push(a):this.globalSyncListeners.push(a)},a.prototype.removeEventListener=function(a,b,c){void 0===c&&(c=!1);var d=this.getListenerList(a,c);h.Utils.removeFromArray(d,b)},a.prototype.removeGlobalListener=function(a){h.Utils.removeFromArray(this.globalSyncListeners,a)},a.prototype.dispatchEvent=function(a,b){b||(b={}),this.dispatchToListeners(a,b,!0),this.dispatchToListeners(a,b,!1)},a.prototype.dispatchToListeners=function(a,c,d){var e=this,f=d?this.globalAsyncListeners:this.globalSyncListeners;this.getListenerList(a+b.PRIORITY,d).forEach(function(a){d?e.dispatchAsync(function(){return a(c)}):a(c)}),this.getListenerList(a,d).forEach(function(a){d?e.dispatchAsync(function(){return a(c)}):a(c)}),f.forEach(function(b){d?e.dispatchAsync(function(){return b(a,c)}):b(a,c)})},a.prototype.dispatchAsync=function(a){this.asyncFunctionsQueue.push(a),this.scheduled||(setTimeout(this.flushAsyncQueue.bind(this),0),this.scheduled=!0)},a.prototype.flushAsyncQueue=function(){this.scheduled=!1;var a=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],a.forEach(function(a){return a()})},a.PRIORITY="-P1",d([f(0,j.Qualifier("loggerFactory")),f(1,j.Qualifier("gridOptionsWrapper")),f(2,j.Qualifier("globalEventListener")),e("design:type",Function),e("design:paramtypes",[g.LoggerFactory,k.GridOptionsWrapper,Function]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=b=d([i.Bean("eventService")],a);var b}();b.EventService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(3),h=c(6),i=c(6),j=function(){function a(){}return a.prototype.setBeans=function(a){this.logging=a.isDebug()},a.prototype.create=function(a){return new k(a,this.isLogging.bind(this))},a.prototype.isLogging=function(){return this.logging},d([f(0,i.Qualifier("gridOptionsWrapper")),e("design:type",Function),e("design:paramtypes",[g.GridOptionsWrapper]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([h.Bean("loggerFactory")],a)}();b.LoggerFactory=j;var k=function(){function a(a,b){this.name=a,this.isLoggingFunc=b}return a.prototype.isLogging=function(){return this.isLoggingFunc()},a.prototype.log=function(a){this.isLoggingFunc()&&console.log("ag-Grid."+this.name+": "+a)},a}();b.Logger=k},function(a,b,c){"use strict";function d(a,b){var c=[null].concat(b);return new(a.bind.apply(a,c))}function e(a,b,c){var d=m(a,a.constructor.name);d.postConstructMethods||(d.preConstructMethods=[]),d.preConstructMethods.push(b)}function f(a,b,c){var d=m(a,a.constructor.name);d.postConstructMethods||(d.postConstructMethods=[]),d.postConstructMethods.push(b)}function g(a,b,c){var d=m(a,a.constructor.name);d.preDestroyMethods||(d.preDestroyMethods=[]),d.preDestroyMethods.push(b)}function h(a){return function(b){m(b.prototype,b.name).beanName=a}}function i(a){return function(b,c,d){k(b,a,!1,b,c,null)}}function j(a){return function(b,c,d){k(b,a,!0,b,c,null)}}function k(a,b,c,d,e,f){if(null===b)return void console.error("ag-Grid: Autowired name should not be null");if("number"==typeof f)return void console.error("ag-Grid: Autowired should be on an attribute");var g=m(d,a.constructor.name);g.agClassAttributes||(g.agClassAttributes=[]),g.agClassAttributes.push({attributeName:e,beanName:b,optional:c})}function l(a){return function(b,c,d){var e;if("number"==typeof d){var f=void 0;c?(e=m(b,b.constructor.name),f=c):(e=m(b.prototype,b.prototype.constructor.name),f="agConstructor"),e.autowireMethods||(e.autowireMethods={}),e.autowireMethods[f]||(e.autowireMethods[f]={}),e.autowireMethods[f][d]=a}}}function m(a,b){return a.__agBeanMetaData||(a.__agBeanMetaData={}),a.__agBeanMetaData[b]||(a.__agBeanMetaData[b]={}),a.__agBeanMetaData[b]}Object.defineProperty(b,"__esModule",{value:!0});var n=c(7),o=function(){function a(a,b){if(this.beans={},this.componentsMappedByName={},this.destroyed=!1,a&&a.beans){this.contextParams=a,this.logger=b,this.logger.log(">> creating ag-Application Context"),this.setupComponents(),this.createBeans();var c=n.Utils.mapObject(this.beans,function(a){return a.beanInstance});this.wireBeans(c),this.logger.log(">> ag-Application Context ready - component is alive")}}return a.prototype.setupComponents=function(){var a=this;this.contextParams.components&&this.contextParams.components.forEach(function(b){return a.addComponent(b)})},a.prototype.addComponent=function(a){var b=a.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=b.toUpperCase();this.componentsMappedByName[c]=a.theClass},a.prototype.createComponent=function(a){var b=a.nodeName;if(this.componentsMappedByName&&this.componentsMappedByName[b]){var c=new this.componentsMappedByName[b];return this.wireBean(c),this.copyAttributesFromNode(a,c.getGui()),c.attributesSet(),c}return null},a.prototype.copyAttributesFromNode=function(a,b){if(a.attributes)for(var c=a.attributes.length,d=0;d<c;d++){var e=a.attributes[d];b.setAttribute(e.name,e.value)}},a.prototype.wireBean=function(a){if(!a)throw Error("Can't wire to bean since it is null");this.wireBeans([a])},a.prototype.wireBeans=function(a){this.autoWireBeans(a),this.methodWireBeans(a),this.preConstruct(a),this.postConstruct(a)},a.prototype.createBeans=function(){var a=this;this.contextParams.beans.forEach(this.createBeanEntry.bind(this)),this.contextParams.overrideBeans&&this.contextParams.overrideBeans.forEach(this.createBeanEntry.bind(this)),n.Utils.iterateObject(this.beans,function(b,c){var e;c.bean.prototype.__agBeanMetaData&&c.bean.prototype.__agBeanMetaData[c.bean.name]&&c.bean.prototype.__agBeanMetaData[c.bean.name].autowireMethods&&c.bean.prototype.__agBeanMetaData[c.bean.name].autowireMethods.agConstructor&&(e=c.bean.prototype.__agBeanMetaData[c.bean.name].autowireMethods.agConstructor);var f=a.getBeansForParameters(e,c.bean.name),g=d(c.bean,f);c.beanInstance=g,a.logger.log("bean "+a.getBeanName(g)+" created")})},a.prototype.createBeanEntry=function(a){var b=a.prototype.__agBeanMetaData[a.name];if(!b){var c=void 0;return c=a.prototype.constructor?a.prototype.constructor.name:""+a,void console.error("context item "+c+" is not a bean")}var d={bean:a,beanInstance:null,beanName:b.beanName};this.beans[b.beanName]=d},a.prototype.autoWireBeans=function(a){var b=this;a.forEach(function(a){return b.autoWireBean(a)})},a.prototype.methodWireBeans=function(a){var b=this;a.forEach(function(a){if(!a)throw Error("Can't wire to bean since it is null");return b.methodWireBean(a)})},a.prototype.autoWireBean=function(a){for(var b=this,c=a.__proto__,d=this;null!=c;){var e=function(){var e=c.constructor.name;if(a&&a.__agBeanMetaData&&a.__agBeanMetaData[e]&&a.__agBeanMetaData[e].agClassAttributes){var f=a.__agBeanMetaData[e].agClassAttributes;if(!f)return{value:void 0};var g=d.getBeanName(c);f.forEach(function(c){var d=b.lookupBeanInstance(g,c.beanName,c.optional);a[c.attributeName]=d})}c=c.__proto__}();if("object"==typeof e)return e.value}},a.prototype.getBeanName=function(a){var b=a.constructor.toString();return b.substring(9,b.indexOf("("))},a.prototype.methodWireBean=function(a){var b,c=this;a.__agBeanMetaData&&a.__agBeanMetaData[a.constructor.name]&&(b=a.__agBeanMetaData[a.constructor.name].autowireMethods),n.Utils.iterateObject(b,function(b,d){if("agConstructor"!==b){var e=c.getBeanName(a),f=c.getBeansForParameters(d,e);a[b].apply(a,f)}})},a.prototype.getBeansForParameters=function(a,b){var c=this,d=[];return a&&n.Utils.iterateObject(a,function(a,e){var f=c.lookupBeanInstance(b,e);d[Number(a)]=f}),d},a.prototype.lookupBeanInstance=function(a,b,c){if(void 0===c&&(c=!1),"context"===b)return this;if(this.contextParams.seed&&this.contextParams.seed.hasOwnProperty(b))return this.contextParams.seed[b];var d=this.beans[b];return d?d.beanInstance:(c||console.error("ag-Grid: unable to find bean reference "+b+" while initialising "+a),null)},a.prototype.postConstruct=function(a){a.forEach(function(a){a.__agBeanMetaData&&a.__agBeanMetaData[a.constructor.name]&&a.__agBeanMetaData[a.constructor.name].postConstructMethods&&a.__agBeanMetaData[a.constructor.name].postConstructMethods.forEach(function(b){return a[b]()})})},a.prototype.preConstruct=function(a){a.forEach(function(a){a.__agBeanMetaData&&a.__agBeanMetaData[a.constructor.name]&&a.__agBeanMetaData[a.constructor.name].preConstructMethods&&a.__agBeanMetaData[a.constructor.name].preConstructMethods.forEach(function(b){return a[b]()})})},a.prototype.getBean=function(a){return this.lookupBeanInstance("getBean",a,!0)},a.prototype.destroy=function(){this.destroyed||(this.logger.log(">> Shutting down ag-Application Context"),n.Utils.iterateObject(this.beans,function(a,b){var c=b.beanInstance;c.__agBeanMetaData&&c.__agBeanMetaData[c.constructor.name]&&c.__agBeanMetaData[c.constructor.name].preDestroyMethods&&c.__agBeanMetaData[c.constructor.name].preDestroyMethods.forEach(function(a){return c[a]()})}),this.destroyed=!0,this.logger.log(">> ag-Application Context shut down - component is dead"))},a}();b.Context=o,b.PreConstruct=e,b.PostConstruct=f,b.PreDestroy=g,b.Bean=h,b.Autowired=i,b.Optional=j,b.Qualifier=l},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,d=/([^\s,]+)/g,e=function(){function a(){this.timestamp=(new Date).getTime()}return a.prototype.print=function(a){var b=(new Date).getTime()-this.timestamp;console.log(a+" = "+b),this.timestamp=(new Date).getTime()},a}();b.Timer=e;var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=/[&<>"']/g,h=function(){function a(){}return a.areEventsNear=function(a,b,c){if(0===c)return!1;var d=Math.abs(a.clientX-b.clientX),e=Math.abs(a.clientY-b.clientY);return Math.max(d,e)<=c},a.shallowCompare=function(a,b){if(this.missing(a)&&this.missing(b))return!0;if(this.missing(a)||this.missing(b))return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},a.getNameOfClass=function(a){var b=/function (.{1,})\(/,c=a.toString(),d=b.exec(c);return d&&d.length>1?d[1]:""},a.values=function(a){var b=[];return this.iterateObject(a,function(a,c){b.push(c)}),b},a.getValueUsingField=function(a,b,c){if(b&&a){if(c){for(var d=b.split("."),e=a,f=0;f<d.length;f++)if(e=e[d[f]],this.missing(e))return null;return e}return a[b]}},a.getScrollLeft=function(a,b){var c=a.scrollLeft;return b&&(c=Math.abs(c),(this.isBrowserSafari()||this.isBrowserChrome())&&(c=a.scrollWidth-a.clientWidth-c)),c},a.cleanNumber=function(a){return"string"==typeof a&&(a=parseInt(a)),a="number"==typeof a?Math.floor(a):null},a.setScrollLeft=function(a,b,c){c&&((this.isBrowserSafari()||this.isBrowserChrome())&&(b=a.scrollWidth-a.clientWidth-b),this.isBrowserFirefox()&&(b*=-1)),a.scrollLeft=b},a.iterateObject=function(a,b){if(!this.missing(a))for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b(e,f)}},a.cloneObject=function(a){for(var b={},c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b[e]=f}return b},a.map=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=b(e);c.push(f)}return c},a.mapObject=function(b,c){var d=[];return a.iterateObject(b,function(a,b){d.push(c(b))}),d},a.forEach=function(a,b){if(a)for(var c=0;c<a.length;c++){var d=a[c];b(d,c)}},a.filter=function(a,b){var c=[];return a.forEach(function(a){b(a)&&c.push(a)}),c},a.getAllKeysInObjects=function(a){var b={};return a.forEach(function(a){a&&Object.keys(a).forEach(function(a){return b[a]=null})}),Object.keys(b)},a.mergeDeep=function(b,c){this.exists(c)&&this.iterateObject(c,function(c,d){var e=b[c];return null==e?void(b[c]=d):"object"==typeof e&&d?void a.mergeDeep(e,d):void(d&&(b[c]=d))})},a.assign=function(a,b){this.exists(b)&&this.iterateObject(b,function(b,c){a[b]=c})},a.parseYyyyMmDdToDate=function(a,b){try{if(!a)return null;if(-1===a.indexOf(b))return null;var c=a.split(b);return 3!=c.length?null:new Date(Number(c[0]),Number(c[1])-1,Number(c[2]))}catch(a){return null}},a.serializeDateToYyyyMmDd=function(b,c){return b?b.getFullYear()+c+a.pad(b.getMonth()+1,2)+c+a.pad(b.getDate(),2):null},a.pad=function(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c},a.pushAll=function(a,b){this.missing(b)||this.missing(a)||b.forEach(function(b){return a.push(b)})},a.createArrayOfNumbers=function(a,b){for(var c=[],d=a;d<=b;d++)c.push(d);return c},a.getFunctionParameters=function(a){var b=a.toString().replace(c,""),e=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(d);return null===e?[]:e},a.find=function(a,b,c){if(null===a||void 0===a)return null;if(!Array.isArray(a)){var d=this.values(a);return this.find(d,b,c)}for(var e,f=a,g=0;g<f.length;g++){var h=f[g];if("string"==typeof b){if(h[b]===c){e=h;break}}else{if(b(h)){e=h;break}}}return e},a.toStrings=function(a){return this.map(a,function(a){return void 0!==a&&null!==a&&a.toString?a.toString():null})},a.iterateArray=function(a,b){for(var c=0;c<a.length;c++){b(a[c],c)}},a.isNode=function(a){return"function"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName},a.isElement=function(a){return"function"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},a.isNodeOrElement=function(a){return this.isNode(a)||this.isElement(a)},a.isEventFromPrintableCharacter=function(c){var d=String.fromCharCode(c.charCode);return b._.exists(c.key)?1===c.key.length:a.PRINTABLE_CHARACTERS.indexOf(d)>=0},a.addChangeListener=function(a,b){a.addEventListener("changed",b),a.addEventListener("paste",b),a.addEventListener("input",b),a.addEventListener("keydown",b),a.addEventListener("keyup",b)},a.makeNull=function(a){return null===a||void 0===a||""===a?null:a},a.missing=function(a){return!this.exists(a)},a.missingOrEmpty=function(a){return this.missing(a)||0===a.length},a.missingOrEmptyObject=function(a){return this.missing(a)||0===Object.keys(a).length},a.exists=function(a){return null!==a&&void 0!==a&&""!==a},a.anyExists=function(a){if(a)for(var b=0;b<a.length;b++)if(this.exists(a[b]))return!0;return!1},a.existsAndNotEmpty=function(a){return this.exists(a)&&a.length>0},a.removeAllChildren=function(a){if(a)for(;a.hasChildNodes();)a.removeChild(a.lastChild)},a.removeElement=function(a,b){this.removeFromParent(a.querySelector(b))},a.removeFromParent=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},a.isVisible=function(a){return null!==a.offsetParent},a.loadTemplate=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},a.addOrRemoveCssClass=function(a,b,c){c?this.addCssClass(a,b):this.removeCssClass(a,b)},a.callIfPresent=function(a){a&&a()},a.addCssClass=function(a,b){var c=this;if(b&&0!==b.length){if(b.indexOf(" ")>=0)return void b.split(" ").forEach(function(b){return c.addCssClass(a,b)});if(a.classList)a.classList.add(b);else if(a.className&&a.className.length>0){var d=a.className.split(" ");d.indexOf(b)<0&&(d.push(b),a.className=d.join(" "))}else a.className=b}},a.containsClass=function(a,b){if(a.classList)return a.classList.contains(b);if(a.className){var c=a.className===b,d=a.className.indexOf(" "+b+" ")>=0,e=0===a.className.indexOf(b+" "),f=a.className.lastIndexOf(" "+b)===a.className.length-b.length-1;return c||d||e||f}return!1},a.getElementAttribute=function(a,b){if(a.attributes){if(a.attributes[b]){return a.attributes[b].value}return null}return null},a.offsetHeight=function(a){return a&&a.clientHeight?a.clientHeight:0},a.offsetWidth=function(a){return a&&a.clientWidth?a.clientWidth:0},a.removeCssClass=function(a,b){if(a.className&&a.className.length>0){var c=a.className.split(" "),d=c.indexOf(b);d>=0&&(c.splice(d,1),a.className=c.join(" "))}},a.removeRepeatsFromArray=function(a,b){if(a)for(var c=a.length-2;c>=0;c--){var d=a[c]===b,e=a[c+1]===b;d&&e&&a.splice(c+1,1)}},a.removeFromArray=function(a,b){a.indexOf(b)>=0&&a.splice(a.indexOf(b),1)},a.removeAllFromArray=function(a,b){b.forEach(function(b){a.indexOf(b)>=0&&a.splice(a.indexOf(b),1)})},a.insertIntoArray=function(a,b,c){a.splice(c,0,b)},a.insertArrayIntoArray=function(a,b,c){if(!this.missing(a)&&!this.missing(b))for(var d=b.length-1;d>=0;d--){var e=b[d];this.insertIntoArray(a,e,c)}},a.moveInArray=function(a,b,c){var d=this;b.forEach(function(b){d.removeFromArray(a,b)}),b.slice().reverse().forEach(function(b){d.insertIntoArray(a,b,c)})},a.defaultComparator=function(a,b,c){function d(a,b){return a>b?1:a<b?-1:0}void 0===c&&(c=!1);var e=null===a||void 0===a,f=null===b||void 0===b;if(e&&f)return 0;if(e)return-1;if(f)return 1;if("string"==typeof a){if(!c)return d(a,b);try{return a.localeCompare(b)}catch(c){return d(a,b)}}return a<b?-1:a>b?1:0},a.compareArrays=function(a,b){if(this.missing(a)&&this.missing(b))return!0;if(this.missing(a)||this.missing(b))return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},a.ensureDomOrder=function(a,b,c){c&&c.nextSibling===b||(c?c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):a.firstChild&&a.insertBefore(b,a.firstChild))},a.insertWithDomOrder=function(a,b,c){c?c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},a.toStringOrNull=function(a){return this.exists(a)&&a.toString?a.toString():null},a.formatWidth=function(a){return"number"==typeof a?a+"px":a},a.formatNumberTwoDecimalPlacesAndCommas=function(a){return"number"!=typeof a?"":(Math.round(100*a)/100).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},a.formatNumberCommas=function(a){return"number"!=typeof a?"":a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},a.prependDC=function(a,b){this.exists(a.firstChild)?a.insertBefore(b,a.firstChild):a.appendChild(b)},a.createIcon=function(a,b,c,d){var e=document.createElement("span");return e.appendChild(this.createIconNoSpan(a,b,c,d)),e},a.createIconNoSpan=function(a,b,c,d){var e;if(c&&c.getColDef().icons&&(e=c.getColDef().icons[a]),!e&&b.getIcons()&&(e=b.getIcons()[a]),e){var f=void 0;if("function"==typeof e)f=e();else{if("string"!=typeof e)throw"icon from grid options needs to be a string or a function";f=e}if("string"==typeof f)return this.loadTemplate(f);if(this.isNodeOrElement(f))return f;throw"iconRenderer should return back a string or a dom object"}return d?d():null},a.addStylesToElement=function(a,b){b&&Object.keys(b).forEach(function(c){a.style[c]=b[c]})},a.isHorizontalScrollShowing=function(a){return a.clientWidth<a.scrollWidth},a.isVerticalScrollShowing=function(a){return a.clientHeight<a.scrollHeight},a.getScrollbarWidth=function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},a.isKeyPressed=function(a,b){return(a.which||a.keyCode)===b},a.setVisible=function(a,b){this.addOrRemoveCssClass(a,"ag-hidden",!b)},a.setHidden=function(a,b){this.addOrRemoveCssClass(a,"ag-visibility-hidden",b)},a.isBrowserIE=function(){return void 0===this.isIE&&(this.isIE=!!document.documentMode),this.isIE},a.isBrowserEdge=function(){return void 0===this.isEdge&&(this.isEdge=!this.isBrowserIE()&&!!window.StyleMedia),this.isEdge},a.isBrowserSafari=function(){if(void 0===this.isSafari){var a=window;this.isSafari=Object.prototype.toString.call(a.HTMLElement).indexOf("Constructor")>0||function(a){return"[object SafariRemoteNotification]"===a.toString()}(!a.safari||a.safari.pushNotification)}return this.isSafari},a.isBrowserChrome=function(){if(void 0===this.isChrome){var a=window;this.isChrome=!!a.chrome&&!!a.chrome.webstore}return this.isChrome},a.isBrowserFirefox=function(){if(void 0===this.isFirefox){var a=window;this.isFirefox=void 0!==a.InstallTrigger}return this.isFirefox},a.getTarget=function(a){var b=a;return b.target||b.srcElement},a.getBodyWidth=function(){return document.body?document.body.clientWidth:window.innerHeight?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:-1},a.getBodyHeight=function(){return document.body?document.body.clientHeight:window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:-1},a.setCheckboxState=function(a,b){"boolean"==typeof b?(a.checked=b,a.indeterminate=!1):a.indeterminate=!0},a.traverseNodesWithKey=function(a,b){function c(a){a.forEach(function(a){if(a.group){d.push(a.key);var e=d.join("|");b(a,e),c(a.childrenAfterGroup),d.pop()}})}var d=[];c(a)},a.isNumeric=function(a){return""!==a&&(!isNaN(parseFloat(a))&&isFinite(a))},a.escape=function(a){return null===a?null:a.replace?a.replace(g,function(a){return f[a]}):a},a.normalizeWheel=function(a){var b=0,c=0,d=0,e=0;return"detail"in a&&(c=a.detail),"wheelDelta"in a&&(c=-a.wheelDelta/120),"wheelDeltaY"in a&&(c=-a.wheelDeltaY/120),"wheelDeltaX"in a&&(b=-a.wheelDeltaX/120),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(b=c,c=0),d=10*b,e=10*c,"deltaY"in a&&(e=a.deltaY),"deltaX"in a&&(d=a.deltaX),(d||e)&&a.deltaMode&&(1==a.deltaMode?(d*=40,e*=40):(d*=800,e*=800)),d&&!b&&(b=d<1?-1:1),e&&!c&&(c=e<1?-1:1),{spinX:b,spinY:c,pixelX:d,pixelY:e}},a.debounce=function(a,b,c){void 0===c&&(c=!1);var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}},a.executeInAWhile=function(a){this.executeAfter(a,400)},a.executeNextVMTurn=function(a){this.executeAfter(a,0)},a.executeAfter=function(a,b){a.length>0&&setTimeout(function(){a.forEach(function(a){return a()})},b)},a.referenceCompare=function(a,b){return null==a&&null==b||(null!=a||!b)&&((!a||null!=b)&&a===b)},a.get=function(b,c,d){if(null==b)return d;if(c.indexOf(".")>-1){var e=c.split("."),f=e[0],g=b[f];return null!=g?a.get(g,e.slice(1,e.length).join("."),d):d}var g=b[c];return null!=g?g:d},a.addSafePassiveEventListener=function(b,c,d){b.addEventListener(c,d,a.passiveEvents.indexOf(c)>-1?{passive:!0}:null)},a.PRINTABLE_CHARACTERS="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890!\"£$%^&*()_+-=[];'#,./|<>?:@~{}",a.passiveEvents=["touchstart","touchend","touchmove","touchcancel"],a}();b.Utils=h;var i=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this.nextValue=a,this.step=b}return a.prototype.next=function(){var a=this.nextValue;return this.nextValue+=this.step,a},a.prototype.peek=function(){return this.nextValue},a.prototype.skip=function(a){this.nextValue+=a},a}();b.NumberSequence=i,b._=h},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){}return a.STEP_EVERYTHING=0,a.STEP_FILTER=1,a.STEP_SORT=2,a.STEP_MAP=3,a.STEP_AGGREGATE=4,a.STEP_PIVOT=5,a.ROW_BUFFER_SIZE=10,a.LAYOUT_INTERVAL=500,a.EXPORT_TYPE_DRAG_COPY="dragCopy",a.EXPORT_TYPE_CLIPBOARD="clipboard",a.EXPORT_TYPE_EXCEL="excel",a.EXPORT_TYPE_CSV="csv",a.KEY_BACKSPACE=8,a.KEY_TAB=9,a.KEY_ENTER=13,a.KEY_SHIFT=16,a.KEY_ESCAPE=27,a.KEY_SPACE=32,a.KEY_LEFT=37,a.KEY_UP=38,a.KEY_RIGHT=39,a.KEY_DOWN=40,a.KEY_DELETE=46,a.KEY_A=65,a.KEY_C=67,a.KEY_V=86,a.KEY_D=68,a.KEY_F2=113,a.KEY_PAGE_UP=33,a.KEY_PAGE_DOWN=34,a.KEY_PAGE_HOME=36,a.KEY_PAGE_END=35,a.KEY_PAGE_UP_NAME="pageUp",a.KEY_PAGE_DOWN_NAME="pageDown",a.KEY_PAGE_HOME_NAME="home",a.KEY_PAGE_END_NAME="end",a.KEY_CTRL_UP_NAME="ctrlUp",a.KEY_CTRL_LEFT_NAME="ctrlLeft",a.KEY_CTRL_RIGHT_NAME="ctrlRight",a.KEY_CTRL_DOWN_NAME="ctrlDown",a.ROW_MODEL_TYPE_INFINITE="infinite",a.ROW_MODEL_TYPE_VIEWPORT="viewport",a.ROW_MODEL_TYPE_IN_MEMORY="inMemory",a.ROW_MODEL_TYPE_ENTERPRISE="enterprise",a.ALWAYS="always",a.ONLY_WHEN_GROUPING="onlyWhenGrouping",a.PINNED_TOP="top",a.PINNED_BOTTOM="bottom",a.VERTICAL_SCROLL_KEYS_ID="verticalScrollKeys",a.HORIZONTAL_SCROLL_KEYS_ID="horizontalScrollKeys",a.DIAGONAL_SCROLL_KEYS_ID="diagonalScrollKeys",a.VERTICAL_SCROLL_KEYS={id:a.VERTICAL_SCROLL_KEYS_ID,bindings:[{id:a.KEY_PAGE_UP_NAME,ctlRequired:!1,altRequired:!1,keyCode:a.KEY_PAGE_UP},{id:a.KEY_PAGE_DOWN_NAME,ctlRequired:!1,altRequired:!1,keyCode:a.KEY_PAGE_DOWN},{id:a.KEY_CTRL_UP_NAME,ctlRequired:!0,altRequired:!1,keyCode:a.KEY_UP},{id:a.KEY_CTRL_DOWN_NAME,ctlRequired:!0,altRequired:!1,keyCode:a.KEY_DOWN}]},a.HORIZONTAL_SCROLL_KEYS={id:a.HORIZONTAL_SCROLL_KEYS_ID,bindings:[{id:a.KEY_CTRL_LEFT_NAME,ctlRequired:!0,altRequired:!1,keyCode:a.KEY_LEFT},{id:a.KEY_CTRL_RIGHT_NAME,ctlRequired:!0,altRequired:!1,
keyCode:a.KEY_RIGHT}]},a.DIAGONAL_SCROLL_KEYS={id:a.DIAGONAL_SCROLL_KEYS_ID,bindings:[{id:a.KEY_PAGE_HOME_NAME,ctlRequired:!1,altRequired:!1,keyCode:a.KEY_PAGE_HOME},{id:a.KEY_PAGE_END_NAME,ctlRequired:!1,altRequired:!1,keyCode:a.KEY_PAGE_END}]},a}();b.Constants=c},function(a,b,c){"use strict";function d(a){(a.rowDeselected||a.onRowDeselected)&&console.warn("ag-grid: as of v3.4 rowDeselected no longer exists. Please check the docs.")}Object.defineProperty(b,"__esModule",{value:!0});var e=c(10),f=c(7),g=function(){function a(){}return a.getEventCallbacks=function(){return a.EVENT_CALLBACKS||(a.EVENT_CALLBACKS=[],a.EVENTS.forEach(function(b){a.EVENT_CALLBACKS.push(a.getCallbackForEvent(b))})),a.EVENT_CALLBACKS},a.copyAttributesToGridOptions=function(b,c){d(c),"object"!=typeof b&&(b={});var e=b;return a.ARRAY_PROPERTIES.concat(a.STRING_PROPERTIES).concat(a.OBJECT_PROPERTIES).concat(a.FUNCTION_PROPERTIES).forEach(function(a){void 0!==c[a]&&(e[a]=c[a])}),a.BOOLEAN_PROPERTIES.forEach(function(b){void 0!==c[b]&&(e[b]=a.toBoolean(c[b]))}),a.NUMBER_PROPERTIES.forEach(function(b){void 0!==c[b]&&(e[b]=a.toNumber(c[b]))}),a.getEventCallbacks().forEach(function(a){void 0!==c[a]&&(e[a]=c[a])}),b},a.getCallbackForEvent=function(a){return!a||a.length<2?a:"on"+a[0].toUpperCase()+a.substr(1)},a.processOnChange=function(b,c,f,g){if(b){d(b);var h=c;a.ARRAY_PROPERTIES.concat(a.OBJECT_PROPERTIES).concat(a.STRING_PROPERTIES).forEach(function(a){b[a]&&(h[a]=b[a].currentValue)}),a.BOOLEAN_PROPERTIES.forEach(function(c){b[c]&&(h[c]=a.toBoolean(b[c].currentValue))}),a.NUMBER_PROPERTIES.forEach(function(c){b[c]&&(h[c]=a.toNumber(b[c].currentValue))}),a.getEventCallbacks().forEach(function(a){b[a]&&(h[a]=b[a].currentValue)}),b.showToolPanel&&f.showToolPanel(a.toBoolean(b.showToolPanel.currentValue)),b.quickFilterText&&f.setQuickFilter(b.quickFilterText.currentValue),b.rowData&&f.setRowData(b.rowData.currentValue),b.floatingTopRowData&&f.setFloatingTopRowData(b.floatingTopRowData.currentValue),b.floatingBottomRowData&&f.setFloatingBottomRowData(b.floatingBottomRowData.currentValue),b.columnDefs&&f.setColumnDefs(b.columnDefs.currentValue),b.datasource&&f.setDatasource(b.datasource.currentValue),b.headerHeight&&f.setHeaderHeight(a.toNumber(b.headerHeight.currentValue)),b.paginationPageSize&&f.paginationSetPageSize(a.toNumber(b.paginationPageSize.currentValue)),b.pivotMode&&g.setPivotMode(a.toBoolean(b.pivotMode.currentValue)),b.groupRemoveSingleChildren&&f.setGroupRemoveSingleChildren(a.toBoolean(b.groupRemoveSingleChildren.currentValue)),f.dispatchEvent(e.Events.EVENT_COMPONENT_STATE_CHANGED,b)}},a.toBoolean=function(a){return"boolean"==typeof a?a:"string"==typeof a&&("TRUE"===a.toUpperCase()||""==a)},a.toNumber=function(a){return"number"==typeof a?a:"string"==typeof a?Number(a):void 0},a.EVENTS=[],a.STRING_PROPERTIES=["sortingOrder","rowClass","rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","headerCellTemplate","quickFilterText","rowModelType","editType","domLayout","clipboardDeliminator","rowGroupPanelShow"],a.OBJECT_PROPERTIES=["rowStyle","context","autoGroupColumnDef","groupColumnDef","localeText","icons","datasource","enterpriseDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultExportParams","columnTypes"],a.ARRAY_PROPERTIES=["slaveGrids","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData"],a.NUMBER_PROPERTIES=["rowHeight","rowBuffer","colWidth","headerHeight","groupHeaderHeight","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","minColWidth","maxColWidth","viewportRowModelPageSize","viewportRowModelBufferSize","layoutInterval","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","scrollbarWidth","paginationStartPage","infiniteBlockSize"],a.BOOLEAN_PROPERTIES=["toolPanelSuppressRowGroups","toolPanelSuppressValues","toolPanelSuppressPivots","toolPanelSuppressPivotMode","suppressRowClickSelection","suppressCellSelection","suppressHorizontalScroll","debug","enableColResize","enableCellExpressions","enableSorting","enableServerSideSorting","enableFilter","enableServerSideFilter","angularCompileRows","angularCompileFilters","angularCompileHeaders","groupSuppressAutoColumn","groupSelectsChildren","groupIncludeFooter","groupUseEntireRow","groupSuppressRow","groupSuppressBlankHeader","forPrint","suppressMenuHide","rowDeselection","unSortIcon","suppressMultiSort","suppressScrollLag","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","suppressParentsInRowNodes","showToolPanel","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","suppressEnterprise","pivotPanelShow","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","suppressMenuFilterPanel","suppressMenuMainPanel","suppressMenuColumnPanel","enableStatusBar","alwaysShowStatusBar","rememberGroupStateWhenNewData","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressUseColIdForGroups","suppressCopyRowsToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","suppressRowHoverClass","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","enableRtl","suppressClickEdit","enableGroupEdit","embedFullWidthRows","suppressTabbing","suppressPaginationPanel","floatingFilter","groupHideOpenParents","groupMultiAutoColumn","pagination","stopEditingWhenGridLosesFocus","paginationAutoPageSize","suppressScrollOnNewData","purgeClosedRowNodes","cacheQuickFilter","deltaRowDataMode","ensureDomOrder","accentedSort","pivotTotals","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns"],a.FUNCTION_PROPERTIES=["headerCellRenderer","localeTextFunc","groupRowInnerRenderer","groupRowInnerRendererFramework","dateComponent","dateComponentFramework","groupRowRenderer","groupRowRendererFramework","isScrollLag","isExternalFilterPresent","getRowHeight","doesExternalFilterPass","getRowClass","getRowStyle","getHeaderCellTemplate","traverseNode","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getNodeChildDetails","groupRowAggNodes","getRowNodeId","isFullWidthCell","fullWidthCellRenderer","fullWidthCellRendererFramework","doesDataFlower","processSecondaryColDef","processSecondaryColGroupDef","getBusinessKeyForNode","sendToClipboard","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup"],a.ALL_PROPERTIES=a.ARRAY_PROPERTIES.concat(a.OBJECT_PROPERTIES).concat(a.STRING_PROPERTIES).concat(a.NUMBER_PROPERTIES).concat(a.FUNCTION_PROPERTIES).concat(a.BOOLEAN_PROPERTIES),a}();b.ComponentUtil=g,f.Utils.iterateObject(e.Events,function(a,b){g.EVENTS.push(b)})},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){}return a.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",a.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",a.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",a.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",a.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",a.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",a.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",a.EVENT_COLUMN_MOVED="columnMoved",a.EVENT_COLUMN_VISIBLE="columnVisible",a.EVENT_COLUMN_PINNED="columnPinned",a.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",a.EVENT_COLUMN_RESIZED="columnResized",a.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",a.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",a.EVENT_ROW_GROUP_OPENED="rowGroupOpened",a.EVENT_ROW_DATA_CHANGED="rowDataChanged",a.EVENT_ROW_DATA_UPDATED="rowDataUpdated",a.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",a.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",a.EVENT_MODEL_UPDATED="modelUpdated",a.EVENT_CELL_CLICKED="cellClicked",a.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",a.EVENT_CELL_CONTEXT_MENU="cellContextMenu",a.EVENT_CELL_VALUE_CHANGED="cellValueChanged",a.EVENT_ROW_VALUE_CHANGED="rowValueChanged",a.EVENT_CELL_FOCUSED="cellFocused",a.EVENT_ROW_SELECTED="rowSelected",a.EVENT_SELECTION_CHANGED="selectionChanged",a.EVENT_CELL_MOUSE_OVER="cellMouseOver",a.EVENT_CELL_MOUSE_OUT="cellMouseOut",a.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",a.EVENT_FILTER_CHANGED="filterChanged",a.EVENT_FILTER_MODIFIED="filterModified",a.EVENT_SORT_CHANGED="sortChanged",a.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",a.EVENT_ROW_CLICKED="rowClicked",a.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",a.EVENT_GRID_READY="gridReady",a.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",a.EVENT_VIEWPORT_CHANGED="viewportChanged",a.EVENT_DRAG_STARTED="dragStarted",a.EVENT_DRAG_STOPPED="dragStopped",a.EVENT_ROW_EDITING_STARTED="rowEditingStarted",a.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",a.EVENT_CELL_EDITING_STARTED="cellEditingStarted",a.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",a.EVENT_ITEMS_ADDED="itemsAdded",a.EVENT_ITEMS_REMOVED="itemsRemoved",a.EVENT_BODY_SCROLL="bodyScroll",a.EVENT_FLASH_CELLS="flashCells",a.EVENT_PAGINATION_CHANGED="paginationChanged",a.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",a.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",a.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",a.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",a.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",a.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",a.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",a.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",a}();b.Events=c},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(12),g=c(22),h=c(81),i=c(38),j=c(14),k=c(26),l=c(3),m=c(23),n=c(30),o=c(4),p=c(8),q=c(6),r=c(37),s=c(52),t=c(33),u=c(34),v=c(7),w=c(67),x=c(60),y=c(58),z=c(100),A=c(31),B=c(78),C=c(79),D=function(){function a(){}return a.prototype.init=function(){switch(this.rowModel.getType()){case p.Constants.ROW_MODEL_TYPE_IN_MEMORY:this.inMemoryRowModel=this.rowModel;break;case p.Constants.ROW_MODEL_TYPE_INFINITE:this.infinitePageRowModel=this.rowModel;break;case p.Constants.ROW_MODEL_TYPE_ENTERPRISE:this.enterpriseRowModel=this.rowModel}},a.prototype.__getAlignedGridService=function(){return this.alignedGridsService},a.prototype.getDataAsCsv=function(a){return this.csvCreator.getDataAsCsv(a)},a.prototype.exportDataAsCsv=function(a){this.csvCreator.exportDataAsCsv(a)},a.prototype.getDataAsExcel=function(a){return this.excelCreator||console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise"),this.excelCreator.getDataAsExcelXml(a)},a.prototype.exportDataAsExcel=function(a){this.excelCreator||console.warn("ag-Grid: Excel export is only available in ag-Grid Enterprise"),this.excelCreator.exportDataAsExcel(a)},a.prototype.setEnterpriseDatasource=function(a){this.gridOptionsWrapper.isRowModelEnterprise()?this.rowModel.setDatasource(a):console.warn("ag-Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_ENTERPRISE+"'")},a.prototype.setDatasource=function(a){this.gridOptionsWrapper.isRowModelInfinite()?this.rowModel.setDatasource(a):console.warn("ag-Grid: you can only use a datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_INFINITE+"'")},a.prototype.setViewportDatasource=function(a){this.gridOptionsWrapper.isRowModelViewport()?this.rowModel.setViewportDatasource(a):console.warn("ag-Grid: you can only use a viewport datasource when gridOptions.rowModelType is '"+p.Constants.ROW_MODEL_TYPE_VIEWPORT+"'")},a.prototype.setRowData=function(a){if(this.gridOptionsWrapper.isRowModelDefault())if(this.gridOptionsWrapper.isDeltaRowDataMode()){var b=this.immutableService.createTransactionForRowData(a);this.inMemoryRowModel.updateRowData(b)}else this.selectionController.reset(),this.inMemoryRowModel.setRowData(a);else console.log("cannot call setRowData unless using normal row model")},a.prototype.setFloatingTopRowData=function(a){console.warn("ag-Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()"),this.setPinnedTopRowData(a)},a.prototype.setFloatingBottomRowData=function(a){console.warn("ag-Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()"),this.setPinnedBottomRowData(a)},a.prototype.getFloatingTopRowCount=function(){return console.warn("ag-Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()"),this.getPinnedTopRowCount()},a.prototype.getFloatingBottomRowCount=function(){return console.warn("ag-Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()"),this.getPinnedBottomRowCount()},a.prototype.getFloatingTopRow=function(a){return console.warn("ag-Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()"),this.getPinnedTopRow(a)},a.prototype.getFloatingBottomRow=function(a){return console.warn("ag-Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()"),this.getPinnedBottomRow(a)},a.prototype.setPinnedTopRowData=function(a){this.pinnedRowModel.setPinnedTopRowData(a)},a.prototype.setPinnedBottomRowData=function(a){this.pinnedRowModel.setPinnedBottomRowData(a)},a.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},a.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},a.prototype.getPinnedTopRow=function(a){return this.pinnedRowModel.getPinnedTopRow(a)},a.prototype.getPinnedBottomRow=function(a){return this.pinnedRowModel.getPinnedBottomRow(a)},a.prototype.setColumnDefs=function(a){this.columnController.setColumnDefs(a)},a.prototype.expireValueCache=function(){this.valueCache.expire()},a.prototype.getVerticalPixelRange=function(){return this.gridPanel.getVerticalPixelRange()},a.prototype.refreshCells=function(a){if(void 0===a&&(a={}),Array.isArray(a))return void console.warn("since ag-Grid v11.1, refreshCells() now takes parameters, please see the documentation.");this.rowRenderer.refreshCells(a)},a.prototype.redrawRows=function(a){void 0===a&&(a={}),a&&a.rowNodes?this.rowRenderer.redrawRows(a.rowNodes):this.rowRenderer.redrawAfterModelUpdate()},a.prototype.refreshView=function(){console.warn("ag-Grid: since v11.1, refreshView() is deprecated, please call redrawRows() instead"),this.redrawRows()},a.prototype.refreshRows=function(a){console.warn("since ag-Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead"),this.refreshCells({rowNodes:a})},a.prototype.rowDataChanged=function(a){console.log("ag-Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node"),this.redrawRows()},a.prototype.softRefreshView=function(){console.warn("ag-Grid: since v11.1, softRefreshView() is deprecated, call refreshCells(params) instead."),this.refreshCells({volatile:!0})},a.prototype.refreshGroupRows=function(){console.warn("ag-Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should not be necessary to only refresh the group rows."),this.refreshCells()},a.prototype.setFunctionsReadOnly=function(a){this.gridOptionsWrapper.setProperty("functionsReadOnly",a)},a.prototype.refreshHeader=function(){this.headerRenderer.refreshHeader()},a.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},a.prototype.isAdvancedFilterPresent=function(){return this.filterManager.isAdvancedFilterPresent()},a.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},a.prototype.getModel=function(){return this.rowModel},a.prototype.onGroupExpandedOrCollapsed=function(a){v.Utils.missing(this.inMemoryRowModel)&&console.log("ag-Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model"),v.Utils.exists(a)&&console.log("ag-Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is not longer used, the grid will refresh all rows"),this.inMemoryRowModel.refreshModel({step:p.Constants.STEP_MAP})},a.prototype.refreshInMemoryRowModel=function(a){v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call refreshInMemoryRowModel unless using normal row model");var b=p.Constants.STEP_EVERYTHING,c={group:p.Constants.STEP_EVERYTHING,filter:p.Constants.STEP_FILTER,map:p.Constants.STEP_MAP,aggregate:p.Constants.STEP_AGGREGATE,sort:p.Constants.STEP_SORT,pivot:p.Constants.STEP_PIVOT};if(v.Utils.exists(a)&&(b=c[a]),v.Utils.missing(b))return void console.error("ag-Grid: invalid step "+a+", available steps are "+Object.keys(c).join(", "));var d={step:b,keepRenderedRows:!0,animate:!0,keepEditingRows:!0};this.inMemoryRowModel.refreshModel(d)},a.prototype.getRowNode=function(a){return v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call getRowNode unless using normal row model"),this.inMemoryRowModel.getRowNode(a)},a.prototype.expandAll=function(){v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call expandAll unless using normal row model"),this.inMemoryRowModel.expandOrCollapseAll(!0)},a.prototype.collapseAll=function(){v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call collapseAll unless using normal row model"),this.inMemoryRowModel.expandOrCollapseAll(!1)},a.prototype.addVirtualRowListener=function(a,b,c){"string"!=typeof a&&console.log("ag-Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener."),this.addRenderedRowListener(a,b,c)},a.prototype.addRenderedRowListener=function(a,b,c){"virtualRowRemoved"===a&&(console.log("ag-Grid: event virtualRowRemoved is deprecated, now called renderedRowRemoved"),a=""),"virtualRowSelected"===a&&console.log("ag-Grid: event virtualRowSelected is deprecated, to register for individual row selection events, add a listener directly to the row node."),this.rowRenderer.addRenderedRowListener(a,b,c)},a.prototype.setQuickFilter=function(a){this.filterManager.setQuickFilter(a)},a.prototype.selectIndex=function(a,b,c){console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead"),c&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionController.selectIndex(a,b)},a.prototype.deselectIndex=function(a,b){void 0===b&&(b=!1),console.log("ag-Grid: do not use api for selection, call node.setSelected(value) instead"),b&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),this.selectionController.deselectIndex(a)},a.prototype.selectNode=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1),console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead"),c&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),a.setSelectedParams({newValue:!0,clearSelection:!b})},a.prototype.deselectNode=function(a,b){void 0===b&&(b=!1),console.log("ag-Grid: API for selection is deprecated, call node.setSelected(value) instead"),b&&console.log("ag-Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it"),a.setSelectedParams({newValue:!1})},a.prototype.selectAll=function(){this.selectionController.selectAllRowNodes()},a.prototype.deselectAll=function(){this.selectionController.deselectAllRowNodes()},a.prototype.selectAllFiltered=function(){this.selectionController.selectAllRowNodes(!0)},a.prototype.deselectAllFiltered=function(){this.selectionController.deselectAllRowNodes(!0)},a.prototype.recomputeAggregates=function(){v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call recomputeAggregates unless using normal row model"),this.inMemoryRowModel.refreshModel({step:p.Constants.STEP_AGGREGATE})},a.prototype.sizeColumnsToFit=function(){if(this.gridOptionsWrapper.isForPrint())return void console.warn("ag-grid: sizeColumnsToFit does not work when forPrint=true");this.gridPanel.sizeColumnsToFit()},a.prototype.showLoadingOverlay=function(){this.gridPanel.showLoadingOverlay()},a.prototype.showNoRowsOverlay=function(){this.gridPanel.showNoRowsOverlay()},a.prototype.hideOverlay=function(){this.gridPanel.hideOverlay()},a.prototype.isNodeSelected=function(a){return console.log("ag-Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead"),a.isSelected()},a.prototype.getSelectedNodesById=function(){return console.error("ag-Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead"),null},a.prototype.getSelectedNodes=function(){return this.selectionController.getSelectedNodes()},a.prototype.getSelectedRows=function(){return this.selectionController.getSelectedRows()},a.prototype.getBestCostNodeSelection=function(){return this.selectionController.getBestCostNodeSelection()},a.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},a.prototype.ensureColIndexVisible=function(a){console.warn("ag-Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.")},a.prototype.ensureColumnVisible=function(a){this.gridPanel.ensureColumnVisible(a)},a.prototype.ensureIndexVisible=function(a){this.gridPanel.ensureIndexVisible(a)},a.prototype.ensureNodeVisible=function(a){this.gridCore.ensureNodeVisible(a)},a.prototype.forEachLeafNode=function(a){v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call forEachNode unless using normal row model"),this.inMemoryRowModel.forEachLeafNode(a)},a.prototype.forEachNode=function(a){this.rowModel.forEachNode(a)},a.prototype.forEachNodeAfterFilter=function(a){v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call forEachNodeAfterFilter unless using normal row model"),this.inMemoryRowModel.forEachNodeAfterFilter(a)},a.prototype.forEachNodeAfterFilterAndSort=function(a){v.Utils.missing(this.inMemoryRowModel)&&console.log("cannot call forEachNodeAfterFilterAndSort unless using normal row model"),this.inMemoryRowModel.forEachNodeAfterFilterAndSort(a)},a.prototype.getFilterApiForColDef=function(a){return console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterApi instead"),this.getFilterInstance(a)},a.prototype.getFilterInstance=function(a){var b=this.columnController.getPrimaryColumn(a);if(b)return this.filterManager.getFilterComponent(b)},a.prototype.getFilterApi=function(a){return console.warn("ag-Grid: getFilterApi is deprecated, use getFilterInstance instead"),this.getFilterInstance(a)},a.prototype.destroyFilter=function(a){var b=this.columnController.getPrimaryColumn(a);if(b)return this.filterManager.destroyFilter(b)},a.prototype.getColumnDef=function(a){var b=this.columnController.getPrimaryColumn(a);return b?b.getColDef():null},a.prototype.onFilterChanged=function(){this.filterManager.onFilterChanged()},a.prototype.onSortChanged=function(){this.sortController.onSortChanged()},a.prototype.setSortModel=function(a){this.sortController.setSortModel(a)},a.prototype.getSortModel=function(){return this.sortController.getSortModel()},a.prototype.setFilterModel=function(a){this.filterManager.setFilterModel(a)},a.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},a.prototype.getFocusedCell=function(){return this.focusedCellController.getFocusedCell()},a.prototype.clearFocusedCell=function(){return this.focusedCellController.clearFocusedCell()},a.prototype.setFocusedCell=function(a,b,c){this.focusedCellController.setFocusedCell(a,b,c,!0)},a.prototype.setHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(l.GridOptionsWrapper.PROP_HEADER_HEIGHT,a),this.doLayout()},a.prototype.setGroupHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(l.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,a),this.doLayout()},a.prototype.setFloatingFiltersHeight=function(a){this.gridOptionsWrapper.setProperty(l.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,a),this.doLayout()},a.prototype.setPivotGroupHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(l.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,a),this.doLayout()},a.prototype.setPivotHeaderHeight=function(a){this.gridOptionsWrapper.setProperty(l.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,a),this.doLayout()},a.prototype.showToolPanel=function(a){this.gridCore.showToolPanel(a)},a.prototype.isToolPanelShowing=function(){return this.gridCore.isToolPanelShowing()},a.prototype.doLayout=function(){this.gridCore.doLayout()},a.prototype.resetRowHeights=function(){v.Utils.exists(this.inMemoryRowModel)&&this.inMemoryRowModel.resetRowHeights()},a.prototype.setGroupRemoveSingleChildren=function(a){this.gridOptionsWrapper.setProperty(l.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,a)},a.prototype.onRowHeightChanged=function(){v.Utils.exists(this.inMemoryRowModel)&&this.inMemoryRowModel.onRowHeightChanged()},a.prototype.getValue=function(a,b){var c=this.columnController.getPrimaryColumn(a);return v.Utils.missing(c)&&(c=this.columnController.getGridColumn(a)),v.Utils.missing(c)?null:this.valueService.getValue(c,b)},a.prototype.addEventListener=function(a,b){var c=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addEventListener(a,b,c)},a.prototype.addGlobalListener=function(a){var b=this.gridOptionsWrapper.useAsyncEvents();this.eventService.addGlobalListener(a,b)},a.prototype.removeEventListener=function(a,b){this.eventService.removeEventListener(a,b)},a.prototype.removeGlobalListener=function(a){this.eventService.removeGlobalListener(a)},a.prototype.dispatchEvent=function(a,b){this.eventService.dispatchEvent(a,b)},a.prototype.destroy=function(){this.context.destroy()},a.prototype.resetQuickFilter=function(){this.rowModel.forEachNode(function(a){return a.quickFilterAggregateText=null})},a.prototype.getRangeSelections=function(){return this.rangeController?this.rangeController.getCellRanges():(console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),null)},a.prototype.addRangeSelection=function(a){this.rangeController||console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),this.rangeController.addRange(a)},a.prototype.clearRangeSelection=function(){this.rangeController||console.warn("ag-Grid: cell range selection is only available in ag-Grid Enterprise"),this.rangeController.clearSelection()},a.prototype.copySelectedRowsToClipboard=function(a,b){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copySelectedRowsToClipboard(a,b)},a.prototype.copySelectedRangeToClipboard=function(a){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copySelectedRangeToClipboard(a)},a.prototype.copySelectedRangeDown=function(){this.clipboardService||console.warn("ag-Grid: clipboard is only available in ag-Grid Enterprise"),this.clipboardService.copyRangeDown()},a.prototype.showColumnMenuAfterButtonClick=function(a,b){var c=this.columnController.getPrimaryColumn(a);this.menuFactory.showMenuAfterButtonClick(c,b)},a.prototype.showColumnMenuAfterMouseClick=function(a,b){var c=this.columnController.getPrimaryColumn(a);this.menuFactory.showMenuAfterMouseEvent(c,b)},a.prototype.tabToNextCell=function(){return this.rowRenderer.tabToNextCell(!1)},a.prototype.tabToPreviousCell=function(){return this.rowRenderer.tabToNextCell(!0)},a.prototype.stopEditing=function(a){void 0===a&&(a=!1),this.rowRenderer.stopEditing(a)},a.prototype.startEditingCell=function(a){var b=this.columnController.getGridColumn(a.colKey);if(!b)return void console.warn("ag-Grid: no column found for "+a.colKey);var c={rowIndex:a.rowIndex,floating:null,column:b},d=new u.GridCell(c);this.gridPanel.ensureIndexVisible(a.rowIndex),this.rowRenderer.startEditingCell(d,a.keyPress,a.charPress)},a.prototype.addAggFunc=function(a,b){this.aggFuncService&&this.aggFuncService.addAggFunc(a,b)},a.prototype.addAggFuncs=function(a){this.aggFuncService&&this.aggFuncService.addAggFuncs(a)},a.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},a.prototype.updateRowData=function(a){this.inMemoryRowModel?(this.inMemoryRowModel.updateRowData(a),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells()):this.infinitePageRowModel?this.infinitePageRowModel.updateRowData(a):console.error("ag-Grid: updateRowData() only works with InMemoryRowModel and InfiniteRowModel."),this.gridOptionsWrapper.isSuppressChangeDetection()||this.rowRenderer.refreshCells()},a.prototype.insertItemsAtIndex=function(a,b,c){void 0===c&&(c=!1),console.warn("ag-Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:b,addIndex:a,update:null,remove:null})},a.prototype.removeItems=function(a,b){void 0===b&&(b=!1),console.warn("ag-Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");var c=a.map(function(a){return a.data});this.updateRowData({add:null,addIndex:null,update:null,remove:c})},a.prototype.addItems=function(a,b){void 0===b&&(b=!1),console.warn("ag-Grid: addItems() is deprecated, use updateRowData(transaction) instead."),this.updateRowData({add:a,addIndex:null,update:null,remove:null})},a.prototype.refreshVirtualPageCache=function(){console.warn("ag-Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},a.prototype.refreshInfinitePageCache=function(){console.warn("ag-Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead"),this.refreshInfiniteCache()},a.prototype.refreshInfiniteCache=function(){this.infinitePageRowModel?this.infinitePageRowModel.refreshCache():console.warn("ag-Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.")},a.prototype.purgeVirtualPageCache=function(){console.warn("ag-Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfinitePageCache()},a.prototype.purgeInfinitePageCache=function(){console.warn("ag-Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead"),this.purgeInfiniteCache()},a.prototype.purgeInfiniteCache=function(){this.infinitePageRowModel?this.infinitePageRowModel.purgeCache():console.warn("ag-Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.")},a.prototype.purgeEnterpriseCache=function(a){this.enterpriseRowModel?this.enterpriseRowModel.purgeCache(a):console.warn("ag-Grid: api.purgeEnterpriseCache is only available when rowModelType='enterprise'.")},a.prototype.getVirtualRowCount=function(){return console.warn("ag-Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead"),this.getInfiniteRowCount()},a.prototype.getInfiniteRowCount=function(){
if(this.infinitePageRowModel)return this.infinitePageRowModel.getVirtualRowCount();console.warn("ag-Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.")},a.prototype.isMaxRowFound=function(){if(this.infinitePageRowModel)return this.infinitePageRowModel.isMaxRowFound();console.warn("ag-Grid: api.isMaxRowFound is only available when rowModelType='virtual'.")},a.prototype.setVirtualRowCount=function(a,b){console.warn("ag-Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead"),this.setInfiniteRowCount(a,b)},a.prototype.setInfiniteRowCount=function(a,b){this.infinitePageRowModel?this.infinitePageRowModel.setVirtualRowCount(a,b):console.warn("ag-Grid: api.setVirtualRowCount is only available when rowModelType='virtual'.")},a.prototype.getVirtualPageState=function(){return console.warn("ag-Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},a.prototype.getInfinitePageState=function(){return console.warn("ag-Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead"),this.getCacheBlockState()},a.prototype.getCacheBlockState=function(){return this.infinitePageRowModel?this.infinitePageRowModel.getBlockState():this.enterpriseRowModel?this.enterpriseRowModel.getBlockState():void console.warn("ag-Grid: api.getCacheBlockState() is only available when rowModelType='infinite' or rowModelType='enterprise'.")},a.prototype.checkGridSize=function(){this.gridPanel.setBodyAndHeaderHeights()},a.prototype.getFirstDisplayedRow=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},a.prototype.getLastDisplayedRow=function(){return this.rowRenderer.getLastVirtualRenderedRow()},a.prototype.getDisplayedRowAtIndex=function(a){return this.rowModel.getRow(a)},a.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},a.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},a.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},a.prototype.paginationSetPageSize=function(a){this.gridOptionsWrapper.setProperty("paginationPageSize",a)},a.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},a.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},a.prototype.paginationGetRowCount=function(){return this.paginationProxy.getTotalRowCount()},a.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},a.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},a.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},a.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},a.prototype.paginationGoToPage=function(a){this.paginationProxy.goToPage(a)},d([q.Autowired("immutableService"),e("design:type",z.ImmutableService)],a.prototype,"immutableService",void 0),d([q.Autowired("csvCreator"),e("design:type",f.CsvCreator)],a.prototype,"csvCreator",void 0),d([q.Optional("excelCreator"),e("design:type",Object)],a.prototype,"excelCreator",void 0),d([q.Autowired("gridCore"),e("design:type",r.GridCore)],a.prototype,"gridCore",void 0),d([q.Autowired("rowRenderer"),e("design:type",g.RowRenderer)],a.prototype,"rowRenderer",void 0),d([q.Autowired("headerRenderer"),e("design:type",h.HeaderRenderer)],a.prototype,"headerRenderer",void 0),d([q.Autowired("filterManager"),e("design:type",i.FilterManager)],a.prototype,"filterManager",void 0),d([q.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([q.Autowired("selectionController"),e("design:type",k.SelectionController)],a.prototype,"selectionController",void 0),d([q.Autowired("gridOptionsWrapper"),e("design:type",l.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([q.Autowired("gridPanel"),e("design:type",m.GridPanel)],a.prototype,"gridPanel",void 0),d([q.Autowired("valueService"),e("design:type",n.ValueService)],a.prototype,"valueService",void 0),d([q.Autowired("alignedGridsService"),e("design:type",B.AlignedGridsService)],a.prototype,"alignedGridsService",void 0),d([q.Autowired("eventService"),e("design:type",o.EventService)],a.prototype,"eventService",void 0),d([q.Autowired("pinnedRowModel"),e("design:type",C.PinnedRowModel)],a.prototype,"pinnedRowModel",void 0),d([q.Autowired("context"),e("design:type",q.Context)],a.prototype,"context",void 0),d([q.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([q.Autowired("sortController"),e("design:type",s.SortController)],a.prototype,"sortController",void 0),d([q.Autowired("paginationProxy"),e("design:type",y.PaginationProxy)],a.prototype,"paginationProxy",void 0),d([q.Autowired("focusedCellController"),e("design:type",t.FocusedCellController)],a.prototype,"focusedCellController",void 0),d([q.Optional("rangeController"),e("design:type",Object)],a.prototype,"rangeController",void 0),d([q.Optional("clipboardService"),e("design:type",Object)],a.prototype,"clipboardService",void 0),d([q.Optional("aggFuncService"),e("design:type",Object)],a.prototype,"aggFuncService",void 0),d([q.Autowired("menuFactory"),e("design:type",Object)],a.prototype,"menuFactory",void 0),d([q.Autowired("cellRendererFactory"),e("design:type",w.CellRendererFactory)],a.prototype,"cellRendererFactory",void 0),d([q.Autowired("cellEditorFactory"),e("design:type",x.CellEditorFactory)],a.prototype,"cellEditorFactory",void 0),d([q.Autowired("valueCache"),e("design:type",A.ValueCache)],a.prototype,"valueCache",void 0),d([q.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([q.Bean("gridApi")],a)}();b.GridApi=D},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(6),h=c(13),i=c(99),j=c(14),k=c(30),l=c(3),m=c(8),n=c(7),o=function(a){function b(b,c,d,e,f,g,h){var i=a.call(this,b,c,d,e,f)||this;return i.suppressQuotes=g,i.columnSeparator=h,i.result="",i.lineOpened=!1,i}return d(b,a),b.prototype.prepare=function(a){},b.prototype.addCustomHeader=function(a){a&&(this.result+=a+"\r\n")},b.prototype.addCustomFooter=function(a){a&&(this.result+=a+"\r\n")},b.prototype.onNewHeaderGroupingRow=function(){return this.lineOpened&&(this.result+="\r\n"),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},b.prototype.onNewHeaderGroupingRowColumn=function(a,b,c){0!=b&&(this.result+=this.columnSeparator),this.result+=a;for(var d=1;d<=c;d++)this.result+=this.columnSeparator+this.putInQuotes("",this.suppressQuotes);this.lineOpened=!0},b.prototype.onNewHeaderRow=function(){return this.lineOpened&&(this.result+="\r\n"),{onColumn:this.onNewHeaderRowColumn.bind(this)}},b.prototype.onNewHeaderRowColumn=function(a,b,c){0!=b&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(a),this.suppressQuotes),this.lineOpened=!0},b.prototype.onNewBodyRow=function(){return this.lineOpened&&(this.result+="\r\n"),{onColumn:this.onNewBodyRowColumn.bind(this)}},b.prototype.onNewBodyRowColumn=function(a,b,c){0!=b&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(a,b,m.Constants.EXPORT_TYPE_CSV,c),this.suppressQuotes),this.lineOpened=!0},b.prototype.putInQuotes=function(a,b){if(b)return a;if(null===a||void 0===a)return'""';var c;return"string"==typeof a?c=a:"function"==typeof a.toString?c=a.toString():(console.warn("unknown value type during csv conversion"),c=""),'"'+c.replace(/"/g,'""')+'"'},b.prototype.parse=function(){return this.result},b}(h.BaseGridSerializingSession);b.CsvSerializingSession=o;var p=function(){function a(){}return a.prototype.export=function(a){var b=this.getMergedParamsAndData(a),c=b.mergedParams,d=b.data,e=c&&c.fileName&&0!==c.fileName.length,f=e?c.fileName:this.getDefaultFileName();return-1===f.indexOf(".")&&(f=f+"."+this.getDefaultFileExtension()),this.downloader.download(f,d,this.getMimeType()),d},a.prototype.getData=function(a){return this.getMergedParamsAndData(a).data},a.prototype.getMergedParamsAndData=function(a){var b=this.mergeDefaultParams(a);return{mergedParams:b,data:this.gridSerializer.serialize(this.createSerializingSession(b),b)}},a.prototype.mergeDefaultParams=function(a){var b=this.gridOptionsWrapper.getDefaultExportParams(),c={};return n._.assign(c,b),n._.assign(c,a),c},e([g.Autowired("downloader"),f("design:type",i.Downloader)],a.prototype,"downloader",void 0),e([g.Autowired("gridSerializer"),f("design:type",h.GridSerializer)],a.prototype,"gridSerializer",void 0),e([g.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a}();b.BaseCreator=p;var q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.exportDataAsCsv=function(a){return this.export(a)},b.prototype.getDataAsCsv=function(a){return this.getData(a)},b.prototype.getMimeType=function(){return"text/csv;charset=utf-8;"},b.prototype.getDefaultFileName=function(){return"export.csv"},b.prototype.getDefaultFileExtension=function(){return"csv"},b.prototype.createSerializingSession=function(a){return new o(this.columnController,this.valueService,this.gridOptionsWrapper,a?a.processCellCallback:null,a?a.processHeaderCallback:null,a&&a.suppressQuotes,a&&a.columnSeparator||",")},e([g.Autowired("columnController"),f("design:type",j.ColumnController)],b.prototype,"columnController",void 0),e([g.Autowired("valueService"),f("design:type",k.ValueService)],b.prototype,"valueService",void 0),b=e([g.Bean("csvCreator")],b)}(p);b.CsvCreator=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(14),h=c(8),i=c(7),j=c(26),k=c(3),l=c(20),m=c(2),n=c(97),o=c(15),p=c(79),q=function(){function a(a,b,c,d,e,f){this.columnController=a,this.valueService=b,this.gridOptionsWrapper=c,this.processCellCallback=d,this.processHeaderCallback=e,this.cellAndHeaderEscaper=f}return a.prototype.extractHeaderValue=function(a){var b=this.getHeaderName(this.processHeaderCallback,a);return null!==b&&void 0!==b||(b=""),this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(b):b},a.prototype.extractRowCellValue=function(a,b,c,d){var e,f=this.columnController.getRowGroupColumns().length>0;return e=d.group&&f&&0===b?this.createValueForGroupNode(d):this.valueService.getValue(a,d),e=this.processCell(d,a,e,this.processCellCallback,c),null!==e&&void 0!==e||(e=""),this.cellAndHeaderEscaper?this.cellAndHeaderEscaper(e):e},a.prototype.getHeaderName=function(a,b){return a?a({column:b,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnController.getDisplayNameForColumn(b,"csv",!0)},a.prototype.createValueForGroupNode=function(a){for(var b=[a.key];a.parent;)a=a.parent,b.push(a.key);return b.reverse().join(" -> ")},a.prototype.processCell=function(a,b,c,d,e){return d?d({column:b,node:a,value:c,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:e}):c},a}();b.BaseGridSerializingSession=q;var r=function(){function a(){}return a.prototype.serialize=function(a,b){function c(b){if((!e||!b.group)&&(!j||!b.footer)&&(!q||b.isSelected())&&!(k&&"top"===b.rowPinned||l&&"bottom"===b.rowPinned)){if(!(-1===b.level)||b.leafGroup){if(!t({node:b,api:u,context:v})){var c=a.onNewBodyRow();z.forEach(function(a,d){c.onColumn(a,d,b)})}}}}var d=function(){return!1},e=b&&b.skipGroups,f=b&&b.skipHeader,g=b&&b.columnGroups,j=b&&b.skipFooters,k=b&&b.skipPinnedTop,l=b&&b.skipPinnedBottom,m=b&&b.customHeader,o=b&&b.customFooter,p=b&&b.allColumns,q=b&&b.onlySelected,r=b&&b.columnKeys,s=b&&b.onlySelectedAllPages,t=b&&b.shouldRowBeSkipped||d,u=this.gridOptionsWrapper.getApi(),v=this.gridOptionsWrapper.getContext(),w=this.columnController.isPivotMode(),x=this.rowModel.getType()===h.Constants.ROW_MODEL_TYPE_IN_MEMORY,y=!x&&q;if(!x&&!q)return console.log("ag-Grid: getDataAsCsv is only available for standard row model"),"";var z,A=this.rowModel;if(!(z=i.Utils.existsAndNotEmpty(r)?this.columnController.getGridColumns(r):p&&!w?this.columnController.getAllPrimaryColumns():this.columnController.getAllDisplayedColumns())||0===z.length)return"";if(a.prepare(z),m&&a.addCustomHeader(b.customHeader),g){var B=new n.GroupInstanceIdCreator,C=this.displayedGroupCreator.createDisplayedGroups(z,this.columnController.getGridBalancedTree(),B);this.recursivelyAddHeaderGroups(C,a)}if(!f){var D=a.onNewHeaderRow();z.forEach(function(a,b){D.onColumn(a,b,null)})}if(this.pinnedRowModel.forEachPinnedTopRow(c),w)A.forEachPivotNode(c);else if(s||y){var E=this.selectionController.getSelectedNodes();E.forEach(function(a){c(a)})}else A.forEachNodeAfterFilterAndSort(c);return this.pinnedRowModel.forEachPinnedBottomRow(c),o&&a.addCustomFooter(b.customFooter),a.parse()},a.prototype.recursivelyAddHeaderGroups=function(a,b){var c;a.forEach(function(a){var b=a;b.getChildren&&(c=b.getChildren())}),a.length>0&&a[0]instanceof o.ColumnGroup&&this.doAddHeaderHeader(b,a),c&&this.recursivelyAddHeaderGroups(c,b)},a.prototype.doAddHeaderHeader=function(a,b){var c=a.onNewHeaderGroupingRow(),d=0;b.forEach(function(a){var b=a,e=b.getDefinition();c.onColumn(null!=e?e.headerName:"",d++,b.getLeafColumns().length-1)})},d([f.Autowired("displayedGroupCreator"),e("design:type",l.DisplayedGroupCreator)],a.prototype,"displayedGroupCreator",void 0),d([f.Autowired("columnController"),e("design:type",g.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([f.Autowired("pinnedRowModel"),e("design:type",p.PinnedRowModel)],a.prototype,"pinnedRowModel",void 0),d([f.Autowired("selectionController"),e("design:type",j.SelectionController)],a.prototype,"selectionController",void 0),d([f.Autowired("balancedColumnTreeBuilder"),e("design:type",m.BalancedColumnTreeBuilder)],a.prototype,"balancedColumnTreeBuilder",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",k.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("gridSerializer")],a)}();b.GridSerializer=r;!function(a){a[a.HEADER_GROUPING=0]="HEADER_GROUPING",a[a.HEADER=1]="HEADER",a[a.BODY=2]="BODY"}(b.RowType||(b.RowType={}))},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(15),i=c(16),j=c(3),k=c(19),l=c(2),m=c(20),n=c(21),o=c(4),p=c(17),q=c(5),r=c(10),s=c(96),t=c(18),u=c(97),v=c(6),w=c(23),x=c(56),y=c(98),z=c(31),A=function(){function a(){}return a.prototype.sizeColumnsToFit=function(a){this._columnController.sizeColumnsToFit(a)},a.prototype.setColumnGroupOpened=function(a,b,c){this._columnController.setColumnGroupOpened(a,b,c)},a.prototype.getColumnGroup=function(a,b){return this._columnController.getColumnGroup(a,b)},a.prototype.getDisplayNameForColumn=function(a,b){return this._columnController.getDisplayNameForColumn(a,b)},a.prototype.getDisplayNameForColumnGroup=function(a,b){return this._columnController.getDisplayNameForColumnGroup(a,b)},a.prototype.getColumn=function(a){return this._columnController.getPrimaryColumn(a)},a.prototype.setColumnState=function(a){return this._columnController.setColumnState(a)},a.prototype.getColumnState=function(){return this._columnController.getColumnState()},a.prototype.resetColumnState=function(){this._columnController.resetColumnState()},a.prototype.isPinning=function(){return this._columnController.isPinningLeft()||this._columnController.isPinningRight()},a.prototype.isPinningLeft=function(){return this._columnController.isPinningLeft()},a.prototype.isPinningRight=function(){return this._columnController.isPinningRight()},a.prototype.getDisplayedColAfter=function(a){return this._columnController.getDisplayedColAfter(a)},a.prototype.getDisplayedColBefore=function(a){return this._columnController.getDisplayedColBefore(a)},a.prototype.setColumnVisible=function(a,b){this._columnController.setColumnVisible(a,b)},a.prototype.setColumnsVisible=function(a,b){this._columnController.setColumnsVisible(a,b)},a.prototype.setColumnPinned=function(a,b){this._columnController.setColumnPinned(a,b)},a.prototype.setColumnsPinned=function(a,b){this._columnController.setColumnsPinned(a,b)},a.prototype.getAllColumns=function(){return this._columnController.getAllPrimaryColumns()},a.prototype.getAllGridColumns=function(){return this._columnController.getAllGridColumns()},a.prototype.getDisplayedLeftColumns=function(){return this._columnController.getDisplayedLeftColumns()},a.prototype.getDisplayedCenterColumns=function(){return this._columnController.getDisplayedCenterColumns()},a.prototype.getDisplayedRightColumns=function(){return this._columnController.getDisplayedRightColumns()},a.prototype.getAllDisplayedColumns=function(){return this._columnController.getAllDisplayedColumns()},a.prototype.getAllDisplayedVirtualColumns=function(){return this._columnController.getAllDisplayedVirtualColumns()},a.prototype.moveColumn=function(a,b){"number"==typeof a?(console.log("ag-Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead"),this._columnController.moveColumnByIndex(a,b)):this._columnController.moveColumn(a,b)},a.prototype.moveColumnByIndex=function(a,b){this._columnController.moveColumnByIndex(a,b)},a.prototype.moveColumns=function(a,b){this._columnController.moveColumns(a,b)},a.prototype.moveRowGroupColumn=function(a,b){this._columnController.moveRowGroupColumn(a,b)},a.prototype.setColumnAggFunc=function(a,b){this._columnController.setColumnAggFunc(a,b)},a.prototype.setColumnWidth=function(a,b,c){void 0===c&&(c=!0),this._columnController.setColumnWidth(a,b,c)},a.prototype.setPivotMode=function(a){this._columnController.setPivotMode(a)},a.prototype.isPivotMode=function(){return this._columnController.isPivotMode()},a.prototype.getSecondaryPivotColumn=function(a,b){return this._columnController.getSecondaryPivotColumn(a,b)},a.prototype.setValueColumns=function(a){this._columnController.setValueColumns(a)},a.prototype.getValueColumns=function(){return this._columnController.getValueColumns()},a.prototype.removeValueColumn=function(a){this._columnController.removeValueColumn(a)},a.prototype.removeValueColumns=function(a){this._columnController.removeValueColumns(a)},a.prototype.addValueColumn=function(a){this._columnController.addValueColumn(a)},a.prototype.addValueColumns=function(a){this._columnController.addValueColumns(a)},a.prototype.setRowGroupColumns=function(a){this._columnController.setRowGroupColumns(a)},a.prototype.removeRowGroupColumn=function(a){this._columnController.removeRowGroupColumn(a)},a.prototype.removeRowGroupColumns=function(a){this._columnController.removeRowGroupColumns(a)},a.prototype.addRowGroupColumn=function(a){this._columnController.addRowGroupColumn(a)},a.prototype.addRowGroupColumns=function(a){this._columnController.addRowGroupColumns(a)},a.prototype.getRowGroupColumns=function(){return this._columnController.getRowGroupColumns()},a.prototype.setPivotColumns=function(a){this._columnController.setPivotColumns(a)},a.prototype.removePivotColumn=function(a){this._columnController.removePivotColumn(a)},a.prototype.removePivotColumns=function(a){this._columnController.removePivotColumns(a)},a.prototype.addPivotColumn=function(a){this._columnController.addPivotColumn(a)},a.prototype.addPivotColumns=function(a){this._columnController.addPivotColumns(a)},a.prototype.getPivotColumns=function(){return this._columnController.getPivotColumns()},a.prototype.getLeftDisplayedColumnGroups=function(){return this._columnController.getLeftDisplayedColumnGroups()},a.prototype.getCenterDisplayedColumnGroups=function(){return this._columnController.getCenterDisplayedColumnGroups()},a.prototype.getRightDisplayedColumnGroups=function(){return this._columnController.getRightDisplayedColumnGroups()},a.prototype.getAllDisplayedColumnGroups=function(){return this._columnController.getAllDisplayedColumnGroups()},a.prototype.autoSizeColumn=function(a){return this._columnController.autoSizeColumn(a)},a.prototype.autoSizeColumns=function(a){return this._columnController.autoSizeColumns(a)},a.prototype.autoSizeAllColumns=function(){this._columnController.autoSizeAllColumns()},a.prototype.setSecondaryColumns=function(a){this._columnController.setSecondaryColumns(a)},a.prototype.columnGroupOpened=function(a,b){console.error("ag-Grid: columnGroupOpened no longer exists, use setColumnGroupOpened"),this.setColumnGroupOpened(a,b)},a.prototype.hideColumns=function(a,b){console.error("ag-Grid: hideColumns is deprecated, use setColumnsVisible"),this._columnController.setColumnsVisible(a,!b)},a.prototype.hideColumn=function(a,b){console.error("ag-Grid: hideColumn is deprecated, use setColumnVisible"),this._columnController.setColumnVisible(a,!b)},a.prototype.setState=function(a){return console.error("ag-Grid: setState is deprecated, use setColumnState"),this.setColumnState(a)},a.prototype.getState=function(){return console.error("ag-Grid: getState is deprecated, use getColumnState"),this.getColumnState()},a.prototype.resetState=function(){console.error("ag-Grid: resetState is deprecated, use resetColumnState"),this.resetColumnState()},a.prototype.getAggregationColumns=function(){return console.error("ag-Grid: getAggregationColumns is deprecated, use getValueColumns"),this._columnController.getValueColumns()},a.prototype.removeAggregationColumn=function(a){console.error("ag-Grid: removeAggregationColumn is deprecated, use removeValueColumn"),this._columnController.removeValueColumn(a)},a.prototype.removeAggregationColumns=function(a){console.error("ag-Grid: removeAggregationColumns is deprecated, use removeValueColumns"),this._columnController.removeValueColumns(a)},a.prototype.addAggregationColumn=function(a){console.error("ag-Grid: addAggregationColumn is deprecated, use addValueColumn"),this._columnController.addValueColumn(a)},a.prototype.addAggregationColumns=function(a){console.error("ag-Grid: addAggregationColumns is deprecated, use addValueColumns"),this._columnController.addValueColumns(a)},a.prototype.setColumnAggFunction=function(a,b){console.error("ag-Grid: setColumnAggFunction is deprecated, use setColumnAggFunc"),this._columnController.setColumnAggFunc(a,b)},a.prototype.getDisplayNameForCol=function(a){return console.error("ag-Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn"),this.getDisplayNameForColumn(a,null)},d([v.Autowired("columnController"),e("design:type",B)],a.prototype,"_columnController",void 0),a=d([v.Bean("columnApi")],a)}();b.ColumnApi=A;var B=function(){function a(){this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.secondaryColumnsPresent=!1,this.gridHeaderRowCount=0,this.displayedLeftColumns=[],this.displayedRightColumns=[],this.displayedCenterColumns=[],this.allDisplayedColumns=[],this.allDisplayedVirtualColumns=[],this.allDisplayedCenterVirtualColumns=[],this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.autoGroupsNeedBuilding=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}return a.prototype.init=function(){this.pivotMode=this.gridOptionsWrapper.isPivotMode()},a.prototype.setVirtualViewportLeftAndRight=function(){this.gridOptionsWrapper.isEnableRtl()?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},a.prototype.getDisplayedColumnsStartingAt=function(a){for(var b=a,c=[];g.Utils.exists(b);)c.push(b),b=this.getDisplayedColAfter(b);return c},a.prototype.checkDisplayedVirtualColumns=function(){if(g.Utils.exists(this.displayedCenterColumns)){var a=this.allDisplayedVirtualColumns.map(function(a){return a.getId()}).join("#");this.updateVirtualSets();a!==this.allDisplayedVirtualColumns.map(function(a){return a.getId()}).join("#")&&this.eventService.dispatchEvent(r.Events.EVENT_VIRTUAL_COLUMNS_CHANGED)}},a.prototype.setVirtualViewportPosition=function(a,b){(a!==this.scrollWidth||b!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=a,this.scrollPosition=b,this.bodyWidthDirty=!0,this.setVirtualViewportLeftAndRight(),this.ready&&this.checkDisplayedVirtualColumns())},a.prototype.isPivotMode=function(){return this.pivotMode},a.prototype.setPivotMode=function(a){if(a!==this.pivotMode){this.pivotMode=a,this.updateDisplayedColumns();var b=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED);this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,b)}},a.prototype.getSecondaryPivotColumn=function(a,b){if(!this.secondaryColumnsPresent)return null;var c=this.getPrimaryColumn(b),d=null;return this.secondaryColumns.forEach(function(b){var e=b.getColDef().pivotKeys,f=b.getColDef().pivotValueColumn,h=g.Utils.compareArrays(e,a),i=f===c;h&&i&&(d=b)}),d},a.prototype.setBeans=function(a){this.logger=a.create("ColumnController")},a.prototype.setFirstRightAndLastLeftPinned=function(){var a,b;this.gridOptionsWrapper.isEnableRtl()?(a=this.displayedLeftColumns?this.displayedLeftColumns[0]:null,b=this.displayedRightColumns?this.displayedRightColumns[this.displayedRightColumns.length-1]:null):(a=this.displayedLeftColumns?this.displayedLeftColumns[this.displayedLeftColumns.length-1]:null,b=this.displayedRightColumns?this.displayedRightColumns[0]:null),this.gridColumns.forEach(function(c){c.setLastLeftPinned(c===a),c.setFirstRightPinned(c===b)})},a.prototype.autoSizeColumns=function(a){for(var b=this,c=[],d=-1;0!==d;)d=0,this.actionOnGridColumns(a,function(a){if(!(c.indexOf(a)>=0)){var e=b.autoWidthCalculator.getPreferredWidthForColumn(a);if(e>0){var f=b.normaliseColumnWidth(a,e);a.setActualWidth(f),c.push(a),d++}return!0}});if(c.length>0){var e=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_RESIZED).withFinished(!0).withColumns(c);1===c.length&&e.withColumn(c[0]),this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_RESIZED,e)}},a.prototype.autoSizeColumn=function(a){this.autoSizeColumns([a])},a.prototype.autoSizeAllColumns=function(){var a=this.getAllDisplayedColumns();this.autoSizeColumns(a)},a.prototype.getColumnsFromTree=function(a){function b(a){for(var d=0;d<a.length;d++){var e=a[d];e instanceof i.Column?c.push(e):e instanceof t.OriginalColumnGroup&&b(e.getChildren())}}var c=[];return b(a),c},a.prototype.getAllDisplayedColumnGroups=function(){return this.displayedLeftColumnTree&&this.displayedRightColumnTree&&this.displayedCentreColumnTree?this.displayedLeftColumnTree.concat(this.displayedCentreColumnTree).concat(this.displayedRightColumnTree):null},a.prototype.getPrimaryColumnTree=function(){return this.primaryBalancedTree},a.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},a.prototype.getLeftDisplayedColumnGroups=function(){return this.displayedLeftColumnTree},a.prototype.getRightDisplayedColumnGroups=function(){return this.displayedRightColumnTree},a.prototype.getCenterDisplayedColumnGroups=function(){return this.displayedCentreColumnTree},a.prototype.getDisplayedColumnGroups=function(a){switch(a){case i.Column.PINNED_LEFT:return this.getLeftDisplayedColumnGroups();case i.Column.PINNED_RIGHT:return this.getRightDisplayedColumnGroups();default:return this.getCenterDisplayedColumnGroups()}},a.prototype.isColumnDisplayed=function(a){return this.getAllDisplayedColumns().indexOf(a)>=0},a.prototype.getAllDisplayedColumns=function(){return this.allDisplayedColumns},a.prototype.getAllDisplayedVirtualColumns=function(){return this.allDisplayedVirtualColumns},a.prototype.getDisplayedLeftColumnsForRow=function(a){return this.colSpanActive?this.getDisplayedColumnsForRow(a,this.displayedLeftColumns):this.displayedLeftColumns},a.prototype.getDisplayedRightColumnsForRow=function(a){return this.colSpanActive?this.getDisplayedColumnsForRow(a,this.displayedRightColumns):this.displayedRightColumns},a.prototype.getDisplayedColumnsForRow=function(a,b,c,d){for(var e=[],f=null,g=0;g<b.length;g++){var h=b[g],i=h.getColSpan(a);if(i>1){g+=i-1}if(!c||c(h)){var j=!!d&&d(h);0===e.length&&j&&f&&e.push(f),e.push(h)}f=h}return e},a.prototype.getAllDisplayedCenterVirtualColumnsForRow=function(a){var b=this;if(!this.colSpanActive)return this.allDisplayedCenterVirtualColumns;var c=function(a){return a.getLeft()>b.viewportLeft};return this.getDisplayedColumnsForRow(a,this.displayedCenterColumns,this.isColumnInViewport.bind(this),c)},a.prototype.isColumnInViewport=function(a){var b=a.getLeft(),c=a.getLeft()+a.getActualWidth(),d=b<this.viewportLeft&&c<this.viewportLeft,e=b>this.viewportRight&&c>this.viewportRight;return!d&&!e},a.prototype.getPinnedLeftContainerWidth=function(){return this.getWidthOfColsInList(this.displayedLeftColumns)},a.prototype.getPinnedRightContainerWidth=function(){return this.getWidthOfColsInList(this.displayedRightColumns)},a.prototype.updatePrimaryColumnList=function(a,b,c,d,e){var f=this;if(!g.Utils.missingOrEmpty(a)){var h=!1;if(a.forEach(function(a){var e=f.getPrimaryColumn(a);if(e){if(c){if(b.indexOf(e)>=0)return;b.push(e)}else{if(b.indexOf(e)<0)return;g.Utils.removeFromArray(b,e)}d(e),h=!0}}),h){this.updateDisplayedColumns();var i=new s.ColumnChangeEvent(e).withColumns(b);this.eventService.dispatchEvent(i.getType(),i)}}},a.prototype.setRowGroupColumns=function(a){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(a,this.rowGroupColumns,r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.setRowGroupActive.bind(this))},a.prototype.setRowGroupActive=function(a,b){a!==b.isRowGroupActive()&&(b.setRowGroupActive(a),a||b.setVisible(!0))},a.prototype.addRowGroupColumn=function(a){this.addRowGroupColumns([a])},a.prototype.addRowGroupColumns=function(a){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(a,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED)},
a.prototype.removeRowGroupColumns=function(a){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(a,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED)},a.prototype.removeRowGroupColumn=function(a){this.removeRowGroupColumns([a])},a.prototype.addPivotColumns=function(a){this.updatePrimaryColumnList(a,this.pivotColumns,!0,function(a){return a.setPivotActive(!0)},r.Events.EVENT_COLUMN_PIVOT_CHANGED)},a.prototype.setPivotColumns=function(a){this.setPrimaryColumnList(a,this.pivotColumns,r.Events.EVENT_COLUMN_PIVOT_CHANGED,function(a,b){b.setPivotActive(a)})},a.prototype.addPivotColumn=function(a){this.addPivotColumns([a])},a.prototype.removePivotColumns=function(a){this.updatePrimaryColumnList(a,this.pivotColumns,!1,function(a){return a.setPivotActive(!1)},r.Events.EVENT_COLUMN_PIVOT_CHANGED)},a.prototype.removePivotColumn=function(a){this.removePivotColumns([a])},a.prototype.setPrimaryColumnList=function(a,b,c,d){var e=this;b.length=0,g.Utils.exists(a)&&a.forEach(function(a){var c=e.getPrimaryColumn(a);b.push(c)}),this.primaryColumns.forEach(function(a){var c=b.indexOf(a)>=0;d(c,a)}),this.updateDisplayedColumns();var f=new s.ColumnChangeEvent(c).withColumns(b);this.eventService.dispatchEvent(f.getType(),f)},a.prototype.setValueColumns=function(a){this.setPrimaryColumnList(a,this.valueColumns,r.Events.EVENT_COLUMN_VALUE_CHANGED,this.setValueActive.bind(this))},a.prototype.setValueActive=function(a,b){if(a!==b.isValueActive()&&(b.setValueActive(a),a&&!b.getAggFunc())){var c=this.aggFuncService.getDefaultAggFunc(b);b.setAggFunc(c)}},a.prototype.addValueColumns=function(a){this.updatePrimaryColumnList(a,this.valueColumns,!0,this.setValueActive.bind(this,!0),r.Events.EVENT_COLUMN_VALUE_CHANGED)},a.prototype.addValueColumn=function(a){this.addValueColumns([a])},a.prototype.removeValueColumn=function(a){this.removeValueColumns([a])},a.prototype.removeValueColumns=function(a){this.updatePrimaryColumnList(a,this.valueColumns,!1,this.setValueActive.bind(this,!1),r.Events.EVENT_COLUMN_VALUE_CHANGED)},a.prototype.normaliseColumnWidth=function(a,b){return b<a.getMinWidth()&&(b=a.getMinWidth()),a.isGreaterThanMax(b)&&(b=a.getMaxWidth()),b},a.prototype.getPrimaryOrGridColumn=function(a){var b=this.getPrimaryColumn(a);return b||this.getGridColumn(a)},a.prototype.setColumnWidth=function(a,b,c){var d=this.getPrimaryOrGridColumn(a);if(d){b=this.normaliseColumnWidth(d,b);var e=d.getActualWidth()!==b;if(e&&(d.setActualWidth(b),this.setLeftValues()),this.updateBodyWidths(),this.checkDisplayedVirtualColumns(),c||e){var f=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_RESIZED).withColumn(d).withFinished(c);this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_RESIZED,f)}}},a.prototype.setColumnAggFunc=function(a,b){a.setAggFunc(b);var c=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_VALUE_CHANGED).withColumn(a);this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_VALUE_CHANGED,c)},a.prototype.moveRowGroupColumn=function(a,b){var c=this.rowGroupColumns[a];this.rowGroupColumns.splice(a,1),this.rowGroupColumns.splice(b,0,c);var d=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED);this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,d)},a.prototype.moveColumns=function(a,b){if(this.columnAnimationService.start(),b>this.gridColumns.length-a.length)return console.warn("ag-Grid: tried to insert columns in invalid location, toIndex = "+b),void console.warn("ag-Grid: remember that you should not count the moving columns when calculating the new index");var c=this.getGridColumns(a);if(this.doesMovePassRules(c,b)){g.Utils.moveInArray(this.gridColumns,c,b),this.updateDisplayedColumns();var d=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_MOVED).withToIndex(b).withColumns(c);1===c.length&&d.withColumn(c[0]),this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_MOVED,d),this.columnAnimationService.finish()}},a.prototype.doesMovePassRules=function(a,b){var c=this.gridColumns.slice();g.Utils.moveInArray(c,a,b);var d=!0;return this.columnUtils.depthFirstOriginalTreeSearch(this.gridBalancedTree,function(a){if(a instanceof t.OriginalColumnGroup){var b=a;if(b.getColGroupDef()&&b.getColGroupDef().marryChildren){var e=[];b.getLeafColumns().forEach(function(a){var b=c.indexOf(a);e.push(b)});Math.max.apply(Math,e)-Math.min.apply(Math,e)>b.getLeafColumns().length-1&&(d=!1)}}}),d},a.prototype.moveColumn=function(a,b){this.moveColumns([a],b)},a.prototype.moveColumnByIndex=function(a,b){var c=this.gridColumns[a];this.moveColumn(c,b)},a.prototype.getBodyContainerWidth=function(){return this.bodyWidth},a.prototype.getContainerWidth=function(a){switch(a){case i.Column.PINNED_LEFT:return this.leftWidth;case i.Column.PINNED_RIGHT:return this.rightWidth;default:return this.bodyWidth}},a.prototype.updateBodyWidths=function(){var a=this.getWidthOfColsInList(this.displayedCenterColumns),b=this.getWidthOfColsInList(this.displayedLeftColumns),c=this.getWidthOfColsInList(this.displayedRightColumns);this.bodyWidthDirty=this.bodyWidth!==a,(this.bodyWidth!==a||this.leftWidth!==b||this.rightWidth!==c)&&(this.bodyWidth=a,this.leftWidth=b,this.rightWidth=c,this.eventService.dispatchEvent(r.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED))},a.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},a.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},a.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},a.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},a.prototype.getDisplayedCenterColumns=function(){return this.displayedCenterColumns},a.prototype.getDisplayedLeftColumns=function(){return this.displayedLeftColumns},a.prototype.getDisplayedRightColumns=function(){return this.displayedRightColumns},a.prototype.getDisplayedColumns=function(a){switch(a){case i.Column.PINNED_LEFT:return this.getDisplayedLeftColumns();case i.Column.PINNED_RIGHT:return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},a.prototype.getAllPrimaryColumns=function(){return this.primaryColumns},a.prototype.getAllGridColumns=function(){return this.gridColumns},a.prototype.isEmpty=function(){return g.Utils.missingOrEmpty(this.gridColumns)},a.prototype.isRowGroupEmpty=function(){return g.Utils.missingOrEmpty(this.rowGroupColumns)},a.prototype.setColumnVisible=function(a,b){this.setColumnsVisible([a],b)},a.prototype.setColumnsVisible=function(a,b){this.columnAnimationService.start(),this.actionOnGridColumns(a,function(a){return a.setVisible(b),!0},function(){return new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_VISIBLE).withVisible(b)}),this.columnAnimationService.finish()},a.prototype.setColumnPinned=function(a,b){this.setColumnsPinned([a],b)},a.prototype.setColumnsPinned=function(a,b){this.columnAnimationService.start();var c;c=!0===b||b===i.Column.PINNED_LEFT?i.Column.PINNED_LEFT:b===i.Column.PINNED_RIGHT?i.Column.PINNED_RIGHT:null,this.actionOnGridColumns(a,function(a){return a.setPinned(c),!0},function(){return new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_PINNED).withPinned(c)}),this.columnAnimationService.finish()},a.prototype.actionOnGridColumns=function(a,b,c){var d=this;if(!g.Utils.missingOrEmpty(a)){var e=[];if(a.forEach(function(a){var c=d.getGridColumn(a);if(c){!1!==b(c)&&e.push(c)}}),0!==e.length&&(this.updateDisplayedColumns(),g.Utils.exists(c))){var f=c();f.withColumns(e),1===e.length&&f.withColumn(e[0]),this.eventService.dispatchEvent(f.getType(),f)}}},a.prototype.getDisplayedColBefore=function(a){var b=this.getAllDisplayedColumns(),c=b.indexOf(a);return c>0?b[c-1]:null},a.prototype.getDisplayedColAfter=function(a){var b=this.getAllDisplayedColumns(),c=b.indexOf(a);return c<b.length-1?b[c+1]:null},a.prototype.isPinningLeft=function(){return this.displayedLeftColumns.length>0},a.prototype.isPinningRight=function(){return this.displayedRightColumns.length>0},a.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var a=this.primaryColumns?this.primaryColumns.slice(0):[];return g.Utils.exists(this.groupAutoColumns)&&this.groupAutoColumns.forEach(function(b){return a.push(b)}),this.secondaryColumnsPresent&&this.secondaryColumns.forEach(function(b){return a.push(b)}),a},a.prototype.createStateItemFromColumn=function(a){var b=a.isRowGroupActive()?this.rowGroupColumns.indexOf(a):null,c=a.isPivotActive()?this.pivotColumns.indexOf(a):null,d=a.isValueActive()?a.getAggFunc():null;return{colId:a.getColId(),hide:!a.isVisible(),aggFunc:d,width:a.getActualWidth(),pivotIndex:c,pinned:a.getPinned(),rowGroupIndex:b}},a.prototype.getColumnState=function(){if(g.Utils.missing(this.primaryColumns))return[];var a=this.primaryColumns.map(this.createStateItemFromColumn.bind(this));return this.pivotMode||this.orderColumnStateList(a),a},a.prototype.orderColumnStateList=function(a){var b=this.gridColumns.map(function(a){return a.getColId()});a.sort(function(a,c){return b.indexOf(a.colId)-b.indexOf(c.colId)})},a.prototype.resetColumnState=function(){var a=this.getColumnsFromTree(this.primaryBalancedTree),b=[];a&&a.forEach(function(a){b.push({colId:a.getColId(),aggFunc:a.getColDef().aggFunc,hide:a.getColDef().hide,pinned:a.getColDef().pinned,rowGroupIndex:a.getColDef().rowGroupIndex,pivotIndex:a.getColDef().pivotIndex,width:a.getColDef().width})}),this.setColumnState(b)},a.prototype.setColumnState=function(a){var b=this;if(g.Utils.missingOrEmpty(this.primaryColumns))return!1;this.autoGroupsNeedBuilding=!0;var c=this.primaryColumns.slice();this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[];var d=!0,e={},f={};a&&a.forEach(function(a){var h=b.getPrimaryColumn(a.colId);h?(b.syncColumnWithStateItem(h,a,e,f),g.Utils.removeFromArray(c,h)):(console.warn("ag-grid: column "+a.colId+" not found"),d=!1)}),c.forEach(this.syncColumnWithNoState.bind(this)),this.rowGroupColumns.sort(this.sortColumnListUsingIndexes.bind(this,e)),this.pivotColumns.sort(this.sortColumnListUsingIndexes.bind(this,f)),this.copyDownGridColumns();var h=a.map(function(a){return a.colId});this.gridColumns.sort(function(a,b){return h.indexOf(a.getId())-h.indexOf(b.getId())}),this.updateDisplayedColumns();var i=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_EVERYTHING_CHANGED);return this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_EVERYTHING_CHANGED,i),d},a.prototype.sortColumnListUsingIndexes=function(a,b,c){return a[b.getId()]-a[c.getId()]},a.prototype.syncColumnWithNoState=function(a){a.setVisible(!1),a.setAggFunc(null),a.setPinned(null),a.setRowGroupActive(!1),a.setPivotActive(!1),a.setValueActive(!1)},a.prototype.syncColumnWithStateItem=function(a,b,c,d){a.setVisible(!b.hide),a.setPinned(b.pinned),b.width>=this.gridOptionsWrapper.getMinColWidth()&&a.setActualWidth(b.width),"string"==typeof b.aggFunc?(a.setAggFunc(b.aggFunc),a.setValueActive(!0),this.valueColumns.push(a)):(g.Utils.exists(b.aggFunc)&&console.warn("ag-Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it isintended for the column state to be stored and retrieved as simple JSON."),a.setAggFunc(null),a.setValueActive(!1)),"number"==typeof b.rowGroupIndex?(this.rowGroupColumns.push(a),a.setRowGroupActive(!0),c[a.getId()]=b.rowGroupIndex):a.setRowGroupActive(!1),"number"==typeof b.pivotIndex?(this.pivotColumns.push(a),a.setPivotActive(!0),d[a.getId()]=b.pivotIndex):a.setPivotActive(!1)},a.prototype.getGridColumns=function(a){return this.getColumns(a,this.getGridColumn.bind(this))},a.prototype.getColumns=function(a,b){var c=[];return a&&a.forEach(function(a){var d=b(a);d&&c.push(d)}),c},a.prototype.getColumnWithValidation=function(a){var b=this.getPrimaryColumn(a);return b||console.warn("ag-Grid: could not find column "+b),b},a.prototype.getPrimaryColumn=function(a){return this.getColumn(a,this.primaryColumns)},a.prototype.getGridColumn=function(a){return this.getColumn(a,this.gridColumns)},a.prototype.getColumn=function(a,b){if(!a)return null;for(var c=0;c<b.length;c++)if(this.columnsMatch(b[c],a))return b[c];return this.getAutoColumn(a)},a.prototype.getAutoColumn=function(a){var b=this;return!g.Utils.exists(this.groupAutoColumns)||g.Utils.missing(this.groupAutoColumns)?null:g.Utils.find(this.groupAutoColumns,function(c){return b.columnsMatch(c,a)})},a.prototype.columnsMatch=function(a,b){var c=a===b,d=a.getColDef()===b,e=a.getColId()==b;return c||d||e},a.prototype.getDisplayNameForColumn=function(a,b,c){void 0===c&&(c=!1);var d=this.getHeaderName(a.getColDef(),a,null,b);return c?this.wrapHeaderNameWithAggFunc(a,d):d},a.prototype.getDisplayNameForColumnGroup=function(a,b){var c=a.getOriginalColumnGroup().getColGroupDef();return c?this.getHeaderName(c,null,a,b):null},a.prototype.getHeaderName=function(a,b,c,d){var e=a.headerValueGetter;if(e){var f={colDef:a,column:b,columnGroup:c,location:d,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};return"function"==typeof e?e(f):"string"==typeof e?this.expressionService.evaluate(e,f):(console.warn("ag-grid: headerValueGetter must be a function or a string"),"")}return a.headerName},a.prototype.wrapHeaderNameWithAggFunc=function(a,b){if(this.gridOptionsWrapper.isSuppressAggFuncInHeader())return b;var c,d=a.getColDef().pivotValueColumn,e=g.Utils.exists(d),f=null;if(e)f=d.getAggFunc(),c=!0;else{var h=a.isValueActive(),i=this.pivotMode||!this.isRowGroupEmpty();h&&i?(f=a.getAggFunc(),c=!0):c=!1}if(c){return("string"==typeof f?f:"func")+"("+b+")"}return b},a.prototype.getColumnGroup=function(a,b){if(!a)return null;if(a instanceof h.ColumnGroup)return a;var c=this.getAllDisplayedColumnGroups(),d="number"==typeof b,e=null;return this.columnUtils.depthFirstAllColumnTreeSearch(c,function(c){if(c instanceof h.ColumnGroup){var f=c,g=void 0;g=d?a===f.getGroupId()&&b===f.getInstanceId():a===f.getGroupId(),g&&(e=f)}}),e},a.prototype.setColumnDefs=function(a){this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var b=this.balancedColumnTreeBuilder.createBalancedColumnGroups(a,!0);this.primaryBalancedTree=b.balancedTree,this.primaryHeaderRowCount=b.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryBalancedTree),this.extractRowGroupColumns(),this.extractPivotColumns(),this.createValueColumns(),this.copyDownGridColumns(),this.updateDisplayedColumns(),this.checkDisplayedVirtualColumns(),this.ready=!0;var c=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_EVERYTHING_CHANGED);this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_EVERYTHING_CHANGED,c),this.eventService.dispatchEvent(r.Events.EVENT_NEW_COLUMNS_LOADED)},a.prototype.isReady=function(){return this.ready},a.prototype.extractRowGroupColumns=function(){var a=this;this.rowGroupColumns.forEach(function(a){return a.setRowGroupActive(!1)}),this.rowGroupColumns=[],this.primaryColumns.forEach(function(b){"number"==typeof b.getColDef().rowGroupIndex&&(a.rowGroupColumns.push(b),b.setRowGroupActive(!0))}),this.rowGroupColumns.sort(function(a,b){return a.getColDef().rowGroupIndex-b.getColDef().rowGroupIndex}),this.primaryColumns.forEach(function(b){if(b.getColDef().rowGroup){if(a.rowGroupColumns.indexOf(b)>=0)return;a.rowGroupColumns.push(b),b.setRowGroupActive(!0)}})},a.prototype.extractPivotColumns=function(){var a=this;this.pivotColumns.forEach(function(a){return a.setPivotActive(!1)}),this.pivotColumns=[],this.primaryColumns.forEach(function(b){"number"==typeof b.getColDef().pivotIndex&&(a.pivotColumns.push(b),b.setPivotActive(!0))}),this.pivotColumns.sort(function(a,b){return a.getColDef().pivotIndex-b.getColDef().pivotIndex}),this.primaryColumns.forEach(function(b){if(b.getColDef().pivot){if(a.pivotColumns.indexOf(b)>=0)return;a.pivotColumns.push(b),b.setPivotActive(!0)}})},a.prototype.setColumnGroupOpened=function(a,b,c){this.columnAnimationService.start();var d=this.getColumnGroup(a,c);if(d){this.logger.log("columnGroupOpened("+d.getGroupId()+","+b+")"),d.setExpanded(b),this.updateGroupsAndDisplayedColumns();var e=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_GROUP_OPENED).withColumnGroup(d);this.eventService.dispatchEvent(r.Events.EVENT_COLUMN_GROUP_OPENED,e),this.columnAnimationService.finish()}},a.prototype.getColumnGroupState=function(){var a={};return this.columnUtils.depthFirstDisplayedColumnTreeSearch(this.getAllDisplayedColumnGroups(),function(b){if(b instanceof h.ColumnGroup){var c=b,d=c.getGroupId();a.hasOwnProperty(d)||(a[d]=c.isExpanded())}}),a},a.prototype.setColumnGroupState=function(a){this.columnUtils.depthFirstDisplayedColumnTreeSearch(this.getAllDisplayedColumnGroups(),function(b){if(b instanceof h.ColumnGroup){var c=b,d=c.getGroupId();!0===a[d]&&c.isExpandable()&&c.setExpanded(!0)}})},a.prototype.calculateColumnsForDisplay=function(){var a;return a=this.pivotMode&&!this.secondaryColumnsPresent?this.createColumnsToDisplayFromValueColumns():g.Utils.filter(this.gridColumns,function(a){return a.isVisible()}),this.createGroupAutoColumnsIfNeeded(),g.Utils.exists(this.groupAutoColumns)&&(a=this.groupAutoColumns.concat(a)),a},a.prototype.checkColSpanActiveInCols=function(a){var b=!1;return a.forEach(function(a){g.Utils.exists(a.getColDef().colSpan)&&(b=!0)}),b},a.prototype.calculateColumnsForGroupDisplay=function(){var a=this;this.groupDisplayColumns=[];var b=function(b){var c=b.getColDef();c&&g.Utils.exists(c.showRowGroup)&&a.groupDisplayColumns.push(b)};this.gridColumns.forEach(b),this.groupAutoColumns&&this.groupAutoColumns.forEach(b)},a.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},a.prototype.createColumnsToDisplayFromValueColumns=function(){var a=this,b=this.valueColumns.slice();return b.sort(function(b,c){return a.gridColumns.indexOf(b)-a.gridColumns.indexOf(c)}),b},a.prototype.updateDisplayedColumns=function(){var a=this.getColumnGroupState(),b=this.calculateColumnsForDisplay();this.buildDisplayedTrees(b),this.setColumnGroupState(a),this.calculateColumnsForGroupDisplay(),this.updateGroupsAndDisplayedColumns(),this.setFirstRightAndLastLeftPinned()},a.prototype.isSecondaryColumnsPresent=function(){return this.secondaryColumnsPresent},a.prototype.setSecondaryColumns=function(a){var b=a&&a.length>0;if(b||this.secondaryColumnsPresent){if(b){this.processSecondaryColumnDefinitions(a);var c=this.balancedColumnTreeBuilder.createBalancedColumnGroups(a,!1);this.secondaryBalancedTree=c.balancedTree,this.secondaryHeaderRowCount=c.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsPresent=!0}else this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsPresent=!1;this.copyDownGridColumns(),this.updateDisplayedColumns()}},a.prototype.processSecondaryColumnDefinitions=function(a){function b(a){a.forEach(function(a){if(g.Utils.exists(a.children)){var e=a;d&&d(e),b(e.children)}else{var f=a;c&&c(f)}})}var c=this.gridOptionsWrapper.getProcessSecondaryColDefFunc(),d=this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();(c||d)&&b(a)},a.prototype.copyDownGridColumns=function(){this.secondaryColumns?(this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice()):(this.gridBalancedTree=this.primaryBalancedTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice()),this.clearDisplayedColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns);var a=new s.ColumnChangeEvent(r.Events.EVENT_GRID_COLUMNS_CHANGED);this.eventService.dispatchEvent(r.Events.EVENT_GRID_COLUMNS_CHANGED,a)},a.prototype.clearDisplayedColumns=function(){this.displayedLeftColumnTree=[],this.displayedRightColumnTree=[],this.displayedCentreColumnTree=[],this.displayedLeftHeaderRows={},this.displayedRightHeaderRows={},this.displayedCentreHeaderRows={},this.displayedLeftColumns=[],this.displayedRightColumns=[],this.displayedCenterColumns=[],this.allDisplayedColumns=[],this.allDisplayedVirtualColumns=[]},a.prototype.updateGroupsAndDisplayedColumns=function(){this.updateGroups(),this.updateDisplayedColumnsFromTrees(),this.updateVirtualSets(),this.updateBodyWidths();var a=new s.ColumnChangeEvent(r.Events.EVENT_DISPLAYED_COLUMNS_CHANGED);this.eventService.dispatchEvent(r.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,a)},a.prototype.updateDisplayedColumnsFromTrees=function(){this.addToDisplayedColumns(this.displayedLeftColumnTree,this.displayedLeftColumns),this.addToDisplayedColumns(this.displayedCentreColumnTree,this.displayedCenterColumns),this.addToDisplayedColumns(this.displayedRightColumnTree,this.displayedRightColumns),this.setupAllDisplayedColumns(),this.setLeftValues()},a.prototype.setupAllDisplayedColumns=function(){this.gridOptionsWrapper.isEnableRtl()?this.allDisplayedColumns=this.displayedRightColumns.concat(this.displayedCenterColumns).concat(this.displayedLeftColumns):this.allDisplayedColumns=this.displayedLeftColumns.concat(this.displayedCenterColumns).concat(this.displayedRightColumns)},a.prototype.setLeftValues=function(){this.setLeftValuesOfColumns(),this.setLeftValuesOfGroups()},a.prototype.setLeftValuesOfColumns=function(){var a=this,b=this.primaryColumns.slice(0),c=this.gridOptionsWrapper.isEnableRtl();[this.displayedLeftColumns,this.displayedRightColumns,this.displayedCenterColumns].forEach(function(d){if(c){var e=a.getWidthOfColsInList(d);d.forEach(function(a){e-=a.getActualWidth(),a.setLeft(e)})}else{var f=0;d.forEach(function(a){a.setLeft(f),f+=a.getActualWidth()})}g.Utils.removeAllFromArray(b,d)}),b.forEach(function(a){a.setLeft(null)})},a.prototype.setLeftValuesOfGroups=function(){[this.displayedLeftColumnTree,this.displayedRightColumnTree,this.displayedCentreColumnTree].forEach(function(a){a.forEach(function(a){if(a instanceof h.ColumnGroup){a.checkLeft()}})})},a.prototype.addToDisplayedColumns=function(a,b){b.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(a,function(a){a instanceof i.Column&&b.push(a)})},a.prototype.updateDisplayedCenterVirtualColumns=function(){var a=this.gridOptionsWrapper.isSuppressColumnVirtualisation()||this.gridOptionsWrapper.isForPrint();this.allDisplayedCenterVirtualColumns=a?this.displayedCenterColumns:this.filterOutColumnsWithinViewport(),this.allDisplayedVirtualColumns=this.allDisplayedCenterVirtualColumns.concat(this.displayedLeftColumns).concat(this.displayedRightColumns);var b={};return this.allDisplayedVirtualColumns.forEach(function(a){b[a.getId()]=!0}),b},a.prototype.getVirtualHeaderGroupRow=function(a,b){var c;switch(a){case i.Column.PINNED_LEFT:c=this.displayedLeftHeaderRows[b];break;case i.Column.PINNED_RIGHT:c=this.displayedRightHeaderRows[b];break;default:c=this.displayedCentreHeaderRows[b]}return g.Utils.missing(c)&&(c=[]),c},a.prototype.updateDisplayedVirtualGroups=function(a){function b(c,d,e){for(var f=!1,g=0;g<c.length;g++){var h=c[g],j=void 0;if(h instanceof i.Column)j=!0===a[h.getId()];else{j=b(h.getDisplayedChildren(),d,e+1)}j&&(f=!0,d[e]||(d[e]=[]),d[e].push(h))}return f}this.displayedLeftHeaderRows={},this.displayedRightHeaderRows={},this.displayedCentreHeaderRows={},b(this.displayedLeftColumnTree,this.displayedLeftHeaderRows,0),b(this.displayedRightColumnTree,this.displayedRightHeaderRows,0),b(this.displayedCentreColumnTree,this.displayedCentreHeaderRows,0)},a.prototype.updateVirtualSets=function(){var a=this.updateDisplayedCenterVirtualColumns();this.updateDisplayedVirtualGroups(a)},a.prototype.filterOutColumnsWithinViewport=function(){return g.Utils.filter(this.displayedCenterColumns,this.isColumnInViewport.bind(this))},a.prototype.sizeColumnsToFit=function(a){function b(a){g.Utils.removeFromArray(f,a),e.push(a)}var c=this,d=this.getAllDisplayedColumns();if(!(a<=0||0===d.length)){for(var e=g.Utils.filter(d,function(a){return!0===a.getColDef().suppressSizeToFit}),f=g.Utils.filter(d,function(a){return!0!==a.getColDef().suppressSizeToFit}),h=f.slice(0),i=!1;!i;){i=!0;var j=a-this.getWidthOfColsInList(e);if(j<=0)f.forEach(function(a){a.setMinimum()});else for(var k=j/this.getWidthOfColsInList(f),l=j,m=f.length-1;m>=0;m--){var n=f[m],o=Math.round(n.getActualWidth()*k);if(o<n.getMinWidth())n.setMinimum(),b(n),i=!1;else if(n.isGreaterThanMax(o))n.setActualWidth(n.getMaxWidth()),b(n),i=!1;else{var p=0===m;p?n.setActualWidth(l):n.setActualWidth(o)}l-=o}}this.setLeftValues(),this.updateBodyWidths(),h.forEach(function(a){var b=new s.ColumnChangeEvent(r.Events.EVENT_COLUMN_RESIZED).withColumn(a).withFinished(!0);c.eventService.dispatchEvent(r.Events.EVENT_COLUMN_RESIZED,b)})}},a.prototype.buildDisplayedTrees=function(a){var b=g.Utils.filter(a,function(a){return"left"===a.getPinned()}),c=g.Utils.filter(a,function(a){return"right"===a.getPinned()}),d=g.Utils.filter(a,function(a){return"left"!==a.getPinned()&&"right"!==a.getPinned()}),e=new u.GroupInstanceIdCreator;this.displayedLeftColumnTree=this.displayedGroupCreator.createDisplayedGroups(b,this.gridBalancedTree,e,this.displayedLeftColumnTree),this.displayedRightColumnTree=this.displayedGroupCreator.createDisplayedGroups(c,this.gridBalancedTree,e,this.displayedRightColumnTree),this.displayedCentreColumnTree=this.displayedGroupCreator.createDisplayedGroups(d,this.gridBalancedTree,e,this.displayedCentreColumnTree)},a.prototype.updateGroups=function(){var a=this.getAllDisplayedColumnGroups();this.columnUtils.depthFirstAllColumnTreeSearch(a,function(a){if(a instanceof h.ColumnGroup){a.calculateDisplayedColumns()}})},a.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},a.prototype.createGroupAutoColumnsIfNeeded=function(){if(this.autoGroupsNeedBuilding){this.autoGroupsNeedBuilding=!1;var a=this.rowGroupColumns.length>0&&!this.gridOptionsWrapper.isGroupSuppressAutoColumn()&&!this.gridOptionsWrapper.isGroupUseEntireRow()&&!this.gridOptionsWrapper.isGroupSuppressRow();this.groupAutoColumns=a?this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns):null}},a.prototype.createValueColumns=function(){this.valueColumns.forEach(function(a){return a.setValueActive(!1)}),this.valueColumns=[];for(var a=0;a<this.primaryColumns.length;a++){var b=this.primaryColumns[a];b.getColDef().aggFunc&&(b.setAggFunc(b.getColDef().aggFunc),this.valueColumns.push(b),b.setValueActive(!0))}},a.prototype.getWidthOfColsInList=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].getActualWidth();return b},a.prototype.getGridBalancedTree=function(){return this.gridBalancedTree},d([v.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([v.Autowired("expressionService"),e("design:type",k.ExpressionService)],a.prototype,"expressionService",void 0),d([v.Autowired("balancedColumnTreeBuilder"),e("design:type",l.BalancedColumnTreeBuilder)],a.prototype,"balancedColumnTreeBuilder",void 0),d([v.Autowired("displayedGroupCreator"),e("design:type",m.DisplayedGroupCreator)],a.prototype,"displayedGroupCreator",void 0),d([v.Autowired("autoWidthCalculator"),e("design:type",n.AutoWidthCalculator)],a.prototype,"autoWidthCalculator",void 0),d([v.Autowired("eventService"),e("design:type",o.EventService)],a.prototype,"eventService",void 0),d([v.Autowired("columnUtils"),e("design:type",p.ColumnUtils)],a.prototype,"columnUtils",void 0),d([v.Autowired("gridPanel"),e("design:type",w.GridPanel)],a.prototype,"gridPanel",void 0),d([v.Autowired("context"),e("design:type",v.Context)],a.prototype,"context",void 0),d([v.Autowired("columnAnimationService"),e("design:type",x.ColumnAnimationService)],a.prototype,"columnAnimationService",void 0),d([v.Autowired("autoGroupColService"),e("design:type",y.AutoGroupColService)],a.prototype,"autoGroupColService",void 0),d([v.Optional("aggFuncService"),e("design:type",Object)],a.prototype,"aggFuncService",void 0),d([v.Optional("valueCache"),e("design:type",z.ValueCache)],a.prototype,"valueCache",void 0),d([v.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([f(0,v.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[q.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([v.Bean("columnController")],a)}();b.ColumnController=B},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(16),g=c(4),h=c(6),i=c(3),j=function(){function a(a,b,c){this.displayedChildren=[],this.localEventService=new g.EventService,this.groupId=b,this.instanceId=c,this.originalColumnGroup=a}return a.createUniqueId=function(a,b){return a+"_"+b},a.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},a.prototype.getParent=function(){return this.parent},a.prototype.setParent=function(a){this.parent=a},a.prototype.getUniqueId=function(){return a.createUniqueId(this.groupId,this.instanceId)},a.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},a.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(b){b instanceof a&&b.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsWrapper.isEnableRtl()){var b=this.displayedChildren[this.displayedChildren.length-1],c=b.getLeft();this.setLeft(c)}else{var d=this.displayedChildren[0].getLeft();this.setLeft(d)}else this.setLeft(null)},a.prototype.getLeft=function(){return this.left},a.prototype.getOldLeft=function(){return this.oldLeft},a.prototype.setLeft=function(b){this.oldLeft=b,this.left!==b&&(this.left=b,this.localEventService.dispatchEvent(a.EVENT_LEFT_CHANGED))},a.prototype.addEventListener=function(a,b){this.localEventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.localEventService.removeEventListener(a,b)},a.prototype.getGroupId=function(){return this.groupId},a.prototype.getInstanceId=function(){return this.instanceId},a.prototype.isChildInThisGroupDeepSearch=function(b){var c=!1;return this.children.forEach(function(d){b===d&&(c=!0),d instanceof a&&d.isChildInThisGroupDeepSearch(b)&&(c=!0)}),c},a.prototype.getActualWidth=function(){var a=0;return this.displayedChildren&&this.displayedChildren.forEach(function(b){a+=b.getActualWidth()}),a},a.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var a=!1;return this.displayedChildren.forEach(function(b){b.isResizable()&&(a=!0)}),a},a.prototype.getMinWidth=function(){var a=0;return this.displayedChildren.forEach(function(b){a+=b.getMinWidth()}),a},a.prototype.addChild=function(a){this.children||(this.children=[]),this.children.push(a)},a.prototype.getDisplayedChildren=function(){return this.displayedChildren},a.prototype.getLeafColumns=function(){var a=[];return this.addLeafColumns(a),a},a.prototype.getDisplayedLeafColumns=function(){var a=[];return this.addDisplayedLeafColumns(a),a},a.prototype.getDefinition=function(){return this.originalColumnGroup.getColGroupDef()},a.prototype.getColGroupDef=function(){return this.originalColumnGroup.getColGroupDef()},a.prototype.isPadding=function(){return this.originalColumnGroup.isPadding()},a.prototype.isExpandable=function(){return this.originalColumnGroup.isExpandable()},a.prototype.isExpanded=function(){return this.originalColumnGroup.isExpanded()},a.prototype.setExpanded=function(a){this.originalColumnGroup.setExpanded(a)},a.prototype.addDisplayedLeafColumns=function(b){this.displayedChildren.forEach(function(c){c instanceof f.Column?b.push(c):c instanceof a&&c.addDisplayedLeafColumns(b)})},a.prototype.addLeafColumns=function(b){
this.children.forEach(function(c){c instanceof f.Column?b.push(c):c instanceof a&&c.addLeafColumns(b)})},a.prototype.getChildren=function(){return this.children},a.prototype.getColumnGroupShow=function(){return this.originalColumnGroup.getColumnGroupShow()},a.prototype.getOriginalColumnGroup=function(){return this.originalColumnGroup},a.prototype.calculateDisplayedColumns=function(){var b=this;this.displayedChildren=[],this.originalColumnGroup.isExpandable()?this.children.forEach(function(c){switch(c.getColumnGroupShow()){case a.HEADER_GROUP_SHOW_OPEN:b.originalColumnGroup.isExpanded()&&b.displayedChildren.push(c);break;case a.HEADER_GROUP_SHOW_CLOSED:b.originalColumnGroup.isExpanded()||b.displayedChildren.push(c);break;default:b.displayedChildren.push(c)}}):this.displayedChildren=this.children,this.localEventService.dispatchEvent(a.EVENT_DISPLAYED_CHILDREN_CHANGED)},a.HEADER_GROUP_SHOW_OPEN="open",a.HEADER_GROUP_SHOW_CLOSED="closed",a.EVENT_LEFT_CHANGED="leftChanged",a.EVENT_DISPLAYED_CHILDREN_CHANGED="leftChanged",d([h.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a}();b.ColumnGroup=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(4),g=c(7),h=c(6),i=c(3),j=c(17),k=function(){function a(a,b,c){this.moving=!1,this.menuVisible=!1,this.filterActive=!1,this.eventService=new f.EventService,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=a,this.visible=!a.hide,this.sort=a.sort,this.sortedAt=a.sortedAt,this.colId=b,this.primary=c}return a.prototype.setParent=function(a){this.parent=a},a.prototype.getParent=function(){return this.parent},a.prototype.initialise=function(){this.floatingCellRenderer=this.frameworkFactory.colDefFloatingCellRenderer(this.colDef),this.cellRenderer=this.frameworkFactory.colDefCellRenderer(this.colDef),this.cellEditor=this.frameworkFactory.colDefCellEditor(this.colDef),this.filter=this.frameworkFactory.colDefFilter(this.colDef),this.setPinned(this.colDef.pinned);var a=this.gridOptionsWrapper.getMinColWidth(),b=this.gridOptionsWrapper.getMaxColWidth();this.colDef.minWidth?this.minWidth=this.colDef.minWidth:this.minWidth=a,this.colDef.maxWidth?this.maxWidth=this.colDef.maxWidth:this.maxWidth=b,this.actualWidth=this.columnUtils.calculateColInitialWidth(this.colDef);var c=this.gridOptionsWrapper.isSuppressFieldDotNotation();this.fieldContainsDots=g.Utils.exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!c,this.tooltipFieldContainsDots=g.Utils.exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!c,this.validate()},a.prototype.isEmptyGroup=function(){return!1},a.prototype.isRowGroupDisplayed=function(a){if(g.Utils.missing(this.colDef)||g.Utils.missing(this.colDef.showRowGroup))return!1;var b=!0===this.colDef.showRowGroup,c=this.colDef.showRowGroup===a;return b||c},a.prototype.getCellRenderer=function(){return this.cellRenderer},a.prototype.getCellEditor=function(){return this.cellEditor},a.prototype.getFloatingCellRenderer=function(){return this.floatingCellRenderer},a.prototype.getFilter=function(){return this.filter},a.prototype.getUniqueId=function(){return this.getId()},a.prototype.isPrimary=function(){return this.primary},a.prototype.isFilterAllowed=function(){return this.primary&&!this.colDef.suppressFilter},a.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},a.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},a.prototype.validate=function(){this.gridOptionsWrapper.isEnterprise()||(g.Utils.exists(this.colDef.aggFunc)&&console.warn("ag-Grid: aggFunc is only valid in ag-Grid-Enterprise"),g.Utils.exists(this.colDef.rowGroupIndex)&&console.warn("ag-Grid: rowGroupIndex is only valid in ag-Grid-Enterprise"),g.Utils.exists(this.colDef.rowGroup)&&console.warn("ag-Grid: rowGroup is only valid in ag-Grid-Enterprise"),g.Utils.exists(this.colDef.pivotIndex)&&console.warn("ag-Grid: pivotIndex is only valid in ag-Grid-Enterprise"),g.Utils.exists(this.colDef.pivot)&&console.warn("ag-Grid: pivot is only valid in ag-Grid-Enterprise")),g.Utils.exists(this.colDef.width)&&"number"!=typeof this.colDef.width&&console.warn("ag-Grid: colDef.width should be a number, not "+typeof this.colDef.width),g.Utils.get(this,"colDef.cellRendererParams.restrictToOneGroup",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.restrictToOneGroup is deprecated. You should use showRowGroup"),g.Utils.get(this,"colDef.cellRendererParams.keyMap",null)&&console.warn("ag-Grid: Since ag-grid 11.0.0 cellRendererParams.keyMap is deprecated. You should use colDef.keyCreator");var a=this.colDef;a.floatingCellRenderer&&(console.warn("ag-Grid: since v11, floatingCellRenderer is now pinnedRowCellRenderer"),this.colDef.pinnedRowCellRenderer=a.floatingCellRenderer),a.floatingRendererFramework&&(console.warn("ag-Grid: since v11, floatingRendererFramework is now pinnedRowCellRendererFramework"),this.colDef.pinnedRowCellRendererFramework=a.floatingRendererFramework),a.floatingRendererParams&&(console.warn("ag-Grid: since v11, floatingRendererParams is now pinnedRowCellRendererParams"),this.colDef.pinnedRowCellRendererParams=a.floatingRendererParams),a.floatingValueFormatter&&(console.warn("ag-Grid: since v11, floatingValueFormatter is now "),this.colDef.pinnedRowValueFormatter=a.floatingValueFormatter)},a.prototype.addEventListener=function(a,b){this.eventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.eventService.removeEventListener(a,b)},a.prototype.createIsColumnFuncParams=function(a){return{node:a,column:this,colDef:this.colDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()}},a.prototype.isSuppressNavigable=function(a){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){var b=this.createIsColumnFuncParams(a);return(0,this.colDef.suppressNavigable)(b)}return!1},a.prototype.isCellEditable=function(a){return!(a.group&&!this.gridOptionsWrapper.isEnableGroupEdit())&&this.isColumnFunc(a,this.colDef.editable)},a.prototype.isSuppressPaste=function(a){return this.isColumnFunc(a,this.colDef?this.colDef.suppressPaste:null)},a.prototype.isResizable=function(){var a=this.gridOptionsWrapper.isEnableColResize(),b=this.colDef&&this.colDef.suppressResize;return a&&!b},a.prototype.isColumnFunc=function(a,b){if("boolean"==typeof b)return b;if("function"==typeof b){return b(this.createIsColumnFuncParams(a))}return!1},a.prototype.setMoving=function(b){this.moving=b,this.eventService.dispatchEvent(a.EVENT_MOVING_CHANGED)},a.prototype.isMoving=function(){return this.moving},a.prototype.getSort=function(){return this.sort},a.prototype.setSort=function(b){this.sort!==b&&(this.sort=b,this.eventService.dispatchEvent(a.EVENT_SORT_CHANGED))},a.prototype.setMenuVisible=function(b){this.menuVisible!==b&&(this.menuVisible=b,this.eventService.dispatchEvent(a.EVENT_MENU_VISIBLE_CHANGED))},a.prototype.isMenuVisible=function(){return this.menuVisible},a.prototype.isSortAscending=function(){return this.sort===a.SORT_ASC},a.prototype.isSortDescending=function(){return this.sort===a.SORT_DESC},a.prototype.isSortNone=function(){return g.Utils.missing(this.sort)},a.prototype.isSorting=function(){return g.Utils.exists(this.sort)},a.prototype.getSortedAt=function(){return this.sortedAt},a.prototype.setSortedAt=function(a){this.sortedAt=a},a.prototype.setAggFunc=function(a){this.aggFunc=a},a.prototype.getAggFunc=function(){return this.aggFunc},a.prototype.getLeft=function(){return this.left},a.prototype.getOldLeft=function(){return this.oldLeft},a.prototype.getRight=function(){return this.left+this.actualWidth},a.prototype.setLeft=function(b){this.oldLeft=this.left,this.left!==b&&(this.left=b,this.eventService.dispatchEvent(a.EVENT_LEFT_CHANGED))},a.prototype.isFilterActive=function(){return this.filterActive},a.prototype.setFilterActive=function(b){this.filterActive!==b&&(this.filterActive=b,this.eventService.dispatchEvent(a.EVENT_FILTER_ACTIVE_CHANGED)),this.eventService.dispatchEvent(a.EVENT_FILTER_CHANGED)},a.prototype.setPinned=function(b){this.gridOptionsWrapper.isForPrint()||(!0===b||b===a.PINNED_LEFT?this.pinned=a.PINNED_LEFT:b===a.PINNED_RIGHT?this.pinned=a.PINNED_RIGHT:this.pinned=null)},a.prototype.setFirstRightPinned=function(b){this.firstRightPinned!==b&&(this.firstRightPinned=b,this.eventService.dispatchEvent(a.EVENT_FIRST_RIGHT_PINNED_CHANGED))},a.prototype.setLastLeftPinned=function(b){this.lastLeftPinned!==b&&(this.lastLeftPinned=b,this.eventService.dispatchEvent(a.EVENT_LAST_LEFT_PINNED_CHANGED))},a.prototype.isFirstRightPinned=function(){return this.firstRightPinned},a.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},a.prototype.isPinned=function(){return this.pinned===a.PINNED_LEFT||this.pinned===a.PINNED_RIGHT},a.prototype.isPinnedLeft=function(){return this.pinned===a.PINNED_LEFT},a.prototype.isPinnedRight=function(){return this.pinned===a.PINNED_RIGHT},a.prototype.getPinned=function(){return this.pinned},a.prototype.setVisible=function(b){var c=!0===b;this.visible!==c&&(this.visible=c,this.eventService.dispatchEvent(a.EVENT_VISIBLE_CHANGED))},a.prototype.isVisible=function(){return this.visible},a.prototype.getColDef=function(){return this.colDef},a.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},a.prototype.getColId=function(){return this.colId},a.prototype.getId=function(){return this.getColId()},a.prototype.getDefinition=function(){return this.colDef},a.prototype.getActualWidth=function(){return this.actualWidth},a.prototype.getColSpan=function(a){if(g.Utils.missing(this.colDef.colSpan))return 1;var b={node:a,data:a.data,colDef:this.colDef,column:this,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()},c=this.colDef.colSpan(b);return c>1?c:1},a.prototype.setActualWidth=function(b){this.actualWidth!==b&&(this.actualWidth=b,this.eventService.dispatchEvent(a.EVENT_WIDTH_CHANGED))},a.prototype.isGreaterThanMax=function(a){return!!this.maxWidth&&a>this.maxWidth},a.prototype.getMinWidth=function(){return this.minWidth},a.prototype.getMaxWidth=function(){return this.maxWidth},a.prototype.setMinimum=function(){this.setActualWidth(this.minWidth)},a.prototype.setRowGroupActive=function(b){this.rowGroupActive!==b&&(this.rowGroupActive=b,this.eventService.dispatchEvent(a.EVENT_ROW_GROUP_CHANGED,this))},a.prototype.isRowGroupActive=function(){return this.rowGroupActive},a.prototype.setPivotActive=function(b){this.pivotActive!==b&&(this.pivotActive=b,this.eventService.dispatchEvent(a.EVENT_PIVOT_CHANGED,this))},a.prototype.isPivotActive=function(){return this.pivotActive},a.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},a.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},a.prototype.setValueActive=function(b){this.aggregationActive!==b&&(this.aggregationActive=b,this.eventService.dispatchEvent(a.EVENT_VALUE_CHANGED,this))},a.prototype.isValueActive=function(){return this.aggregationActive},a.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},a.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},a.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},a.prototype.getMenuTabs=function(a){var b=this.getColDef().menuTabs;return null==b&&(b=a),b},a.EVENT_MOVING_CHANGED="movingChanged",a.EVENT_LEFT_CHANGED="leftChanged",a.EVENT_WIDTH_CHANGED="widthChanged",a.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",a.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",a.EVENT_VISIBLE_CHANGED="visibleChanged",a.EVENT_FILTER_CHANGED="filterChanged",a.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",a.EVENT_SORT_CHANGED="sortChanged",a.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",a.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",a.EVENT_PIVOT_CHANGED="columnPivotChanged",a.EVENT_VALUE_CHANGED="columnValueChanged",a.PINNED_RIGHT="right",a.PINNED_LEFT="left",a.SORT_ASC="asc",a.SORT_DESC="desc",d([h.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([h.Autowired("columnUtils"),e("design:type",j.ColumnUtils)],a.prototype,"columnUtils",void 0),d([h.Autowired("frameworkFactory"),e("design:type",Object)],a.prototype,"frameworkFactory",void 0),d([h.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"initialise",null),a}();b.Column=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(3),g=c(15),h=c(18),i=c(6),j=c(6),k=function(){function a(){}return a.prototype.calculateColInitialWidth=function(a){return a.width?a.width<this.gridOptionsWrapper.getMinColWidth()?this.gridOptionsWrapper.getMinColWidth():a.width:this.gridOptionsWrapper.getColWidth()},a.prototype.getOriginalPathForColumn=function(a,b){function c(b,f){for(var g=0;g<b.length;g++){if(e)return;var i=b[g];if(i instanceof h.OriginalColumnGroup){c(i.getChildren(),f+1),d[f]=i}else i===a&&(e=!0)}}var d=[],e=!1;return c(b,0),e?d:null},a.prototype.depthFirstOriginalTreeSearch=function(a,b){var c=this;a&&a.forEach(function(a){a instanceof h.OriginalColumnGroup&&c.depthFirstOriginalTreeSearch(a.getChildren(),b),b(a)})},a.prototype.depthFirstAllColumnTreeSearch=function(a,b){var c=this;a&&a.forEach(function(a){a instanceof g.ColumnGroup&&c.depthFirstAllColumnTreeSearch(a.getChildren(),b),b(a)})},a.prototype.depthFirstDisplayedColumnTreeSearch=function(a,b){var c=this;a&&a.forEach(function(a){a instanceof g.ColumnGroup&&c.depthFirstDisplayedColumnTreeSearch(a.getDisplayedChildren(),b),b(a)})},d([j.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([i.Bean("columnUtils")],a)}();b.ColumnUtils=k},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(15),e=c(16),f=c(4),g=function(){function a(a,b,c){this.localEventService=new f.EventService,this.expandable=!1,this.colGroupDef=a,this.groupId=b,this.expanded=a&&!!a.openByDefault,this.padding=c}return a.prototype.isPadding=function(){return this.padding},a.prototype.setExpanded=function(b){this.expanded=b,this.localEventService.dispatchEvent(a.EVENT_EXPANDED_CHANGED)},a.prototype.isExpandable=function(){return this.expandable},a.prototype.isExpanded=function(){return this.expanded},a.prototype.getGroupId=function(){return this.groupId},a.prototype.getId=function(){return this.getGroupId()},a.prototype.setChildren=function(a){this.children=a},a.prototype.getChildren=function(){return this.children},a.prototype.getColGroupDef=function(){return this.colGroupDef},a.prototype.getLeafColumns=function(){var a=[];return this.addLeafColumns(a),a},a.prototype.addLeafColumns=function(b){this.children.forEach(function(c){c instanceof e.Column?b.push(c):c instanceof a&&c.addLeafColumns(b)})},a.prototype.getColumnGroupShow=function(){return this.padding?this.children[0].getColumnGroupShow():this.colGroupDef.columnGroupShow},a.prototype.calculateExpandable=function(){for(var a=!1,b=!1,c=!1,e=0,f=this.children.length;e<f;e++){var g=this.children[e],h=g.getColumnGroupShow();h===d.ColumnGroup.HEADER_GROUP_SHOW_OPEN?(a=!0,c=!0):h===d.ColumnGroup.HEADER_GROUP_SHOW_CLOSED?(b=!0,c=!0):(a=!0,b=!0)}this.expandable=a&&b&&c},a.prototype.addEventListener=function(a,b){this.localEventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.localEventService.removeEventListener(a,b)},a.EVENT_EXPANDED_CHANGED="expandedChanged",a}();b.OriginalColumnGroup=g},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(5),h=c(6),i=c(6),j=function(){function a(){this.expressionToFunctionCache={}}return a.prototype.setBeans=function(a){this.logger=a.create("ExpressionService")},a.prototype.evaluate=function(a,b){if("function"==typeof a){return a(b)}if("string"==typeof a){var c=a;return this.evaluateExpression(c,b)}console.error("ag-Grid: value should be either a string or a function",a)},a.prototype.evaluateExpression=function(a,b){try{return this.createExpressionFunction(a)(b.value,b.context,b.oldValue,b.newValue,b.value,b.node,b.data,b.colDef,b.rowIndex,b.api,b.columnApi,b.getValue,b.column,b.columnGroup)}catch(b){return console.log("Processing of the expression failed"),console.log("Expression = "+a),console.log("Exception = "+b),null}},a.prototype.createExpressionFunction=function(a){if(this.expressionToFunctionCache[a])return this.expressionToFunctionCache[a];var b=this.createFunctionBody(a),c=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",b);return this.expressionToFunctionCache[a]=c,c},a.prototype.createFunctionBody=function(a){return a.indexOf("return")>=0?a:"return "+a+";"},d([f(0,i.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[g.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a=d([h.Bean("expressionService")],a)}();b.ExpressionService=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(17),g=c(15),h=c(18),i=c(6),j=c(7),k=c(6),l=function(){function a(){}return a.prototype.createDisplayedGroups=function(a,b,c,d){var e,f,g=this,h=[],i=this.mapOldGroupsById(d);return a.forEach(function(a){for(var d=g.getOriginalPathForColumn(b,a),j=[],k=!f,l=0;l<d.length;l++)if(k||d[l]!==f[l]){var m=g.createColumnGroup(d[l],c,i);j[l]=m,0==l?h.push(m):j[l-1].addChild(m)}else j[l]=e[l];0===j.length?h.push(a):j[j.length-1].addChild(a);e=j,f=d}),this.setupParentsIntoColumns(h,null),h},a.prototype.createColumnGroup=function(a,b,c){var d=a.getGroupId(),e=b.getInstanceIdForKey(d),f=g.ColumnGroup.createUniqueId(d,e),h=c[f];return h&&h.getOriginalColumnGroup()!==a&&(h=null),j.Utils.exists(h)?h.reset():(h=new g.ColumnGroup(a,d,e),this.context.wireBean(h)),h},a.prototype.mapOldGroupsById=function(a){var b={},c=function(a){a.forEach(function(a){if(a instanceof g.ColumnGroup){var d=a;b[a.getUniqueId()]=d,c(d.getChildren())}})};return a&&c(a),b},a.prototype.setupParentsIntoColumns=function(a,b){var c=this;a.forEach(function(a){if(a.setParent(b),a instanceof g.ColumnGroup){var d=a;c.setupParentsIntoColumns(d.getChildren(),d)}})},a.prototype.createFakePath=function(a){for(var b=[],c=a,d=0;c&&c[0]&&c[0]instanceof h.OriginalColumnGroup;)b.push(new h.OriginalColumnGroup(null,"FAKE_PATH_"+d,!0)),c=c[0].getChildren(),d++;return b},a.prototype.getOriginalPathForColumn=function(a,b){function c(a,f){for(var g=0;g<a.length;g++){if(e)return;var i=a[g];if(i instanceof h.OriginalColumnGroup){c(i.getChildren(),f+1),d[f]=i}else i===b&&(e=!0)}}var d=[],e=!1;return c(a,0),e?d:this.createFakePath(a)},d([k.Autowired("columnUtils"),e("design:type",f.ColumnUtils)],a.prototype,"columnUtils",void 0),d([k.Autowired("context"),e("design:type",i.Context)],a.prototype,"context",void 0),a=d([i.Bean("displayedGroupCreator")],a)}();b.DisplayedGroupCreator=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(22),g=c(23),h=c(6),i=c(6),j=c(81),k=c(85),l=c(3),m=c(89),n=function(){function a(){}return a.prototype.getPreferredWidthForColumn=function(a){var b=this.getHeaderCellForColumn(a);if(!b)return-1;var c=document.createElement("span");c.style.position="fixed";var d=this.gridPanel.getBodyContainer();d.appendChild(c),this.putRowCellsIntoDummyContainer(a,c),this.cloneItemIntoDummy(b,c);var e=c.offsetWidth;d.removeChild(c);var f=this.gridOptionsWrapper.getAutoSizePadding();return("number"!=typeof f||f<0)&&(f=4),e+f},a.prototype.getHeaderCellForColumn=function(a){var b=null;return this.headerRenderer.forEachHeaderElement(function(c){if(c instanceof k.RenderedHeaderCell){var d=c;d.getColumn()===a&&(b=d)}else if(c instanceof m.HeaderWrapperComp){var e=c;e.getColumn()===a&&(b=e)}}),b?b.getGui():null},a.prototype.putRowCellsIntoDummyContainer=function(a,b){var c=this;this.rowRenderer.getAllCellsForColumn(a).forEach(function(a,d){c.cloneItemIntoDummy(a,b)})},a.prototype.cloneItemIntoDummy=function(a,b){var c=a.cloneNode(!0);c.style.width="",c.style.position="static",c.style.left="";var d=document.createElement("div");d.style.display="table-row",d.appendChild(c),b.appendChild(d)},d([i.Autowired("rowRenderer"),e("design:type",f.RowRenderer)],a.prototype,"rowRenderer",void 0),d([i.Autowired("headerRenderer"),e("design:type",j.HeaderRenderer)],a.prototype,"headerRenderer",void 0),d([i.Autowired("gridPanel"),e("design:type",g.GridPanel)],a.prototype,"gridPanel",void 0),d([i.Autowired("gridOptionsWrapper"),e("design:type",l.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([h.Bean("autoWidthCalculator")],a)}();b.AutoWidthCalculator=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},g=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var h=c(7),i=c(3),j=c(23),k=c(19),l=c(32),m=c(30),n=c(4),o=c(76),p=c(10),q=c(8),r=c(28),s=c(6),t=c(37),u=c(14),v=c(5),w=c(33),x=c(80),y=c(34),z=c(43),A=c(58),B=c(79),C=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.rowCompsByIndex={},b.floatingTopRowComps=[],b.floatingBottomRowComps=[],b.refreshInProgress=!1,b}return d(b,a),b.prototype.agWire=function(a){this.logger=a.create("RowRenderer")},b.prototype.init=function(){this.forPrint=this.gridOptionsWrapper.isForPrint(),this.autoHeight=this.gridOptionsWrapper.isAutoHeight(),this.rowContainers=this.gridPanel.getRowContainers(),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addDestroyableEventListener(this.eventService,p.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.redrawAfterModelUpdate()},b.prototype.onPageLoaded=function(a){void 0===a&&(a={animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1}),this.onModelUpdated(a)},b.prototype.getAllCellsForColumn=function(a){function b(b,d){var e=d.getCellForCol(a);e&&c.push(e)}var c=[];return h.Utils.iterateObject(this.rowCompsByIndex,b),h.Utils.iterateObject(this.floatingBottomRowComps,b),h.Utils.iterateObject(this.floatingTopRowComps,b),c},b.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.floatingTopRowComps,this.pinnedRowModel.getPinnedTopRowData(),this.rowContainers.floatingTopPinnedLeft,this.rowContainers.floatingTopPinnedRight,this.rowContainers.floatingTop,this.rowContainers.floatingTopFullWidth),this.refreshFloatingRows(this.floatingBottomRowComps,this.pinnedRowModel.getPinnedBottomRowData(),this.rowContainers.floatingBottomPinnedLeft,this.rowContainers.floatingBottomPinnedRight,this.rowContainers.floatingBottom,this.rowContainers.floatingBottomFullWith)},b.prototype.refreshFloatingRows=function(a,b,c,d,e,f){var g=this;a.forEach(function(a){a.destroy()}),a.length=0;var i=this.columnController.getAllDisplayedColumns();h.Utils.missingOrEmpty(i)||b&&b.forEach(function(b){var h=new o.RowComp(g.$scope,g,e,f,c,d,b,!1,null);g.context.wireBean(h),a.push(h)})},b.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate()},b.prototype.onModelUpdated=function(a){var b={recycleRows:a.keepRenderedRows,animate:a.animate,newData:a.newData,newPage:a.newPage};this.redrawAfterModelUpdate(b)},b.prototype.getRenderedIndexesForRowNodes=function(a){var b=[];return h.Utils.missing(a)?b:(h.Utils.iterateObject(this.rowCompsByIndex,function(c,d){var e=d.getRowNode();a.indexOf(e)>=0&&b.push(c)}),b)},b.prototype.redrawRows=function(a){if(a&&0!=a.length){var b=this.getRenderedIndexesForRowNodes(a);this.removeRowComps(b),this.redrawAfterModelUpdate({recycleRows:!0})}},b.prototype.getCellToRestoreFocusToAfterRefresh=function(a){var b=a.suppressKeepFocus?null:this.focusedCellController.getFocusCellToUseAfterRefresh();if(h.Utils.missing(b))return null;var c=document.activeElement,d=this.gridOptionsWrapper.getDomData(c,r.CellComp.DOM_DATA_KEY_CELL_COMP);return h.Utils.missing(d)?null:b},b.prototype.redrawAfterModelUpdate=function(a){void 0===a&&(a={}),this.logger.log("refreshView"),this.getLockOnRefresh();var b=this.getCellToRestoreFocusToAfterRefresh(a);this.forPrint||this.sizeContainerToPageHeight(),this.scrollToTopIfNewData(a);var c=this.forPrint||this.autoHeight,d=!c&&a.recycleRows,e=!c&&a.animate,f=this.binRowComps(d);this.redraw(f,e),a.onlyBody||this.refreshFloatingRowComps(),this.restoreFocusedCell(b),this.releaseLockOnRefresh()},b.prototype.scrollToTopIfNewData=function(a){var b=a.newData||a.newPage,c=this.gridOptionsWrapper.isSuppressScrollOnNewData();b&&!c&&this.gridPanel.scrollToTop()},b.prototype.sizeContainerToPageHeight=function(){var a=this.paginationProxy.getCurrentPageHeight();0===a&&(a=1),this.rowContainers.body.setHeight(a),this.rowContainers.fullWidth.setHeight(a),this.rowContainers.pinnedLeft.setHeight(a),this.rowContainers.pinnedRight.setHeight(a)},b.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw"ag-Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, eg instead of api.refreshView(), call setTimeout(function(){api.refreshView(),0}). To see what part of your code that caused the refresh check this stacktrace.";this.refreshInProgress=!0},b.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},b.prototype.restoreFocusedCell=function(a){a&&this.focusedCellController.setFocusedCell(a.rowIndex,a.column,a.floating,!0)},b.prototype.stopEditing=function(a){void 0===a&&(a=!1),this.forEachRowComp(function(b,c){c.stopEditing(a)})},b.prototype.forEachCellComp=function(a){h.Utils.iterateObject(this.rowCompsByIndex,function(b,c){c.forEachCellComp(a)})},b.prototype.forEachRowComp=function(a){h.Utils.iterateObject(this.rowCompsByIndex,a),h.Utils.iterateObject(this.floatingTopRowComps,a),h.Utils.iterateObject(this.floatingBottomRowComps,a)},b.prototype.addRenderedRowListener=function(a,b,c){this.rowCompsByIndex[b].addEventListener(a,c)},b.prototype.refreshCells=function(a){var b=this;void 0===a&&(a={});var c;h.Utils.exists(a.rowNodes)&&(c={top:{},bottom:{},normal:{}},a.rowNodes.forEach(function(a){a.rowPinned===q.Constants.PINNED_TOP?c.top[a.id]=!0:a.rowPinned===q.Constants.PINNED_BOTTOM?c.bottom[a.id]=!0:c.normal[a.id]=!0}));var d;h.Utils.exists(a.columns)&&(d={},a.columns.forEach(function(a){var c=b.columnController.getGridColumn(a);d[c.getId()]=!0}));var e=function(b){var e=b.getRowNode(),f=e.id,g=e.rowPinned;if(h.Utils.exists(c))if(g===q.Constants.PINNED_BOTTOM){if(!c.bottom[f])return}else if(g===q.Constants.PINNED_TOP){if(!c.top[f])return}else if(!c.normal[f])return;b.forEachCellComp(function(b){var c=b.getColumn().getId();d&&!d[c]||b.refreshCell({forceRefresh:a.force,volatile:a.volatile,newData:!1})})};h.Utils.iterateObject(this.rowCompsByIndex,function(a,b){e(b)}),this.floatingTopRowComps&&this.floatingTopRowComps.forEach(e),this.floatingBottomRowComps&&this.floatingBottomRowComps.forEach(e)},b.prototype.destroy=function(){a.prototype.destroy.call(this);var b=Object.keys(this.rowCompsByIndex);this.removeRowComps(b)},b.prototype.binRowComps=function(a){var b,c=this,d={};return a?(b=[],h.Utils.iterateObject(this.rowCompsByIndex,function(a,e){var f=e.getRowNode();h.Utils.exists(f.id)?(d[f.id]=e,delete c.rowCompsByIndex[a]):b.push(a)})):b=Object.keys(this.rowCompsByIndex),this.removeRowComps(b),d},b.prototype.removeRowComps=function(a){var b=this;a.forEach(function(a){b.rowCompsByIndex[a].destroy(),delete b.rowCompsByIndex[a]})},b.prototype.redrawAfterScroll=function(){this.getLockOnRefresh(),this.redraw(),this.releaseLockOnRefresh()},b.prototype.removeRowCompsNotToDraw=function(a){var b={};a.forEach(function(a){return b[a]=!0});var c=Object.keys(this.rowCompsByIndex),d=h.Utils.filter(c,function(a){return!b[a]});this.removeRowComps(d)},b.prototype.calculateIndexesToDraw=function(){var a=this,b=h.Utils.createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow);return h.Utils.iterateObject(this.rowCompsByIndex,function(c,d){var e=Number(c);(e<a.firstRenderedRow||e>a.lastRenderedRow)&&a.keepRowBecauseEditing(d)&&b.push(e)}),b.sort(function(a,b){return a-b}),b},b.prototype.redraw=function(a,b){var c=this;void 0===b&&(b=!1),this.workOutFirstAndLastRowsToRender();var d=this.calculateIndexesToDraw()
;this.removeRowCompsNotToDraw(d);var e=this.gridOptionsWrapper.isEnsureDomOrder()&&!this.forPrint,f=e?{eBody:null,eLeft:null,eRight:null,eFullWidth:null}:null,g=[];d.forEach(function(d){var e=c.createOrUpdateRowComp(d,a,b,f);h.Utils.exists(e)&&h.Utils.pushAll(g,e.getAndClearNextVMTurnFunctions())}),h.Utils.executeNextVMTurn(g),this.destroyRowComps(a,b),this.checkAngularCompile()},b.prototype.createOrUpdateRowComp=function(a,b,c,d){var e,f=this.rowCompsByIndex[a];if(f||(e=this.paginationProxy.getRow(a),h.Utils.exists(e)&&h.Utils.exists(b)&&b[e.id]&&(f=b[e.id],b[e.id]=null)),f)f.ensureInDomAfter(d);else{if(e||(e=this.paginationProxy.getRow(a)),!h.Utils.exists(e))return;f=this.createRowComp(e,c,d)}return this.updatePreviousElements(d,f),this.rowCompsByIndex[a]=f,f},b.prototype.destroyRowComps=function(a,b){var c=[];h.Utils.iterateObject(a,function(a,d){d&&(d.destroy(b),h.Utils.pushAll(c,d.getAndClearDelayedDestroyFunctions()))}),h.Utils.executeInAWhile(c)},b.prototype.checkAngularCompile=function(){var a=this;this.gridOptionsWrapper.isAngularCompileRows()&&setTimeout(function(){a.$scope.$apply()},0)},b.prototype.workOutFirstAndLastRowsToRender=function(){var a,b;if(this.paginationProxy.isRowsToRender()){var c=this.paginationProxy.getPageFirstRow(),d=this.paginationProxy.getPageLastRow();if(this.forPrint)a=c,b=d;else{var e=this.paginationProxy?this.paginationProxy.getPixelOffset():0,f=this.gridPanel.getVerticalPixelRange(),g=f.top,h=f.bottom,i=this.paginationProxy.getRowIndexAtPixel(g+e),j=this.paginationProxy.getRowIndexAtPixel(h+e),k=this.gridOptionsWrapper.getRowBuffer();i-=k,j+=k,i<c&&(i=c),j>d&&(j=d),a=i,b=j}}else a=0,b=-1;var l=a!==this.firstRenderedRow,m=b!==this.lastRenderedRow;if(l||m){this.firstRenderedRow=a,this.lastRenderedRow=b;var n={firstRow:a,lastRow:b};this.eventService.dispatchEvent(p.Events.EVENT_VIEWPORT_CHANGED,n)}},b.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},b.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},b.prototype.updatePreviousElements=function(a,b){if(!h.Utils.missing(a)){var c=b.getBodyRowElement(),d=b.getPinnedLeftRowElement(),e=b.getPinnedRightRowElement(),f=b.getFullWidthRowElement();c&&(a.eBody=c),d&&(a.eLeft=d),e&&(a.eRight=e),f&&(a.eFullWidth=f)}},b.prototype.keepRowBecauseEditing=function(a){var b=a.getRowNode(),c=this.focusedCellController.isRowNodeFocused(b),d=a.isEditing();return!(!c&&!d)&&!!this.paginationProxy.isRowPresent(b)},b.prototype.createRowComp=function(a,b,c){var d=new o.RowComp(this.$scope,this,this.rowContainers.body,this.rowContainers.fullWidth,this.rowContainers.pinnedLeft,this.rowContainers.pinnedRight,a,b,c);return this.context.wireBean(d),d},b.prototype.getRenderedNodes=function(){var a=this.rowCompsByIndex;return Object.keys(a).map(function(b){return a[b].getRowNode()})},b.prototype.navigateToNextCell=function(a,b,c,d,e){for(var f=new y.GridCell({rowIndex:c,floating:e,column:d}),g=f;;){if(g=this.cellNavigationService.getNextCellToFocus(b,g),h.Utils.missing(g))break;if(!this.gridOptionsWrapper.isGroupUseEntireRow())break;if(!this.paginationProxy.getRow(g.rowIndex).group)break}var i=this.gridOptionsWrapper.getNavigateToNextCellFunc();if(h.Utils.exists(i)){var j={key:b,previousCellDef:f,nextCellDef:g?g.getGridCellDef():null,event:a},k=i(j);g=h.Utils.exists(k)?new y.GridCell(k):null}if(g&&(h.Utils.missing(g.floating)&&this.gridPanel.ensureIndexVisible(g.rowIndex),g.column.isPinned()||this.gridPanel.ensureColumnVisible(g.column),this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter(),this.focusedCellController.setFocusedCell(g.rowIndex,g.column,g.floating,!0),this.rangeController)){var l=new y.GridCell({rowIndex:g.rowIndex,floating:g.floating,column:g.column});this.rangeController.setRangeToCell(l)}},b.prototype.startEditingCell=function(a,b,c){var d=this.getComponentForCell(a);d&&d.startRowOrCellEdit(b,c)},b.prototype.getComponentForCell=function(a){var b;switch(a.floating){case q.Constants.PINNED_TOP:b=this.floatingTopRowComps[a.rowIndex];break;case q.Constants.PINNED_BOTTOM:b=this.floatingBottomRowComps[a.rowIndex];break;default:b=this.rowCompsByIndex[a.rowIndex]}return b?b.getRenderedCellForColumn(a.column):null},b.prototype.onTabKeyDown=function(a,b){var c=b.shiftKey;this.moveToCellAfter(a,c)&&b.preventDefault()},b.prototype.tabToNextCell=function(a){var b=this.focusedCellController.getFocusedCell();if(h.Utils.missing(b))return!1;var c=this.getComponentForCell(b);return!h.Utils.missing(c)&&this.moveToCellAfter(c,a)},b.prototype.moveToCellAfter=function(a,b){var c=a.isEditing(),d=a.getGridCell(),e=this.findNextCellToFocusOn(d,b,c);return!!h.Utils.exists(e)&&(c?this.gridOptionsWrapper.isFullRowEdit()?this.moveEditToNextRow(a,e):this.moveEditToNextCell(a,e):e.focusCell(!0),!0)},b.prototype.moveEditToNextCell=function(a,b){a.stopEditing(),b.startEditingIfEnabled(null,null,!0),b.focusCell(!1)},b.prototype.moveEditToNextRow=function(a,b){var c=a.getGridCell(),d=b.getGridCell();if(c.rowIndex===d.rowIndex&&c.floating===d.floating)a.setFocusOutOnEditor(),b.setFocusInOnEditor();else{var e=a.getRenderedRow(),f=b.getRenderedRow();a.setFocusOutOnEditor(),e.stopEditing(),f.startRowEditing(),b.setFocusInOnEditor()}b.focusCell()},b.prototype.findNextCellToFocusOn=function(a,b,c){for(var d=a;;){d=this.cellNavigationService.getNextTabbedCell(d,b);var e=this.gridOptionsWrapper.getTabToNextCellFunc();if(h.Utils.exists(e)){var f={backwards:b,editing:c,previousCellDef:a.getGridCellDef(),nextCellDef:d?d.getGridCellDef():null},g=e(f);d=h.Utils.exists(g)?new y.GridCell(g):null}if(!d)return null;h.Utils.missing(d.floating)&&this.gridPanel.ensureIndexVisible(d.rowIndex),d.column.isPinned()||this.gridPanel.ensureColumnVisible(d.column),this.gridPanel.horizontallyScrollHeaderCenterAndFloatingCenter();var i=this.getComponentForCell(d);if(!h.Utils.missing(i)&&((!c||i.isCellEditable())&&!i.isSuppressNavigable())){if(this.rangeController){var j=new y.GridCell({rowIndex:d.rowIndex,floating:d.floating,column:d.column});this.rangeController.setRangeToCell(j)}return i}}},e([s.Autowired("paginationProxy"),f("design:type",A.PaginationProxy)],b.prototype,"paginationProxy",void 0),e([s.Autowired("columnController"),f("design:type",u.ColumnController)],b.prototype,"columnController",void 0),e([s.Autowired("gridOptionsWrapper"),f("design:type",i.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([s.Autowired("gridCore"),f("design:type",t.GridCore)],b.prototype,"gridCore",void 0),e([s.Autowired("gridPanel"),f("design:type",j.GridPanel)],b.prototype,"gridPanel",void 0),e([s.Autowired("$scope"),f("design:type",Object)],b.prototype,"$scope",void 0),e([s.Autowired("expressionService"),f("design:type",k.ExpressionService)],b.prototype,"expressionService",void 0),e([s.Autowired("templateService"),f("design:type",l.TemplateService)],b.prototype,"templateService",void 0),e([s.Autowired("valueService"),f("design:type",m.ValueService)],b.prototype,"valueService",void 0),e([s.Autowired("eventService"),f("design:type",n.EventService)],b.prototype,"eventService",void 0),e([s.Autowired("pinnedRowModel"),f("design:type",B.PinnedRowModel)],b.prototype,"pinnedRowModel",void 0),e([s.Autowired("context"),f("design:type",s.Context)],b.prototype,"context",void 0),e([s.Autowired("loggerFactory"),f("design:type",v.LoggerFactory)],b.prototype,"loggerFactory",void 0),e([s.Autowired("focusedCellController"),f("design:type",w.FocusedCellController)],b.prototype,"focusedCellController",void 0),e([s.Optional("rangeController"),f("design:type",Object)],b.prototype,"rangeController",void 0),e([s.Autowired("cellNavigationService"),f("design:type",x.CellNavigationService)],b.prototype,"cellNavigationService",void 0),e([g(0,s.Qualifier("loggerFactory")),f("design:type",Function),f("design:paramtypes",[v.LoggerFactory]),f("design:returntype",void 0)],b.prototype,"agWire",null),e([s.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),e([s.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroy",null),b=e([s.Bean("rowRenderer")],b)}(z.BeanStub);b.RowRenderer=C},function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a.length;c++)for(var d=a[c],f=0;f<d.bindings.length;f++){var g=d.bindings[f];if(e(g,b))return{trappedKeyboardBinding:g,trappedKeyboardBindingGroup:d}}return null}function e(a,b){var c=b.which||b.keyCode;return a.ctlRequired===b.ctrlKey&&a.keyCode===c&&a.altRequired===b.altKey}var f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},i=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var j=c(7),k=c(3),l=c(14),m=c(22),n=c(24),o=c(5),p=c(6),q=c(4),r=c(10),s=c(25),t=c(8),u=c(26),v=c(12),w=c(27),x=c(33),y=c(76),z=c(59),A=c(43),B=c(77),C=c(58),D=c(63),E=c(78),F=c(79),G='<div class="ag-overlay-panel" role="presentation"><div class="ag-overlay-wrapper ag-overlay-[OVERLAY_NAME]-wrapper">[OVERLAY_TEMPLATE]</div></div>',H=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.requestAnimationFrameExists="function"==typeof requestAnimationFrame,b.scrollLagCounter=0,b.scrollLagTicking=!1,b.lastLeftPosition=-1,b.lastTopPosition=-1,b}return f(b,a),b.prototype.agWire=function(a){this.logger=a.create("GridPanel"),this.forPrint=this.gridOptionsWrapper.isForPrint(),this.autoHeight=this.gridOptionsWrapper.isAutoHeight(),this.scrollWidth=this.gridOptionsWrapper.getScrollbarWidth(),this.useScrollLag=this.isUseScrollLag(),this.enableRtl=this.gridOptionsWrapper.isEnableRtl(),this.loadTemplate(),this.findElements()},b.prototype.getVerticalPixelRange=function(){var a=this.getPrimaryScrollViewport();return{top:a.scrollTop,bottom:a.scrollTop+a.offsetHeight}},b.prototype.destroy=function(){a.prototype.destroy.call(this)},b.prototype.onRowDataChanged=function(){this.showOrHideOverlay()},b.prototype.showOrHideOverlay=function(){this.paginationProxy.isEmpty()&&!this.gridOptionsWrapper.isSuppressNoRowsOverlay()?this.showNoRowsOverlay():this.hideOverlay()},b.prototype.getLayout=function(){return this.layout},b.prototype.init=function(){this.addEventListeners(),this.addDragListeners(),this.layout=new n.BorderLayout({overlays:{loading:j.Utils.loadTemplate(this.createLoadingOverlayTemplate()),noRows:j.Utils.loadTemplate(this.createNoRowsOverlayTemplate())},center:this.eRoot,dontFill:this.forPrint,fillHorizontalOnly:this.autoHeight,name:"eGridPanel"}),this.layout.addSizeChangeListener(this.setBodyAndHeaderHeights.bind(this)),this.layout.addSizeChangeListener(this.setLeftAndRightBounds.bind(this)),this.addScrollListener(),this.gridOptionsWrapper.isSuppressHorizontalScroll()&&(this.eBodyViewport.style.overflowX="hidden"),this.gridOptionsWrapper.isRowModelDefault()&&!this.gridOptionsWrapper.getRowData()&&this.showLoadingOverlay(),this.setPinnedContainersVisible(),this.setBodyAndHeaderHeights(),this.disableBrowserDragging(),this.addShortcutKeyListeners(),this.addMouseEvents(),this.addKeyboardEvents(),this.addBodyViewportListener(),this.addStopEditingWhenGridLosesFocus(),this.$scope&&this.addAngularApplyCheck(),this.onDisplayedColumnsWidthChanged()},b.prototype.addStopEditingWhenGridLosesFocus=function(){var a=this;this.gridOptionsWrapper.isStopEditingWhenGridLosesFocus()&&this.addDestroyableEventListener(this.eBody,"focusout",function(b){for(var c=b.relatedTarget,d=!1,e=c;j.Utils.exists(e)&&!d;){var f=!!a.gridOptionsWrapper.getDomData(e,D.PopupEditorWrapper.DOM_KEY_POPUP_EDITOR_WRAPPER),g=a.eBody==e;d=f||g,e=e.parentNode}d||a.rowRenderer.stopEditing()})},b.prototype.addAngularApplyCheck=function(){var a=this,b=!1,c=function(){b||(b=!0,setTimeout(function(){b=!1,a.$scope.$apply()},0))};this.addDestroyableEventListener(this.eventService,r.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,c),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,c)},b.prototype.disableBrowserDragging=function(){this.eRoot.addEventListener("dragstart",function(a){if(a.target instanceof HTMLImageElement)return a.preventDefault(),!1})},b.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,r.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_PINNED_ROW_DATA_CHANGED,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_ROW_DATA_CHANGED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_ROW_DATA_UPDATED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_ITEMS_ADDED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_ITEMS_REMOVED,this.onRowDataChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,k.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,k.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,k.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,k.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.setBodyAndHeaderHeights.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,k.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.setBodyAndHeaderHeights.bind(this))},b.prototype.addDragListeners=function(){var a=this;if(!this.forPrint&&this.gridOptionsWrapper.isEnableRangeSelection()&&!j.Utils.missing(this.rangeController)){[this.ePinnedLeftColsContainer,this.ePinnedRightColsContainer,this.eBodyContainer,this.eFloatingTop,this.eFloatingBottom].forEach(function(b){var c={dragStartPixels:0,eElement:b,onDragStart:a.rangeController.onDragStart.bind(a.rangeController),onDragStop:a.rangeController.onDragStop.bind(a.rangeController),onDragging:a.rangeController.onDragging.bind(a.rangeController)};a.dragService.addDragSource(c),a.addDestroyFunc(function(){return a.dragService.removeDragSource(c)})})}},b.prototype.addMouseEvents=function(){var a=this;["click","mousedown","dblclick","contextmenu","mouseover","mouseout"].forEach(function(b){var c=a.processMouseEvent.bind(a,b);a.eAllCellContainers.forEach(function(d){d.addEventListener(b,c),a.addDestroyFunc(function(){return d.removeEventListener(b,c)})})})},b.prototype.addKeyboardEvents=function(){var a=this;["keydown","keypress"].forEach(function(b){var c=a.processKeyboardEvent.bind(a,b);a.eAllCellContainers.forEach(function(d){a.addDestroyableEventListener(d,b,c)})})},b.prototype.addBodyViewportListener=function(){var a=this;if(!this.gridOptionsWrapper.isForPrint()){var b=function(b){j.Utils.getTarget(b)===a.eBodyViewport&&(a.onContextMenu(b),a.preventDefaultOnContextMenu(b))};this.addDestroyableEventListener(this.eBodyViewport,"contextmenu",b)}},b.prototype.getRowForEvent=function(a){for(var b=j.Utils.getTarget(a);b;){var c=this.gridOptionsWrapper.getDomData(b,y.RowComp.DOM_DATA_KEY_RENDERED_ROW);if(c)return c;b=b.parentElement}return null},b.prototype.processKeyboardEvent=function(a,b){var c=this.mouseEventService.getRenderedCellForEvent(b);if(c)switch(a){case"keydown":var e=[t.Constants.DIAGONAL_SCROLL_KEYS,t.Constants.HORIZONTAL_SCROLL_KEYS,t.Constants.VERTICAL_SCROLL_KEYS],f=d(e,b);f?this.handlePageScrollingKey(f.trappedKeyboardBindingGroup.id,f.trappedKeyboardBinding.id,b):c.onKeyDown(b);break;case"keypress":c.onKeyPress(b)}},b.prototype.handlePageScrollingKey=function(a,b,c){switch(a){case t.Constants.DIAGONAL_SCROLL_KEYS_ID:this.pageDiagonally(b);break;case t.Constants.VERTICAL_SCROLL_KEYS_ID:this.pageVertically(b);break;case t.Constants.HORIZONTAL_SCROLL_KEYS_ID:this.pageHorizontally(b)}c.preventDefault()},b.prototype.pageHorizontally=function(a){var b=this.columnController.getAllDisplayedColumns(),c=a===t.Constants.KEY_CTRL_LEFT_NAME?b[0]:b[b.length-1],d={type:I.HORIZONTAL,columnToScrollTo:c,columnToFocus:c};this.performScroll(d)},b.prototype.pageDiagonally=function(a){var b=this.getPrimaryScrollViewport().offsetHeight,c=a===t.Constants.KEY_PAGE_HOME_NAME?0:b,d=a===t.Constants.KEY_PAGE_HOME_NAME?0:this.paginationProxy.getPageLastRow(),e=this.paginationProxy.getRow(d),f=this.columnController.getAllDisplayedColumns(),g=a===t.Constants.KEY_PAGE_HOME_NAME?f[0]:f[f.length-1],h={focusedRowTopDelta:c,type:I.DIAGONAL,rowToScrollTo:e,columnToScrollTo:g};this.performScroll(h)},b.prototype.pageVertically=function(a){if(a===t.Constants.KEY_CTRL_UP_NAME)return void this.performScroll({rowToScrollTo:this.paginationProxy.getRow(0),focusedRowTopDelta:0,type:I.VERTICAL});if(a===t.Constants.KEY_CTRL_DOWN_NAME)return void this.performScroll({rowToScrollTo:this.paginationProxy.getRow(this.paginationProxy.getPageLastRow()),focusedRowTopDelta:this.getPrimaryScrollViewport().offsetHeight,type:I.VERTICAL});var b=this.focusedCellController.getFocusedCell(),c=this.paginationProxy.getRow(b.rowIndex),d=c.rowTop,e=d-this.getPrimaryScrollViewport().scrollTop-this.paginationProxy.getPixelOffset(),f=this.getPrimaryScrollViewport().scrollTop,g=this.paginationProxy.getRowIndexAtPixel(f+this.paginationProxy.getPixelOffset()),h=this.paginationProxy.getRow(g),i=this.getPrimaryScrollViewport().offsetHeight,j=this.paginationProxy.getCurrentPageHeight(),k=j<i?j:i,l=h.rowTop+h.rowHeight,m=a==t.Constants.KEY_PAGE_DOWN_NAME?k+l:l-k,n=this.paginationProxy.getRow(this.paginationProxy.getRowIndexAtPixel(m)),o={rowToScrollTo:n,focusedRowTopDelta:e,type:I.VERTICAL};this.performScroll(o)},b.prototype.scrollToTop=function(){this.forPrint||(this.getPrimaryScrollViewport().scrollTop=0)},b.prototype.performScroll=function(a){var b,c,d,e,f=this.focusedCellController.getFocusedCell();switch(a.type){case I.VERTICAL:b=a,this.ensureIndexVisible(b.rowToScrollTo.rowIndex),e=b.rowToScrollTo.rowTop-this.paginationProxy.getPixelOffset(),this.getPrimaryScrollViewport().scrollTop=e;break;case I.DIAGONAL:c=a,this.ensureIndexVisible(c.rowToScrollTo.rowIndex),e=c.rowToScrollTo.rowTop-this.paginationProxy.getPixelOffset(),this.getPrimaryScrollViewport().scrollTop=e,this.getPrimaryScrollViewport().scrollLeft=c.columnToScrollTo.getLeft();break;case I.HORIZONTAL:d=a,this.getPrimaryScrollViewport().scrollLeft=d.columnToScrollTo.getLeft()}var g={onlyBody:!0,suppressKeepFocus:!0};this.rowRenderer.redrawAfterModelUpdate(g);var h,i;switch(a.type){case I.VERTICAL:h=this.paginationProxy.getRowIndexAtPixel(e+this.paginationProxy.getPixelOffset()+b.focusedRowTopDelta),i=f.column;break;case I.DIAGONAL:h=this.paginationProxy.getRowIndexAtPixel(e+this.paginationProxy.getPixelOffset()+c.focusedRowTopDelta),i=c.columnToScrollTo;break;case I.HORIZONTAL:h=f.rowIndex,i=d.columnToScrollTo}this.focusedCellController.setFocusedCell(h,i,null,!0)},b.prototype.processMouseEvent=function(a,b){var c=this.mouseEventService.getRenderedCellForEvent(b);c&&c.onMouseEvent(a,b);var d=this.getRowForEvent(b);d&&d.onMouseEvent(a,b),this.preventDefaultOnContextMenu(b)},b.prototype.onContextMenu=function(a){(this.gridOptionsWrapper.isAllowContextMenuWithControlKey()||!a.ctrlKey&&!a.metaKey)&&this.contextMenuFactory&&!this.gridOptionsWrapper.isSuppressContextMenu()&&(this.contextMenuFactory.showMenu(null,null,null,a),a.preventDefault())},b.prototype.preventDefaultOnContextMenu=function(a){this.gridOptionsWrapper.isSuppressMiddleClickScrolls()&&2===a.which&&a.preventDefault()},b.prototype.addShortcutKeyListeners=function(){var a=this;this.eAllCellContainers.forEach(function(b){b.addEventListener("keydown",function(b){var c=a.mouseEventService.getRenderedCellForEvent(b);if((!c||!c.isEditing())&&(b.ctrlKey||b.metaKey))switch(b.which){case t.Constants.KEY_A:return a.onCtrlAndA(b);case t.Constants.KEY_C:return a.onCtrlAndC(b);case t.Constants.KEY_V:return a.onCtrlAndV(b);case t.Constants.KEY_D:return a.onCtrlAndD(b)}})})},b.prototype.onCtrlAndA=function(a){if(this.rangeController&&this.paginationProxy.isRowsToRender()){var b=void 0,c=void 0,d=void 0;c=this.pinnedRowModel.isEmpty(t.Constants.PINNED_TOP)?null:t.Constants.PINNED_TOP,this.pinnedRowModel.isEmpty(t.Constants.PINNED_BOTTOM)?(d=null,b=this.paginationProxy.getTotalRowCount()-1):(d=t.Constants.PINNED_BOTTOM,b=this.pinnedRowModel.getPinnedBottomRowData().length=1);var e=this.columnController.getAllDisplayedColumns();if(j.Utils.missingOrEmpty(e))return;this.rangeController.setRange({rowStart:0,floatingStart:c,rowEnd:b,floatingEnd:d,columnStart:e[0],columnEnd:e[e.length-1]})}return a.preventDefault(),!1},b.prototype.onCtrlAndC=function(a){if(this.clipboardService){var b=this.focusedCellController.getFocusedCell();return this.clipboardService.copyToClipboard(),a.preventDefault(),b&&this.focusedCellController.setFocusedCell(b.rowIndex,b.column,b.floating,!0),!1}},b.prototype.onCtrlAndV=function(a){if(this.rangeController)return this.clipboardService.pasteFromClipboard(),!1},b.prototype.onCtrlAndD=function(a){if(this.clipboardService)return this.clipboardService.copyRangeDown(),a.preventDefault(),!1},b.prototype.createOverlayTemplate=function(a,b,c){var d=G.replace("[OVERLAY_NAME]",a);return d=c?d.replace("[OVERLAY_TEMPLATE]",c):d.replace("[OVERLAY_TEMPLATE]",b)},b.prototype.createLoadingOverlayTemplate=function(){var a=this.gridOptionsWrapper.getOverlayLoadingTemplate(),b=this.createOverlayTemplate("loading",'<span class="ag-overlay-loading-center">[LOADING...]</span>',a),c=this.gridOptionsWrapper.getLocaleTextFunc();return b.replace("[LOADING...]",c("loadingOoo","Loading..."))},b.prototype.createNoRowsOverlayTemplate=function(){var a=this.gridOptionsWrapper.getOverlayNoRowsTemplate(),b=this.createOverlayTemplate("no-rows",'<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>',a),c=this.gridOptionsWrapper.getLocaleTextFunc();return b.replace("[NO_ROWS_TO_SHOW]",c("noRowsToShow","No Rows To Show"))},b.prototype.ensureIndexVisible=function(a){if(!this.gridOptionsWrapper.isForPrint()){this.logger.log("ensureIndexVisible: "+a);var b=this.paginationProxy.getTotalRowCount();if("number"!=typeof a||a<0||a>=b)return void console.warn("invalid row index for ensureIndexVisible: "+a);this.paginationProxy.goToPageWithIndex(a);var c=this.paginationProxy.getRow(a),d=this.paginationProxy.getPixelOffset(),e=c.rowTop-d,f=e+c.rowHeight,g=this.getVerticalPixelRange(),h=g.top,i=g.bottom;this.isHorizontalScrollShowing()&&(i-=this.scrollWidth);var j=h>e,k=i<f,l=this.getPrimaryScrollViewport();if(j)l.scrollTop=e,this.rowRenderer.redrawAfterScroll();else if(k){var m=i-h,n=f-m;l.scrollTop=n,this.rowRenderer.redrawAfterScroll()}}},b.prototype.getPrimaryScrollViewport=function(){return this.enableRtl&&this.columnController.isPinningLeft()?this.ePinnedLeftColsViewport:!this.enableRtl&&this.columnController.isPinningRight()?this.ePinnedRightColsViewport:this.eBodyViewport},b.prototype.getCenterWidth=function(){return this.eBodyViewport.clientWidth},b.prototype.isHorizontalScrollShowing=function(){return j.Utils.isHorizontalScrollShowing(this.eBodyViewport)},b.prototype.isVerticalScrollShowing=function(){return this.columnController.isPinningRight()?j.Utils.isVerticalScrollShowing(this.ePinnedRightColsViewport):j.Utils.isVerticalScrollShowing(this.eBodyViewport)},b.prototype.isBodyVerticalScrollShowing=function(){return!(!this.enableRtl&&this.columnController.isPinningRight())&&((!this.enableRtl||!this.columnController.isPinningLeft())&&j.Utils.isVerticalScrollShowing(this.eBodyViewport))},b.prototype.periodicallyCheck=function(){this.forPrint||(this.setBottomPaddingOnPinnedRight(),this.setMarginOnFullWidthCellContainer(),this.setScrollShowing())},b.prototype.setScrollShowing=function(){var a={vBody:!1,hBody:!1,vPinnedLeft:!1,vPinnedRight:!1};this.enableRtl?this.columnController.isPinningLeft()?a.vPinnedLeft=!this.forPrint&&j.Utils.isVerticalScrollShowing(this.ePinnedLeftColsViewport):a.vBody=j.Utils.isVerticalScrollShowing(this.eBodyViewport):this.columnController.isPinningRight()?a.vPinnedRight=!this.forPrint&&j.Utils.isVerticalScrollShowing(this.ePinnedRightColsViewport):a.vBody=j.Utils.isVerticalScrollShowing(this.eBodyViewport),a.hBody=j.Utils.isHorizontalScrollShowing(this.eBodyViewport),this.scrollVisibleService.setScrollsVisible(a)},b.prototype.setBottomPaddingOnPinnedRight=function(){if(!this.forPrint&&this.columnController.isPinningRight()){var a=this.eBodyViewport.clientWidth<this.eBodyViewport.scrollWidth;this.ePinnedRightColsContainer.style.marginBottom=a?this.scrollWidth+"px":""}},b.prototype.setMarginOnFullWidthCellContainer=function(){this.forPrint||(this.enableRtl?this.isVerticalScrollShowing()?this.eFullWidthCellViewport.style.borderLeft=this.scrollWidth+"px solid transparent":this.eFullWidthCellViewport.style.borderLeft="":this.isVerticalScrollShowing()?this.eFullWidthCellViewport.style.borderRight=this.scrollWidth+"px solid transparent":this.eFullWidthCellViewport.style.borderRight="",this.isHorizontalScrollShowing()?this.eFullWidthCellViewport.style.borderBottom=this.scrollWidth+"px solid transparent":this.eFullWidthCellViewport.style.borderBottom="")},b.prototype.ensureColumnVisible=function(a){if(!this.gridOptionsWrapper.isForPrint()){var b=this.columnController.getGridColumn(a);if(b){if(b.isPinned())return void console.warn("calling ensureIndexVisible on a "+b.getPinned()+" pinned column doesn't make sense for column "+b.getColId());if(!this.columnController.isColumnDisplayed(b))return void console.warn("column is not currently visible");var c,d,e=b.getLeft(),f=e+b.getActualWidth(),g=this.eBodyViewport.clientWidth,h=this.getBodyViewportScrollLeft(),i=this.columnController.getBodyContainerWidth();this.enableRtl?(c=i-h-g,d=i-h):(c=h,d=g+h);var j=c>e,k=d<f;if(j)if(this.enableRtl){var l=i-g-e;this.setBodyViewportScrollLeft(l)}else this.setBodyViewportScrollLeft(e);else if(k)if(this.enableRtl){var l=i-f;this.setBodyViewportScrollLeft(l)}else{var l=f-g;this.setBodyViewportScrollLeft(l)}this.setLeftAndRightBounds()}}},b.prototype.showLoadingOverlay=function(){this.gridOptionsWrapper.isSuppressLoadingOverlay()||this.layout.showOverlay("loading")},b.prototype.showNoRowsOverlay=function(){this.gridOptionsWrapper.isSuppressNoRowsOverlay()||this.layout.showOverlay("noRows")},b.prototype.hideOverlay=function(){this.layout.hideOverlay()},b.prototype.getWidthForSizeColsToFit=function(){var a=this.eBody.clientWidth;return this.isVerticalScrollShowing()&&(a-=this.scrollWidth),a},b.prototype.sizeColumnsToFit=function(a){var b=this,c=this.getWidthForSizeColsToFit();c>0?this.columnController.sizeColumnsToFit(c):void 0===a?setTimeout(function(){b.sizeColumnsToFit(100)},0):100===a?setTimeout(function(){b.sizeColumnsToFit(-1)},100):console.log("ag-Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},b.prototype.getBodyContainer=function(){return this.eBodyContainer},b.prototype.getDropTargetBodyContainers=function(){return this.forPrint?[this.eBodyContainer,this.eFloatingTopContainer,this.eFloatingBottomContainer]:[this.eBodyViewport,this.eFloatingTopViewport,this.eFloatingBottomViewport]},b.prototype.getBodyViewport=function(){return this.eBodyViewport},b.prototype.getDropTargetLeftContainers=function(){return this.forPrint?[]:[this.ePinnedLeftColsViewport,this.ePinnedLeftFloatingBottom,this.ePinnedLeftFloatingTop]},b.prototype.getDropTargetPinnedRightContainers=function(){return this.forPrint?[]:[this.ePinnedRightColsViewport,this.ePinnedRightFloatingBottom,this.ePinnedRightFloatingTop]},b.prototype.getHeaderContainer=function(){return this.eHeaderContainer},b.prototype.getHeaderOverlay=function(){return this.eHeaderOverlay},b.prototype.getRoot=function(){return this.eRoot},b.prototype.getPinnedLeftHeader=function(){return this.ePinnedLeftHeader},b.prototype.getPinnedRightHeader=function(){return this.ePinnedRightHeader},b.prototype.queryHtmlElement=function(a){return this.eRoot.querySelector(a)},b.prototype.loadTemplate=function(){var a
;a=this.forPrint?'<div class="ag-root ag-font-style"><div class="ag-header-container"></div><div class="ag-floating-top-container"></div><div class="ag-body-container"></div><div class="ag-floating-bottom-container"></div></div>':this.autoHeight?'<div class="ag-root ag-font-style" role="grid"><div class="ag-header" role="row"><div class="ag-pinned-left-header" role="presentation"></div><div class="ag-pinned-right-header" role="presentation"></div><div class="ag-header-viewport" role="presentation"><div class="ag-header-container" role="presentation"></div></div><div class="ag-header-overlay" role="presentation"></div></div><div class="ag-floating-top" role="presentation"><div class="ag-pinned-left-floating-top" role="presentation"></div><div class="ag-pinned-right-floating-top" role="presentation"></div><div class="ag-floating-top-viewport" role="presentation"><div class="ag-floating-top-container" role="presentation"></div></div><div class="ag-floating-top-full-width-container" role="presentation"></div></div><div class="ag-body" role="presentation"><div class="ag-pinned-left-cols-viewport" role="presentation"><div class="ag-pinned-left-cols-container" role="presentation"></div></div><div class="ag-pinned-right-cols-viewport" role="presentation"><div class="ag-pinned-right-cols-container" role="presentation"></div></div><div class="ag-body-viewport-wrapper" role="presentation"><div class="ag-body-viewport" role="presentation"><div class="ag-body-container" role="presentation"></div></div></div><div class="ag-full-width-viewport" role="presentation"><div class="ag-full-width-container" role="presentation"></div></div></div><div class="ag-floating-bottom" role="presentation"><div class="ag-pinned-left-floating-bottom" role="presentation"></div><div class="ag-pinned-right-floating-bottom" role="presentation"></div><div class="ag-floating-bottom-viewport" role="presentation"><div class="ag-floating-bottom-container" role="presentation"></div></div><div class="ag-floating-bottom-full-width-container" role="presentation"></div></div></div>':'<div class="ag-root ag-font-style" role="grid"><div class="ag-header" role="row"><div class="ag-pinned-left-header" role="presentation"></div><div class="ag-pinned-right-header" role="presentation"></div><div class="ag-header-viewport" role="presentation"><div class="ag-header-container" role="presentation"></div></div><div class="ag-header-overlay" role="presentation"></div></div><div class="ag-floating-top" role="presentation"><div class="ag-pinned-left-floating-top" role="presentation"></div><div class="ag-pinned-right-floating-top" role="presentation"></div><div class="ag-floating-top-viewport" role="presentation"><div class="ag-floating-top-container" role="presentation"></div></div><div class="ag-floating-top-full-width-container" role="presentation"></div></div><div class="ag-floating-bottom" role="presentation"><div class="ag-pinned-left-floating-bottom" role="presentation"></div><div class="ag-pinned-right-floating-bottom" role="presentation"></div><div class="ag-floating-bottom-viewport" role="presentation"><div class="ag-floating-bottom-container" role="presentation"></div></div><div class="ag-floating-bottom-full-width-container" role="presentation"></div></div><div class="ag-body" role="presentation"><div class="ag-pinned-left-cols-viewport" role="presentation"><div class="ag-pinned-left-cols-container" role="presentation"></div></div><div class="ag-pinned-right-cols-viewport" role="presentation"><div class="ag-pinned-right-cols-container" role="presentation"></div></div><div class="ag-body-viewport-wrapper" role="presentation"><div class="ag-body-viewport" role="presentation"><div class="ag-body-container" role="presentation"></div></div></div><div class="ag-full-width-viewport" role="presentation"><div class="ag-full-width-container" role="presentation"></div></div></div></div>',this.eRoot=j.Utils.loadTemplate(a)},b.prototype.findElements=function(){var a=this;if(this.forPrint){this.eHeaderContainer=this.queryHtmlElement(".ag-header-container"),this.eBodyContainer=this.queryHtmlElement(".ag-body-container"),this.eFloatingTopContainer=this.queryHtmlElement(".ag-floating-top-container"),this.eFloatingBottomContainer=this.queryHtmlElement(".ag-floating-bottom-container"),this.eAllCellContainers=[this.eBodyContainer,this.eFloatingTopContainer,this.eFloatingBottomContainer];var b={body:new B.RowContainerComponent({eContainer:this.eBodyContainer}),fullWidth:null,pinnedLeft:null,pinnedRight:null,floatingTop:new B.RowContainerComponent({eContainer:this.eFloatingTopContainer}),floatingTopPinnedLeft:null,floatingTopPinnedRight:null,floatingTopFullWidth:null,floatingBottom:new B.RowContainerComponent({eContainer:this.eFloatingBottomContainer}),floatingBottomPinnedLeft:null,floatingBottomPinnedRight:null,floatingBottomFullWith:null};this.rowContainerComponents=b,b.fullWidth=b.body,b.floatingBottomFullWith=b.floatingBottom,b.floatingTopFullWidth=b.floatingTop}else this.eBody=this.queryHtmlElement(".ag-body"),this.eBodyContainer=this.queryHtmlElement(".ag-body-container"),this.eBodyViewport=this.queryHtmlElement(".ag-body-viewport"),this.eBodyViewportWrapper=this.queryHtmlElement(".ag-body-viewport-wrapper"),this.eFullWidthCellContainer=this.queryHtmlElement(".ag-full-width-container"),this.eFullWidthCellViewport=this.queryHtmlElement(".ag-full-width-viewport"),this.ePinnedLeftColsContainer=this.queryHtmlElement(".ag-pinned-left-cols-container"),this.ePinnedRightColsContainer=this.queryHtmlElement(".ag-pinned-right-cols-container"),this.ePinnedLeftColsViewport=this.queryHtmlElement(".ag-pinned-left-cols-viewport"),this.ePinnedRightColsViewport=this.queryHtmlElement(".ag-pinned-right-cols-viewport"),this.ePinnedLeftHeader=this.queryHtmlElement(".ag-pinned-left-header"),this.ePinnedRightHeader=this.queryHtmlElement(".ag-pinned-right-header"),this.eHeader=this.queryHtmlElement(".ag-header"),this.eHeaderContainer=this.queryHtmlElement(".ag-header-container"),this.eHeaderOverlay=this.queryHtmlElement(".ag-header-overlay"),this.eHeaderViewport=this.queryHtmlElement(".ag-header-viewport"),this.eFloatingTop=this.queryHtmlElement(".ag-floating-top"),this.ePinnedLeftFloatingTop=this.queryHtmlElement(".ag-pinned-left-floating-top"),this.ePinnedRightFloatingTop=this.queryHtmlElement(".ag-pinned-right-floating-top"),this.eFloatingTopContainer=this.queryHtmlElement(".ag-floating-top-container"),this.eFloatingTopViewport=this.queryHtmlElement(".ag-floating-top-viewport"),this.eFloatingTopFullWidthCellContainer=this.queryHtmlElement(".ag-floating-top-full-width-container"),this.eFloatingBottom=this.queryHtmlElement(".ag-floating-bottom"),this.ePinnedLeftFloatingBottom=this.queryHtmlElement(".ag-pinned-left-floating-bottom"),this.ePinnedRightFloatingBottom=this.queryHtmlElement(".ag-pinned-right-floating-bottom"),this.eFloatingBottomContainer=this.queryHtmlElement(".ag-floating-bottom-container"),this.eFloatingBottomViewport=this.queryHtmlElement(".ag-floating-bottom-viewport"),this.eFloatingBottomFullWidthCellContainer=this.queryHtmlElement(".ag-floating-bottom-full-width-container"),this.eAllCellContainers=[this.ePinnedLeftColsContainer,this.ePinnedRightColsContainer,this.eBodyContainer,this.eFloatingTop,this.eFloatingBottom,this.eFullWidthCellContainer],this.rowContainerComponents={body:new B.RowContainerComponent({eContainer:this.eBodyContainer,eViewport:this.eBodyViewport}),fullWidth:new B.RowContainerComponent({eContainer:this.eFullWidthCellContainer,hideWhenNoChildren:!0,eViewport:this.eFullWidthCellViewport}),pinnedLeft:new B.RowContainerComponent({eContainer:this.ePinnedLeftColsContainer,eViewport:this.ePinnedLeftColsViewport}),pinnedRight:new B.RowContainerComponent({eContainer:this.ePinnedRightColsContainer,eViewport:this.ePinnedRightColsViewport}),floatingTop:new B.RowContainerComponent({eContainer:this.eFloatingTopContainer}),floatingTopPinnedLeft:new B.RowContainerComponent({eContainer:this.ePinnedLeftFloatingTop}),floatingTopPinnedRight:new B.RowContainerComponent({eContainer:this.ePinnedRightFloatingTop}),floatingTopFullWidth:new B.RowContainerComponent({eContainer:this.eFloatingTopFullWidthCellContainer,hideWhenNoChildren:!0}),floatingBottom:new B.RowContainerComponent({eContainer:this.eFloatingBottomContainer}),floatingBottomPinnedLeft:new B.RowContainerComponent({eContainer:this.ePinnedLeftFloatingBottom}),floatingBottomPinnedRight:new B.RowContainerComponent({eContainer:this.ePinnedRightFloatingBottom}),floatingBottomFullWith:new B.RowContainerComponent({eContainer:this.eFloatingBottomFullWidthCellContainer,hideWhenNoChildren:!0})},this.addMouseWheelEventListeners();j.Utils.iterateObject(this.rowContainerComponents,function(b,c){c&&a.context.wireBean(c)})},b.prototype.getRowContainers=function(){return this.rowContainerComponents},b.prototype.addMouseWheelEventListeners=function(){this.addDestroyableEventListener(this.eBodyViewport,"mousewheel",this.centerMouseWheelListener.bind(this)),this.addDestroyableEventListener(this.eBodyViewport,"DOMMouseScroll",this.centerMouseWheelListener.bind(this)),this.enableRtl?(this.addDestroyableEventListener(this.ePinnedRightColsViewport,"mousewheel",this.genericMouseWheelListener.bind(this)),this.addDestroyableEventListener(this.ePinnedRightColsViewport,"DOMMouseScroll",this.genericMouseWheelListener.bind(this))):(this.addDestroyableEventListener(this.ePinnedLeftColsViewport,"mousewheel",this.genericMouseWheelListener.bind(this)),this.addDestroyableEventListener(this.ePinnedLeftColsViewport,"DOMMouseScroll",this.genericMouseWheelListener.bind(this)))},b.prototype.getHeaderViewport=function(){return this.eHeaderViewport},b.prototype.centerMouseWheelListener=function(a){if(!this.isBodyVerticalScrollActive()){var b=this.enableRtl?this.ePinnedLeftColsViewport:this.ePinnedRightColsViewport;return this.generalMouseWheelListener(a,b)}},b.prototype.genericMouseWheelListener=function(a){var b;return b=this.isBodyVerticalScrollActive()?this.eBodyViewport:this.enableRtl?this.ePinnedLeftColsViewport:this.ePinnedRightColsViewport,this.generalMouseWheelListener(a,b)},b.prototype.generalMouseWheelListener=function(a,b){var c=j.Utils.normalizeWheel(a);if(Math.abs(c.pixelX)>Math.abs(c.pixelY)){var d=this.eBodyViewport.scrollLeft+c.pixelX;this.eBodyViewport.scrollLeft=d}else{var e=b.scrollTop+c.pixelY;b.scrollTop=e}return this.gridOptionsWrapper.isSuppressPreventDefaultOnMouseWheel()||a.preventDefault(),!1},b.prototype.onDisplayedColumnsChanged=function(){this.setPinnedContainersVisible(),this.setBodyAndHeaderHeights(),this.setLeftAndRightBounds()},b.prototype.onDisplayedColumnsWidthChanged=function(){this.setWidthsOfContainers(),this.setLeftAndRightBounds(),this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},b.prototype.onScrollVisibilityChanged=function(){this.setWidthsOfContainers()},b.prototype.setWidthsOfContainers=function(){var a=this.columnController.getBodyContainerWidth()+"px";this.eBodyContainer.style.width=a,this.forPrint||(this.eFloatingBottomContainer.style.width=a,this.eFloatingTopContainer.style.width=a,this.setPinnedLeftWidth(),this.setPinnedRightWidth())},b.prototype.setPinnedLeftWidth=function(){var a=this.scrollVisibleService.getPinnedLeftWidth()+"px",b=this.scrollVisibleService.getPinnedLeftWithScrollWidth()+"px";this.ePinnedLeftColsViewport.style.width=b,this.eBodyViewportWrapper.style.marginLeft=b,this.ePinnedLeftFloatingBottom.style.width=b,this.ePinnedLeftFloatingTop.style.width=b,this.ePinnedLeftColsContainer.style.width=a},b.prototype.setPinnedRightWidth=function(){var a=this.scrollVisibleService.getPinnedRightWidth()+"px",b=this.scrollVisibleService.getPinnedRightWithScrollWidth()+"px";this.ePinnedRightColsViewport.style.width=b,this.eBodyViewportWrapper.style.marginRight=b,this.ePinnedRightFloatingBottom.style.width=b,this.ePinnedRightFloatingTop.style.width=b,this.ePinnedRightColsContainer.style.width=a},b.prototype.setPinnedContainersVisible=function(){if(!this.forPrint){var a=!1,b=Math.max(this.eBodyViewport.scrollTop,this.ePinnedLeftColsViewport.scrollTop,this.ePinnedRightColsViewport.scrollTop),c=this.columnController.isPinningLeft();c!==this.pinningLeft&&(this.pinningLeft=c,this.ePinnedLeftHeader.style.display=c?"inline-block":"none",this.ePinnedLeftColsViewport.style.display=c?"inline":"none",a=!0);var d=this.columnController.isPinningRight();if(d!==this.pinningRight&&(this.pinningRight=d,this.ePinnedRightHeader.style.display=d?"inline-block":"none",this.ePinnedRightColsViewport.style.display=d?"inline":"none",a=!0),a){var e=this.isBodyVerticalScrollActive();this.eBodyViewport.style.overflowY=e?"auto":"hidden",e?this.eBodyContainer.style.top="0px":this.eBodyViewport.scrollTop=0;this.getPrimaryScrollViewport().scrollTop=b,this.fakeVerticalScroll(b)}}},b.prototype.setBodyAndHeaderHeights=function(){if(!this.forPrint){var a=this.layout.getCentreHeight();if(a){var b,c,d,e=this.columnController.getHeaderRowCount(),f=0;this.columnController.isPivotMode()?(j.Utils.removeCssClass(this.eHeader,"ag-pivot-off"),j.Utils.addCssClass(this.eHeader,"ag-pivot-on"),f=0,c=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),d=this.gridOptionsWrapper.getPivotHeaderHeight()):(j.Utils.removeCssClass(this.eHeader,"ag-pivot-on"),j.Utils.addCssClass(this.eHeader,"ag-pivot-off"),this.gridOptionsWrapper.isFloatingFilter()&&e++,f=this.gridOptionsWrapper.isFloatingFilter()?1:0,c=this.gridOptionsWrapper.getGroupHeaderHeight(),d=this.gridOptionsWrapper.getHeaderHeight());var g=1+f,h=e-g;if(b=f*this.gridOptionsWrapper.getFloatingFiltersHeight(),b+=h*c,b+=d,this.eHeader.style.height=b+"px",!this.autoHeight){var i=this.pinnedRowModel.getPinnedTopTotalHeight(),k=b+i,l=this.pinnedRowModel.getPinnedBottomTotalHeight(),m=a-l,n=a-b-l-i;this.eBody.style.top=k+"px",this.eBody.style.height=n+"px",this.eFloatingTop.style.top=b+"px",this.eFloatingTop.style.height=i+"px",this.eFloatingBottom.style.height=l+"px",this.eFloatingBottom.style.top=m+"px",this.ePinnedLeftColsViewport.style.height=n+"px",this.ePinnedRightColsViewport.style.height=n+"px",this.bodyHeight!==n&&(this.bodyHeight=n,this.eventService.dispatchEvent(r.Events.EVENT_BODY_HEIGHT_CHANGED))}}}},b.prototype.getBodyHeight=function(){return this.bodyHeight},b.prototype.setHorizontalScrollPosition=function(a){this.eBodyViewport.scrollLeft=a},b.prototype.scrollHorizontally=function(a){var b=this.eBodyViewport.scrollLeft;return this.setHorizontalScrollPosition(b+a),this.eBodyViewport.scrollLeft-b},b.prototype.addScrollListener=function(){var a=this;if(!this.forPrint){var b=function(b){return a.useScrollLag?a.debounce.bind(a,b):b},c=b(this.onBodyScroll.bind(this));this.addDestroyableEventListener(this.eBodyViewport,"scroll",c);var d=this.onVerticalScroll.bind(this,this.ePinnedLeftColsViewport),e=this.onVerticalScroll.bind(this,this.ePinnedRightColsViewport);if(this.enableRtl){var f=b(d);this.addDestroyableEventListener(this.ePinnedLeftColsViewport,"scroll",f);var g=function(){return a.ePinnedRightColsViewport.scrollTop=0};this.addDestroyableEventListener(this.ePinnedRightColsViewport,"scroll",g)}else{var f=b(e);this.addDestroyableEventListener(this.ePinnedRightColsViewport,"scroll",f);var h=function(){return a.ePinnedLeftColsViewport.scrollTop=0};this.addDestroyableEventListener(this.ePinnedLeftColsViewport,"scroll",h)}var i=function(){a.getPrimaryScrollViewport()!==a.eBodyViewport&&(a.eBodyViewport.scrollTop=0)};this.addDestroyableEventListener(this.eBodyViewport,"scroll",i),this.addIEPinFix(e,d)}},b.prototype.onBodyScroll=function(){this.onBodyHorizontalScroll(),this.onBodyVerticalScroll()},b.prototype.onBodyHorizontalScroll=function(){var a=this.eBodyViewport.scrollLeft;a!==this.lastLeftPosition&&(this.eventService.dispatchEvent(r.Events.EVENT_BODY_SCROLL,{direction:"horizontal"}),this.lastLeftPosition=a,this.horizontallyScrollHeaderCenterAndFloatingCenter(),this.alignedGridsService.fireHorizontalScrollEvent(a),this.setLeftAndRightBounds())},b.prototype.onBodyVerticalScroll=function(){this.isBodyVerticalScrollActive()&&this.onVerticalScroll(this.eBodyViewport)},b.prototype.onVerticalScroll=function(a){var b=a.scrollTop;b!==this.lastTopPosition&&(this.eventService.dispatchEvent(r.Events.EVENT_BODY_SCROLL,{direction:"vertical"}),this.lastTopPosition=b,this.fakeVerticalScroll(b),this.rowRenderer.redrawAfterScroll())},b.prototype.isBodyVerticalScrollActive=function(){var a=this.columnController.isPinningRight(),b=this.columnController.isPinningLeft();return this.enableRtl?!b:!a},b.prototype.addIEPinFix=function(a,b){var c=this,d=function(){c.columnController.isPinningRight()&&setTimeout(function(){c.enableRtl?b():a()},0)};this.addDestroyableEventListener(this.eventService,r.Events.EVENT_MODEL_UPDATED,d)},b.prototype.setLeftAndRightBounds=function(){if(!this.gridOptionsWrapper.isForPrint()){var a=this.eBodyViewport.clientWidth,b=this.getBodyViewportScrollLeft();this.columnController.setVirtualViewportPosition(a,b)}},b.prototype.isUseScrollLag=function(){return!this.gridOptionsWrapper.isSuppressScrollLag()&&(this.gridOptionsWrapper.getIsScrollLag()?this.gridOptionsWrapper.getIsScrollLag()():j.Utils.isBrowserIE()||j.Utils.isBrowserSafari())},b.prototype.debounce=function(a){var b=this;if(this.requestAnimationFrameExists&&j.Utils.isBrowserSafari())this.scrollLagTicking||(this.scrollLagTicking=!0,requestAnimationFrame(function(){a(),b.scrollLagTicking=!1}));else{this.scrollLagCounter++;var c=this.scrollLagCounter;setTimeout(function(){b.scrollLagCounter===c&&a()},50)}},b.prototype.getBodyViewportScrollLeft=function(){return this.forPrint?0:j.Utils.getScrollLeft(this.eBodyViewport,this.enableRtl)},b.prototype.setBodyViewportScrollLeft=function(a){this.forPrint||j.Utils.setScrollLeft(this.eBodyViewport,a,this.enableRtl)},b.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(){var a=this.getBodyViewportScrollLeft(),b=this.enableRtl?a:-a;this.eHeaderContainer.style.left=b+"px",this.eFloatingBottomContainer.style.left=b+"px",this.eFloatingTopContainer.style.left=b+"px"},b.prototype.fakeVerticalScroll=function(a){if(this.enableRtl){this.columnController.isPinningLeft()&&(this.eBodyContainer.style.top=-a+"px"),this.ePinnedRightColsContainer.style.top=-a+"px"}else{this.columnController.isPinningRight()&&(this.eBodyContainer.style.top=-a+"px"),this.ePinnedLeftColsContainer.style.top=-a+"px"}this.eFullWidthCellContainer.style.top=-a+"px"},b.prototype.addScrollEventListener=function(a){this.eBodyViewport.addEventListener("scroll",a)},b.prototype.removeScrollEventListener=function(a){this.eBodyViewport.removeEventListener("scroll",a)},g([p.Autowired("alignedGridsService"),h("design:type",E.AlignedGridsService)],b.prototype,"alignedGridsService",void 0),g([p.Autowired("gridOptionsWrapper"),h("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),g([p.Autowired("columnController"),h("design:type",l.ColumnController)],b.prototype,"columnController",void 0),g([p.Autowired("rowRenderer"),h("design:type",m.RowRenderer)],b.prototype,"rowRenderer",void 0),g([p.Autowired("pinnedRowModel"),h("design:type",F.PinnedRowModel)],b.prototype,"pinnedRowModel",void 0),g([p.Autowired("eventService"),h("design:type",q.EventService)],b.prototype,"eventService",void 0),g([p.Autowired("context"),h("design:type",p.Context)],b.prototype,"context",void 0),g([p.Autowired("paginationProxy"),h("design:type",C.PaginationProxy)],b.prototype,"paginationProxy",void 0),g([p.Optional("rangeController"),h("design:type",Object)],b.prototype,"rangeController",void 0),g([p.Autowired("dragService"),h("design:type",s.DragService)],b.prototype,"dragService",void 0),g([p.Autowired("selectionController"),h("design:type",u.SelectionController)],b.prototype,"selectionController",void 0),g([p.Optional("clipboardService"),h("design:type",Object)],b.prototype,"clipboardService",void 0),g([p.Autowired("csvCreator"),h("design:type",v.CsvCreator)],b.prototype,"csvCreator",void 0),g([p.Autowired("mouseEventService"),h("design:type",w.MouseEventService)],b.prototype,"mouseEventService",void 0),g([p.Autowired("focusedCellController"),h("design:type",x.FocusedCellController)],b.prototype,"focusedCellController",void 0),g([p.Autowired("$scope"),h("design:type",Object)],b.prototype,"$scope",void 0),g([p.Autowired("scrollVisibleService"),h("design:type",z.ScrollVisibleService)],b.prototype,"scrollVisibleService",void 0),g([p.Optional("contextMenuFactory"),h("design:type",Object)],b.prototype,"contextMenuFactory",void 0),g([p.Autowired("frameworkFactory"),h("design:type",Object)],b.prototype,"frameworkFactory",void 0),g([i(0,p.Qualifier("loggerFactory")),h("design:type",Function),h("design:paramtypes",[o.LoggerFactory]),h("design:returntype",void 0)],b.prototype,"agWire",null),g([p.PreDestroy,h("design:type",Function),h("design:paramtypes",[]),h("design:returntype",void 0)],b.prototype,"destroy",null),g([p.PostConstruct,h("design:type",Function),h("design:paramtypes",[]),h("design:returntype",void 0)],b.prototype,"init",null),b=g([p.Bean("gridPanel")],b)}(A.BeanStub);b.GridPanel=H;var I;!function(a){a[a.HORIZONTAL=0]="HORIZONTAL",a[a.VERTICAL=1]="VERTICAL",a[a.DIAGONAL=2]="DIAGONAL"}(I||(I={}))},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(7),e=function(){function a(b){this.centerHeightLastTime=-1,this.centerWidthLastTime=-1,this.centerLeftMarginLastTime=-1,this.visibleLastTime=!1,this.sizeChangeListeners=[],this.isLayoutPanel=!0,this.fullHeight=!b.north&&!b.south;var c;b.dontFill?(c=a.TEMPLATE_DONT_FILL,this.horizontalLayoutActive=!1,this.verticalLayoutActive=!1):b.fillHorizontalOnly?(c=a.TEMPLATE_DONT_FILL,this.horizontalLayoutActive=!0,this.verticalLayoutActive=!1):(c=this.fullHeight?a.TEMPLATE_FULL_HEIGHT:a.TEMPLATE_NORMAL,this.horizontalLayoutActive=!0,this.verticalLayoutActive=!0),this.eGui=d.Utils.loadTemplate(c),this.id="borderLayout",b.name&&(this.id+="_"+b.name),this.eGui.setAttribute("id",this.id),this.childPanels=[],b&&this.setupPanels(b),this.overlays=b.overlays,this.setupOverlays()}return a.prototype.addSizeChangeListener=function(a){this.sizeChangeListeners.push(a)},a.prototype.fireSizeChanged=function(){this.sizeChangeListeners.forEach(function(a){a()})},a.prototype.getRefElement=function(a){return this.eGui.querySelector('[ref="'+a+'"]')},a.prototype.setupPanels=function(a){this.eNorthWrapper=this.getRefElement("north"),this.eSouthWrapper=this.getRefElement("south"),this.eEastWrapper=this.getRefElement("east"),this.eWestWrapper=this.getRefElement("west"),this.eCenterWrapper=this.getRefElement("center"),this.eOverlayWrapper=this.getRefElement("overlay"),this.eCenterRow=this.getRefElement("centerRow"),this.eNorthChildLayout=this.setupPanel(a.north,this.eNorthWrapper),this.eSouthChildLayout=this.setupPanel(a.south,this.eSouthWrapper),this.eEastChildLayout=this.setupPanel(a.east,this.eEastWrapper),this.eWestChildLayout=this.setupPanel(a.west,this.eWestWrapper),this.eCenterChildLayout=this.setupPanel(a.center,this.eCenterWrapper)},a.prototype.setupPanel=function(a,b){if(b)return a?a.isLayoutPanel?(this.childPanels.push(a),b.appendChild(a.getGui()),a):(b.appendChild(a),null):(b.parentNode.removeChild(b),null)},a.prototype.getGui=function(){return this.eGui},a.prototype.doLayout=function(){var a=this,b=d.Utils.isVisible(this.eGui);if(!b)return this.visibleLastTime=!1,!1;var c=!1;(this.visibleLastTime!==b&&(c=!0),this.visibleLastTime=!0,[this.eNorthChildLayout,this.eSouthChildLayout,this.eEastChildLayout,this.eWestChildLayout].forEach(function(b){a.layoutChild(b)&&(c=!0)}),this.horizontalLayoutActive)&&(this.layoutWidth()&&(c=!0));if(this.verticalLayoutActive){this.layoutHeight()&&(c=!0)}return this.layoutChild(this.eCenterChildLayout)&&(c=!0),c&&this.fireSizeChanged(),c},a.prototype.layoutChild=function(a){return!!a&&a.doLayout()},a.prototype.layoutHeight=function(){return this.fullHeight?this.layoutHeightFullHeight():this.layoutHeightNormal()},a.prototype.layoutHeightFullHeight=function(){var a=d.Utils.offsetHeight(this.eGui);return a<0&&(a=0),this.centerHeightLastTime!==a&&(this.centerHeightLastTime=a,!0)},a.prototype.layoutHeightNormal=function(){var a=d.Utils.offsetHeight(this.eGui),b=d.Utils.offsetHeight(this.eNorthWrapper),c=d.Utils.offsetHeight(this.eSouthWrapper),e=a-b-c;return e<0&&(e=0),this.centerHeightLastTime!==e&&(this.eCenterRow.style.height=e+"px",this.centerHeightLastTime=e,!0)},a.prototype.getCentreHeight=function(){return this.centerHeightLastTime},a.prototype.layoutWidth=function(){var a=d.Utils.offsetWidth(this.eGui),b=d.Utils.offsetWidth(this.eEastWrapper),c=d.Utils.offsetWidth(this.eWestWrapper),e=a-b-c;e<0&&(e=0);var f=!1;return this.centerLeftMarginLastTime!==c&&(this.centerLeftMarginLastTime=c,this.eCenterWrapper.style.marginLeft=c+"px",f=!0),this.centerWidthLastTime!==e&&(this.centerWidthLastTime=e,this.eCenterWrapper.style.width=e+"px",f=!0),f},a.prototype.setEastVisible=function(a){this.eEastWrapper&&(this.eEastWrapper.style.display=a?"":"none"),this.doLayout()},a.prototype.setupOverlays=function(){if(!this.overlays)return void this.eOverlayWrapper.parentNode.removeChild(this.eOverlayWrapper);this.hideOverlay()},a.prototype.hideOverlay=function(){d.Utils.removeAllChildren(this.eOverlayWrapper),this.eOverlayWrapper.style.display="none"},a.prototype.showOverlay=function(a){var b=this.overlays?this.overlays[a]:null;b?(d.Utils.removeAllChildren(this.eOverlayWrapper),this.eOverlayWrapper.style.display="",this.eOverlayWrapper.appendChild(b)):(console.log("ag-Grid: unknown overlay"),this.hideOverlay())},a.TEMPLATE_FULL_HEIGHT='<div class="ag-bl ag-bl-full-height">  <div class="ag-bl-west ag-bl-full-height-west" ref="west"></div>  <div class="ag-bl-east ag-bl-full-height-east" ref="east"></div>  <div class="ag-bl-center ag-bl-full-height-center" ref="center"></div>  <div class="ag-bl-overlay" ref="overlay"></div></div>',a.TEMPLATE_NORMAL='<div class="ag-bl ag-bl-normal">  <div ref="north"></div>  <div class="ag-bl-center-row ag-bl-normal-center-row" ref="centerRow">    <div class="ag-bl-west ag-bl-normal-west" ref="west"></div>    <div class="ag-bl-east ag-bl-normal-east" ref="east"></div>    <div class="ag-bl-center ag-bl-normal-center" ref="center"></div>  </div>  <div ref="south"></div>  <div class="ag-bl-overlay" ref="overlay"></div></div>',a.TEMPLATE_DONT_FILL='<div class="ag-bl ag-bl-dont-fill">  <div ref="north"></div>  <div ref="centerRow" class="ag-bl-center-row ag-bl-dont-fill-center-row">    <div ref="west" class="ag-bl-west ag-bl-dont-fill-west"></div>    <div ref="east" class="ag-bl-east ag-bl-dont-fill-east"></div>    <div ref="center" class="ag-bl-center ag-bl-dont-fill-center"></div>  </div>  <div ref="south"></div>  <div class="ag-bl-overlay" ref="overlay"></div></div>',a}();b.BorderLayout=e},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(5),h=c(7),i=c(4),j=c(10),k=c(3),l=function(){function a(){this.onMouseUpListener=this.onMouseUp.bind(this),this.onMouseMoveListener=this.onMouseMove.bind(this),this.onTouchEndListener=this.onTouchUp.bind(this),this.onTouchMoveListener=this.onTouchMove.bind(this),this.dragEndFunctions=[],this.dragSources=[]}return a.prototype.init=function(){this.logger=this.loggerFactory.create("DragService")},a.prototype.destroy=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},a.prototype.removeListener=function(a){var b=a.dragSource.eElement,c=a.mouseDownListener;if(b.removeEventListener("mousedown",c),a.touchEnabled){var d=a.touchStartListener;b.removeEventListener("touchstart",d,{passive:!0})}},a.prototype.removeDragSource=function(a){var b=h.Utils.find(this.dragSources,function(b){return b.dragSource===a});b&&(this.removeListener(b),h.Utils.removeFromArray(this.dragSources,b))},a.prototype.setNoSelectToBody=function(a){var b=this.gridOptionsWrapper.getDocument(),c=b.querySelector("body");h.Utils.exists(c)&&h.Utils.addOrRemoveCssClass(c,"ag-body-no-select",a)},a.prototype.addDragSource=function(a,b){void 0===b&&(b=!1);var c=this.onMouseDown.bind(this,a);a.eElement.addEventListener("mousedown",c);var d=null,e=this.gridOptionsWrapper.isSuppressTouch();b&&!e&&(d=this.onTouchStart.bind(this,a),a.eElement.addEventListener("touchstart",d,{passive:!0})),this.dragSources.push({dragSource:a,mouseDownListener:c,touchStartListener:d,touchEnabled:b})},a.prototype.onTouchStart=function(a,b){var c=this;this.currentDragParams=a,this.dragging=!1;var d=b.touches[0];this.touchLastTime=d,this.touchStart=d,b.preventDefault(),a.eElement.addEventListener("touchmove",this.onTouchMoveListener,{passive:!0}),a.eElement.addEventListener("touchend",this.onTouchEndListener,{passive:!0}),a.eElement.addEventListener("touchcancel",this.onTouchEndListener,{passive:!0}),this.dragEndFunctions.push(function(){a.eElement.removeEventListener("touchmove",c.onTouchMoveListener,{passive:!0}),a.eElement.removeEventListener("touchend",c.onTouchEndListener,{passive:!0}),a.eElement.removeEventListener("touchcancel",c.onTouchEndListener,{passive:!0})}),0===a.dragStartPixels&&this.onCommonMove(d,this.touchStart)},a.prototype.onMouseDown=function(a,b){var c=this;if(0===b.button){this.currentDragParams=a,this.dragging=!1,this.mouseEventLastTime=b,this.mouseStartEvent=b;var d=this.gridOptionsWrapper.getDocument();d.addEventListener("mousemove",this.onMouseMoveListener),d.addEventListener("mouseup",this.onMouseUpListener),this.dragEndFunctions.push(function(){d.removeEventListener("mousemove",c.onMouseMoveListener),d.removeEventListener("mouseup",c.onMouseUpListener)}),0===a.dragStartPixels&&this.onMouseMove(b)}},a.prototype.isEventNearStartEvent=function(a,b){var c=h.Utils.exists(this.currentDragParams.dragStartPixels)?this.currentDragParams.dragStartPixels:4;return h.Utils.areEventsNear(a,b,c)},a.prototype.getFirstActiveTouch=function(a){for(var b=0;b<a.length;b++){if(a[b].identifier===this.touchStart.identifier)return a[b]}return null},a.prototype.onCommonMove=function(a,b){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(a,b))return;this.dragging=!0,this.eventService.dispatchEvent(j.Events.EVENT_DRAG_STARTED),this.currentDragParams.onDragStart(b),this.setNoSelectToBody(!0)}this.currentDragParams.onDragging(a)},a.prototype.onTouchMove=function(a){var b=this.getFirstActiveTouch(a.touches);b&&this.onCommonMove(b,this.touchStart)},a.prototype.onMouseMove=function(a){this.onCommonMove(a,this.mouseStartEvent)},a.prototype.onTouchUp=function(a){var b=this.getFirstActiveTouch(a.targetTouches);b||(b=this.touchLastTime),this.onUpCommon(b)},a.prototype.onMouseUp=function(a){this.onUpCommon(a)},a.prototype.onUpCommon=function(a){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(a),this.eventService.dispatchEvent(j.Events.EVENT_DRAG_STOPPED)),this.setNoSelectToBody(!1),this.mouseStartEvent=null,this.mouseEventLastTime=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(a){return a()}),this.dragEndFunctions.length=0},d([f.Autowired("loggerFactory"),e("design:type",g.LoggerFactory)],a.prototype,"loggerFactory",void 0),d([f.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",k.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),
d([f.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=d([f.Bean("dragService")],a)}();b.DragService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(6),i=c(6),j=c(5),k=c(4),l=c(10),m=c(6),n=c(3),o=c(6),p=c(8),q=function(){function a(){}return a.prototype.setBeans=function(a){this.logger=a.create("SelectionController"),this.reset(),this.gridOptionsWrapper.isRowModelDefault()?this.eventService.addEventListener(l.Events.EVENT_ROW_DATA_CHANGED,this.reset.bind(this)):this.logger.log("dont know what to do here")},a.prototype.init=function(){this.groupSelectsChildren=this.gridOptionsWrapper.isGroupSelectsChildren(),this.eventService.addEventListener(l.Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},a.prototype.setLastSelectedNode=function(a){this.lastSelectedNode=a},a.prototype.getLastSelectedNode=function(){return this.lastSelectedNode},a.prototype.getSelectedNodes=function(){var a=[];return g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&a.push(c)}),a},a.prototype.getSelectedRows=function(){var a=[];return g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&a.push(c.data)}),a},a.prototype.removeGroupsFromSelection=function(){var a=this;g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&c.group&&(a.selectedNodes[c.id]=void 0)})},a.prototype.updateGroupsFromChildrenSelections=function(){this.rowModel.getType()!==p.Constants.ROW_MODEL_TYPE_IN_MEMORY&&console.warn("updateGroupsFromChildrenSelections not available when rowModel is not normal"),this.rowModel.getTopLevelNodes().forEach(function(a){a.depthFirstSearch(function(a){a.group&&a.calculateSelectedFromChildren()})})},a.prototype.getNodeForIdIfSelected=function(a){return this.selectedNodes[a]},a.prototype.clearOtherNodes=function(a){var b=this,c={},d=0;return g.Utils.iterateObject(this.selectedNodes,function(e,f){if(f&&f.id!==a.id){var g=b.selectedNodes[f.id];d+=g.setSelectedParams({newValue:!1,clearSelection:!1,tailingNodeInSequence:!0}),b.groupSelectsChildren&&f.parent&&(c[f.parent.id]=f.parent)}}),g.Utils.iterateObject(c,function(a,b){b.calculateSelectedFromChildren()}),d},a.prototype.onRowSelected=function(a){var b=a.node;this.groupSelectsChildren&&b.group||(b.isSelected()?this.selectedNodes[b.id]=b:this.selectedNodes[b.id]=void 0)},a.prototype.syncInRowNode=function(a,b){this.syncInOldRowNode(a,b),this.syncInNewRowNode(a)},a.prototype.syncInOldRowNode=function(a,b){g.Utils.exists(b)&&a.id!==b.id&&(g.Utils.exists(this.selectedNodes[b.id])&&(this.selectedNodes[b.id]=b))},a.prototype.syncInNewRowNode=function(a){g.Utils.exists(this.selectedNodes[a.id])?(a.setSelectedInitialValue(!0),this.selectedNodes[a.id]=a):a.setSelectedInitialValue(!1)},a.prototype.reset=function(){this.logger.log("reset"),this.selectedNodes={},this.lastSelectedNode=null},a.prototype.getBestCostNodeSelection=function(){function a(b){for(var c=0,e=b.length;c<e;c++){var f=b[c];f.isSelected()?d.push(f):f.group&&f.children&&a(f.children)}}this.rowModel.getType()!==p.Constants.ROW_MODEL_TYPE_IN_MEMORY&&console.warn("getBestCostNodeSelection is only avilable when using normal row model");var b=this.rowModel,c=b.getTopLevelNodes();if(null===c)return void console.warn("selectAll not available doing rowModel=virtual");var d=[];return a(c),d},a.prototype.setRowModel=function(a){this.rowModel=a},a.prototype.isEmpty=function(){var a=0;return g.Utils.iterateObject(this.selectedNodes,function(b,c){c&&a++}),0===a},a.prototype.deselectAllRowNodes=function(a){void 0===a&&(a=!1);var b=function(a){return a.selectThisNode(!1)},c=this.rowModel.getType()===p.Constants.ROW_MODEL_TYPE_IN_MEMORY;if(a){if(!c)return void console.error("ag-Grid: selecting just filtered only works with In Memory Row Model");this.rowModel.forEachNodeAfterFilter(b)}else g.Utils.iterateObject(this.selectedNodes,function(a,c){c&&b(c)});this.reset(),c&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent(l.Events.EVENT_SELECTION_CHANGED)},a.prototype.selectAllRowNodes=function(a){if(void 0===a&&(a=!1),this.rowModel.getType()!==p.Constants.ROW_MODEL_TYPE_IN_MEMORY)throw"selectAll only available with normal row model, ie not "+this.rowModel.getType();var b=this.rowModel,c=function(a){return a.selectThisNode(!0)};a?b.forEachNodeAfterFilter(c):b.forEachNode(c),this.rowModel.getType()===p.Constants.ROW_MODEL_TYPE_IN_MEMORY&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(),this.eventService.dispatchEvent(l.Events.EVENT_SELECTION_CHANGED)},a.prototype.selectNode=function(a,b){a.setSelectedParams({newValue:!0,clearSelection:!b})},a.prototype.deselectIndex=function(a){var b=this.rowModel.getRow(a);this.deselectNode(b)},a.prototype.deselectNode=function(a){a.setSelectedParams({newValue:!1,clearSelection:!1})},a.prototype.selectIndex=function(a,b){var c=this.rowModel.getRow(a);this.selectNode(c,b)},d([m.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([m.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([m.Autowired("gridOptionsWrapper"),e("design:type",n.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f(0,i.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[j.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),d([o.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([h.Bean("selectionController")],a)}();b.SelectionController=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(6),h=c(7),i=c(3),j=c(28),k=function(){function a(){}return a.prototype.getRenderedCellForEvent=function(a){for(var b=h.Utils.getTarget(a);b;){var c=this.gridOptionsWrapper.getDomData(b,j.CellComp.DOM_DATA_KEY_CELL_COMP);if(c)return c;b=b.parentElement}return null},a.prototype.getGridCellForEvent=function(a){var b=this.getRenderedCellForEvent(a);return b?b.getGridCell():null},d([g.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("mouseEventService")],a)}();b.MouseEventService=k},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(16),i=c(29),j=c(3),k=c(19),l=c(22),m=c(32),n=c(14),o=c(30),p=c(4),q=c(8),r=c(10),s=c(6),t=c(11),u=c(33),v=c(34),w=c(36),x=c(60),y=c(42),z=c(39),A=c(67),B=c(71),C=c(72),D=c(73),E=c(55),F=c(74),G=c(75),H=c(56),I=function(a){function b(b,c,d,e){var f=a.call(this,'<div role="gridcell"/>')||this;return f.rangeCount=0,f.cellFocused=null,f.firstRightPinned=!1,f.lastLeftPinned=!1,f.eGridCell=f.getGui(),f.column=b,f.node=c,f.scope=d,f.rowComp=e,f}return d(b,a),b.prototype.createGridCell=function(){var a={rowIndex:this.node.rowIndex,floating:this.node.rowPinned,column:this.column};this.gridCell=new v.GridCell(a)},b.prototype.addIndexChangeListener=function(){this.addDestroyableEventListener(this.node,i.RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this))},b.prototype.onRowIndexChanged=function(){this.createGridCell(),this.checkCellFocused(),this.onRangeSelectionChanged()},b.prototype.getGridCell=function(){return this.gridCell},b.prototype.setFocusInOnEditor=function(){this.editingCell&&this.cellEditor&&this.cellEditor.focusIn&&this.cellEditor.focusIn()},b.prototype.setFocusOutOnEditor=function(){this.editingCell&&this.cellEditor&&this.cellEditor.focusOut&&this.cellEditor.focusOut()},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.eParentRow&&(this.eParentRow.removeChild(this.getGui()),this.eParentRow=null),this.cellEditor&&this.cellEditor.destroy&&this.cellEditor.destroy(),this.cellRenderer&&this.cellRenderer.destroy&&this.cellRenderer.destroy()},b.prototype.setPinnedClasses=function(){var a=this,b=function(){a.firstRightPinned!==a.column.isFirstRightPinned()&&(a.firstRightPinned=a.column.isFirstRightPinned(),g.Utils.addOrRemoveCssClass(a.eGridCell,"ag-cell-first-right-pinned",a.firstRightPinned)),a.lastLeftPinned!==a.column.isLastLeftPinned()&&(a.lastLeftPinned=a.column.isLastLeftPinned(),g.Utils.addOrRemoveCssClass(a.eGridCell,"ag-cell-last-left-pinned",a.lastLeftPinned))};this.addDestroyableEventListener(this.column,h.Column.EVENT_FIRST_RIGHT_PINNED_CHANGED,b),this.addDestroyableEventListener(this.column,h.Column.EVENT_LAST_LEFT_PINNED_CHANGED,b),b()},b.prototype.getParentRow=function(){return this.eParentRow},b.prototype.setParentRow=function(a){this.eParentRow=a},b.prototype.setupCheckboxSelection=function(){var a=this.column.getColDef();this.node.rowPinned?this.usingWrapper=!1:"boolean"==typeof a.checkboxSelection?this.usingWrapper=a.checkboxSelection:"function"==typeof a.checkboxSelection?this.usingWrapper=!0:this.usingWrapper=!1},b.prototype.getColumn=function(){return this.column},b.prototype.getValue=function(){return this.node.group&&this.node.expanded&&!this.node.footer&&this.gridOptionsWrapper.isGroupIncludeFooter()?this.valueService.getValue(this.column,this.node,!0):this.valueService.getValue(this.column,this.node)},b.prototype.addRangeSelectedListener=function(){this.rangeController&&(this.addDestroyableEventListener(this.eventService,r.Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.onRangeSelectionChanged())},b.prototype.onRangeSelectionChanged=function(){if(this.rangeController){var a=this.rangeController.getCellRangeCount(this.gridCell);this.rangeCount!==a&&(g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-range-selected",0!==a),g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-range-selected-1",1===a),g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-range-selected-2",2===a),g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-range-selected-3",3===a),g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-range-selected-4",a>=4),this.rangeCount=a)}},b.prototype.addHighlightListener=function(){var a=this;if(this.rangeController){var b=function(b){var c=a.gridCell.createId();b.cells[c]&&a.animateCellWithHighlight()};this.eventService.addEventListener(r.Events.EVENT_FLASH_CELLS,b),this.addDestroyFunc(function(){a.eventService.removeEventListener(r.Events.EVENT_FLASH_CELLS,b)})}},b.prototype.addChangeListener=function(){var a=this,b=function(b){b.column===a.column&&a.refreshCell({})};this.addDestroyableEventListener(this.node,i.RowNode.EVENT_CELL_CHANGED,b)},b.prototype.animateCellWithHighlight=function(){this.animateCell("highlight")},b.prototype.animateCell=function(a){var b=this,c="ag-cell-"+a,d="ag-cell-"+a+"-animation";g.Utils.addCssClass(this.eGridCell,c),g.Utils.removeCssClass(this.eGridCell,d),setTimeout(function(){g.Utils.removeCssClass(b.eGridCell,c),g.Utils.addCssClass(b.eGridCell,d),setTimeout(function(){g.Utils.removeCssClass(b.eGridCell,d)},1e3)},500)},b.prototype.addCellFocusedListener=function(){var a=this,b=this.checkCellFocused.bind(this);this.eventService.addEventListener(r.Events.EVENT_CELL_FOCUSED,b),this.addDestroyFunc(function(){a.eventService.removeEventListener(r.Events.EVENT_CELL_FOCUSED,b)}),b()},b.prototype.checkCellFocused=function(a){var b=this.focusedCellController.isCellFocused(this.gridCell);b!==this.cellFocused&&(g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-focus",b),g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-no-focus",!b),this.cellFocused=b),b&&a&&a.forceBrowserFocus&&this.eGridCell.focus();var c=this.gridOptionsWrapper.isFullRowEdit();b||c||!this.editingCell||this.stopRowOrCellEdit()},b.prototype.getCellWidth=function(){if(this.colsSpanning){var a=0;return this.colsSpanning.forEach(function(b){return a+=b.getActualWidth()}),a}return this.column.getActualWidth()},b.prototype.setWidthOnCell=function(){var a=this,b=function(){a.eGridCell.style.width=a.getCellWidth()+"px"};this.column.addEventListener(h.Column.EVENT_WIDTH_CHANGED,b),this.addDestroyFunc(function(){a.column.removeEventListener(h.Column.EVENT_WIDTH_CHANGED,b)}),b()},b.prototype.init=function(){this.value=this.getValue(),this.setupColSpan(),this.createGridCell(),this.addIndexChangeListener(),this.setupCheckboxSelection(),this.setWidthOnCell(),this.setPinnedClasses(),this.addRangeSelectedListener(),this.addHighlightListener(),this.addChangeListener(),this.addCellFocusedListener(),this.addColumnHoverListener(),this.addDomData(),this.setLeftFeature=new E.SetLeftFeature(this.column,this.eGridCell,this.colsSpanning),this.addFeature(this.context,this.setLeftFeature),this.gridOptionsWrapper.isSuppressCellSelection()||this.eGridCell.setAttribute("tabindex","-1"),this.addClasses(),this.setInlineEditingClass(),this.createParentOfValue(),this.populateCell()},b.prototype.setupColSpan=function(){g.Utils.missing(this.column.getColDef().colSpan)||(this.addDestroyableEventListener(this.eventService,r.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.checkColSpan.bind(this)),this.addDestroyableEventListener(this.eventService,r.Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.setWidthOnCell.bind(this)),this.checkColSpan())},b.prototype.checkColSpan=function(){var a=this.column.getColSpan(this.node),b=[];if(1===a)b.push(this.column);else for(var c=this.column,d=this.column.getPinned(),e=0;e<a&&(b.push(c),c=this.columnController.getDisplayedColAfter(c),!g.Utils.missing(c))&&d===c.getPinned();e++);this.setColsSpanning(b)},b.prototype.setColsSpanning=function(a){g.Utils.compareArrays(this.colsSpanning,a)||(this.colsSpanning=a,this.setWidthOnCell(),this.setLeftFeature&&this.setLeftFeature.setColsSpanning(a))},b.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,r.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.onColumnHover()},b.prototype.onColumnHover=function(){var a=this.columnHoverService.isHovered(this.column);g.Utils.addOrRemoveCssClass(this.getGui(),"ag-column-hover",a)},b.prototype.addDomData=function(){var a=this;this.gridOptionsWrapper.setDomData(this.eGridCell,b.DOM_DATA_KEY_CELL_COMP,this),this.addDestroyFunc(function(){return a.gridOptionsWrapper.setDomData(a.eGridCell,b.DOM_DATA_KEY_CELL_COMP,null)})},b.prototype.onEnterKeyDown=function(){this.editingCell?(this.stopRowOrCellEdit(),this.focusCell(!0)):this.startRowOrCellEdit(q.Constants.KEY_ENTER)},b.prototype.onF2KeyDown=function(){this.editingCell||this.startRowOrCellEdit(q.Constants.KEY_F2)},b.prototype.onEscapeKeyDown=function(){this.editingCell&&(this.stopRowOrCellEdit(!0),this.focusCell(!0))},b.prototype.onPopupEditorClosed=function(){this.editingCell&&(this.stopRowOrCellEdit(),this.focusedCellController.isCellFocused(this.gridCell)&&this.focusCell(!0))},b.prototype.isEditing=function(){return this.editingCell},b.prototype.onTabKeyDown=function(a){this.gridOptionsWrapper.isSuppressTabbing()||this.rowRenderer.onTabKeyDown(this,a)},b.prototype.onBackspaceOrDeleteKeyPressed=function(a){this.editingCell||this.startRowOrCellEdit(a)},b.prototype.onSpaceKeyPressed=function(a){if(!this.editingCell&&this.gridOptionsWrapper.isRowSelection()){var b=this.node.isSelected();this.node.setSelected(!b)}a.preventDefault()},b.prototype.onNavigationKeyPressed=function(a,b){this.editingCell&&this.stopRowOrCellEdit(),this.rowRenderer.navigateToNextCell(a,b,this.gridCell.rowIndex,this.column,this.node.rowPinned),a.preventDefault()},b.prototype.onKeyPress=function(a){if(g.Utils.getTarget(a)===this.getGui()&&!this.editingCell){var b=String.fromCharCode(a.charCode);" "===b?this.onSpaceKeyPressed(a):g.Utils.isEventFromPrintableCharacter(a)&&(this.startRowOrCellEdit(null,b),a.preventDefault())}},b.prototype.onKeyDown=function(a){var b=a.which||a.keyCode;switch(b){case q.Constants.KEY_ENTER:this.onEnterKeyDown();break;case q.Constants.KEY_F2:this.onF2KeyDown();break;case q.Constants.KEY_ESCAPE:this.onEscapeKeyDown();break;case q.Constants.KEY_TAB:this.onTabKeyDown(a);break;case q.Constants.KEY_BACKSPACE:case q.Constants.KEY_DELETE:this.onBackspaceOrDeleteKeyPressed(b);break;case q.Constants.KEY_DOWN:case q.Constants.KEY_UP:case q.Constants.KEY_RIGHT:case q.Constants.KEY_LEFT:this.onNavigationKeyPressed(a,b)}},b.prototype.createCellEditorParams=function(a,b,c){var d={value:this.getValue(),keyPress:a,charPress:b,column:this.column,rowIndex:this.gridCell.rowIndex,node:this.node,api:this.gridOptionsWrapper.getApi(),cellStartedEdit:c,columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),$scope:this.scope,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.eGridCell},e=this.column.getColDef();return e.cellEditorParams&&g.Utils.assign(d,e.cellEditorParams),d},b.prototype.createCellEditor=function(a,b,c){var d=this.createCellEditorParams(a,b,c);return this.cellEditorFactory.createCellEditor(this.column.getCellEditor(),d)},b.prototype.stopEditingAndFocus=function(){this.stopRowOrCellEdit(),this.focusCell(!0)},b.prototype.startRowOrCellEdit=function(a,b){this.gridOptionsWrapper.isFullRowEdit()?this.rowComp.startRowEditing(a,b,this):this.startEditingIfEnabled(a,b,!0)},b.prototype.startEditingIfEnabled=function(a,b,c){if(void 0===a&&(a=null),void 0===b&&(b=null),void 0===c&&(c=!1),this.isCellEditable()&&!this.editingCell){var d=this.createCellEditor(a,b,c);return d.isCancelBeforeStart&&d.isCancelBeforeStart()?(d.destroy&&d.destroy(),!1):d.getGui?(this.cellEditor=d,this.editingCell=!0,this.cellEditorInPopup=this.cellEditor.isPopup&&this.cellEditor.isPopup(),this.setInlineEditingClass(),this.cellEditorInPopup?this.addPopupCellEditor():this.addInCellEditor(),d.afterGuiAttached&&d.afterGuiAttached(),this.eventService.dispatchEvent(r.Events.EVENT_CELL_EDITING_STARTED,this.createParamsWithValue()),!0):(console.warn("ag-Grid: cellEditor for column "+this.column.getId()+" is missing getGui() method"),d.render&&console.warn("ag-Grid: we found 'render' on the component, are you trying to set a React renderer but added it as colDef.cellEditor instead of colDef.cellEditorFmk?"),!1)}},b.prototype.addInCellEditor=function(){g.Utils.removeAllChildren(this.eGridCell),this.eGridCell.appendChild(this.cellEditor.getGui()),this.gridOptionsWrapper.isAngularCompileRows()&&this.$compile(this.eGridCell)(this.scope)},b.prototype.addPopupCellEditor=function(){var a=this,b=this.cellEditor.getGui();this.hideEditorPopup=this.popupService.addAsModalPopup(b,!0,function(){a.onPopupEditorClosed()}),this.popupService.positionPopupOverComponent({column:this.column,rowNode:this.node,type:"popupCellEditor",eventSource:this.eGridCell,ePopup:b,keepWithinBounds:!0}),this.gridOptionsWrapper.isAngularCompileRows()&&this.$compile(b)(this.scope)},b.prototype.focusCell=function(a){void 0===a&&(a=!1),this.focusedCellController.setFocusedCell(this.gridCell.rowIndex,this.column,this.node.rowPinned,a)},b.prototype.stopRowOrCellEdit=function(a){void 0===a&&(a=!1),this.gridOptionsWrapper.isFullRowEdit()?this.rowComp.stopRowEditing(a):this.stopEditing(a)},b.prototype.stopEditing=function(a){if(void 0===a&&(a=!1),this.editingCell){if(!a){if(!(this.cellEditor.isCancelAfterEnd&&this.cellEditor.isCancelAfterEnd())){var b=this.cellEditor.getValue();this.valueService.setValue(this.node,this.column,b),this.value=this.getValue()}}this.editingCell=!1,this.cellEditor.destroy&&this.cellEditor.destroy(),this.cellEditorInPopup?(this.hideEditorPopup(),this.hideEditorPopup=null):(g.Utils.removeAllChildren(this.eGridCell),this.usingWrapper?this.eGridCell.appendChild(this.eCellWrapper):this.cellRenderer&&this.eGridCell.appendChild(this.cellRenderer.getGui())),this.setInlineEditingClass(),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent(r.Events.EVENT_CELL_EDITING_STOPPED,this.createParamsWithValue())}},b.prototype.createParamsWithValue=function(){var a={node:this.node,data:this.node.data,value:this.value,column:this.column,colDef:this.column.getColDef(),context:this.gridOptionsWrapper.getContext(),api:this.gridApi,columnApi:this.columnApi};return a.$scope=this.scope,a},b.prototype.createEvent=function(a){var b=this.createParamsWithValue();return b.event=a,b},b.prototype.getRenderedRow=function(){return this.rowComp},b.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.node)},b.prototype.isCellEditable=function(){return this.column.isCellEditable(this.node)},b.prototype.onMouseEvent=function(a,b){switch(a){case"click":this.onCellClicked(b);break;case"mousedown":this.onMouseDown();break;case"dblclick":this.onCellDoubleClicked(b);break;case"contextmenu":this.onContextMenu(b);break;case"mouseout":this.onMouseOut(b);break;case"mouseover":this.onMouseOver(b)}},b.prototype.onMouseOut=function(a){var b=this.createEvent(a);this.eventService.dispatchEvent(r.Events.EVENT_CELL_MOUSE_OUT,b)},b.prototype.onMouseOver=function(a){var b=this.createEvent(a);this.eventService.dispatchEvent(r.Events.EVENT_CELL_MOUSE_OVER,b)},b.prototype.onContextMenu=function(a){if(this.gridOptionsWrapper.isAllowContextMenuWithControlKey()||!a.ctrlKey&&!a.metaKey){var b=this.column.getColDef(),c=this.createEvent(a);this.eventService.dispatchEvent(r.Events.EVENT_CELL_CONTEXT_MENU,c),b.onCellContextMenu&&b.onCellContextMenu(c),this.contextMenuFactory&&!this.gridOptionsWrapper.isSuppressContextMenu()&&(this.contextMenuFactory.showMenu(this.node,this.column,this.value,a),a.preventDefault())}},b.prototype.onCellDoubleClicked=function(a){var b=this.column.getColDef(),c=this.createEvent(a);this.eventService.dispatchEvent(r.Events.EVENT_CELL_DOUBLE_CLICKED,c),"function"==typeof b.onCellDoubleClicked&&b.onCellDoubleClicked(c),!this.gridOptionsWrapper.isSingleClickEdit()&&!this.gridOptionsWrapper.isSuppressClickEdit()&&this.startRowOrCellEdit()},b.prototype.onMouseDown=function(){if(this.focusCell(!1),this.rangeController){var a=this.gridCell;this.rangeController.isCellInAnyRange(a)||this.rangeController.setRangeToCell(a)}},b.prototype.onCellClicked=function(a){var b=this.createEvent(a);this.eventService.dispatchEvent(r.Events.EVENT_CELL_CLICKED,b);var c=this.column.getColDef();c.onCellClicked&&c.onCellClicked(b),this.gridOptionsWrapper.isSingleClickEdit()&&!this.gridOptionsWrapper.isSuppressClickEdit()&&this.startRowOrCellEdit(),this.doIeFocusHack()},b.prototype.doIeFocusHack=function(){(g.Utils.isBrowserIE()||g.Utils.isBrowserEdge())&&(g.Utils.missing(document.activeElement)||document.activeElement===document.body)&&this.getGui().focus()},b.prototype.setInlineEditingClass=function(){var a=this.editingCell&&!this.cellEditorInPopup;g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-inline-editing",a),g.Utils.addOrRemoveCssClass(this.eGridCell,"ag-cell-not-inline-editing",!a)},b.prototype.populateCell=function(){this.putDataIntoCell(),this.addStylesFromColDef(),this.addClassesFromColDef(),this.addClassesFromRules()},b.prototype.addStylesFromColDef=function(){var a=this.column.getColDef();if(a.cellStyle){var b=void 0;if("function"==typeof a.cellStyle){var c={value:this.value,data:this.node.data,node:this.node,colDef:a,column:this.column,$scope:this.scope,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()};b=(0,a.cellStyle)(c)}else b=a.cellStyle;b&&g.Utils.addStylesToElement(this.eGridCell,b)}},b.prototype.addClassesFromColDef=function(){var a=this;this.stylingService.processStaticCellClasses(this.column.getColDef(),{value:this.value,data:this.node.data,node:this.node,colDef:this.column.getColDef(),rowIndex:this.gridCell.rowIndex,$scope:this.scope,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()},function(b){g.Utils.addCssClass(a.eGridCell,b)})},b.prototype.createParentOfValue=function(){if(this.usingWrapper){this.eCellWrapper=document.createElement("span"),g.Utils.addCssClass(this.eCellWrapper,"ag-cell-wrapper"),this.eGridCell.appendChild(this.eCellWrapper);var a=new D.CheckboxSelectionComponent;this.context.wireBean(a);var b=this.column.getColDef().checkboxSelection;b="function"==typeof b?b:null,a.init({rowNode:this.node,column:this.column,visibleFunc:b}),this.addDestroyFunc(function(){return a.destroy()}),this.eSpanWithValue=document.createElement("span"),g.Utils.addCssClass(this.eSpanWithValue,"ag-cell-value"),this.eCellWrapper.appendChild(a.getGui()),this.eCellWrapper.appendChild(this.eSpanWithValue),this.eParentOfValue=this.eSpanWithValue}else g.Utils.addCssClass(this.eGridCell,"ag-cell-value"),this.eParentOfValue=this.eGridCell},b.prototype.isVolatile=function(){return this.column.getColDef().volatile},b.prototype.attemptCellRendererRefresh=function(){if(g.Utils.missing(this.cellRenderer)||g.Utils.missing(this.cellRenderer.refresh))return!1;var a=this.formatValue(this.value),b=this.column.getColDef().cellRendererParams,c=this.createRendererAndRefreshParams(a,b);return!1!==this.cellRenderer.refresh(c)},b.prototype.valuesAreEqual=function(a,b){var c=this.column.getColDef(),d=c?c.equals:null;return d?d(a,b):a===b},b.prototype.refreshCell=function(a){if(!this.editingCell){var b=a&&a.newData,c=a&&a.suppressFlash,d=a&&a.volatile,e=a&&a.forceRefresh;if(!d||this.isVolatile()){var f=this.value;this.value=this.getValue();if(!(!e&&this.valuesAreEqual(f,this.value))){var g;g=!b&&!c&&this.attemptCellRendererRefresh(),g||this.replaceCellContent(),c||this.flashCell(),this.addClassesFromRules()}}}},b.prototype.flashCell=function(){(this.gridOptionsWrapper.isEnableCellChangeFlash()||this.column.getColDef().enableCellChangeFlash)&&this.animateCell("data-changed")},b.prototype.replaceCellContent=function(){g.Utils.removeAllChildren(this.eParentOfValue),this.cellRenderer&&this.cellRenderer.destroy&&this.cellRenderer.destroy(),this.cellRenderer=null,this.populateCell(),this.gridOptionsWrapper.isAngularCompileRows()&&this.$compile(this.eGridCell)(this.scope)},b.prototype.addClassesFromRules=function(){var a=this;this.stylingService.processCellClassRules(this.column.getColDef(),{value:this.value,data:this.node.data,node:this.node,colDef:this.column.getColDef(),rowIndex:this.gridCell.rowIndex,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()},function(b){g.Utils.addCssClass(a.eGridCell,b)},function(b){g.Utils.removeCssClass(a.eGridCell,b)})},b.prototype.putDataIntoCell=function(){var a=this.column.getColDef(),b=this.column.getCellRenderer(),c=this.column.getFloatingCellRenderer(),d=this.valueFormatterService.formatValue(this.column,this.node,this.scope,this.value);if(a.template)this.eParentOfValue.innerHTML=a.template;else if(a.templateUrl){var e=this.templateService.getTemplate(a.templateUrl,this.refreshCell.bind(this,!0));e&&(this.eParentOfValue.innerHTML=e)}else if(c&&this.node.rowPinned)this.useCellRenderer(c,a.pinnedRowCellRendererParams,d);else if(b)this.useCellRenderer(b,a.cellRendererParams,d);else{var f=null!==d&&void 0!==d,h=f?d:this.value;g.Utils.exists(h)&&""!==h&&(this.eParentOfValue.textContent=h.toString())}if(a.tooltipField){var i=this.node.data;if(g.Utils.exists(i)){var j=g.Utils.getValueUsingField(i,a.tooltipField,this.column.isTooltipFieldContainsDots());g.Utils.exists(j)&&this.eParentOfValue.setAttribute("title",j)}}},b.prototype.formatValue=function(a){return this.valueFormatterService.formatValue(this.column,this.node,this.scope,a)},b.prototype.createRendererAndRefreshParams=function(a,b){var c=this,d=this,e={value:this.value,valueFormatted:a,getValue:this.getValue.bind(this),setValue:function(a){c.valueService.setValue(c.node,c.column,a)},formatValue:this.formatValue.bind(this),data:this.node.data,node:this.node,colDef:this.column.getColDef(),column:this.column,$scope:this.scope,rowIndex:this.gridCell.rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.eGridCell,eParentOfValue:this.eParentOfValue,addRowCompListener:this.rowComp.addEventListener.bind(this.rowComp),addRenderedRowListener:function(a,b){console.warn("ag-Grid: since ag-Grid .v11, params.addRenderedRowListener() is now params.addRowCompListener()"),d.rowComp.addEventListener(a,b)}};return b&&g.Utils.assign(e,b),e},b.prototype.useCellRenderer=function(a,b,c){var d=this.createRendererAndRefreshParams(c,b);this.cellRenderer=this.cellRendererService.useCellRenderer(a,this.eParentOfValue,d)},b.prototype.addClasses=function(){g.Utils.addCssClass(this.eGridCell,"ag-cell"),this.eGridCell.setAttribute("colId",this.column.getColId()),this.node.group&&this.node.footer&&g.Utils.addCssClass(this.eGridCell,"ag-footer-cell"),this.node.group&&!this.node.footer&&g.Utils.addCssClass(this.eGridCell,"ag-group-cell")},b.DOM_DATA_KEY_CELL_COMP="cellComp",e([s.Autowired("context"),f("design:type",s.Context)],b.prototype,"context",void 0),e([s.Autowired("columnApi"),f("design:type",n.ColumnApi)],b.prototype,"columnApi",void 0),e([s.Autowired("gridApi"),f("design:type",t.GridApi)],b.prototype,"gridApi",void 0),e([s.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([s.Autowired("expressionService"),f("design:type",k.ExpressionService)],b.prototype,"expressionService",void 0),e([s.Autowired("rowRenderer"),f("design:type",l.RowRenderer)],b.prototype,"rowRenderer",void 0),e([s.Autowired("$compile"),f("design:type",Object)],b.prototype,"$compile",void 0),e([s.Autowired("templateService"),f("design:type",m.TemplateService)],b.prototype,"templateService",void 0),e([s.Autowired("valueService"),f("design:type",o.ValueService)],b.prototype,"valueService",void 0),e([s.Autowired("eventService"),f("design:type",p.EventService)],b.prototype,"eventService",void 0),e([s.Autowired("columnController"),f("design:type",n.ColumnController)],b.prototype,"columnController",void 0),e([s.Autowired("columnAnimationService"),f("design:type",H.ColumnAnimationService)],b.prototype,"columnAnimationService",void 0),e([s.Optional("rangeController"),f("design:type",Object)],b.prototype,"rangeController",void 0),e([s.Autowired("focusedCellController"),f("design:type",u.FocusedCellController)],b.prototype,"focusedCellController",void 0),
e([s.Optional("contextMenuFactory"),f("design:type",Object)],b.prototype,"contextMenuFactory",void 0),e([s.Autowired("focusService"),f("design:type",w.FocusService)],b.prototype,"focusService",void 0),e([s.Autowired("cellEditorFactory"),f("design:type",x.CellEditorFactory)],b.prototype,"cellEditorFactory",void 0),e([s.Autowired("cellRendererFactory"),f("design:type",A.CellRendererFactory)],b.prototype,"cellRendererFactory",void 0),e([s.Autowired("popupService"),f("design:type",z.PopupService)],b.prototype,"popupService",void 0),e([s.Autowired("cellRendererService"),f("design:type",B.CellRendererService)],b.prototype,"cellRendererService",void 0),e([s.Autowired("valueFormatterService"),f("design:type",C.ValueFormatterService)],b.prototype,"valueFormatterService",void 0),e([s.Autowired("stylingService"),f("design:type",F.StylingService)],b.prototype,"stylingService",void 0),e([s.Autowired("columnHoverService"),f("design:type",G.ColumnHoverService)],b.prototype,"columnHoverService",void 0),e([s.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(y.Component);b.CellComp=I},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(4),g=c(10),h=c(3),i=c(26),j=c(30),k=c(14),l=c(6),m=c(8),n=c(7),o=c(31),p=function(){function a(){this.childrenMapped={},this.selected=!1}return a.prototype.setData=function(b){var c=this.data;this.data=b,this.valueCache.onDataChanged();var d={oldData:c,newData:b,update:!1};this.dispatchLocalEvent(a.EVENT_DATA_CHANGED,d)},a.prototype.updateData=function(b){var c=this.data;this.data=b;var d={oldData:c,newData:b,update:!0};this.dispatchLocalEvent(a.EVENT_DATA_CHANGED,d)},a.prototype.createDaemonNode=function(){var b=new a;return this.context.wireBean(b),b.id=this.id,b.data=this.data,b.daemon=!0,b.selected=this.selected,b.level=this.level,b},a.prototype.setDataAndId=function(b,c){var d=n.Utils.exists(this.id)?this.createDaemonNode():null,e=this.data;this.data=b,this.setId(c),this.selectionController.syncInRowNode(this,d);var f={oldData:e,newData:b};this.dispatchLocalEvent(a.EVENT_DATA_CHANGED,f)},a.prototype.setId=function(a){var b=this.gridOptionsWrapper.getRowNodeIdFunc();b?this.data?this.id=b(this.data):this.id=void 0:this.id=a},a.prototype.isPixelInRange=function(a){return a>=this.rowTop&&a<this.rowTop+this.rowHeight},a.prototype.clearRowTop=function(){this.oldRowTop=this.rowTop,this.setRowTop(null)},a.prototype.setFirstChild=function(b){this.firstChild!==b&&(this.firstChild=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_FIRST_CHILD_CHANGED))},a.prototype.setLastChild=function(b){this.lastChild!==b&&(this.lastChild=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_LAST_CHILD_CHANGED))},a.prototype.setChildIndex=function(b){this.childIndex!==b&&(this.childIndex=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_CHILD_INDEX_CHANGED))},a.prototype.setRowTop=function(b){this.rowTop!==b&&(this.rowTop=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_TOP_CHANGED))},a.prototype.setAllChildrenCount=function(b){this.allChildrenCount!==b&&(this.allChildrenCount=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_ALL_CHILDREN_COUNT_CELL_CHANGED))},a.prototype.setRowHeight=function(b){this.rowHeight=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_HEIGHT_CHANGED)},a.prototype.setRowIndex=function(b){this.rowIndex=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_ROW_INDEX_CHANGED)},a.prototype.setUiLevel=function(b){this.uiLevel!==b&&(this.uiLevel=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_UI_LEVEL_CHANGED))},a.prototype.setExpanded=function(b){if(this.expanded!==b){this.expanded=b,this.eventService&&this.eventService.dispatchEvent(a.EVENT_EXPANDED_CHANGED);var c={node:this};this.mainEventService.dispatchEvent(g.Events.EVENT_ROW_GROUP_OPENED,c)}},a.prototype.dispatchLocalEvent=function(a,b){this.eventService&&this.eventService.dispatchEvent(a,b)},a.prototype.setDataValue=function(a,b){var c=this.columnController.getPrimaryColumn(a);this.valueService.setValue(this,c,b),this.dispatchCellChangedEvent(c,b)},a.prototype.setGroupValue=function(a,b){var c=this.columnController.getGridColumn(a);n.Utils.missing(this.groupData)&&(this.groupData={}),this.groupData[c.getColId()]=b,this.dispatchCellChangedEvent(c,b)},a.prototype.setAggData=function(a){var b=this,c=n.Utils.getAllKeysInObjects([this.aggData,a]);this.aggData=a,this.eventService&&c.forEach(function(a){var c=b.columnController.getGridColumn(a),d=b.data?b.data[a]:void 0;b.dispatchCellChangedEvent(c,d)})},a.prototype.dispatchCellChangedEvent=function(b,c){var d={column:b,newValue:c};this.dispatchLocalEvent(a.EVENT_CELL_CHANGED,d)},a.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},a.prototype.isExpandable=function(){return this.group||this.canFlower},a.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},a.prototype.depthFirstSearch=function(a){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(b){return b.depthFirstSearch(a)}),a(this)},a.prototype.calculateSelectedFromChildren=function(){var a,b=!1,c=!1,d=!1;if(this.childrenAfterGroup)for(var e=0;e<this.childrenAfterGroup.length;e++){var f=this.childrenAfterGroup[e].isSelected();switch(f){case!0:b=!0;break;case!1:c=!0;break;default:d=!0}}a=d?void 0:!(!b||c)||!(!b&&c)&&void 0,this.selectThisNode(a)},a.prototype.calculateSelectedFromChildrenBubbleUp=function(){this.calculateSelectedFromChildren(),this.parent&&this.parent.calculateSelectedFromChildrenBubbleUp()},a.prototype.setSelectedInitialValue=function(a){this.selected=a},a.prototype.setSelected=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1),this.setSelectedParams({newValue:a,clearSelection:b,tailingNodeInSequence:c,rangeSelect:!1})},a.prototype.isRowPinned=function(){return this.rowPinned===m.Constants.PINNED_TOP||this.rowPinned===m.Constants.PINNED_BOTTOM},a.prototype.setSelectedParams=function(a){var b=this.gridOptionsWrapper.isGroupSelectsChildren(),c=!0===a.newValue,d=!0===a.clearSelection,e=!0===a.tailingNodeInSequence,f=!0===a.rangeSelect,h=b&&!0===a.groupSelectsFiltered;if(void 0===this.id)return console.warn("ag-Grid: cannot select node until id for node is known"),0;if(this.rowPinned)return console.log("ag-Grid: cannot select pinned rows"),0;if(this.footer){return this.sibling.setSelectedParams(a)}if(f){var i=this.selectionController.getLastSelectedNode()!==this,j=this.gridOptionsWrapper.isRowSelectionMulti();if(i&&j)return this.doRowRangeSelection()}var k=0;h&&this.group||this.selectThisNode(c)&&k++;return b&&this.group&&(k+=this.selectChildNodes(c,h)),!e&&(!c||!d&&this.gridOptionsWrapper.isRowSelectionMulti()||(k+=this.selectionController.clearOtherNodes(this)),k>0&&(h?this.calculatedSelectedForAllGroupNodes():b&&this.parent&&this.parent.calculateSelectedFromChildrenBubbleUp(),this.mainEventService.dispatchEvent(g.Events.EVENT_SELECTION_CHANGED)),c&&this.selectionController.setLastSelectedNode(this)),k},a.prototype.doRowRangeSelection=function(){var a=0,b=this.gridOptionsWrapper.isGroupSelectsChildren(),c=this.selectionController.getLastSelectedNode();return this.rowModel.getNodesInRangeForSelection(c,this).forEach(function(c){c.group&&b||c.selectThisNode(!0)&&a++}),b&&this.calculatedSelectedForAllGroupNodes(),this.mainEventService.dispatchEvent(g.Events.EVENT_SELECTION_CHANGED),a},a.prototype.isParentOfNode=function(a){for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},a.prototype.calculatedSelectedForAllGroupNodes=function(){this.rowModel.getTopLevelNodes().forEach(function(a){a.group&&(a.depthFirstSearch(function(a){a.group&&a.calculateSelectedFromChildren()}),a.calculateSelectedFromChildren())})},a.prototype.selectThisNode=function(b){if(this.selected===b)return!1;this.selected=b,this.eventService&&this.dispatchLocalEvent(a.EVENT_ROW_SELECTED);var c={node:this};return this.mainEventService.dispatchEvent(g.Events.EVENT_ROW_SELECTED,c),!0},a.prototype.selectChildNodes=function(a,b){var c=b?this.childrenAfterFilter:this.childrenAfterGroup,d=0;if(!n.Utils.missing(c)){for(var e=0;e<c.length;e++)d+=c[e].setSelectedParams({newValue:a,clearSelection:!1,tailingNodeInSequence:!0});return d}},a.prototype.addEventListener=function(a,b){this.eventService||(this.eventService=new f.EventService),this.eventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.eventService.removeEventListener(a,b)},a.prototype.onMouseEnter=function(){this.dispatchLocalEvent(a.EVENT_MOUSE_ENTER)},a.prototype.onMouseLeave=function(){this.dispatchLocalEvent(a.EVENT_MOUSE_LEAVE)},a.prototype.getFirstChildOfFirstChild=function(a){for(var b,c=this,d=!0,e=!1;d&&!e;){var f=c.parent;n.Utils.exists(f)&&c.firstChild?f.rowGroupColumn===a&&(e=!0,b=f):d=!1,c=f}return e?b:null},a.EVENT_ROW_SELECTED="rowSelected",a.EVENT_DATA_CHANGED="dataChanged",a.EVENT_CELL_CHANGED="cellChanged",a.EVENT_ALL_CHILDREN_COUNT_CELL_CHANGED="allChildrenCountChanged",a.EVENT_MOUSE_ENTER="mouseEnter",a.EVENT_MOUSE_LEAVE="mouseLeave",a.EVENT_HEIGHT_CHANGED="heightChanged",a.EVENT_TOP_CHANGED="topChanged",a.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",a.EVENT_LAST_CHILD_CHANGED="lastChildChanged",a.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",a.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",a.EVENT_EXPANDED_CHANGED="expandedChanged",a.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",d([l.Autowired("eventService"),e("design:type",f.EventService)],a.prototype,"mainEventService",void 0),d([l.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([l.Autowired("selectionController"),e("design:type",i.SelectionController)],a.prototype,"selectionController",void 0),d([l.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),d([l.Autowired("valueService"),e("design:type",j.ValueService)],a.prototype,"valueService",void 0),d([l.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([l.Autowired("context"),e("design:type",l.Context)],a.prototype,"context",void 0),d([l.Autowired("valueCache"),e("design:type",o.ValueCache)],a.prototype,"valueCache",void 0),a}();b.RowNode=p},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(3),g=c(19),h=c(14),i=c(6),j=c(7),k=c(10),l=c(4),m=c(31),n=function(){function a(){this.initialised=!1}return a.prototype.init=function(){this.cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions(),this.initialised=!0},a.prototype.getValue=function(a,b,c){void 0===c&&(c=!1),this.initialised||this.init();var d,e=a.getColDef(),f=e.field,g=a.getId(),h=b.data,i=b.groupData&&void 0!==b.groupData[g],k=!c&&b.aggData&&void 0!==b.aggData[g];if(d=i?b.groupData[g]:k?b.aggData[g]:e.valueGetter?this.executeValueGetter(e.valueGetter,h,a,b):f&&h?j._.getValueUsingField(h,f,a.isFieldContainsDots()):void 0,this.cellExpressions&&"string"==typeof d&&0===d.indexOf("=")){var l=d.substring(1);d=this.executeValueGetter(l,h,a,b)}return d},a.prototype.setValue=function(a,b,c){var d=this.columnController.getPrimaryColumn(b);if(a&&d){var e=a.data;j._.missing(e)&&(a.data={});var f=d.getColDef(),g=f.field,h=f.newValueHandler,i=f.valueSetter,l=f.valueParser;if(j._.missing(g)&&j._.missing(h)&&j._.missing(i))return void console.warn("ag-Grid: you need either field or valueSetter set on colDef for editing to work");var m={node:a,data:a.data,oldValue:this.getValue(d,a),newValue:c,colDef:d.getColDef(),column:d,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()},n=j._.exists(l)?this.expressionService.evaluate(l,m):c;m.newValue=n;var o;o=j._.exists(h)?h(m):j._.exists(i)?this.expressionService.evaluate(i,m):this.setValueUsingField(e,g,n,d.isFieldContainsDots()),void 0===o&&(o=!0),o&&(a.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),m.newValue=this.getValue(d,a),"function"==typeof d.getColDef().onCellValueChanged&&d.getColDef().onCellValueChanged(m),this.eventService.dispatchEvent(k.Events.EVENT_CELL_VALUE_CHANGED,m))}},a.prototype.setValueUsingField=function(a,b,c,d){if(d)for(var e=b.split("."),f=a;e.length>0&&f;){var g=e.shift();0===e.length?f[g]=c:f=f[g]}else a[b]=c;return!0},a.prototype.executeValueGetter=function(a,b,c,d){var e=c.getId(),f=this.valueCache.getValue(d,e);if(void 0!==f)return f;var g={data:b,node:d,column:c,colDef:c.getColDef(),api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),getValue:this.getValueCallback.bind(this,d)},h=this.expressionService.evaluate(a,g);return this.valueCache.setValue(d,e,h),h},a.prototype.getValueCallback=function(a,b){var c=this.columnController.getPrimaryColumn(b);return c?this.getValue(c,a):null},d([i.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([i.Autowired("expressionService"),e("design:type",g.ExpressionService)],a.prototype,"expressionService",void 0),d([i.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([i.Autowired("eventService"),e("design:type",l.EventService)],a.prototype,"eventService",void 0),d([i.Autowired("valueCache"),e("design:type",m.ValueCache)],a.prototype,"valueCache",void 0),d([i.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([i.Bean("valueService")],a)}();b.ValueService=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(3),h=function(){function a(){this.cacheVersion=0}return a.prototype.init=function(){this.active=this.gridOptionsWrapper.isValueCache(),this.neverExpires=this.gridOptionsWrapper.isValueCacheNeverExpires()},a.prototype.onDataChanged=function(){this.neverExpires||this.expire()},a.prototype.expire=function(){this.cacheVersion++},a.prototype.setValue=function(a,b,c){this.active&&(a.__cacheVersion!==this.cacheVersion&&(a.__cacheVersion=this.cacheVersion,a.__cacheData={}),a.__cacheData[b]=c)},a.prototype.getValue=function(a,b){return this.active&&a.__cacheVersion===this.cacheVersion&&void 0!==a.__cacheData[b]?a.__cacheData[b]:void 0},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("valueCache")],a)}();b.ValueCache=h},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(6),h=function(){function a(){this.templateCache={},this.waitingCallbacks={}}return a.prototype.getTemplate=function(a,b){var c=this.templateCache[a];if(c)return c;var d=this.waitingCallbacks[a],e=this;if(!d){d=[],this.waitingCallbacks[a]=d;var f=new XMLHttpRequest;f.onload=function(){e.handleHttpResult(this,a)},f.open("GET",a),f.send()}return b&&d.push(b),null},a.prototype.handleHttpResult=function(a,b){if(200!==a.status||null===a.response)return void console.warn("Unable to get template error "+a.status+" - "+b);this.templateCache[b]=a.response||a.responseText;for(var c=this.waitingCallbacks[b],d=0;d<c.length;d++){(0,c[d])()}if(this.$scope){var e=this;setTimeout(function(){e.$scope.$apply()},0)}},d([g.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),a=d([f.Bean("templateService")],a)}();b.TemplateService=h},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(4),h=c(10),i=c(3),j=c(14),k=c(7),l=c(34),m=c(8),n=function(){function a(){}return a.prototype.init=function(){this.eventService.addEventListener(h.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_GROUP_OPENED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_MOVED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_PINNED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearFocusedCell.bind(this)),this.eventService.addEventListener(h.Events.EVENT_COLUMN_VISIBLE,this.clearFocusedCell.bind(this))},a.prototype.clearFocusedCell=function(){this.focusedCell=null,this.onCellFocused(!1)},a.prototype.getFocusedCell=function(){return this.focusedCell},a.prototype.getFocusCellToUseAfterRefresh=function(){if(this.gridOptionsWrapper.isSuppressFocusAfterRefresh())return null;if(!this.focusedCell)return null;var a=this.getGridCellForDomElement(document.activeElement);return a&&this.focusedCell.createId()===a.createId()?this.focusedCell:null},a.prototype.getGridCellForDomElement=function(a){if(!a)return null;for(var b=null,c=null,d=null,e=this;a;)!function(a){var b=k.Utils.getElementAttribute(a,"row");k.Utils.exists(b)&&k.Utils.containsClass(a,"ag-row")&&(0===b.indexOf("ft")?(d=m.Constants.PINNED_TOP,b=b.substr(3)):0===b.indexOf("fb")?(d=m.Constants.PINNED_BOTTOM,b=b.substr(3)):d=null,c=parseInt(b))}(a),function(a){var c=k.Utils.getElementAttribute(a,"colid");if(k.Utils.exists(c)&&k.Utils.containsClass(a,"ag-cell")){var d=e.columnController.getGridColumn(c);d&&(b=d)}}(a),a=a.parentNode;if(k.Utils.exists(b)&&k.Utils.exists(c)){return new l.GridCell({rowIndex:c,floating:d,column:b})}return null},a.prototype.setFocusedCell=function(a,b,c,d){if(void 0===d&&(d=!1),!this.gridOptionsWrapper.isSuppressCellSelection()){var e=k.Utils.makeNull(this.columnController.getGridColumn(b));this.focusedCell=new l.GridCell({rowIndex:a,floating:k.Utils.makeNull(c),column:e}),this.onCellFocused(d)}},a.prototype.isCellFocused=function(a){return!k.Utils.missing(this.focusedCell)&&(this.focusedCell.column===a.column&&this.isRowFocused(a.rowIndex,a.floating))},a.prototype.isRowNodeFocused=function(a){return this.isRowFocused(a.rowIndex,a.rowPinned)},a.prototype.isAnyCellFocused=function(){return!!this.focusedCell},a.prototype.isRowFocused=function(a,b){if(k.Utils.missing(this.focusedCell))return!1;var c=k.Utils.makeNull(b);return this.focusedCell.rowIndex===a&&this.focusedCell.floating===c},a.prototype.onCellFocused=function(a){var b={rowIndex:null,column:null,floating:null,forceBrowserFocus:a};this.focusedCell&&(b.rowIndex=this.focusedCell.rowIndex,b.column=this.focusedCell.column,b.floating=this.focusedCell.floating),this.eventService.dispatchEvent(h.Events.EVENT_CELL_FOCUSED,b)},d([f.Autowired("eventService"),e("design:type",g.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([f.Bean("focusedCellController")],a)}();b.FocusedCellController=n},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(7),e=c(35),f=function(){function a(a){this.rowIndex=a.rowIndex,this.column=a.column,this.floating=d.Utils.makeNull(a.floating)}return a.prototype.getGridCellDef=function(){return{rowIndex:this.rowIndex,column:this.column,floating:this.floating}},a.prototype.getGridRow=function(){return new e.GridRow(this.rowIndex,this.floating)},a.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating+", column = "+(this.column?this.column.getId():null)},a.prototype.createId=function(){return this.rowIndex+"."+this.floating+"."+this.column.getId()},a}();b.GridCell=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(8),e=c(7),f=c(34),g=function(){function a(a,b){this.rowIndex=a,this.floating=e.Utils.makeNull(b)}return a.prototype.isFloatingTop=function(){return this.floating===d.Constants.PINNED_TOP},a.prototype.isFloatingBottom=function(){return this.floating===d.Constants.PINNED_BOTTOM},a.prototype.isNotFloating=function(){return!this.isFloatingBottom()&&!this.isFloatingTop()},a.prototype.equals=function(a){return this.rowIndex===a.rowIndex&&this.floating===a.floating},a.prototype.toString=function(){return"rowIndex = "+this.rowIndex+", floating = "+this.floating},a.prototype.getGridCell=function(a){var b={rowIndex:this.rowIndex,floating:this.floating,column:a};return new f.GridCell(b)},a.prototype.before=function(a){var b=a.floating;switch(this.floating){case d.Constants.PINNED_TOP:if(b!==d.Constants.PINNED_TOP)return!0;break;case d.Constants.PINNED_BOTTOM:if(b!==d.Constants.PINNED_BOTTOM)return!1;break;default:if(e.Utils.exists(b))return b!==d.Constants.PINNED_TOP}return this.rowIndex<=a.rowIndex},a}();b.GridRow=g},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(7),h=c(37),i=c(14),j=c(8),k=c(34),l=function(){function a(){this.destroyMethods=[],this.listeners=[]}return a.prototype.addListener=function(a){this.listeners.push(a)},a.prototype.removeListener=function(a){g.Utils.removeFromArray(this.listeners,a)},a.prototype.init=function(){var a=this.onFocus.bind(this),b=this.gridCore.getRootGui();b.addEventListener("focus",a,!0),this.destroyMethods.push(function(){b.removeEventListener("focus",a)})},a.prototype.onFocus=function(a){var b=this.getCellForFocus(a);b&&this.informListeners({gridCell:b})},a.prototype.getCellForFocus=function(a){for(var b=null,c=null,d=null,e=this,f=a.target;f;)!function(a){var b=g.Utils.getElementAttribute(a,"row");g.Utils.exists(b)&&g.Utils.containsClass(a,"ag-row")&&(0===b.indexOf("ft")?(d=j.Constants.PINNED_TOP,b=b.substr(3)):0===b.indexOf("fb")?(d=j.Constants.PINNED_BOTTOM,b=b.substr(3)):d=null,c=parseInt(b))}(f),function(a){var c=g.Utils.getElementAttribute(a,"colid");if(g.Utils.exists(c)&&g.Utils.containsClass(a,"ag-cell")){var d=e.columnController.getGridColumn(c);d&&(b=d)}}(f),f=f.parentNode;if(g.Utils.exists(b)&&g.Utils.exists(c)){return new k.GridCell({rowIndex:c,floating:d,column:b})}return null},a.prototype.informListeners=function(a){this.listeners.forEach(function(b){return b(a)})},a.prototype.destroy=function(){this.destroyMethods.forEach(function(a){return a()})},d([f.Autowired("gridCore"),e("design:type",h.GridCore)],a.prototype,"gridCore",void 0),d([f.Autowired("columnController"),e("design:type",i.ColumnController)],a.prototype,"columnController",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([f.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=d([f.Bean("focusService")],a)}();b.FocusService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(3),h=c(14),i=c(22),j=c(38),k=c(4),l=c(23),m=c(5),n=c(8),o=c(39),p=c(10),q=c(7),r=c(24),s=c(6),t=c(33),u=c(42),v=c(57),w=function(){function a(a){this.destroyFunctions=[],this.logger=a.create("GridCore")}return a.prototype.init=function(){var a,b,c=this,d=this.createSouthPanel();this.toolPanel&&!this.gridOptionsWrapper.isForPrint()&&(this.gridOptionsWrapper.isEnableRtl()?b=this.toolPanel.getGui():a=this.toolPanel.getGui());var e=this.createNorthPanel();this.eRootPanel=new r.BorderLayout({center:this.gridPanel.getLayout(),east:a,west:b,north:e,south:d,dontFill:this.gridOptionsWrapper.isForPrint(),fillHorizontalOnly:this.gridOptionsWrapper.isAutoHeight(),name:"eRootPanel"}),this.gridOptionsWrapper.isForPrint()?(q.Utils.addCssClass(this.eRootPanel.getGui(),"ag-layout-for-print"),q.Utils.addCssClass(this.eRootPanel.getGui(),"ag-no-scrolls")):this.gridOptionsWrapper.isAutoHeight()?q.Utils.addCssClass(this.eRootPanel.getGui(),"ag-layout-auto-height"):(q.Utils.addCssClass(this.eRootPanel.getGui(),"ag-layout-normal"),q.Utils.addCssClass(this.eRootPanel.getGui(),"ag-scrolls")),this.showToolPanel(this.gridOptionsWrapper.isShowToolPanel()),this.eGridDiv.appendChild(this.eRootPanel.getGui()),this.$scope&&this.$scope.$watch(this.quickFilterOnScope,function(a){return c.filterManager.setQuickFilter(a)}),this.gridOptionsWrapper.isForPrint()||this.addWindowResizeListener(),this.addRtlSupport(),this.doLayout(),this.finished=!1,this.periodicallyDoLayout(),this.eventService.addEventListener(p.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.eventService.addEventListener(p.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.onRowGroupChanged.bind(this)),this.onRowGroupChanged(),this.logger.log("ready")},a.prototype.addRtlSupport=function(){this.gridOptionsWrapper.isEnableRtl()?q.Utils.addCssClass(this.eRootPanel.getGui(),"ag-rtl"):q.Utils.addCssClass(this.eRootPanel.getGui(),"ag-ltr")},a.prototype.createNorthPanel=function(){var a=this;if(!this.gridOptionsWrapper.isEnterprise())return null;var b=document.createElement("div"),c=this.onDropPanelVisible.bind(this);return this.rowGroupComp=this.rowGroupCompFactory.create(),this.pivotComp=this.pivotCompFactory.create(),b.appendChild(this.rowGroupComp.getGui()),b.appendChild(this.pivotComp.getGui()),this.rowGroupComp.addEventListener(u.Component.EVENT_VISIBLE_CHANGED,c),this.pivotComp.addEventListener(u.Component.EVENT_VISIBLE_CHANGED,c),this.destroyFunctions.push(function(){a.rowGroupComp.removeEventListener(u.Component.EVENT_VISIBLE_CHANGED,c),a.pivotComp.removeEventListener(u.Component.EVENT_VISIBLE_CHANGED,c)}),this.onDropPanelVisible(),b},a.prototype.onDropPanelVisible=function(){var a=this.rowGroupComp.isVisible()&&this.pivotComp.isVisible();this.rowGroupComp.addOrRemoveCssClass("ag-width-half",a),this.pivotComp.addOrRemoveCssClass("ag-width-half",a)},a.prototype.getRootGui=function(){return this.eRootPanel.getGui()},a.prototype.createSouthPanel=function(){!this.statusBar&&this.gridOptionsWrapper.isEnableStatusBar()&&console.warn("ag-Grid: status bar is only available in ag-Grid-Enterprise");var a=this.statusBar&&this.gridOptionsWrapper.isEnableStatusBar(),b=this.gridOptionsWrapper.isPagination(),c=b&&!this.gridOptionsWrapper.isForPrint()&&!this.gridOptionsWrapper.isSuppressPaginationPanel();if(!a&&!c)return null;var d=document.createElement("div");if(a&&d.appendChild(this.statusBar.getGui()),c){var e=new v.PaginationComp;this.context.wireBean(e),d.appendChild(e.getGui()),this.destroyFunctions.push(e.destroy.bind(e))}return d},a.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var a=this.gridOptionsWrapper.getRowGroupPanelShow();if(a===n.Constants.ALWAYS)this.rowGroupComp.setVisible(!0);else if(a===n.Constants.ONLY_WHEN_GROUPING){var b=!this.columnController.isRowGroupEmpty();this.rowGroupComp.setVisible(b)}else this.rowGroupComp.setVisible(!1);this.eRootPanel.doLayout()}},a.prototype.addWindowResizeListener=function(){var a=this.doLayout.bind(this);window.addEventListener("resize",a),this.destroyFunctions.push(function(){return window.removeEventListener("resize",a)})},a.prototype.periodicallyDoLayout=function(){var a=this;if(!this.finished){var b=this.gridOptionsWrapper.getLayoutInterval();b>0?this.frameworkFactory.setTimeout(function(){a.doLayout(),a.gridPanel.periodicallyCheck(),a.periodicallyDoLayout()},b):this.frameworkFactory.setTimeout(function(){a.periodicallyDoLayout()},5e3)}},a.prototype.showToolPanel=function(a){if(a&&!this.toolPanel)return console.warn("ag-Grid: toolPanel is only available in ag-Grid Enterprise"),void(this.toolPanelShowing=!1);this.toolPanelShowing=a,this.toolPanel&&(this.toolPanel.setVisible(a),this.eRootPanel.doLayout())},a.prototype.isToolPanelShowing=function(){return this.toolPanelShowing},a.prototype.destroy=function(){this.finished=!0,this.eGridDiv.removeChild(this.eRootPanel.getGui()),this.logger.log("Grid DOM removed"),this.destroyFunctions.forEach(function(a){return a()})},a.prototype.ensureNodeVisible=function(a){if(this.doingVirtualPaging)throw"Cannot use ensureNodeVisible when doing virtual paging, as we cannot check rows that are not in memory";for(var b=this.rowModel.getPageLastRow()+1,c="function"==typeof a,d=-1,e=0;e<b;e++){var f=this.rowModel.getRow(e);if(c){if(a(f)){d=e;break}}else if(a===f||a===f.data){d=e;break}}d>=0&&this.gridPanel.ensureIndexVisible(d)},a.prototype.doLayout=function(){var a=this.eRootPanel.doLayout()
;if(a&&this.eRootPanel.doLayout(),a){this.rowRenderer.redrawAfterScroll();var b={clientWidth:this.eRootPanel.getGui().clientWidth,clientHeight:this.eRootPanel.getGui().clientHeight};this.eventService.dispatchEvent(p.Events.EVENT_GRID_SIZE_CHANGED,b)}},d([s.Autowired("gridOptions"),e("design:type",Object)],a.prototype,"gridOptions",void 0),d([s.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([s.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([s.Autowired("frameworkFactory"),e("design:type",Object)],a.prototype,"frameworkFactory",void 0),d([s.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([s.Autowired("rowRenderer"),e("design:type",i.RowRenderer)],a.prototype,"rowRenderer",void 0),d([s.Autowired("filterManager"),e("design:type",j.FilterManager)],a.prototype,"filterManager",void 0),d([s.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([s.Autowired("gridPanel"),e("design:type",l.GridPanel)],a.prototype,"gridPanel",void 0),d([s.Autowired("eGridDiv"),e("design:type",HTMLElement)],a.prototype,"eGridDiv",void 0),d([s.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([s.Autowired("quickFilterOnScope"),e("design:type",String)],a.prototype,"quickFilterOnScope",void 0),d([s.Autowired("popupService"),e("design:type",o.PopupService)],a.prototype,"popupService",void 0),d([s.Autowired("focusedCellController"),e("design:type",t.FocusedCellController)],a.prototype,"focusedCellController",void 0),d([s.Autowired("context"),e("design:type",s.Context)],a.prototype,"context",void 0),d([s.Optional("rowGroupCompFactory"),e("design:type",Object)],a.prototype,"rowGroupCompFactory",void 0),d([s.Optional("pivotCompFactory"),e("design:type",Object)],a.prototype,"pivotCompFactory",void 0),d([s.Optional("toolPanel"),e("design:type",u.Component)],a.prototype,"toolPanel",void 0),d([s.Optional("statusBar"),e("design:type",u.Component)],a.prototype,"statusBar",void 0),d([s.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([s.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=d([s.Bean("gridCore"),f(0,s.Qualifier("loggerFactory")),e("design:paramtypes",[m.LoggerFactory])],a)}();b.GridCore=w},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(7),g=c(3),h=c(39),i=c(30),j=c(14),k=c(40),l=c(45),m=c(6),n=c(4),o=c(10),p=c(46),q=c(47),r=function(){function a(){this.allFilters={},this.quickFilter=null,this.availableFilters={text:k.TextFilter,number:l.NumberFilter,date:p.DateFilter}}return b=a,a.prototype.init=function(){this.eventService.addEventListener(o.Events.EVENT_ROW_DATA_CHANGED,this.onNewRowsLoaded.bind(this)),this.eventService.addEventListener(o.Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.quickFilter=this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText()),this.checkExternalFilter()},a.prototype.registerFilter=function(a,b){this.availableFilters[a]=b},a.prototype.setFilterModel=function(a){var b=this;if(a){var c=Object.keys(a);f.Utils.iterateObject(this.allFilters,function(d,e){f.Utils.removeFromArray(c,d);var g=a[d];b.setModelOnFilterWrapper(e.filter,g)}),f.Utils.iterateArray(c,function(c){var d=b.columnController.getPrimaryColumn(c);if(!d)return void console.warn("Warning ag-grid setFilterModel - no column found for colId "+c);var e=b.getOrCreateFilterWrapper(d);b.setModelOnFilterWrapper(e.filter,a[c])})}else f.Utils.iterateObject(this.allFilters,function(a,c){b.setModelOnFilterWrapper(c.filter,null)});this.onFilterChanged()},a.prototype.setModelOnFilterWrapper=function(a,b){if("function"!=typeof a.setModel)return void console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel");a.setModel(b)},a.prototype.getFilterModel=function(){var a={};return f.Utils.iterateObject(this.allFilters,function(b,c){var d=c.filter;if("function"!=typeof d.getModel)return void console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel");var e=d.getModel();f.Utils.exists(e)&&(a[b]=e)}),a},a.prototype.isAdvancedFilterPresent=function(){return this.advancedFilterPresent},a.prototype.setAdvancedFilterPresent=function(){var a=!1;f.Utils.iterateObject(this.allFilters,function(b,c){c.filter.isFilterActive()&&(a=!0)}),this.advancedFilterPresent=a},a.prototype.updateFilterFlagInColumns=function(){f.Utils.iterateObject(this.allFilters,function(a,b){var c=b.filter.isFilterActive();b.column.setFilterActive(c)})},a.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.advancedFilterPresent||this.externalFilterPresent},a.prototype.doesFilterPass=function(a,b){for(var c=a.data,d=Object.keys(this.allFilters),e=0,f=d.length;e<f;e++){var g=d[e],h=this.allFilters[g];if(void 0!==h&&(h.filter!==b&&h.filter.isFilterActive())){h.filter.doesFilterPass||console.error("Filter is missing method doesFilterPass");var i={node:a,data:c};if(!h.filter.doesFilterPass(i))return!1}}return!0},a.prototype.parseQuickFilter=function(a){return f.Utils.missing(a)||""===a?null:this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("ag-grid: cannot do quick filtering when doing virtual paging"),null):a.toUpperCase()},a.prototype.setQuickFilter=function(a){var b=this.parseQuickFilter(a);this.quickFilter!==b&&(this.quickFilter=b,this.onFilterChanged())},a.prototype.checkExternalFilter=function(){this.externalFilterPresent=this.gridOptionsWrapper.isExternalFilterPresent()},a.prototype.onFilterChanged=function(){this.setAdvancedFilterPresent(),this.updateFilterFlagInColumns(),this.checkExternalFilter(),f.Utils.iterateObject(this.allFilters,function(a,b){b.filter.onAnyFilterChanged&&b.filter.onAnyFilterChanged()}),this.eventService.dispatchEvent(o.Events.EVENT_FILTER_CHANGED)},a.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},a.prototype.doesRowPassOtherFilters=function(a,b){return this.doesRowPassFilter(b,a)},a.prototype.doesRowPassQuickFilterNoCache=function(a){var b=this,c=this.columnController.getAllPrimaryColumns(),d=!1;return c.forEach(function(c){if(!d){var e=b.getQuickFilterTextForColumn(c,a);f.Utils.exists(e)&&e.indexOf(b.quickFilter)>=0&&(d=!0)}}),d},a.prototype.doesRowPassQuickFilterCache=function(a){return a.quickFilterAggregateText||this.aggregateRowForQuickFilter(a),a.quickFilterAggregateText.indexOf(this.quickFilter)>=0},a.prototype.doesRowPassQuickFilter=function(a){return this.gridOptionsWrapper.isCacheQuickFilter()?this.doesRowPassQuickFilterCache(a):this.doesRowPassQuickFilterNoCache(a)},a.prototype.doesRowPassFilter=function(a,b){return!(this.isQuickFilterPresent()&&!this.doesRowPassQuickFilter(a))&&(!(this.externalFilterPresent&&!this.gridOptionsWrapper.doesExternalFilterPass(a))&&!(this.advancedFilterPresent&&!this.doesFilterPass(a,b)))},a.prototype.getQuickFilterTextForColumn=function(a,b){var c,d=this.valueService.getValue(a,b),e=a.getColDef();if(a.getColDef().getQuickFilterText){var f={value:d,node:b,data:b.data,column:a,colDef:e};c=a.getColDef().getQuickFilterText(f)}else c=d;return c&&""!==c?c.toString().toUpperCase():null},a.prototype.aggregateRowForQuickFilter=function(a){var c=this,d=[];this.columnController.getAllPrimaryColumns().forEach(function(b){var e=c.getQuickFilterTextForColumn(b,a);f.Utils.exists(e)&&d.push(e)}),a.quickFilterAggregateText=d.join(b.QUICK_FILTER_SEPARATOR)},a.prototype.onNewRowsLoaded=function(){f.Utils.iterateObject(this.allFilters,function(a,b){b.filter.onNewRowsLoaded&&b.filter.onNewRowsLoaded()}),this.updateFilterFlagInColumns(),this.setAdvancedFilterPresent()},a.prototype.createValueGetter=function(a){var b=this;return function(c){return b.valueService.getValue(a,c)}},a.prototype.getFilterComponent=function(a){return this.getOrCreateFilterWrapper(a).filter},a.prototype.getOrCreateFilterWrapper=function(a){var b=this.cachedFilter(a);return b||(b=this.createFilterWrapper(a),this.allFilters[a.getColId()]=b),b},a.prototype.cachedFilter=function(a){return this.allFilters[a.getColId()]},a.prototype.createFilterInstance=function(a){var b,c=a.getFilter(),d="function"==typeof c,e=f.Utils.missing(c)||"string"==typeof c;if(d)b=c,this.assertMethodHasNoParameters(b);else{if(!e)return console.error("ag-Grid: colDef.filter should be function or a string"),null;var g=c;b=this.getFilterFromCache(g)}var h=new b;return this.checkFilterHasAllMandatoryMethods(h,a),this.context.wireBean(h),h},a.prototype.checkFilterHasAllMandatoryMethods=function(a,b){["getGui","isFilterActive","doesFilterPass","getModel","setModel"].forEach(function(c){if(!a[c])throw"Filter for column "+b.getColId()+" is missing method "+c})},a.prototype.createParams=function(a){var b=this,c=this.onFilterChanged.bind(this),d=function(){return b.eventService.dispatchEvent(o.Events.EVENT_FILTER_MODIFIED)},e=this.doesRowPassOtherFilters.bind(this,a.filter),g=a.column.getColDef(),h={column:a.column,colDef:g,rowModel:this.rowModel,filterChangedCallback:c,filterModifiedCallback:d,valueGetter:this.createValueGetter(a.column),doesRowPassOtherFilter:e,context:this.gridOptionsWrapper.getContext(),$scope:a.scope};return g.filterParams&&f.Utils.assign(h,g.filterParams),h},a.prototype.createFilterWrapper=function(a){var b={column:a,filter:null,scope:null,gui:null};return b.filter=this.createFilterInstance(a),this.initialiseFilterAndPutIntoGui(b),b},a.prototype.initialiseFilterAndPutIntoGui=function(a){this.gridOptionsWrapper.isAngularCompileFilters()&&(a.scope=this.$scope.$new(),a.scope.context=this.gridOptionsWrapper.getContext());var b=this.createParams(a);a.filter.init(b);var c=document.createElement("div");c.className="ag-filter";var d=a.filter.getGui();"string"==typeof d&&(d=f.Utils.loadTemplate(d)),c.appendChild(d),a.scope?a.gui=this.$compile(c)(a.scope)[0]:a.gui=c},a.prototype.getFilterFromCache=function(a){var b=this.enterprise?"set":"text",c=this.availableFilters[b];return f.Utils.missing(a)?c:(this.enterprise||"set"!==a||(console.warn("ag-Grid: Set filter is only available in Enterprise ag-Grid"),a="text"),this.availableFilters[a]?this.availableFilters[a]:(console.error("ag-Grid: Could not find filter type "+a),this.availableFilters[c]))},a.prototype.onNewColumnsLoaded=function(){this.destroy()},a.prototype.destroyFilter=function(a){var b=this.allFilters[a.getColId()];b&&(this.disposeFilterWrapper(b),this.onFilterChanged())},a.prototype.disposeFilterWrapper=function(a){a.filter.setModel(null),a.filter.destroy&&a.filter.destroy(),a.column.setFilterActive(!1),delete this.allFilters[a.column.getColId()]},a.prototype.destroy=function(){var a=this;f.Utils.iterateObject(this.allFilters,function(b,c){a.disposeFilterWrapper(c)})},a.prototype.assertMethodHasNoParameters=function(a){f.Utils.getFunctionParameters(a).length>0&&(console.warn("ag-grid: It looks like your filter is of the old type and expecting parameters in the constructor."),console.warn("ag-grid: From ag-grid 1.14, the constructor should take no parameters and init() used instead."))},a.QUICK_FILTER_SEPARATOR="\n",d([m.Autowired("$compile"),e("design:type",Object)],a.prototype,"$compile",void 0),d([m.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([m.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([m.Autowired("gridCore"),e("design:type",Object)],a.prototype,"gridCore",void 0),d([m.Autowired("popupService"),e("design:type",h.PopupService)],a.prototype,"popupService",void 0),d([m.Autowired("valueService"),e("design:type",i.ValueService)],a.prototype,"valueService",void 0),d([m.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([m.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([m.Autowired("eventService"),e("design:type",n.EventService)],a.prototype,"eventService",void 0),d([m.Autowired("enterprise"),e("design:type",Boolean)],a.prototype,"enterprise",void 0),d([m.Autowired("context"),e("design:type",m.Context)],a.prototype,"context",void 0),d([m.Autowired("componentProvider"),e("design:type",q.ComponentProvider)],a.prototype,"componentProvider",void 0),d([m.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([m.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=b=d([m.Bean("filterManager")],a);var b}();b.FilterManager=r},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(7),g=c(8),h=c(6),i=c(37),j=c(3),k=function(){function a(){}return a.prototype.getPopupParent=function(){return this.gridCore.getRootGui()},a.prototype.positionPopupForMenu=function(a){function b(){return d.right-e.left-2}function c(){return d.left-e.left-h}var d=a.eventSource.getBoundingClientRect(),e=this.getPopupParent().getBoundingClientRect(),f=d.top-e.top;f=this.keepYWithinBounds(a,f);var g,h=a.ePopup.clientWidth>0?a.ePopup.clientWidth:200,i=e.right-e.left,j=i-h;this.gridOptionsWrapper.isEnableRtl()?(g=c(),g<0&&(g=b()),g>j&&(g=0)):(g=b(),g>j&&(g=c()),g<0&&(g=0)),a.ePopup.style.left=g+"px",a.ePopup.style.top=f+"px"},a.prototype.positionPopupUnderMouseEvent=function(a){var b=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:a.ePopup,x:a.mouseEvent.clientX-b.left,y:a.mouseEvent.clientY-b.top,keepWithinBounds:!0}),this.callPostProcessPopup(a.ePopup,null,a.mouseEvent,a.type,a.column,a.rowNode)},a.prototype.positionPopupUnderComponent=function(a){var b=a.eventSource.getBoundingClientRect(),c=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:a.ePopup,minWidth:a.minWidth,nudgeX:a.nudgeX,nudgeY:a.nudgeY,x:b.left-c.left,y:b.top-c.top+b.height,keepWithinBounds:a.keepWithinBounds}),this.callPostProcessPopup(a.ePopup,a.eventSource,null,a.type,a.column,a.rowNode)},a.prototype.callPostProcessPopup=function(a,b,c,d,e,f){var g=this.gridOptionsWrapper.getPostProcessPopupFunc();if(g){g({column:e,rowNode:f,ePopup:a,type:d,eventSource:b,mouseEvent:c})}},a.prototype.positionPopupOverComponent=function(a){var b=a.eventSource.getBoundingClientRect(),c=this.getPopupParent().getBoundingClientRect();this.positionPopup({ePopup:a.ePopup,minWidth:a.minWidth,nudgeX:a.nudgeX,nudgeY:a.nudgeY,x:b.left-c.left,y:b.top-c.top,keepWithinBounds:a.keepWithinBounds}),this.callPostProcessPopup(a.ePopup,a.eventSource,null,a.type,a.column,a.rowNode)},a.prototype.positionPopup=function(a){var b=a.x,c=a.y;a.nudgeX&&(b+=a.nudgeX),a.nudgeY&&(c+=a.nudgeY),a.keepWithinBounds&&(b=this.keepXWithinBounds(a,b),c=this.keepYWithinBounds(a,c)),a.ePopup.style.left=b+"px",a.ePopup.style.top=c+"px"},a.prototype.keepYWithinBounds=function(a,b){var c,d=this.getPopupParent().getBoundingClientRect();c=a.ePopup.clientHeight>0?a.ePopup.clientHeight:200;var e=d.bottom-d.top,f=e-c-5;return b>f?f:b<0?0:b},a.prototype.keepXWithinBounds=function(a,b){var c,d=this.getPopupParent().getBoundingClientRect();c=a.minWidth>0?a.minWidth:a.ePopup.clientWidth>0?a.ePopup.clientWidth:200;var e=d.right-d.left,f=e-c-5;return b>f?f:b<0?0:b},a.prototype.addAsModalPopup=function(a,b,c){function d(a){(a.which||a.keyCode)===g.Constants.KEY_ESCAPE&&e(null)}function e(b){b&&b===m||b&&b===n||l||(l=!0,k.getPopupParent().removeChild(a),j.removeEventListener("keydown",d),j.removeEventListener("click",e),j.removeEventListener("touchstart",e),j.removeEventListener("contextmenu",e),a.removeEventListener("click",h),a.removeEventListener("touchstart",i),c&&c())}function h(a){m=a}function i(a){n=a}var j=document.body;if(!j)return void console.warn("ag-grid: could not find the body of the document, document.body is empty");if(a.style.top="0px",a.style.left="0px",!f.Utils.isVisible(a)){this.getPopupParent().appendChild(a);var k=this,l=!1;setTimeout(function(){b&&j.addEventListener("keydown",d),j.addEventListener("click",e),j.addEventListener("touchstart",e),j.addEventListener("contextmenu",e),a.addEventListener("click",h),a.addEventListener("touchstart",i)},0);var m=null,n=null;return e}},d([h.Autowired("gridCore"),e("design:type",i.GridCore)],a.prototype,"gridCore",void 0),d([h.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([h.Bean("popupService")],a)}();b.PopupService=k},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(41),i=c(44),j=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.getDefaultType=function(){return h.BaseFilter.CONTAINS},b.prototype.customInit=function(){this.comparator=this.filterParams.textCustomComparator?this.filterParams.textCustomComparator:b.DEFAULT_COMPARATOR,this.formatter=this.filterParams.textFormatter?this.filterParams.textFormatter:b.DEFAULT_FORMATTER,a.prototype.customInit.call(this)},b.prototype.modelFromFloatingFilter=function(a){return{type:this.filter,filter:a,filterType:"text"}},b.prototype.getApplicableFilterTypes=function(){return[h.BaseFilter.EQUALS,h.BaseFilter.NOT_EQUAL,h.BaseFilter.STARTS_WITH,h.BaseFilter.ENDS_WITH,h.BaseFilter.CONTAINS,h.BaseFilter.NOT_CONTAINS]},b.prototype.bodyTemplate=function(){return'<div class="ag-filter-body">\n            <input class="ag-filter-filter" id="filterText" type="text" placeholder="'+this.translate.bind(this)("filterOoo","Filter...")+'"/>\n        </div>'},b.prototype.initialiseFilterBodyUi=function(){a.prototype.initialiseFilterBodyUi.call(this);var b=null!=this.filterParams.debounceMs?this.filterParams.debounceMs:500,c=g.Utils.debounce(this.onFilterTextFieldChanged.bind(this),b);this.addDestroyableEventListener(this.eFilterTextField,"input",c)},b.prototype.refreshFilterBodyUi=function(){},b.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()},b.prototype.filterValues=function(){return this.filterText},b.prototype.doesFilterPass=function(a){if(!this.filterText)return!0;var b=this.filterParams.valueGetter(a.node);if(!b)return this.filter===h.BaseFilter.NOT_EQUAL;var c=this.formatter(b);return this.comparator(this.filter,c,this.filterText)},b.prototype.onFilterTextFieldChanged=function(){var a=g.Utils.makeNull(this.eFilterTextField.value);if(a&&""===a.trim()&&(a=null),this.filterText!==a){var b=a?a.toLowerCase():null,c=this.filterText?this.filterText.toLowerCase():null;this.filterText=this.formatter(a),c!==b&&this.onFilterChanged()}},b.prototype.setFilter=function(a){a=g.Utils.makeNull(a),a?(this.filterText=this.formatter(a),this.eFilterTextField.value=a):(this.filterText=null,this.eFilterTextField.value=null)},b.prototype.getFilter=function(){return this.filterText},b.prototype.resetState=function(){this.setFilter(null),this.setFilterType(h.BaseFilter.CONTAINS)},b.prototype.serialize=function(){return{type:this.filter?this.filter:this.defaultFilter,filter:this.filterText,filterType:"text"}},b.prototype.parse=function(a){this.setFilterType(a.type),this.setFilter(a.filter)},b.prototype.setType=function(a){this.setFilterType(a)},b.DEFAULT_FORMATTER=function(a){return null==a?null:a.toString().toLowerCase()},b.DEFAULT_COMPARATOR=function(a,c,d){switch(a){case b.CONTAINS:return c.indexOf(d)>=0;case b.NOT_CONTAINS:return-1===c.indexOf(d);case b.EQUALS:return c===d;case b.NOT_EQUAL:return c!=d;case b.STARTS_WITH:return 0===c.indexOf(d);case b.ENDS_WITH:var e=c.lastIndexOf(d);return e>=0&&e===c.length-d.length;default:return console.warn("invalid filter type "+a),!1}},e([i.QuerySelector("#filterText"),f("design:type",HTMLInputElement)],b.prototype,"eFilterTextField",void 0),b}(h.ComparableBaseFilter);b.TextFilter=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(44),i=c(6),j=c(3),k=c(7),l={equals:"Equals",notEqual:"Not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"In range",lessThanOrEqual:"Less than or equals",greaterThanOrEqual:"Greater than or equals",filterOoo:"Filter...",contains:"Contains",notContains:"Not contains",startsWith:"Starts with",endsWith:"Ends with",searchOoo:"Search...",selectAll:"Select All",applyFilter:"Apply Filter",clearFilter:"Clear Filter"},m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(a){this.filterParams=a,this.defaultFilter=this.filterParams.defaultOption,this.filterParams.filterOptions&&this.filterParams.filterOptions.lastIndexOf(b.EQUALS)<0&&(this.defaultFilter=this.filterParams.filterOptions[0]),this.customInit(),this.filter=this.defaultFilter,this.clearActive=!0===a.clearButton,this.applyActive=!0===a.applyButton||!0===a.apply,this.newRowsActionKeep="keep"===a.newRowsAction,this.setTemplate(this.generateTemplate()),k._.setVisible(this.eApplyButton,this.applyActive),this.applyActive&&this.addDestroyableEventListener(this.eApplyButton,"click",this.filterParams.filterChangedCallback),k._.setVisible(this.eClearButton,this.clearActive),this.clearActive&&this.addDestroyableEventListener(this.eClearButton,"click",this.onClearButton.bind(this));var c=this.applyActive||this.clearActive;k._.setVisible(this.eButtonsPanel,c),this.instantiate(this.context),this.initialiseFilterBodyUi(),this.refreshFilterBodyUi()},b.prototype.onClearButton=function(){this.setModel(null),this.onFilterChanged()},b.prototype.floatingFilter=function(a){if(""!==a){var b=this.modelFromFloatingFilter(a);this.setModel(b)}else this.resetState();this.onFilterChanged()},b.prototype.onNewRowsLoaded=function(){this.newRowsActionKeep||this.resetState()},b.prototype.getModel=function(){return this.isFilterActive()?this.serialize():null},b.prototype.getNullableModel=function(){return this.serialize()},b.prototype.setModel=function(a){a?this.parse(a):this.resetState(),this.refreshFilterBodyUi()},b.prototype.doOnFilterChanged=function(a){void 0===a&&(a=!1),this.filterParams.filterModifiedCallback();var b=this.applyActive&&a,c=!this.applyActive,d=c||b;return d&&this.filterParams.filterChangedCallback(),this.refreshFilterBodyUi(),d},b.prototype.onFilterChanged=function(){this.doOnFilterChanged()},b.prototype.onFloatingFilterChanged=function(a){var b=a;return this.setModel(b?b.model:null),this.doOnFilterChanged(!!b&&b.apply)},b.prototype.generateFilterHeader=function(){return""},b.prototype.generateTemplate=function(){var a=this.translate.bind(this),b=this.bodyTemplate();return"<div>\n                    "+this.generateFilterHeader()+"\n                    "+b+'\n                    <div class="ag-filter-apply-panel" id="applyPanel">\n                        <button type="button" id="clearButton">'+a("clearFilter")+'</button>\n                        <button type="button" id="applyButton">'+a("applyFilter")+"</button>\n                    </div>\n                </div>"},b.prototype.translate=function(a){return this.gridOptionsWrapper.getLocaleTextFunc()(a,l[a])},b.EQUALS="equals",b.NOT_EQUAL="notEqual",b.LESS_THAN="lessThan",b.LESS_THAN_OR_EQUAL="lessThanOrEqual",b.GREATER_THAN="greaterThan",b.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",b.IN_RANGE="inRange",b.CONTAINS="contains",b.NOT_CONTAINS="notContains",b.STARTS_WITH="startsWith",b.ENDS_WITH="endsWith",e([h.QuerySelector("#applyPanel"),f("design:type",HTMLElement)],b.prototype,"eButtonsPanel",void 0),e([h.QuerySelector("#applyButton"),f("design:type",HTMLElement)],b.prototype,"eApplyButton",void 0),e([h.QuerySelector("#clearButton"),f("design:type",HTMLElement)],b.prototype,"eClearButton",void 0),e([i.Autowired("context"),f("design:type",i.Context)],b.prototype,"context",void 0),e([i.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(g.Component);b.BaseFilter=m;var n=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(b){a.prototype.init.call(this,b),this.addDestroyableEventListener(this.eTypeSelector,"change",this.onFilterTypeChanged.bind(this))},b.prototype.customInit=function(){this.defaultFilter||(this.defaultFilter=this.getDefaultType())},b.prototype.generateFilterHeader=function(){var a=this,b=this.getApplicableFilterTypes(),c=this.filterParams.filterOptions,d=c||b,e=d.map(function(b){return'<option value="'+b+'">'+a.translate(b)+"</option>"}),f=1==e.length?"disabled":"";return e.length<=0?"":'<div>\n                <select class="ag-filter-select" id="filterType" '+f+">\n                    "+e.join("")+"\n                </select>\n            </div>"},b.prototype.initialiseFilterBodyUi=function(){this.setFilterType(this.filter)},b.prototype.onFilterTypeChanged=function(){this.filter=this.eTypeSelector.value,this.refreshFilterBodyUi(),this.onFilterChanged()},b.prototype.isFilterActive=function(){var a=this.filterValues();if(this.filter===m.IN_RANGE){var b=a;return null!=b[0]&&null!=b[1]}return null!=a},b.prototype.setFilterType=function(a){this.filter=a,this.eTypeSelector.value=a},e([h.QuerySelector("#filterType"),f("design:type",HTMLSelectElement)],b.prototype,"eTypeSelector",void 0),b}(m);b.ComparableBaseFilter=n;var o=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.getDefaultType=function(){return m.EQUALS},b.prototype.doesFilterPass=function(a){var b=this.filterParams.valueGetter(a.node),c=this.comparator(),d=this.filterValues(),e=Array.isArray(d)?d[0]:d;if(null==e)return!0;var f=c(e,b);if(this.filter===m.EQUALS)return 0===f;if(this.filter===m.GREATER_THAN)return f>0;if(this.filter===m.GREATER_THAN_OR_EQUAL)return f>=0&&null!=b;if(this.filter===m.LESS_THAN_OR_EQUAL)return f<=0&&null!=b;if(this.filter===m.LESS_THAN)return f<0;if(this.filter===m.NOT_EQUAL)return 0!=f;var g=c(d[1],b);if(this.filter===m.IN_RANGE)return this.filterParams.inRangeInclusive?f>=0&&g<=0:f>0&&g<0;throw new Error("Unexpected type of date filter!: "+this.filter)},b}(n);b.ScalarBaseFilter=o},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(7),f=c(43),g=function(a){function b(b){var c=a.call(this)||this;return c.childComponents=[],c.annotatedEventListeners=[],c.visible=!0,b&&c.setTemplate(b),c}return d(b,a),b.prototype.instantiate=function(a){this.instantiateRecurse(this.getGui(),a)},b.prototype.instantiateRecurse=function(a,b){for(var c=a.childNodes?a.childNodes.length:0,d=0;d<c;d++){var e=a.childNodes[d],f=b.createComponent(e);f?this.swapComponentForNode(f,a,e):e.childNodes&&this.instantiateRecurse(e,b)}},b.prototype.swapComponentForNode=function(a,b,c){b.replaceChild(a.getGui(),c),this.childComponents.push(a),this.swapInComponentForQuerySelectors(a,c)},b.prototype.swapInComponentForQuerySelectors=function(a,b){for(var c=this.__proto__,d=this;null!=c;){var e=c.__agComponentMetaData,f=c.constructor.name;e&&e[f]&&e[f].querySelectors&&e[f].querySelectors.forEach(function(c){d[c.attributeName]===b&&(d[c.attributeName]=a)}),c=c.__proto__}},b.prototype.setTemplate=function(a){var b=e.Utils.loadTemplate(a);this.setTemplateFromElement(b)},b.prototype.setTemplateFromElement=function(a){this.eGui=a,this.eGui.__agComponent=this,this.addAnnotatedEventListeners(),this.wireQuerySelectors()},b.prototype.attributesSet=function(){},b.prototype.wireQuerySelectors=function(){var a=this;if(this.eGui)for(var b=this.__proto__,c=this;null!=b;)!function(){var d=b.__agComponentMetaData,e=b.constructor.name;if(d&&d[e]&&d[e].querySelectors){var f=c;d[e].querySelectors.forEach(function(b){var c=a.eGui.querySelector(b.querySelector);if(c){var d=c.__agComponent;f[b.attributeName]=d||c}})}b=b.__proto__}()},b.prototype.addAnnotatedEventListeners=function(){var a=this;if(this.removeAnnotatedEventListeners(),this.eGui)for(var b=this.__proto__;null!=b;){var c=b.__agComponentMetaData,d=b.constructor.name;c&&c[d]&&c[d].listenerMethods&&(this.annotatedEventListeners||(this.annotatedEventListeners=[]),c[d].listenerMethods.forEach(function(b){var c=a[b.methodName].bind(a);a.eGui.addEventListener(b.eventName,c),a.annotatedEventListeners.push({eventName:b.eventName,listener:c})})),b=b.__proto__}},b.prototype.removeAnnotatedEventListeners=function(){var a=this;this.annotatedEventListeners&&this.eGui&&(this.annotatedEventListeners.forEach(function(b){a.eGui.removeEventListener(b.eventName,b.listener)}),this.annotatedEventListeners=null)},b.prototype.getGui=function(){return this.eGui},b.prototype.setGui=function(a){this.eGui=a},b.prototype.queryForHtmlElement=function(a){return this.eGui.querySelector(a)},b.prototype.queryForHtmlInputElement=function(a){return this.eGui.querySelector(a)},b.prototype.appendChild=function(a){if(e.Utils.isNodeOrElement(a))this.eGui.appendChild(a);else{var b=a;this.eGui.appendChild(b.getGui()),this.childComponents.push(b)}},b.prototype.addFeature=function(a,b){a.wireBean(b),b.destroy&&this.addDestroyFunc(b.destroy.bind(b))},b.prototype.isVisible=function(){return this.visible},b.prototype.setVisible=function(a){
a!==this.visible&&(this.visible=a,e.Utils.addOrRemoveCssClass(this.eGui,"ag-hidden",!a),this.dispatchEvent(b.EVENT_VISIBLE_CHANGED,{visible:this.visible}))},b.prototype.addOrRemoveCssClass=function(a,b){e.Utils.addOrRemoveCssClass(this.eGui,a,b)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.childComponents.forEach(function(a){return a.destroy()}),this.childComponents.length=0,this.removeAnnotatedEventListeners()},b.prototype.addGuiEventListener=function(a,b){var c=this;this.getGui().addEventListener(a,b),this.addDestroyFunc(function(){return c.getGui().removeEventListener(a,b)})},b.prototype.addCssClass=function(a){e.Utils.addCssClass(this.getGui(),a)},b.prototype.removeCssClass=function(a){e.Utils.removeCssClass(this.getGui(),a)},b.prototype.getAttribute=function(a){var b=this.getGui();return b?b.getAttribute(a):null},b.prototype.getRefElement=function(a){return this.queryForHtmlElement('[ref="'+a+'"]')},b.EVENT_VISIBLE_CHANGED="visibleChanged",b}(f.BeanStub);b.Component=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(4),e=c(3),f=c(7),g=function(){function a(){this.destroyFunctions=[]}return a.prototype.destroy=function(){this.destroyFunctions.forEach(function(a){return a()}),this.destroyFunctions.length=0},a.prototype.addEventListener=function(a,b){this.localEventService||(this.localEventService=new d.EventService),this.localEventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.localEventService&&this.localEventService.removeEventListener(a,b)},a.prototype.dispatchEventAsync=function(a,b){var c=this;setTimeout(function(){return c.dispatchEvent(a,b)},0)},a.prototype.dispatchEvent=function(a,b){this.localEventService&&this.localEventService.dispatchEvent(a,b)},a.prototype.addDestroyableEventListener=function(a,b,c){a instanceof HTMLElement?f._.addSafePassiveEventListener(a,b,c):(e.GridOptionsWrapper,a.addEventListener(b,c)),this.destroyFunctions.push(function(){a instanceof HTMLElement?a.removeEventListener(b,c):(e.GridOptionsWrapper,a.removeEventListener(b,c))})},a.prototype.addDestroyFunc=function(a){this.destroyFunctions.push(a)},a}();b.BeanStub=g},function(a,b){"use strict";function c(a){return e.bind(this,a)}function d(a){return e.bind(this,"[ref="+a+"]")}function e(a,b,c,d){if(null===a)return void console.error("ag-Grid: QuerySelector selector should not be null");if("number"==typeof d)return void console.error("ag-Grid: QuerySelector should be on an attribute");var e=h(b,b.constructor.name);e.querySelectors||(e.querySelectors=[]),e.querySelectors.push({attributeName:c,querySelector:a})}function f(a){return g.bind(this,a)}function g(a,b,c,d){if(null===a)return void console.error("ag-Grid: EventListener eventName should not be null");var e=h(b,b.constructor.name);e.listenerMethods||(e.listenerMethods=[]),e.listenerMethods.push({methodName:c,eventName:a})}function h(a,b){return a.__agComponentMetaData||(a.__agComponentMetaData={}),a.__agComponentMetaData[b]||(a.__agComponentMetaData[b]={}),a.__agComponentMetaData[b]}Object.defineProperty(b,"__esModule",{value:!0}),b.QuerySelector=c,b.RefSelector=d,b.Listener=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(44),i=c(41),j=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.modelFromFloatingFilter=function(a){return{type:this.filter,filter:Number(a),filterTo:this.filterNumberTo,filterType:"number"}},b.prototype.getApplicableFilterTypes=function(){return[i.BaseFilter.EQUALS,i.BaseFilter.NOT_EQUAL,i.BaseFilter.LESS_THAN,i.BaseFilter.LESS_THAN_OR_EQUAL,i.BaseFilter.GREATER_THAN,i.BaseFilter.GREATER_THAN_OR_EQUAL,i.BaseFilter.IN_RANGE]},b.prototype.bodyTemplate=function(){var a=this.translate.bind(this);return'<div class="ag-filter-body">\n            <div>\n                <input class="ag-filter-filter" id="filterText" type="text" placeholder="'+a("filterOoo")+'"/>\n            </div>\n             <div class="ag-filter-number-to" id="filterNumberToPanel">\n                <input class="ag-filter-filter" id="filterToText" type="text" placeholder="'+a("filterOoo")+'"/>\n            </div>\n        </div>'},b.prototype.initialiseFilterBodyUi=function(){this.filterNumber=null,this.eFilterTextField=this.getGui().querySelector("#filterText");var a=null!=this.filterParams.debounceMs?this.filterParams.debounceMs:500,b=g.Utils.debounce(this.onTextFieldsChanged.bind(this),a);this.addDestroyableEventListener(this.eFilterTextField,"input",b),this.addDestroyableEventListener(this.eFilterToTextField,"input",b)},b.prototype.afterGuiAttached=function(){this.eFilterTextField.focus()},b.prototype.comparator=function(){return function(a,b){return a===b?0:a<b?1:a>b?-1:void 0}},b.prototype.onTextFieldsChanged=function(){var a=this.stringToFloat(this.eFilterTextField.value),b=this.stringToFloat(this.eFilterToTextField.value);this.filterNumber===a&&this.filterNumberTo===b||(this.filterNumber=a,this.filterNumberTo=b,this.onFilterChanged())},b.prototype.filterValues=function(){return this.filter!==i.BaseFilter.IN_RANGE?this.asNumber(this.filterNumber):[this.asNumber(this.filterNumber),this.asNumber(this.filterNumberTo)]},b.prototype.asNumber=function(a){return g.Utils.isNumeric(a)?a:null},b.prototype.stringToFloat=function(a){var b=g.Utils.makeNull(a);b&&""===b.trim()&&(b=null);return null!==b&&void 0!==b?parseFloat(b):null},b.prototype.setFilter=function(a){a=g.Utils.makeNull(a),null!==a&&"number"!=typeof a&&(a=parseFloat(a)),this.filterNumber=a,this.eFilterTextField.value=a},b.prototype.setFilterTo=function(a){a=g.Utils.makeNull(a),null!==a&&"number"!=typeof a&&(a=parseFloat(a)),this.filterNumberTo=a,this.eFilterToTextField.value=a},b.prototype.getFilter=function(){return this.filterNumber},b.prototype.serialize=function(){return{type:this.filter?this.filter:this.defaultFilter,filter:this.filterNumber,filterTo:this.filterNumberTo,filterType:"number"}},b.prototype.parse=function(a){this.setFilterType(a.type),this.setFilter(a.filter),this.setFilterTo(a.filterTo)},b.prototype.refreshFilterBodyUi=function(){var a=this.filter===b.IN_RANGE;g.Utils.setVisible(this.eNumberToPanel,a)},b.prototype.resetState=function(){this.setFilterType(i.BaseFilter.EQUALS),this.setFilter(null),this.setFilterTo(null)},b.prototype.setType=function(a){this.setFilterType(a)},b.LESS_THAN="lessThan",e([h.QuerySelector("#filterNumberToPanel"),f("design:type",HTMLElement)],b.prototype,"eNumberToPanel",void 0),e([h.QuerySelector("#filterToText"),f("design:type",HTMLInputElement)],b.prototype,"eFilterToTextField",void 0),b}(i.ScalarBaseFilter);b.NumberFilter=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(44),i=c(7),j=c(41),k=c(6),l=c(47),m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.modelFromFloatingFilter=function(a){return{dateFrom:a,dateTo:this.getDateTo(),type:this.filter,filterType:"date"}},b.prototype.getApplicableFilterTypes=function(){return[j.BaseFilter.EQUALS,j.BaseFilter.GREATER_THAN,j.BaseFilter.LESS_THAN,j.BaseFilter.NOT_EQUAL,j.BaseFilter.IN_RANGE]},b.prototype.bodyTemplate=function(){return'<div class="ag-filter-body">\n                    <div class="ag-filter-date-from" id="filterDateFromPanel">\n                    </div>\n                    <div class="ag-filter-date-to" id="filterDateToPanel">\n                    </div>\n                </div>'},b.prototype.initialiseFilterBodyUi=function(){var a={onDateChanged:this.onDateChanged.bind(this)};this.dateToComponent=this.componentProvider.newDateComponent(a),this.dateFromComponent=this.componentProvider.newDateComponent(a),this.eDateFromPanel.appendChild(this.dateFromComponent.getGui()),this.eDateToPanel.appendChild(this.dateToComponent.getGui()),this.dateFromComponent.afterGuiAttached&&this.dateFromComponent.afterGuiAttached(),this.dateToComponent.afterGuiAttached&&this.dateToComponent.afterGuiAttached()},b.prototype.onDateChanged=function(){this.dateFrom=b.removeTimezone(this.dateFromComponent.getDate()),this.dateTo=b.removeTimezone(this.dateToComponent.getDate()),this.onFilterChanged()},b.prototype.refreshFilterBodyUi=function(){var a=this.filter===j.BaseFilter.IN_RANGE;i.Utils.setVisible(this.eDateToPanel,a)},b.prototype.comparator=function(){return this.filterParams.comparator?this.filterParams.comparator:this.defaultComparator.bind(this)},b.prototype.defaultComparator=function(a,b){var c=b;return c<a?-1:c>a?1:0},b.prototype.serialize=function(){return{dateTo:i.Utils.serializeDateToYyyyMmDd(this.dateToComponent.getDate(),"-"),dateFrom:i.Utils.serializeDateToYyyyMmDd(this.dateFromComponent.getDate(),"-"),type:this.filter?this.filter:this.defaultFilter,filterType:"date"}},b.prototype.filterValues=function(){return this.filter!==j.BaseFilter.IN_RANGE?this.dateFromComponent.getDate():[this.dateFromComponent.getDate(),this.dateToComponent.getDate()]},b.prototype.getDateFrom=function(){return i.Utils.serializeDateToYyyyMmDd(this.dateFromComponent.getDate(),"-")},b.prototype.getDateTo=function(){return i.Utils.serializeDateToYyyyMmDd(this.dateToComponent.getDate(),"-")},b.prototype.getFilterType=function(){return this.filter},b.prototype.setDateFrom=function(a){this.dateFrom=i.Utils.parseYyyyMmDdToDate(a,"-"),this.dateFromComponent.setDate(this.dateFrom)},b.prototype.setDateTo=function(a){this.dateTo=i.Utils.parseYyyyMmDdToDate(a,"-"),this.dateToComponent.setDate(this.dateTo)},b.prototype.resetState=function(){this.setDateFrom(null),this.setDateTo(null),this.setFilterType("equals")},b.prototype.parse=function(a){this.setDateFrom(a.dateFrom),this.setDateTo(a.dateTo),this.setFilterType(a.type)},b.prototype.setType=function(a){this.setFilterType(a)},b.removeTimezone=function(a){return a?new Date(a.getFullYear(),a.getMonth(),a.getDate()):null},e([k.Autowired("componentProvider"),f("design:type",l.ComponentProvider)],b.prototype,"componentProvider",void 0),e([h.QuerySelector("#filterDateFromPanel"),f("design:type",HTMLElement)],b.prototype,"eDateFromPanel",void 0),e([h.QuerySelector("#filterDateToPanel"),f("design:type",HTMLElement)],b.prototype,"eDateToPanel",void 0),b}(j.ScalarBaseFilter);b.DateFilter=m;var n=function(a){function b(){return a.call(this,'<input class="ag-filter-filter" type="text" placeholder="yyyy-mm-dd">')||this}return d(b,a),b.prototype.init=function(a){this.eDateInput=this.getGui(),i.Utils.isBrowserChrome()&&(this.eDateInput.type="date"),this.listener=a.onDateChanged,this.addGuiEventListener("input",this.listener)},b.prototype.getDate=function(){return i.Utils.parseYyyyMmDdToDate(this.eDateInput.value,"-")},b.prototype.setDate=function(a){this.eDateInput.value=i.Utils.serializeDateToYyyyMmDd(a,"-")},b}(g.Component);b.DefaultDateComponent=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(6),h=c(48),i=c(51),j=c(46),k=c(7),l=c(53),m=c(3),n=c(54),o=c(38);!function(a){a[a.AG_GRID=0]="AG_GRID",a[a.FRAMEWORK=1]="FRAMEWORK"}(f||(f={}));var p=function(){function a(){}return a.prototype.postContruct=function(){this.allComponentConfig={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:[],defaultComponent:j.DefaultDateComponent},headerComponent:{mandatoryMethodList:[],optionalMethodList:[],defaultComponent:i.HeaderComp},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[],defaultComponent:h.HeaderGroupComp},setFloatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"],defaultComponent:l.SetFloatingFilterComp},textFloatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"],defaultComponent:l.TextFloatingFilterComp},numberFloatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"],defaultComponent:l.NumberFloatingFilterComp},dateFloatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"],defaultComponent:l.DateFloatingFilterComp},readModelAsStringFloatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"],defaultComponent:l.ReadModelAsStringFloatingFilterComp},floatingFilterWrapperComponent:{mandatoryMethodList:[],optionalMethodList:[],defaultComponent:n.FloatingFilterWrapperComp},emptyFloatingFilterWrapperComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"],defaultComponent:n.EmptyFloatingFilterWrapperComp},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached"],defaultComponent:null},filterComponent:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged"],defaultComponent:null}}},a.prototype.getComponentToUse=function(a,b,c,d){void 0===d&&(d=!0);var e=c.defaultComponent,g=a?a[b]:null,h=a?a[b+"Framework"]:null;if(g&&h)throw Error("You are trying to register: "+b+" twice.");if(h&&!this.frameworkComponentWrapper)throw Error("You are specifying a framework component but you are not using a framework version of ag-grid for : "+b);if(!h){var i=g||e;if(!i){if(d)throw Error("Unexpected error loading default component for: "+b+" default component not found.");return null}return{type:f.AG_GRID,component:i}}return{type:f.FRAMEWORK,component:h}},a.prototype.newAgGridComponent=function(a,b,c,d){void 0===d&&(d=!0);var e=this.allComponentConfig[c];if(!e){if(d)throw Error("Invalid component specified, there are no components of type : "+b+" ["+c+"]");return null}var g=this.getComponentToUse(a,b,e,d);if(!g)return null;if(g.type===f.AG_GRID)return new g.component;var h=g.component;return this.frameworkComponentWrapper.wrap(h,e.mandatoryMethodList,e.optionalMethodList)},a.prototype.createAgGridComponent=function(a,b,c,d,e){void 0===e&&(e=!0);var f=this.newAgGridComponent(a,b,c,e);if(!f)return null;var g=this.getParams(a,b,d);return this.context.wireBean(f),f.init(g),f},a.prototype.getParams=function(a,b,c){var d=a?a[b+"Params"]:null,e={};return k._.mergeDeep(e,c),k._.mergeDeep(e,d),e.api||(e.api=this.gridOptions.api),e},a.prototype.newDateComponent=function(a){return this.createAgGridComponent(this.gridOptions,"dateComponent","dateComponent",a)},a.prototype.newHeaderComponent=function(a){return this.createAgGridComponent(a.column.getColDef(),"headerComponent","headerComponent",a)},a.prototype.newHeaderGroupComponent=function(a){return this.createAgGridComponent(a.columnGroup.getColGroupDef(),"headerGroupComponent","headerGroupComponent",a)},a.prototype.newFloatingFilterComponent=function(a,b,c){var d="custom"===a?"floatingFilterComponent":a+"FloatingFilterComponent";return this.createAgGridComponent(b,"floatingFilterComponent",d,c,!1)},a.prototype.getFilterComponentPrototype=function(a){return this.getComponentToUse(a,"filterComponent",this.allComponentConfig.filterComponent,!1)},a.prototype.newFloatingFilterWrapperComponent=function(a,b){var c=this,d=a.getColDef();if(d.suppressFilter)return this.newEmptyFloatingFilterWrapperComponent(a);var e;e="string"==typeof d.filter?d.filter:d.filter?"custom":this.gridOptionsWrapper.isEnterprise()?"set":"text";var f=this.newFloatingFilterComponent(e,d,b),g={column:a,floatingFilterComp:f,suppressFilterButton:this.getParams(d,"floatingFilterComponent",b).suppressFilterButton};if(!f){var h=this.getFilterComponentPrototype(d);if(h&&!h.component.prototype.getModelAsString)return this.newEmptyFloatingFilterWrapperComponent(a);var i=b.currentParentModel;b.currentParentModel=function(){return c.filterManager.getFilterComponent(a).getModelAsString(i())},g.floatingFilterComp=this.newFloatingFilterComponent("readModelAsString",d,b)}return this.createAgGridComponent(d,"floatingFilterWrapperComponent","floatingFilterWrapperComponent",g)},a.prototype.newEmptyFloatingFilterWrapperComponent=function(a){var b={column:a,floatingFilterComp:null};return this.createAgGridComponent(a.getColDef(),"floatingFilterWrapperComponent","emptyFloatingFilterWrapperComponent",b)},d([g.Autowired("gridOptions"),e("design:type",Object)],a.prototype,"gridOptions",void 0),d([g.Autowired("gridOptionsWrapper"),e("design:type",m.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Autowired("filterManager"),e("design:type",o.FilterManager)],a.prototype,"filterManager",void 0),d([g.Autowired("context"),e("design:type",g.Context)],a.prototype,"context",void 0),d([g.Optional("frameworkComponentWrapper"),e("design:type",Object)],a.prototype,"frameworkComponentWrapper",void 0),d([g.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postContruct",null),a=d([g.Bean("componentProvider")],a)}();b.ComponentProvider=p},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(49),i=c(7),j=c(14),k=c(3),l=c(6),m=c(50),n=c(44),o=c(18),p=h.SvgFactory.getInstance(),q=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a,this.setupLabel(),this.addGroupExpandIcon(),this.params.columnGroup.isExpandable()?this.setupExpandIcons():this.removeExpandIcons()},b.prototype.setupExpandIcons=function(){this.addInIcon("columnGroupOpened","agOpened",p.createGroupExpandedIcon),this.addInIcon("columnGroupClosed","agClosed",p.createGroupContractedIcon),this.addTouchAndClickListeners(this.eCloseIcon),this.addTouchAndClickListeners(this.eOpenIcon),this.updateIconVisibilty(),this.addDestroyableEventListener(this.params.columnGroup.getOriginalColumnGroup(),o.OriginalColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibilty.bind(this))},b.prototype.addTouchAndClickListeners=function(a){var b=this,c=function(){var a=!b.params.columnGroup.isExpanded();b.columnController.setColumnGroupOpened(b.params.columnGroup,a)},d=new m.TouchListener(this.eCloseIcon);this.addDestroyableEventListener(d,m.TouchListener.EVENT_TAP,c),this.addDestroyFunc(function(){return d.destroy()}),this.addDestroyableEventListener(a,"click",c)},b.prototype.updateIconVisibilty=function(){var a=this.params.columnGroup.isExpanded();i.Utils.setVisible(this.eOpenIcon,!a),i.Utils.setVisible(this.eCloseIcon,a)},b.prototype.removeExpandIcons=function(){i.Utils.setVisible(this.eOpenIcon,!1),i.Utils.setVisible(this.eCloseIcon,!1)},b.prototype.addInIcon=function(a,b,c){var d=i.Utils.createIconNoSpan(a,this.gridOptionsWrapper,null,c);this.getRefElement(b).appendChild(d)},b.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return i.Utils.setVisible(this.eOpenIcon,!1),void i.Utils.setVisible(this.eCloseIcon,!1)},b.prototype.setupLabel=function(){if(this.params.displayName&&""!==this.params.displayName){i.Utils.isBrowserSafari()&&(this.getGui().style.display="table-cell");this.getRefElement("agLabel").innerHTML=this.params.displayName}},b.TEMPLATE='<div class="ag-header-group-cell-label"><span ref="agLabel" class="ag-header-group-text"></span><span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span><span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span></div>',e([l.Autowired("columnController"),f("design:type",j.ColumnController)],b.prototype,"columnController",void 0),e([l.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([n.RefSelector("agOpened"),f("design:type",HTMLElement)],b.prototype,"eOpenIcon",void 0),e([n.RefSelector("agClosed"),f("design:type",HTMLElement)],b.prototype,"eCloseIcon",void 0),b}(g.Component);b.HeaderGroupComp=q},function(a,b){"use strict";function c(a,b){var c=d(b),f=document.createElementNS(e,"polygon");return f.setAttribute("points",a),c.appendChild(f),c}function d(a){var b=document.createElementNS(e,"svg");return a>0?(b.setAttribute("width",a),b.setAttribute("height",a)):(b.setAttribute("width","10"),b.setAttribute("height","10")),b}Object.defineProperty(b,"__esModule",{value:!0});var e="http://www.w3.org/2000/svg",f=function(){function a(){}return a.getInstance=function(){return this.theInstance||(this.theInstance=new a),this.theInstance},a.prototype.createFilterSvg=function(){var a=d(),b=document.createElementNS(e,"polygon");return b.setAttribute("points","0,0 4,4 4,10 6,10 6,4 10,0"),b.setAttribute("class","ag-header-icon"),a.appendChild(b),a},a.prototype.createFilterSvg12=function(){var a=d(12),b=document.createElementNS(e,"polygon");return b.setAttribute("points","0,0 5,5 5,12 7,12 7,5 12,0"),b.setAttribute("class","ag-header-icon"),a.appendChild(b),a},a.prototype.createMenuSvg=function(){var a=document.createElementNS(e,"svg");return a.setAttribute("width","12"),a.setAttribute("height","12"),["0","5","10"].forEach(function(b){var c=document.createElementNS(e,"rect");c.setAttribute("y",b),c.setAttribute("width","12"),c.setAttribute("height","2"),c.setAttribute("class","ag-header-icon"),a.appendChild(c)}),a},a.prototype.createColumnsSvg12=function(){var a=d(12);return[0,4,8].forEach(function(b){[0,7].forEach(function(c){var d=document.createElementNS(e,"rect");d.setAttribute("y",b.toString()),d.setAttribute("x",c.toString()),d.setAttribute("width","5"),d.setAttribute("height","3"),d.setAttribute("class","ag-header-icon"),a.appendChild(d)})}),a},a.prototype.createArrowUpSvg=function(){return c("0,10 5,0 10,10")},a.prototype.createArrowLeftSvg=function(){return c("10,0 0,5 10,10")},a.prototype.createArrowDownSvg=function(){return c("0,0 5,10 10,0")},a.prototype.createArrowRightSvg=function(){return c("0,0 10,5 0,10")},a.prototype.createSmallArrowRightSvg=function(){return c("0,0 6,3 0,6",6)},a.prototype.createSmallArrowLeftSvg=function(){return c("6,0 0,3 6,6",6)},a.prototype.createSmallArrowDownSvg=function(){return c("0,0 3,6 6,0",6)},a.prototype.createArrowUpDownSvg=function(){var a=d(),b=document.createElementNS(e,"polygon");b.setAttribute("points","0,4 5,0 10,4"),a.appendChild(b);var c=document.createElementNS(e,"polygon");return c.setAttribute("points","0,6 5,10 10,6"),a.appendChild(c),a},a.getFromCacheOrCreate=function(a,b){var c=this.imageCache[a];return c||(c=document.createElement("img"),c.setAttribute("role","presentation"),c.src=b,this.imageCache[a]=c),c.cloneNode()},a.prototype.createFolderOpen=function(){return a.getFromCacheOrCreate("FolderOpen","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZpJREFUeNqkU0tLQkEUPjN3ShAzF66CaNGiaNEviFpLgbSpXf2ACIqgFkELaVFhtAratQ8qokU/oFVbMQtJvWpWGvYwtet9TWfu1QorvOGBb84M5/WdOTOEcw7tCKHBlT8sMIhr4BfLGXC4BrALM8QUoveHG9oPQ/NhwVCQbOjp0C5F6zDiwE7Aed/p5tKWruufTlY8bkqliqVN8wvH6wvhydWd5UYdkYCqqgaKotQTCEewnJuDBSqVmshOrWhKgCJVqeHcKtiGKdqTgGIOQmwGum7AxVUKinXKzX1/1y5Xp6g8gpe8iBxuGZhcKjyXQZIkmBkfczS62YnRQCKX75/b3t8QDNhD8QX83V5Ipe7Bybug2Pt5NJ7A4nEqGOQKT+Bzu0HTDNB1syUYYxCJy0kwzIRogb0rKjAiQVXXHLVQrqqvsZtsFu8hbyXwe73WeMQtO5GonJGxuiyeC+Oa4fF5PEirw9nbx9FdxtN5eMwkzcgRnoeCa9DVM/CvH/R2l+axkz3clQguOFjw1f+FUzEQCqJG2v3OHwIMAOW1JPnAAAJxAAAAAElFTkSuQmCC")},a.prototype.createFolderClosed=function(){return a.getFromCacheOrCreate("FolderClosed","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARlJREFUeNqsUz1PwzAUPDtOUASpYKkQVWcQA/+DhbLA32CoKAMSTAwgFsQfQWLoX4GRDFXGIiqiyk4e7wUWmg8phJPOtvzunc6WrYgIXaD06KKhij0eD2uqUxBeDC9OmcNKCYd7ujm7ryodXz5ong6UPpqcP9+O76y1vwS+7yOOY1jr0OttlQyiaB0n148TAyK9XFqkaboiSTEYDNnkDUkyKxkkiSQkzQbwsiyHcBXz+Tv6/W1m+QiSEDT1igTO5RBWYbH4rNwPw/AnQU5ek0EdCj33SgLjHEHYzoAkgfmHBDmZuktsQqHPvxN0MyCbbWjtIQjWWhlIj/QqtT+6QrSz+6ef9DF7VTwFzE2madnu5K2prt/5S4ABADcIlSf6Ag8YAAAAAElFTkSuQmCC")},a.prototype.createColumnIcon=function(){return a.getFromCacheOrCreate("ColumnIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAOCAYAAAAMn20lAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTcwQ0JFMzlENjZEMTFFNUFEQ0U5RDRCNjFFRENGMUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTcwQ0JFM0FENjZEMTFFNUFEQ0U5RDRCNjFFRENGMUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFNzBDQkUzN0Q2NkQxMUU1QURDRTlENEI2MUVEQ0YxQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFNzBDQkUzOEQ2NkQxMUU1QURDRTlENEI2MUVEQ0YxQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqDOrJYAAABxSURBVHjalJBBDsAgCAQXxXvj2/o/X9Cvmd4lUpV4MXroJMTAuihQSklVMSCysxSBW4uWKzjG6zZLDxrlWis5EVEThoWmi3N+nxAYs2WnXQY34L3HisMWPQlHB+2FPtNW6D/8+ziBRcroOXc0B/wEGABY6TPS1FU0bwAAAABJRU5ErkJggg==")},a.prototype.createColumnsIcon=function(){return a.getFromCacheOrCreate("ColumnsIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENFQkI4NDhENzJDMTFFNUJDNEVFRjgwRDI3MkU1Q0EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENFQkI4NDlENzJDMTFFNUJDNEVFRjgwRDI3MkU1Q0EiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0VCQjg0NkQ3MkMxMUU1QkM0RUVGODBEMjcyRTVDQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0VCQjg0N0Q3MkMxMUU1QkM0RUVGODBEMjcyRTVDQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj6ozGQAAAAuSURBVHjaYmRgYPjPgBswQml8anBK/idGDQsxNpCghnTAOBoGo2EwGgZgABBgAHbrH/l4grETAAAAAElFTkSuQmCC")},a.prototype.createPinIcon=function(){return a.getFromCacheOrCreate("PinIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAedJREFUeNqkUktLG1EYPTN31CIN0oWbIAWhKJR0FXcG6gOqkKGKVvEXCKULC91YSBcK7jXgQoIbFxn3ErFgFlIfCxUsQsCoIJYEm9LWNsGmJjPTM+Oo44Aa6IUzd+bec77H+UYyTRP/s5SsLFfCCxEjOhD9CXw64ccXJj7nLleYaMSvaa/+Au9Y73P3RUUBDIuXyaAxGu35A7xnkM57A7icCZXIO8/nkVleRn1/f9cv0xzjfVclFdi9N8ZivfnDQxQKBTwoFvFicLCVQSesJIpHMEY8dSqQWa54Eov1fF9ZQVHXsZNMblhnNE/wPmJPIX1zjOG2+fkgslnozHR2eopLcSIe3yoD48y45FbIxoVJNjimyMehoW3T58PvdBq53V18zeWwFo+vUfyBlCVvj0Li4/M1DnaAUtXCQkNDR4f/294eaoTAwdHRCROMWlzJZfC+1cKcJF07b5o+btWvV1eDyVBouyUcDj5UFDg924tVYtERpz0mCkmSulOp1GQgEIj0yvKPYiKBlwMDQXfPU47walEEmb8z0a5p2qaiKMPEoz6ezQLdM8DWNDDzltym24YthHimquoshSoDicvzZkK9S+h48pjCN4ZhrBPHTptlD0qevezwdCtAHVHrMti4A7rr3eb+E2AAoGnGkgkzpg8AAAAASUVORK5CYII=")},a.prototype.createPlusIcon=function(){return a.getFromCacheOrCreate("PlusIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAatJREFUeNqkU71KA0EQ/vaiib+lWCiordidpSg+QHwDBSt7n8DGhwhYCPoEgqCCINomARuLVIqgYKFG5f6z68xOzrvzYuXA3P7MzLffN7unjDH4jw3xx91bQXuxU4woNDjUX7VgsFOIH3/BnHgC0J65AzwFjDpZgoG7vb7lMsPDq6MiuK+B+kjGwFpCUjwK1DIQ3/dl0ssVh5TTM0UJP8aBgBKGleSGIWyP0oKYRm3KPSgYJ0Q0EpEgCASA2WmWZQY3kazBmjP9UhBFEbTWAgA0f9W2yHeG+vrd+tqGy5r5xNTT9erSqpvfdxwHN7fXOQZ0QhzH1oWArLsfXXieJ/KTGEZLcbVaTVn9ALTOLk9L+mYX5lxd0Xh6eGyVgspK6APwI8n3x9hmNpORJOuBo5ah8GcTc7dAHmkhNpYQlpHr47Hq2NspA1yEwHkoO/MVYLMmWJNarjEUQBzQw7rPvardFC8tZuOEwwB4p9PHqXgCdm738sUDJPB8mnwKj7qCTtJ527+XyAs6tOf2Bb6SP0OeGxRTVMp2h9nweWMoKS20l3+QT/vwqfZbgAEAUCrnlLQ+w4QAAAAASUVORK5CYII=")},a.prototype.createMinusIcon=function(){return a.getFromCacheOrCreate("MinusIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKVJREFUeNpi/P//PwMlgImBQjBqAAMDy3JGRgZGBoaZQGxMikZg3J0F4nSWHxC+cUBamvHXr18Zfv36Bca/f/8G43///oExKLphmImJieHagQMQF7QDiSwg/vnzJ8P3799RDPj79y+KRhhmBLr6I1DPNJABtxkYZM4xMFx7uXAhSX5/CtQD0gv0OgMfyCAgZgViZiL1/wXi30D8h3E0KVNuAECAAQDr51qtGxzf1wAAAABJRU5ErkJggg==")},a.prototype.createMoveIcon=function(){
return a.getFromCacheOrCreate("MoveIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAoZJREFUeNpsU81rE0EUf7uzu2lNVJL6Eb0IBWusepqcKm3wEFkvxqDgQbwUtYeeg5cccwj4F7QKChEPipRcdMGDiaAoJAexLYViwYsfbU1JYkx3Zz98b8220Wbg7ez7vXm/mffmN9Kh1G2QGQOmMDiRyYEkSaCoKjDGdAAooOUdxzFsIcDzPPhSvgeO7YDrOLBRmQdlJHULVE0DNRSCvqFjUuHqhWP8+etvhR5m0CeengVhmiAsywdl2Dt03K1wZSrO220XaCaf8AFrQel32s0mrDcaWfovrq3Vc9OTvHj/Tb0Xzh6JxQwNyxtIgPXpqqJk94fDM+1Oh6CaEF4QTiIOGJ/DdQtBObsEmGxbll/rkCyDPDwMzW4XhHD88EH0NcRxDUeX4/qdnsi0s8Aas+kEp8Zg82pMkmpDigKbjSbQTD7hFL94/jin9ZRHBNLo3Wrt+uUkbzQsiEZVMPGKfv76DaawodnahkhY86+PNnXxs77ZgVOjMahWVuufi1NJRZhWvvT0beHGtQn++Nm7en+DzqXO8vfVxX+wsYnT/JWxWEe95P0eILsvkkdPKn4PUEBJmunILab5992PLVU++skoNmOniT7JX2Fkt5GM1EjqbMohXzQmqo7KwCQ6zYKiabu30PpQAnZ0HKSRMcMRwnBddw4ZOO4GLRYKFFdDhrrteTMMdWB9/QTdH8sIp0EKmNT4GWDjGZAPJ3TcrbBv+ibfwtwDqBvzYck/truxYjjLZRDflwLt7JUmEoAymdPV7INa5IXn0Uw+4f8PIqATMLQIWpQ0E/RFTmQ4nLx0B1Zfzrsr5eAmbLQW2hYpHwkcqfegNBJhzwY9sGC4aCZaF81CAvePAAMAcwtApJX/Wo0AAAAASUVORK5CYII=")},a.prototype.createLeftIcon=function(){return a.getFromCacheOrCreate("LeftIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAe9JREFUeNqkUz1oE2EYfu7uuyRKLCFt6g+4VNQWWod+mQRRR1En0UFOHKoNCMKNju4SEQsOzsFNcRGl4CS42AzaKhKcsqhk0Etj7u+773y/6+USbOLSF5574b33eX+e906L4xh7MaYeC/c/IFcowMznEzDTBGPMoldnqEFtkPy708mIqvHHe0s7BcaYJYSwRwPu9vbYRH1XJI4tEYb2jYtHOHko9LvdxE9cYZQcBoF9+9oJ7jgRQt+HFAJSyv9rkO6UkGvXF3mr9QelkpkUINsYR6T8Jrkay8i+b9+5yfnmppMmSFw6e4yrIynBBsdS3jQ1PH/zeTiBIt+9dZpvbTlZh1+Oh/Z3F33XRUj7R1GUxA3DwMx0EYHnDUUMPe9Rfe1tc26uiL6M8aXno+UH6O7PIShPIapMQx6sQMxW4JbL+MkKCKhwNgGN2FD7Pnz82j63coF/aoc4ekDHtxfrzUniaZrW/FfEBomI9Scv7fnVq7zdBwIqajBWpeTd99d3vgBNCaQSzMOLyJ+6ApSPWxSzD61a/MfThupSjVuvxk2A3sazYYGBGbML0OcvW9rMyeRLFO8eVGXnKyacMiug5ikSplLs05dXzqNQWpbv6/URjpK+m6JH3GhQQI2QI+RTmBO0EwQ/RUBcqe31d/4rwAB0lPTXqN6HzgAAAABJRU5ErkJggg==")},a.prototype.createRightIcon=function(){return a.getFromCacheOrCreate("RightIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAfBJREFUeNqkUz1s00AU/hwSh1SEhiFCYuhCVSExgHRiYKjEVCEyMMGAsjCxZunesWM7dIgEA8JISPyoUhFDFoZOSE2GgtrSIAYWSEPb1HUS23c+8+7iuE5/JKQ+6fOdz/e+970fG2EY4jyWVo9b819hGEZ8WCgW4z2dV2lZFUJYgnNwz9PwXRebc3cGBMfN6XSQy+eHryyCMuv43dRpBCpSz7b1qlB+cI3RWkEYlv+LQFkgBLxuV8s9OAhQLk0w7vsnSHQKVMhqQuYRSRBouK5AqyXwpHSdvfywUYkKb8UEFIU9fXybOY6A+jbszGAP7O/7RBKg2eR4dH+KvV5ej0k0gaqobXO0214c3acUDnt99Pp9cKqDUqLsx68LuHd3gtU+b1eOCOiSaaZQKJjgMsSOy7EnJcSYCZnLwKbojic1weTVMXz81KhTexeSKdSXqrUzh2X84Qxr9SQmx1P48q6mnTPZrJUs4jMp5QlHlSd1Y203fRGFK8DPV28HzqZpjXShW3+D00bamCrpNU9DuvvcGsjea1rO+nvw39+AxRCGckyO8ciQFG8gPT27ptX8/b4gt1asYGdzRGE6MVCXCJcj5NShbG9B/NnYhttpyMYL5XmTYEdw1KgMFSgJJiEbIXNGPQXBi+CTrzTO+zv/E2AA3Y8Nbp4Kn1sAAAAASUVORK5CYII=")},a.prototype.createColumnVisibleIcon=function(){return a.getFromCacheOrCreate("ColumnVisibleIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAdhJREFUeNrUk01LAlEUhu845QdRUxZBhIIWtFBso2AwRAVNLqKltHCb63b9A/9AixZCELhyYdAmEyYCBcOlNa1CSQoxog/DMY3x9p5B27Zw1YGH8XrO+55759wROOdsmLCwIWNoAwFh/ugfZQKsAQV4gbNf9woqIAeuQHOgGxgIMNix2Wx7iqIsxmKxWU3TxgqFgpWSsix3fT5fK5VKPedyuftOp5OE7oz60hHsYD8UCh3k83k5k8ksGYYx5XK5rK2WzgiIrPQf5aiGakljakVRjKDrZaPR6Oi6zglVVTlFMnnMZXmdK8o2x674IE+1pCHtCFx2w+GwE9u3drtd81yJRAKdDXZ4eGSuFxb87PHxjg3yVEsaNNolg5NSqTTVbDaX7Agq8Hg8TFWLbGVl0xTY7TY2Our5NfhCQPNAWtFisdSr1WqvWCwawWBwRpKkcZyXadoN83qXmSQ50V1jGxurpnGlUqnH4/FzvItTmoo5ApjQNMIOh2MrEon4o9Gov1arzZXL5XHKBwKBT7fbXU+n07fZbPa23W5f4BVd93o9TgYimATTMHHCbB5PN9ZSf0LmrsEHRDWInvB8w/oFvAv920iFDkBzF/64fHTjvoFOxsL//5h+BBgAwjbgRLl5ImwAAAAASUVORK5CYII=")},a.prototype.createColumnHiddenIcon=function(){return a.getFromCacheOrCreate("ColumnHiddenIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZGNDRBMkJENkU3MTFFNUIwOTBGRTc0MTA3OTI2OEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZGNDRBMkNENkU3MTFFNUIwOTBGRTc0MTA3OTI2OEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RkY0NEEyOUQ2RTcxMUU1QjA5MEZFNzQxMDc5MjY4RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RkY0NEEyQUQ2RTcxMUU1QjA5MEZFNzQxMDc5MjY4RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjQ0mkwAAACISURBVHjaYvz//z8DJYCJgUIwDAxgKSwspMwAIOYDYlcgtgNiJSBWBGJhIGaHyoHAJyD+CcRvgfg+EN8D4kNAvBtkwGEg1iNgkSCUlgBibSg7D4gvgwywRXKBChArALEIELMCsQBU8Qcg/g3Eb4D4ARDfBeKDMBeAnLcWikkGjKMpcRAYABBgACqXGpPEq63VAAAAAElFTkSuQmCC")},a.prototype.createColumnIndeterminateIcon=function(){return a.getFromCacheOrCreate("ColumnIndeterminateIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUY1QTkyNDUxRTkzMTFFNkFEQzVDNjE1NDE4RDlEQUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUY1QTkyNDYxRTkzMTFFNkFEQzVDNjE1NDE4RDlEQUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5RjVBOTI0MzFFOTMxMUU2QURDNUM2MTU0MThEOURBQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5RjVBOTI0NDFFOTMxMUU2QURDNUM2MTU0MThEOURBQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Por9Q7gAAAGzSURBVHja1JOxSwJRHMffqXcqSoVBQ0FDNN7iIBxO5WA3NYoEjm0u/T2Bkw2ONZlgNEk4Bw6GiGiippmRnp76+n4PbWhpcOoHH57P+36/7/e8n4qUUmxSLrFhbRygoJwPq6tsgRMQB0cgtNINQA0UwCMYrX3rAAUB516v9zIejx+nUqm90WgUDIfDaq1WE9PpdK6q6mc2m+0WCoUX7K/hu+O5TPCBq0gkUiqXy0PbtqVlWXK5XDqwuE4mEzmfzyU11NJDr3C73SZOfeh0OtPxeCyR7oixlzhdVqtV2ev1nCB+Tw219NDrQRtJwzBCaF+bzWbsSGQyGVEsFoWmacLj8YjBYCBisZhIp9MC3Qhq6YEmyQ5OTdO8bTQak263K8m69d+FIOc5tfTQywAvTrmIRqM3pVLptd1uy3q9/nN3slgsZLPZlHxGDbX00Ou8ApfLxbdh+P3+MyTriURC7/f7+7hCsFKpCF3XvwKBQCuXyz3n8/ln/Bb3yH9iOAPcYAfsIiSEsAOsh9hvA99qDizwAVMDphbWd+zfwFBZTSOFfqBxJv4YPk6cDcYMVv7/n+lbgAEAtdcjOjP715MAAAAASUVORK5CYII=")},a.prototype.createGroupIcon=function(){return a.getFromCacheOrCreate("GroupIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUVCNUI1OUNENkYwMTFFNThGNjJDNUE3ODIwMEZERDciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUVCNUI1OURENkYwMTFFNThGNjJDNUE3ODIwMEZERDciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RUI1QjU5QUQ2RjAxMUU1OEY2MkM1QTc4MjAwRkRENyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RUI1QjU5QkQ2RjAxMUU1OEY2MkM1QTc4MjAwRkRENyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlkCTGoAAACDSURBVHjaYmRgYPjPgBswQun/+BT8X3x5DoZErG4KCj/3/DcMNZMNuRiYGPADRiRX4HYBJV5AB0QrhAGW//8hehgZES6FiaGLYzUAq7sxNf0nxQCsinHFAguegCPKBYxoYfAfWQxNnPgwINJVYMDEQCEYfLHASGoKRQlxPN7BqQggwAAN+SopPnDCwgAAAABJRU5ErkJggg==")},a.prototype.createPivotIcon=function(){return a.getFromCacheOrCreate("PivotIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAitJREFUeNqcU01rE1EUPfPVJjFqdYw2pJQkNS2hYhQUiwj+AaugKFYUBWutG3HjokgNrroRKYKbglBBFF0o1IW404qClGIDxpYKTQgULZJmmpiYkPnwvmtNspPmweOcmXnnvPPufSOdjsf7AfjR3PiOU6OjV50mh9CqtmVJDlkNjWU3tPXEiA6hlS3Lkm3HQbFYxO5hnTF0pQ3Bwa3MAxc98F9wMd95TsOOswpzoRFa1TJNyaKHtTUD07cNdv9wx6jtNDNW53N369xyOiC0qmmanMAwcjh+/yimrr/D28kjf8WLizjY3c38YzKJw729zKcTCU4gtLUE+Xwejy+94gWfl5agKQr8uo4Eccu2USr48SWVQq5QWE/gcAJZuIgF5XIF5yf7GfcGg9Cos4O3UoiFw2jFLrx+/wtRet+3nkJoOAEbkJtty5g484I+yUivrODekxb4tmuInZhCuFPHyHAXZubnUTXNWgKhlc1qlY+gaZsw9PwkY4fPhxsDXvxcrWL25TE8G+8DFAOxSAQHotG6AWlrRXS52vD08ifGr5kM1+BBPIBkOo3flQpaNA2zCwug+8MGdkMCPoLbvQ0DDw8xRgIBBNvbsUoF6yK+h+pQJpN91JH9PT2NCWS1Ui4rNhtswZubPxi/LS9TTWxemKTK/9t1jtramEBo1Vw226pRvEfj3oaL6v3vVRYaoZXcodA12ePpbOZXtEuljEToprmZprpBvehn4Y8AAwDB0mLL0M405wAAAABJRU5ErkJggg==")},a.prototype.createAggregationIcon=function(){return a.getFromCacheOrCreate("AggregationIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAMZJREFUeNpi/P//PwMlgImBQjDwBrCgmMYENq8RiLVxqL8KxPX//v1DiIACEYYZGRlBmBOIe4B4PRDrQMUYoGyQGIoebAbADJkAxFuAWA9JXJdYA0CYC4inAPFOINZHlkPWgxKIcFMhQA0aFveB+DbOUERxDhQAbTEC4qNAPBfqEmRx3F6AAhOgojNAvBikGckumDiKHhY0B3ECcTVQQhRIg/B1NNeeB1IgQ7/BXYvmdE6oAnYcPv4NxF+BerAbMDTzAkCAAQChYIl8b86M1gAAAABJRU5ErkJggg==")},a.prototype.createDropNotAllowedIcon=function(){return a.getFromCacheOrCreate("DropNotAllowedIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjUyQ0MxNDY0NjBDMTFFNkEzMUVGQUE3NkQzQzU4MjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjUyQ0MxNDc0NjBDMTFFNkEzMUVGQUE3NkQzQzU4MjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNTJDQzE0NDQ2MEMxMUU2QTMxRUZBQTc2RDNDNTgyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyNTJDQzE0NTQ2MEMxMUU2QTMxRUZBQTc2RDNDNTgyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PstpFisAAAGLSURBVHjalJNPKERRFMbnvRmKpAnjhURKWXjJLNQsqDE7KxI1NhYU2cjKxtbGZpSNqSFT/qxkYafmLWyU2LElCwYLo0SS8J36rk7XbJz61f33nXPuuec6ad8PWdYHJsEAaOPaDTgGeXCqD0cs8TqYCf21bjIHsmC2nIMCGOT4C3yCV44rQRXPS4BOkNIOchTL4RI4A0fggvtdYAj0g2qeFc10hKlNUXwF1sAOeALfdHCuxMZEsyoOFrjwTK8bTN3YMGvjcf7BzF3RukxHIl2DfSVuALvgQIn3wCJ44zwpDpqY/i2458YouARpzmV9BEyAExWk2RTRARUgxiuMqytsg3nWRCzMgL/PWATtoJfVr+PeHd/70OoJ6bxajotyhYCTmBJv8XVssdRljD0hFoiDDCcyfgcrjFyyxFGwBBI8K5YJ+573iEEriHOjBdSr55KoSbDM4ppekFrlHPWZCupJpcoP4IWCRt7bRA5MK7sqxRQ/irxIDegAPez7qDqbNeJyv1Huvvmf7/wjwABtLlYtICx9HQAAAABJRU5ErkJggg==")},a.prototype.createGroupIcon12=function(){return a.getFromCacheOrCreate("GroupIcon12","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTNFQzE0NTdEOTk1MTFFNUI4MjJGMjBFRDk4MkMxNjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTNFQzE0NThEOTk1MTFFNUI4MjJGMjBFRDk4MkMxNjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxM0VDMTQ1NUQ5OTUxMUU1QjgyMkYyMEVEOTgyQzE2MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxM0VDMTQ1NkQ5OTUxMUU1QjgyMkYyMEVEOTgyQzE2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiInRbAAAAEjSURBVHjaYuTi5XqkpKvI9/fXHwZWDlaGZ/eeM7x59raDAQj4pOQrBBUVGP78+MfAzMbE8PLKhU8Mhnb6/6//P/f/8N/d/x8AWUn1cf+BaleCsFPt5P/T/v//3/zj//8JQFrB1vM/I5IN3EAbfgBt+Au0QRBqw3sMG0DiQMwPxFuB2BzKZmLAAViA+BOU/QOI7wPxRyhfCIhT0NT/ZETi7AZiZiD+DOXL6EdlGdkWFzF8evaDgUuIg2F9eiTYBrhuIJ4NxHegfDsgnobuJGQbNgBxMRDfhfLFgDgB3UnInPVALMxAACDbcBGItwDxAyhfCRismejBiuyHiUBsDMQmUL6cSXIJf0hTDsNboEN42RkYJth58TPisV0eaMNFdBsAAgwANVJzd8zQrUcAAAAASUVORK5CYII=")},a.prototype.createCutIcon=function(){return a.getFromCacheOrCreate("CutIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAlRJREFUeNqkU09okmEcfj6ThNRhjUEJDhxDZ1t4sI3lDrKDhESHpC6x6yBoh52GfcdBJDvtElEUdKhOSq1JjF0SabSton9OmIeRxVKIrUgdU5xvv8e+hXXYpRcefv+e5/mh7/tpSin8z9Gi0Sg0TTsv+edarfa+Wq2iUqmgXC6DudVqhd1uh81ma+UWi8Uv3G5ZPJ9MJmGq1+twOBynBOek6T9oG+fkkU8djymVSiGTyWBiYuL6QSb7YvLIp679+D0ej57NZpX8JD0QCPj7+vrgcrnAyJp9zskj3zD928Tr9er5fF5FIhFdiH4aMLJmn/N98R+Dq5qGSUFQwKFs1AuFggqFQrrT6bzIyJp9zoMGn7qWQU6ST4JNQeK3kd/n8+nFYlGFw+HFdDqtWLOfMHjk5wwDjckRwGYGeJVnBMdXgaNrbveJKysr/etu91pHtVo8BnyXWUnwsgHM7wAVX7MJ0cEmjWvW4eGzjpGRXnNnZ8cFeRi9pRI+dnXtjMbj/cLp57rG1tbPH0tLwd3l5QHp3RBU8E7Txr4MDb1V8bh60tOzfhN4vTc9rRYkCm4tGDX7nJNHPnWt/+CFpt1rF9emptScxKfA2DNZwThn9NtNWjoxMH1Tqru+va02NzbK47FY4PHMzJtdYPYD8OChGDCyZp9z8sinrnWXt4E7q4ODRbrelw0x2Xjyn1fImn3OySOfutYt+IDRSeCycAZeAYm7wKLkshR87A1+cILDAss4EDkNXJI8Ows8yin1nENn+5MXNA3hnpHzHBKYjWhqe4lffwkwAMRcPMqRQZ4vAAAAAElFTkSuQmCC")},a.prototype.createCopyIcon=function(){return a.getFromCacheOrCreate("CopyIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgBJREFUeNqMk79rFEEcxd/M7V2QAzVFEOMFGwNiIGCjEdIEhYODmEawsFf8G4QQSCPYyqUWCdhY2qSQECSpInvFJYT8Ki6dZO8Sb2P29pfvu+4sm+UKv/AYZna/b95ndla9WFyEUmoewG0Mr+9hGB5EYYhypZIseO0fCHa3sP/LhxVFkazd+by0tOIFAQac+3w5imPYto1Pa2tv+VxR+8bRuv8EevIRxn5uQoszpWI2RjSIBgMMLi/hui76/T6+Li+v8Pkz9k0Wo409pFHAJooUCiWqYlk46nTQ2ttD+/gY75pNPKjVmmfd7gf2vKbu5U0sMWBpzWatNcAkv7n789lZ1GdmMqQ3cbxApIUikg58H5S0JgkSE/L/L1JmoNJmMZEDzCNdK5cxwtFxHHxcXcXTqalm27Zf7rRaRKBBhkAhxcgjiYlUo16HfKlqtYpv29u95Az81EClCFLyaQ0SCib/dtNJ6qsGfDmJnRqoXIKiyVUDz8sSSGy5VnI3ikh5k1KplBnog/V19BxnRCZmV15dGCSdO1wziphcS3rrT7d71zk5Ob8+Pf3eMN4aH3/8qtGYM0hp7iyJbO0bBOrMPTz8kl6OpGoTEzEncwapaCLrRNfu6Wli0Etl6mbfdb0MiYrlXsjZyAUTE0qwOxsbo9aQ3/dGEWlYRRcX5xxG/wowAC8cIjzfyA4lAAAAAElFTkSuQmCC")},a.prototype.createPasteIcon=function(){return a.getFromCacheOrCreate("PasteIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAadJREFUeNpinGLPAAaMjAxwcJ9Tk+0Bt7YPkCkKFXqt8PXqFsXv13/B1Pz/D6FZENoYZgKxMYgh9OI6i567q5hFUp4kiH9i3qTnT3auqWPgZ/gDVXsWiNPBFk+2hxtwxi0syfjy5csM0vFzGTg42Bj4+XnAEh8/fmH48eMXw9OFyQy6uroMu1bNAxlgAnbB338IJ6hlzWU4uXgJw6FDO4Ga+Rl4eXkZWFlZGb58/crw6eNHBjG7Iga1yAiG7SvmwfWw/P2LMADkraiYaIb79+4xYAOKSkpgNch6UFzwFxgy//79Y5BTUMBqwF+g3H8mJgZkPSgu+Ac04M+/fwz4AAswulBc8Ocfqg1/kGWxAEagAch6WP78RfUCIQOYmJkZ/qC44A+qAb8JeIEZZMkfXC4gwgsQNUgG/CbRC2BXIhvw8AsDgzQnkgEEvACxBMJ++h0YJmufMTA8ABry8xckGkFOxIdBakBqQXpAekGZiXPTSwbeUAEgB5hsObm58acDoJp3nxkYNn1gEANyP4MNAGKxh18ZbsXxsjMQA97/Z7gF0gPEfwACDAB/y9xB1I3/FQAAAABJRU5ErkJggg==")},a.prototype.createMenuIcon=function(){return a.getFromCacheOrCreate("MenuIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM3MUVBMzlERkJEMTFFNUEwMjFFNDJDMDlCMUY3OTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM3MUVBM0FERkJEMTFFNUEwMjFFNDJDMDlCMUY3OTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzcxRUEzN0RGQkQxMUU1QTAyMUU0MkMwOUIxRjc5NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzcxRUEzOERGQkQxMUU1QTAyMUU0MkMwOUIxRjc5NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pux7nZcAAAGtSURBVHjalFM9a8JQFL0veYkfYJUQEYuIIF07uToVpGuHOgid3dJN+i+K4C6CXQqFjplcCoKbXZ0EqRUFP/CTxCS9NzTdNOmBx32P3Nx3zj33sXq9/tRqtbRYLCaLomhBANi2La5WK7NSqTRYNpt1LMsCLACO47iLMXY2CoIAm80GZFkGoVQqfWy3WzBNE6gQVveNhmHAbreDYrHYZaPRKKTr+i0ykTDBPnUzgfYEvFkYDAZWoVDQWb/fB9QD6XQajscjBCkQDodhOBzCcrkEVq1WXfoEL9EPlEdSZrMZ8Pl8frVYLO7QgRB+sPx+/GUk4qUGNvOdYSO+JpPJJdHyc8ADnUluIpH45vv9XiFbiFIQC71IjuBe5ZlM5gYlPHLOL7C4AcEgofXbXC7X4PF4vKuqahf+AWJxOBwgEokA6/V67kFRFFcGLU/SqShJkusATSNbr9fQ6XSuU6mUQP3BBIaJZyM6BuPx2Mnn85+sVqu9ttvt+2QyGXgOqInT6RTK5fIbwwl0iFI0Gv2btCA9QPdcOVzTtOdms/mAnnKkaAexES0UcG/hc375EWAA94tOP0vEOEcAAAAASUVORK5CYII=")},a.prototype.createCheckboxCheckedIcon=function(){return a.getFromCacheOrCreate("CheckboxCheckedIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFQ0VGQkU3ODM4MTFFNjExQjlCQzhERUVDNkNGMzFDMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBRkJCRDU1MTEyM0ExMUU2ODE4MUUyOTNBNTRGQkIxNyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBRkJCRDU1MDEyM0ExMUU2ODE4MUUyOTNBNTRGQkIxNyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjIzMkM4M0M1M0MxMUU2MTFCOUJDOERFRUM2Q0YzMUMzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVDRUZCRTc4MzgxMUU2MTFCOUJDOERFRUM2Q0YzMUMzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+riMaEQAAAL5JREFUeNqUks0JhDAQhSd7tgtLMDUIyTXF2IdNWIE3c0ruYg9LtgcPzvpEF8SfHR8MGR75hpcwRERmrjQXCyutDKUQAkuFu2AUpsyiJ1JK0UtycRgGMsbsPBFYVRVZaw/+7Zu895znOY/j+PPWT7oGp2lirTU3TbPz/4IAAGLALeic47Ztlx7RELHrusPAAwgoy7LlrOuay7I8TXIadYOLouC+7+XgBiP2lTbw0crFGAF9ANq1kS75G8xXgAEAiqu9OeWZ/voAAAAASUVORK5CYII=")},a.prototype.createCheckboxCheckedReadOnlyIcon=function(){return a.getFromCacheOrCreate("CheckboxCheckedReadOnlyIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTZENDVDNkY0NDVFMTFFNkI1MjZCRkJDQ0FEMUEyNDMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTZENDVDNzA0NDVFMTFFNkI1MjZCRkJDQ0FEMUEyNDMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NkQ0NUM2RDQ0NUUxMUU2QjUyNkJGQkNDQUQxQTI0MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NkQ0NUM2RTQ0NUUxMUU2QjUyNkJGQkNDQUQxQTI0MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiE1TFsAAAGLSURBVHjadJI9a8JQFIbfSFBBakDaDg5O0nay4OSPsEFoCq4JODhUShd3F9emFreKqJOlS6Xg4OB/cIkZijjXwRa/uthzLokESS683I+cJ+fec15pv9/DHfP5/JSmR1KedOEcW6QP0nMqlfp2YyUXJOiWpleSAv/xQzIIfudNyAO9+UHr9Rrtdhuz2SzOMU4sQrQ4o7nF2f3SDIdD1Ot19Ho9ODEtYs454z0p7gdNp1OYpontdot0Ou0ec+wDgyrvlsslxuPxAdpsNmg0GnxFVCoVaJrm/WeewSte9ft9lMtljEYj8YWvNhgMkMvloOs6ZFn2gpeHnaIoohDNZhO73Q7dbhfRaBTVahWJROL4FX+y06frQqGAyWSCTqcDy7KwWq1Qq9WQzWb9nv8VcpqLcDgsrprJZASkqiqKxWJAS/HJ4IvTXCSTSRiGISpYKpUQiUSCjPAknOMxgLRYLGDbtsgci8WOIbbZHbvHaznNMcJJwPV+SbprOSnA5Ddccq4eyeY3kUyvyf8FGAAA/p3KIKgjXwAAAABJRU5ErkJggg==")},a.prototype.createCheckboxUncheckedIcon=function(){return a.getFromCacheOrCreate("CheckboxUncheckedIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFQ0VGQkU3ODM4MTFFNjExQjlCQzhERUVDNkNGMzFDMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2MkU1Rjk1NDExNDExMUU2ODhEQkMyRTJGOUNGODYyQyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2MkU1Rjk1MzExNDExMUU2ODhEQkMyRTJGOUNGODYyQyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI1MkM4M0M1M0MxMUU2MTFCOUJDOERFRUM2Q0YzMUMzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVDRUZCRTc4MzgxMUU2MTFCOUJDOERFRUM2Q0YzMUMzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+t+CXswAAAFBJREFUeNrsksENwDAIA023a9YGNqlItkixlAFIn1VOMv5wvACAOxOZWUwsB6Gqswp36QivJNhBRHDhI0f8j9jNrCy4O2twNMobT/7QeQUYAFaKU1yE2OfhAAAAAElFTkSuQmCC")},a.prototype.createCheckboxUncheckedReadOnlyIcon=function(){return a.getFromCacheOrCreate("CheckboxUncheckedReadOnlyIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjE4MjE1MTc0NDVFMTFFNjgyNzA5QzQ5MjBBRTM0QTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjE4MjE1MTg0NDVFMTFFNjgyNzA5QzQ5MjBBRTM0QTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MTgyMTUxNTQ0NUUxMUU2ODI3MDlDNDkyMEFFMzRBOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MTgyMTUxNjQ0NUUxMUU2ODI3MDlDNDkyMEFFMzRBOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoIZc5kAAADFSURBVHjaYvz//z8DDDx69EgESBUBsQ8Qq0GFbwDxJiCeJCcn9wamlhGmEagpGEjNBWJ+BuzgExAnATWvhWuEaloN4jPgByBbQkGaGR8+fCgK5NwBYj4G4gDIZlUmIJFLgiYGqNoCkEY/BtKBD0ijBhka1ZkYyAO/mKDxRCq4xwSNXFLBVlB0iAEZt0mODmBkvgKlCGjkMhCRAECp5xU4cKDJKAyIP+PR9BmWalDSKloi9wUFOSj0gPgWyE9APBE5kQMEGAD0/UBfnjaiGAAAAABJRU5ErkJggg==")},a.prototype.createCheckboxIndeterminateIcon=function(){return a.getFromCacheOrCreate("CheckboxIndeterminateIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFQ0VGQkU3ODM4MTFFNjExQjlCQzhERUVDNkNGMzFDMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGMjU4MzhGQjEyM0ExMUU2QjAxM0Q2QjZFQ0IzNzM4NiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGMjU4MzhGQTEyM0ExMUU2QjAxM0Q2QjZFQ0IzNzM4NiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjIzMkM4M0M1M0MxMUU2MTFCOUJDOERFRUM2Q0YzMUMzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVDRUZCRTc4MzgxMUU2MTFCOUJDOERFRUM2Q0YzMUMzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+2Xml2QAAAGBJREFUeNpiYGBg8ATiZ0D8n0j8DKqH4dnhw4f/EwtAakF6GEGmAAEDKYCRkZGBiYFMQH+NLNjcjw2ghwMLIQWDx48Do/H5kSNHiNZw9OhREPUCRHiBNJOQyJ+A9AAEGACqkFldNkPUwwAAAABJRU5ErkJggg==")},a.prototype.createCheckboxIndeterminateReadOnlyIcon=function(){return a.getFromCacheOrCreate("CheckboxIndeterminateReadOnlyIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Nzg3RjczNTA0NDVFMTFFNkE4Q0NDN0E3NUI3Qjk5QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Nzg3RjczNTE0NDVFMTFFNkE4Q0NDN0E3NUI3Qjk5QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODdGNzM0RTQ0NUUxMUU2QThDQ0M3QTc1QjdCOTlCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3ODdGNzM0RjQ0NUUxMUU2QThDQ0M3QTc1QjdCOTlCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhD2+R8AAADRSURBVHjaYvz//z8DDDx69EgESBUBsQ8Qq0GFbwDxJiCeJCcn9wamlhGmEagpGEjNBWJ+BuzgExAnATWvhWuEaloN4jPgByBbQkGaGR8+fCgK5NwBYj4G4gDIZlUmIJFLgiYGqNoCkEY/BtKBDwuQ0IDx5OXl8aoGegvGVGdiIA/8YoHGkz6aiYTAPSZo5JIKtoKiQwzIuE1ydAAj8xUoRUAjl4GIBABKPa/AgQNNRmFA/BmPps+wVIOSVtESuS8oyEGhB8S3QH4C4onIiRwgwABzikY1hHfO+QAAAABJRU5ErkJggg==")},a.prototype.createGroupExpandedIcon=function(){return a.getFromCacheOrCreate("GroupExpandedIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzBBODQ4M0ExMjM4MTFFNkFDNEJDMjUzQUJBQ0I2QjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzBBODQ4M0IxMjM4MTFFNkFDNEJDMjUzQUJBQ0I2QjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MEE4NDgzODEyMzgxMUU2QUM0QkMyNTNBQkFDQjZCOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MEE4NDgzOTEyMzgxMUU2QUM0QkMyNTNBQkFDQjZCOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhKAo60AAADVSURBVHjajFC9DkRgEJzzFhqiligURKcjR+UFJK7wGN7jOq+glXgCvSgUCnyVn47GHsVdcURsss3s7OzOPEzTdB3HeTPGeMMw0DQNOI4Dz/PI8xyWZSGO4y4MwxeSJGnruqarGseRNE1r4fv+YSgIwgErioJwpgrggHmeR7Bt+xZ5GAbCNE2/0zvpv78v6bpOUFX1lvK6roQz92dkWZYJiqLcSmOeZ9qDb6uqusx5WRaSJIlBFEUnTdNuC536vifXdaksSwqCgLIsoyiKdnNs23l+BBgAK/54I/P5bhMAAAAASUVORK5CYII=")},a.prototype.createGroupContractedIcon=function(){return a.getFromCacheOrCreate("GroupContractedIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0U2QUVBRDYxMjM4MTFFNjk3NjVBRUM0MUJDRjFCODgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0U2QUVBRDcxMjM4MTFFNjk3NjVBRUM0MUJDRjFCODgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RTZBRUFENDEyMzgxMUU2OTc2NUFFQzQxQkNGMUI4OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RTZBRUFENTEyMzgxMUU2OTc2NUFFQzQxQkNGMUI4OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhjzsKsAAADSSURBVHjajJAvioVgFMXPuAuLYhYMBsVmU54mNyA4wWW4j2luwSq4ArsYDAZ9X/JP0+KZ58CkgTffD264l3MPnPPh+34cRdGXEEL1PA/TNEFRFKiqirZtEQQByrJ85nn+iaqq5nEc+Y5t2+g4zow0TSlD13XEf66/JElChGEoJV7Xldj3/WfRNI0A/sx9v3Fdl7BtW8r5ui6CkpimSViWJSU+joN38fMwDG+F53nSMAwBXdejuq6fr9K5LAvjOGbf98yyjE3TsCiKO5x4/Ty+BRgA3R6JXc/jqsQAAAAASUVORK5CYII=")},a.prototype.createGroupLoadingIcon=function(){
return a.getFromCacheOrCreate("GroupLoadingIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0I3QUY0MjAwQTM2MTFFNzkzQzNGQUI2NDhCM0RBRTEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0I3QUY0MjEwQTM2MTFFNzkzQzNGQUI2NDhCM0RBRTEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozQjdBRjQxRTBBMzYxMUU3OTNDM0ZBQjY0OEIzREFFMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozQjdBRjQxRjBBMzYxMUU3OTNDM0ZBQjY0OEIzREFFMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps9zjP8AAADESURBVHjadNDJCoFRGMbxj4xlyhBJGSNla+0KLNhKYaXIwsbKXbgDd2PjHtjYYUVS/I+exdfBqV9neN8zvMdxvlsOOzTsgFf9BGONQ2gjofkAM/emBV4YwY87UuhpfW3f0legjBYymo/dSVkUNDaJUY2DqMKjuKnlU8wZJ0R+FHxUfG921VXUQf0VN709rfebkx/uEzp4ooKS3mw2de2rpipmjgAuSGKo9ZVJ8rn+e4kNioijhi1iCDt/Wt4Ug6YdeAswAEquIINwlr6iAAAAAElFTkSuQmCC")},a.imageCache={},a}();b.SvgFactory=f},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(4),e=c(7),f=function(){function a(a){var b=this;this.destroyFuncs=[],this.touching=!1,this.eventService=new d.EventService,this.eElement=a;var c=this.onTouchStart.bind(this),e=this.onTouchMove.bind(this),f=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",c,{passive:!0}),this.eElement.addEventListener("touchmove",e,{passive:!0}),this.eElement.addEventListener("touchend",f,{passive:!0}),this.destroyFuncs.push(function(){b.eElement.addEventListener("touchstart",c,{passive:!0}),b.eElement.addEventListener("touchmove",e,{passive:!0}),b.eElement.addEventListener("touchend",f,{passive:!0})})}return a.prototype.getActiveTouch=function(a){for(var b=0;b<a.length;b++){if(a[b].identifier===this.touchStart.identifier)return a[b]}return null},a.prototype.addEventListener=function(a,b){this.eventService.addEventListener(a,b)},a.prototype.removeEventListener=function(a,b){this.eventService.removeEventListener(a,b)},a.prototype.onTouchStart=function(b){var c=this;if(!this.touching){this.touchStart=b.touches[0],this.touching=!0,this.moved=!1;var d=this.touchStart;setTimeout(function(){var b=c.touchStart===d;c.touching&&b&&!c.moved&&(c.moved=!0,c.eventService.dispatchEvent(a.EVENT_LONG_TAP,c.touchStart))},500)}},a.prototype.onTouchMove=function(a){if(this.touching){var b=this.getActiveTouch(a.touches);if(b){!e.Utils.areEventsNear(b,this.touchStart,4)&&(this.moved=!0)}}},a.prototype.onTouchEnd=function(b){this.touching&&(this.moved||this.eventService.dispatchEvent(a.EVENT_TAP,this.touchStart),this.touching=!1)},a.prototype.destroy=function(){this.destroyFuncs.forEach(function(a){return a()})},a.EVENT_TAP="tap",a.EVENT_LONG_TAP="longTap",a}();b.TouchListener=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(16),i=c(7),j=c(6),k=c(3),l=c(52),m=c(50),n=c(49),o=c(4),p=c(44),q=c(10),r=n.SvgFactory.getInstance(),s=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a,this.setupTap(),this.setupIcons(a.column),this.setupMenu(),this.setupSort(),this.setupFilterIcon(),this.setupText(a.displayName)},b.prototype.setupText=function(a){this.eText.innerHTML=a},b.prototype.setupIcons=function(a){this.addInIcon("sortAscending",this.eSortAsc,a,r.createArrowUpSvg),this.addInIcon("sortDescending",this.eSortDesc,a,r.createArrowDownSvg),this.addInIcon("sortUnSort",this.eSortNone,a,r.createArrowUpDownSvg),this.addInIcon("menu",this.eMenu,a,r.createMenuSvg),this.addInIcon("filter",this.eFilter,a,r.createFilterSvg)},b.prototype.addInIcon=function(a,b,c,d){var e=i.Utils.createIconNoSpan(a,this.gridOptionsWrapper,c,d);b.appendChild(e)},b.prototype.setupTap=function(){var a=this;if(!this.gridOptionsWrapper.isSuppressTouch()){var b=new m.TouchListener(this.getGui());if(this.params.enableMenu){var c=function(b){a.gridOptionsWrapper.getApi().showColumnMenuAfterMouseClick(a.params.column,b)};this.addDestroyableEventListener(b,m.TouchListener.EVENT_LONG_TAP,c)}if(this.params.enableSorting){var d=function(){a.sortController.progressSort(a.params.column,!1)};this.addDestroyableEventListener(b,m.TouchListener.EVENT_TAP,d)}this.addDestroyFunc(function(){return b.destroy()})}},b.prototype.setupMenu=function(){var a=this;if(this.eMenu){if(!this.params.enableMenu)return void i.Utils.removeFromParent(this.eMenu);this.eMenu.addEventListener("click",function(){return a.showMenu(a.eMenu)}),this.gridOptionsWrapper.isSuppressMenuHide()||(this.eMenu.style.opacity="0",this.addGuiEventListener("mouseover",function(){a.eMenu.style.opacity="1"}),this.addGuiEventListener("mouseout",function(){a.eMenu.style.opacity="0"}));var b=this.eMenu.style;b.transition="opacity 0.2s, border 0.2s",b["-webkit-transition"]="opacity 0.2s, border 0.2s"}},b.prototype.showMenu=function(a){this.menuFactory.showMenuAfterButtonClick(this.params.column,a)},b.prototype.removeSortIcons=function(){i.Utils.removeFromParent(this.eSortAsc),i.Utils.removeFromParent(this.eSortDesc),i.Utils.removeFromParent(this.eSortNone),i.Utils.removeFromParent(this.eSortOrder)},b.prototype.setupSort=function(){var a=this;if(!this.params.enableSorting)return void this.removeSortIcons();this.eLabel&&this.addDestroyableEventListener(this.eLabel,"click",function(b){a.params.progressSort(b.shiftKey)}),this.addDestroyableEventListener(this.params.column,h.Column.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged(),this.addDestroyableEventListener(this.eventService,q.Events.EVENT_SORT_CHANGED,this.setMultiSortOrder.bind(this)),this.setMultiSortOrder()},b.prototype.onSortChanged=function(){if(i.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-asc",this.params.column.isSortAscending()),i.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-desc",this.params.column.isSortDescending()),i.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-none",this.params.column.isSortNone()),this.eSortAsc&&i.Utils.addOrRemoveCssClass(this.eSortAsc,"ag-hidden",!this.params.column.isSortAscending()),this.eSortDesc&&i.Utils.addOrRemoveCssClass(this.eSortDesc,"ag-hidden",!this.params.column.isSortDescending()),this.eSortNone){var a=!this.params.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();i.Utils.addOrRemoveCssClass(this.eSortNone,"ag-hidden",a||!this.params.column.isSortNone())}},b.prototype.setMultiSortOrder=function(){if(this.eSortOrder){var a=this.params.column,b=this.sortController.getColumnsWithSortingOrdered(),c=b.indexOf(a),d=b.length>1,e=a.isSorting()&&d;i.Utils.setVisible(this.eSortOrder,e),this.eSortOrder.innerHTML=c>=0?(c+1).toString():""}},b.prototype.setupFilterIcon=function(){this.eFilter&&(this.addDestroyableEventListener(this.params.column,h.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},b.prototype.onFilterChanged=function(){var a=this.params.column.isFilterActive();i.Utils.addOrRemoveCssClass(this.eFilter,"ag-hidden",!a)},b.TEMPLATE='<div class="ag-cell-label-container" role="presentation">  <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>  <div ref="eLabel" class="ag-header-cell-label" role="presentation">    <span ref="eSortOrder" class="ag-header-icon ag-sort-order" aria-hidden="true"></span>    <span ref="eSortAsc" class="ag-header-icon ag-sort-ascending-icon" aria-hidden="true"></span>    <span ref="eSortDesc" class="ag-header-icon ag-sort-descending-icon" aria-hidden="true"></span>    <span ref="eSortNone" class="ag-header-icon ag-sort-none-icon" aria-hidden="true"></span>    <span ref="eFilter" class="ag-header-icon ag-filter-icon" aria-hidden="true"></span>    <span ref="eText" class="ag-header-cell-text" role="columnheader"></span>  </div></div>',e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([j.Autowired("sortController"),f("design:type",l.SortController)],b.prototype,"sortController",void 0),e([j.Autowired("menuFactory"),f("design:type",Object)],b.prototype,"menuFactory",void 0),e([j.Autowired("eventService"),f("design:type",o.EventService)],b.prototype,"eventService",void 0),e([p.RefSelector("eFilter"),f("design:type",HTMLElement)],b.prototype,"eFilter",void 0),e([p.RefSelector("eSortAsc"),f("design:type",HTMLElement)],b.prototype,"eSortAsc",void 0),e([p.RefSelector("eSortDesc"),f("design:type",HTMLElement)],b.prototype,"eSortDesc",void 0),e([p.RefSelector("eSortNone"),f("design:type",HTMLElement)],b.prototype,"eSortNone",void 0),e([p.RefSelector("eSortOrder"),f("design:type",HTMLElement)],b.prototype,"eSortOrder",void 0),e([p.RefSelector("eMenu"),f("design:type",HTMLElement)],b.prototype,"eMenu",void 0),e([p.RefSelector("eLabel"),f("design:type",HTMLElement)],b.prototype,"eLabel",void 0),e([p.RefSelector("eText"),f("design:type",HTMLElement)],b.prototype,"eText",void 0),b}(g.Component);b.HeaderComp=s},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(16),g=c(6),h=c(3),i=c(14),j=c(4),k=c(10),l=c(6),m=c(7),n=function(){function a(){}return b=a,a.prototype.progressSort=function(a,b){var c=this.getNextSortDirection(a);this.setSortForColumn(a,c,b)},a.prototype.setSortForColumn=function(a,b,c){if(b!==f.Column.SORT_ASC&&b!==f.Column.SORT_DESC&&(b=null),a.setSort(b),a.getSort()){var d=Number((new Date).valueOf());a.setSortedAt(d)}else a.setSortedAt(null);c&&!this.gridOptionsWrapper.isSuppressMultiSort()||this.clearSortBarThisColumn(a),this.dispatchSortChangedEvents()},a.prototype.onSortChanged=function(){this.dispatchSortChangedEvents()},a.prototype.dispatchSortChangedEvents=function(){this.eventService.dispatchEvent(k.Events.EVENT_SORT_CHANGED)},a.prototype.clearSortBarThisColumn=function(a){this.columnController.getPrimaryAndSecondaryAndAutoColumns().forEach(function(b){b!==a&&b.setSort(null)})},a.prototype.getNextSortDirection=function(a){var c;if(c=a.getColDef().sortingOrder?a.getColDef().sortingOrder:this.gridOptionsWrapper.getSortingOrder()?this.gridOptionsWrapper.getSortingOrder():b.DEFAULT_SORTING_ORDER,!Array.isArray(c)||c.length<=0)return void console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+c);var d,e=c.indexOf(a.getSort()),f=e<0,g=e==c.length-1;return d=f||g?c[0]:c[e+1],b.DEFAULT_SORTING_ORDER.indexOf(d)<0?(console.warn("ag-grid: invalid sort type "+d),null):d},a.prototype.getSortModel=function(){var a=this.getColumnsWithSortingOrdered();return m.Utils.map(a,function(a){return{colId:a.getColId(),sort:a.getSort()}})},a.prototype.setSortModel=function(a){var b=this;if(!this.gridOptionsWrapper.isEnableSorting())return void console.warn("ag-grid: You are setting the sort model on a grid that does not have sorting enabled");var c=a&&a.length>0;this.columnController.getPrimaryAndSecondaryAndAutoColumns().forEach(function(d){var e=null,f=-1;if(c&&!d.getColDef().suppressSorting)for(var g=0;g<a.length;g++){var h=a[g];"string"==typeof h.colId&&"string"==typeof d.getColId()&&b.compareColIds(h,d)&&(e=h.sort,f=g)}e?(d.setSort(e),d.setSortedAt(f)):(d.setSort(null),d.setSortedAt(null))}),this.dispatchSortChangedEvents()},a.prototype.compareColIds=function(a,b){return a.colId===b.getColId()},a.prototype.getColumnsWithSortingOrdered=function(){var a=this.columnController.getPrimaryAndSecondaryAndAutoColumns(),b=m.Utils.filter(a,function(a){return!!a.getSort()});return b.sort(function(a,b){return a.sortedAt-b.sortedAt}),b},a.prototype.getSortForRowController=function(){var a=this.getColumnsWithSortingOrdered();return m.Utils.map(a,function(a){return{inverter:a.getSort()===f.Column.SORT_ASC?1:-1,column:a}})},a.DEFAULT_SORTING_ORDER=[f.Column.SORT_ASC,f.Column.SORT_DESC,null],d([g.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([g.Autowired("columnController"),e("design:type",i.ColumnController)],a.prototype,"columnController",void 0),d([g.Autowired("eventService"),e("design:type",j.EventService)],a.prototype,"eventService",void 0),a=b=d([l.Bean("sortController")],a);var b}();b.SortController=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(6),h=c(46),i=c(44),j=c(7),k=c(47),l=c(42),m=c(8),n=function(a){function b(){var b=a.call(this,'<div><input  ref="eColumnFloatingFilter" class="ag-floating-filter-input"></div>')||this;return b.lastKnownModel=null,b}return d(b,a),b.prototype.init=function(a){this.onFloatingFilterChanged=a.onFloatingFilterChanged,this.currentParentModel=a.currentParentModel;var b=null!=a.debounceMs?a.debounceMs:500,c=j._.debounce(this.syncUpWithParentFilter.bind(this),b);this.addDestroyableEventListener(this.eColumnFloatingFilter,"input",c),this.addDestroyableEventListener(this.eColumnFloatingFilter,"keypress",c),this.addDestroyableEventListener(this.eColumnFloatingFilter,"keydown",c);var d=a.column.getDefinition();d.filterParams&&d.filterParams.filterOptions&&1===d.filterParams.filterOptions.length&&"inRange"===d.filterParams.filterOptions[0]&&(this.eColumnFloatingFilter.readOnly=!0)},b.prototype.onParentModelChanged=function(a){if(!this.equalModels(this.lastKnownModel,a)){this.lastKnownModel=a;var b=this.asFloatingFilterText(a);b!==this.eColumnFloatingFilter.value&&(this.eColumnFloatingFilter.value=b)}},b.prototype.syncUpWithParentFilter=function(a){var b=this.asParentModel();if(!this.equalModels(this.lastKnownModel,b)){var c=null;c=j._.isKeyPressed(a,m.Constants.KEY_ENTER)?this.onFloatingFilterChanged({model:b,apply:!0}):this.onFloatingFilterChanged({model:b,apply:!1}),c&&(this.lastKnownModel=b)}},b.prototype.equalModels=function(a,b){return!!j._.referenceCompare(a,b)||!(!a||!b)&&(!Array.isArray(a)&&!Array.isArray(b)&&(j._.referenceCompare(a.type,b.type)&&j._.referenceCompare(a.filter,b.filter)&&j._.referenceCompare(a.filterTo,b.filterTo)&&j._.referenceCompare(a.filterType,b.filterType)))},e([i.RefSelector("eColumnFloatingFilter"),f("design:type",HTMLInputElement)],b.prototype,"eColumnFloatingFilter",void 0),b}(l.Component);b.InputTextFloatingFilterComp=n;var o=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.asFloatingFilterText=function(a){return a?a.filter:""},b.prototype.asParentModel=function(){return{type:this.currentParentModel().type,filter:this.eColumnFloatingFilter.value,filterType:"text"}},b}(n);b.TextFloatingFilterComp=o;var p=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.lastKnownModel=null,b}return d(b,a),b.prototype.init=function(a){this.onFloatingFilterChanged=a.onFloatingFilterChanged,this.currentParentModel=a.currentParentModel;var b=null!=a.debounceMs?a.debounceMs:500,c=j._.debounce(this.onDateChanged.bind(this),b),d={onDateChanged:c};this.dateComponent=this.componentProvider.newDateComponent(d);var e=j._.loadTemplate("<div></div>");e.appendChild(this.dateComponent.getGui()),this.setTemplateFromElement(e),this.lastKnownModel=this.asParentModel()},b.prototype.onDateChanged=function(){var a=this.currentParentModel(),b=this.asParentModel();if(!this.equalModels(this.lastKnownModel,b)){var c=this.dateComponent.getDate();if(!c||"function"!=typeof c.getMonth)return void this.onFloatingFilterChanged(null);var d=j._.serializeDateToYyyyMmDd(h.DateFilter.removeTimezone(c),"-"),e=null,f=a.type;a&&(e=a.dateTo);var g={type:f,dateFrom:d,dateTo:e,filterType:"date"};this.onFloatingFilterChanged({model:g,apply:!0}),this.lastKnownModel=g}},b.prototype.equalModels=function(a,b){return!!j._.referenceCompare(a,b)||!(!a||!b)&&(!Array.isArray(a)&&!Array.isArray(b)&&(j._.referenceCompare(a.type,b.type)&&j._.referenceCompare(a.dateFrom,b.dateFrom)&&j._.referenceCompare(a.dateTo,b.dateTo)&&j._.referenceCompare(a.filterType,b.filterType)))},b.prototype.asParentModel=function(){var a=this.currentParentModel(),b=this.dateComponent.getDate(),c=j._.serializeDateToYyyyMmDd(h.DateFilter.removeTimezone(b),"-");return{type:a.type,dateFrom:c||a.dateFrom,dateTo:null,filterType:"date"}},b.prototype.onParentModelChanged=function(a){if(!a||!a.dateFrom)return void this.dateComponent.setDate(null);this.dateComponent.setDate(j._.parseYyyyMmDdToDate(a.dateFrom,"-"))},e([g.Autowired("componentProvider"),f("design:type",k.ComponentProvider)],b.prototype,"componentProvider",void 0),b}(l.Component);b.DateFloatingFilterComp=p;var q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.asFloatingFilterText=function(a){var b=this.currentParentModel();if(null==a&&null==b)return"";if(null==a&&null!=b&&"inRange"!==b.type)return this.eColumnFloatingFilter.readOnly=!1,"";if(null!=b&&"inRange"===b.type){this.eColumnFloatingFilter.readOnly=!0;var c=this.asNumber(b.filter),d=this.asNumber(b.filterTo);return(c?c+"":"")+"-"+(d?d+"":"")}var e=this.asNumber(a.filter);return this.eColumnFloatingFilter.readOnly=!1,null!=e?e+"":""},b.prototype.asParentModel=function(){var a=this.currentParentModel(),b=this.asNumber(this.eColumnFloatingFilter.value),c=this.eColumnFloatingFilter.value,d=null;return d=null==b&&""===c?null:null==b?a.filter:b,{type:a.type,filter:d,filterTo:a?a.filterTo:null,filterType:"number"}},b.prototype.asNumber=function(a){if(null==a)return null;if(""===a)return null;var b=Number(a);return j._.isNumeric(b)?b:null},b}(n);b.NumberFloatingFilterComp=q;var r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(b){a.prototype.init.call(this,b),this.eColumnFloatingFilter.readOnly=!0},b.prototype.asFloatingFilterText=function(a){if(!a||0===a.length)return"";var b=a.length>10?a.slice(0,10).concat(["..."]):a;return"("+a.length+") "+b.join(",")},b.prototype.asParentModel=function(){return null==this.eColumnFloatingFilter.value||""===this.eColumnFloatingFilter.value?null:this.eColumnFloatingFilter.value.split(",")},b}(n);b.SetFloatingFilterComp=r;var s=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(b){a.prototype.init.call(this,b),this.eColumnFloatingFilter.readOnly=!0},b.prototype.onParentModelChanged=function(a){this.eColumnFloatingFilter.value=this.asFloatingFilterText(this.currentParentModel())},b.prototype.asFloatingFilterText=function(a){return a},b.prototype.asParentModel=function(){return null},b}(n);b.ReadModelAsStringFloatingFilterComp=s},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(6),h=c(16),i=c(7),j=c(55),k=c(42),l=c(44),m=c(3),n=c(49),o=(n.SvgFactory.getInstance(),function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(a){this.column=a.column;var b=i._.loadTemplate('<div class="ag-header-cell" aria-hidden="true"><div class="ag-floating-filter-body" aria-hidden="true"></div></div>');this.enrichBody(b),this.setTemplateFromElement(b),this.setupWidth(),this.addFeature(this.context,new j.SetLeftFeature(this.column,this.getGui()))},b.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,h.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this)),this.onColumnWidthChanged()},b.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"},e([g.Autowired("context"),f("design:type",g.Context)],b.prototype,"context",void 0),b}(k.Component));b.BaseFilterWrapperComp=o;var p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(b){this.floatingFilterComp=b.floatingFilterComp,this.suppressFilterButton=b.suppressFilterButton,a.prototype.init.call(this,b),this.suppressFilterButton||this.addDestroyableEventListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this))},b.prototype.enrichBody=function(a){var b=a.querySelector(".ag-floating-filter-body");this.suppressFilterButton?(b.appendChild(this.floatingFilterComp.getGui()),i._.removeCssClass(b,"ag-floating-filter-body"),i._.addCssClass(b,"ag-floating-filter-full-body")):(b.appendChild(this.floatingFilterComp.getGui()),a.appendChild(i._.loadTemplate('<div class="ag-floating-filter-button" aria-hidden="true">\n                    <button ref="eButtonShowMainFilter">...</button>            \n            </div>'))),this.floatingFilterComp.afterGuiAttached&&this.floatingFilterComp.afterGuiAttached()},b.prototype.onParentModelChanged=function(a){this.floatingFilterComp.onParentModelChanged(a)},b.prototype.showParentFilter=function(){this.menuFactory.showMenuAfterButtonClick(this.column,this.eButtonShowMainFilter,"filterMenuTab",["filterMenuTab"])},e([l.RefSelector("eButtonShowMainFilter"),f("design:type",HTMLInputElement)],b.prototype,"eButtonShowMainFilter",void 0),e([g.Autowired("menuFactory"),f("design:type",Object)],b.prototype,"menuFactory",void 0),e([g.Autowired("gridOptionsWrapper"),f("design:type",m.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(o);b.FloatingFilterWrapperComp=p;var q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.enrichBody=function(a){},b.prototype.onParentModelChanged=function(a){},b}(o);b.EmptyFloatingFilterWrapperComp=q},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(16),i=c(43),j=c(6),k=c(3),l=c(56),m=function(a){function b(b,c,d){var e=a.call(this)||this;return e.columnOrGroup=b,e.eCell=c,e.colsSpanning=d,e}return d(b,a),b.prototype.setColsSpanning=function(a){this.colsSpanning=a,this.onLeftChanged()},b.prototype.getColumnOrGroup=function(){return this.gridOptionsWrapper.isEnableRtl()&&this.colsSpanning?this.colsSpanning[this.colsSpanning.length-1]:this.columnOrGroup},b.prototype.init=function(){this.addDestroyableEventListener(this.columnOrGroup,h.Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime()},b.prototype.setLeftFirstTime=function(){var a=this.gridOptionsWrapper.isSuppressColumnMoveAnimation(),b=g.Utils.exists(this.columnOrGroup.getOldLeft());this.columnAnimationService.isActive()&&b&&!a?this.animateInLeft():this.onLeftChanged()},b.prototype.animateInLeft=function(){var a=this,b=this.getColumnOrGroup().getLeft(),c=this.getColumnOrGroup().getOldLeft();this.setLeft(c),this.actualLeft=b,this.columnAnimationService.executeNextVMTurn(function(){a.actualLeft===b&&a.setLeft(b)})},b.prototype.onLeftChanged=function(){this.actualLeft=this.getColumnOrGroup().getLeft(),this.setLeft(this.actualLeft)},b.prototype.setLeft=function(a){g.Utils.exists(a)&&(this.eCell.style.left=a+"px")},e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([j.Autowired("columnAnimationService"),f("design:type",l.ColumnAnimationService)],b.prototype,"columnAnimationService",void 0),e([j.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(i.BeanStub);b.SetLeftFeature=m},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(3),h=c(23),i=c(7),j=function(){function a(){this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.animationThreadCount=0}return a.prototype.isActive=function(){return this.active},a.prototype.start=function(){this.active||this.gridOptionsWrapper.isSuppressColumnMoveAnimation()||this.gridOptionsWrapper.isEnableRtl()||(this.ensureAnimationCssClassPresent(),this.active=!0)},a.prototype.finish=function(){this.active&&(this.flush(),this.active=!1)},a.prototype.executeNextVMTurn=function(a){this.active?this.executeNextFuncs.push(a):a()},a.prototype.executeLaterVMTurn=function(a){this.active?this.executeLaterFuncs.push(a):a()},a.prototype.ensureAnimationCssClassPresent=function(){var a=this;this.animationThreadCount++;var b=this.animationThreadCount;i.Utils.addCssClass(this.gridPanel.getRoot(),"ag-column-moving"),this.executeLaterFuncs.push(function(){a.animationThreadCount===b&&i.Utils.removeCssClass(a.gridPanel.getRoot(),"ag-column-moving")})},a.prototype.flush=function(){var a=this.executeNextFuncs;this.executeNextFuncs=[];var b=this.executeLaterFuncs;this.executeLaterFuncs=[],0===a.length&&0===b.length||(setTimeout(function(){return a.forEach(function(a){return a()})},0),setTimeout(function(){return b.forEach(function(a){return a()})},300))},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("gridPanel"),e("design:type",h.GridPanel)],a.prototype,"gridPanel",void 0),a=d([f.Bean("columnAnimationService")],a)}();b.ColumnAnimationService=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(6),i=c(3),j=c(44),k=c(7),l=c(4),m=c(10),n=c(22),o=c(58),p=function(a){function b(){return a.call(this)||this}return d(b,a),b.prototype.postConstruct=function(){this.setTemplate(this.getTemplate()),this.addDestroyableEventListener(this.eventService,m.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addDestroyableEventListener(this.btFirst,"click",this.onBtFirst.bind(this)),this.addDestroyableEventListener(this.btLast,"click",this.onBtLast.bind(this)),this.addDestroyableEventListener(this.btNext,"click",this.onBtNext.bind(this)),this.addDestroyableEventListener(this.btPrevious,"click",this.onBtPrevious.bind(this)),this.onPaginationChanged()},b.prototype.onPaginationChanged=function(){this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels()},b.prototype.setCurrentPageLabel=function(){var a=this.paginationProxy.getCurrentPage();this.lbCurrent.innerHTML=k._.formatNumberCommas(a+1)},b.prototype.getTemplate=function(){var a=this.gridOptionsWrapper.getLocaleTextFunc(),b=a("page","Page"),c=a("to","to"),d=a("of","of")
;return'<div class="ag-paging-panel ag-font-style">\n                <span ref="eSummaryPanel" class="ag-paging-row-summary-panel">\n                    <span ref="lbFirstRowOnPage"></span> '+c+' <span ref="lbLastRowOnPage"></span> '+d+' <span ref="lbRecordCount"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel">\n                    <button class="ag-paging-button" ref="btFirst">'+a("first","First")+'</button>\n                    <button class="ag-paging-button" ref="btPrevious">'+a("previous","Previous")+"</button>\n                    "+b+' <span ref="lbCurrent"></span> '+d+' <span ref="lbTotal"></span>\n                    <button class="ag-paging-button" ref="btNext">'+a("next","Next")+'</button>\n                    <button class="ag-paging-button" ref="btLast">'+a("last","Last")+"</button>\n                </span>\n            </div>"},b.prototype.onBtNext=function(){this.paginationProxy.goToNextPage()},b.prototype.onBtPrevious=function(){this.paginationProxy.goToPreviousPage()},b.prototype.onBtFirst=function(){this.paginationProxy.goToFirstPage()},b.prototype.onBtLast=function(){this.paginationProxy.goToLastPage()},b.prototype.enableOrDisableButtons=function(){var a=this.paginationProxy.getCurrentPage(),b=this.paginationProxy.isLastPageFound(),c=this.paginationProxy.getTotalPages(),d=0===a;this.btPrevious.disabled=d,this.btFirst.disabled=d;var e=this.isZeroPagesToDisplay(),f=b&&a===c-1,g=f||e;this.btNext.disabled=g;var h=!b||e||a===c-1;this.btLast.disabled=h},b.prototype.updateRowLabels=function(){var a,b,c=this.paginationProxy.getCurrentPage(),d=this.paginationProxy.getPageSize(),e=this.paginationProxy.isLastPageFound(),f=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;this.isZeroPagesToDisplay()?(a=0,b=0):(a=d*c+1,b=a+d-1,e&&b>f&&(b=f)),this.lbFirstRowOnPage.innerHTML=k._.formatNumberCommas(a),this.lbLastRowOnPage.innerHTML=k._.formatNumberCommas(b)},b.prototype.isZeroPagesToDisplay=function(){var a=this.paginationProxy.isLastPageFound(),b=this.paginationProxy.getTotalPages();return a&&0===b},b.prototype.setTotalLabels=function(){var a=this.paginationProxy.isLastPageFound(),b=this.paginationProxy.getTotalPages(),c=this.paginationProxy.isLastPageFound()?this.paginationProxy.getTotalRowCount():null;if(a)this.lbTotal.innerHTML=k._.formatNumberCommas(b),this.lbRecordCount.innerHTML=k._.formatNumberCommas(c);else{var d=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=d,this.lbRecordCount.innerHTML=d}},e([h.Autowired("gridOptionsWrapper"),f("design:type",i.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([h.Autowired("eventService"),f("design:type",l.EventService)],b.prototype,"eventService",void 0),e([h.Autowired("paginationProxy"),f("design:type",o.PaginationProxy)],b.prototype,"paginationProxy",void 0),e([h.Autowired("rowRenderer"),f("design:type",n.RowRenderer)],b.prototype,"rowRenderer",void 0),e([j.RefSelector("btFirst"),f("design:type",HTMLButtonElement)],b.prototype,"btFirst",void 0),e([j.RefSelector("btPrevious"),f("design:type",HTMLButtonElement)],b.prototype,"btPrevious",void 0),e([j.RefSelector("btNext"),f("design:type",HTMLButtonElement)],b.prototype,"btNext",void 0),e([j.RefSelector("btLast"),f("design:type",HTMLButtonElement)],b.prototype,"btLast",void 0),e([j.RefSelector("lbRecordCount"),f("design:type",Object)],b.prototype,"lbRecordCount",void 0),e([j.RefSelector("lbFirstRowOnPage"),f("design:type",Object)],b.prototype,"lbFirstRowOnPage",void 0),e([j.RefSelector("lbLastRowOnPage"),f("design:type",Object)],b.prototype,"lbLastRowOnPage",void 0),e([j.RefSelector("eSummaryPanel"),f("design:type",Object)],b.prototype,"eSummaryPanel",void 0),e([j.RefSelector("lbCurrent"),f("design:type",Object)],b.prototype,"lbCurrent",void 0),e([j.RefSelector("lbTotal"),f("design:type",Object)],b.prototype,"lbTotal",void 0),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(g.Component);b.PaginationComp=p},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(43),h=c(4),i=c(10),j=c(7),k=c(6),l=c(3),m=c(23),n=c(59),o=c(26),p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.notActive=function(){return!this.gridOptionsWrapper.isPaginationAutoPageSize()},b.prototype.postConstruct=function(){this.addDestroyableEventListener(this.eventService,i.Events.EVENT_BODY_HEIGHT_CHANGED,this.onBodyHeightChanged.bind(this)),this.addDestroyableEventListener(this.eventService,i.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.checkPageSize()},b.prototype.onScrollVisibilityChanged=function(){this.checkPageSize()},b.prototype.onBodyHeightChanged=function(){this.checkPageSize()},b.prototype.checkPageSize=function(){if(!this.notActive()){var a=this.gridOptionsWrapper.getRowHeightAsNumber(),b=this.gridPanel.getBodyHeight();if(this.scrollVisibleService.isHBodyShowing()&&(b-=this.gridOptionsWrapper.getScrollbarWidth()),b>0){var c=Math.floor(b/a);this.gridOptionsWrapper.setProperty("paginationPageSize",c)}}},e([k.Autowired("gridPanel"),f("design:type",m.GridPanel)],b.prototype,"gridPanel",void 0),e([k.Autowired("eventService"),f("design:type",h.EventService)],b.prototype,"eventService",void 0),e([k.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([k.Autowired("scrollVisibleService"),f("design:type",n.ScrollVisibleService)],b.prototype,"scrollVisibleService",void 0),e([k.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b=e([k.Bean("paginationAutoPageSizeService")],b)}(g.BeanStub);b.PaginationAutoPageSizeService=p;var q=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.currentPage=0,b.topRowIndex=0,b.bottomRowIndex=0,b.pixelOffset=0,b}return d(b,a),b.prototype.postConstruct=function(){this.active=this.gridOptionsWrapper.isPagination(),this.addDestroyableEventListener(this.eventService,i.Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,"paginationPageSize",this.onModelUpdated.bind(this)),this.onModelUpdated()},b.prototype.isLastRowFound=function(){return this.rowModel.isLastRowFound()},b.prototype.onModelUpdated=function(a){this.setIndexesAndBounds(),this.eventService.dispatchEvent(i.Events.EVENT_PAGINATION_CHANGED,a)},b.prototype.goToPage=function(a){if(this.active&&this.currentPage!==a){this.currentPage=a;var b={animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0};this.onModelUpdated(b)}},b.prototype.getPixelOffset=function(){return this.pixelOffset},b.prototype.getRow=function(a){return this.rowModel.getRow(a)},b.prototype.getRowIndexAtPixel=function(a){return this.rowModel.getRowIndexAtPixel(a)},b.prototype.getCurrentPageHeight=function(){return j._.missing(this.topRowBounds)||j._.missing(this.bottomRowBounds)?0:this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop},b.prototype.isRowPresent=function(a){return this.isRowInPage(a)},b.prototype.isRowInPage=function(a){return!!this.rowModel.isRowPresent(a)&&(a.rowIndex>=this.topRowIndex&&a.rowIndex<=this.bottomRowIndex)},b.prototype.isEmpty=function(){return this.rowModel.isEmpty()},b.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},b.prototype.getNodesInRangeForSelection=function(a,b){return this.rowModel.getNodesInRangeForSelection(a,b)},b.prototype.forEachNode=function(a){return this.rowModel.forEachNode(a)},b.prototype.getType=function(){return this.rowModel.getType()},b.prototype.getRowBounds=function(a){return this.rowModel.getRowBounds(a)},b.prototype.getPageFirstRow=function(){return this.pageSize*this.currentPage},b.prototype.getPageLastRow=function(){var a=this.pageSize*(this.currentPage+1)-1,b=this.rowModel.getPageLastRow();return b>a?a:b},b.prototype.getRowCount=function(){return this.rowModel.getRowCount()},b.prototype.goToPageWithIndex=function(a){if(this.active){var b=Math.floor(a/this.pageSize);this.goToPage(b)}},b.prototype.getTotalRowCount=function(){return this.rowModel.getPageLastRow()+1},b.prototype.isLastPageFound=function(){return this.rowModel.isLastRowFound()},b.prototype.getCurrentPage=function(){return this.currentPage},b.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},b.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},b.prototype.goToFirstPage=function(){this.goToPage(0)},b.prototype.goToLastPage=function(){var a=this.rowModel.getPageLastRow()+1,b=Math.floor(a/this.pageSize);this.goToPage(b)},b.prototype.getPageSize=function(){return this.pageSize},b.prototype.getTotalPages=function(){return this.totalPages},b.prototype.setPageSize=function(){this.pageSize=this.gridOptionsWrapper.getPaginationPageSize(),this.pageSize>=1||(this.pageSize=100)},b.prototype.setIndexesAndBounds=function(){if(this.active){this.setPageSize();var a=this.getTotalRowCount();this.totalPages=Math.floor((a-1)/this.pageSize)+1,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!j._.isNumeric(this.currentPage)||this.currentPage<0)&&(this.currentPage=0),this.topRowIndex=this.pageSize*this.currentPage,this.bottomRowIndex=this.pageSize*(this.currentPage+1)-1;var b=this.rowModel.getPageLastRow();this.bottomRowIndex>b&&(this.bottomRowIndex=b)}else this.pageSize=this.rowModel.getPageLastRow()+1,this.totalPages=1,this.currentPage=0,this.topRowIndex=0,this.bottomRowIndex=this.rowModel.getPageLastRow();this.topRowBounds=this.rowModel.getRowBounds(this.topRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomRowIndex),this.pixelOffset=j._.exists(this.topRowBounds)?this.topRowBounds.rowTop:0},e([k.Autowired("rowModel"),f("design:type",Object)],b.prototype,"rowModel",void 0),e([k.Autowired("gridPanel"),f("design:type",m.GridPanel)],b.prototype,"gridPanel",void 0),e([k.Autowired("eventService"),f("design:type",h.EventService)],b.prototype,"eventService",void 0),e([k.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([k.Autowired("selectionController"),f("design:type",o.SelectionController)],b.prototype,"selectionController",void 0),e([k.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b=e([k.Bean("paginationProxy")],b)}(g.BeanStub);b.PaginationProxy=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(7),h=c(4),i=c(10),j=c(14),k=function(){function a(){}return a.prototype.setScrollsVisible=function(a){(this.vBody!==a.vBody||this.hBody!==a.hBody||this.vPinnedLeft!==a.vPinnedLeft||this.vPinnedRight!==a.vPinnedRight)&&(this.vBody=a.vBody,this.hBody=a.hBody,this.vPinnedLeft=a.vPinnedLeft,this.vPinnedRight=a.vPinnedRight,this.eventService.dispatchEvent(i.Events.EVENT_SCROLL_VISIBILITY_CHANGED))},a.prototype.isVBodyShowing=function(){return this.vBody},a.prototype.isHBodyShowing=function(){return this.hBody},a.prototype.isVPinnedLeftShowing=function(){return this.vPinnedLeft},a.prototype.isVPinnedRightShowing=function(){return this.vPinnedRight},a.prototype.getPinnedLeftWidth=function(){return this.columnController.getPinnedLeftContainerWidth()},a.prototype.getPinnedLeftWithScrollWidth=function(){var a=this.getPinnedLeftWidth();return this.vPinnedLeft&&(a+=g.Utils.getScrollbarWidth()),a},a.prototype.getPinnedRightWidth=function(){return this.columnController.getPinnedRightContainerWidth()},a.prototype.getPinnedRightWithScrollWidth=function(){var a=this.getPinnedRightWidth();return this.vPinnedRight&&(a+=g.Utils.getScrollbarWidth()),a},d([f.Autowired("eventService"),e("design:type",h.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),a=d([f.Bean("scrollVisibleService")],a)}();b.ScrollVisibleService=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(7),h=c(61),i=c(62),j=c(63),k=c(64),l=c(65),m=c(3),n=c(66),o=function(){function a(){this.cellEditorMap={}}return b=a,a.prototype.init=function(){this.cellEditorMap[b.TEXT]=h.TextCellEditor,this.cellEditorMap[b.SELECT]=i.SelectCellEditor,this.cellEditorMap[b.POPUP_TEXT]=k.PopupTextCellEditor,this.cellEditorMap[b.POPUP_SELECT]=l.PopupSelectCellEditor,this.cellEditorMap[b.LARGE_TEXT]=n.LargeTextCellEditor},a.prototype.addCellEditor=function(a,b){this.cellEditorMap[a]=b},a.prototype.createCellEditor=function(a,c){var d;g.Utils.missing(a)?d=this.cellEditorMap[b.TEXT]:"string"==typeof a?(d=this.cellEditorMap[a],g.Utils.missing(d)&&(console.warn("ag-Grid: unable to find cellEditor for key "+a),d=this.cellEditorMap[b.TEXT])):d=a;var e=new d;return this.context.wireBean(e),e.init&&e.init(c),e.isPopup&&e.isPopup()&&(this.gridOptionsWrapper.isFullRowEdit()&&console.warn("ag-Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors."),e=new j.PopupEditorWrapper(e),this.context.wireBean(e),e.init(c)),e},a.TEXT="text",a.SELECT="select",a.POPUP_TEXT="popupText",a.POPUP_SELECT="popupSelect",a.LARGE_TEXT="largeText",d([f.Autowired("context"),e("design:type",f.Context)],a.prototype,"context",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",m.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=b=d([f.Bean("cellEditorFactory")],a);var b}();b.CellEditorFactory=o},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(8),f=c(42),g=c(7),h=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){var b,c=this.getGui();if(a.cellStartedEdit){this.focusAfterAttached=!0;a.keyPress===e.Constants.KEY_BACKSPACE||a.keyPress===e.Constants.KEY_DELETE?b="":a.charPress?b=a.charPress:(b=a.value,a.keyPress!==e.Constants.KEY_F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,b=a.value;g.Utils.exists(b)&&(c.value=b),this.addDestroyableEventListener(c,"keydown",function(a){(a.keyCode===e.Constants.KEY_LEFT||a.keyCode===e.Constants.KEY_RIGHT||a.keyCode===e.Constants.KEY_UP||a.keyCode===e.Constants.KEY_DOWN||a.keyCode===e.Constants.KEY_PAGE_DOWN||a.keyCode===e.Constants.KEY_PAGE_UP||a.keyCode===e.Constants.KEY_PAGE_HOME||a.keyCode===e.Constants.KEY_PAGE_END)&&(a.stopPropagation(),a.keyCode!==e.Constants.KEY_LEFT&&a.keyCode!==e.Constants.KEY_RIGHT&&a.preventDefault())})},b.prototype.afterGuiAttached=function(){if(this.focusAfterAttached){var a=this.getGui();if(a.focus(),this.highlightAllOnFocus)a.select();else{var b=a.value?a.value.length:0;b>0&&a.setSelectionRange(b,b)}}},b.prototype.focusIn=function(){var a=this.getGui();a.focus(),a.select()},b.prototype.getValue=function(){return this.getGui().value},b.TEMPLATE='<input class="ag-cell-edit-input" type="text"/>',b}(f.Component);b.TextCellEditor=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(7),i=c(8),j=c(6),k=c(3),l=function(a){function b(){var b=a.call(this,'<div class="ag-cell-edit-input"><select class="ag-cell-edit-input"/></div>')||this;return b.eSelect=b.getGui().querySelector("select"),b}return d(b,a),b.prototype.init=function(a){var b=this;if(this.focusAfterAttached=a.cellStartedEdit,h.Utils.missing(a.values))return void console.log("ag-Grid: no values found for select cellEditor");a.values.forEach(function(c){var d=document.createElement("option");d.value=c,d.text=c,a.value===c&&(d.selected=!0),b.eSelect.appendChild(d)}),this.gridOptionsWrapper.isFullRowEdit()||this.addDestroyableEventListener(this.eSelect,"change",function(){return a.stopEditing()}),this.addDestroyableEventListener(this.eSelect,"keydown",function(a){(a.keyCode===i.Constants.KEY_UP||a.keyCode===i.Constants.KEY_DOWN)&&a.stopPropagation()}),this.addDestroyableEventListener(this.eSelect,"mousedown",function(a){a.stopPropagation()})},b.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.eSelect.focus()},b.prototype.focusIn=function(){this.eSelect.focus()},b.prototype.getValue=function(){return console.log("value is "+this.eSelect.value),this.eSelect.value},e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(g.Component);b.SelectCellEditor=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(6),i=c(3),j=function(a){function b(b){var c=a.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return c.getGuiCalledOnChild=!1,c.cellEditor=b,c}return d(b,a),b.prototype.onKeyDown=function(a){this.params.onKeyDown(a)},b.prototype.getGui=function(){return this.getGuiCalledOnChild||(this.appendChild(this.cellEditor.getGui()),this.getGuiCalledOnChild=!0),a.prototype.getGui.call(this)},b.prototype.init=function(c){var d=this;this.params=c,this.gridOptionsWrapper.setDomData(this.getGui(),b.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addDestroyFunc(function(){d.cellEditor.destroy&&d.cellEditor.destroy()}),this.addDestroyableEventListener(a.prototype.getGui.call(this),"keydown",this.onKeyDown.bind(this))},b.prototype.afterGuiAttached=function(){this.cellEditor.afterGuiAttached&&this.cellEditor.afterGuiAttached()},b.prototype.getValue=function(){return this.cellEditor.getValue()},b.prototype.isPopup=function(){return!0},b.prototype.isCancelBeforeStart=function(){if(this.cellEditor.isCancelBeforeStart)return this.cellEditor.isCancelBeforeStart()},b.prototype.isCancelAfterEnd=function(){if(this.cellEditor.isCancelAfterEnd)return this.cellEditor.isCancelAfterEnd()},b.prototype.focusIn=function(){this.cellEditor.focusIn&&this.cellEditor.focusIn()},b.prototype.focusOut=function(){this.cellEditor.focusOut&&this.cellEditor.focusOut()},b.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",e([h.Autowired("gridOptionsWrapper"),f("design:type",i.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),b}(g.Component);b.PopupEditorWrapper=j},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(61),f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.isPopup=function(){return!0},b}(e.TextCellEditor);b.PopupTextCellEditor=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(62),f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.isPopup=function(){return!0},b}(e.SelectCellEditor);b.PopupSelectCellEditor=f},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(42),f=c(8),g=c(7),h=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a,this.focusAfterAttached=a.cellStartedEdit,this.textarea=document.createElement("textarea"),this.textarea.maxLength=a.maxLength?a.maxLength:"200",this.textarea.cols=a.cols?a.cols:"60",this.textarea.rows=a.rows?a.rows:"10",g.Utils.exists(a.value)&&(this.textarea.value=a.value.toString()),this.getGui().querySelector(".ag-large-textarea").appendChild(this.textarea),this.addGuiEventListener("keydown",this.onKeyDown.bind(this))},b.prototype.onKeyDown=function(a){var b=a.which||a.keyCode;(b==f.Constants.KEY_LEFT||b==f.Constants.KEY_UP||b==f.Constants.KEY_RIGHT||b==f.Constants.KEY_DOWN||a.shiftKey&&b==f.Constants.KEY_ENTER)&&a.stopPropagation()},b.prototype.afterGuiAttached=function(){this.focusAfterAttached&&this.textarea.focus()},b.prototype.getValue=function(){return this.textarea.value},b.prototype.isPopup=function(){return!0},b.TEMPLATE='<div class="ag-large-text" tabindex="0"><div class="ag-large-textarea"></div></div>',b}(e.Component);b.LargeTextCellEditor=h},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(7),h=c(3),i=c(4),j=c(19),k=c(68),l=c(69),m=c(70),n=function(){function a(){this.cellRendererMap={}}return b=a,a.prototype.init=function(){this.cellRendererMap[b.ANIMATE_SLIDE]=k.AnimateSlideCellRenderer,this.cellRendererMap[b.ANIMATE_SHOW_CHANGE]=l.AnimateShowChangeCellRenderer,this.cellRendererMap[b.GROUP]=m.GroupCellRenderer},a.prototype.addCellRenderer=function(a,b){this.cellRendererMap[a]=b},a.prototype.getCellRenderer=function(a){var b=this.cellRendererMap[a];return g.Utils.missing(b)?(console.warn("ag-Grid: unable to find cellRenderer for key "+a),null):b},a.ANIMATE_SLIDE="animateSlide",a.ANIMATE_SHOW_CHANGE="animateShowChange",a.GROUP="group",d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("expressionService"),e("design:type",j.ExpressionService)],a.prototype,"expressionService",void 0),d([f.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=b=d([f.Bean("cellRendererFactory")],a);var b}();b.CellRendererFactory=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(7),f=c(42),g=function(a){function b(){var c=a.call(this,b.TEMPLATE)||this;return c.refreshCount=0,c.eCurrent=c.queryForHtmlElement(".ag-value-slide-current"),c}return d(b,a),b.prototype.init=function(a){this.params=a,this.refresh(a)},b.prototype.addSlideAnimation=function(){var a=this;this.refreshCount++;var b=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious),this.ePrevious=e.Utils.loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>'),this.ePrevious.innerHTML=this.eCurrent.innerHTML,this.getGui().insertBefore(this.ePrevious,this.eCurrent),setTimeout(function(){b===a.refreshCount&&e.Utils.addCssClass(a.ePrevious,"ag-value-slide-out-end")},50),setTimeout(function(){b===a.refreshCount&&(a.getGui().removeChild(a.ePrevious),a.ePrevious=null)},3e3)},b.prototype.refresh=function(a){var b=a.value;if(e.Utils.missing(b)&&(b=""),b!==this.lastValue)return this.addSlideAnimation(),this.lastValue=b,e.Utils.exists(a.valueFormatted)?this.eCurrent.innerHTML=a.valueFormatted:e.Utils.exists(a.value)?this.eCurrent.innerHTML=b:this.eCurrent.innerHTML="",!0},b.TEMPLATE='<span><span class="ag-value-slide-current"></span></span>',b}(f.Component);b.AnimateSlideCellRenderer=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(7),f=c(42),g=function(a){function b(){var c=a.call(this,b.TEMPLATE)||this;return c.refreshCount=0,c}return d(b,a),b.prototype.init=function(a){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(a)},b.prototype.showDelta=function(a,b){var c=Math.abs(b),d=a.formatValue(c),f=e.Utils.exists(d)?d:c,g=b>=0;this.eDelta.innerHTML=g?"&#65514;"+f:"&#65516;"+f,e.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-up",g),e.Utils.addOrRemoveCssClass(this.eDelta,"ag-value-change-delta-down",!g)},b.prototype.setTimerToRemoveDelta=function(){var a=this;this.refreshCount++;var b=this.refreshCount;setTimeout(function(){b===a.refreshCount&&a.hideDeltaValue()},2e3)},b.prototype.hideDeltaValue=function(){e.Utils.removeCssClass(this.eValue,"ag-value-change-value-highlight"),this.eDelta.innerHTML=""},b.prototype.refresh=function(a){var b=a.value;if(b!==this.lastValue){if(e.Utils.exists(a.valueFormatted)?this.eValue.innerHTML=a.valueFormatted:e.Utils.exists(a.value)?this.eValue.innerHTML=b:this.eValue.innerHTML="","number"==typeof b&&"number"==typeof this.lastValue){var c=b-this.lastValue;this.showDelta(a,c)}return this.lastValue&&e.Utils.addCssClass(this.eValue,"ag-value-change-value-highlight"),this.setTimerToRemoveDelta(),this.lastValue=b,!0}},b.TEMPLATE='<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>',b}(f.Component);b.AnimateShowChangeCellRenderer=g},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(49),h=c(3),i=c(19),j=c(4),k=c(8),l=c(7),m=c(6),n=c(42),o=c(29),p=c(71),q=c(72),r=c(73),s=c(14),t=c(16),u=c(44),v=g.SvgFactory.getInstance(),w=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){this.params=a,this.embeddedRowMismatch()||null!=a.value&&(this.setupDragOpenParents(),this.setupComponents())},b.prototype.setupComponents=function(){this.addExpandAndContract(),this.addCheckboxIfNeeded(),this.addValueElement(),this.addPadding()},b.prototype.embeddedRowMismatch=function(){if(this.gridOptionsWrapper.isEmbedFullWidthRows()){var a=this.params.pinned===t.Column.PINNED_LEFT,b=this.params.pinned===t.Column.PINNED_RIGHT,c=!a&&!b;return this.gridOptionsWrapper.isEnableRtl()?this.columnController.isPinningLeft()?!b:!c:this.columnController.isPinningLeft()?!a:!c}return!1},b.prototype.setPadding=function(){if(!this.gridOptionsWrapper.isGroupHideOpenParents()){var a,b=this.params,c=b.node;if(c.uiLevel<=0)a=0;else{var d=b.padding>=0?b.padding:10
;a=c.uiLevel*d;var e=this.columnController.isPivotMode()&&b.node.leafGroup;c.footer?a+=15:c.isExpandable()&&!e||(a+=10)}this.gridOptionsWrapper.isEnableRtl()?this.getGui().style.paddingRight=a+"px":this.getGui().style.paddingLeft=a+"px"}},b.prototype.addPadding=function(){var a=this.params.node;this.params.suppressPadding||(this.addDestroyableEventListener(a,o.RowNode.EVENT_UI_LEVEL_CHANGED,this.setPadding.bind(this)),this.setPadding())},b.prototype.addValueElement=function(){var a=this.params,b=this.displayedGroup;a.innerRenderer?this.createFromInnerRenderer():b.footer?this.createFooterCell():b.group?(this.createGroupCell(),this.addChildCount()):this.createLeafCell()},b.prototype.createFromInnerRenderer=function(){var a=this.cellRendererService.useCellRenderer(this.params.innerRenderer,this.eValue,this.params);this.addDestroyFunc(function(){a&&a.destroy&&a.destroy()})},b.prototype.createFooterCell=function(){var a,b=this.params.footerValueGetter;if(b){var c=l.Utils.cloneObject(this.params);c.value=this.params.value,"function"==typeof b?a=b(c):"string"==typeof b?a=this.expressionService.evaluate(b,c):console.warn("ag-Grid: footerValueGetter should be either a function or a string (expression)")}else a="Total "+this.params.value;this.eValue.innerHTML=a},b.prototype.createGroupCell=function(){var a=this.params,b=this.displayedGroup.rowGroupColumn,c=b||a.column,d=this.params.value,e=this.valueFormatterService.formatValue(c,a.node,a.scope,d),f=c.getCellRenderer();if("function"==typeof f){a.value=d,a.valueFormatted=e;var g=c.getColDef();(g?g.cellRendererParams:null)&&l.Utils.assign(a,f),this.cellRendererService.useCellRenderer(g.cellRenderer,this.eValue,a)}else{var h=l.Utils.exists(e)?e:d;l.Utils.exists(h)&&""!==h&&this.eValue.appendChild(document.createTextNode(h))}},b.prototype.addChildCount=function(){this.params.suppressCount||(this.addDestroyableEventListener(this.displayedGroup,o.RowNode.EVENT_ALL_CHILDREN_COUNT_CELL_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},b.prototype.updateChildCount=function(){var a=this.displayedGroup.allChildrenCount;this.eChildCount.innerHTML=a>=0?"("+a+")":""},b.prototype.createLeafCell=function(){l.Utils.exists(this.params.value)&&(this.eValue.innerHTML=this.params.value)},b.prototype.isUserWantsSelected=function(){var a=this.params.checkbox;return"function"==typeof a?a(this.params):!0===a},b.prototype.addCheckboxIfNeeded=function(){var a=this.params.node;if(this.isUserWantsSelected()&&!a.footer&&!a.rowPinned&&!a.flower){var b=new r.CheckboxSelectionComponent;this.context.wireBean(b),b.init({rowNode:a}),this.eCheckbox.appendChild(b.getGui()),this.addDestroyFunc(function(){return b.destroy()})}},b.prototype.addExpandAndContract=function(){var a=this.params,b=a.eGridCell,c=l.Utils.createIconNoSpan("groupExpanded",this.gridOptionsWrapper,null,v.createGroupContractedIcon),d=l.Utils.createIconNoSpan("groupContracted",this.gridOptionsWrapper,null,v.createGroupExpandedIcon);this.eExpanded.appendChild(c),this.eContracted.appendChild(d);var e=this.onExpandOrContract.bind(this);this.addDestroyableEventListener(this.eExpanded,"click",e),this.addDestroyableEventListener(this.eContracted,"click",e),this.gridOptionsWrapper.isEnableGroupEdit()||this.addDestroyableEventListener(b,"dblclick",e),this.addDestroyableEventListener(b,"keydown",this.onKeyDown.bind(this)),this.addDestroyableEventListener(a.node,o.RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons()},b.prototype.onKeyDown=function(a){if(l.Utils.isKeyPressed(a,k.Constants.KEY_ENTER)){if(this.params.column.isCellEditable(this.params.node))return;a.preventDefault(),this.onExpandOrContract()}},b.prototype.setupDragOpenParents=function(){var a=this.params.column,b=this.params.node;if(this.gridOptionsWrapper.isGroupHideOpenParents())if(b.group){var c=b.rowGroupColumn;this.draggedFromHideOpenParents=!a.isRowGroupDisplayed(c.getId())}else this.draggedFromHideOpenParents=!0;else this.draggedFromHideOpenParents=!1;if(this.draggedFromHideOpenParents)for(var d=b.parent;;){if(l.Utils.missing(d))break;if(d.rowGroupColumn&&a.isRowGroupDisplayed(d.rowGroupColumn.getId())){this.displayedGroup=d;break}d=d.parent}l.Utils.missing(this.displayedGroup)&&(this.displayedGroup=b)},b.prototype.onExpandOrContract=function(){var a=this.displayedGroup;a.setExpanded(!a.expanded),this.gridOptionsWrapper.isGroupIncludeFooter()&&this.params.api.refreshRows([a])},b.prototype.showExpandAndContractIcons=function(){var a=this.params.node,b=this.columnController.isPivotMode()&&a.leafGroup;if(this.draggedFromHideOpenParents||a.isExpandable()&&!a.footer&&!b){var c=!!this.draggedFromHideOpenParents||a.expanded;l.Utils.setVisible(this.eContracted,!c),l.Utils.setVisible(this.eExpanded,c)}else l.Utils.setVisible(this.eExpanded,!1),l.Utils.setVisible(this.eContracted,!1)},b.prototype.refresh=function(){return!1},b.TEMPLATE='<span><span class="ag-group-expanded" ref="eExpanded"></span><span class="ag-group-contracted" ref="eContracted"></span><span class="ag-group-checkbox" ref="eCheckbox"></span><span class="ag-group-value" ref="eValue"></span><span class="ag-group-child-count" ref="eChildCount"></span></span>',e([m.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([m.Autowired("expressionService"),f("design:type",i.ExpressionService)],b.prototype,"expressionService",void 0),e([m.Autowired("eventService"),f("design:type",j.EventService)],b.prototype,"eventService",void 0),e([m.Autowired("cellRendererService"),f("design:type",p.CellRendererService)],b.prototype,"cellRendererService",void 0),e([m.Autowired("valueFormatterService"),f("design:type",q.ValueFormatterService)],b.prototype,"valueFormatterService",void 0),e([m.Autowired("context"),f("design:type",m.Context)],b.prototype,"context",void 0),e([m.Autowired("columnController"),f("design:type",s.ColumnController)],b.prototype,"columnController",void 0),e([u.RefSelector("eExpanded"),f("design:type",HTMLElement)],b.prototype,"eExpanded",void 0),e([u.RefSelector("eContracted"),f("design:type",HTMLElement)],b.prototype,"eContracted",void 0),e([u.RefSelector("eCheckbox"),f("design:type",HTMLElement)],b.prototype,"eCheckbox",void 0),e([u.RefSelector("eValue"),f("design:type",HTMLElement)],b.prototype,"eValue",void 0),e([u.RefSelector("eChildCount"),f("design:type",HTMLElement)],b.prototype,"eChildCount",void 0),b}(n.Component);b.GroupCellRenderer=w},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(7),g=c(6),h=c(67),i=function(){function a(){}return a.prototype.useCellRenderer=function(a,b,c){var d=this.lookUpCellRenderer(a);if(!f.Utils.missing(d)){var e,g=null;this.checkForDeprecatedItems(d);if(this.doesImplementICellRenderer(d)){g=new d,this.context.wireBean(g),g.init&&g.init(c),e=g.getGui()}else{e=d(c)}if(null!==e&&""!==e)return f.Utils.isNodeOrElement(e)?b.appendChild(e):b.innerHTML=e,g}},a.prototype.checkForDeprecatedItems=function(a){a&&a.renderer&&console.warn("ag-grid: colDef.cellRenderer should not be an object, it should be a string, function or class. this changed in v4.1.x, please check the documentation on Cell Rendering, or if you are doing grouping, look at the grouping examples.")},a.prototype.doesImplementICellRenderer=function(a){return a.prototype&&"getGui"in a.prototype},a.prototype.lookUpCellRenderer=function(a){return"string"==typeof a?this.cellRendererFactory.getCellRenderer(a):a},d([g.Autowired("cellRendererFactory"),e("design:type",h.CellRendererFactory)],a.prototype,"cellRendererFactory",void 0),d([g.Autowired("context"),e("design:type",g.Context)],a.prototype,"context",void 0),a=d([g.Bean("cellRendererService")],a)}();b.CellRendererService=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(3),h=c(19),i=function(){function a(){}return a.prototype.formatValue=function(a,b,c,d){var e,f=a.getColDef();e=b.rowPinned&&f.pinnedRowValueFormatter?f.pinnedRowValueFormatter:f.valueFormatter;var g=null;if(e){var h={value:d,node:b,data:b.data,colDef:a.getColDef(),column:a,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()};h.$scope=c,g=this.expressionService.evaluate(e,h)}return g},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("expressionService"),e("design:type",h.ExpressionService)],a.prototype,"expressionService",void 0),a=d([f.Bean("valueFormatterService")],a)}();b.ValueFormatterService=i},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(29),i=c(7),j=c(6),k=c(3),l=c(49),m=c(10),n=c(4),o=c(11),p=c(14),q=l.SvgFactory.getInstance(),r=function(a){function b(){return a.call(this,'<span class="ag-selection-checkbox"/>')||this}return d(b,a),b.prototype.createAndAddIcons=function(){this.eCheckedIcon=i.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,null,q.createCheckboxCheckedIcon),this.eUncheckedIcon=i.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,null,q.createCheckboxUncheckedIcon),this.eIndeterminateIcon=i.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,null,q.createCheckboxIndeterminateIcon);var a=this.getGui();a.appendChild(this.eCheckedIcon),a.appendChild(this.eUncheckedIcon),a.appendChild(this.eIndeterminateIcon)},b.prototype.onSelectionChanged=function(){var a=this.rowNode.isSelected();i.Utils.setVisible(this.eCheckedIcon,!0===a),i.Utils.setVisible(this.eUncheckedIcon,!1===a),i.Utils.setVisible(this.eIndeterminateIcon,"boolean"!=typeof a)},b.prototype.onCheckedClicked=function(){var a=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!1,groupSelectsFiltered:a})},b.prototype.onUncheckedClicked=function(a){var b=this.gridOptionsWrapper.isGroupSelectsFiltered();return this.rowNode.setSelectedParams({newValue:!0,rangeSelect:a.shiftKey,groupSelectsFiltered:b})},b.prototype.onIndeterminateClicked=function(a){0===this.onUncheckedClicked(a)&&this.onCheckedClicked()},b.prototype.init=function(a){this.createAndAddIcons(),this.rowNode=a.rowNode,this.column=a.column,this.visibleFunc=a.visibleFunc,this.onSelectionChanged(),this.addGuiEventListener("click",function(a){return a.stopPropagation()}),this.addGuiEventListener("dblclick",function(a){return a.stopPropagation()}),this.addDestroyableEventListener(this.eCheckedIcon,"click",this.onCheckedClicked.bind(this)),this.addDestroyableEventListener(this.eUncheckedIcon,"click",this.onUncheckedClicked.bind(this)),this.addDestroyableEventListener(this.eIndeterminateIcon,"click",this.onIndeterminateClicked.bind(this)),this.addDestroyableEventListener(this.rowNode,h.RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.visibleFunc&&(this.addDestroyableEventListener(this.eventService,m.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelect.bind(this)),this.showOrHideSelect())},b.prototype.showOrHideSelect=function(){var a=this.createParams(),b=this.visibleFunc(a);this.setVisible(b)},b.prototype.createParams=function(){return{node:this.rowNode,data:this.rowNode.data,column:this.column,colDef:this.column.getColDef(),context:this.gridOptionsWrapper.getContext(),api:this.gridApi,columnApi:this.columnApi}},e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([j.Autowired("eventService"),f("design:type",n.EventService)],b.prototype,"eventService",void 0),e([j.Autowired("gridApi"),f("design:type",o.GridApi)],b.prototype,"gridApi",void 0),e([j.Autowired("columnApi"),f("design:type",p.ColumnApi)],b.prototype,"columnApi",void 0),b}(g.Component);b.CheckboxSelectionComponent=r},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(19),h=function(){function a(){}return a.prototype.processAllCellClasses=function(a,b,c,d){this.processCellClassRules(a,b,c,d),this.processStaticCellClasses(a,b,c)},a.prototype.processCellClassRules=function(a,b,c,d){var e=a.cellClassRules;if("object"==typeof e&&null!==e)for(var f=Object.keys(e),g=0;g<f.length;g++){var h=f[g],i=e[h],j=void 0;"string"==typeof i?j=this.expressionService.evaluate(i,b):"function"==typeof i&&(j=i(b)),j?c(h):d&&d(h)}},a.prototype.processStaticCellClasses=function(a,b,c){if(a.cellClass){var d=void 0;d="function"==typeof a.cellClass?(0,a.cellClass)(b):a.cellClass,"string"==typeof d?c(d):Array.isArray(d)&&d.forEach(function(a){c(a)})}},d([f.Autowired("expressionService"),e("design:type",g.ExpressionService)],a.prototype,"expressionService",void 0),a=d([f.Bean("stylingService")],a)}();b.StylingService=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(4),h=c(6),i=c(10),j=c(43),k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(){this.addDestroyableEventListener(this.eventService,i.Events.EVENT_CELL_MOUSE_OVER,this.onCellMouseOver.bind(this)),this.addDestroyableEventListener(this.eventService,i.Events.EVENT_CELL_MOUSE_OUT,this.onCellMouseOut.bind(this))},b.prototype.onCellMouseOver=function(a){this.currentlySelectedColumn=a.column,this.eventService.dispatchEvent(i.Events.EVENT_COLUMN_HOVER_CHANGED)},b.prototype.onCellMouseOut=function(){this.currentlySelectedColumn=null,this.eventService.dispatchEvent(i.Events.EVENT_COLUMN_HOVER_CHANGED)},b.prototype.isHovered=function(a){return a==this.currentlySelectedColumn},e([h.Autowired("eventService"),f("design:type",g.EventService)],b.prototype,"eventService",void 0),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b=e([h.Bean("columnHoverService")],b)}(j.BeanStub);b.ColumnHoverService=k},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(28),i=c(29),j=c(3),k=c(14),l=c(16),m=c(10),n=c(4),o=c(6),p=c(33),q=c(8),r=c(71),s=c(67),t=c(23),u=c(43),v=c(56),w=c(58),x=c(42),y=c(49),z=c(44),A=y.SvgFactory.getInstance(),B=function(a){function b(){return a.call(this,b.TEMPLATE)||this}return d(b,a),b.prototype.init=function(a){var b=g.Utils.createIconNoSpan("groupLoading",this.gridOptionsWrapper,null,A.createGroupLoadingIcon);this.eLoadingIcon.appendChild(b);var c=this.gridOptionsWrapper.getLocaleTextFunc();this.eLoadingText.innerText=c("loadingOoo","Loading")},b.prototype.refresh=function(a){return!1},b.TEMPLATE='<div class="ag-stub-cell">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',e([o.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([z.RefSelector("eLoadingIcon"),f("design:type",HTMLElement)],b.prototype,"eLoadingIcon",void 0),e([z.RefSelector("eLoadingText"),f("design:type",HTMLElement)],b.prototype,"eLoadingText",void 0),b}(x.Component),C=function(a){function b(b,c,d,e,f,g,h,i,j){var k=a.call(this)||this;return k.eAllRowContainers=[],k.renderedCells={},k.nextVmTurnFunctions=[],k.delayedDestroyFunctions=[],k.startRemoveAnimationFunctions=[],k.editingRow=!1,k.initialised=!1,k.parentScope=b,k.rowRenderer=c,k.bodyContainerComp=d,k.fullWidthContainerComp=e,k.pinnedLeftContainerComp=f,k.pinnedRightContainerComp=g,k.rowNode=h,k.animateIn=i,k.lastPlacedElements=j,k}return d(b,a),b.prototype.setupRowStub=function(a){this.fullWidthRow=!0,this.fullWidthCellRenderer=B,g.Utils.missing(this.fullWidthCellRenderer)&&console.warn("ag-Grid: you need to provide a fullWidthCellRenderer if using isFullWidthCell()"),this.createFullWidthRow(a)},b.prototype.setupRowContainers=function(a){if(this.rowNode.stub)return void this.setupRowStub(a);var b=this.gridOptionsWrapper.getIsFullWidthCellFunc(),c=!!b&&b(this.rowNode),d=this.rowNode.group&&this.gridOptionsWrapper.isGroupUseEntireRow();c?this.setupFullWidthContainers(a):d?this.setupFullWidthGroupContainers(a):this.setupNormalContainers(a)},b.prototype.getAndClearDelayedDestroyFunctions=function(){var a=this.delayedDestroyFunctions;return this.delayedDestroyFunctions=[],a},b.prototype.getAndClearNextVMTurnFunctions=function(){var a=this.nextVmTurnFunctions;return this.nextVmTurnFunctions=[],a},b.prototype.addDomData=function(a){var c=this;this.gridOptionsWrapper.setDomData(a,b.DOM_DATA_KEY_RENDERED_ROW,this),this.addDestroyFunc(function(){c.gridOptionsWrapper.setDomData(a,b.DOM_DATA_KEY_RENDERED_ROW,null)})},b.prototype.ensureInDomAfter=function(a){if(!g.Utils.missing(a)){var b=this.getBodyRowElement();b&&this.bodyContainerComp.ensureDomOrder(b,a.eBody);var c=this.getPinnedLeftRowElement();c&&this.pinnedLeftContainerComp.ensureDomOrder(c,a.eLeft);var d=this.getPinnedRightRowElement();d&&this.pinnedRightContainerComp.ensureDomOrder(d,a.eRight);var e=this.getFullWidthRowElement();e&&this.fullWidthContainerComp.ensureDomOrder(e,a.eFullWidth)}},b.prototype.setupFullWidthContainers=function(a){this.fullWidthRow=!0,this.fullWidthCellRenderer=this.gridOptionsWrapper.getFullWidthCellRenderer(),this.fullWidthCellRendererParams=this.gridOptionsWrapper.getFullWidthCellRendererParams(),g.Utils.missing(this.fullWidthCellRenderer)&&console.warn("ag-Grid: you need to provide a fullWidthCellRenderer if using isFullWidthCell()"),this.createFullWidthRow(a)},b.prototype.addMouseWheelListenerToFullWidthRow=function(){var a=this.gridPanel.genericMouseWheelListener.bind(this.gridPanel);this.addDestroyableEventListener(this.eFullWidthRow,"mousewheel",a),this.addDestroyableEventListener(this.eFullWidthRow,"DOMMouseScroll",a)},b.prototype.setupFullWidthGroupContainers=function(a){this.fullWidthRow=!0,this.fullWidthCellRenderer=this.gridOptionsWrapper.getGroupRowRenderer(),this.fullWidthCellRendererParams=this.gridOptionsWrapper.getGroupRowRendererParams(),this.fullWidthCellRenderer||(this.fullWidthCellRenderer=s.CellRendererFactory.GROUP,this.fullWidthCellRendererParams={innerRenderer:this.gridOptionsWrapper.getGroupRowInnerRenderer()}),this.createFullWidthRow(a)},b.prototype.createFullWidthRow=function(a){var b=this.gridOptionsWrapper.isEmbedFullWidthRows(),c=g.Utils.exists(this.lastPlacedElements);if(b){var d=c?this.lastPlacedElements.eBody:null,e=c?this.lastPlacedElements.eLeft:null,f=c?this.lastPlacedElements.eRight:null;this.eFullWidthRowBody=this.createRowContainer(this.bodyContainerComp,a,d,c),this.eFullWidthRowLeft=this.createRowContainer(this.pinnedLeftContainerComp,a,e,c),this.eFullWidthRowRight=this.createRowContainer(this.pinnedRightContainerComp,a,f,c),g.Utils.addCssClass(this.eFullWidthRowLeft,"ag-cell-last-left-pinned"),g.Utils.addCssClass(this.eFullWidthRowRight,"ag-cell-first-right-pinned")}else{var h=c?this.lastPlacedElements.eFullWidth:null;this.eFullWidthRow=this.createRowContainer(this.fullWidthContainerComp,a,h,c),this.gridOptionsWrapper.isForPrint()||this.addMouseWheelListenerToFullWidthRow()}},b.prototype.setupNormalContainers=function(a){this.fullWidthRow=!1;var b=g.Utils.exists(this.lastPlacedElements),c=b?this.lastPlacedElements.eBody:null,d=b?this.lastPlacedElements.eLeft:null,e=b?this.lastPlacedElements.eRight:null;this.eBodyRow=this.createRowContainer(this.bodyContainerComp,a,c,b),this.gridOptionsWrapper.isForPrint()||(this.ePinnedLeftRow=this.createRowContainer(this.pinnedLeftContainerComp,a,d,b),this.ePinnedRightRow=this.createRowContainer(this.pinnedRightContainerComp,a,e,b))},b.prototype.init=function(){this.forPrint=this.gridOptionsWrapper.isForPrint();var a=this.animateIn&&g.Utils.exists(this.rowNode.oldRowTop);this.setupRowContainers(a),this.scope=this.createChildScopeOrNull(this.rowNode.data),this.fullWidthRow?this.refreshFullWidthComponent():this.refreshCellsIntoRow(),this.addGridClasses(),this.addExpandedAndContractedClasses(),this.addStyleFromRowStyle(),this.addStyleFromRowStyleFunc(),this.addClassesFromRowClass(),this.addClassesFromRowClassFunc(),this.addRowIndexes(),this.addRowIds(),this.setupTop(a),this.setHeight(),this.addRowSelectedListener(),this.addCellFocusedListener(),this.addNodeDataChangedListener(),this.addColumnListener(),this.addHoverFunctionality(),this.gridOptionsWrapper.executeProcessRowPostCreateFunc({eRow:this.eBodyRow,ePinnedLeftRow:this.ePinnedLeftRow,ePinnedRightRow:this.ePinnedRightRow,node:this.rowNode,api:this.gridOptionsWrapper.getApi(),rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}),this.initialised=!0},b.prototype.stopRowEditing=function(a){this.stopEditing(a)},b.prototype.isEditing=function(){if(this.gridOptionsWrapper.isFullRowEdit())return this.editingRow;var a=g.Utils.find(this.renderedCells,function(a){return a&&a.isEditing()});return g.Utils.exists(a)},b.prototype.stopEditing=function(a){if(void 0===a&&(a=!1),this.forEachCellComp(function(b){b.stopEditing(a)}),this.editingRow){if(!a){var b={node:this.rowNode,data:this.rowNode.data,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};this.mainEventService.dispatchEvent(m.Events.EVENT_ROW_VALUE_CHANGED,b)}this.setEditingRow(!1)}},b.prototype.startRowEditing=function(a,b,c){void 0===a&&(a=null),void 0===b&&(b=null),void 0===c&&(c=null),this.editingRow||(this.forEachCellComp(function(d){var e=d===c;e?d.startEditingIfEnabled(a,b,e):d.startEditingIfEnabled(null,null,e)}),this.setEditingRow(!0))},b.prototype.setEditingRow=function(a){this.editingRow=a,this.eAllRowContainers.forEach(function(b){return g.Utils.addOrRemoveCssClass(b,"ag-row-editing",a)});var b=a?m.Events.EVENT_ROW_EDITING_STARTED:m.Events.EVENT_ROW_EDITING_STOPPED;this.mainEventService.dispatchEvent(b,{node:this.rowNode})},b.prototype.angular1Compile=function(a){this.scope&&this.$compile(a)(this.scope)},b.prototype.addColumnListener=function(){var a=this.onDisplayedColumnsChanged.bind(this),b=this.onVirtualColumnsChanged.bind(this),c=this.onGridColumnsChanged.bind(this);this.addDestroyableEventListener(this.mainEventService,m.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,a),this.addDestroyableEventListener(this.mainEventService,m.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,b),this.addDestroyableEventListener(this.mainEventService,m.Events.EVENT_COLUMN_RESIZED,a),this.addDestroyableEventListener(this.mainEventService,m.Events.EVENT_GRID_COLUMNS_CHANGED,c)},b.prototype.onDisplayedColumnsChanged=function(){if(this.fullWidthRow){if(this.gridOptionsWrapper.isEmbedFullWidthRows()){var a=this.fullWidthPinnedLeftLastTime!==this.columnController.isPinningLeft(),b=this.fullWidthPinnedRightLastTime!==this.columnController.isPinningRight();(a||b)&&this.refreshFullWidthComponent()}}else this.refreshCellsIntoRow()},b.prototype.onVirtualColumnsChanged=function(a){this.fullWidthRow||this.refreshCellsIntoRow()},b.prototype.onGridColumnsChanged=function(){var a=Object.keys(this.renderedCells);this.removeRenderedCells(a)},b.prototype.isCellInWrongRow=function(a){var b=a.getColumn(),c=this.getContainerForCell(b.getPinned());return a.getParentRow()!==c},b.prototype.refreshCellsIntoRow=function(){var a=this,b=this.columnController.getAllDisplayedCenterVirtualColumnsForRow(this.rowNode),c=this.columnController.getDisplayedLeftColumnsForRow(this.rowNode),d=this.columnController.getDisplayedRightColumnsForRow(this.rowNode),e=Object.keys(this.renderedCells),f=this.gridOptionsWrapper.isEnsureDomOrder()&&!this.forPrint,h=f?{eLeft:null,eRight:null,eBody:null,eFullWidth:null}:null,i=function(b){var c=a.getOrCreateCell(b);a.ensureCellInCorrectContainer(c,h),g.Utils.removeFromArray(e,b.getColId())};b.forEach(i),c.forEach(i),d.forEach(i),e=g.Utils.filter(e,this.isCellEligibleToBeRemoved.bind(this)),this.removeRenderedCells(e)},b.prototype.isCellEligibleToBeRemoved=function(a){var b=this.columnController.getAllDisplayedColumns(),c=this.renderedCells[a];if(!c)return!0;if(this.isCellInWrongRow(c))return!0;var d=c.isEditing(),e=this.focusedCellController.isCellFocused(c.getGridCell());if(d||e){var f=c.getColumn();return!(b.indexOf(f)>=0)}return!0},b.prototype.removeRenderedCells=function(a){var b=this;a.forEach(function(a){var c=b.renderedCells[a];g.Utils.missing(c)||(c.destroy(),b.renderedCells[a]=null)})},b.prototype.getContainerForCell=function(a){switch(a){case l.Column.PINNED_LEFT:return this.ePinnedLeftRow;case l.Column.PINNED_RIGHT:return this.ePinnedRightRow;default:return this.eBodyRow}},b.prototype.ensureCellInCorrectContainer=function(a,b){var c=a.getGui(),d=a.getColumn(),e=d.getPinned(),f=this.getContainerForCell(e),h=this.getLastPlacedCell(b,e),i=g.Utils.exists(b),j=a.getParentRow();j!==f?(j&&j.removeChild(c),a.setParentRow(f),f.appendChild(c),i?g.Utils.insertWithDomOrder(f,c,h):f.appendChild(c)):i&&g.Utils.ensureDomOrder(f,c,h),this.addToLastPlacedCells(c,b,e)},b.prototype.getLastPlacedCell=function(a,b){if(!a)return null;switch(b){case l.Column.PINNED_LEFT:return a.eLeft;case l.Column.PINNED_RIGHT:return a.eRight;default:return a.eBody}},b.prototype.addToLastPlacedCells=function(a,b,c){if(b)switch(c){case l.Column.PINNED_LEFT:b.eLeft=a;break;case l.Column.PINNED_RIGHT:b.eRight=a;break;default:b.eBody=a}},b.prototype.getOrCreateCell=function(a){var b=a.getColId();if(this.renderedCells[b])return this.renderedCells[b];var c=new h.CellComp(a,this.rowNode,this.scope,this);return this.context.wireBean(c),this.renderedCells[b]=c,this.angular1Compile(c.getGui()),this.editingRow&&c.startEditingIfEnabled(),c},b.prototype.onRowSelected=function(){var a=this.rowNode.isSelected();this.eAllRowContainers.forEach(function(b){return g.Utils.addOrRemoveCssClass(b,"ag-row-selected",a)})},b.prototype.addRowSelectedListener=function(){this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},b.prototype.onMouseEvent=function(a,b){switch(a){case"dblclick":this.onRowDblClick(b);break;case"click":this.onRowClick(b)}},b.prototype.addHoverFunctionality=function(){var a=this;if(!this.gridOptionsWrapper.isSuppressRowHoverClass()){var b=this.rowNode.onMouseEnter.bind(this.rowNode),c=this.rowNode.onMouseLeave.bind(this.rowNode);this.eAllRowContainers.forEach(function(d){a.addDestroyableEventListener(d,"mouseenter",b),a.addDestroyableEventListener(d,"mouseleave",c)});var d=this.addHoverClass.bind(this,!0),e=this.addHoverClass.bind(this,!1);this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_MOUSE_ENTER,d),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_MOUSE_LEAVE,e)}},b.prototype.addHoverClass=function(a){this.eAllRowContainers.forEach(function(b){return g.Utils.addOrRemoveCssClass(b,"ag-row-hover",a)})},b.prototype.setRowFocusClasses=function(){var a=this.focusedCellController.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);a!==this.rowFocusedLastTime&&(this.eAllRowContainers.forEach(function(b){return g.Utils.addOrRemoveCssClass(b,"ag-row-focus",a)}),this.eAllRowContainers.forEach(function(b){return g.Utils.addOrRemoveCssClass(b,"ag-row-no-focus",!a)}),this.rowFocusedLastTime=a),!a&&this.editingRow&&this.stopEditing(!1)},b.prototype.addCellFocusedListener=function(){this.addDestroyableEventListener(this.mainEventService,m.Events.EVENT_CELL_FOCUSED,this.setRowFocusClasses.bind(this)),this.addDestroyableEventListener(this.mainEventService,m.Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_ROW_INDEX_CHANGED,this.setRowFocusClasses.bind(this)),this.setRowFocusClasses()},b.prototype.onPaginationChanged=function(){this.onTopChanged()},b.prototype.forEachCellComp=function(a){g.Utils.iterateObject(this.renderedCells,function(b,c){c&&a(c)})},b.prototype.onNodeDataChanged=function(a){this.forEachCellComp(function(b){return b.refreshCell({suppressFlash:!a.update,newData:!a.update})}),this.onRowSelected(),this.addStyleFromRowStyleFunc(),this.addClassesFromRowClass()},b.prototype.addNodeDataChangedListener=function(){
this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_DATA_CHANGED,this.onNodeDataChanged.bind(this))},b.prototype.onTopChanged=function(){this.gridOptionsWrapper.isForPrint()||this.gridOptionsWrapper.isAutoHeight()||this.setRowTop(this.rowNode.rowTop)},b.prototype.setRowTop=function(a){if(g.Utils.exists(a)){var b=void 0;b=this.rowNode.isRowPinned()?a:a-this.paginationProxy.getPixelOffset();var c=b+"px";this.eAllRowContainers.forEach(function(a){return a.style.top=c})}},b.prototype.setupTop=function(a){if(!this.gridOptionsWrapper.isForPrint()){var b=this.onTopChanged.bind(this);this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_TOP_CHANGED,b),a||this.onTopChanged()}},b.prototype.setHeight=function(){var a=this,b=function(){if(g.Utils.exists(a.rowNode.rowHeight)){var b=a.rowNode.rowHeight+"px";a.eAllRowContainers.forEach(function(a){return a.style.height=b})}};this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_HEIGHT_CHANGED,b),b()},b.prototype.addRowIndexes=function(){var a=this,b=function(){var b=a.rowNode.rowIndex.toString();a.rowNode.rowPinned===q.Constants.PINNED_BOTTOM?b="fb-"+b:a.rowNode.rowPinned===q.Constants.PINNED_TOP&&(b="ft-"+b),a.eAllRowContainers.forEach(function(c){c.setAttribute("row",b);var d=a.rowNode.rowIndex%2==0;g.Utils.addOrRemoveCssClass(c,"ag-row-even",d),g.Utils.addOrRemoveCssClass(c,"ag-row-odd",!d)})};this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_ROW_INDEX_CHANGED,b),b()},b.prototype.addRowIds=function(){if("function"==typeof this.gridOptionsWrapper.getBusinessKeyForNodeFunc()){var a=this.gridOptionsWrapper.getBusinessKeyForNodeFunc()(this.rowNode);"string"!=typeof a&&"number"!=typeof a||this.eAllRowContainers.forEach(function(b){return b.setAttribute("row-id",a)})}},b.prototype.addEventListener=function(a,c){"renderedRowRemoved"===a&&(a=b.EVENT_ROW_REMOVED,console.warn("ag-Grid: Since version 11, event renderedRowRemoved is now called "+b.EVENT_ROW_REMOVED)),this.renderedRowEventService||(this.renderedRowEventService=new n.EventService),this.renderedRowEventService.addEventListener(a,c)},b.prototype.removeEventListener=function(a,c){"renderedRowRemoved"===a&&(a=b.EVENT_ROW_REMOVED,console.warn("ag-Grid: Since version 11, event renderedRowRemoved is now called "+b.EVENT_ROW_REMOVED)),this.renderedRowEventService.removeEventListener(a,c)},b.prototype.getRenderedCellForColumn=function(a){return this.renderedCells[a.getColId()]},b.prototype.getCellForCol=function(a){var b=this.renderedCells[a.getColId()];return b?b.getGui():null},b.prototype.destroy=function(c){var d=this;if(void 0===c&&(c=!1),a.prototype.destroy.call(this),this.destroyScope(),this.destroyFullWidthComponent(),c)this.startRemoveAnimationFunctions.forEach(function(a){return a()}),this.delayedDestroyFunctions.push(function(){d.forEachCellComp(function(a){return a.destroy()})});else{this.forEachCellComp(function(a){return a.destroy()});this.getAndClearDelayedDestroyFunctions().forEach(function(a){return a()})}this.renderedRowEventService&&this.renderedRowEventService.dispatchEvent(b.EVENT_ROW_REMOVED,{node:this.rowNode});var e={node:this.rowNode,rowIndex:this.rowNode.rowIndex};this.mainEventService.dispatchEvent(m.Events.EVENT_VIRTUAL_ROW_REMOVED,e)},b.prototype.destroyScope=function(){this.scope&&(this.scope.$destroy(),this.scope=null)},b.prototype.isGroup=function(){return!0===this.rowNode.group},b.prototype.refreshFullWidthComponent=function(){this.destroyFullWidthComponent(),this.createFullWidthComponent()},b.prototype.createFullWidthComponent=function(){if(this.fullWidthPinnedLeftLastTime=this.columnController.isPinningLeft(),this.fullWidthPinnedRightLastTime=this.columnController.isPinningRight(),this.eFullWidthRow){var a=this.createFullWidthParams(this.eFullWidthRow,null);this.fullWidthRowComponent=this.cellRendererService.useCellRenderer(this.fullWidthCellRenderer,this.eFullWidthRow,a),this.angular1Compile(this.eFullWidthRow)}if(this.eFullWidthRowBody){var a=this.createFullWidthParams(this.eFullWidthRowBody,null);this.fullWidthRowComponentBody=this.cellRendererService.useCellRenderer(this.fullWidthCellRenderer,this.eFullWidthRowBody,a),this.angular1Compile(this.eFullWidthRowBody)}if(this.eFullWidthRowLeft){var a=this.createFullWidthParams(this.eFullWidthRowLeft,l.Column.PINNED_LEFT);this.fullWidthRowComponentLeft=this.cellRendererService.useCellRenderer(this.fullWidthCellRenderer,this.eFullWidthRowLeft,a),this.angular1Compile(this.eFullWidthRowLeft)}if(this.eFullWidthRowRight){var a=this.createFullWidthParams(this.eFullWidthRowRight,l.Column.PINNED_RIGHT);this.fullWidthRowComponentRight=this.cellRendererService.useCellRenderer(this.fullWidthCellRenderer,this.eFullWidthRowRight,a),this.angular1Compile(this.eFullWidthRowRight)}},b.prototype.destroyFullWidthComponent=function(){this.fullWidthRowComponent&&(this.fullWidthRowComponent.destroy&&this.fullWidthRowComponent.destroy(),this.fullWidthRowComponent=null),this.fullWidthRowComponentBody&&(this.fullWidthRowComponentBody.destroy&&this.fullWidthRowComponentBody.destroy(),this.fullWidthRowComponent=null),this.fullWidthRowComponentLeft&&(this.fullWidthRowComponentLeft.destroy&&this.fullWidthRowComponentLeft.destroy(),this.fullWidthRowComponentLeft=null),this.fullWidthRowComponentRight&&(this.fullWidthRowComponentRight.destroy&&this.fullWidthRowComponentRight.destroy(),this.fullWidthRowComponent=null),this.eFullWidthRow&&g.Utils.removeAllChildren(this.eFullWidthRow),this.eFullWidthRowBody&&g.Utils.removeAllChildren(this.eFullWidthRowBody),this.eFullWidthRowLeft&&g.Utils.removeAllChildren(this.eFullWidthRowLeft),this.eFullWidthRowRight&&g.Utils.removeAllChildren(this.eFullWidthRowRight)},b.prototype.createFullWidthParams=function(a,b){var c={data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,$scope:this.scope,rowIndex:this.rowNode.rowIndex,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),eGridCell:a,eParentOfValue:a,pinned:b,addRenderedRowListener:this.addEventListener.bind(this),colDef:{cellRenderer:this.fullWidthCellRenderer,cellRendererParams:this.fullWidthCellRendererParams}};return this.fullWidthCellRendererParams&&g.Utils.assign(c,this.fullWidthCellRendererParams),c},b.prototype.createChildScopeOrNull=function(a){if(this.gridOptionsWrapper.isAngularCompileRows()){var b=this.parentScope.$new();return b.data=a,b.rowNode=this.rowNode,b.context=this.gridOptionsWrapper.getContext(),b}return null},b.prototype.addStyleFromRowStyle=function(){var a=this.gridOptionsWrapper.getRowStyle();a&&("function"==typeof a?console.log("ag-Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead"):this.eAllRowContainers.forEach(function(b){return g.Utils.addStylesToElement(b,a)}))},b.prototype.addStyleFromRowStyleFunc=function(){var a=this.gridOptionsWrapper.getRowStyleFunc();if(a){var b={data:this.rowNode.data,node:this.rowNode,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext(),$scope:this.scope},c=a(b);this.eAllRowContainers.forEach(function(a){return g.Utils.addStylesToElement(a,c)})}},b.prototype.createParams=function(){return{node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,$scope:this.scope,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()}},b.prototype.createEvent=function(a,b){var c=this.createParams();return c.event=a,c.eventSource=b,c},b.prototype.createRowContainer=function(a,b,c,d){var e=this,f=document.createElement("div");return f.setAttribute("role","row"),this.addDomData(f),a.appendRowElement(f,c,d),this.eAllRowContainers.push(f),this.delayedDestroyFunctions.push(function(){a.removeRowElement(f)}),this.startRemoveAnimationFunctions.push(function(){if(g.Utils.addCssClass(f,"ag-opacity-zero"),g.Utils.exists(e.rowNode.rowTop)){var a=e.roundRowTopToBounds(e.rowNode.rowTop);e.setRowTop(a)}}),this.animateIn&&this.animateRowIn(f,b),f},b.prototype.animateRowIn=function(a,b){if(b){var c=this.roundRowTopToBounds(this.rowNode.oldRowTop);this.setRowTop(c),this.nextVmTurnFunctions.push(this.onTopChanged.bind(this))}else g.Utils.addCssClass(a,"ag-opacity-zero"),this.nextVmTurnFunctions.push(function(){return g.Utils.removeCssClass(a,"ag-opacity-zero")})},b.prototype.roundRowTopToBounds=function(a){var b=this.gridPanel.getVerticalPixelRange(),c=b.top-100,d=b.bottom+100;return a<c?c:a>d?d:a},b.prototype.onRowDblClick=function(a){var b=this.createEvent(a,this);this.mainEventService.dispatchEvent(m.Events.EVENT_ROW_DOUBLE_CLICKED,b)},b.prototype.onRowClick=function(a){var b=this.createEvent(a,this);this.mainEventService.dispatchEvent(m.Events.EVENT_ROW_CLICKED,b);var c=a.ctrlKey||a.metaKey,d=a.shiftKey;this.rowNode.group||this.rowNode.rowPinned||this.gridOptionsWrapper.isRowSelection()&&(this.gridOptionsWrapper.isSuppressRowClickSelection()||(this.rowNode.isSelected()?c?this.gridOptionsWrapper.isRowDeselection()&&this.rowNode.setSelectedParams({newValue:!1}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!0}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!c,rangeSelect:d})))},b.prototype.getRowNode=function(){return this.rowNode},b.prototype.addClassesFromRowClassFunc=function(){var a=this,b=[],c=this.gridOptionsWrapper.getRowClassFunc();if(c){var d={node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()},e=c(d);e&&("string"==typeof e?b.push(e):Array.isArray(e)&&e.forEach(function(a){b.push(a)}))}b.forEach(function(b){a.eAllRowContainers.forEach(function(a){return g.Utils.addCssClass(a,b)})})},b.prototype.addGridClasses=function(){var a=this,b=[];b.push("ag-row"),b.push("ag-row-no-focus"),this.gridOptionsWrapper.isAnimateRows()?b.push("ag-row-animation"):b.push("ag-row-no-animation"),this.rowNode.isSelected()&&b.push("ag-row-selected"),this.rowNode.group?(b.push("ag-row-group"),b.push("ag-row-level-"+this.rowNode.level),this.rowNode.footer&&b.push("ag-row-footer")):this.rowNode.parent?b.push("ag-row-level-"+(this.rowNode.parent.level+1)):b.push("ag-row-level-0"),this.rowNode.stub&&b.push("ag-row-stub"),this.fullWidthRow&&b.push("ag-full-width-row"),b.forEach(function(b){a.eAllRowContainers.forEach(function(a){return g.Utils.addCssClass(a,b)})})},b.prototype.addExpandedAndContractedClasses=function(){var a=this;if(this.rowNode.group&&!this.rowNode.footer){var b=function(){var b=a.rowNode.expanded;a.eAllRowContainers.forEach(function(a){return g.Utils.addOrRemoveCssClass(a,"ag-row-group-expanded",b)}),a.eAllRowContainers.forEach(function(a){return g.Utils.addOrRemoveCssClass(a,"ag-row-group-contracted",!b)})};this.addDestroyableEventListener(this.rowNode,i.RowNode.EVENT_EXPANDED_CHANGED,b)}},b.prototype.addClassesFromRowClass=function(){var a=this,b=[],c=this.gridOptionsWrapper.getRowClass();c&&("function"==typeof c?console.warn("ag-Grid: rowClass should not be a function, please use getRowClass instead"):"string"==typeof c?b.push(c):Array.isArray(c)&&c.forEach(function(a){b.push(a)})),b.forEach(function(b){a.eAllRowContainers.forEach(function(a){return g.Utils.addCssClass(a,b)})})},b.prototype.getPinnedLeftRowElement=function(){return this.ePinnedLeftRow?this.ePinnedLeftRow:this.eFullWidthRowLeft},b.prototype.getPinnedRightRowElement=function(){return this.ePinnedRightRow?this.ePinnedRightRow:this.eFullWidthRowRight},b.prototype.getBodyRowElement=function(){return this.eBodyRow?this.eBodyRow:this.eFullWidthRowBody},b.prototype.getFullWidthRowElement=function(){return this.eFullWidthRow},b.EVENT_ROW_REMOVED="rowRemoved",b.DOM_DATA_KEY_RENDERED_ROW="renderedRow",e([o.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([o.Autowired("columnController"),f("design:type",k.ColumnController)],b.prototype,"columnController",void 0),e([o.Autowired("columnAnimationService"),f("design:type",v.ColumnAnimationService)],b.prototype,"columnAnimationService",void 0),e([o.Autowired("$compile"),f("design:type",Object)],b.prototype,"$compile",void 0),e([o.Autowired("eventService"),f("design:type",n.EventService)],b.prototype,"mainEventService",void 0),e([o.Autowired("context"),f("design:type",o.Context)],b.prototype,"context",void 0),e([o.Autowired("focusedCellController"),f("design:type",p.FocusedCellController)],b.prototype,"focusedCellController",void 0),e([o.Autowired("cellRendererService"),f("design:type",r.CellRendererService)],b.prototype,"cellRendererService",void 0),e([o.Autowired("gridPanel"),f("design:type",t.GridPanel)],b.prototype,"gridPanel",void 0),e([o.Autowired("paginationProxy"),f("design:type",w.PaginationProxy)],b.prototype,"paginationProxy",void 0),e([o.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(u.BeanStub);b.RowComp=C},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(7),g=c(3),h=c(6),i=function(){function a(a){this.childCount=0,this.eContainer=a.eContainer,this.eViewport=a.eViewport,this.hideWhenNoChildren=a.hideWhenNoChildren,this.checkVisibility()}return a.prototype.setHeight=function(a){this.eContainer.style.height=a+"px"},a.prototype.appendRowElement=function(a,b,c){c?f.Utils.insertWithDomOrder(this.eContainer,a,b):this.eContainer.appendChild(a),this.childCount++,this.checkVisibility()},a.prototype.ensureDomOrder=function(a,b){f.Utils.ensureDomOrder(this.eContainer,a,b)},a.prototype.removeRowElement=function(a){this.eContainer.removeChild(a),this.childCount--,this.checkVisibility()},a.prototype.checkVisibility=function(){if(this.hideWhenNoChildren){var a=this.eViewport?this.eViewport:this.eContainer,b=this.childCount>0;this.visible!==b&&(this.visible=b,f.Utils.setVisible(a,b))}},d([h.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a}();b.RowContainerComponent=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(3),h=c(14),i=c(23),j=c(4),k=c(5),l=c(10),m=c(6),n=c(6),o=c(6),p=c(6),q=function(){function a(){this.consuming=!1}return a.prototype.setBeans=function(a){this.logger=a.create("MasterSlaveService")},a.prototype.init=function(){this.eventService.addEventListener(l.Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(l.Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(l.Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(l.Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.eventService.addEventListener(l.Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this))},a.prototype.fireEvent=function(a){if(!this.consuming){var b=this.gridOptionsWrapper.getAlignedGrids();b&&b.forEach(function(b){if(b.api){var c=b.api.__getAlignedGridService();a(c)}})}},a.prototype.onEvent=function(a){this.consuming=!0,a(),this.consuming=!1},a.prototype.fireColumnEvent=function(a){this.fireEvent(function(b){b.onColumnEvent(a)})},a.prototype.fireHorizontalScrollEvent=function(a){this.fireEvent(function(b){b.onScrollEvent(a)})},a.prototype.onScrollEvent=function(a){var b=this;this.onEvent(function(){b.gridPanel.setHorizontalScrollPosition(a)})},a.prototype.getMasterColumns=function(a){var b=[];return a.getColumn()&&b.push(a.getColumn()),a.getColumns()&&a.getColumns().forEach(function(a){b.push(a)}),b},a.prototype.getColumnIds=function(a){var b=[];return a.getColumn()?b.push(a.getColumn().getColId()):a.getColumns()&&a.getColumns().forEach(function(a){b.push(a.getColId())}),b},a.prototype.onColumnEvent=function(a){var b=this;this.onEvent(function(){var c,d=a.getColumn();if(d&&(c=b.columnController.getPrimaryColumn(d.getColId())),!d||c){var e,f=a.getColumnGroup();if(f){var g=f.getGroupId(),h=f.getInstanceId();e=b.columnController.getColumnGroup(g,h)}if(!f||e){var i=b.getColumnIds(a),j=b.getMasterColumns(a);switch(a.getType()){case l.Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("ag-Grid: pivoting is not supported with Master / Slave grids. You can only use one of these features at a time in a grid.");break;case l.Events.EVENT_COLUMN_MOVED:b.logger.log("onColumnEvent-> processing "+a+" toIndex = "+a.getToIndex()),b.columnController.moveColumns(i,a.getToIndex());break;case l.Events.EVENT_COLUMN_VISIBLE:b.logger.log("onColumnEvent-> processing "+a+" visible = "+a.isVisible()),b.columnController.setColumnsVisible(i,a.isVisible());break;case l.Events.EVENT_COLUMN_PINNED:b.logger.log("onColumnEvent-> processing "+a+" pinned = "+a.getPinned()),b.columnController.setColumnsPinned(i,a.getPinned());break;case l.Events.EVENT_COLUMN_GROUP_OPENED:b.logger.log("onColumnEvent-> processing "+a+" expanded = "+f.isExpanded()),b.columnController.setColumnGroupOpened(e,f.isExpanded());break;case l.Events.EVENT_COLUMN_RESIZED:j.forEach(function(c){b.logger.log("onColumnEvent-> processing "+a+" actualWidth = "+c.getActualWidth()),b.columnController.setColumnWidth(c.getColId(),c.getActualWidth(),a.isFinished())})}}}})},d([o.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([o.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([o.Autowired("gridPanel"),e("design:type",i.GridPanel)],a.prototype,"gridPanel",void 0),d([o.Autowired("eventService"),e("design:type",j.EventService)],a.prototype,"eventService",void 0),d([f(0,n.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[k.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),d([p.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([m.Bean("alignedGridsService")],a)}();b.AlignedGridsService=q},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(3),g=c(29),h=c(6),i=c(4),j=c(6),k=c(10),l=c(6),m=c(8),n=c(7),o=function(){function a(){}return a.prototype.init=function(){this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData()),this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData())},a.prototype.isEmpty=function(a){var b=a===m.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;return n.Utils.missingOrEmpty(b)},a.prototype.isRowsToRender=function(a){return!this.isEmpty(a)},a.prototype.getRowAtPixel=function(a,b){var c=b===m.Constants.PINNED_TOP?this.pinnedTopRows:this.pinnedBottomRows;if(n.Utils.missingOrEmpty(c))return 0;for(var d=0;d<c.length;d++){var e=c[d];if(e.rowTop+e.rowHeight-1>=a)return d}return c.length-1},a.prototype.setPinnedTopRowData=function(a){this.pinnedTopRows=this.createNodesFromData(a,!0),this.eventService.dispatchEvent(k.Events.EVENT_PINNED_ROW_DATA_CHANGED)},a.prototype.setPinnedBottomRowData=function(a){this.pinnedBottomRows=this.createNodesFromData(a,!1),this.eventService.dispatchEvent(k.Events.EVENT_PINNED_ROW_DATA_CHANGED)},a.prototype.createNodesFromData=function(a,b){var c=this,d=[];if(a){var e=0;a.forEach(function(a,f){var h=new g.RowNode;c.context.wireBean(h),h.data=a,h.rowPinned=b?m.Constants.PINNED_TOP:m.Constants.PINNED_BOTTOM,h.setRowTop(e),h.setRowHeight(c.gridOptionsWrapper.getRowHeightForNode(h)),h.setRowIndex(f),e+=h.rowHeight,d.push(h)})}return d},a.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},a.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},a.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},a.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},a.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},a.prototype.getPinnedTopRow=function(a){return this.pinnedTopRows[a]},a.prototype.getPinnedBottomRow=function(a){return this.pinnedBottomRows[a]},a.prototype.forEachPinnedTopRow=function(a){n.Utils.missingOrEmpty(this.pinnedTopRows)||this.pinnedTopRows.forEach(a)},a.prototype.forEachPinnedBottomRow=function(a){n.Utils.missingOrEmpty(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(a)},a.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},a.prototype.getTotalHeight=function(a){if(a&&0!==a.length){var b=a[a.length-1];return b.rowTop+b.rowHeight}return 0},d([j.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([j.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([j.Autowired("context"),e("design:type",h.Context)],a.prototype,"context",void 0),d([l.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([h.Bean("pinnedRowModel")],a)}();b.PinnedRowModel=o},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(8),h=c(14),i=c(7),j=c(35),k=c(34),l=c(3),m=c(79),n=function(){function a(){}return a.prototype.getNextCellToFocus=function(a,b){switch(a){case g.Constants.KEY_UP:return this.getCellAbove(b);case g.Constants.KEY_DOWN:return this.getCellBelow(b);case g.Constants.KEY_RIGHT:return this.gridOptionsWrapper.isEnableRtl()?this.getCellToLeft(b):this.getCellToRight(b);case g.Constants.KEY_LEFT:return this.gridOptionsWrapper.isEnableRtl()?this.getCellToRight(b):this.getCellToLeft(b);default:console.log("ag-Grid: unknown key for navigation "+a)}},a.prototype.getCellToLeft=function(a){var b=this.columnController.getDisplayedColBefore(a.column);if(b){var c={rowIndex:a.rowIndex,column:b,floating:a.floating};return new k.GridCell(c)}return null},a.prototype.getCellToRight=function(a){var b=this.columnController.getDisplayedColAfter(a.column);if(b){var c={rowIndex:a.rowIndex,column:b,floating:a.floating};return new k.GridCell(c)}return null},a.prototype.getRowBelow=function(a){return this.isLastRowInContainer(a)?a.isFloatingBottom()?null:a.isNotFloating()?this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_BOTTOM)?new j.GridRow(0,g.Constants.PINNED_BOTTOM):null:this.rowModel.isRowsToRender()?new j.GridRow(0,null):this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_BOTTOM)?new j.GridRow(0,g.Constants.PINNED_BOTTOM):null:new j.GridRow(a.rowIndex+1,a.floating)},a.prototype.getCellBelow=function(a){var b=this.getRowBelow(a.getGridRow());if(b){var c={rowIndex:b.rowIndex,column:a.column,floating:b.floating};return new k.GridCell(c)}return null},a.prototype.isLastRowInContainer=function(a){if(a.isFloatingTop()){return this.pinnedRowModel.getPinnedTopRowData().length-1===a.rowIndex}if(a.isFloatingBottom()){return this.pinnedRowModel.getPinnedBottomRowData().length-1===a.rowIndex}return this.rowModel.getPageLastRow()===a.rowIndex},a.prototype.getRowAbove=function(a){return 0===a.rowIndex?a.isFloatingTop()?null:a.isNotFloating()?this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_TOP)?this.getLastFloatingTopRow():null:this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender(g.Constants.PINNED_TOP)?this.getLastFloatingTopRow():null:new j.GridRow(a.rowIndex-1,a.floating)},a.prototype.getCellAbove=function(a){var b=this.getRowAbove(a.getGridRow());if(b){var c={rowIndex:b.rowIndex,column:a.column,floating:b.floating};return new k.GridCell(c)}return null},a.prototype.getLastBodyCell=function(){var a=this.rowModel.getPageLastRow();return new j.GridRow(a,null)},a.prototype.getLastFloatingTopRow=function(){var a=this.pinnedRowModel.getPinnedTopRowData().length-1;return new j.GridRow(a,g.Constants.PINNED_TOP)},a.prototype.getNextTabbedCell=function(a,b){return b?this.getNextTabbedCellBackwards(a):this.getNextTabbedCellForwards(a)},a.prototype.getNextTabbedCellForwards=function(a){var b=this.columnController.getAllDisplayedColumns(),c=a.rowIndex,d=a.floating,e=this.columnController.getDisplayedColAfter(a.column);if(!e){e=b[0];var f=this.getRowBelow(a.getGridRow());if(i.Utils.missing(f))return;c=f.rowIndex,d=f.floating}var g={rowIndex:c,column:e,floating:d};return new k.GridCell(g)},a.prototype.getNextTabbedCellBackwards=function(a){var b=this.columnController.getAllDisplayedColumns(),c=a.rowIndex,d=a.floating,e=this.columnController.getDisplayedColBefore(a.column);if(!e){e=b[b.length-1];var f=this.getRowAbove(a.getGridRow());if(i.Utils.missing(f))return;c=f.rowIndex,d=f.floating}var g={rowIndex:c,column:e,floating:d};return new k.GridCell(g)},d([f.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([f.Autowired("pinnedRowModel"),e("design:type",m.PinnedRowModel)],a.prototype,"pinnedRowModel",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",l.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("cellNavigationService")],a)}();b.CellNavigationService=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(3),g=c(14),h=c(23),i=c(16),j=c(6),k=c(82),l=c(4),m=c(10),n=c(59),o=function(){function a(){}return a.prototype.init=function(){var a=this;this.eHeaderViewport=this.gridPanel.getHeaderViewport(),this.eRoot=this.gridPanel.getRoot(),this.eHeaderOverlay=this.gridPanel.getHeaderOverlay(),this.centerContainer=new k.HeaderContainer(this.gridPanel.getHeaderContainer(),this.gridPanel.getHeaderViewport(),this.eRoot,null),this.childContainers=[this.centerContainer],this.gridOptionsWrapper.isForPrint()||(this.pinnedLeftContainer=new k.HeaderContainer(this.gridPanel.getPinnedLeftHeader(),null,this.eRoot,i.Column.PINNED_LEFT),this.pinnedRightContainer=new k.HeaderContainer(this.gridPanel.getPinnedRightHeader(),null,this.eRoot,i.Column.PINNED_RIGHT),this.childContainers.push(this.pinnedLeftContainer),this.childContainers.push(this.pinnedRightContainer)),this.childContainers.forEach(function(b){return a.context.wireBean(b)}),this.eventService.addEventListener(m.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.eventService.addEventListener(m.Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshHeader.bind(this)),this.eventService.addEventListener(m.Events.EVENT_COLUMN_RESIZED,this.setPinnedColContainerWidth.bind(this)),this.eventService.addEventListener(m.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.setPinnedColContainerWidth.bind(this)),this.eventService.addEventListener(m.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.columnController.isReady()&&this.refreshHeader()},a.prototype.onScrollVisibilityChanged=function(){this.setPinnedColContainerWidth()},a.prototype.forEachHeaderElement=function(a){this.childContainers.forEach(function(b){return b.forEachHeaderElement(a)})},a.prototype.destroy=function(){this.childContainers.forEach(function(a){return a.destroy()})},a.prototype.onGridColumnsChanged=function(){this.setHeight()},a.prototype.refreshHeader=function(){this.setHeight(),this.childContainers.forEach(function(a){return a.refresh()}),this.setPinnedColContainerWidth()},a.prototype.setHeight=function(){if(this.eHeaderOverlay){var a=this.gridOptionsWrapper.getHeaderHeight(),b=this.columnController.getHeaderRowCount();this.eHeaderOverlay.style.height=a+"px",this.eHeaderOverlay.style.top=(b-1)*a+"px"}},a.prototype.setPinnedColContainerWidth=function(){if(!this.gridOptionsWrapper.isForPrint()){var a=this.scrollVisibleService.getPinnedLeftWithScrollWidth(),b=this.scrollVisibleService.getPinnedRightWithScrollWidth();this.eHeaderViewport.style.marginLeft=a+"px",this.eHeaderViewport.style.marginRight=b+"px"}},d([j.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([j.Autowired("columnController"),e("design:type",g.ColumnController)],a.prototype,"columnController",void 0),d([j.Autowired("gridPanel"),e("design:type",h.GridPanel)],a.prototype,"gridPanel",void 0),d([j.Autowired("context"),e("design:type",j.Context)],a.prototype,"context",void 0),d([j.Autowired("eventService"),e("design:type",l.EventService)],a.prototype,"eventService",void 0),d([j.Autowired("scrollVisibleService"),e("design:type",n.ScrollVisibleService)],a.prototype,"scrollVisibleService",void 0),d([j.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([j.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=d([j.Bean("headerRenderer")],a)}();b.HeaderRenderer=o},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(7),g=c(3),h=c(6),i=c(83),j=c(14),k=c(23),l=c(4),m=c(10),n=c(84),o=c(93),p=c(16),q=c(59),r=function(){function a(a,b,c,d){this.headerRowComps=[],this.eContainer=a,this.eRoot=c,this.pinned=d,this.eViewport=b}return a.prototype.forEachHeaderElement=function(a){
this.headerRowComps.forEach(function(b){return b.forEachHeaderElement(a)})},a.prototype.init=function(){this.setupDragAndDrop(),this.eventService.addEventListener(m.Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.eventService.addEventListener(m.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.eventService.addEventListener(m.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.eventService.addEventListener(m.Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.eventService.addEventListener(m.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.eventService.addEventListener(m.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this))},a.prototype.onColumnRowGroupChanged=function(){this.onGridColumnsChanged()},a.prototype.onColumnValueChanged=function(){this.onGridColumnsChanged()},a.prototype.onColumnResized=function(){this.setWidthIfPinnedContainer()},a.prototype.onDisplayedColumnsChanged=function(){this.setWidthIfPinnedContainer()},a.prototype.onScrollVisibilityChanged=function(){this.setWidthIfPinnedContainer()},a.prototype.setWidthIfPinnedContainer=function(){if(this.pinned===p.Column.PINNED_LEFT){var a=this.scrollVisibleService.getPinnedLeftWithScrollWidth();this.eContainer.style.width=a+"px"}else if(this.pinned===p.Column.PINNED_RIGHT){var b=this.scrollVisibleService.getPinnedRightWithScrollWidth();this.eContainer.style.width=b+"px"}},a.prototype.destroy=function(){this.removeHeaderRowComps()},a.prototype.onGridColumnsChanged=function(){this.removeHeaderRowComps(),this.createHeaderRowComps()},a.prototype.refresh=function(){this.onGridColumnsChanged()},a.prototype.setupDragAndDrop=function(){var a=this.eViewport?this.eViewport:this.eContainer,b=new o.BodyDropTarget(this.pinned,a);this.context.wireBean(b)},a.prototype.removeHeaderRowComps=function(){this.headerRowComps.forEach(function(a){a.destroy()}),this.headerRowComps.length=0,f.Utils.removeAllChildren(this.eContainer)},a.prototype.createHeaderRowComps=function(){for(var a=this.columnController.getHeaderRowCount(),b=0;b<a;b++){var c=b!==a-1,d=c?n.HeaderRowType.COLUMN_GROUP:n.HeaderRowType.COLUMN,e=new n.HeaderRowComp(b,d,this.pinned,this.eRoot,this.dropTarget);this.context.wireBean(e),this.headerRowComps.push(e),this.eContainer.appendChild(e.getGui())}if(this.gridOptionsWrapper.isFloatingFilter()&&!this.columnController.isPivotMode()){var e=new n.HeaderRowComp(a,n.HeaderRowType.FLOATING_FILTER,this.pinned,this.eRoot,this.dropTarget);this.context.wireBean(e),this.headerRowComps.push(e),this.eContainer.appendChild(e.getGui())}},d([h.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([h.Autowired("context"),e("design:type",h.Context)],a.prototype,"context",void 0),d([h.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([h.Autowired("dragAndDropService"),e("design:type",i.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([h.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([h.Autowired("gridPanel"),e("design:type",k.GridPanel)],a.prototype,"gridPanel",void 0),d([h.Autowired("eventService"),e("design:type",l.EventService)],a.prototype,"eventService",void 0),d([h.Autowired("scrollVisibleService"),e("design:type",q.ScrollVisibleService)],a.prototype,"scrollVisibleService",void 0),d([h.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a}();b.HeaderContainer=r},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(5),h=c(6),i=c(7),j=c(3),k=c(49),l=c(25),m=c(14),n=k.SvgFactory.getInstance();!function(a){a[a.ToolPanel=0]="ToolPanel",a[a.HeaderCell=1]="HeaderCell"}(b.DragSourceType||(b.DragSourceType={}));var o;!function(a){a[a.Up=0]="Up",a[a.Down=1]="Down"}(o=b.VDirection||(b.VDirection={}));var p;!function(a){a[a.Left=0]="Left",a[a.Right=1]="Right"}(p=b.HDirection||(b.HDirection={}));var q=function(){function a(){this.dragSourceAndParamsList=[],this.dropTargets=[]}return b=a,a.prototype.init=function(){this.ePinnedIcon=i.Utils.createIcon("columnMovePin",this.gridOptionsWrapper,null,n.createPinIcon),this.ePlusIcon=i.Utils.createIcon("columnMoveAdd",this.gridOptionsWrapper,null,n.createPlusIcon),this.eHiddenIcon=i.Utils.createIcon("columnMoveHide",this.gridOptionsWrapper,null,n.createColumnHiddenIcon),this.eMoveIcon=i.Utils.createIcon("columnMoveMove",this.gridOptionsWrapper,null,n.createMoveIcon),this.eLeftIcon=i.Utils.createIcon("columnMoveLeft",this.gridOptionsWrapper,null,n.createLeftIcon),this.eRightIcon=i.Utils.createIcon("columnMoveRight",this.gridOptionsWrapper,null,n.createRightIcon),this.eGroupIcon=i.Utils.createIcon("columnMoveGroup",this.gridOptionsWrapper,null,n.createGroupIcon),this.eAggregateIcon=i.Utils.createIcon("columnMoveValue",this.gridOptionsWrapper,null,n.createAggregationIcon),this.ePivotIcon=i.Utils.createIcon("columnMovePivot",this.gridOptionsWrapper,null,n.createPivotIcon),this.eDropNotAllowedIcon=i.Utils.createIcon("dropNotAllowed",this.gridOptionsWrapper,null,n.createDropNotAllowedIcon)},a.prototype.setBeans=function(a){this.logger=a.create("OldToolPanelDragAndDropService")},a.prototype.addDragSource=function(a,b){void 0===b&&(b=!1);var c={eElement:a.eElement,onDragStart:this.onDragStart.bind(this,a),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this)};this.dragSourceAndParamsList.push({params:c,dragSource:a}),this.dragService.addDragSource(c,b)},a.prototype.removeDragSource=function(a){var b=i.Utils.find(this.dragSourceAndParamsList,function(b){return b.dragSource===a});b&&(this.dragService.removeDragSource(b.params),i.Utils.removeFromArray(this.dragSourceAndParamsList,b))},a.prototype.destroy=function(){var a=this;this.dragSourceAndParamsList.forEach(function(b){a.dragService.removeDragSource(b.params)}),this.dragSourceAndParamsList.length=0},a.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},a.prototype.onDragStart=function(a,b){this.dragging=!0,this.dragSource=a,this.eventLastTime=b,this.dragSource.dragItem.forEach(function(a){return a.setMoving(!0)}),this.dragItem=this.dragSource.dragItem,this.lastDropTarget=this.dragSource.dragSourceDropTarget,this.createGhost()},a.prototype.onDragStop=function(a){if(this.eventLastTime=null,this.dragging=!1,this.dragItem.forEach(function(a){return a.setMoving(!1)}),this.lastDropTarget&&this.lastDropTarget.onDragStop){var b=this.createDropTargetEvent(this.lastDropTarget,a,null,null,!1);this.lastDropTarget.onDragStop(b)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},a.prototype.onDragging=function(a,b){var c=this.workOutHDirection(a),d=this.workOutVDirection(a);this.eventLastTime=a,this.positionGhost(a);var e=i.Utils.find(this.dropTargets,this.isMouseOnDropTarget.bind(this,a));if(e!==this.lastDropTarget)this.leaveLastTargetIfExists(a,c,d,b),this.enterDragTargetIfExists(e,a,c,d,b),this.lastDropTarget=e;else if(e){var f=this.createDropTargetEvent(e,a,c,d,b);e.onDragging(f)}},a.prototype.enterDragTargetIfExists=function(a,b,c,d,e){if(a){var f=this.createDropTargetEvent(a,b,c,d,e);a.onDragEnter(f),this.setGhostIcon(a.getIconName?a.getIconName():null)}},a.prototype.leaveLastTargetIfExists=function(a,b,c,d){if(this.lastDropTarget){var e=this.createDropTargetEvent(this.lastDropTarget,a,b,c,d);this.lastDropTarget.onDragLeave(e),this.setGhostIcon(null)}},a.prototype.getAllContainersFromDropTarget=function(a){var b=[a.getContainer()],c=a.getSecondaryContainers?a.getSecondaryContainers():null;return c&&(b=b.concat(c)),b},a.prototype.isMouseOnDropTarget=function(a,b){var c=this.getAllContainersFromDropTarget(b),d=!1;return c.forEach(function(b){if(b){var c=b.getBoundingClientRect();if(0!==c.width&&0!==c.height){var e=a.clientX>=c.left&&a.clientX<=c.right,f=a.clientY>=c.top&&a.clientY<=c.bottom;e&&f&&(d=!0)}}}),d},a.prototype.addDropTarget=function(a){this.dropTargets.push(a)},a.prototype.workOutHDirection=function(a){return this.eventLastTime.clientX>a.clientX?p.Left:this.eventLastTime.clientX<a.clientX?p.Right:null},a.prototype.workOutVDirection=function(a){return this.eventLastTime.clientY>a.clientY?o.Up:this.eventLastTime.clientY<a.clientY?o.Down:null},a.prototype.createDropTargetEvent=function(a,b,c,d,e){var f=a.getContainer().getBoundingClientRect();return{event:b,x:b.clientX-f.left,y:b.clientY-f.top,vDirection:d,hDirection:c,dragSource:this.dragSource,fromNudge:e}},a.prototype.positionGhost=function(a){var b=this.eGhost.getBoundingClientRect(),c=b.height,d=i.Utils.getBodyWidth()-2,e=i.Utils.getBodyHeight()-2,f=a.pageY-c/2,g=a.pageX-30,h=this.gridOptionsWrapper.getDocument(),j=window.pageYOffset||h.documentElement.scrollTop,k=window.pageXOffset||h.documentElement.scrollLeft;d>0&&g+this.eGhost.clientWidth>d+k&&(g=d+k-this.eGhost.clientWidth),g<0&&(g=0),e>0&&f+this.eGhost.clientHeight>e+j&&(f=e+j-this.eGhost.clientHeight),f<0&&(f=0),this.eGhost.style.left=g+"px",this.eGhost.style.top=f+"px"},a.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},a.prototype.createGhost=function(){this.eGhost=i.Utils.loadTemplate(b.GHOST_TEMPLATE),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null),this.eGhost.querySelector(".ag-dnd-ghost-label").innerHTML=this.dragSource.dragItemName,this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var a=this.gridOptionsWrapper.getDocument();this.eGhostParent=a.querySelector("body"),this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("ag-Grid: could not find document body, it is needed for dragging columns")},a.prototype.setGhostIcon=function(a,c){void 0===c&&(c=!1),i.Utils.removeAllChildren(this.eGhostIcon);var d;switch(a){case b.ICON_ADD:d=this.ePlusIcon;break;case b.ICON_PINNED:d=this.ePinnedIcon;break;case b.ICON_MOVE:d=this.eMoveIcon;break;case b.ICON_LEFT:d=this.eLeftIcon;break;case b.ICON_RIGHT:d=this.eRightIcon;break;case b.ICON_GROUP:d=this.eGroupIcon;break;case b.ICON_AGGREGATE:d=this.eAggregateIcon;break;case b.ICON_PIVOT:d=this.ePivotIcon;break;case b.ICON_NOT_ALLOWED:d=this.eDropNotAllowedIcon;break;default:d=this.eHiddenIcon}this.eGhostIcon.appendChild(d),i.Utils.addOrRemoveCssClass(this.eGhostIcon,"ag-shake-left-to-right",c)},a.ICON_PINNED="pinned",a.ICON_ADD="add",a.ICON_MOVE="move",a.ICON_LEFT="left",a.ICON_RIGHT="right",a.ICON_GROUP="group",a.ICON_AGGREGATE="aggregate",a.ICON_PIVOT="pivot",a.ICON_NOT_ALLOWED="notAllowed",a.GHOST_TEMPLATE='<div class="ag-dnd-ghost">  <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>  <div class="ag-dnd-ghost-label">  </div></div>',d([h.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([h.Autowired("dragService"),e("design:type",l.DragService)],a.prototype,"dragService",void 0),d([h.Autowired("columnController"),e("design:type",m.ColumnController)],a.prototype,"columnController",void 0),d([h.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),d([f(0,h.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[g.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),d([h.PreDestroy,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"destroy",null),a=b=d([h.Bean("dragAndDropService")],a);var b}();b.DragAndDropService=q},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g,h=c(42),i=c(6),j=c(3),k=c(14),l=c(16),m=c(85),n=c(4),o=c(10),p=c(7),q=c(89),r=c(92),s=c(38),t=c(47);!function(a){a[a.COLUMN_GROUP=0]="COLUMN_GROUP",a[a.COLUMN=1]="COLUMN",a[a.FLOATING_FILTER=2]="FLOATING_FILTER"}(g=b.HeaderRowType||(b.HeaderRowType={}));var u=function(a){function b(b,c,d,e,f){var g=a.call(this,'<div class="ag-header-row" role="presentation"/>')||this;return g.headerComps={},g.dept=b,g.type=c,g.pinned=d,g.eRoot=e,g.dropTarget=f,g}return d(b,a),b.prototype.forEachHeaderElement=function(a){var b=this;Object.keys(this.headerComps).forEach(function(c){var d=b.headerComps[c];a(d)})},b.prototype.destroy=function(){var b=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(b),a.prototype.destroy.call(this)},b.prototype.removeAndDestroyChildComponents=function(a){var b=this;a.forEach(function(a){var c=b.headerComps[a];b.getGui().removeChild(c.getGui()),c.destroy&&c.destroy(),delete b.headerComps[a]})},b.prototype.onRowHeightChanged=function(){var a,b,c=this.columnController.getHeaderRowCount(),d=[],e=0;this.columnController.isPivotMode()?(e=0,a=this.gridOptionsWrapper.getPivotGroupHeaderHeight(),b=this.gridOptionsWrapper.getPivotHeaderHeight()):(this.gridOptionsWrapper.isFloatingFilter()&&c++,e=this.gridOptionsWrapper.isFloatingFilter()?1:0,a=this.gridOptionsWrapper.getGroupHeaderHeight(),b=this.gridOptionsWrapper.getHeaderHeight());for(var f=1+e,g=c-f,h=0;h<g;h++)d.push(a);d.push(b);for(var h=0;h<e;h++)d.push(this.gridOptionsWrapper.getFloatingFiltersHeight());for(var i=0,h=0;h<this.dept;h++)i+=d[h];this.getGui().style.top=i+"px",this.getGui().style.height=d[this.dept]+"px"},b.prototype.init=function(){this.onRowHeightChanged(),this.onVirtualColumnsChanged(),this.setWidth(),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.gridOptionsWrapper,j.GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT,this.onRowHeightChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addDestroyableEventListener(this.eventService,o.Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this))},b.prototype.onColumnResized=function(){this.setWidth()},b.prototype.setWidth=function(){var a=this.columnController.getContainerWidth(this.pinned)+"px";this.getGui().style.width=a},b.prototype.onGridColumnsChanged=function(){this.removeAndDestroyAllChildComponents()},b.prototype.removeAndDestroyAllChildComponents=function(){var a=Object.keys(this.headerComps);this.removeAndDestroyChildComponents(a)},b.prototype.onDisplayedColumnsChanged=function(){this.onVirtualColumnsChanged(),this.setWidth()},b.prototype.onVirtualColumnsChanged=function(){var a,b=this,c=Object.keys(this.headerComps),d=this.columnController.getVirtualHeaderGroupRow(this.pinned,this.type==g.FLOATING_FILTER?this.dept-1:this.dept),e=this.gridOptionsWrapper.isEnsureDomOrder();d.forEach(function(d){if(!d.isEmptyGroup()){var f,g=d.getUniqueId(),h=b.getGui(),i=c.indexOf(g)>=0;i?(p.Utils.removeFromArray(c,g),f=b.headerComps[g],e&&p.Utils.ensureDomOrder(h,f.getGui(),a)):(f=b.createHeaderComp(d),b.headerComps[g]=f,e?p.Utils.insertWithDomOrder(h,f.getGui(),a):h.appendChild(f.getGui())),a=f.getGui()}}),this.removeAndDestroyChildComponents(c)},b.prototype.isUsingOldHeaderRenderer=function(a){var b=a.getColDef();return p.Utils.anyExists([this.gridOptionsWrapper.getHeaderCellTemplateFunc(),this.gridOptionsWrapper.getHeaderCellTemplate(),b.headerCellTemplate,b.headerCellRenderer,this.gridOptionsWrapper.getHeaderCellRenderer()])},b.prototype.createHeaderComp=function(a){var b;switch(this.type){case g.COLUMN:b=this.isUsingOldHeaderRenderer(a)?new m.RenderedHeaderCell(a,this.eRoot,this.dropTarget,this.pinned):new q.HeaderWrapperComp(a,this.eRoot,this.dropTarget,this.pinned);break;case g.COLUMN_GROUP:b=new r.HeaderGroupWrapperComp(a,this.eRoot,this.dropTarget,this.pinned);break;case g.FLOATING_FILTER:var c=a;b=this.createFloatingFilterWrapper(c)}return this.context.wireBean(b),b},b.prototype.createFloatingFilterWrapper=function(a){var b=this,c=this.createFloatingFilterParams(a),d=this.componentProvider.newFloatingFilterWrapperComponent(a,c);if(this.addDestroyableEventListener(a,l.Column.EVENT_FILTER_CHANGED,function(){var c=b.filterManager.getFilterComponent(a);d.onParentModelChanged(c.getModel())}),this.filterManager.cachedFilter(a)){var e=this.filterManager.getFilterComponent(a);d.onParentModelChanged(e.getModel())}return d},b.prototype.createFloatingFilterParams=function(a){var b=this;return{column:a,currentParentModel:function(){var c=b.filterManager.getFilterComponent(a);return c.getNullableModel?c.getNullableModel():c.getModel()},onFloatingFilterChanged:function(c){var d=b.filterManager.getFilterComponent(a);return d.onFloatingFilterChanged?d.onFloatingFilterChanged(c):(d.setModel(c),b.filterManager.onFilterChanged(),!0)},suppressFilterButton:!1}},e([i.Autowired("gridOptionsWrapper"),f("design:type",j.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.Autowired("columnController"),f("design:type",k.ColumnController)],b.prototype,"columnController",void 0),e([i.Autowired("context"),f("design:type",i.Context)],b.prototype,"context",void 0),e([i.Autowired("eventService"),f("design:type",n.EventService)],b.prototype,"eventService",void 0),e([i.Autowired("filterManager"),f("design:type",s.FilterManager)],b.prototype,"filterManager",void 0),e([i.Autowired("componentProvider"),f("design:type",t.ComponentProvider)],b.prototype,"componentProvider",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(h.Component);b.HeaderRowComp=u},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(16),i=c(38),j=c(14),k=c(86),l=c(3),m=c(87),n=c(37),o=c(6),p=c(88),q=c(83),r=c(52),s=c(55),t=c(50),u=c(42),v=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.column=b,f.eRoot=c,f.dragSourceDropTarget=d,f.pinned=e,f}return d(b,a),b.prototype.getColumn=function(){return this.column},b.prototype.init=function(){var a=this.headerTemplateLoader.createHeaderElement(this.column);this.setGui(a),this.createScope(),this.addAttributes(),p.CssClassApplier.addHeaderClassesFromColDef(this.column.getColDef(),a,this.gridOptionsWrapper,this.column,null),g.Utils.addCssClass(a,"ag-header-cell");var b=a.querySelector("#agHeaderCellLabel");this.displayName=this.columnController.getDisplayNameForColumn(this.column,"header",!0),this.setupMovingCss(),this.setupTooltip(),this.setupResize(),this.setupTap(),this.setupMove(b),this.setupMenu(),this.setupSort(b),this.setupFilterIcon(),this.setupText(),this.setupWidth(),this.addFeature(this.context,new s.SetLeftFeature(this.column,a))},b.prototype.setupTooltip=function(){var a=this.column.getColDef();a.headerTooltip&&(this.getGui().title=a.headerTooltip)},b.prototype.setupText=function(){var a,b=this.column.getColDef();b.headerCellRenderer?a=b.headerCellRenderer:this.gridOptionsWrapper.getHeaderCellRenderer()&&(a=this.gridOptionsWrapper.getHeaderCellRenderer());var c=this.queryForHtmlElement("#agText");c&&(a?this.useRenderer(this.displayName,a,c):(c.innerHTML=this.displayName,g.Utils.addCssClass(c,"ag-header-cell-text")))},b.prototype.setupFilterIcon=function(){this.eFilterIcon=this.queryForHtmlElement("#agFilter"),this.eFilterIcon&&(this.addDestroyableEventListener(this.column,h.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged())},b.prototype.onFilterChanged=function(){var a=this.column.isFilterActive();g.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-filtered",a),g.Utils.addOrRemoveCssClass(this.eFilterIcon,"ag-hidden",!a)},b.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,h.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this)),this.onColumnWidthChanged()},b.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"},b.prototype.createScope=function(){var a=this;this.gridOptionsWrapper.isAngularCompileHeaders()&&(this.childScope=this.$scope.$new(),this.childScope.colDef=this.column.getColDef(),this.childScope.colDefWrapper=this.column,this.childScope.context=this.gridOptionsWrapper.getContext(),this.addDestroyFunc(function(){a.childScope.$destroy()}))},b.prototype.addAttributes=function(){this.getGui().setAttribute("colId",this.column.getColId())},b.prototype.setupMenu=function(){var a=this,b=this.queryForHtmlElement("#agMenu");if(b){if(!this.menuFactory.isMenuEnabled(this.column)||this.column.getColDef().suppressMenu)return void g.Utils.removeFromParent(b);b.addEventListener("click",function(){return a.showMenu(b)}),this.gridOptionsWrapper.isSuppressMenuHide()||(b.style.opacity="0",this.addGuiEventListener("mouseover",function(){b.style.opacity="1"}),this.addGuiEventListener("mouseout",function(){b.style.opacity="0"}));var c=b.style;c.transition="opacity 0.2s, border 0.2s",c["-webkit-transition"]="opacity 0.2s, border 0.2s"}},b.prototype.showMenu=function(a){this.menuFactory.showMenuAfterButtonClick(this.column,a)},b.prototype.setupMovingCss=function(){this.addDestroyableEventListener(this.column,h.Column.EVENT_MOVING_CHANGED,this.onColumnMovingChanged.bind(this)),this.onColumnMovingChanged()},b.prototype.onColumnMovingChanged=function(){this.column.isMoving()?g.Utils.addCssClass(this.getGui(),"ag-header-cell-moving"):g.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")},b.prototype.setupMove=function(a){var b=this;if(!(this.gridOptionsWrapper.isSuppressMovableColumns()||this.column.getColDef().suppressMovable||this.gridOptionsWrapper.isForPrint())&&a){var c={type:q.DragSourceType.HeaderCell,eElement:a,dragItem:[this.column],dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(c,!0),this.addDestroyFunc(function(){return b.dragAndDropService.removeDragSource(c)})}},b.prototype.setupTap=function(){var a=this;if(!this.gridOptionsWrapper.isSuppressTouch()){var b=new t.TouchListener(this.getGui()),c=function(){a.sortController.progressSort(a.column,!1)},d=function(b){a.gridOptionsWrapper.getApi().showColumnMenuAfterMouseClick(a.column,b)};this.addDestroyableEventListener(b,t.TouchListener.EVENT_TAP,c),this.addDestroyableEventListener(b,t.TouchListener.EVENT_LONG_TAP,d),this.addDestroyFunc(function(){return b.destroy()})}},b.prototype.setupResize=function(){var a=this,b=this.column.getColDef(),c=this.queryForHtmlElement("#agResizeBar");if(c){if(!(this.gridOptionsWrapper.isEnableColResize()&&!b.suppressResize))return void g.Utils.removeFromParent(c);this.horizontalDragService.addDragHandling({eDraggableElement:c,eBody:this.eRoot,cursor:"col-resize",startAfterPixels:0,onDragStart:this.onDragStart.bind(this),onDragging:this.onDragging.bind(this)});!this.gridOptionsWrapper.isSuppressAutoSize()&&!b.suppressAutoSize&&this.addDestroyableEventListener(c,"dblclick",function(){a.columnController.autoSizeColumn(a.column)})}},b.prototype.useRenderer=function(a,b,c){var d,e={colDef:this.column.getColDef(),$scope:this.childScope,context:this.gridOptionsWrapper.getContext(),value:a,api:this.gridOptionsWrapper.getApi(),eHeaderCell:this.getGui()},f=b(e);if(g.Utils.isNodeOrElement(f))d=f;else{var h=document.createElement("span");h.innerHTML=f,d=h}if(this.gridOptionsWrapper.isAngularCompileHeaders()){var i=this.$compile(d)(this.childScope)[0];c.appendChild(i)}else c.appendChild(d)},b.prototype.setupSort=function(a){var b=this,c=this.gridOptionsWrapper.isEnableSorting()&&!this.column.getColDef().suppressSorting,d=this.getGui();if(!c)return g.Utils.removeFromParent(d.querySelector("#agSortAsc")),g.Utils.removeFromParent(d.querySelector("#agSortDesc")),void g.Utils.removeFromParent(d.querySelector("#agNoSort"));g.Utils.addCssClass(d,"ag-header-cell-sortable"),a&&a.addEventListener("click",function(a){b.sortController.progressSort(b.column,a.shiftKey)}),this.eSortAsc=this.queryForHtmlElement("#agSortAsc"),this.eSortDesc=this.queryForHtmlElement("#agSortDesc"),this.eSortNone=this.queryForHtmlElement("#agNoSort"),this.addDestroyableEventListener(this.column,h.Column.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.onSortChanged()},b.prototype.onSortChanged=function(){if(g.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-asc",this.column.isSortAscending()),g.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-desc",this.column.isSortDescending()),g.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-sorted-none",this.column.isSortNone()),this.eSortAsc&&g.Utils.addOrRemoveCssClass(this.eSortAsc,"ag-hidden",!this.column.isSortAscending()),this.eSortDesc&&g.Utils.addOrRemoveCssClass(this.eSortDesc,"ag-hidden",!this.column.isSortDescending()),this.eSortNone){var a=!this.column.getColDef().unSortIcon&&!this.gridOptionsWrapper.isUnSortIcon();g.Utils.addOrRemoveCssClass(this.eSortNone,"ag-hidden",a||!this.column.isSortNone())}},b.prototype.onDragStart=function(){this.startWidth=this.column.getActualWidth()},b.prototype.normaliseDragChange=function(a){var b=a;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==h.Column.PINNED_LEFT&&(b*=-1):this.pinned===h.Column.PINNED_RIGHT&&(b*=-1),b},b.prototype.onDragging=function(a,b){var c=this.normaliseDragChange(a),d=this.startWidth+c;this.columnController.setColumnWidth(this.column,d,b)},e([o.Autowired("context"),f("design:type",o.Context)],b.prototype,"context",void 0),e([o.Autowired("filterManager"),f("design:type",i.FilterManager)],b.prototype,"filterManager",void 0),e([o.Autowired("columnController"),f("design:type",j.ColumnController)],b.prototype,"columnController",void 0),e([o.Autowired("$compile"),f("design:type",Object)],b.prototype,"$compile",void 0),e([o.Autowired("gridCore"),f("design:type",n.GridCore)],b.prototype,"gridCore",void 0),e([o.Autowired("headerTemplateLoader"),f("design:type",k.HeaderTemplateLoader)],b.prototype,"headerTemplateLoader",void 0),e([o.Autowired("horizontalDragService"),f("design:type",m.HorizontalDragService)],b.prototype,"horizontalDragService",void 0),e([o.Autowired("menuFactory"),f("design:type",Object)],b.prototype,"menuFactory",void 0),e([o.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([o.Autowired("dragAndDropService"),f("design:type",q.DragAndDropService)],b.prototype,"dragAndDropService",void 0),e([o.Autowired("sortController"),f("design:type",r.SortController)],b.prototype,"sortController",void 0),e([o.Autowired("$scope"),f("design:type",Object)],b.prototype,"$scope",void 0),e([o.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(u.Component);b.RenderedHeaderCell=v},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(7),g=c(49),h=c(3),i=c(6),j=g.SvgFactory.getInstance(),k=function(){function a(){}return b=a,a.prototype.createHeaderElement=function(a){var b={column:a,colDef:a.getColDef,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()},c=a.getColDef().headerCellTemplate;if("function"==typeof c){c=c(b)}if(!c&&this.gridOptionsWrapper.getHeaderCellTemplate()&&(c=this.gridOptionsWrapper.getHeaderCellTemplate()),!c&&this.gridOptionsWrapper.getHeaderCellTemplateFunc()){c=this.gridOptionsWrapper.getHeaderCellTemplateFunc()(b)}c||(c=this.createDefaultHeaderElement(a));var d;return"string"==typeof c?d=f.Utils.loadTemplate(c):f.Utils.isNodeOrElement(c)?d=c:console.error("ag-Grid: header template must be a string or an HTML element"),d},a.prototype.createDefaultHeaderElement=function(a){var c=f.Utils.loadTemplate(b.HEADER_CELL_TEMPLATE);return this.addInIcon(c,"sortAscending","#agSortAsc",a,j.createArrowUpSvg),this.addInIcon(c,"sortDescending","#agSortDesc",a,j.createArrowDownSvg),this.addInIcon(c,"sortUnSort","#agNoSort",a,j.createArrowUpDownSvg),this.addInIcon(c,"menu","#agMenu",a,j.createMenuSvg),this.addInIcon(c,"filter","#agFilter",a,j.createFilterSvg),c},a.prototype.addInIcon=function(a,b,c,d,e){var g=f.Utils.createIconNoSpan(b,this.gridOptionsWrapper,d,e);a.querySelector(c).appendChild(g)},
a.HEADER_CELL_TEMPLATE='<div class="ag-header-cell">  <div id="agResizeBar" class="ag-header-cell-resize"></div>  <span id="agMenu" class="ag-header-icon ag-header-cell-menu-button"></span>  <div id="agHeaderCellLabel" class="ag-header-cell-label">    <span id="agSortAsc" class="ag-header-icon ag-sort-ascending-icon"></span>    <span id="agSortDesc" class="ag-header-icon ag-sort-descending-icon"></span>    <span id="agNoSort" class="ag-header-icon ag-sort-none-icon"></span>    <span id="agFilter" class="ag-header-icon ag-filter-icon"></span>    <span id="agText" class="ag-header-cell-text"></span>  </div></div>',d([i.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=b=d([i.Bean("headerTemplateLoader")],a);var b}();b.HeaderTemplateLoader=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(3),g=c(6),h=function(){function a(){}return a.prototype.addDragHandling=function(a){var b=this;a.eDraggableElement.addEventListener("mousedown",function(c){var d=b.gridOptionsWrapper.getDocument(),e=d.querySelector("body");new i(a,c,e)})},d([g.Autowired("gridOptionsWrapper"),e("design:type",f.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([g.Bean("horizontalDragService")],a)}();b.HorizontalDragService=h;var i=function(){function a(a,b,c){this.mouseMove=this.onMouseMove.bind(this),this.mouseUp=this.onMouseUp.bind(this),this.mouseLeave=this.onMouseLeave.bind(this),this.lastDelta=0,this.params=a,this.eDragParent=c,this.dragStartX=b.clientX,this.startEvent=b,this.eDragParent.addEventListener("mousemove",this.mouseMove),this.eDragParent.addEventListener("mouseup",this.mouseUp),this.eDragParent.addEventListener("mouseleave",this.mouseLeave),this.draggingStarted=!1,"number"==typeof a.startAfterPixels&&a.startAfterPixels>0||this.startDragging()}return a.prototype.startDragging=function(){this.draggingStarted=!0,this.oldBodyCursor=this.params.eBody.style.cursor,this.oldParentCursor=this.eDragParent.style.cursor,this.oldMsUserSelect=this.eDragParent.style.msUserSelect,this.oldWebkitUserSelect=this.eDragParent.style.webkitUserSelect,this.params.eBody.style.cursor=this.params.cursor,this.eDragParent.style.cursor=this.params.cursor,this.eDragParent.style.msUserSelect="none",this.eDragParent.style.webkitUserSelect="none",this.params.onDragStart(this.startEvent)},a.prototype.onMouseMove=function(a){var b=a.clientX;if(this.lastDelta=b-this.dragStartX,!this.draggingStarted){Math.abs(this.lastDelta)>=this.params.startAfterPixels&&this.startDragging()}this.draggingStarted&&this.params.onDragging(this.lastDelta,!1)},a.prototype.onMouseUp=function(){this.stopDragging()},a.prototype.onMouseLeave=function(){this.stopDragging()},a.prototype.stopDragging=function(){this.draggingStarted&&(this.params.eBody.style.cursor=this.oldBodyCursor,this.eDragParent.style.cursor=this.oldParentCursor,this.eDragParent.style.msUserSelect=this.oldMsUserSelect,this.eDragParent.style.webkitUserSelect=this.oldWebkitUserSelect,this.params.onDragging(this.lastDelta,!0)),this.eDragParent.removeEventListener("mousemove",this.mouseMove),this.eDragParent.removeEventListener("mouseup",this.mouseUp),this.eDragParent.removeEventListener("mouseleave",this.mouseLeave)},a}()},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(7),e=function(){function a(){}return a.addHeaderClassesFromColDef=function(a,b,c,e,f){d.Utils.missing(a)||this.addColumnClassesFromCollDef(a.headerClass,a,b,c,e,f)},a.addToolPanelClassesFromColDef=function(a,b,c,e,f){d.Utils.missing(a)||this.addColumnClassesFromCollDef(a.toolPanelClass,a,b,c,e,f)},a.addColumnClassesFromCollDef=function(a,b,c,e,f,g){if(!d.Utils.missing(a)){var h;if("function"==typeof a){h=a({colDef:b,column:f,columnGroup:g,context:e.getContext(),api:e.getApi()})}else h=a;"string"==typeof h?d.Utils.addCssClass(c,h):Array.isArray(h)&&h.forEach(function(a){d.Utils.addCssClass(c,a)})}},a}();b.CssClassApplier=e},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(6),i=c(16),j=c(7),k=c(83),l=c(14),m=c(87),n=c(3),o=c(88),p=c(55),q=c(11),r=c(52),s=c(4),t=c(47),u=c(90),v=c(44),w=c(91),x=c(10),y=c(75),z=function(a){function b(c,d,e,f){var g=a.call(this,b.TEMPLATE)||this;return g.column=c,g.eRoot=d,g.dragSourceDropTarget=e,g.pinned=f,g}return d(b,a),b.prototype.getColumn=function(){return this.column},b.prototype.init=function(){this.instantiate(this.context);var a=this.columnController.getDisplayNameForColumn(this.column,"header",!0),b=this.gridOptionsWrapper.isEnableSorting()&&!this.column.getColDef().suppressSorting,c=this.menuFactory.isMenuEnabled(this.column)&&!this.column.getColDef().suppressMenu,d=this.appendHeaderComp(a,b,c);this.setupWidth(),this.setupMovingCss(),this.setupTooltip(),this.setupResize(),this.setupMenuClass(),this.setupMove(d.getGui(),a),this.setupSortableClass(b),this.addColumnHoverListener(),this.addDestroyableEventListener(this.column,i.Column.EVENT_FILTER_ACTIVE_CHANGED,this.onFilterChanged.bind(this)),this.onFilterChanged(),this.addFeature(this.context,new p.SetLeftFeature(this.column,this.getGui())),this.addFeature(this.context,new w.SelectAllFeature(this.cbSelectAll,this.column)),this.addAttributes(),o.CssClassApplier.addHeaderClassesFromColDef(this.column.getColDef(),this.getGui(),this.gridOptionsWrapper,this.column,null)},b.prototype.addColumnHoverListener=function(){this.addDestroyableEventListener(this.eventService,x.Events.EVENT_COLUMN_HOVER_CHANGED,this.onColumnHover.bind(this)),this.onColumnHover()},b.prototype.onColumnHover=function(){var a=this.columnHoverService.isHovered(this.column);j.Utils.addOrRemoveCssClass(this.getGui(),"ag-column-hover",a)},b.prototype.setupSortableClass=function(a){if(a){var b=this.getGui();j.Utils.addCssClass(b,"ag-header-cell-sortable")}},b.prototype.onFilterChanged=function(){var a=this.column.isFilterActive();j.Utils.addOrRemoveCssClass(this.getGui(),"ag-header-cell-filtered",a)},b.prototype.appendHeaderComp=function(a,b,c){var d=this,e={column:this.column,displayName:a,enableSorting:b,enableMenu:c,showColumnMenu:function(a){d.gridApi.showColumnMenuAfterButtonClick(d.column,a)},progressSort:function(a){d.sortController.progressSort(d.column,!!a)},setSort:function(a,b){d.sortController.setSortForColumn(d.column,a,!!b)},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},f=this.componentProvider.newHeaderComponent(e);return this.appendChild(f),f},b.prototype.onColumnMovingChanged=function(){this.column.isMoving()?j.Utils.addCssClass(this.getGui(),"ag-header-cell-moving"):j.Utils.removeCssClass(this.getGui(),"ag-header-cell-moving")},b.prototype.setupMove=function(a,b){var c=this;if(!(this.gridOptionsWrapper.isSuppressMovableColumns()||this.column.getColDef().suppressMovable||this.gridOptionsWrapper.isForPrint())&&a){var d={type:k.DragSourceType.HeaderCell,eElement:a,dragItem:[this.column],dragItemName:b,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(d,!0),this.addDestroyFunc(function(){return c.dragAndDropService.removeDragSource(d)})}},b.prototype.setupResize=function(){var a=this,b=this.column.getColDef();if(this.eResize){if(!this.column.isResizable())return void j.Utils.removeFromParent(this.eResize);this.horizontalDragService.addDragHandling({eDraggableElement:this.eResize,eBody:this.eRoot,cursor:"col-resize",startAfterPixels:0,onDragStart:this.onDragStart.bind(this),onDragging:this.onDragging.bind(this)});!this.gridOptionsWrapper.isSuppressAutoSize()&&!b.suppressAutoSize&&this.addDestroyableEventListener(this.eResize,"dblclick",function(){a.columnController.autoSizeColumn(a.column)})}},b.prototype.onDragging=function(a,b){var c=this.normaliseDragChange(a),d=this.startWidth+c;this.columnController.setColumnWidth(this.column,d,b)},b.prototype.onDragStart=function(){this.startWidth=this.column.getActualWidth()},b.prototype.setupTooltip=function(){var a=this.column.getColDef();a.headerTooltip&&(this.getGui().title=a.headerTooltip)},b.prototype.setupMovingCss=function(){this.addDestroyableEventListener(this.column,i.Column.EVENT_MOVING_CHANGED,this.onColumnMovingChanged.bind(this)),this.onColumnMovingChanged()},b.prototype.addAttributes=function(){this.getGui().setAttribute("colId",this.column.getColId())},b.prototype.setupWidth=function(){this.addDestroyableEventListener(this.column,i.Column.EVENT_WIDTH_CHANGED,this.onColumnWidthChanged.bind(this)),this.onColumnWidthChanged()},b.prototype.setupMenuClass=function(){this.addDestroyableEventListener(this.column,i.Column.EVENT_MENU_VISIBLE_CHANGED,this.onMenuVisible.bind(this)),this.onColumnWidthChanged()},b.prototype.onMenuVisible=function(){this.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())},b.prototype.onColumnWidthChanged=function(){this.getGui().style.width=this.column.getActualWidth()+"px"},b.prototype.normaliseDragChange=function(a){var b=a;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==i.Column.PINNED_LEFT&&(b*=-1):this.pinned===i.Column.PINNED_RIGHT&&(b*=-1),b},b.TEMPLATE='<div class="ag-header-cell" role="presentation" ><div ref="eResize" class="ag-header-cell-resize" role="presentation"></div><ag-checkbox ref="cbSelectAll" class="ag-header-select-all" role="presentation"></ag-checkbox></div>',e([h.Autowired("gridOptionsWrapper"),f("design:type",n.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([h.Autowired("dragAndDropService"),f("design:type",k.DragAndDropService)],b.prototype,"dragAndDropService",void 0),e([h.Autowired("columnController"),f("design:type",l.ColumnController)],b.prototype,"columnController",void 0),e([h.Autowired("horizontalDragService"),f("design:type",m.HorizontalDragService)],b.prototype,"horizontalDragService",void 0),e([h.Autowired("context"),f("design:type",h.Context)],b.prototype,"context",void 0),e([h.Autowired("menuFactory"),f("design:type",Object)],b.prototype,"menuFactory",void 0),e([h.Autowired("gridApi"),f("design:type",q.GridApi)],b.prototype,"gridApi",void 0),e([h.Autowired("columnApi"),f("design:type",l.ColumnApi)],b.prototype,"columnApi",void 0),e([h.Autowired("sortController"),f("design:type",r.SortController)],b.prototype,"sortController",void 0),e([h.Autowired("eventService"),f("design:type",s.EventService)],b.prototype,"eventService",void 0),e([h.Autowired("componentProvider"),f("design:type",t.ComponentProvider)],b.prototype,"componentProvider",void 0),e([h.Autowired("columnHoverService"),f("design:type",y.ColumnHoverService)],b.prototype,"columnHoverService",void 0),e([v.RefSelector("eResize"),f("design:type",HTMLElement)],b.prototype,"eResize",void 0),e([v.RefSelector("cbSelectAll"),f("design:type",u.AgCheckbox)],b.prototype,"cbSelectAll",void 0),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(g.Component);b.HeaderWrapperComp=z},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(44),i=c(7),j=c(6),k=c(3),l=c(49),m=l.SvgFactory.getInstance(),n=function(a){function b(){var b=a.call(this)||this;return b.selected=!1,b.readOnly=!1,b.passive=!1,b}return d(b,a),b.prototype.postConstruct=function(){this.setTemplate(b.TEMPLATE),this.loadIcons(),this.updateIcons()},b.prototype.attributesSet=function(){a.prototype.attributesSet.call(this);var b=this.getAttribute("label");b&&(this.eLabel.innerText=b)},b.prototype.loadIcons=function(){i.Utils.removeAllChildren(this.eChecked),i.Utils.removeAllChildren(this.eUnchecked),i.Utils.removeAllChildren(this.eIndeterminate),this.readOnly?(this.eChecked.appendChild(i.Utils.createIconNoSpan("checkboxCheckedReadOnly",this.gridOptionsWrapper,null,m.createCheckboxCheckedReadOnlyIcon)),this.eUnchecked.appendChild(i.Utils.createIconNoSpan("checkboxUncheckedReadOnly",this.gridOptionsWrapper,null,m.createCheckboxUncheckedReadOnlyIcon)),this.eIndeterminate.appendChild(i.Utils.createIconNoSpan("checkboxIndeterminateReadOnly",this.gridOptionsWrapper,null,m.createCheckboxIndeterminateReadOnlyIcon))):(this.eChecked.appendChild(i.Utils.createIconNoSpan("checkboxChecked",this.gridOptionsWrapper,null,m.createCheckboxCheckedIcon)),this.eUnchecked.appendChild(i.Utils.createIconNoSpan("checkboxUnchecked",this.gridOptionsWrapper,null,m.createCheckboxUncheckedIcon)),this.eIndeterminate.appendChild(i.Utils.createIconNoSpan("checkboxIndeterminate",this.gridOptionsWrapper,null,m.createCheckboxIndeterminateIcon)))},b.prototype.onClick=function(){this.readOnly||this.toggle()},b.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},b.prototype.setPassive=function(a){this.passive=a},b.prototype.setReadOnly=function(a){this.readOnly=a,this.loadIcons()},b.prototype.isReadOnly=function(){return this.readOnly},b.prototype.isSelected=function(){return this.selected},b.prototype.toggle=function(){var a=this.getNextValue();this.passive?this.dispatchEvent(b.EVENT_CHANGED,{selected:a}):this.setSelected(a)},b.prototype.setSelected=function(a){this.selected!==a&&(this.selected=!0===a||!1!==a&&void 0,this.updateIcons(),this.dispatchEvent(b.EVENT_CHANGED,{selected:this.selected}))},b.prototype.updateIcons=function(){i.Utils.setVisible(this.eChecked,!0===this.selected),i.Utils.setVisible(this.eUnchecked,!1===this.selected),i.Utils.setVisible(this.eIndeterminate,void 0===this.selected)},b.EVENT_CHANGED="change",b.TEMPLATE='<span class="ag-checkbox" role="presentation">  <span class="ag-checkbox-checked" role="presentation"></span>  <span class="ag-checkbox-unchecked" role="presentation"></span>  <span class="ag-checkbox-indeterminate" role="presentation"></span>  <span class="ag-checkbox-label" role="presentation"></span></span>',e([j.Autowired("gridOptionsWrapper"),f("design:type",k.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([h.QuerySelector(".ag-checkbox-checked"),f("design:type",HTMLElement)],b.prototype,"eChecked",void 0),e([h.QuerySelector(".ag-checkbox-unchecked"),f("design:type",HTMLElement)],b.prototype,"eUnchecked",void 0),e([h.QuerySelector(".ag-checkbox-indeterminate"),f("design:type",HTMLElement)],b.prototype,"eIndeterminate",void 0),e([h.QuerySelector(".ag-checkbox-label"),f("design:type",HTMLElement)],b.prototype,"eLabel",void 0),e([j.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),e([h.Listener("click"),f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"onClick",null),b}(g.Component);b.AgCheckbox=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(90),h=c(43),i=c(6),j=c(14),k=c(11),l=c(10),m=c(4),n=c(8),o=c(26),p=c(3),q=function(a){function b(b,c){var d=a.call(this)||this;d.cbSelectAllVisible=!1,d.processingEventFromCheckbox=!1,d.cbSelectAll=b,d.column=c;var e=c.getColDef();return d.filteredOnly=!!e&&!!e.headerCheckboxSelectionFilteredOnly,d}return d(b,a),b.prototype.postConstruct=function(){this.showOrHideSelectAll(),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.showOrHideSelectAll.bind(this)),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addDestroyableEventListener(this.cbSelectAll,g.AgCheckbox.EVENT_CHANGED,this.onCbSelectAll.bind(this))},b.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setVisible(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType(),this.updateStateOfCheckbox())},b.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},b.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},b.prototype.getNextCheckboxState=function(a){return(0!==a.selected||0!==a.notSelected)&&(a.selected>0&&a.notSelected>0?null:a.selected>0)},b.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var a=this.getSelectionCount(),b=this.getNextCheckboxState(a);this.cbSelectAll.setSelected(b),this.processingEventFromCheckbox=!1}},b.prototype.getSelectionCount=function(){var a=0,b=0,c=function(c){c.isSelected()?a++:b++};return this.filteredOnly?this.gridApi.forEachNodeAfterFilter(c):this.gridApi.forEachNode(c),{notSelected:b,selected:a}},b.prototype.checkRightRowModelType=function(){var a=this.rowModel.getType();a===n.Constants.ROW_MODEL_TYPE_IN_MEMORY||console.log("ag-Grid: selectAllCheckbox is only available if using normal row model, you are using "+a)},b.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){this.cbSelectAll.isSelected()?this.selectionController.selectAllRowNodes(this.filteredOnly):this.selectionController.deselectAllRowNodes(this.filteredOnly)}},b.prototype.isCheckboxSelection=function(){var a=this.column.getColDef().headerCheckboxSelection;if("function"==typeof a){a=a({column:this.column,colDef:this.column.getColDef(),columnApi:this.columnApi,api:this.gridApi})}return!!a&&(this.gridOptionsWrapper.isRowModelEnterprise()?(console.warn("headerCheckboxSelection is not supported for Enterprise Row Model"),!1):this.gridOptionsWrapper.isRowModelInfinite()?(console.warn("headerCheckboxSelection is not supported for Infinite Row Model"),!1):!this.gridOptionsWrapper.isRowModelViewport()||(console.warn("headerCheckboxSelection is not supported for Viewport Row Model"),!1))},e([i.Autowired("gridApi"),f("design:type",k.GridApi)],b.prototype,"gridApi",void 0),e([i.Autowired("columnApi"),f("design:type",j.ColumnApi)],b.prototype,"columnApi",void 0),e([i.Autowired("eventService"),f("design:type",m.EventService)],b.prototype,"eventService",void 0),e([i.Autowired("rowModel"),f("design:type",Object)],b.prototype,"rowModel",void 0),e([i.Autowired("selectionController"),f("design:type",o.SelectionController)],b.prototype,"selectionController",void 0),e([i.Autowired("gridOptionsWrapper"),f("design:type",p.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(h.BeanStub);b.SelectAllFeature=q},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(42),h=c(16),i=c(7),j=c(15),k=c(14),l=c(3),m=c(87),n=c(6),o=c(88),p=c(83),q=c(55),r=c(47),s=c(11),t=function(a){function b(c,d,e,f){var g=a.call(this,b.TEMPLATE)||this;return g.childColumnsDestroyFuncs=[],g.columnGroup=c,g.eRoot=d,g.dragSourceDropTarget=e,g.pinned=f,g}return d(b,a),b.prototype.postConstruct=function(){o.CssClassApplier.addHeaderClassesFromColDef(this.columnGroup.getColGroupDef(),this.getGui(),this.gridOptionsWrapper,null,this.columnGroup);var a=this.columnController.getDisplayNameForColumnGroup(this.columnGroup,"header"),b=this.appendHeaderGroupComp(a);this.setupResize(),this.addClasses(),this.setupMove(b.getGui(),a),this.setupWidth(),this.addAttributes(),this.addFeature(this.context,new q.SetLeftFeature(this.columnGroup,this.getGui()))},b.prototype.addAttributes=function(){this.getGui().setAttribute("colId",this.columnGroup.getUniqueId())},b.prototype.appendHeaderGroupComp=function(a){var b=this,c={displayName:a,columnGroup:this.columnGroup,setExpanded:function(a){b.columnController.setColumnGroupOpened(b.columnGroup,a)},api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},d=this.componentProvider.newHeaderGroupComponent(c);return this.appendChild(d),d},b.prototype.addClasses=function(){this.columnGroup.isPadding()?this.addCssClass("ag-header-group-cell-no-group"):this.addCssClass("ag-header-group-cell-with-group")},b.prototype.setupMove=function(a,b){var c=this;if(a&&!this.isSuppressMoving()&&a){var d={type:p.DragSourceType.HeaderCell,eElement:a,dragItemName:b,dragItem:this.getAllColumnsInThisGroup(),dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(d,!0),this.addDestroyFunc(function(){return c.dragAndDropService.removeDragSource(d)})}},b.prototype.getAllColumnsInThisGroup=function(){var a=this.columnGroup.getOriginalColumnGroup().getLeafColumns(),b=[];return this.columnController.getAllDisplayedColumns().forEach(function(c){a.indexOf(c)>=0&&(b.push(c),i.Utils.removeFromArray(a,c))}),a.forEach(function(a){return b.push(a)}),b},b.prototype.isSuppressMoving=function(){var a=!1;return this.columnGroup.getLeafColumns().forEach(function(b){b.getColDef().suppressMovable&&(a=!0)}),a||this.gridOptionsWrapper.isSuppressMovableColumns()||this.gridOptionsWrapper.isForPrint()},b.prototype.setupWidth=function(){this.addListenersToChildrenColumns(),this.addDestroyableEventListener(this.columnGroup,j.ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.destroyListenersOnChildrenColumns.bind(this))},b.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},b.prototype.addListenersToChildrenColumns=function(){var a=this;this.destroyListenersOnChildrenColumns();var b=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(c){c.addEventListener(h.Column.EVENT_WIDTH_CHANGED,b),c.addEventListener(h.Column.EVENT_VISIBLE_CHANGED,b),a.childColumnsDestroyFuncs.push(function(){c.removeEventListener(h.Column.EVENT_WIDTH_CHANGED,b),c.removeEventListener(h.Column.EVENT_VISIBLE_CHANGED,b)})})},b.prototype.destroyListenersOnChildrenColumns=function(){this.childColumnsDestroyFuncs.forEach(function(a){return a()}),this.childColumnsDestroyFuncs=[]},b.prototype.onWidthChanged=function(){this.getGui().style.width=this.columnGroup.getActualWidth()+"px"},b.prototype.setupResize=function(){var a=this;if(this.eHeaderCellResize=this.getRefElement("agResize"),!this.columnGroup.isResizable())return void i.Utils.removeFromParent(this.eHeaderCellResize);this.dragService.addDragHandling({eDraggableElement:this.eHeaderCellResize,eBody:this.eRoot,cursor:"col-resize",startAfterPixels:0,onDragStart:this.onDragStart.bind(this),onDragging:this.onDragging.bind(this)}),this.gridOptionsWrapper.isSuppressAutoSize()||this.eHeaderCellResize.addEventListener("dblclick",function(b){var c=[];a.columnGroup.getDisplayedLeafColumns().forEach(function(a){a.getColDef().suppressAutoSize||c.push(a.getColId())}),c.length>0&&a.columnController.autoSizeColumns(c)})},b.prototype.onDragStart=function(){var a=this;this.groupWidthStart=this.columnGroup.getActualWidth(),this.childrenWidthStarts=[],this.columnGroup.getDisplayedLeafColumns().forEach(function(b){a.childrenWidthStarts.push(b.getActualWidth())})},b.prototype.onDragging=function(a,b){var c,d,e=this,f=this.normaliseDragChange(a),g=this.groupWidthStart+f,h=this.columnGroup.getDisplayedLeafColumns();d=i.Utils.filter(h,function(a){return a.isResizable()});var j=i.Utils.filter(h,function(a){return!a.isResizable()}),k=0;j.forEach(function(a){return k+=a.getActualWidth()}),c=g-k;var l=0;d.forEach(function(a){return l+=a.getMinWidth()}),c<l&&(c=l);var m=c/this.groupWidthStart,n=c;d.forEach(function(a,c){var f,g=c!==d.length-1;if(g){f=e.childrenWidthStarts[c]*m,f<a.getMinWidth()&&(f=a.getMinWidth()),n-=f}else f=n;e.columnController.setColumnWidth(a,f,b)})},b.prototype.normaliseDragChange=function(a){var b=a;return this.gridOptionsWrapper.isEnableRtl()?this.pinned!==h.Column.PINNED_LEFT&&(b*=-1):this.pinned===h.Column.PINNED_RIGHT&&(b*=-1),b},b.TEMPLATE='<div class="ag-header-group-cell"><div ref="agResize" class="ag-header-cell-resize"></div></div>',e([n.Autowired("gridOptionsWrapper"),f("design:type",l.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([n.Autowired("columnController"),f("design:type",k.ColumnController)],b.prototype,"columnController",void 0),e([n.Autowired("horizontalDragService"),f("design:type",m.HorizontalDragService)],b.prototype,"dragService",void 0),e([n.Autowired("dragAndDropService"),f("design:type",p.DragAndDropService)],b.prototype,"dragAndDropService",void 0),e([n.Autowired("context"),f("design:type",n.Context)],b.prototype,"context",void 0),e([n.Autowired("componentProvider"),f("design:type",r.ComponentProvider)],b.prototype,"componentProvider",void 0),e([n.Autowired("gridApi"),f("design:type",s.GridApi)],b.prototype,"gridApi",void 0),e([n.Autowired("columnApi"),f("design:type",k.ColumnApi)],b.prototype,"columnApi",void 0),e([n.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"postConstruct",null),b}(g.Component);b.HeaderGroupWrapperComp=t},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(83),g=c(6),h=c(94),i=c(16),j=c(23),k=c(95),l=c(14),m=function(){function a(a,b){this.pinned=a,this.eContainer=b}return a.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},a.prototype.getContainer=function(){return this.eContainer},a.prototype.init=function(){switch(this.moveColumnController=new h.MoveColumnController(this.pinned,this.eContainer),this.context.wireBean(this.moveColumnController),this.bodyDropPivotTarget=new k.BodyDropPivotTarget(this.pinned),this.context.wireBean(this.bodyDropPivotTarget),this.pinned){case i.Column.PINNED_LEFT:this.eSecondaryContainers=this.gridPanel.getDropTargetLeftContainers();break;case i.Column.PINNED_RIGHT:this.eSecondaryContainers=this.gridPanel.getDropTargetPinnedRightContainers();break;default:this.eSecondaryContainers=this.gridPanel.getDropTargetBodyContainers()}this.dragAndDropService.addDropTarget(this)},a.prototype.getIconName=function(){return this.currentDropListener.getIconName()},a.prototype.isUseBodyDropPivotTarget=function(a){return!!this.columnController.isPivotMode()&&a.dragSource.type===f.DragSourceType.ToolPanel},a.prototype.onDragEnter=function(a){var b=this.isUseBodyDropPivotTarget(a);this.currentDropListener=b?this.bodyDropPivotTarget:this.moveColumnController,this.currentDropListener.onDragEnter(a)},a.prototype.onDragLeave=function(a){this.currentDropListener.onDragLeave(a)},a.prototype.onDragging=function(a){this.currentDropListener.onDragging(a)},a.prototype.onDragStop=function(a){this.currentDropListener.onDragStop(a)},d([g.Autowired("context"),e("design:type",g.Context)],a.prototype,"context",void 0),d([g.Autowired("gridPanel"),e("design:type",j.GridPanel)],a.prototype,"gridPanel",void 0),d([g.Autowired("dragAndDropService"),e("design:type",f.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([g.Autowired("columnController"),e("design:type",l.ColumnController)],a.prototype,"columnController",void 0),d([g.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a}();b.BodyDropTarget=m},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(5),h=c(14),i=c(16),j=c(7),k=c(83),l=c(23),m=c(3),n=function(){function a(a,b){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.pinned=a,this.eContainer=b,this.centerContainer=!j.Utils.exists(a)}
return a.prototype.init=function(){this.logger=this.loggerFactory.create("MoveColumnController")},a.prototype.getIconName=function(){return this.pinned?k.DragAndDropService.ICON_PINNED:k.DragAndDropService.ICON_MOVE},a.prototype.onDragEnter=function(a){var b=a.dragSource.dragItem;this.columnController.setColumnsVisible(b,!0),this.columnController.setColumnsPinned(b,this.pinned),this.onDragging(a,!0)},a.prototype.onDragLeave=function(a){if(!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()&&!a.fromNudge){var b=a.dragSource.dragItem;this.columnController.setColumnsVisible(b,!1)}this.ensureIntervalCleared()},a.prototype.onDragStop=function(){this.ensureIntervalCleared()},a.prototype.normaliseX=function(a){this.gridOptionsWrapper.isEnableRtl()&&(a=this.eContainer.clientWidth-a);return this.centerContainer&&(a+=this.gridPanel.getBodyViewportScrollLeft()),a},a.prototype.workOutNewIndex=function(a,b,c,d,e){return d===k.HDirection.Left?this.getNewIndexForColMovingLeft(a,b,c,e):this.getNewIndexForColMovingRight(a,b,c,e)},a.prototype.checkCenterForScrolling=function(a){if(this.centerContainer){var b=this.gridPanel.getBodyViewportScrollLeft(),c=b+this.gridPanel.getCenterWidth();this.gridOptionsWrapper.isEnableRtl()?(this.needToMoveRight=a<b+50,this.needToMoveLeft=a>c-50):(this.needToMoveLeft=a<b+50,this.needToMoveRight=a>c-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},a.prototype.onDragging=function(a,b){if(void 0===b&&(b=!1),this.lastDraggingEvent=a,!j.Utils.missing(a.hDirection)){var c=this.normaliseX(a.x);b||this.checkCenterForScrolling(c);var d=this.normaliseDirection(a.hDirection),e=a.dragSource.dragItem;this.attemptMoveColumns(e,d,c,b)}},a.prototype.normaliseDirection=function(a){if(!this.gridOptionsWrapper.isEnableRtl())return a;switch(a){case k.HDirection.Left:return k.HDirection.Right;case k.HDirection.Right:return k.HDirection.Left;default:console.error("ag-Grid: Unknown direction "+a)}},a.prototype.attemptMoveColumns=function(a,b,c,d){var e,f=this.columnController.getDisplayedColumns(this.pinned),g=this.columnController.getAllGridColumns(),h=b===k.HDirection.Left,i=b===k.HDirection.Right,l=j.Utils.filter(a,function(a){return f.indexOf(a)>=0});e=h?l[0]:l[l.length-1];for(var m=this.workOutNewIndex(f,g,e,b,c),n=g.indexOf(e),o=0;o<m.length;o++){var p=m[o];if(!(!d&&h&&p>=n)&&(!(!d&&i&&p<=n)&&(i&&(p=p-a.length+1),this.columnController.doesMovePassRules(a,p))))return void this.columnController.moveColumns(a,p)}},a.prototype.getNewIndexForColMovingLeft=function(a,b,c,d){for(var e=0,f=null,g=0;g<a.length;g++){var h=a[g];if(h!==c){if((e+=h.getActualWidth())>d)break;f=h}}var i;if(f){i=b.indexOf(f)+1;b.indexOf(c)<i&&i--}else i=0;for(var k=[i],l=b[i];j.Utils.exists(l)&&a.indexOf(l)<0;)k.push(i+1),i++,l=b[i];return k},a.prototype.getNewIndexForColMovingRight=function(a,b,c,d){for(var e=c,f=e.getActualWidth(),g=null,h=0;h<a.length&&!(f>d);h++){var i=a[h];i!==e&&(f+=i.getActualWidth(),g=i)}var k;if(g){k=b.indexOf(g)+1;b.indexOf(e)<k&&k--}else k=0;for(var l=[k],m=b[k];j.Utils.exists(m)&&a.indexOf(m)<0;)l.push(k+1),k++,m=b[k];return[k]},a.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_RIGHT,!0))},a.prototype.ensureIntervalCleared=function(){this.moveInterval&&(clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_MOVE))},a.prototype.moveInterval=function(){var a;this.intervalCount++,(a=10+5*this.intervalCount)>100&&(a=100);var b;if(this.needToMoveLeft?b=this.gridPanel.scrollHorizontally(-a):this.needToMoveRight&&(b=this.gridPanel.scrollHorizontally(a)),0!==b)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else if(this.failedMoveAttempts++,this.dragAndDropService.setGhostIcon(k.DragAndDropService.ICON_PINNED),this.failedMoveAttempts>7){var c=this.lastDraggingEvent.dragSource.dragItem,d=this.needToMoveLeft?i.Column.PINNED_LEFT:i.Column.PINNED_RIGHT;this.columnController.setColumnsPinned(c,d),this.dragAndDropService.nudge()}},d([f.Autowired("loggerFactory"),e("design:type",g.LoggerFactory)],a.prototype,"loggerFactory",void 0),d([f.Autowired("columnController"),e("design:type",h.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("gridPanel"),e("design:type",l.GridPanel)],a.prototype,"gridPanel",void 0),d([f.Autowired("dragAndDropService"),e("design:type",k.DragAndDropService)],a.prototype,"dragAndDropService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",m.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a}();b.MoveColumnController=n},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(83),g=c(14),h=c(6),i=c(3),j=function(){function a(a){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=a}return a.prototype.onDragEnter=function(a){var b=this;if(this.clearColumnsList(),!this.gridOptionsWrapper.isFunctionsReadOnly()){a.dragSource.dragItem.forEach(function(a){a.isPrimary()&&(a.isAnyFunctionActive()||(a.isAllowValue()?b.columnsToAggregate.push(a):a.isAllowRowGroup()?b.columnsToGroup.push(a):a.isAllowRowGroup()&&b.columnsToPivot.push(a)))})}},a.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?f.DragAndDropService.ICON_PINNED:f.DragAndDropService.ICON_MOVE:null},a.prototype.onDragLeave=function(a){this.clearColumnsList()},a.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},a.prototype.onDragging=function(a){},a.prototype.onDragStop=function(a){this.columnsToAggregate.length>0&&this.columnController.addValueColumns(this.columnsToAggregate),this.columnsToGroup.length>0&&this.columnController.addRowGroupColumns(this.columnsToGroup),this.columnsToPivot.length>0&&this.columnController.addPivotColumns(this.columnsToPivot)},d([h.Autowired("columnController"),e("design:type",g.ColumnController)],a.prototype,"columnController",void 0),d([h.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a}();b.BodyDropPivotTarget=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a){this.type=a}return a.prototype.toString=function(){var a="ColumnChangeEvent {type: "+this.type;return this.column&&(a+=", column: "+this.column.getColId()),this.columnGroup&&(a+=this.columnGroup.getColGroupDef().headerName),this.toIndex&&(a+=", toIndex: "+this.toIndex),this.visible&&(a+=", visible: "+this.visible),this.pinned&&(a+=", pinned: "+this.pinned),"boolean"==typeof this.finished&&(a+=", finished: "+this.finished),a+="}"},a.prototype.withPinned=function(a){return this.pinned=a,this},a.prototype.withVisible=function(a){return this.visible=a,this},a.prototype.isVisible=function(){return this.visible},a.prototype.getPinned=function(){return this.pinned},a.prototype.withColumn=function(a){return this.column=a,this},a.prototype.withColumns=function(a){return this.columns=a,this},a.prototype.withFinished=function(a){return this.finished=a,this},a.prototype.withColumnGroup=function(a){return this.columnGroup=a,this},a.prototype.withToIndex=function(a){return this.toIndex=a,this},a.prototype.getToIndex=function(){return this.toIndex},a.prototype.getType=function(){return this.type},a.prototype.getColumn=function(){return this.column},a.prototype.getColumns=function(){return this.columns},a.prototype.getColumnGroup=function(){return this.columnGroup},a.prototype.isFinished=function(){return this.finished},a}();b.ColumnChangeEvent=d},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){this.existingIds={}}return a.prototype.getInstanceIdForKey=function(a){var b,c=this.existingIds[a];return b="number"!=typeof c?0:c+1,this.existingIds[a]=b,b},a}();b.GroupInstanceIdCreator=c},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(16),h=c(3),i=c(7),j=function(){function a(){}return b=a,a.prototype.createAutoGroupColumns=function(a){var b=this,c=[];return this.gridOptionsWrapper.isGroupMultiAutoColumn()?a.forEach(function(a,d){c.push(b.createOneAutoGroupColumn(a,d))}):c.push(this.createOneAutoGroupColumn(null)),c},a.prototype.createOneAutoGroupColumn=function(a,c){var d,e=this.generateDefaultColDef(a,c),f=this.gridOptionsWrapper.getAutoGroupColumnDef();if(d=a?b.GROUP_AUTO_COLUMN_ID+"-"+a.getId():b.GROUP_AUTO_COLUMN_BUNDLE_ID,i._.mergeDeep(e,f),e.colId=d,null==f||null==f.suppressFilter){var h=null!=e.field||null!=e.valueGetter;e.suppressFilter=!h}c>0&&(e.headerCheckboxSelection=!1);var j=new g.Column(e,d,!0);return this.context.wireBean(j),j},a.prototype.generateDefaultColDef=function(a,b){var c=this.gridOptionsWrapper.getLocaleTextFunc(),d={headerName:c("group","Group"),cellRenderer:"group"};if(d.suppressMovable=!0,a){var e=a.getColDef();i._.assign(d,{headerName:e.headerName,headerValueGetter:e.headerValueGetter}),d.showRowGroup=a.getColId()}else d.showRowGroup=!0;return d},a.GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",a.GROUP_AUTO_COLUMN_BUNDLE_ID=b.GROUP_AUTO_COLUMN_ID,d([f.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("context"),e("design:type",f.Context)],a.prototype,"context",void 0),a=b=d([f.Bean("autoGroupColService")],a);var b}();b.AutoGroupColService=j},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};Object.defineProperty(b,"__esModule",{value:!0});var e=c(6),f=function(){function a(){}return a.prototype.download=function(a,b,c){var d=new Blob(["\ufeff",b],{type:c});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(d,a);else{var e=document.createElement("a");e.href=window.URL.createObjectURL(d),e.download=a,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},a=d([e.Bean("downloader")],a)}();b.Downloader=f},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(8),h=c(7),i=c(3),j=function(){function a(){}return a.prototype.postConstruct=function(){this.rowModel.getType()===g.Constants.ROW_MODEL_TYPE_IN_MEMORY&&(this.inMemoryRowModel=this.rowModel)},a.prototype.createTransactionForRowData=function(a){if(h._.missing(this.inMemoryRowModel))return void console.error("ag-Grid: ImmutableService only works with InMemoryRowModel");var b=this.gridOptionsWrapper.getRowNodeIdFunc();if(h._.missing(b))return void console.error("ag-Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!");var c={remove:[],update:[],add:[]},d=this.inMemoryRowModel.getCopyOfNodesMap();return h._.exists(a)&&a.forEach(function(a){var e=b(a),f=d[e];if(f){f.data!==a&&c.update.push(a),d[e]=void 0}else c.add.push(a)}),h._.iterateObject(d,function(a,b){b&&c.remove.push(b.data)}),c},d([f.Autowired("rowModel"),e("design:type",Object)],a.prototype,"rowModel",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"postConstruct",null),a=d([f.Bean("immutableService")],a)}();b.ImmutableService=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(7),e=function(){function a(){this.existingKeys=[]}return a.prototype.getUniqueKey=function(a,b){a=d.Utils.toStringOrNull(a);for(var c=0;;){var e=void 0;if(a?(e=a,0!==c&&(e+="_"+c)):b?(e=b,0!==c&&(e+="_"+c)):e=""+c,this.existingKeys.indexOf(e)<0)return this.existingKeys.push(e),e;c++}},a}();b.ColumnKeyCreator=e},function(a,b,c){"use strict";function d(a){a.module("agGrid",[]).directive("agGrid",function(){return{restrict:"A",controller:["$element","$scope","$compile","$attrs",e],scope:!0}})}function e(a,b,c,d){var e,g,h=d.agGrid;if(g=h+".quickFilterText",!(e=b.$eval(h)))return void console.warn("WARNING - grid options for ag-Grid not found. Please ensure the attribute ag-grid points to a valid object on the scope");var i=a[0],j={$scope:b,$compile:c,quickFilterOnScope:g},k=new f.Grid(i,e,j);b.$on("$destroy",function(){k.destroy()})}Object.defineProperty(b,"__esModule",{value:!0});var f=c(103);b.initialiseAgGridWithAngular1=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=c(26),f=c(14),g=c(22),h=c(81),i=c(38),j=c(30),k=c(4),l=c(23),m=c(11),n=c(86),o=c(2),p=c(20),q=c(19),r=c(32),s=c(39),t=c(5),u=c(17),v=c(21),w=c(87),x=c(6),y=c(12),z=c(37),A=c(104),B=c(83),C=c(25),D=c(52),E=c(33),F=c(27),G=c(80),H=c(7),I=c(105),J=c(107),K=c(109),L=c(36),M=c(60),N=c(10),O=c(110),P=c(116),Q=c(67),R=c(71),S=c(72),T=c(90),U=c(119),V=c(59),W=c(99),X=c(120),Y=c(13),Z=c(74),$=c(75),_=c(56),aa=c(47),ba=c(108),ca=c(106),da=c(121),ea=c(98),fa=c(58),ga=c(100),ha=c(8),ia=c(31),ja=c(122),ka=c(78),la=c(79),ma=function(){function a(b,c,N){b||console.error("ag-Grid: no div element provided to the grid"),c||console.error("ag-Grid: no gridOptions provided to the grid");var O=this.getRowModelClass(c),P=H.Utils.exists(a.enterpriseBeans),ha=N?N.frameworkFactory:null;H.Utils.missing(ha)&&(ha=new U.BaseFrameworkFactory);var ma=[];a.enterpriseBeans&&(ma=ma.concat(a.enterpriseBeans)),a.frameworkBeans&&(ma=ma.concat(a.frameworkBeans));var na={enterprise:P,gridOptions:c,eGridDiv:b,$scope:N?N.$scope:null,$compile:N?N.$compile:null,quickFilterOnScope:N?N.quickFilterOnScope:null,globalEventListener:N?N.globalEventListener:null,frameworkFactory:ha};N&&N.seedBeanInstances&&H.Utils.assign(na,N.seedBeanInstances);var oa={overrideBeans:ma,seed:na,beans:[O,fa.PaginationAutoPageSizeService,m.GridApi,aa.ComponentProvider,Q.CellRendererFactory,w.HorizontalDragService,n.HeaderTemplateLoader,la.PinnedRowModel,C.DragService,p.DisplayedGroupCreator,k.EventService,d.GridOptionsWrapper,e.SelectionController,i.FilterManager,f.ColumnController,fa.PaginationProxy,g.RowRenderer,h.HeaderRenderer,q.ExpressionService,o.BalancedColumnTreeBuilder,y.CsvCreator,W.Downloader,X.XmlFactory,Y.GridSerializer,r.TemplateService,l.GridPanel,s.PopupService,ia.ValueCache,j.ValueService,ka.AlignedGridsService,t.LoggerFactory,u.ColumnUtils,v.AutoWidthCalculator,s.PopupService,z.GridCore,A.StandardMenuFactory,B.DragAndDropService,D.SortController,f.ColumnApi,E.FocusedCellController,F.MouseEventService,G.CellNavigationService,I.FilterStage,J.SortStage,K.FlattenStage,L.FocusService,ca.FilterService,da.RowNodeFactory,M.CellEditorFactory,R.CellRendererService,S.ValueFormatterService,Z.StylingService,V.ScrollVisibleService,$.ColumnHoverService,_.ColumnAnimationService,ba.SortService,ea.AutoGroupColService,ga.ImmutableService,ja.ChangeDetectionService],components:[{componentName:"AgCheckbox",theClass:T.AgCheckbox}],debug:!!c.debug},pa=function(){return oa.debug};this.context=new x.Context(oa,new t.Logger("Context",pa)),this.setColumnsAndData(),this.dispatchGridReadyEvent(c),c.debug&&console.log("ag-Grid -> initialised successfully, enterprise = "+P)}return a.setEnterpriseBeans=function(b,c){this.enterpriseBeans=b,H.Utils.iterateObject(c,function(b,c){return a.RowModelClasses[b]=c})},a.setFrameworkBeans=function(a){this.frameworkBeans=a},a.prototype.setColumnsAndData=function(){var a=this.context.getBean("gridOptionsWrapper"),b=this.context.getBean("columnController"),c=this.context.getBean("rowModel"),d=a.getColumnDefs(),e=a.getRowData();H.Utils.missing(d)&&H.Utils.missing(e)||(this.context.getBean("valueService"),H.Utils.exists(d)&&b.setColumnDefs(d),H.Utils.exists(e)&&c.getType()===ha.Constants.ROW_MODEL_TYPE_IN_MEMORY&&c.setRowData(e))},a.prototype.dispatchGridReadyEvent=function(a){var b=this.context.getBean("eventService"),c={api:a.api,columnApi:a.columnApi};b.dispatchEvent(N.Events.EVENT_GRID_READY,c)},a.prototype.getRowModelClass=function(b){var c=b.rowModelType;if(H.Utils.exists(c)){var d=a.RowModelClasses[c];if(H.Utils.exists(d))return d;console.error("ag-Grid: count not find matching row model for rowModelType "+c),"viewport"===c&&console.error("ag-Grid: rowModelType viewport is only available in ag-Grid Enterprise"),"enterprise"===c&&console.error("ag-Grid: rowModelType viewport is only available in ag-Grid Enterprise")}return P.InMemoryRowModel},a.prototype.destroy=function(){this.context.destroy()},a.RowModelClasses={infinite:O.InfiniteRowModel,normal:P.InMemoryRowModel},a}();b.Grid=ma},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(38),h=c(7),i=c(39),j=c(3),k=c(4),l=function(){function a(){}return a.prototype.showMenuAfterMouseEvent=function(a,b){var c=this;this.showPopup(a,function(d){c.popupService.positionPopupUnderMouseEvent({column:a,type:"columnMenu",mouseEvent:b,ePopup:d})})},a.prototype.showMenuAfterButtonClick=function(a,b){var c=this;this.showPopup(a,function(d){c.popupService.positionPopupUnderComponent({type:"columnMenu",eventSource:b,ePopup:d,keepWithinBounds:!0,column:a})})},a.prototype.showPopup=function(a,b){var c=this,d=this.filterManager.getOrCreateFilterWrapper(a),e=document.createElement("div");h.Utils.addCssClass(e,"ag-menu"),e.appendChild(d.gui);var f,g=function(a){"horizontal"===a.direction&&f()};this.eventService.addEventListener("bodyScroll",g);var i=function(){c.eventService.removeEventListener("bodyScroll",g),a.setMenuVisible(!1)};if(f=this.popupService.addAsModalPopup(e,!0,i),b(e),d.filter.afterGuiAttached){var j={hidePopup:f};d.filter.afterGuiAttached(j)}a.setMenuVisible(!0)},a.prototype.isMenuEnabled=function(a){return this.gridOptionsWrapper.isEnableFilter()&&a.isFilterAllowed()},d([f.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("filterManager"),e("design:type",g.FilterManager)],a.prototype,"filterManager",void 0),d([f.Autowired("popupService"),e("design:type",i.PopupService)],a.prototype,"popupService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("menuFactory")],a)}();b.StandardMenuFactory=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(3),h=c(106),i=function(){function a(){}return a.prototype.execute=function(a){var b=a.rowNode;this.gridOptionsWrapper.isEnableServerSideFilter()?this.filterService.filter(b,!1):this.filterService.filterAccordingToColumnState(b)},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("filterService"),e("design:type",h.FilterService)],a.prototype,"filterService",void 0),a=d([f.Bean("filterStage")],a)}();b.FilterStage=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(38),h=function(){function a(){}return a.prototype.filterAccordingToColumnState=function(a){var b=this.filterManager.isAnyFilterPresent();this.filter(a,b)},a.prototype.filter=function(a,b){var c=this;a.childrenAfterGroup.forEach(function(a){a.group&&c.filter(a,b)});var d;b?(d=[],a.childrenAfterGroup.forEach(function(a){a.group?a.childrenAfterFilter.length>0&&d.push(a):c.filterManager.doesRowPassFilter(a)&&d.push(a)})):d=a.childrenAfterGroup,a.childrenAfterFilter=d,this.setAllChildrenCount(a)},a.prototype.setAllChildrenCount=function(a){var b=0;a.childrenAfterFilter.forEach(function(a){a.group?b+=a.allChildrenCount:b++}),a.setAllChildrenCount(b)},d([f.Autowired("filterManager"),e("design:type",g.FilterManager)],a.prototype,"filterManager",void 0),a=d([f.Bean("filterService")],a)}();b.FilterService=h},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(3),h=c(108),i=function(){function a(){}return a.prototype.execute=function(a){this.gridOptionsWrapper.isEnableServerSideSorting()?this.sortService.sort(a.rowNode,null):this.sortService.sortAccordingToColumnsState(a.rowNode)},d([f.Autowired("gridOptionsWrapper"),e("design:type",g.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("sortService"),e("design:type",h.SortService)],a.prototype,"sortService",void 0),a=d([f.Bean("sortStage")],a)}();b.SortStage=i},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(52),h=c(7),i=c(30),j=c(3),k=c(14),l=function(){function a(){}return a.prototype.sortAccordingToColumnsState=function(a){var b=this.sortController.getSortForRowController();this.sort(a,b)},a.prototype.sort=function(a,b){var c=this;if(a.childrenAfterSort=a.childrenAfterFilter.slice(0),this.pullDownDataForHideOpenParents(a,!0),h._.exists(b)&&b.length>0){var d=a.childrenAfterSort.map(function(a,b){return{currentPos:b,rowNode:a}});d.sort(this.compareRowNodes.bind(this,b)),a.childrenAfterSort=d.map(function(a){return a.rowNode})}this.updateChildIndexes(a),this.pullDownDataForHideOpenParents(a,!1),a.childrenAfterFilter.forEach(function(a){a.group&&c.sort(a,b)})},a.prototype.compareRowNodes=function(a,b,c){for(var d=b.rowNode,e=c.rowNode,f=0,g=a.length;f<g;f++){var i=a[f],j=-1===i.inverter,k=this.getValue(d,i.column),l=this.getValue(e,i.column),m=void 0;if(0!==(m=i.column.getColDef().comparator?i.column.getColDef().comparator(k,l,d,e,j):h._.defaultComparator(k,l,this.gridOptionsWrapper.isAccentedSort())))return m*i.inverter}return b.currentPos-c.currentPos},a.prototype.getValue=function(a,b){return this.valueService.getValue(b,a)},a.prototype.updateChildIndexes=function(a){h._.missing(a.childrenAfterSort)||a.childrenAfterSort.forEach(function(b,c){var d=0===c,e=c===a.childrenAfterSort.length-1;b.setFirstChild(d),b.setLastChild(e),b.setChildIndex(c)})},a.prototype.pullDownDataForHideOpenParents=function(a,b){var c=this;h._.missing(a.childrenAfterSort)||this.gridOptionsWrapper.isGroupHideOpenParents()&&a.childrenAfterSort.forEach(function(a){c.columnController.getGroupDisplayColumns().forEach(function(d){var e=d.getColDef().showRowGroup;if("string"!=typeof e)return void console.error("ag-Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");var f=e,g=c.columnController.getPrimaryColumn(f);if(g!==a.rowGroupColumn)if(b)a.setGroupValue(d.getId(),null);else{var h=a.getFirstChildOfFirstChild(g);h&&a.setGroupValue(d.getId(),h.key)}})})},d([f.Autowired("sortController"),e("design:type",g.SortController)],a.prototype,"sortController",void 0),d([f.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),d([f.Autowired("valueService"),e("design:type",i.ValueService)],a.prototype,"valueService",void 0),d([f.Autowired("gridOptionsWrapper"),e("design:type",j.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),a=d([f.Bean("sortService")],a)}();b.SortService=l},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(6),g=c(29),h=c(7),i=c(3),j=c(26),k=c(4),l=c(14),m=function(){function a(){}return a.prototype.execute=function(a){var b=a.rowNode,c=[],d={value:0},e=this.columnController.isPivotMode(),f=e&&b.leafGroup,g=f?[b]:b.childrenAfterSort;return this.resetRowTops(b),this.recursivelyAddToRowsToDisplay(g,c,d,e,0),c},a.prototype.resetRowTops=function(a){if(a.clearRowTop(),a.group){if(a.childrenAfterGroup)for(var b=0;b<a.childrenAfterGroup.length;b++)this.resetRowTops(a.childrenAfterGroup[b]);a.sibling&&a.sibling.clearRowTop()}},a.prototype.recursivelyAddToRowsToDisplay=function(a,b,c,d,e){if(!h.Utils.missingOrEmpty(a))for(var f=this.gridOptionsWrapper.isGroupSuppressRow(),g=this.gridOptionsWrapper.isGroupHideOpenParents(),i=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),j=0;j<a.length;j++){var k=a[j],l=f&&k.group,m=d&&!k.group,n=g&&k.expanded,o=i&&k.group&&1===k.childrenAfterGroup.length,p=!(m||l||n||o);if(p&&this.addRowNodeToRowsToDisplay(k,b,c,e),k.group){if(k.expanded||o){var q=o?e:e+1;this.recursivelyAddToRowsToDisplay(k.childrenAfterSort,b,c,d,q),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(k),this.addRowNodeToRowsToDisplay(k.sibling,b,c,e))}}else if(k.canFlower&&k.expanded){var r=this.createFlowerNode(k);this.addRowNodeToRowsToDisplay(r,b,c,e)}}},a.prototype.addRowNodeToRowsToDisplay=function(a,b,c,d){if(b.push(a),h.Utils.missing(a.rowHeight)){var e=this.gridOptionsWrapper.getRowHeightForNode(a);a.setRowHeight(e)}a.setUiLevel(d),a.setRowTop(c.value),a.setRowIndex(b.length-1),c.value+=a.rowHeight},a.prototype.ensureFooterNodeExists=function(a){if(!h.Utils.exists(a.sibling)){var b=new g.RowNode;this.context.wireBean(b),Object.keys(a).forEach(function(c){b[c]=a[c]}),b.footer=!0,b.rowTop=null,b.oldRowTop=null,h.Utils.exists(b.id)&&(b.id="rowGroupFooter_"+b.id),b.sibling=a,a.sibling=b}},a.prototype.createFlowerNode=function(a){if(h.Utils.exists(a.childFlower))return a.childFlower;var b=new g.RowNode;return this.context.wireBean(b),b.flower=!0,b.parent=a,h.Utils.exists(a.id)&&(b.id="flowerNode_"+a.id),b.data=a.data,b.level=a.level+1,a.childFlower=b,b},d([f.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([f.Autowired("selectionController"),e("design:type",j.SelectionController)],a.prototype,"selectionController",void 0),d([f.Autowired("eventService"),e("design:type",k.EventService)],a.prototype,"eventService",void 0),d([f.Autowired("context"),e("design:type",f.Context)],a.prototype,"context",void 0),d([f.Autowired("columnController"),e("design:type",l.ColumnController)],a.prototype,"columnController",void 0),a=d([f.Bean("flattenStage")],a)}();b.FlattenStage=m},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(3),i=c(6),j=c(4),k=c(26),l=c(10),m=c(52),n=c(38),o=c(8),p=c(111),q=c(43),r=c(114),s=c(115),t=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.getRowBounds=function(a){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*a}},b.prototype.init=function(){var a=this
;this.gridOptionsWrapper.isRowModelInfinite()&&(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.setDatasource(this.gridOptionsWrapper.getDatasource()),this.addDestroyFunc(function(){return a.destroyCache()}))},b.prototype.isLastRowFound=function(){return!!this.infiniteCache&&this.infiniteCache.isMaxRowFound()},b.prototype.addEventListeners=function(){this.addDestroyableEventListener(this.eventService,l.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addDestroyableEventListener(this.eventService,l.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},b.prototype.onFilterChanged=function(){this.gridOptionsWrapper.isEnableServerSideFilter()&&this.reset()},b.prototype.onSortChanged=function(){this.gridOptionsWrapper.isEnableServerSideSorting()&&this.reset()},b.prototype.destroy=function(){a.prototype.destroy.call(this)},b.prototype.getType=function(){return o.Constants.ROW_MODEL_TYPE_INFINITE},b.prototype.setDatasource=function(a){this.datasource=a,a&&(this.checkForDeprecated(),this.reset())},b.prototype.checkForDeprecated=function(){var a=this.datasource;g.Utils.exists(a.maxConcurrentRequests)&&console.error("ag-Grid: since version 5.1.x, maxConcurrentRequests is replaced with grid property maxConcurrentDatasourceRequests"),g.Utils.exists(a.maxPagesInCache)&&console.error("ag-Grid: since version 5.1.x, maxPagesInCache is replaced with grid property maxPagesInPaginationCache"),g.Utils.exists(a.overflowSize)&&console.error("ag-Grid: since version 5.1.x, overflowSize is replaced with grid property paginationOverflowSize"),g.Utils.exists(a.blockSize)&&console.error("ag-Grid: since version 5.1.x, pageSize/blockSize is replaced with grid property infinitePageSize")},b.prototype.isEmpty=function(){return g.Utils.missing(this.infiniteCache)},b.prototype.isRowsToRender=function(){return g.Utils.exists(this.infiniteCache)},b.prototype.getNodesInRangeForSelection=function(a,b){return this.infiniteCache.getRowNodesInRange(a,b)},b.prototype.reset=function(){if(!g.Utils.missing(this.datasource)){g.Utils.exists(this.gridOptionsWrapper.getRowNodeIdFunc())||this.selectionController.reset(),this.resetCache(),this.eventService.dispatchEvent(l.Events.EVENT_MODEL_UPDATED)}},b.prototype.resetCache=function(){this.destroyCache();var a=this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();this.rowNodeBlockLoader=new s.RowNodeBlockLoader(a),this.context.wireBean(this.rowNodeBlockLoader);var b={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,maxConcurrentRequests:a,overflowSize:this.gridOptionsWrapper.getCacheOverflowSize(),initialRowCount:this.gridOptionsWrapper.getInfiniteInitialRowCount(),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),blockSize:this.gridOptionsWrapper.getCacheBlockSize(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),lastAccessedSequence:new g.NumberSequence};b.maxConcurrentRequests>=1||(b.maxConcurrentRequests=2),b.blockSize>=1||(b.blockSize=100),b.initialRowCount>=1||(b.initialRowCount=0),b.overflowSize>=1||(b.overflowSize=1),this.infiniteCache=new p.InfiniteCache(b),this.context.wireBean(this.infiniteCache),this.infiniteCache.addEventListener(r.RowNodeCache.EVENT_CACHE_UPDATED,this.onCacheUpdated.bind(this))},b.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache.destroy(),this.infiniteCache=null),this.rowNodeBlockLoader&&(this.rowNodeBlockLoader.destroy(),this.rowNodeBlockLoader=null)},b.prototype.onCacheUpdated=function(){this.eventService.dispatchEvent(l.Events.EVENT_MODEL_UPDATED)},b.prototype.getRow=function(a){return this.infiniteCache?this.infiniteCache.getRow(a):null},b.prototype.forEachNode=function(a){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(a,new g.NumberSequence)},b.prototype.getCurrentPageHeight=function(){return this.getRowCount()*this.rowHeight},b.prototype.getRowIndexAtPixel=function(a){if(0!==this.rowHeight){var b=Math.floor(a/this.rowHeight);return b>this.getPageLastRow()?this.getPageLastRow():b}return 0},b.prototype.getPageFirstRow=function(){return 0},b.prototype.getPageLastRow=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount()-1:0},b.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount():0},b.prototype.updateRowData=function(a){return g.Utils.exists(a.remove)||g.Utils.exists(a.update)?void console.warn("ag-Grid: updateRowData for InfiniteRowModel does not support remove or update, only add"):g.Utils.missing(a.addIndex)?void console.warn("ag-Grid: updateRowData for InfiniteRowModel requires add and addIndex to be set"):void(this.infiniteCache&&this.infiniteCache.insertItemsAtIndex(a.addIndex,a.add))},b.prototype.isRowPresent=function(a){return console.log("ag-Grid: not supported."),!1},b.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},b.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},b.prototype.getVirtualRowCount=function(){return this.infiniteCache?this.infiniteCache.getVirtualRowCount():null},b.prototype.isMaxRowFound=function(){if(this.infiniteCache)return this.infiniteCache.isMaxRowFound()},b.prototype.setVirtualRowCount=function(a,b){this.infiniteCache&&this.infiniteCache.setVirtualRowCount(a,b)},b.prototype.getBlockState=function(){return this.rowNodeBlockLoader?this.rowNodeBlockLoader.getBlockState():null},e([i.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.Autowired("filterManager"),f("design:type",n.FilterManager)],b.prototype,"filterManager",void 0),e([i.Autowired("sortController"),f("design:type",m.SortController)],b.prototype,"sortController",void 0),e([i.Autowired("selectionController"),f("design:type",k.SelectionController)],b.prototype,"selectionController",void 0),e([i.Autowired("eventService"),f("design:type",j.EventService)],b.prototype,"eventService",void 0),e([i.Autowired("context"),f("design:type",i.Context)],b.prototype,"context",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),e([i.PreDestroy,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"destroy",null),b=e([i.Bean("rowModel")],b)}(q.BeanStub);b.InfiniteRowModel=t},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},g=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var h=c(6),i=c(4),j=c(10),k=c(5),l=c(112),m=c(114),n=function(a){function b(b){return a.call(this,b)||this}return d(b,a),b.prototype.setBeans=function(a){this.logger=a.create("InfiniteCache")},b.prototype.init=function(){a.prototype.init.call(this),this.getRow(0)},b.prototype.moveItemsDown=function(a,b,c){for(var d=a.getStartRow(),e=a.getEndRow(),f=b+c,g=e-1;g>=d;g--)if(!(g<f)){var h=g-c,i=this.getRow(h,!0);i?a.setRowNode(g,i):(a.setBlankRowNode(g),a.setDirty())}},b.prototype.insertItems=function(a,b,c){for(var d=a.getStartRow(),e=a.getEndRow(),f=[],g=0;g<c.length;g++){var h=b+g;if(h>=d&&h<e){var i=c[g],j=a.setNewData(h,i);f.push(j)}}return f},b.prototype.insertItemsAtIndex=function(a,b){var c=this,d=[];this.forEachBlockInReverseOrder(function(e){e.getEndRow()<=a||(c.moveItemsDown(e,a,b.length),c.insertItems(e,a,b).forEach(function(a){return d.push(a)}))}),this.isMaxRowFound()&&this.hack_setVirtualRowCount(this.getVirtualRowCount()+b.length),this.onCacheUpdated(),this.eventService.dispatchEvent(j.Events.EVENT_ITEMS_ADDED,d)},b.prototype.getRow=function(a,b){void 0===b&&(b=!1);var c=Math.floor(a/this.cacheParams.blockSize),d=this.getBlock(c);if(!d){if(b)return null;d=this.createBlock(c)}return d.getRow(a)},b.prototype.createBlock=function(a){var b=new l.InfiniteBlock(a,this.cacheParams);return this.context.wireBean(b),this.postCreateBlock(b),b},b.prototype.refreshCache=function(){this.forEachBlockInOrder(function(a){return a.setDirty()}),this.checkBlockToLoad()},e([h.Autowired("eventService"),f("design:type",i.EventService)],b.prototype,"eventService",void 0),e([h.Autowired("context"),f("design:type",h.Context)],b.prototype,"context",void 0),e([g(0,h.Qualifier("loggerFactory")),f("design:type",Function),f("design:paramtypes",[k.LoggerFactory]),f("design:returntype",void 0)],b.prototype,"setBeans",null),e([h.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(m.RowNodeCache);b.InfiniteCache=n},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(7),h=c(3),i=c(6),j=c(113),k=c(22),l=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.cacheParams=c,d}return d(b,a),b.prototype.createBlankRowNode=function(b){var c=a.prototype.createBlankRowNode.call(this,b);return c.uiLevel=0,this.setIndexAndTopOnRowNode(c,b),c},b.prototype.setDataAndId=function(a,b,c){g.Utils.exists(b)?a.setDataAndId(b,c.toString()):a.setDataAndId(void 0,void 0)},b.prototype.setRowNode=function(b,c){a.prototype.setRowNode.call(this,b,c),this.setIndexAndTopOnRowNode(c,b)},b.prototype.init=function(){a.prototype.init.call(this,{context:this.context,rowRenderer:this.rowRenderer})},b.prototype.getNodeIdPrefix=function(){return null},b.prototype.getRow=function(a){return this.getRowUsingLocalIndex(a)},b.prototype.setIndexAndTopOnRowNode=function(a,b){a.setRowIndex(b),a.rowTop=this.cacheParams.rowHeight*b},b.prototype.loadFromDatasource=function(){var a=this,b={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this),sortModel:this.cacheParams.sortModel,filterModel:this.cacheParams.filterModel,context:this.gridOptionsWrapper.getContext()};if(g.Utils.missing(this.cacheParams.datasource.getRows))return void console.warn("ag-Grid: datasource is missing getRows method");g.Utils.getFunctionParameters(this.cacheParams.datasource.getRows).length>1&&(console.warn("ag-grid: It looks like your paging datasource is of the old type, taking more than one parameter."),console.warn("ag-grid: From ag-grid 1.9.0, now the getRows takes one parameter. See the documentation for details.")),setTimeout(function(){a.cacheParams.datasource.getRows(b)},0)},e([i.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([i.Autowired("context"),f("design:type",i.Context)],b.prototype,"context",void 0),e([i.Autowired("rowRenderer"),f("design:type",k.RowRenderer)],b.prototype,"rowRenderer",void 0),e([i.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b}(j.RowNodeBlock);b.InfiniteBlock=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(7),f=c(29),g=c(43),h=function(a){function b(c,d){var e=a.call(this)||this;return e.version=0,e.state=b.STATE_DIRTY,e.rowNodeCacheParams=d,e.blockNumber=c,e.startRow=c*d.blockSize,e.endRow=e.startRow+d.blockSize,e}return d(b,a),b.prototype.isAnyNodeOpen=function(a){var b=!1;return this.forEachNodeCallback(function(a){a.expanded&&(b=!0)},a),b},b.prototype.forEachNodeCallback=function(a,b){for(var c=this.startRow;c<this.endRow;c++)if(c<b){var d=this.getRowUsingLocalIndex(c);a(d,c)}},b.prototype.forEachNode=function(a,b,c,d){this.forEachNodeCallback(function(c){a(c,b.next()),d&&c.childrenCache&&c.childrenCache.forEachNodeDeep(a,b)},c)},b.prototype.forEachNodeDeep=function(a,b,c){this.forEachNode(a,b,c,!0)},b.prototype.forEachNodeShallow=function(a,b,c){this.forEachNode(a,b,c,!1)},b.prototype.getVersion=function(){return this.version},b.prototype.getLastAccessed=function(){return this.lastAccessed},b.prototype.getRowUsingLocalIndex=function(a){this.lastAccessed=this.rowNodeCacheParams.lastAccessedSequence.next();var b=a-this.startRow;return this.rowNodes[b]},b.prototype.init=function(a){this.beans=a,this.createRowNodes()},b.prototype.getStartRow=function(){return this.startRow},b.prototype.getEndRow=function(){return this.endRow},b.prototype.getBlockNumber=function(){return this.blockNumber},b.prototype.setDirty=function(){this.version++,this.state=b.STATE_DIRTY},b.prototype.setDirtyAndPurge=function(){this.setDirty(),this.rowNodes.forEach(function(a){a.setData(null)})},b.prototype.getState=function(){return this.state},b.prototype.setRowNode=function(a,b){var c=a-this.startRow;this.rowNodes[c]=b},b.prototype.setBlankRowNode=function(a){var b=a-this.startRow,c=this.createBlankRowNode(a);return this.rowNodes[b]=c,c},b.prototype.setNewData=function(a,b){var c=this.setBlankRowNode(a);return this.setDataAndId(c,b,this.startRow+a),c},b.prototype.createBlankRowNode=function(a){var b=new f.RowNode;return this.beans.context.wireBean(b),b.setRowHeight(this.rowNodeCacheParams.rowHeight),b},b.prototype.createRowNodes=function(){this.rowNodes=[];for(var a=0;a<this.rowNodeCacheParams.blockSize;a++){var b=this.startRow+a,c=this.createBlankRowNode(b);this.rowNodes.push(c)}},b.prototype.load=function(){this.state=b.STATE_LOADING,this.loadFromDatasource()},b.prototype.pageLoadFailed=function(){this.state=b.STATE_FAILED;var a={success:!1,page:this};this.dispatchEvent(b.EVENT_LOAD_COMPLETE,a)},b.prototype.populateWithRowData=function(a){var b=this,c=[];this.rowNodes.forEach(function(d,e){var f=a[e];d.stub&&c.push(d),b.setDataAndId(d,f,b.startRow+e)}),c.length>0&&this.beans.rowRenderer.redrawRows(c)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.rowNodes.forEach(function(a){a.childrenCache&&(a.childrenCache.destroy(),a.childrenCache=null)})},b.prototype.pageLoaded=function(a,c,d){a===this.version&&(this.state=b.STATE_LOADED,this.populateWithRowData(c)),d=e.Utils.cleanNumber(d);var f={success:!0,page:this,lastRow:d};this.dispatchEvent(b.EVENT_LOAD_COMPLETE,f)},b.EVENT_LOAD_COMPLETE="loadComplete",b.STATE_DIRTY="dirty",b.STATE_LOADING="loading",b.STATE_LOADED="loaded",b.STATE_FAILED="failed",b}(g.BeanStub);b.RowNodeBlock=h},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=c(7),f=c(43),g=c(113),h=function(a){function b(b){var c=a.call(this)||this;return c.maxRowFound=!1,c.blocks={},c.blockCount=0,c.virtualRowCount=b.initialRowCount,c.cacheParams=b,c}return d(b,a),b.prototype.destroy=function(){var b=this;a.prototype.destroy.call(this),this.forEachBlockInOrder(function(a){return b.destroyBlock(a)})},b.prototype.init=function(){var a=this;this.active=!0,this.addDestroyFunc(function(){return a.active=!1})},b.prototype.isActive=function(){return this.active},b.prototype.getVirtualRowCount=function(){return this.virtualRowCount},b.prototype.hack_setVirtualRowCount=function(a){this.virtualRowCount=a},b.prototype.isMaxRowFound=function(){return this.maxRowFound},b.prototype.onPageLoaded=function(a){this.isActive()&&(this.logger.log("onPageLoaded: page = "+a.page.getBlockNumber()+", lastRow = "+a.lastRow),this.cacheParams.rowNodeBlockLoader.loadComplete(),this.checkBlockToLoad(),a.success&&this.checkVirtualRowCount(a.page,a.lastRow))},b.prototype.purgeBlocksIfNeeded=function(a){var b=this;if(!(e.Utils.missing(this.cacheParams.maxBlocksInCache)||this.blockCount<=this.cacheParams.maxBlocksInCache)){var c=[];this.forEachBlockInOrder(function(b){b!==a&&c.push(b)}),c.sort(function(a,b){return b.getLastAccessed()-a.getLastAccessed()});var d=this.cacheParams.maxBlocksInCache-1;c.splice(0,d),c.forEach(function(a){a.isAnyNodeOpen(b.virtualRowCount)||b.removeBlockFromCache(a)})}},b.prototype.postCreateBlock=function(a){a.addEventListener(g.RowNodeBlock.EVENT_LOAD_COMPLETE,this.onPageLoaded.bind(this)),this.setBlock(a.getBlockNumber(),a),this.purgeBlocksIfNeeded(a),this.checkBlockToLoad()},b.prototype.removeBlockFromCache=function(a){a&&this.destroyBlock(a)},b.prototype.checkBlockToLoad=function(){this.cacheParams.rowNodeBlockLoader.checkBlockToLoad()},b.prototype.checkVirtualRowCount=function(a,b){if("number"==typeof b&&b>=0)this.virtualRowCount=b,this.maxRowFound=!0,this.onCacheUpdated();else if(!this.maxRowFound){var c=(a.getBlockNumber()+1)*this.cacheParams.blockSize,d=c+this.cacheParams.overflowSize;this.virtualRowCount<d?(this.virtualRowCount=d,this.onCacheUpdated()):this.cacheParams.dynamicRowHeight&&this.onCacheUpdated()}},b.prototype.setVirtualRowCount=function(a,b){this.virtualRowCount=a,e.Utils.exists(b)&&(this.maxRowFound=b),this.maxRowFound||this.virtualRowCount%this.cacheParams.blockSize==0&&this.virtualRowCount++,this.onCacheUpdated()},b.prototype.forEachNodeDeep=function(a,b){var c=this;this.forEachBlockInOrder(function(d){d.forEachNodeDeep(a,b,c.virtualRowCount)})},b.prototype.forEachBlockInOrder=function(a){var b=this.getBlockIdsSorted();this.forEachBlockId(b,a)},b.prototype.forEachBlockInReverseOrder=function(a){var b=this.getBlockIdsSorted().reverse();this.forEachBlockId(b,a)},b.prototype.forEachBlockId=function(a,b){var c=this;a.forEach(function(a){var d=c.blocks[a];b(d,a)})},b.prototype.getBlockIdsSorted=function(){var a=function(a,b){return a-b};return Object.keys(this.blocks).map(function(a){return parseInt(a)}).sort(a)},b.prototype.getBlock=function(a){return this.blocks[a]},b.prototype.setBlock=function(a,b){this.blocks[a]=b,this.blockCount++,this.cacheParams.rowNodeBlockLoader.addBlock(b)},b.prototype.destroyBlock=function(a){delete this.blocks[a.getBlockNumber()],a.destroy(),this.blockCount--,this.cacheParams.rowNodeBlockLoader.removeBlock(a)},b.prototype.onCacheUpdated=function(){this.isActive()&&this.dispatchEvent(b.EVENT_CACHE_UPDATED)},b.prototype.purgeCache=function(){var a=this;this.forEachBlockInOrder(function(b){return a.removeBlockFromCache(b)}),this.onCacheUpdated()},b.prototype.getRowNodesInRange=function(a,b){var c=this,d=[],f=-1,g=!1,h=new e.NumberSequence;e.Utils.missing(a)&&(g=!0);var i=!1;return this.forEachBlockInOrder(function(e,j){if(!i){if(g&&f+1!==j)return void(i=!0);f=j,e.forEachNodeShallow(function(c){var e=c===a||c===b;(g||e)&&d.push(c),e&&(g=!g)},h,c.virtualRowCount)}}),i||g?[]:d},b.EVENT_CACHE_UPDATED="cacheUpdated",b}(f.BeanStub);b.RowNodeCache=h},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(b,"__esModule",{value:!0});var g=c(113),h=c(5),i=c(6),j=c(7),k=function(){function a(a){this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0,this.maxConcurrentRequests=a}return a.prototype.setBeans=function(a){this.logger=a.create("RowNodeBlockLoader")},a.prototype.addBlock=function(a){this.blocks.push(a)},a.prototype.removeBlock=function(a){j._.removeFromArray(this.blocks,a)},a.prototype.destroy=function(){this.active=!1},a.prototype.loadComplete=function(){this.activeBlockLoadsCount--},a.prototype.checkBlockToLoad=function(){if(this.active){if(this.printCacheStatus(),this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");var a=null;this.blocks.forEach(function(b){b.getState()===g.RowNodeBlock.STATE_DIRTY&&(a=b)}),a?(a.load(),this.activeBlockLoadsCount++,this.logger.log("checkBlockToLoad: loading page "+a.getBlockNumber()),this.printCacheStatus()):this.logger.log("checkBlockToLoad: no pages to load")}},a.prototype.getBlockState=function(){var a={};return this.blocks.forEach(function(b){var c=b.getNodeIdPrefix(),d={blockNumber:b.getBlockNumber(),startRow:b.getStartRow(),endRow:b.getEndRow(),pageStatus:b.getState()};j._.exists(c)?a[c+b.getBlockNumber()]=d:a[b.getBlockNumber()]=d}),a},a.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = "+this.activeBlockLoadsCount+", blocks = "+JSON.stringify(this.getBlockState()))},d([f(0,i.Qualifier("loggerFactory")),e("design:type",Function),e("design:paramtypes",[h.LoggerFactory]),e("design:returntype",void 0)],a.prototype,"setBeans",null),a}();b.RowNodeBlockLoader=k},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(7),h=c(8),i=c(3),j=c(14),k=c(38),l=c(29),m=c(4),n=c(10),o=c(6),p=c(26),q=c(117),r=c(118),s=c(30),t=c(31);!function(a){a[a.Normal=0]="Normal",a[a.AfterFilter=1]="AfterFilter",a[a.AfterFilterAndSort=2]="AfterFilterAndSort",a[a.PivotNodes=3]="PivotNodes"}(f||(f={}));var u=function(){function a(){}return a.prototype.init=function(){this.eventService.addModalPriorityEventListener(n.Events.EVENT_COLUMN_EVERYTHING_CHANGED,this.refreshModel.bind(this,{step:h.Constants.STEP_EVERYTHING})),this.eventService.addModalPriorityEventListener(n.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshModel.bind(this,{step:h.Constants.STEP_EVERYTHING})),this.eventService.addModalPriorityEventListener(n.Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.eventService.addModalPriorityEventListener(n.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:h.Constants.STEP_PIVOT})),this.eventService.addModalPriorityEventListener(n.Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this)),this.eventService.addModalPriorityEventListener(n.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.eventService.addModalPriorityEventListener(n.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.eventService.addModalPriorityEventListener(n.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.refreshModel.bind(this,{step:h.Constants.STEP_PIVOT})),this.gridOptionsWrapper.addEventListener(i.GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN,this.refreshModel.bind(this,{step:h.Constants.STEP_MAP,keepRenderedRows:!0,animate:!0})),this.rootNode=new l.RowNode,this.nodeManager=new q.InMemoryNodeManager(this.rootNode,this.gridOptionsWrapper,this.context,this.eventService,this.columnController),this.context.wireBean(this.rootNode)},a.prototype.isLastRowFound=function(){return!0},a.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},a.prototype.getRowBounds=function(a){if(g.Utils.missing(this.rowsToDisplay))return null;var b=this.rowsToDisplay[a];return b?{rowTop:b.rowTop,rowHeight:b.rowHeight}:null},a.prototype.onRowGroupOpened=function(){var a=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:h.Constants.STEP_MAP,keepRenderedRows:!0,animate:a})},a.prototype.onFilterChanged=function(){var a=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:h.Constants.STEP_FILTER,keepRenderedRows:!0,animate:a})},a.prototype.onSortChanged=function(){if(!this.gridOptionsWrapper.isEnableServerSideSorting()){var a=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:h.Constants.STEP_SORT,keepRenderedRows:!0,animate:a,keepEditingRows:!0})}},a.prototype.getType=function(){return h.Constants.ROW_MODEL_TYPE_IN_MEMORY},a.prototype.onValueChanged=function(){this.columnController.isPivotActive()?this.refreshModel({step:h.Constants.STEP_PIVOT}):this.refreshModel({step:h.Constants.STEP_AGGREGATE})},a.prototype.createChangePath=function(a){if(!a)return null;var b=this.columnController.getValueColumns();return b&&0!==b.length?new r.ChangedPath(!1):null},a.prototype.refreshModel=function(a){var b=this,c=this.createChangePath(a.rowNodeTransaction);switch(a.step){case h.Constants.STEP_EVERYTHING:this.doRowGrouping(a.groupState,a.rowNodeTransaction,c);case h.Constants.STEP_FILTER:this.doFilter();case h.Constants.STEP_PIVOT:this.doPivot();case h.Constants.STEP_AGGREGATE:this.doAggregate(c);case h.Constants.STEP_SORT:this.doSort();case h.Constants.STEP_MAP:this.doRowsToDisplay()}var d={animate:a.animate,keepRenderedRows:a.keepRenderedRows,newData:a.newData,newPage:!1};this.eventService.dispatchEvent(n.Events.EVENT_MODEL_UPDATED,d),this.$scope&&setTimeout(function(){b.$scope.$apply()},0)},a.prototype.isEmpty=function(){var a;return a=g.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc())?g.Utils.missing(this.rootNode.childrenAfterGroup)||0===this.rootNode.childrenAfterGroup.length:g.Utils.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length,g.Utils.missing(this.rootNode)||a||!this.columnController.isReady()},a.prototype.isRowsToRender=function(){return g.Utils.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},a.prototype.getNodesInRangeForSelection=function(a,b){var c,d=!b,e=!1,f=[],g=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(h){var i=d&&!e;if(d||h!==b&&h!==a||(d=!0),!(h.group&&g)){var j=d&&!e,k=h.isParentOfNode(c);(j||k)&&f.push(h)}i&&(h!==b&&h!==a||(e=!0,c=h===b?b:a))}),f},a.prototype.setDatasource=function(a){console.error("ag-Grid: should never call setDatasource on inMemoryRowController")},a.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},a.prototype.getRootNode=function(){return this.rootNode},a.prototype.getRow=function(a){return this.rowsToDisplay[a]},a.prototype.isRowPresent=function(a){return this.rowsToDisplay.indexOf(a)>=0},a.prototype.getVirtualRowCount=function(){return console.warn("ag-Grid: rowModel.getVirtualRowCount() is not longer a function, use rowModel.getRowCount() instead"),this.getPageLastRow()},a.prototype.getPageFirstRow=function(){return 0},a.prototype.getPageLastRow=function(){return this.rowsToDisplay?this.rowsToDisplay.length-1:0},a.prototype.getRowIndexAtPixel=function(a){if(this.isEmpty())return-1;var b=0,c=this.rowsToDisplay.length-1;if(a<=0)return 0;if(this.rowsToDisplay[this.rowsToDisplay.length-1].rowTop<=a)return this.rowsToDisplay.length-1;for(;;){var d=Math.floor((b+c)/2),e=this.rowsToDisplay[d];if(this.isRowInPixel(e,a))return d;e.rowTop<a?b=d+1:e.rowTop>a&&(c=d-1)}},a.prototype.isRowInPixel=function(a,b){var c=a.rowTop,d=a.rowTop+a.rowHeight;return c<=b&&d>b},a.prototype.getCurrentPageHeight=function(){if(this.rowsToDisplay&&this.rowsToDisplay.length>0){var a=this.rowsToDisplay[this.rowsToDisplay.length-1];return a.rowTop+a.rowHeight}return 0},a.prototype.forEachLeafNode=function(a){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(b,c){return a(b,c)})},a.prototype.forEachNode=function(a){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,a,f.Normal,0)},a.prototype.forEachNodeAfterFilter=function(a){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter,a,f.AfterFilter,0)},a.prototype.forEachNodeAfterFilterAndSort=function(a){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,a,f.AfterFilterAndSort,0)},a.prototype.forEachPivotNode=function(a){this.recursivelyWalkNodesAndCallback([this.rootNode],a,f.PivotNodes,0)},a.prototype.recursivelyWalkNodesAndCallback=function(a,b,c,d){if(a)for(var e=0;e<a.length;e++){var g=a[e];if(b(g,d++),g.group){var h=void 0;switch(c){case f.Normal:h=g.childrenAfterGroup;break;case f.AfterFilter:h=g.childrenAfterFilter;break;case f.AfterFilterAndSort:h=g.childrenAfterSort;break;case f.PivotNodes:h=g.leafGroup?null:g.childrenAfterSort}h&&(d=this.recursivelyWalkNodesAndCallback(h,b,c,d))}}return d},a.prototype.doAggregate=function(a){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:a})},a.prototype.expandOrCollapseAll=function(a){function b(c){c&&c.forEach(function(c){c.group&&(c.expanded=a,b(c.childrenAfterGroup))})}this.rootNode&&b(this.rootNode.childrenAfterGroup),this.refreshModel({step:h.Constants.STEP_MAP})},a.prototype.doSort=function(){this.sortStage.execute({rowNode:this.rootNode})},a.prototype.doRowGrouping=function(a,b,c){g.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc())||(this.groupStage?(b?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransaction:b,changedPath:c}):(this.selectionController.removeGroupsFromSelection(),this.groupStage.execute({rowNode:this.rootNode}),this.restoreGroupState(a)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionController.updateGroupsFromChildrenSelections()):this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren)},a.prototype.restoreGroupState=function(a){a&&g.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(b,c){"boolean"==typeof a[c]&&(b.expanded=a[c])})},a.prototype.doFilter=function(){this.filterStage.execute({rowNode:this.rootNode})},a.prototype.doPivot=function(){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode})},a.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var a={};return g.Utils.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(b,c){return a[c]=b.expanded}),a},a.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},a.prototype.getRowNode=function(a){
return this.nodeManager.getRowNode(a)},a.prototype.setRowData=function(a){var b=this.getGroupState();this.nodeManager.setRowData(a),this.eventService.dispatchEvent(n.Events.EVENT_ROW_DATA_CHANGED),this.refreshModel({step:h.Constants.STEP_EVERYTHING,groupState:b,newData:!0})},a.prototype.updateRowData=function(a){this.valueCache.onDataChanged();var b=this.nodeManager.updateRowData(a);this.refreshModel({step:h.Constants.STEP_EVERYTHING,rowNodeTransaction:b,keepRenderedRows:!0,animate:!0,keepEditingRows:!0}),this.eventService.dispatchEvent(n.Events.EVENT_ROW_DATA_UPDATED)},a.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},a.prototype.insertItemsAtIndex=function(a,b,c){var d=this.getGroupState(),e=this.nodeManager.insertItemsAtIndex(a,b);c||this.refreshAndFireEvent(n.Events.EVENT_ITEMS_ADDED,e,d)},a.prototype.onRowHeightChanged=function(){this.refreshModel({step:h.Constants.STEP_MAP,keepRenderedRows:!0,keepEditingRows:!0})},a.prototype.resetRowHeights=function(){this.forEachNode(function(a){return a.setRowHeight(null)}),this.onRowHeightChanged()},a.prototype.removeItems=function(a,b){var c=this.getGroupState(),d=this.nodeManager.removeItems(a);b||this.refreshAndFireEvent(n.Events.EVENT_ITEMS_REMOVED,d,c)},a.prototype.addItems=function(a,b){var c=this.getGroupState(),d=this.nodeManager.addItems(a);b||this.refreshAndFireEvent(n.Events.EVENT_ITEMS_ADDED,d,c)},a.prototype.refreshAndFireEvent=function(a,b,c){b&&(this.refreshModel({step:h.Constants.STEP_EVERYTHING,groupState:c}),this.eventService.dispatchEvent(a,{rowNodes:b}))},d([o.Autowired("gridOptionsWrapper"),e("design:type",i.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([o.Autowired("columnController"),e("design:type",j.ColumnController)],a.prototype,"columnController",void 0),d([o.Autowired("filterManager"),e("design:type",k.FilterManager)],a.prototype,"filterManager",void 0),d([o.Autowired("$scope"),e("design:type",Object)],a.prototype,"$scope",void 0),d([o.Autowired("selectionController"),e("design:type",p.SelectionController)],a.prototype,"selectionController",void 0),d([o.Autowired("eventService"),e("design:type",m.EventService)],a.prototype,"eventService",void 0),d([o.Autowired("context"),e("design:type",o.Context)],a.prototype,"context",void 0),d([o.Autowired("valueService"),e("design:type",s.ValueService)],a.prototype,"valueService",void 0),d([o.Autowired("valueCache"),e("design:type",t.ValueCache)],a.prototype,"valueCache",void 0),d([o.Autowired("filterStage"),e("design:type",Object)],a.prototype,"filterStage",void 0),d([o.Autowired("sortStage"),e("design:type",Object)],a.prototype,"sortStage",void 0),d([o.Autowired("flattenStage"),e("design:type",Object)],a.prototype,"flattenStage",void 0),d([o.Optional("groupStage"),e("design:type",Object)],a.prototype,"groupStage",void 0),d([o.Optional("aggregationStage"),e("design:type",Object)],a.prototype,"aggregationStage",void 0),d([o.Optional("pivotStage"),e("design:type",Object)],a.prototype,"pivotStage",void 0),d([o.PostConstruct,e("design:type",Function),e("design:paramtypes",[]),e("design:returntype",void 0)],a.prototype,"init",null),a=d([o.Bean("rowModel")],a)}();b.InMemoryRowModel=u},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(29),e=c(7),f=function(){function a(b,c,d,e,f){this.nextId=0,this.allNodesMap={},this.rootNode=b,this.gridOptionsWrapper=c,this.context=d,this.eventService=e,this.columnController=f,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=a.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterFilter=[]}return a.prototype.getCopyOfNodesMap=function(){return e.Utils.cloneObject(this.allNodesMap)},a.prototype.getRowNode=function(a){return this.allNodesMap[a]},a.prototype.setRowData=function(b){if(this.rootNode.childrenAfterFilter=null,this.rootNode.childrenAfterGroup=null,this.rootNode.childrenAfterSort=null,this.rootNode.childrenMapped=null,this.nextId=0,this.allNodesMap={},!b)return this.rootNode.allLeafChildren=[],void(this.rootNode.childrenAfterGroup=[]);this.getNodeChildDetails=this.gridOptionsWrapper.getNodeChildDetailsFunc(),this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.doesDataFlower=this.gridOptionsWrapper.getDoesDataFlowerFunc();var c=e.Utils.exists(this.getNodeChildDetails),d=this.recursiveFunction(b,null,a.TOP_LEVEL);c?(this.rootNode.childrenAfterGroup=d,this.setLeafChildren(this.rootNode)):this.rootNode.allLeafChildren=d},a.prototype.updateRowData=function(a){var b=this;if(this.isRowsAlreadyGrouped())return null;var c=a.add,d=a.addIndex,f=a.remove,g=a.update,h={remove:[],update:[],add:[]};if(e.Utils.exists(c)){"number"==typeof d&&d>=0?c.reverse().forEach(function(a){var c=b.addRowNode(a,d);h.add.push(c)}):c.forEach(function(a){var c=b.addRowNode(a);h.add.push(c)})}return e.Utils.exists(f)&&f.forEach(function(a){var c=b.updatedRowNode(a,!1);c&&h.remove.push(c)}),e.Utils.exists(g)&&g.forEach(function(a){var c=b.updatedRowNode(a,!0);c&&h.update.push(c)}),h},a.prototype.addRowNode=function(b,c){var d=this.createNode(b,null,a.TOP_LEVEL);return e.Utils.exists(c)?e.Utils.insertIntoArray(this.rootNode.allLeafChildren,d,c):this.rootNode.allLeafChildren.push(d),d},a.prototype.updatedRowNode=function(a,b){var c,d=this.gridOptionsWrapper.getRowNodeIdFunc();if(e.Utils.exists(d)){var f=d(a);if(!(c=this.allNodesMap[f]))return console.error("ag-Grid: could not find row id="+f+", data item was not found for this id"),null}else if(!(c=e.Utils.find(this.rootNode.allLeafChildren,function(b){return b.data===a})))return console.error("ag-Grid: could not find data item as object was not found",a),null;return b?c.updateData(a):(c.setSelected(!1),e.Utils.removeFromArray(this.rootNode.allLeafChildren,c),this.allNodesMap[c.id]=void 0),c},a.prototype.recursiveFunction=function(a,b,c){var d=this;if("string"==typeof a)return void console.warn("ag-Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");var e=[];return a.forEach(function(a){var f=d.createNode(a,b,c);e.push(f)}),e},a.prototype.createNode=function(a,b,c){var e=new d.RowNode;this.context.wireBean(e);var f=this.getNodeChildDetails?this.getNodeChildDetails(a):null;return f&&f.group?(e.group=!0,e.childrenAfterGroup=this.recursiveFunction(f.children,e,c+1),e.expanded=!0===f.expanded,e.field=f.field,e.key=f.key,e.canFlower=!1,this.setLeafChildren(e)):(e.group=!1,e.canFlower=!!this.doesDataFlower&&this.doesDataFlower(a),e.canFlower&&(e.expanded=this.isExpanded(c))),b&&!this.suppressParentsInRowNodes&&(e.parent=b),e.level=c,e.setDataAndId(a,this.nextId.toString()),this.allNodesMap[e.id]=e,this.nextId++,e},a.prototype.isExpanded=function(a){var b=this.gridOptionsWrapper.getGroupDefaultExpanded();return-1===b||a<b},a.prototype.setLeafChildren=function(a){a.allLeafChildren=[],a.childrenAfterGroup&&a.childrenAfterGroup.forEach(function(b){b.group?b.allLeafChildren&&b.allLeafChildren.forEach(function(b){return a.allLeafChildren.push(b)}):a.allLeafChildren.push(b)})},a.prototype.insertItemsAtIndex=function(b,c){if(this.isRowsAlreadyGrouped())return null;var d=this.rootNode.allLeafChildren;if(b>d.length)return void console.warn("ag-Grid: invalid index "+b+", max index is "+d.length);for(var f=[],g=c.length-1;g>=0;g--){var h=c[g],i=this.createNode(h,null,a.TOP_LEVEL);e.Utils.insertIntoArray(d,i,b),f.push(i)}return f.length>0?f:null},a.prototype.removeItems=function(a){var b=this;if(!this.isRowsAlreadyGrouped()){var c=this.rootNode.allLeafChildren,d=[];return a.forEach(function(a){var e=c.indexOf(a);e>=0&&(a.setSelected(!1),c.splice(e,1),b.allNodesMap[a.id]=void 0),d.push(a)}),d.length>0?d:null}},a.prototype.addItems=function(a){var b=this.rootNode.allLeafChildren;return this.insertItemsAtIndex(b.length,a)},a.prototype.isRowsAlreadyGrouped=function(){return!!e.Utils.exists(this.gridOptionsWrapper.getNodeChildDetailsFunc())&&(console.warn("ag-Grid: adding and removing rows is not supported when using nodeChildDetailsFunc, ie it is not supported if providing groups"),!0)},a.TOP_LEVEL=0,a.ROOT_NODE_ID="ROOT_NODE_ID",a}();b.InMemoryNodeManager=f},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(a){this.nodeIdsToBoolean={},this.nodeIdsToColumns={},this.keepingColumns=a}return a.prototype.addParentNode=function(a,b){for(var c=this,d=a;d;)this.nodeIdsToBoolean[d.id]=!0,this.keepingColumns&&b&&(this.nodeIdsToColumns[d.id]||(this.nodeIdsToColumns[d.id]={}),b.forEach(function(a){return c.nodeIdsToColumns[d.id][a.getId()]=!0})),d=d.parent},a.prototype.isInPath=function(a){return this.nodeIdsToBoolean[a.id]},a.prototype.getValueColumnsForNode=function(a,b){if(!this.keepingColumns)return b;var c=this.nodeIdsToColumns[a.id];return b.filter(function(a){return c[a.getId()]})},a.prototype.getNotValueColumnsForNode=function(a,b){if(!this.keepingColumns)return null;var c=this.nodeIdsToColumns[a.id];return b.filter(function(a){return!c[a.getId()]})},a}();b.ChangedPath=c},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){}return a.prototype.dateComponent=function(a){return a.dateComponent},a.prototype.colDefFloatingCellRenderer=function(a){return a.pinnedRowCellRenderer},a.prototype.colDefCellRenderer=function(a){return a.cellRenderer},a.prototype.colDefCellEditor=function(a){return a.cellEditor},a.prototype.colDefFilter=function(a){return a.filter},a.prototype.gridOptionsFullWidthCellRenderer=function(a){return a.fullWidthCellRenderer},a.prototype.gridOptionsGroupRowRenderer=function(a){return a.groupRowRenderer},a.prototype.gridOptionsGroupRowInnerRenderer=function(a){return a.groupRowInnerRenderer},a.prototype.setTimeout=function(a,b){setTimeout(a,b)},a}();b.BaseFrameworkFactory=c},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};Object.defineProperty(b,"__esModule",{value:!0});var e=c(6),f=function(){function a(){}return a.prototype.createXml=function(a,b){var c=this,d="";a.properties&&(a.properties.prefixedAttributes&&a.properties.prefixedAttributes.forEach(function(a){Object.keys(a.map).forEach(function(e){d+=c.returnAttributeIfPopulated(a.prefix+e,a.map[e],b)})}),a.properties.rawMap&&Object.keys(a.properties.rawMap).forEach(function(e){d+=c.returnAttributeIfPopulated(e,a.properties.rawMap[e],b)}));var e="<"+a.name+d;return a.children||null!=a.textNode?null!=a.textNode?e+">"+a.textNode+"</"+a.name+">\r\n":(e+=">\r\n",a.children.forEach(function(a){e+=c.createXml(a,b)}),e+"</"+a.name+">\r\n"):e+"/>\r\n"},a.prototype.returnAttributeIfPopulated=function(a,b,c){if(!b)return"";var d=b;return"boolean"==typeof b&&c&&(d=c(b)),d='"'+d+'"'," "+a+"="+d},a=d([e.Bean("xmlFactory")],a)}();b.XmlFactory=f},function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var f=c(29),g=c(117),h=c(3),i=c(4),j=c(6),k=c(14),l=function(){function a(){}return a.prototype.create=function(a){var b=new f.RowNode,c=new g.InMemoryNodeManager(b,this.gridOptionsWrapper,this.context,this.eventService,this.columnController);return this.context.wireBean(b),c.setRowData(a),b},d([j.Autowired("gridOptionsWrapper"),e("design:type",h.GridOptionsWrapper)],a.prototype,"gridOptionsWrapper",void 0),d([j.Autowired("eventService"),e("design:type",i.EventService)],a.prototype,"eventService",void 0),d([j.Autowired("context"),e("design:type",j.Context)],a.prototype,"context",void 0),d([j.Autowired("columnController"),e("design:type",k.ColumnController)],a.prototype,"columnController",void 0),a=d([j.Bean("rowNodeFactory")],a)}();b.RowNodeFactory=l},function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};Object.defineProperty(b,"__esModule",{value:!0});var g=c(6),h=c(3),i=c(118),j=c(22),k=c(4),l=c(8),m=c(43),n=c(10),o=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.init=function(){this.rowModel.getType()===l.Constants.ROW_MODEL_TYPE_IN_MEMORY&&(this.inMemoryRowModel=this.rowModel),this.addDestroyableEventListener(this.eventService,n.Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},b.prototype.onCellValueChanged=function(a){this.doChangeDetection(a.node,a.column)},b.prototype.doChangeDetection=function(a,b){if(!this.gridOptionsWrapper.isSuppressChangeDetection()){if(this.inMemoryRowModel){var c=void 0;if(a.parent){var d=this.gridOptionsWrapper.isAggregateOnlyChangedColumns();c=new i.ChangedPath(d),c.addParentNode(a.parent,[b])}this.inMemoryRowModel.doAggregate(c)}this.rowRenderer.refreshCells()}},e([g.Autowired("gridOptionsWrapper"),f("design:type",h.GridOptionsWrapper)],b.prototype,"gridOptionsWrapper",void 0),e([g.Autowired("rowModel"),f("design:type",Object)],b.prototype,"rowModel",void 0),e([g.Autowired("rowRenderer"),f("design:type",j.RowRenderer)],b.prototype,"rowRenderer",void 0),e([g.Autowired("eventService"),f("design:type",k.EventService)],b.prototype,"eventService",void 0),e([g.PostConstruct,f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],b.prototype,"init",null),b=e([g.Bean("changeDetectionService")],b)}(m.BeanStub);b.ChangeDetectionService=o},function(a,b,c){"use strict";function d(){if(console.warn("ag-grid: initialiseAgGridWithWebComponents is deprecated. Please use the ag-grid-webcomponent dependency instead. "),!h){h=!0,"undefined"!=typeof document&&document.registerElement||console.error("ag-Grid: unable to find document.registerElement() function, unable to initialise ag-Grid as a Web Component");var a=Object.create(HTMLElement.prototype);f.ComponentUtil.ALL_PROPERTIES.forEach(function(b){Object.defineProperty(a,b,{set:function(a){this.__agGridSetProperty(b,a)},get:function(){return this.__agGridGetProperty(b)},enumerable:!0,configurable:!0})});var b=a;b.__agGridSetProperty=function(a,b){this.__attributes||(this.__attributes={}),this.__attributes[a]=b;var c={};c[a]={currentValue:b},this.onChange(c)},b.onChange=function(a){this._initialised&&f.ComponentUtil.processOnChange(a,this._gridOptions,this.api,this.columnApi)},b.__agGridGetProperty=function(a){return this.__attributes||(this.__attributes={}),this.__attributes[a]},b.setGridOptions=function(a){var b=this.globalEventListener.bind(this);this._gridOptions=f.ComponentUtil.copyAttributesToGridOptions(a,this);var c={globalEventListener:b};this._agGrid=new g.Grid(this,this._gridOptions,c),this.api=a.api,this.columnApi=a.columnApi,this._initialised=!0},b.createdCallback=function(){for(var a=0;a<this.attributes.length;a++){var b=this.attributes[a];this.setPropertyFromAttribute(b)}},b.setPropertyFromAttribute=function(a){var b=e(a.nodeName),c=a.nodeValue;f.ComponentUtil.ALL_PROPERTIES.indexOf(b)>=0&&(this[b]=c)},b.attachedCallback=function(a){},b.detachedCallback=function(a){},b.attributeChangedCallback=function(a){var b=this.attributes[a];this.setPropertyFromAttribute(b)},b.globalEventListener=function(a,b){var c=a.toLowerCase(),d=new Event(c);d.agGridDetails=b,this.dispatchEvent(d);var e="on"+c;"function"==typeof this[e]&&this[e](d)},document.registerElement("ag-grid",{prototype:a})}}function e(a){if("string"==typeof a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})}return a}Object.defineProperty(b,"__esModule",{value:!0});var f=c(9),g=c(103),h=!1;b.initialiseAgGridWithWebComponents=d},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(7),e=function(){function a(b){var c=this;this.items=[],this.params=b,this.eGui=document.createElement("div"),this.eGui.innerHTML=a.TEMPLATE,this.eHeader=this.eGui.querySelector("#tabHeader"),this.eBody=this.eGui.querySelector("#tabBody"),d.Utils.addCssClass(this.eGui,b.cssClass),b.items&&b.items.forEach(function(a){return c.addItem(a)})}return a.prototype.setAfterAttachedParams=function(a){this.afterAttachedParams=a},a.prototype.getMinWidth=function(){var a=document.createElement("span");a.style.position="fixed",this.eGui.appendChild(a);var b=0;return this.items.forEach(function(c){d.Utils.removeAllChildren(a);var e=c.tabbedItem.body.cloneNode(!0);a.appendChild(e),b<a.offsetWidth&&(b=a.offsetWidth)}),this.eGui.removeChild(a),b},a.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},a.prototype.addItem=function(a){var b=document.createElement("span");b.appendChild(a.title),d.Utils.addCssClass(b,"ag-tab"),this.eHeader.appendChild(b);var c={tabbedItem:a,eHeaderButton:b};this.items.push(c),b.addEventListener("click",this.showItemWrapper.bind(this,c))},a.prototype.showItem=function(a){var b=d.Utils.find(this.items,function(b){return b.tabbedItem===a});b&&this.showItemWrapper(b)},a.prototype.showItemWrapper=function(a){if(this.params.onItemClicked&&this.params.onItemClicked({item:a.tabbedItem}),this.activeItem===a)return void d.Utils.callIfPresent(this.params.onActiveItemClicked);d.Utils.removeAllChildren(this.eBody),this.eBody.appendChild(a.tabbedItem.body),this.activeItem&&d.Utils.removeCssClass(this.activeItem.eHeaderButton,"ag-tab-selected"),d.Utils.addCssClass(a.eHeaderButton,"ag-tab-selected"),this.activeItem=a,a.tabbedItem.afterAttachedCallback&&a.tabbedItem.afterAttachedCallback(this.afterAttachedParams)},a.prototype.getGui=function(){return this.eGui},a.TEMPLATE='<div><div id="tabHeader" class="ag-tab-header"></div><div id="tabBody" class="ag-tab-body"></div></div>',a}();b.TabbedLayout=e},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){this.isLayoutPanel=!0,this.childPanels=[],this.eGui=document.createElement("div"),this.eGui.style.height="100%"}return a.prototype.addPanel=function(a,b){var c;a.isLayoutPanel?(this.childPanels.push(a),c=a.getGui()):c=a,b&&(c.style.height=b),this.eGui.appendChild(c)},a.prototype.getGui=function(){return this.eGui},a.prototype.doLayout=function(){for(var a=0;a<this.childPanels.length;a++)this.childPanels[a].doLayout()},a}();b.VerticalStack=c},function(a,b){"use strict";function c(a){var b=new d,c=new XMLHttpRequest;return c.open("GET",a.url),c.send(),c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var a=JSON.parse(c.responseText);b.resolve(a)}},b}Object.defineProperty(b,"__esModule",{value:!0}),b.simpleHttpRequest=c;var d=function(){function a(){}return a.prototype.then=function(a){this.thenFunc=a},a.prototype.resolve=function(a){this.thenFunc&&this.thenFunc(a)},a}();b.Promise=d},function(a,b,c){"use strict";function d(a,b,c,d,f){void 0===f&&(f=!1),console.warn("ag-Grid: Since ag-grid 11.0.0 defaultGroupComparator is not necessary. You can remove this from your colDef");var g=e.Utils.exists(c)&&c.group,h=e.Utils.exists(d)&&d.group,i=g&&h,j=!g&&!h;return i?e.Utils.defaultComparator(c.key,d.key,f):j?e.Utils.defaultComparator(a,b,f):g?1:-1}Object.defineProperty(b,"__esModule",{value:!0});var e=c(7);b.defaultGroupComparator=d},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(){}return a.prototype.wrap=function(a,b,c){var d=this,e=this.createWrapper(a);return b.forEach(function(a){d.createMethod(e,a,!0)}),c&&c.forEach(function(a){d.createMethod(e,a,!1)}),e},a.prototype.createMethod=function(a,b,c){a.addMethod(b,this.createMethodProxy(a,b,c))},a.prototype.createMethodProxy=function(a,b,c){return function(){return a.hasMethod(b)?a.callMethod(b,arguments):(c&&console.warn("ag-Grid: Framework component is missing the method "+b+"()"),null)}},a}();b.BaseComponentWrapper=c},function(a,b,c){var d=c(130);"string"==typeof d&&(d=[[a.id,d,""]]);c(132)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(131)(),
b.push([a.id,'ag-grid-angular {\n  display: inline-block;\n}\nag-grid-ng2 {\n  display: inline-block;\n}\nag-grid {\n  display: block;\n}\nag-grid-polymer {\n  display: block;\n}\n.ag-rtl {\n  direction: rtl;\n}\n.ag-ltr {\n  direction: ltr;\n}\n.ag-select-agg-func-popup {\n  position: absolute;\n}\n.ag-body-no-select {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.ag-root {\n/* set to relative, so absolute popups appear relative to this */\n  position: relative;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n/* was getting some \'should be there\' scrolls, this sorts it out */\n  overflow: hidden;\n}\n.ag-layout-normal .ag-root {\n  height: 100%;\n}\n.ag-font-style {\n  cursor: default;\n/* disable user mouse selection */\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.ag-layout-for-print {\n  white-space: nowrap;\n  display: inline-block;\n}\n.ag-layout-normal {\n  height: 100%;\n}\n.ag-popup-backdrop {\n  position: fixed;\n  left: 0px;\n  top: 0px;\n  width: 100%;\n  height: 100%;\n}\n.ag-header {\n  white-space: nowrap;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  width: 100%;\n}\n.ag-layout-normal .ag-header {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n}\n.ag-pinned-left-header {\n  float: left;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  overflow: hidden;\n  height: 100%;\n}\n.ag-pinned-right-header {\n  float: right;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  overflow: hidden;\n  height: 100%;\n}\n.ag-header-viewport {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  height: 100%;\n}\n.ag-layout-normal .ag-header-row {\n  position: absolute;\n}\n.ag-layout-normal .ag-header-container {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  position: relative;\n  white-space: nowrap;\n  height: 100%;\n}\n.ag-layout-auto-height .ag-header-row {\n  position: absolute;\n}\n.ag-layout-auto-height .ag-header-container {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  position: relative;\n  white-space: nowrap;\n  height: 100%;\n}\n.ag-layout-for-print .ag-header-container {\n  white-space: nowrap;\n}\n.ag-header-overlay {\n  display: block;\n  position: absolute;\n}\n.ag-header-cell {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  vertical-align: bottom;\n  text-align: center;\n  display: inline-block;\n  height: 100%;\n  position: absolute;\n}\n.ag-floating-filter {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  position: absolute;\n  display: inline-block;\n}\n.ag-floating-filter-body {\n  margin-right: 25px;\n  height: 20px;\n}\n.ag-floating-filter-full-body {\n  width: 100%;\n  height: 20px;\n}\n.ag-floating-filter-button {\n  width: 25px;\n  height: 20px;\n  float: right;\n  margin-top: -20px;\n}\n.ag-floating-filter-button button {\n  width: 25px;\n  height: 19px;\n  padding: 0;\n}\n.ag-floating-filter-input {\n  width: 100%;\n}\n.ag-floating-filter-input:read-only {\n  background-color: #eee;\n}\n.ag-floating-filter-menu {\n  position: absolute;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.ag-dnd-ghost {\n  font-size: 14px;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  position: absolute;\n  background: #e5e5e5;\n  border: 1px solid #000;\n  cursor: move;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  padding: 3px;\n  line-height: 1.4;\n}\n.ag-dnd-ghost-icon {\n  display: inline-block;\n  float: left;\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-dnd-ghost-label {\n  display: inline-block;\n}\n.ag-header-group-cell {\n  height: 100%;\n  display: inline-block;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  position: absolute;\n}\n.ag-header-group-cell-label {\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.ag-header-cell-label {\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.ag-header-cell-resize {\n  height: 100%;\n  width: 4px;\n  cursor: col-resize;\n}\n.ag-ltr .ag-header-cell-resize {\n  float: right;\n}\n.ag-ltr .ag-pinned-right-header .ag-header-cell-resize {\n  float: left;\n}\n.ag-rtl .ag-header-cell-resize {\n  float: left;\n}\n.ag-rtl .ag-pinned-left-header .ag-header-cell-resize {\n  float: right;\n}\n.ag-ltr .ag-header-select-all {\n  float: left;\n}\n.ag-rtl .ag-header-select-all {\n  float: right;\n}\n.ag-header-expand-icon {\n  padding-left: 4px;\n}\n.ag-header-cell-menu-button {\n  float: right;\n}\n.ag-overlay-panel {\n  display: table;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.ag-overlay-wrapper {\n  display: table-cell;\n  vertical-align: middle;\n  text-align: center;\n}\n.ag-bl-overlay {\n  pointer-events: none;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0px;\n  left: 0px;\n}\n.ag-bl-full-height {\n  height: 100%;\n  overflow: auto;\n  position: relative;\n}\n.ag-bl-west {\n  float: left;\n}\n.ag-bl-full-height-west {\n  height: 100%;\n}\n.ag-bl-east {\n  float: right;\n}\n.ag-bl-full-height-east {\n  height: 100%;\n}\n.ag-bl-full-height-center {\n  height: 100%;\n}\n.ag-bl-normal {\n  height: 100%;\n  position: relative;\n}\n.ag-bl-normal-center-row {\n  height: 100%;\n  overflow: hidden;\n}\n.ag-bl-normal-west {\n  height: 100%;\n  float: left;\n}\n.ag-bl-normal-east {\n  height: 100%;\n  float: right;\n}\n.ag-bl-normal-center {\n  height: 100%;\n}\n.ag-bl-dont-fill {\n  position: relative;\n}\n.ag-body {\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.ag-layout-normal .ag-body {\n  height: 100%;\n  position: absolute;\n}\n.ag-floating-top {\n  width: 100%;\n  white-space: nowrap;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.ag-layout-normal .ag-floating-top {\n  position: absolute;\n  left: 0px;\n}\n.ag-pinned-left-floating-top {\n  float: left;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  overflow: hidden;\n  position: relative;\n}\n.ag-layout-normal .ag-pinned-left-floating-top {\n  height: 100%;\n}\n.ag-pinned-right-floating-top {\n  float: right;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  overflow: hidden;\n  position: relative;\n}\n.ag-layout-normal .ag-pinned-right-floating-top {\n  height: 100%;\n}\n.ag-floating-top-viewport {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.ag-layout-normal .ag-floating-top-viewport {\n  height: 100%;\n}\n.ag-floating-top-container {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  position: relative;\n  white-space: nowrap;\n}\n.ag-floating-bottom {\n  width: 100%;\n  white-space: nowrap;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.ag-layout-normal .ag-floating-bottom {\n  position: absolute;\n  left: 0px;\n}\n.ag-pinned-left-floating-bottom {\n  float: left;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  overflow: hidden;\n  position: relative;\n}\n.ag-layout-normal .ag-pinned-left-floating-bottom {\n  height: 100%;\n}\n.ag-pinned-right-floating-bottom {\n  float: right;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  overflow: hidden;\n  position: relative;\n}\n.ag-layout-normal .ag-pinned-right-floating-bottom {\n  height: 100%;\n}\n.ag-floating-bottom-viewport {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.ag-layout-normal .ag-floating-bottom-viewport {\n  height: 100%;\n}\n.ag-floating-bottom-container {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  position: relative;\n  white-space: nowrap;\n}\n.ag-pinned-left-cols-viewport {\n  float: left;\n}\n.ag-pinned-left-cols-container {\n  display: inline-block;\n  position: relative;\n}\n.ag-pinned-right-cols-viewport {\n  float: right;\n}\n.ag-ltr .ag-pinned-right-cols-viewport {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.ag-ltr .ag-pinned-left-cols-viewport {\n  overflow: hidden;\n}\n.ag-rtl .ag-pinned-right-cols-viewport {\n  overflow: hidden;\n}\n.ag-rtl .ag-pinned-left-cols-viewport {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.ag-pinned-right-cols-container {\n  display: inline-block;\n  position: relative;\n}\n.ag-layout-normal .ag-body-viewport-wrapper {\n  height: 100%;\n}\n.ag-body-viewport {\n  overflow-x: auto;\n  overflow-y: auto;\n}\n.ag-layout-normal .ag-body-viewport {\n  height: 100%;\n}\n.ag-full-width-viewport {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  display: inline;\n  pointer-events: none;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.ag-full-width-container {\n  overflow: hidden;\n  position: relative;\n  width: 100%;\n}\n.ag-floating-bottom-full-width-container {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  pointer-events: none;\n  overflow: hidden;\n  display: inline;\n}\n.ag-floating-top-full-width-container {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  pointer-events: none;\n  overflow: hidden;\n  display: inline;\n}\n.ag-full-width-row {\n  pointer-events: all;\n  overflow: hidden;\n}\n.ag-layout-normal .ag-body-container {\n  position: relative;\n  display: inline-block;\n}\n.ag-layout-auto-height .ag-body-container {\n  position: relative;\n  display: inline-block;\n}\n.ag-row-animation {\n  -webkit-transition: top 0.4s, height 0.4s, background-color 0.1s, opacity 0.2s;\n  -moz-transition: top 0.4s, height 0.4s, background-color 0.1s, opacity 0.2s;\n  -o-transition: top 0.4s, height 0.4s, background-color 0.1s, opacity 0.2s;\n  -ms-transition: top 0.4s, height 0.4s, background-color 0.1s, opacity 0.2s;\n  transition: top 0.4s, height 0.4s, background-color 0.1s, opacity 0.2s;\n}\n.ag-row-no-animation {\n  -webkit-transition: background-color 0.1s;\n  -moz-transition: background-color 0.1s;\n  -o-transition: background-color 0.1s;\n  -ms-transition: background-color 0.1s;\n  transition: background-color 0.1s;\n}\n.ag-row {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.ag-layout-normal .ag-row {\n  white-space: nowrap;\n  position: absolute;\n  width: 100%;\n}\n.ag-layout-auto-height .ag-row {\n  white-space: nowrap;\n  position: relative;\n  width: 100%;\n}\n.ag-layout-for-print .ag-row {\n  position: relative;\n}\n.ag-column-moving .ag-cell {\n  -webkit-transition: left 0.2s;\n  -moz-transition: left 0.2s;\n  -o-transition: left 0.2s;\n  -ms-transition: left 0.2s;\n  transition: left 0.2s;\n}\n.ag-column-moving .ag-header-cell {\n  -webkit-transition: left 0.2s;\n  -moz-transition: left 0.2s;\n  -o-transition: left 0.2s;\n  -ms-transition: left 0.2s;\n  transition: left 0.2s;\n}\n.ag-column-moving .ag-header-group-cell {\n  -webkit-transition: left 0.2s, width 0.2s;\n  -moz-transition: left 0.2s, width 0.2s;\n  -o-transition: left 0.2s, width 0.2s;\n  -ms-transition: left 0.2s, width 0.2s;\n  transition: left 0.2s, width 0.2s;\n}\n.ag-column-drop {\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.ag-column-drop-vertical .ag-column-drop-cell {\n  display: block;\n}\n.ag-column-drop-vertical .ag-column-drop-empty-message {\n  display: block;\n}\n.ag-column-drop-vertical .ag-column-drop-cell-button {\n  line-height: 16px;\n}\n.ag-ltr .ag-column-drop-vertical .ag-column-drop-cell-button {\n  float: right;\n}\n.ag-rtl .ag-column-drop-vertical .ag-column-drop-cell-button {\n  float: left;\n}\n.ag-column-drop-horizontal {\n  white-space: nowrap;\n}\n.ag-column-drop-horizontal .ag-column-drop-cell {\n  display: inline-block;\n}\n.ag-column-drop-horizontal .ag-column-drop-empty-message {\n  display: inline-block;\n}\n.ag-cell {\n  display: inline-block;\n  white-space: nowrap;\n  height: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  position: absolute;\n}\n.ag-value-slide-out {\n  opacity: 1;\n  -ms-filter: none;\n  filter: none;\n  margin-right: 5px;\n  -webkit-transition: opacity 3s, margin-right 3s;\n  -moz-transition: opacity 3s, margin-right 3s;\n  -o-transition: opacity 3s, margin-right 3s;\n  -ms-transition: opacity 3s, margin-right 3s;\n  transition: opacity 3s, margin-right 3s;\n  -webkit-transition-timing-function: linear;\n  -moz-transition-timing-function: linear;\n  -o-transition-timing-function: linear;\n  -ms-transition-timing-function: linear;\n  transition-timing-function: linear;\n}\n.ag-value-slide-out-end {\n  opacity: 0;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n  filter: alpha(opacity=0);\n  margin-right: 10px;\n}\n.ag-opacity-zero {\n  opacity: 0;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n  filter: alpha(opacity=0);\n}\n.ag-cell-edit-input {\n  width: 100%;\n  height: 100%;\n}\n.ag-group-cell-entire-row {\n  width: 100%;\n  display: inline-block;\n  white-space: nowrap;\n  height: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.ag-footer-cell-entire-row {\n  width: 100%;\n  display: inline-block;\n  white-space: nowrap;\n  height: 100%;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.ag-large .ag-root {\n  font-size: 20px;\n}\n.ag-popup-editor {\n  position: absolute;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.ag-menu {\n  position: absolute;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.ag-menu-column-select-wrapper {\n  width: 200px;\n  height: 300px;\n  overflow: auto;\n}\n.ag-menu-list {\n  display: table;\n  border-collapse: collapse;\n}\n.ag-menu-option {\n  display: table-row;\n}\n.ag-menu-option-text {\n  display: table-cell;\n}\n.ag-menu-option-shortcut {\n  display: table-cell;\n}\n.ag-menu-option-icon {\n  display: table-cell;\n}\n.ag-menu-option-popup-pointer {\n  display: table-cell;\n}\n.ag-menu-separator {\n  display: table-row;\n}\n.ag-menu-separator-cell {\n  display: table-cell;\n}\n.ag-virtual-list-viewport {\n  overflow-x: auto;\n  height: 100%;\n  width: 100%;\n}\n.ag-virtual-list-container {\n  position: relative;\n  overflow: hidden;\n}\n.ag-rich-select {\n  outline: none;\n}\n.ag-rich-select-row {\n  white-space: nowrap;\n}\n.ag-rich-select-list {\n  width: 200px;\n  height: 200px;\n}\n.ag-set-filter-list {\n  width: 200px;\n  height: 200px;\n}\n.ag-set-filter-item {\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.ag-virtual-list-item {\n  position: absolute;\n  width: 100%;\n}\n.ag-filter-filter {\n  width: 170px;\n  margin: 4px;\n}\n.ag-floating-filter-body input {\n  width: 100%;\n  margin: 0;\n  height: 19px;\n}\n.ag-floating-filter-full-body input {\n  width: 100%;\n  margin: 0;\n  height: 19px;\n}\n.ag-filter-select {\n  width: 110px;\n  margin: 4px 4px 0px 4px;\n}\n.ag-list-selection {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: default;\n}\n.ag-tool-panel {\n  width: 200px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: default;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: auto;\n}\n.ag-layout-normal .ag-tool-panel {\n  height: 100%;\n}\n.ag-column-select-indent {\n  display: inline-block;\n}\n.ag-column-select-column {\n  white-space: nowrap;\n}\n.ag-ltr .ag-column-select-column {\n  margin-left: 14px;\n}\n.ag-rtl .ag-column-select-column {\n  margin-right: 14px;\n}\n.ag-column-select-column-group {\n  white-space: nowrap;\n}\n.ag-hidden {\n  display: none !important;\n}\n.ag-visibility-hidden {\n  visibility: hidden !important;\n}\n.ag-faded {\n  opacity: 0.3;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";\n  filter: alpha(opacity=30);\n}\n.ag-width-half {\n  width: 50%;\n  display: inline-block;\n}\n.ag-shake-left-to-right {\n  -webkit-animation-name: ag-shake-left-to-right;\n  -moz-animation-name: ag-shake-left-to-right;\n  -o-animation-name: ag-shake-left-to-right;\n  -ms-animation-name: ag-shake-left-to-right;\n  animation-name: ag-shake-left-to-right;\n  -webkit-animation-duration: 0.2s;\n  -moz-animation-duration: 0.2s;\n  -o-animation-duration: 0.2s;\n  -ms-animation-duration: 0.2s;\n  animation-duration: 0.2s;\n  -webkit-animation-iteration-count: infinite;\n  -moz-animation-iteration-count: infinite;\n  -o-animation-iteration-count: infinite;\n  -ms-animation-iteration-count: infinite;\n  animation-iteration-count: infinite;\n  -webkit-animation-direction: alternate;\n  -moz-animation-direction: alternate;\n  -o-animation-direction: alternate;\n  -ms-animation-direction: alternate;\n  animation-direction: alternate;\n}\n@-moz-keyframes ag-shake-left-to-right {\n  from {\n    padding-left: 6px;\n    padding-right: 2px;\n  }\n  to {\n    padding-left: 2px;\n    padding-right: 6px;\n  }\n}\n@-webkit-keyframes ag-shake-left-to-right {\n  from {\n    padding-left: 6px;\n    padding-right: 2px;\n  }\n  to {\n    padding-left: 2px;\n    padding-right: 6px;\n  }\n}\n@-o-keyframes ag-shake-left-to-right {\n  from {\n    padding-left: 6px;\n    padding-right: 2px;\n  }\n  to {\n    padding-left: 2px;\n    padding-right: 6px;\n  }\n}\n@keyframes ag-shake-left-to-right {\n  from {\n    padding-left: 6px;\n    padding-right: 2px;\n  }\n  to {\n    padding-left: 2px;\n    padding-right: 6px;\n  }\n}\n',""])},function(a,b){a.exports=function(){var a=[];return a.toString=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b];c[2]?a.push("@media "+c[2]+"{"+c[1]+"}"):a.push(c[1])}return a.join("")},a.i=function(b,c){"string"==typeof b&&(b=[[null,b,""]]);for(var d={},e=0;e<this.length;e++){var f=this[e][0];"number"==typeof f&&(d[f]=!0)}for(e=0;e<b.length;e++){var g=b[e];"number"==typeof g[0]&&d[g[0]]||(c&&!g[2]?g[2]=c:c&&(g[2]="("+g[2]+") and ("+c+")"),a.push(g))}},a}},function(a,b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=n[d.id];if(e){e.refs++;for(var f=0;f<e.parts.length;f++)e.parts[f](d.parts[f]);for(;f<d.parts.length;f++)e.parts.push(j(d.parts[f],b))}else{for(var g=[],f=0;f<d.parts.length;f++)g.push(j(d.parts[f],b));n[d.id]={id:d.id,refs:1,parts:g}}}}function e(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e[0],g=e[1],h=e[2],i=e[3],j={css:g,media:h,sourceMap:i};c[f]?c[f].parts.push(j):b.push(c[f]={id:f,parts:[j]})}return b}function f(a,b){var c=q(),d=t[t.length-1];if("top"===a.insertAt)d?d.nextSibling?c.insertBefore(b,d.nextSibling):c.appendChild(b):c.insertBefore(b,c.firstChild),t.push(b);else{if("bottom"!==a.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");c.appendChild(b)}}function g(a){a.parentNode.removeChild(a);var b=t.indexOf(a);b>=0&&t.splice(b,1)}function h(a){var b=document.createElement("style");return b.type="text/css",f(a,b),b}function i(a){var b=document.createElement("link");return b.rel="stylesheet",f(a,b),b}function j(a,b){var c,d,e;if(b.singleton){var f=s++;c=r||(r=h(b)),d=k.bind(null,c,f,!1),e=k.bind(null,c,f,!0)}else a.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=i(b),d=m.bind(null,c),e=function(){g(c),c.href&&URL.revokeObjectURL(c.href)}):(c=h(b),d=l.bind(null,c),e=function(){g(c)});return d(a),function(b){if(b){if(b.css===a.css&&b.media===a.media&&b.sourceMap===a.sourceMap)return;d(a=b)}else e()}}function k(a,b,c,d){var e=c?"":d.css;if(a.styleSheet)a.styleSheet.cssText=u(b,e);else{var f=document.createTextNode(e),g=a.childNodes;g[b]&&a.removeChild(g[b]),g.length?a.insertBefore(f,g[b]):a.appendChild(f)}}function l(a,b){var c=b.css,d=b.media;b.sourceMap;if(d&&a.setAttribute("media",d),a.styleSheet)a.styleSheet.cssText=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))}}function m(a,b){var c=b.css,d=(b.media,b.sourceMap);d&&(c+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(d))))+" */");var e=new Blob([c],{type:"text/css"}),f=a.href;a.href=URL.createObjectURL(e),f&&URL.revokeObjectURL(f)}var n={},o=function(a){var b;return function(){return void 0===b&&(b=a.apply(this,arguments)),b}},p=o(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),q=o(function(){return document.head||document.getElementsByTagName("head")[0]}),r=null,s=0,t=[];a.exports=function(a,b){b=b||{},void 0===b.singleton&&(b.singleton=p()),void 0===b.insertAt&&(b.insertAt="bottom");var c=e(a);return d(c,b),function(a){for(var f=[],g=0;g<c.length;g++){var h=c[g],i=n[h.id];i.refs--,f.push(i)}if(a){d(e(a),b)}for(var g=0;g<f.length;g++){var i=f[g];if(0===i.refs){for(var j=0;j<i.parts.length;j++)i.parts[j]();delete n[i.id]}}}};var u=function(){var a=[];return function(b,c){return a[b]=c,a.filter(Boolean).join("\n")}}()},function(a,b,c){var d=c(134);"string"==typeof d&&(d=[[a.id,d,""]]);c(132)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(131)(),
b.push([a.id,'.ag-blue {\n  line-height: 1.4;\n  font-family: Calibri, "Segoe UI", Thonburi, Arial, Verdana, sans-serif;\n  font-size: 10pt;\n  color: #222;\n/* this is for the rowGroupPanel, that appears along the top of the grid */\n/* this is for the column drops that appear in the toolPanel */\n}\n.ag-blue img {\n  vertical-align: middle;\n  border: 0;\n}\n.ag-blue .ag-root {\n  border: 1px solid #9bc2e6;\n}\n.ag-blue .ag-cell-data-changed {\n  background-color: #cec;\n}\n.ag-blue .ag-cell-data-changed-animation {\n  background-color: transparent;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-blue .ag-cell-not-inline-editing {\n  padding: 2px;\n}\n.ag-blue .ag-cell-range-selected-1:not(.ag-cell-focus) {\n  background-color: rgba(120,120,120,0.4);\n}\n.ag-blue .ag-cell-range-selected-2:not(.ag-cell-focus) {\n  background-color: rgba(80,80,80,0.4);\n}\n.ag-blue .ag-cell-range-selected-3:not(.ag-cell-focus) {\n  background-color: rgba(40,40,40,0.4);\n}\n.ag-blue .ag-cell-range-selected-4:not(.ag-cell-focus) {\n  background-color: rgba(0,0,0,0.4);\n}\n.ag-blue .ag-cell-focus {\n  border: 2px solid #217346;\n}\n.ag-blue .ag-cell-no-focus {\n  border-top: 2px solid transparent;\n  border-bottom: 1px dotted #9bc2e6;\n}\n.ag-blue .ag-ltr .ag-cell-no-focus {\n  border-right: 1px dotted #9bc2e6;\n  border-left: 2px solid transparent;\n}\n.ag-blue .ag-rtl .ag-cell-no-focus {\n  border-right: 2px solid transparent;\n  border-left: 1px dotted #9bc2e6;\n}\n.ag-blue .ag-rtl .ag-cell-first-right-pinned {\n  border-left: 1px solid #9bc2e6;\n}\n.ag-blue .ag-ltr .ag-cell-first-right-pinned {\n  border-left: 1px solid #9bc2e6;\n}\n.ag-blue .ag-rtl .ag-cell-last-left-pinned {\n  border-right: 1px solid #9bc2e6;\n}\n.ag-blue .ag-ltr .ag-cell-last-left-pinned {\n  border-right: 1px solid #9bc2e6;\n}\n.ag-blue .ag-cell-highlight {\n  border: 1px solid #006400;\n}\n.ag-blue .ag-cell-highlight-animation {\n  -webkit-transition: border 1s;\n  -moz-transition: border 1s;\n  -o-transition: border 1s;\n  -ms-transition: border 1s;\n  transition: border 1s;\n}\n.ag-blue .ag-value-change-delta {\n  padding-right: 2px;\n}\n.ag-blue .ag-value-change-delta-up {\n  color: #006400;\n}\n.ag-blue .ag-value-change-delta-down {\n  color: #8b0000;\n}\n.ag-blue .ag-value-change-value {\n  background-color: transparent;\n  border-radius: 1px;\n  padding-left: 1px;\n  padding-right: 1px;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-blue .ag-value-change-value-highlight {\n  background-color: #cec;\n  -webkit-transition: background-color 0.1s;\n  -moz-transition: background-color 0.1s;\n  -o-transition: background-color 0.1s;\n  -ms-transition: background-color 0.1s;\n  transition: background-color 0.1s;\n}\n.ag-blue .ag-rich-select {\n  font-size: 14px;\n  border: 1px solid #9bc2e6;\n  background-color: #fff;\n}\n.ag-blue .ag-rich-select-value {\n  padding: 2px;\n}\n.ag-blue .ag-rich-select-list {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-blue .ag-rich-select-row {\n  padding: 2px;\n}\n.ag-blue .ag-rich-select-row-selected {\n  background-color: #c7c7c7;\n}\n.ag-blue .ag-large-text {\n  border: 1px solid #9bc2e6;\n}\n.ag-blue .ag-header-select-all {\n  padding: 5px 0px 0px 3px;\n  line-height: 0;\n}\n.ag-blue .ag-header {\n  color: #fff;\n  background: #5b9bd5;\n  border-bottom: 1px solid #9bc2e6;\n  font-weight: 600;\n}\n.ag-blue .ag-header-icon {\n  color: #fff;\n  stroke: none;\n  fill: #fff;\n}\n.ag-blue .ag-layout-for-print .ag-header-container {\n  background: #5b9bd5;\n  border-bottom: 1px solid #9bc2e6;\n}\n.ag-blue .ag-ltr .ag-header-cell {\n  border-right: 1px solid #9bc2e6;\n}\n.ag-blue .ag-rtl .ag-header-cell {\n  border-left: 1px solid #9bc2e6;\n}\n.ag-blue .ag-header-cell-moving .ag-header-cell-label {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-blue .ag-header-cell-moving {\n  background-color: #bebebe;\n}\n.ag-blue .ag-ltr .ag-header-group-cell {\n  border-right: 1px solid #9bc2e6;\n}\n.ag-blue .ag-rtl .ag-header-group-cell {\n  border-left: 1px solid #9bc2e6;\n}\n.ag-blue .ag-header-group-cell-with-group {\n  border-bottom: 1px solid #9bc2e6;\n}\n.ag-blue .ag-header-cell-label {\n  padding: 4px 2px 4px 2px;\n}\n.ag-blue .ag-header-cell-text {\n  padding-left: 2px;\n}\n.ag-blue .ag-header-group-cell-label {\n  padding: 4px;\n}\n.ag-blue .ag-ltr .ag-header-group-cell-label {\n  padding-left: 10px;\n}\n.ag-blue .ag-rtl .ag-header-group-cell-label {\n  padding-right: 10px;\n}\n.ag-blue .ag-rtl .ag-header-group-text {\n  margin-left: 2px;\n}\n.ag-blue .ag-ltr .ag-header-group-text {\n  margin-right: 2px;\n}\n.ag-blue .ag-header-cell-menu-button {\n  padding: 2px;\n  margin-top: 4px;\n  margin-left: 1px;\n  margin-right: 1px;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  -webkit-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  -moz-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  line-height: 0px /* normal line height, a space was appearing below the menu button */;\n}\n.ag-blue .ag-ltr .ag-pinned-right-header {\n  border-left: 1px solid #9bc2e6;\n}\n.ag-blue .ag-rtl .ag-pinned-left-header {\n  border-right: 1px solid #9bc2e6;\n}\n.ag-blue .ag-header-cell-menu-button:hover {\n  border: 1px solid #9bc2e6;\n}\n.ag-blue .ag-body {\n  background-color: #f6f6f6;\n}\n.ag-blue .ag-row-odd {\n  background-color: #ddebf7;\n}\n.ag-blue .ag-row-even {\n  background-color: #fff;\n}\n.ag-blue .ag-row-selected {\n  background-color: #c7c7c7;\n}\n.ag-blue .ag-row-stub {\n  background-color: #f0f0f0;\n}\n.ag-blue .ag-stub-cell {\n  padding: 2px 2px 2px 10px;\n}\n.ag-blue .ag-floating-top {\n  background-color: #f0f0f0;\n}\n.ag-blue .ag-floating-top .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-blue .ag-floating-bottom {\n  background-color: #f0f0f0;\n}\n.ag-blue .ag-floating-bottom .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-blue .ag-overlay-loading-wrapper {\n  background-color: rgba(255,255,255,0.5);\n}\n.ag-blue .ag-overlay-loading-center {\n  background-color: #fff;\n  border: 1px solid #9bc2e6;\n  border-radius: 10px;\n  padding: 10px;\n  color: #000;\n}\n.ag-blue .ag-overlay-no-rows-center {\n  background-color: #fff;\n  border: 1px solid #9bc2e6;\n  border-radius: 10px;\n  padding: 10px;\n}\n.ag-blue .ag-group-cell-entire-row {\n  background-color: #f6f6f6;\n  padding: 2px;\n}\n.ag-blue .ag-footer-cell-entire-row {\n  background-color: #f6f6f6;\n  padding: 2px;\n}\n.ag-blue .ag-group-cell {\n  font-style: italic;\n}\n.ag-blue .ag-ltr .ag-group-expanded {\n  padding-right: 4px;\n}\n.ag-blue .ag-rtl .ag-group-expanded {\n  padding-left: 4px;\n}\n.ag-blue .ag-ltr .ag-group-contracted {\n  padding-right: 4px;\n}\n.ag-blue .ag-rtl .ag-group-contracted {\n  padding-left: 4px;\n}\n.ag-blue .ag-ltr .ag-group-loading {\n  padding-right: 4px;\n}\n.ag-blue .ag-rtl .ag-group-loading {\n  padding-left: 4px;\n}\n.ag-blue .ag-ltr .ag-group-value {\n  padding-right: 2px;\n}\n.ag-blue .ag-rtl .ag-group-value {\n  padding-left: 2px;\n}\n.ag-blue .ag-ltr .ag-group-checkbox {\n  padding-right: 2px;\n}\n.ag-blue .ag-rtl .ag-group-checkbox {\n  padding-left: 2px;\n}\n.ag-blue .ag-group-child-count {\n  display: inline-block;\n}\n.ag-blue .ag-footer-cell {\n  font-style: italic;\n}\n.ag-blue .ag-menu {\n  border: 1px solid #808080;\n  background-color: #f6f6f6;\n  cursor: default;\n  font-family: Calibri, "Segoe UI", Thonburi, Arial, Verdana, sans-serif;\n  font-size: 10pt;\n}\n.ag-blue .ag-menu .ag-tab-header {\n  background-color: #5b9bd5;\n}\n.ag-blue .ag-menu .ag-tab {\n  padding: 6px 8px 6px 8px;\n  margin: 2px 2px 0px 2px;\n  display: inline-block;\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  border-top: 1px solid transparent;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.ag-blue .ag-menu .ag-tab-selected {\n  background-color: #9bc2e6;\n  border-right: 1px solid #d3d3d3;\n  border-left: 1px solid #d3d3d3;\n  border-top: 1px solid #d3d3d3;\n}\n.ag-blue .ag-menu-separator {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-blue .ag-menu-option-active {\n  background-color: #c7c7c7;\n}\n.ag-blue .ag-menu-option-icon {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-blue .ag-menu-option-text {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-blue .ag-menu-option-shortcut {\n  padding: 2px 2px 2px 2px;\n  vertical-align: middle;\n}\n.ag-blue .ag-menu-option-popup-pointer {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-blue .ag-menu-option-disabled {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-blue .ag-menu-column-select-wrapper {\n  margin: 2px;\n}\n.ag-blue .ag-filter-checkbox {\n  position: relative;\n  left: 2px;\n  display: inline-block;\n  margin-right: 5px;\n}\n.ag-blue .ag-filter-header-container {\n  border-bottom: 1px solid #d3d3d3;\n}\n.ag-blue .ag-filter-apply-panel {\n  border-top: 1px solid #d3d3d3;\n  padding: 2px;\n}\n.ag-blue .ag-filter-value {\n  margin-left: 4px;\n}\n.ag-blue .ag-ltr .ag-selection-checkbox {\n  padding-right: 4px;\n}\n.ag-blue .ag-rtl .ag-selection-checkbox {\n  padding-left: 4px;\n}\n.ag-blue .ag-paging-panel {\n  padding: 4px;\n}\n.ag-blue .ag-paging-button {\n  margin-left: 4px;\n  margin-right: 4px;\n}\n.ag-blue .ag-paging-row-summary-panel {\n  display: inline-block;\n  width: 300px;\n}\n.ag-blue .ag-tool-panel {\n  background-color: #f6f6f6;\n  border-bottom: 1px solid #9bc2e6;\n  border-top: 1px solid #9bc2e6;\n  color: #222;\n}\n.ag-blue .ltr .ag-tool-panel {\n  border-right: 1px solid #9bc2e6;\n}\n.ag-blue .rtl .ag-tool-panel {\n  border-left: 1px solid #9bc2e6;\n}\n.ag-blue .ag-status-bar {\n  color: #222;\n  background-color: #f6f6f6;\n  font-size: 10pt;\n  height: 22px;\n  border-bottom: 1px solid #9bc2e6;\n  border-left: 1px solid #9bc2e6;\n  border-right: 1px solid #9bc2e6;\n  padding: 2px;\n}\n.ag-blue .ag-status-bar-aggregations {\n  float: right;\n}\n.ag-blue .ag-status-bar-item {\n  padding-left: 10px;\n}\n.ag-blue .ag-column-drop-cell {\n  background: #ddebf7;\n  color: #000;\n  border: 1px solid #808080;\n}\n.ag-blue .ag-column-drop-cell-ghost {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-blue .ag-column-drop-cell-text {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-blue .ag-column-drop-cell-button {\n  border: 1px solid transparent;\n  padding-left: 2px;\n  padding-right: 2px;\n  border-radius: 3px;\n}\n.ag-blue .ag-column-drop-cell-button:hover {\n  border: 1px solid #9bc2e6;\n}\n.ag-blue .ag-column-drop-empty-message {\n  padding-left: 2px;\n  padding-right: 2px;\n  color: #808080;\n}\n.ag-blue .ag-column-drop-icon {\n  margin: 3px;\n}\n.ag-blue .ag-column-drop {\n  background-color: #f6f6f6;\n}\n.ag-blue .ag-column-drop-horizontal {\n  padding: 2px;\n  border-top: 1px solid #9bc2e6;\n  border-left: 1px solid #9bc2e6;\n  border-right: 1px solid #9bc2e6;\n}\n.ag-blue .ag-column-drop-vertical {\n  padding: 4px 4px 10px 4px;\n  border-bottom: 1px solid #9bc2e6;\n  overflow: auto;\n}\n.ag-blue .ag-column-drop-vertical .ag-column-drop-cell {\n  margin-top: 2px;\n}\n.ag-blue .ag-column-drop-vertical .ag-column-drop-empty-message {\n  text-align: center;\n  padding: 5px;\n}\n.ag-blue .ag-pivot-mode {\n  border-bottom: 1px solid #9bc2e6;\n  padding: 4px;\n  background-color: #f6f6f6;\n}\n.ag-blue .ag-tool-panel .ag-column-select-panel {\n  border-bottom: 1px solid #9bc2e6;\n  overflow: auto;\n}\n.ag-blue .ag-select-agg-func-popup {\n  cursor: default;\n  position: absolute;\n  font-size: 14px;\n  background-color: #fff;\n  border: 1px solid #9bc2e6;\n}\n.ag-blue .ag-select-agg-func-item {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-blue .ag-select-agg-func-item:hover {\n  background-color: #c7c7c7;\n}\n.ag-blue .ag-floating-filter-button {\n  background-color: #fff;\n  color: #222;\n}\n.ag-blue .ag-floating-filter-body input {\n  background-color: #fff;\n  color: #222;\n}\n',""])},function(a,b,c){var d=c(136);"string"==typeof d&&(d=[[a.id,d,""]]);c(132)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(131)(),b.push([a.id,'.ag-dark {\n  line-height: 1.4;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  color: #ccc;\n/* this is for the rowGroupPanel, that appears along the top of the grid */\n/* this is for the column drops that appear in the toolPanel */\n}\n.ag-dark img {\n  vertical-align: middle;\n  border: 0;\n}\n.ag-dark .ag-root {\n  border: 1px solid #808080;\n}\n.ag-dark .ag-cell-data-changed {\n  background-color: #d2691e;\n}\n.ag-dark .ag-cell-data-changed-animation {\n  background-color: transparent;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-dark .ag-cell-not-inline-editing {\n  padding: 2px;\n}\n.ag-dark .ag-cell-range-selected-1:not(.ag-cell-focus) {\n  background-color: rgba(100,160,160,0.4);\n}\n.ag-dark .ag-cell-range-selected-2:not(.ag-cell-focus) {\n  background-color: rgba(100,190,190,0.4);\n}\n.ag-dark .ag-cell-range-selected-3:not(.ag-cell-focus) {\n  background-color: rgba(100,220,220,0.4);\n}\n.ag-dark .ag-cell-range-selected-4:not(.ag-cell-focus) {\n  background-color: rgba(100,250,250,0.4);\n}\n.ag-dark .ag-cell-focus {\n  border: 1px solid #a9a9a9;\n}\n.ag-dark .ag-cell-no-focus {\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n}\n.ag-dark .ag-ltr .ag-cell-no-focus {\n  border-right: 1px dotted #808080;\n  border-left: 1px solid transparent;\n}\n.ag-dark .ag-rtl .ag-cell-no-focus {\n  border-right: 1px solid transparent;\n  border-left: 1px dotted #808080;\n}\n.ag-dark .ag-rtl .ag-cell-first-right-pinned {\n  border-left: 1px solid #808080;\n}\n.ag-dark .ag-ltr .ag-cell-first-right-pinned {\n  border-left: 1px solid #808080;\n}\n.ag-dark .ag-rtl .ag-cell-last-left-pinned {\n  border-right: 1px solid #808080;\n}\n.ag-dark .ag-ltr .ag-cell-last-left-pinned {\n  border-right: 1px solid #808080;\n}\n.ag-dark .ag-cell-highlight {\n  border: 1px solid #90ee90;\n}\n.ag-dark .ag-cell-highlight-animation {\n  -webkit-transition: border 1s;\n  -moz-transition: border 1s;\n  -o-transition: border 1s;\n  -ms-transition: border 1s;\n  transition: border 1s;\n}\n.ag-dark .ag-value-change-delta {\n  padding-right: 2px;\n}\n.ag-dark .ag-value-change-delta-up {\n  color: #adff2f;\n}\n.ag-dark .ag-value-change-delta-down {\n  color: #f00;\n}\n.ag-dark .ag-value-change-value {\n  background-color: transparent;\n  border-radius: 1px;\n  padding-left: 1px;\n  padding-right: 1px;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-dark .ag-value-change-value-highlight {\n  background-color: #d2691e;\n  -webkit-transition: background-color 0.1s;\n  -moz-transition: background-color 0.1s;\n  -o-transition: background-color 0.1s;\n  -ms-transition: background-color 0.1s;\n  transition: background-color 0.1s;\n}\n.ag-dark .ag-rich-select {\n  font-size: 14px;\n  border: 1px solid #808080;\n  background-color: #302e2e;\n}\n.ag-dark .ag-rich-select-value {\n  padding: 2px;\n}\n.ag-dark .ag-rich-select-list {\n  border-top: 1px solid #555;\n}\n.ag-dark .ag-rich-select-row {\n  padding: 2px;\n}\n.ag-dark .ag-rich-select-row-selected {\n  background-color: #4a708b;\n}\n.ag-dark .ag-large-text {\n  border: 1px solid #808080;\n}\n.ag-dark .ag-header-select-all {\n  padding: 5px 0px 0px 3px;\n  line-height: 0;\n}\n.ag-dark .ag-header {\n  color: #e0e0e0;\n  background: #626262;\n  border-bottom: 1px solid #808080;\n  font-weight: normal;\n}\n.ag-dark .ag-header-icon {\n  color: #e0e0e0;\n  stroke: none;\n  fill: #e0e0e0;\n}\n.ag-dark .ag-layout-for-print .ag-header-container {\n  background: #626262;\n  border-bottom: 1px solid #808080;\n}\n.ag-dark .ag-ltr .ag-header-cell {\n  border-right: 1px solid #808080;\n}\n.ag-dark .ag-rtl .ag-header-cell {\n  border-left: 1px solid #808080;\n}\n.ag-dark .ag-header-cell-moving .ag-header-cell-label {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-dark .ag-header-cell-moving {\n  background-color: #bebebe;\n}\n.ag-dark .ag-ltr .ag-header-group-cell {\n  border-right: 1px solid #808080;\n}\n.ag-dark .ag-rtl .ag-header-group-cell {\n  border-left: 1px solid #808080;\n}\n.ag-dark .ag-header-group-cell-with-group {\n  border-bottom: 1px solid #808080;\n}\n.ag-dark .ag-header-cell-label {\n  padding: 4px 2px 4px 2px;\n}\n.ag-dark .ag-header-cell-text {\n  padding-left: 2px;\n}\n.ag-dark .ag-header-group-cell-label {\n  padding: 4px;\n}\n.ag-dark .ag-ltr .ag-header-group-cell-label {\n  padding-left: 10px;\n}\n.ag-dark .ag-rtl .ag-header-group-cell-label {\n  padding-right: 10px;\n}\n.ag-dark .ag-rtl .ag-header-group-text {\n  margin-left: 2px;\n}\n.ag-dark .ag-ltr .ag-header-group-text {\n  margin-right: 2px;\n}\n.ag-dark .ag-header-cell-menu-button {\n  padding: 2px;\n  margin-top: 4px;\n  margin-left: 1px;\n  margin-right: 1px;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  -webkit-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  -moz-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  line-height: 0px /* normal line height, a space was appearing below the menu button */;\n}\n.ag-dark .ag-ltr .ag-pinned-right-header {\n  border-left: 1px solid #808080;\n}\n.ag-dark .ag-rtl .ag-pinned-left-header {\n  border-right: 1px solid #808080;\n}\n.ag-dark .ag-header-cell-menu-button:hover {\n  border: 1px solid #808080;\n}\n.ag-dark .ag-body {\n  background-color: #302e2e;\n}\n.ag-dark .ag-row-odd {\n  background-color: #302e2e;\n}\n.ag-dark .ag-row-even {\n  background-color: #403e3e;\n}\n.ag-dark .ag-row-selected {\n  background-color: #4a708b;\n}\n.ag-dark .ag-row-stub {\n  background-color: #333;\n}\n.ag-dark .ag-stub-cell {\n  padding: 2px 2px 2px 10px;\n}\n.ag-dark .ag-floating-top {\n  background-color: #333;\n}\n.ag-dark .ag-floating-top .ag-row {\n  background-color: #333;\n}\n.ag-dark .ag-floating-bottom {\n  background-color: #333;\n}\n.ag-dark .ag-floating-bottom .ag-row {\n  background-color: #333;\n}\n.ag-dark .ag-overlay-loading-wrapper {\n  background-color: rgba(255,255,255,0.5);\n}\n.ag-dark .ag-overlay-loading-center {\n  background-color: #fff;\n  border: 1px solid #808080;\n  border-radius: 10px;\n  padding: 10px;\n  color: #000;\n}\n.ag-dark .ag-overlay-no-rows-center {\n  background-color: #fff;\n  border: 1px solid #808080;\n  border-radius: 10px;\n  padding: 10px;\n}\n.ag-dark .ag-group-cell-entire-row {\n  background-color: #302e2e;\n  padding: 2px;\n}\n.ag-dark .ag-footer-cell-entire-row {\n  background-color: #302e2e;\n  padding: 2px;\n}\n.ag-dark .ag-group-cell {\n  font-style: italic;\n}\n.ag-dark .ag-ltr .ag-group-expanded {\n  padding-right: 4px;\n}\n.ag-dark .ag-rtl .ag-group-expanded {\n  padding-left: 4px;\n}\n.ag-dark .ag-ltr .ag-group-contracted {\n  padding-right: 4px;\n}\n.ag-dark .ag-rtl .ag-group-contracted {\n  padding-left: 4px;\n}\n.ag-dark .ag-ltr .ag-group-loading {\n  padding-right: 4px;\n}\n.ag-dark .ag-rtl .ag-group-loading {\n  padding-left: 4px;\n}\n.ag-dark .ag-ltr .ag-group-value {\n  padding-right: 2px;\n}\n.ag-dark .ag-rtl .ag-group-value {\n  padding-left: 2px;\n}\n.ag-dark .ag-ltr .ag-group-checkbox {\n  padding-right: 2px;\n}\n.ag-dark .ag-rtl .ag-group-checkbox {\n  padding-left: 2px;\n}\n.ag-dark .ag-group-child-count {\n  display: inline-block;\n}\n.ag-dark .ag-footer-cell {\n  font-style: italic;\n}\n.ag-dark .ag-menu {\n  border: 1px solid #555;\n  background-color: #302e2e;\n  cursor: default;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n}\n.ag-dark .ag-menu .ag-tab-header {\n  background-color: #626262;\n}\n.ag-dark .ag-menu .ag-tab {\n  padding: 6px 8px 6px 8px;\n  margin: 2px 2px 0px 2px;\n  display: inline-block;\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  border-top: 1px solid transparent;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.ag-dark .ag-menu .ag-tab-selected {\n  background-color: #302e2e;\n  border-right: 1px solid #555;\n  border-left: 1px solid #555;\n  border-top: 1px solid #555;\n}\n.ag-dark .ag-menu-separator {\n  border-top: 1px solid #555;\n}\n.ag-dark .ag-menu-option-active {\n  background-color: #4a708b;\n}\n.ag-dark .ag-menu-option-icon {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-dark .ag-menu-option-text {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-dark .ag-menu-option-shortcut {\n  padding: 2px 2px 2px 2px;\n  vertical-align: middle;\n}\n.ag-dark .ag-menu-option-popup-pointer {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-dark .ag-menu-option-disabled {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-dark .ag-menu-column-select-wrapper {\n  margin: 2px;\n}\n.ag-dark .ag-filter-checkbox {\n  position: relative;\n  left: 2px;\n  display: inline-block;\n  margin-right: 5px;\n}\n.ag-dark .ag-filter-header-container {\n  border-bottom: 1px solid #555;\n}\n.ag-dark .ag-filter-apply-panel {\n  border-top: 1px solid #555;\n  padding: 2px;\n}\n.ag-dark .ag-filter-value {\n  margin-left: 4px;\n}\n.ag-dark .ag-ltr .ag-selection-checkbox {\n  padding-right: 4px;\n}\n.ag-dark .ag-rtl .ag-selection-checkbox {\n  padding-left: 4px;\n}\n.ag-dark .ag-paging-panel {\n  padding: 4px;\n}\n.ag-dark .ag-paging-button {\n  margin-left: 4px;\n  margin-right: 4px;\n}\n.ag-dark .ag-paging-row-summary-panel {\n  display: inline-block;\n  width: 300px;\n}\n.ag-dark .ag-tool-panel {\n  background-color: #302e2e;\n  border-bottom: 1px solid #808080;\n  border-top: 1px solid #808080;\n  color: #ccc;\n}\n.ag-dark .ltr .ag-tool-panel {\n  border-right: 1px solid #808080;\n}\n.ag-dark .rtl .ag-tool-panel {\n  border-left: 1px solid #808080;\n}\n.ag-dark .ag-status-bar {\n  color: #ccc;\n  background-color: #302e2e;\n  font-size: 14px;\n  height: 22px;\n  border-bottom: 1px solid #808080;\n  border-left: 1px solid #808080;\n  border-right: 1px solid #808080;\n  padding: 2px;\n}\n.ag-dark .ag-status-bar-aggregations {\n  float: right;\n}\n.ag-dark .ag-status-bar-item {\n  padding-left: 10px;\n}\n.ag-dark .ag-column-drop-cell {\n  background: #403e3e;\n  color: #e0e0e0;\n  border: 1px solid #666;\n}\n.ag-dark .ag-column-drop-cell-ghost {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-dark .ag-column-drop-cell-text {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-dark .ag-column-drop-cell-button {\n  border: 1px solid transparent;\n  padding-left: 2px;\n  padding-right: 2px;\n  border-radius: 3px;\n}\n.ag-dark .ag-column-drop-cell-button:hover {\n  border: 1px solid #808080;\n}\n.ag-dark .ag-column-drop-empty-message {\n  padding-left: 2px;\n  padding-right: 2px;\n  color: #808080;\n}\n.ag-dark .ag-column-drop-icon {\n  margin: 3px;\n}\n.ag-dark .ag-column-drop {\n  background-color: #302e2e;\n}\n.ag-dark .ag-column-drop-horizontal {\n  padding: 2px;\n  border-top: 1px solid #808080;\n  border-left: 1px solid #808080;\n  border-right: 1px solid #808080;\n}\n.ag-dark .ag-column-drop-vertical {\n  padding: 4px 4px 10px 4px;\n  border-bottom: 1px solid #808080;\n  overflow: auto;\n}\n.ag-dark .ag-column-drop-vertical .ag-column-drop-cell {\n  margin-top: 2px;\n}\n.ag-dark .ag-column-drop-vertical .ag-column-drop-empty-message {\n  text-align: center;\n  padding: 5px;\n}\n.ag-dark .ag-pivot-mode {\n  border-bottom: 1px solid #808080;\n  padding: 4px;\n  background-color: #302e2e;\n}\n.ag-dark .ag-tool-panel .ag-column-select-panel {\n  border-bottom: 1px solid #808080;\n  overflow: auto;\n}\n.ag-dark .ag-select-agg-func-popup {\n  cursor: default;\n  position: absolute;\n  font-size: 14px;\n  background-color: #302e2e;\n  border: 1px solid #808080;\n}\n.ag-dark .ag-select-agg-func-item {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-dark .ag-select-agg-func-item:hover {\n  background-color: #4a708b;\n}\n.ag-dark ::-webkit-scrollbar {\n  width: 12px;\n  height: 12px;\n  background: #302e2e;\n}\n.ag-dark ::-webkit-scrollbar-thumb {\n  background-color: #626262;\n}\n.ag-dark ::-webkit-scrollbar-corner {\n  background: #302e2e;\n}\n.ag-dark select {\n  background-color: #302e2e;\n  color: #ccc;\n}\n.ag-dark input {\n  background-color: #302e2e;\n  color: #ccc;\n}\n.ag-dark .ag-floating-filter-button {\n  background-color: #302e2e;\n  color: #ccc;\n}\n.ag-dark .ag-floating-filter-body input {\n  background-color: #302e2e;\n  color: #ccc;\n}\n',""])},function(a,b,c){var d=c(138);"string"==typeof d&&(d=[[a.id,d,""]]);c(132)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(131)(),
b.push([a.id,'.ag-fresh {\n  line-height: 1.4;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  color: #222;\n/* this is for the rowGroupPanel, that appears along the top of the grid */\n/* this is for the column drops that appear in the toolPanel */\n}\n.ag-fresh img {\n  vertical-align: middle;\n  border: 0;\n}\n.ag-fresh .ag-root {\n  border: 1px solid #808080;\n}\n.ag-fresh .ag-cell-data-changed {\n  background-color: #cec;\n}\n.ag-fresh .ag-cell-data-changed-animation {\n  background-color: transparent;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-fresh .ag-cell-not-inline-editing {\n  padding: 2px;\n}\n.ag-fresh .ag-cell-range-selected-1:not(.ag-cell-focus) {\n  background-color: rgba(120,120,120,0.4);\n}\n.ag-fresh .ag-cell-range-selected-2:not(.ag-cell-focus) {\n  background-color: rgba(80,80,80,0.4);\n}\n.ag-fresh .ag-cell-range-selected-3:not(.ag-cell-focus) {\n  background-color: rgba(40,40,40,0.4);\n}\n.ag-fresh .ag-cell-range-selected-4:not(.ag-cell-focus) {\n  background-color: rgba(0,0,0,0.4);\n}\n.ag-fresh .ag-cell-focus {\n  border: 1px solid #a9a9a9;\n}\n.ag-fresh .ag-cell-no-focus {\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n}\n.ag-fresh .ag-ltr .ag-cell-no-focus {\n  border-right: 1px dotted #808080;\n  border-left: 1px solid transparent;\n}\n.ag-fresh .ag-rtl .ag-cell-no-focus {\n  border-right: 1px solid transparent;\n  border-left: 1px dotted #808080;\n}\n.ag-fresh .ag-rtl .ag-cell-first-right-pinned {\n  border-left: 1px solid #808080;\n}\n.ag-fresh .ag-ltr .ag-cell-first-right-pinned {\n  border-left: 1px solid #808080;\n}\n.ag-fresh .ag-rtl .ag-cell-last-left-pinned {\n  border-right: 1px solid #808080;\n}\n.ag-fresh .ag-ltr .ag-cell-last-left-pinned {\n  border-right: 1px solid #808080;\n}\n.ag-fresh .ag-cell-highlight {\n  border: 1px solid #006400;\n}\n.ag-fresh .ag-cell-highlight-animation {\n  -webkit-transition: border 1s;\n  -moz-transition: border 1s;\n  -o-transition: border 1s;\n  -ms-transition: border 1s;\n  transition: border 1s;\n}\n.ag-fresh .ag-value-change-delta {\n  padding-right: 2px;\n}\n.ag-fresh .ag-value-change-delta-up {\n  color: #006400;\n}\n.ag-fresh .ag-value-change-delta-down {\n  color: #8b0000;\n}\n.ag-fresh .ag-value-change-value {\n  background-color: transparent;\n  border-radius: 1px;\n  padding-left: 1px;\n  padding-right: 1px;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-fresh .ag-value-change-value-highlight {\n  background-color: #cec;\n  -webkit-transition: background-color 0.1s;\n  -moz-transition: background-color 0.1s;\n  -o-transition: background-color 0.1s;\n  -ms-transition: background-color 0.1s;\n  transition: background-color 0.1s;\n}\n.ag-fresh .ag-rich-select {\n  font-size: 14px;\n  border: 1px solid #808080;\n  background-color: #fff;\n}\n.ag-fresh .ag-rich-select-value {\n  padding: 2px;\n}\n.ag-fresh .ag-rich-select-list {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-fresh .ag-rich-select-row {\n  padding: 2px;\n}\n.ag-fresh .ag-rich-select-row-selected {\n  background-color: #bde2e5;\n}\n.ag-fresh .ag-large-text {\n  border: 1px solid #808080;\n}\n.ag-fresh .ag-header-select-all {\n  padding: 5px 0px 0px 3px;\n  line-height: 0;\n}\n.ag-fresh .ag-header {\n  color: #000;\n  background: -webkit-linear-gradient(#fff, #d3d3d3);\n  background: -moz-linear-gradient(#fff, #d3d3d3);\n  background: -o-linear-gradient(#fff, #d3d3d3);\n  background: -ms-linear-gradient(#fff, #d3d3d3);\n  background: linear-gradient(#fff, #d3d3d3);\n  border-bottom: 1px solid #808080;\n  font-weight: normal;\n}\n.ag-fresh .ag-header-icon {\n  color: #000;\n  stroke: none;\n  fill: #000;\n}\n.ag-fresh .ag-layout-for-print .ag-header-container {\n  background: -webkit-linear-gradient(#fff, #d3d3d3);\n  background: -moz-linear-gradient(#fff, #d3d3d3);\n  background: -o-linear-gradient(#fff, #d3d3d3);\n  background: -ms-linear-gradient(#fff, #d3d3d3);\n  background: linear-gradient(#fff, #d3d3d3);\n  border-bottom: 1px solid #808080;\n}\n.ag-fresh .ag-ltr .ag-header-cell {\n  border-right: 1px solid #808080;\n}\n.ag-fresh .ag-rtl .ag-header-cell {\n  border-left: 1px solid #808080;\n}\n.ag-fresh .ag-header-cell-moving .ag-header-cell-label {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-fresh .ag-header-cell-moving {\n  background-color: #bebebe;\n}\n.ag-fresh .ag-ltr .ag-header-group-cell {\n  border-right: 1px solid #808080;\n}\n.ag-fresh .ag-rtl .ag-header-group-cell {\n  border-left: 1px solid #808080;\n}\n.ag-fresh .ag-header-group-cell-with-group {\n  border-bottom: 1px solid #808080;\n}\n.ag-fresh .ag-header-cell-label {\n  padding: 4px 2px 4px 2px;\n}\n.ag-fresh .ag-header-cell-text {\n  padding-left: 2px;\n}\n.ag-fresh .ag-header-group-cell-label {\n  padding: 4px;\n}\n.ag-fresh .ag-ltr .ag-header-group-cell-label {\n  padding-left: 10px;\n}\n.ag-fresh .ag-rtl .ag-header-group-cell-label {\n  padding-right: 10px;\n}\n.ag-fresh .ag-rtl .ag-header-group-text {\n  margin-left: 2px;\n}\n.ag-fresh .ag-ltr .ag-header-group-text {\n  margin-right: 2px;\n}\n.ag-fresh .ag-header-cell-menu-button {\n  padding: 2px;\n  margin-top: 4px;\n  margin-left: 1px;\n  margin-right: 1px;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  -webkit-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  -moz-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  line-height: 0px /* normal line height, a space was appearing below the menu button */;\n}\n.ag-fresh .ag-ltr .ag-pinned-right-header {\n  border-left: 1px solid #808080;\n}\n.ag-fresh .ag-rtl .ag-pinned-left-header {\n  border-right: 1px solid #808080;\n}\n.ag-fresh .ag-header-cell-menu-button:hover {\n  border: 1px solid #808080;\n}\n.ag-fresh .ag-body {\n  background-color: #f6f6f6;\n}\n.ag-fresh .ag-row-odd {\n  background-color: #f6f6f6;\n}\n.ag-fresh .ag-row-even {\n  background-color: #fff;\n}\n.ag-fresh .ag-row-selected {\n  background-color: #b0e0e6;\n}\n.ag-fresh .ag-row-stub {\n  background-color: #f0f0f0;\n}\n.ag-fresh .ag-stub-cell {\n  padding: 2px 2px 2px 10px;\n}\n.ag-fresh .ag-floating-top {\n  background-color: #f0f0f0;\n}\n.ag-fresh .ag-floating-top .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-fresh .ag-floating-bottom {\n  background-color: #f0f0f0;\n}\n.ag-fresh .ag-floating-bottom .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-fresh .ag-overlay-loading-wrapper {\n  background-color: rgba(255,255,255,0.5);\n}\n.ag-fresh .ag-overlay-loading-center {\n  background-color: #fff;\n  border: 1px solid #808080;\n  border-radius: 10px;\n  padding: 10px;\n  color: #000;\n}\n.ag-fresh .ag-overlay-no-rows-center {\n  background-color: #fff;\n  border: 1px solid #808080;\n  border-radius: 10px;\n  padding: 10px;\n}\n.ag-fresh .ag-group-cell-entire-row {\n  background-color: #f6f6f6;\n  padding: 2px;\n}\n.ag-fresh .ag-footer-cell-entire-row {\n  background-color: #f6f6f6;\n  padding: 2px;\n}\n.ag-fresh .ag-group-cell {\n  font-style: italic;\n}\n.ag-fresh .ag-ltr .ag-group-expanded {\n  padding-right: 4px;\n}\n.ag-fresh .ag-rtl .ag-group-expanded {\n  padding-left: 4px;\n}\n.ag-fresh .ag-ltr .ag-group-contracted {\n  padding-right: 4px;\n}\n.ag-fresh .ag-rtl .ag-group-contracted {\n  padding-left: 4px;\n}\n.ag-fresh .ag-ltr .ag-group-loading {\n  padding-right: 4px;\n}\n.ag-fresh .ag-rtl .ag-group-loading {\n  padding-left: 4px;\n}\n.ag-fresh .ag-ltr .ag-group-value {\n  padding-right: 2px;\n}\n.ag-fresh .ag-rtl .ag-group-value {\n  padding-left: 2px;\n}\n.ag-fresh .ag-ltr .ag-group-checkbox {\n  padding-right: 2px;\n}\n.ag-fresh .ag-rtl .ag-group-checkbox {\n  padding-left: 2px;\n}\n.ag-fresh .ag-group-child-count {\n  display: inline-block;\n}\n.ag-fresh .ag-footer-cell {\n  font-style: italic;\n}\n.ag-fresh .ag-menu {\n  border: 1px solid #808080;\n  background-color: #f6f6f6;\n  cursor: default;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n}\n.ag-fresh .ag-menu .ag-tab-header {\n  background-color: #e6e6e6;\n}\n.ag-fresh .ag-menu .ag-tab {\n  padding: 6px 8px 6px 8px;\n  margin: 2px 2px 0px 2px;\n  display: inline-block;\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  border-top: 1px solid transparent;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.ag-fresh .ag-menu .ag-tab-selected {\n  background-color: #f6f6f6;\n  border-right: 1px solid #d3d3d3;\n  border-left: 1px solid #d3d3d3;\n  border-top: 1px solid #d3d3d3;\n}\n.ag-fresh .ag-menu-separator {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-fresh .ag-menu-option-active {\n  background-color: #bde2e5;\n}\n.ag-fresh .ag-menu-option-icon {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-fresh .ag-menu-option-text {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-fresh .ag-menu-option-shortcut {\n  padding: 2px 2px 2px 2px;\n  vertical-align: middle;\n}\n.ag-fresh .ag-menu-option-popup-pointer {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-fresh .ag-menu-option-disabled {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-fresh .ag-menu-column-select-wrapper {\n  margin: 2px;\n}\n.ag-fresh .ag-filter-checkbox {\n  position: relative;\n  left: 2px;\n  display: inline-block;\n  margin-right: 5px;\n}\n.ag-fresh .ag-filter-header-container {\n  border-bottom: 1px solid #d3d3d3;\n}\n.ag-fresh .ag-filter-apply-panel {\n  border-top: 1px solid #d3d3d3;\n  padding: 2px;\n}\n.ag-fresh .ag-filter-value {\n  margin-left: 4px;\n}\n.ag-fresh .ag-ltr .ag-selection-checkbox {\n  padding-right: 4px;\n}\n.ag-fresh .ag-rtl .ag-selection-checkbox {\n  padding-left: 4px;\n}\n.ag-fresh .ag-paging-panel {\n  padding: 4px;\n}\n.ag-fresh .ag-paging-button {\n  margin-left: 4px;\n  margin-right: 4px;\n}\n.ag-fresh .ag-paging-row-summary-panel {\n  display: inline-block;\n  width: 300px;\n}\n.ag-fresh .ag-tool-panel {\n  background-color: #f6f6f6;\n  border-bottom: 1px solid #808080;\n  border-top: 1px solid #808080;\n  color: #222;\n}\n.ag-fresh .ltr .ag-tool-panel {\n  border-right: 1px solid #808080;\n}\n.ag-fresh .rtl .ag-tool-panel {\n  border-left: 1px solid #808080;\n}\n.ag-fresh .ag-status-bar {\n  color: #222;\n  background-color: #f6f6f6;\n  font-size: 14px;\n  height: 22px;\n  border-bottom: 1px solid #808080;\n  border-left: 1px solid #808080;\n  border-right: 1px solid #808080;\n  padding: 2px;\n}\n.ag-fresh .ag-status-bar-aggregations {\n  float: right;\n}\n.ag-fresh .ag-status-bar-item {\n  padding-left: 10px;\n}\n.ag-fresh .ag-column-drop-cell {\n  background: -webkit-linear-gradient(#fff, #d3d3d3);\n  background: -moz-linear-gradient(#fff, #d3d3d3);\n  background: -o-linear-gradient(#fff, #d3d3d3);\n  background: -ms-linear-gradient(#fff, #d3d3d3);\n  background: linear-gradient(#fff, #d3d3d3);\n  color: #000;\n  border: 1px solid #808080;\n}\n.ag-fresh .ag-column-drop-cell-ghost {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-fresh .ag-column-drop-cell-text {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-fresh .ag-column-drop-cell-button {\n  border: 1px solid transparent;\n  padding-left: 2px;\n  padding-right: 2px;\n  border-radius: 3px;\n}\n.ag-fresh .ag-column-drop-cell-button:hover {\n  border: 1px solid #808080;\n}\n.ag-fresh .ag-column-drop-empty-message {\n  padding-left: 2px;\n  padding-right: 2px;\n  color: #808080;\n}\n.ag-fresh .ag-column-drop-icon {\n  margin: 3px;\n}\n.ag-fresh .ag-column-drop {\n  background-color: #f6f6f6;\n}\n.ag-fresh .ag-column-drop-horizontal {\n  padding: 2px;\n  border-top: 1px solid #808080;\n  border-left: 1px solid #808080;\n  border-right: 1px solid #808080;\n}\n.ag-fresh .ag-column-drop-vertical {\n  padding: 4px 4px 10px 4px;\n  border-bottom: 1px solid #808080;\n  overflow: auto;\n}\n.ag-fresh .ag-column-drop-vertical .ag-column-drop-cell {\n  margin-top: 2px;\n}\n.ag-fresh .ag-column-drop-vertical .ag-column-drop-empty-message {\n  text-align: center;\n  padding: 5px;\n}\n.ag-fresh .ag-pivot-mode {\n  border-bottom: 1px solid #808080;\n  padding: 4px;\n  background-color: #f6f6f6;\n}\n.ag-fresh .ag-tool-panel .ag-column-select-panel {\n  border-bottom: 1px solid #808080;\n  overflow: auto;\n}\n.ag-fresh .ag-select-agg-func-popup {\n  cursor: default;\n  position: absolute;\n  font-size: 14px;\n  background-color: #fff;\n  border: 1px solid #808080;\n}\n.ag-fresh .ag-select-agg-func-item {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-fresh .ag-select-agg-func-item:hover {\n  background-color: #bde2e5;\n}\n',""])},function(a,b,c){var d=c(140);"string"==typeof d&&(d=[[a.id,d,""]]);c(132)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(131)(),b.push([a.id,".ag-material {\n  line-height: 1.4;\n  font-family: Roboto;\n  font-size: 14px;\n  color: #666;\n/* this is for the rowGroupPanel, that appears along the top of the grid */\n/* this is for the column drops that appear in the toolPanel */\n}\n.ag-material img {\n  vertical-align: middle;\n  border: 0;\n}\n.ag-material .ag-root {\n  border: none;\n}\n.ag-material .ag-cell-data-changed {\n  background-color: #cec;\n}\n.ag-material .ag-cell-data-changed-animation {\n  background-color: transparent;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-material .ag-cell-not-inline-editing {\n  padding: 2px;\n}\n.ag-material .ag-cell-range-selected-1:not(.ag-cell-focus) {\n  background-color: rgba(120,120,120,0.4);\n}\n.ag-material .ag-cell-range-selected-2:not(.ag-cell-focus) {\n  background-color: rgba(80,80,80,0.4);\n}\n.ag-material .ag-cell-range-selected-3:not(.ag-cell-focus) {\n  background-color: rgba(40,40,40,0.4);\n}\n.ag-material .ag-cell-range-selected-4:not(.ag-cell-focus) {\n  background-color: rgba(0,0,0,0.4);\n}\n.ag-material .ag-cell-focus {\n  border: 1px solid #d3d3d3;\n}\n.ag-material .ag-cell-no-focus {\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid #d3d3d3;\n}\n.ag-material .ag-ltr .ag-cell-no-focus {\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n}\n.ag-material .ag-rtl .ag-cell-no-focus {\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n}\n.ag-material .ag-rtl .ag-cell-first-right-pinned {\n  border-left: none;\n}\n.ag-material .ag-ltr .ag-cell-first-right-pinned {\n  border-left: none;\n}\n.ag-material .ag-rtl .ag-cell-last-left-pinned {\n  border-right: none;\n}\n.ag-material .ag-ltr .ag-cell-last-left-pinned {\n  border-right: none;\n}\n.ag-material .ag-cell-highlight {\n  border: 1px solid #006400;\n}\n.ag-material .ag-cell-highlight-animation {\n  -webkit-transition: border 1s;\n  -moz-transition: border 1s;\n  -o-transition: border 1s;\n  -ms-transition: border 1s;\n  transition: border 1s;\n}\n.ag-material .ag-value-change-delta {\n  padding-right: 2px;\n}\n.ag-material .ag-value-change-delta-up {\n  color: #006400;\n}\n.ag-material .ag-value-change-delta-down {\n  color: #8b0000;\n}\n.ag-material .ag-value-change-value {\n  background-color: transparent;\n  border-radius: 1px;\n  padding-left: 1px;\n  padding-right: 1px;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-material .ag-value-change-value-highlight {\n  background-color: #cec;\n  -webkit-transition: background-color 0.1s;\n  -moz-transition: background-color 0.1s;\n  -o-transition: background-color 0.1s;\n  -ms-transition: background-color 0.1s;\n  transition: background-color 0.1s;\n}\n.ag-material .ag-rich-select {\n  font-size: 14px;\n  border: none;\n  background-color: #fff;\n}\n.ag-material .ag-rich-select-value {\n  padding: 2px;\n}\n.ag-material .ag-rich-select-list {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-material .ag-rich-select-row {\n  padding: 2px;\n}\n.ag-material .ag-rich-select-row-selected {\n  background-color: #bde2e5;\n}\n.ag-material .ag-large-text {\n  border: none;\n}\n.ag-material .ag-header-select-all {\n  padding: 5px 0px 0px 15px;\n  line-height: 0;\n}\n.ag-material .ag-header {\n  color: #666;\n  background: none;\n  border-bottom: none;\n  font-weight: bold;\n}\n.ag-material .ag-header-icon {\n  color: #666;\n  stroke: none;\n  fill: #666;\n}\n.ag-material .ag-layout-for-print .ag-header-container {\n  background: none;\n  border-bottom: none;\n}\n.ag-material .ag-ltr .ag-header-cell {\n  border-right: none;\n}\n.ag-material .ag-rtl .ag-header-cell {\n  border-left: none;\n}\n.ag-material .ag-header-cell-moving .ag-header-cell-label {\n  opacity: 0.5;\n  -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\";\n  filter: alpha(opacity=50);\n}\n.ag-material .ag-header-cell-moving {\n  background-color: #bebebe;\n}\n.ag-material .ag-ltr .ag-header-group-cell {\n  border-right: none;\n}\n.ag-material .ag-rtl .ag-header-group-cell {\n  border-left: none;\n}\n.ag-material .ag-header-group-cell-with-group {\n  border-bottom: none;\n}\n.ag-material .ag-header-cell-label {\n  padding: 4px 2px 4px 2px;\n}\n.ag-material .ag-header-cell-text {\n  padding-left: 2px;\n}\n.ag-material .ag-header-group-cell-label {\n  padding: 4px;\n}\n.ag-material .ag-ltr .ag-header-group-cell-label {\n  padding-left: 10px;\n}\n.ag-material .ag-rtl .ag-header-group-cell-label {\n  padding-right: 10px;\n}\n.ag-material .ag-rtl .ag-header-group-text {\n  margin-left: 2px;\n}\n.ag-material .ag-ltr .ag-header-group-text {\n  margin-right: 2px;\n}\n.ag-material .ag-header-cell-menu-button {\n  padding: 2px;\n  margin-top: 4px;\n  margin-left: 1px;\n  margin-right: 1px;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  -webkit-box-sizing: content-box /* When using bootstrap, box-sizing was set to 'border-box' */;\n  -moz-box-sizing: content-box /* When using bootstrap, box-sizing was set to 'border-box' */;\n  box-sizing: content-box /* When using bootstrap, box-sizing was set to 'border-box' */;\n  line-height: 0px /* normal line height, a space was appearing below the menu button */;\n}\n.ag-material .ag-ltr .ag-pinned-right-header {\n  border-left: none;\n}\n.ag-material .ag-rtl .ag-pinned-left-header {\n  border-right: none;\n}\n.ag-material .ag-header-cell-menu-button:hover {\n  border: none;\n}\n.ag-material .ag-body {\n  background-color: #fff;\n}\n.ag-material .ag-row-odd {\n  background-color: #fff;\n}\n.ag-material .ag-row-even {\n  background-color: #fff;\n}\n.ag-material .ag-row-selected {\n  background-color: #f5f5f5;\n}\n.ag-material .ag-row-stub {\n  background-color: #f0f0f0;\n}\n.ag-material .ag-stub-cell {\n  padding: 2px 2px 2px 10px;\n}\n.ag-material .ag-floating-top {\n  background-color: #f0f0f0;\n}\n.ag-material .ag-floating-top .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-material .ag-floating-bottom {\n  background-color: #f0f0f0;\n}\n.ag-material .ag-floating-bottom .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-material .ag-overlay-loading-wrapper {\n  background-color: rgba(255,255,255,0.5);\n}\n.ag-material .ag-overlay-loading-center {\n  background-color: #fff;\n  border: none;\n  border-radius: 10px;\n  padding: 10px;\n  color: #000;\n}\n.ag-material .ag-overlay-no-rows-center {\n  background-color: #fff;\n  border: none;\n  border-radius: 10px;\n  padding: 10px;\n}\n.ag-material .ag-group-cell-entire-row {\n  background-color: #fff;\n  padding: 2px;\n}\n.ag-material .ag-footer-cell-entire-row {\n  background-color: #fff;\n  padding: 2px;\n}\n.ag-material .ag-group-cell {\n  font-style: italic;\n}\n.ag-material .ag-ltr .ag-group-expanded {\n  padding-right: 4px;\n}\n.ag-material .ag-rtl .ag-group-expanded {\n  padding-left: 4px;\n}\n.ag-material .ag-ltr .ag-group-contracted {\n  padding-right: 4px;\n}\n.ag-material .ag-rtl .ag-group-contracted {\n  padding-left: 4px;\n}\n.ag-material .ag-ltr .ag-group-loading {\n  padding-right: 4px;\n}\n.ag-material .ag-rtl .ag-group-loading {\n  padding-left: 4px;\n}\n.ag-material .ag-ltr .ag-group-value {\n  padding-right: 2px;\n}\n.ag-material .ag-rtl .ag-group-value {\n  padding-left: 2px;\n}\n.ag-material .ag-ltr .ag-group-checkbox {\n  padding-right: 2px;\n}\n.ag-material .ag-rtl .ag-group-checkbox {\n  padding-left: 2px;\n}\n.ag-material .ag-group-child-count {\n  display: inline-block;\n}\n.ag-material .ag-footer-cell {\n  font-style: italic;\n}\n.ag-material .ag-menu {\n  border: 1px solid #808080;\n  background-color: #fff;\n  cursor: default;\n  font-family: Roboto;\n  font-size: 14px;\n}\n.ag-material .ag-menu .ag-tab-header {\n  background-color: #f6f6f6;\n}\n.ag-material .ag-menu .ag-tab {\n  padding: 6px 16px 6px 16px;\n  margin: 2px 2px 0px 2px;\n  display: inline-block;\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  border-top: 1px solid transparent;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.ag-material .ag-menu .ag-tab-selected {\n  background-color: #fff;\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  border-top: 1px solid transparent;\n}\n.ag-material .ag-menu-separator {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-material .ag-menu-option-active {\n  background-color: #bde2e5;\n}\n.ag-material .ag-menu-option-icon {\n  padding: 10px 6px 10px 6px;\n  vertical-align: middle;\n}\n.ag-material .ag-menu-option-text {\n  padding: 10px 6px 10px 6px;\n  vertical-align: middle;\n}\n.ag-material .ag-menu-option-shortcut {\n  padding: 10px 6px 10px 6px;\n  vertical-align: middle;\n}\n.ag-material .ag-menu-option-popup-pointer {\n  padding: 10px 6px 10px 6px;\n  vertical-align: middle;\n}\n.ag-material .ag-menu-option-disabled {\n  opacity: 0.5;\n  -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\";\n  filter: alpha(opacity=50);\n}\n.ag-material .ag-menu-column-select-wrapper {\n  margin: 2px;\n}\n.ag-material .ag-filter-checkbox {\n  position: relative;\n  left: 2px;\n  display: inline-block;\n  margin-right: 5px;\n}\n.ag-material .ag-filter-header-container {\n  border-bottom: 1px solid #d3d3d3;\n}\n.ag-material .ag-filter-apply-panel {\n  border-top: 1px solid #d3d3d3;\n  padding: 2px;\n}\n.ag-material .ag-filter-value {\n  margin-left: 4px;\n}\n.ag-material .ag-ltr .ag-selection-checkbox {\n  padding-right: 4px;\n}\n.ag-material .ag-rtl .ag-selection-checkbox {\n  padding-left: 4px;\n}\n.ag-material .ag-paging-panel {\n  padding: 4px;\n}\n.ag-material .ag-paging-button {\n  margin-left: 4px;\n  margin-right: 4px;\n}\n.ag-material .ag-paging-row-summary-panel {\n  display: inline-block;\n  width: 300px;\n}\n.ag-material .ag-tool-panel {\n  background-color: #fff;\n  border-bottom: none;\n  border-top: none;\n  color: #666;\n}\n.ag-material .ltr .ag-tool-panel {\n  border-right: none;\n}\n.ag-material .rtl .ag-tool-panel {\n  border-left: none;\n}\n.ag-material .ag-status-bar {\n  color: #666;\n  background-color: #fff;\n  font-size: 14px;\n  height: 22px;\n  border-bottom: none;\n  border-left: none;\n  border-right: none;\n  padding: 2px;\n}\n.ag-material .ag-status-bar-aggregations {\n  float: right;\n}\n.ag-material .ag-status-bar-item {\n  padding-left: 10px;\n}\n.ag-material .ag-column-drop-cell {\n  background: none;\n  color: #000;\n  border: 1px solid #808080;\n}\n.ag-material .ag-column-drop-cell-ghost {\n  opacity: 0.5;\n  -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\";\n  filter: alpha(opacity=50);\n}\n.ag-material .ag-column-drop-cell-text {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-material .ag-column-drop-cell-button {\n  border: 1px solid transparent;\n  padding-left: 2px;\n  padding-right: 2px;\n  border-radius: 3px;\n}\n.ag-material .ag-column-drop-cell-button:hover {\n  border: none;\n}\n.ag-material .ag-column-drop-empty-message {\n  padding-left: 2px;\n  padding-right: 2px;\n  color: #808080;\n}\n.ag-material .ag-column-drop-icon {\n  margin: 3px;\n}\n.ag-material .ag-column-drop {\n  background-color: #fff;\n}\n.ag-material .ag-column-drop-horizontal {\n  padding: 2px;\n  border-top: none;\n  border-left: none;\n  border-right: none;\n}\n.ag-material .ag-column-drop-vertical {\n  padding: 4px 4px 10px 4px;\n  border-bottom: none;\n  overflow: auto;\n}\n.ag-material .ag-column-drop-vertical .ag-column-drop-cell {\n  margin-top: 2px;\n}\n.ag-material .ag-column-drop-vertical .ag-column-drop-empty-message {\n  text-align: center;\n  padding: 5px;\n}\n.ag-material .ag-pivot-mode {\n  border-bottom: none;\n  padding: 4px;\n  background-color: #fff;\n}\n.ag-material .ag-tool-panel .ag-column-select-panel {\n  border-bottom: none;\n  overflow: auto;\n}\n.ag-material .ag-select-agg-func-popup {\n  cursor: default;\n  position: absolute;\n  font-size: 14px;\n  background-color: #fff;\n  border: none;\n}\n.ag-material .ag-select-agg-func-item {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-material .ag-select-agg-func-item:hover {\n  background-color: #bde2e5;\n}\n.ag-material .ag-row-hover {\n  background-color: #eee !important;\n}\n.ag-material .ag-cell-not-inline-editing {\n  padding-top: 15px;\n}\n.ag-material .ag-header-cell-menu-button:hover {\n  border: 1px solid #808080;\n}\n.ag-material .ag-header-cell-label {\n  text-align: left;\n}\n.ag-material .ag-header {\n  border-bottom: 1px solid #808080;\n}\n.ag-material .ag-selection-checkbox {\n  padding-right: 12px;\n  padding-left: 12px;\n}\n",""])},function(a,b,c){var d=c(142);"string"==typeof d&&(d=[[a.id,d,""]]);c(132)(d,{});d.locals&&(a.exports=d.locals)},function(a,b,c){b=a.exports=c(131)(),
b.push([a.id,'.ag-bootstrap {\n  line-height: 1.4;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  color: #000;\n/* this is for the rowGroupPanel, that appears along the top of the grid */\n/* this is for the column drops that appear in the toolPanel */\n}\n.ag-bootstrap img {\n  vertical-align: middle;\n  border: 0;\n}\n.ag-bootstrap .ag-root {\n  border: none;\n}\n.ag-bootstrap .ag-cell-data-changed {\n  background-color: #cec;\n}\n.ag-bootstrap .ag-cell-data-changed-animation {\n  background-color: transparent;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-bootstrap .ag-cell-not-inline-editing {\n  padding: 4px;\n}\n.ag-bootstrap .ag-cell-range-selected-1:not(.ag-cell-focus) {\n  background-color: rgba(120,120,120,0.4);\n}\n.ag-bootstrap .ag-cell-range-selected-2:not(.ag-cell-focus) {\n  background-color: rgba(80,80,80,0.4);\n}\n.ag-bootstrap .ag-cell-range-selected-3:not(.ag-cell-focus) {\n  background-color: rgba(40,40,40,0.4);\n}\n.ag-bootstrap .ag-cell-range-selected-4:not(.ag-cell-focus) {\n  background-color: rgba(0,0,0,0.4);\n}\n.ag-bootstrap .ag-cell-focus {\n  border: 2px solid #217346;\n}\n.ag-bootstrap .ag-cell-no-focus {\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n}\n.ag-bootstrap .ag-ltr .ag-cell-no-focus {\n  border-right: none;\n  border-left: 1px solid transparent;\n}\n.ag-bootstrap .ag-rtl .ag-cell-no-focus {\n  border-right: 1px solid transparent;\n  border-left: none;\n}\n.ag-bootstrap .ag-rtl .ag-cell-first-right-pinned {\n  border-left: none;\n}\n.ag-bootstrap .ag-ltr .ag-cell-first-right-pinned {\n  border-left: none;\n}\n.ag-bootstrap .ag-rtl .ag-cell-last-left-pinned {\n  border-right: none;\n}\n.ag-bootstrap .ag-ltr .ag-cell-last-left-pinned {\n  border-right: none;\n}\n.ag-bootstrap .ag-cell-highlight {\n  border: 1px solid #006400;\n}\n.ag-bootstrap .ag-cell-highlight-animation {\n  -webkit-transition: border 1s;\n  -moz-transition: border 1s;\n  -o-transition: border 1s;\n  -ms-transition: border 1s;\n  transition: border 1s;\n}\n.ag-bootstrap .ag-value-change-delta {\n  padding-right: 2px;\n}\n.ag-bootstrap .ag-value-change-delta-up {\n  color: #006400;\n}\n.ag-bootstrap .ag-value-change-delta-down {\n  color: #8b0000;\n}\n.ag-bootstrap .ag-value-change-value {\n  background-color: transparent;\n  border-radius: 1px;\n  padding-left: 1px;\n  padding-right: 1px;\n  -webkit-transition: background-color 1s;\n  -moz-transition: background-color 1s;\n  -o-transition: background-color 1s;\n  -ms-transition: background-color 1s;\n  transition: background-color 1s;\n}\n.ag-bootstrap .ag-value-change-value-highlight {\n  background-color: #cec;\n  -webkit-transition: background-color 0.1s;\n  -moz-transition: background-color 0.1s;\n  -o-transition: background-color 0.1s;\n  -ms-transition: background-color 0.1s;\n  transition: background-color 0.1s;\n}\n.ag-bootstrap .ag-rich-select {\n  font-size: 14px;\n  border: none;\n  background-color: #fff;\n}\n.ag-bootstrap .ag-rich-select-value {\n  padding: 2px;\n}\n.ag-bootstrap .ag-rich-select-list {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-bootstrap .ag-rich-select-row {\n  padding: 2px;\n}\n.ag-bootstrap .ag-rich-select-row-selected {\n  background-color: #bde2e5;\n}\n.ag-bootstrap .ag-large-text {\n  border: none;\n}\n.ag-bootstrap .ag-header-select-all {\n  padding: 5px 0px 0px 5px;\n  line-height: 0;\n}\n.ag-bootstrap .ag-header {\n  color: #000;\n  background: none;\n  border-bottom: none;\n  font-weight: 600;\n}\n.ag-bootstrap .ag-header-icon {\n  color: #000;\n  stroke: none;\n  fill: #000;\n}\n.ag-bootstrap .ag-layout-for-print .ag-header-container {\n  background: none;\n  border-bottom: none;\n}\n.ag-bootstrap .ag-ltr .ag-header-cell {\n  border-right: none;\n}\n.ag-bootstrap .ag-rtl .ag-header-cell {\n  border-left: none;\n}\n.ag-bootstrap .ag-header-cell-moving .ag-header-cell-label {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-bootstrap .ag-header-cell-moving {\n  background-color: #bebebe;\n}\n.ag-bootstrap .ag-ltr .ag-header-group-cell {\n  border-right: none;\n}\n.ag-bootstrap .ag-rtl .ag-header-group-cell {\n  border-left: none;\n}\n.ag-bootstrap .ag-header-group-cell-with-group {\n  border-bottom: none;\n}\n.ag-bootstrap .ag-header-cell-label {\n  padding: 4px 2px 4px 2px;\n}\n.ag-bootstrap .ag-header-cell-text {\n  padding-left: 2px;\n}\n.ag-bootstrap .ag-header-group-cell-label {\n  padding: 4px;\n}\n.ag-bootstrap .ag-ltr .ag-header-group-cell-label {\n  padding-left: 10px;\n}\n.ag-bootstrap .ag-rtl .ag-header-group-cell-label {\n  padding-right: 10px;\n}\n.ag-bootstrap .ag-rtl .ag-header-group-text {\n  margin-left: 2px;\n}\n.ag-bootstrap .ag-ltr .ag-header-group-text {\n  margin-right: 2px;\n}\n.ag-bootstrap .ag-header-cell-menu-button {\n  padding: 2px;\n  margin-top: 4px;\n  margin-left: 1px;\n  margin-right: 1px;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  -webkit-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  -moz-box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  box-sizing: content-box /* When using bootstrap, box-sizing was set to \'border-box\' */;\n  line-height: 0px /* normal line height, a space was appearing below the menu button */;\n}\n.ag-bootstrap .ag-ltr .ag-pinned-right-header {\n  border-left: none;\n}\n.ag-bootstrap .ag-rtl .ag-pinned-left-header {\n  border-right: none;\n}\n.ag-bootstrap .ag-header-cell-menu-button:hover {\n  border: none;\n}\n.ag-bootstrap .ag-body {\n  background-color: #f6f6f6;\n}\n.ag-bootstrap .ag-row-odd {\n  background-color: #f6f6f6;\n}\n.ag-bootstrap .ag-row-even {\n  background-color: #fff;\n}\n.ag-bootstrap .ag-row-selected {\n  background-color: #b0e0e6;\n}\n.ag-bootstrap .ag-row-stub {\n  background-color: #f0f0f0;\n}\n.ag-bootstrap .ag-stub-cell {\n  padding: 2px 2px 2px 10px;\n}\n.ag-bootstrap .ag-floating-top {\n  background-color: #f0f0f0;\n}\n.ag-bootstrap .ag-floating-top .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-bootstrap .ag-floating-bottom {\n  background-color: #f0f0f0;\n}\n.ag-bootstrap .ag-floating-bottom .ag-row {\n  background-color: #f0f0f0;\n}\n.ag-bootstrap .ag-overlay-loading-wrapper {\n  background-color: rgba(255,255,255,0.5);\n}\n.ag-bootstrap .ag-overlay-loading-center {\n  background-color: #fff;\n  border: none;\n  border-radius: 10px;\n  padding: 10px;\n  color: #000;\n}\n.ag-bootstrap .ag-overlay-no-rows-center {\n  background-color: #fff;\n  border: none;\n  border-radius: 10px;\n  padding: 10px;\n}\n.ag-bootstrap .ag-group-cell-entire-row {\n  background-color: #f6f6f6;\n  padding: 4px;\n}\n.ag-bootstrap .ag-footer-cell-entire-row {\n  background-color: #f6f6f6;\n  padding: 4px;\n}\n.ag-bootstrap .ag-group-cell {\n  font-style: italic;\n}\n.ag-bootstrap .ag-ltr .ag-group-expanded {\n  padding-right: 4px;\n}\n.ag-bootstrap .ag-rtl .ag-group-expanded {\n  padding-left: 4px;\n}\n.ag-bootstrap .ag-ltr .ag-group-contracted {\n  padding-right: 4px;\n}\n.ag-bootstrap .ag-rtl .ag-group-contracted {\n  padding-left: 4px;\n}\n.ag-bootstrap .ag-ltr .ag-group-loading {\n  padding-right: 4px;\n}\n.ag-bootstrap .ag-rtl .ag-group-loading {\n  padding-left: 4px;\n}\n.ag-bootstrap .ag-ltr .ag-group-value {\n  padding-right: 2px;\n}\n.ag-bootstrap .ag-rtl .ag-group-value {\n  padding-left: 2px;\n}\n.ag-bootstrap .ag-ltr .ag-group-checkbox {\n  padding-right: 2px;\n}\n.ag-bootstrap .ag-rtl .ag-group-checkbox {\n  padding-left: 2px;\n}\n.ag-bootstrap .ag-group-child-count {\n  display: inline-block;\n}\n.ag-bootstrap .ag-footer-cell {\n  font-style: italic;\n}\n.ag-bootstrap .ag-menu {\n  border: 1px solid #808080;\n  background-color: #f6f6f6;\n  cursor: default;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n}\n.ag-bootstrap .ag-menu .ag-tab-header {\n  background-color: #e6e6e6;\n}\n.ag-bootstrap .ag-menu .ag-tab {\n  padding: 6px 8px 6px 8px;\n  margin: 2px 2px 0px 2px;\n  display: inline-block;\n  border-right: 1px solid transparent;\n  border-left: 1px solid transparent;\n  border-top: 1px solid transparent;\n  border-top-right-radius: 2px;\n  border-top-left-radius: 2px;\n}\n.ag-bootstrap .ag-menu .ag-tab-selected {\n  background-color: #f6f6f6;\n  border-right: 1px solid #d3d3d3;\n  border-left: 1px solid #d3d3d3;\n  border-top: 1px solid #d3d3d3;\n}\n.ag-bootstrap .ag-menu-separator {\n  border-top: 1px solid #d3d3d3;\n}\n.ag-bootstrap .ag-menu-option-active {\n  background-color: #bde2e5;\n}\n.ag-bootstrap .ag-menu-option-icon {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-bootstrap .ag-menu-option-text {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-bootstrap .ag-menu-option-shortcut {\n  padding: 2px 2px 2px 2px;\n  vertical-align: middle;\n}\n.ag-bootstrap .ag-menu-option-popup-pointer {\n  padding: 2px 4px 2px 4px;\n  vertical-align: middle;\n}\n.ag-bootstrap .ag-menu-option-disabled {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-bootstrap .ag-menu-column-select-wrapper {\n  margin: 2px;\n}\n.ag-bootstrap .ag-filter-checkbox {\n  position: relative;\n  left: 2px;\n  display: inline-block;\n  margin-right: 5px;\n}\n.ag-bootstrap .ag-filter-header-container {\n  border-bottom: 1px solid #d3d3d3;\n}\n.ag-bootstrap .ag-filter-apply-panel {\n  border-top: 1px solid #d3d3d3;\n  padding: 2px;\n}\n.ag-bootstrap .ag-filter-value {\n  margin-left: 4px;\n}\n.ag-bootstrap .ag-ltr .ag-selection-checkbox {\n  padding-right: 4px;\n}\n.ag-bootstrap .ag-rtl .ag-selection-checkbox {\n  padding-left: 4px;\n}\n.ag-bootstrap .ag-paging-panel {\n  padding: 4px;\n}\n.ag-bootstrap .ag-paging-button {\n  margin-left: 4px;\n  margin-right: 4px;\n}\n.ag-bootstrap .ag-paging-row-summary-panel {\n  display: inline-block;\n  width: 300px;\n}\n.ag-bootstrap .ag-tool-panel {\n  background-color: #f6f6f6;\n  border-bottom: none;\n  border-top: none;\n  color: #000;\n}\n.ag-bootstrap .ltr .ag-tool-panel {\n  border-right: none;\n}\n.ag-bootstrap .rtl .ag-tool-panel {\n  border-left: none;\n}\n.ag-bootstrap .ag-status-bar {\n  color: #000;\n  background-color: #f6f6f6;\n  font-size: 14px;\n  height: 22px;\n  border-bottom: none;\n  border-left: none;\n  border-right: none;\n  padding: 2px;\n}\n.ag-bootstrap .ag-status-bar-aggregations {\n  float: right;\n}\n.ag-bootstrap .ag-status-bar-item {\n  padding-left: 10px;\n}\n.ag-bootstrap .ag-column-drop-cell {\n  background: none;\n  color: #000;\n  border: 1px solid #808080;\n}\n.ag-bootstrap .ag-column-drop-cell-ghost {\n  opacity: 0.5;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n  filter: alpha(opacity=50);\n}\n.ag-bootstrap .ag-column-drop-cell-text {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-bootstrap .ag-column-drop-cell-button {\n  border: 1px solid transparent;\n  padding-left: 2px;\n  padding-right: 2px;\n  border-radius: 3px;\n}\n.ag-bootstrap .ag-column-drop-cell-button:hover {\n  border: none;\n}\n.ag-bootstrap .ag-column-drop-empty-message {\n  padding-left: 2px;\n  padding-right: 2px;\n  color: #808080;\n}\n.ag-bootstrap .ag-column-drop-icon {\n  margin: 3px;\n}\n.ag-bootstrap .ag-column-drop {\n  background-color: #f6f6f6;\n}\n.ag-bootstrap .ag-column-drop-horizontal {\n  padding: 2px;\n  border-top: none;\n  border-left: none;\n  border-right: none;\n}\n.ag-bootstrap .ag-column-drop-vertical {\n  padding: 4px 4px 10px 4px;\n  border-bottom: none;\n  overflow: auto;\n}\n.ag-bootstrap .ag-column-drop-vertical .ag-column-drop-cell {\n  margin-top: 2px;\n}\n.ag-bootstrap .ag-column-drop-vertical .ag-column-drop-empty-message {\n  text-align: center;\n  padding: 5px;\n}\n.ag-bootstrap .ag-pivot-mode {\n  border-bottom: none;\n  padding: 4px;\n  background-color: #f6f6f6;\n}\n.ag-bootstrap .ag-tool-panel .ag-column-select-panel {\n  border-bottom: none;\n  overflow: auto;\n}\n.ag-bootstrap .ag-select-agg-func-popup {\n  cursor: default;\n  position: absolute;\n  font-size: 14px;\n  background-color: #fff;\n  border: none;\n}\n.ag-bootstrap .ag-select-agg-func-item {\n  padding-left: 2px;\n  padding-right: 2px;\n}\n.ag-bootstrap .ag-select-agg-func-item:hover {\n  background-color: #bde2e5;\n}\n',""])}])}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Plotly=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("../src/lib"),e={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var f in e){var g=f.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.addStyleRule(g,e[f])}},{"../src/lib":743}],2:[function(a,b,c){"use strict";b.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}}},{}],3:[function(a,b,c){"use strict";b.exports=a("../src/transforms/aggregate")},{"../src/transforms/aggregate":1166}],4:[function(a,b,c){"use strict";b.exports=a("../src/traces/bar")},{"../src/traces/bar":887}],5:[function(a,b,c){"use strict";b.exports=a("../src/traces/box")},{"../src/traces/box":900}],6:[function(a,b,c){"use strict";b.exports=a("../src/components/calendars")},{"../src/components/calendars":616}],7:[function(a,b,c){"use strict";b.exports=a("../src/traces/candlestick")},{"../src/traces/candlestick":909}],8:[function(a,b,c){"use strict";b.exports=a("../src/traces/carpet")},{"../src/traces/carpet":930}],9:[function(a,b,c){"use strict";b.exports=a("../src/traces/choropleth")},{"../src/traces/choropleth":945}],10:[function(a,b,c){"use strict";b.exports=a("../src/traces/contour")},{"../src/traces/contour":958}],11:[function(a,b,c){"use strict";b.exports=a("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":973}],12:[function(a,b,c){"use strict";b.exports=a("../src/core")},{"../src/core":724}],13:[function(a,b,c){"use strict";b.exports=a("../src/transforms/filter")},{"../src/transforms/filter":1167}],14:[function(a,b,c){"use strict";b.exports=a("../src/transforms/groupby")},{"../src/transforms/groupby":1168}],15:[function(a,b,c){"use strict";b.exports=a("../src/traces/heatmap")},{"../src/traces/heatmap":986}],16:[function(a,b,c){"use strict";b.exports=a("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":996}],17:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram")},{"../src/traces/histogram":1007}],18:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram2d")},{"../src/traces/histogram2d":1013}],19:[function(a,b,c){"use strict";b.exports=a("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1017}],20:[function(a,b,c){"use strict";var d=a("./core");d.register([a("./bar"),a("./box"),a("./heatmap"),a("./histogram"),a("./histogram2d"),a("./histogram2dcontour"),a("./pie"),a("./contour"),a("./scatterternary"),a("./violin"),a("./scatter3d"),a("./surface"),a("./mesh3d"),a("./scattergeo"),a("./choropleth"),a("./scattergl"),a("./pointcloud"),a("./heatmapgl"),a("./parcoords"),a("./scattermapbox"),a("./sankey"),a("./table"),a("./carpet"),a("./scattercarpet"),a("./contourcarpet"),a("./ohlc"),a("./candlestick"),a("./scatterpolar"),a("./scatterpolargl")]),d.register([a("./aggregate"),a("./filter"),a("./groupby"),a("./sort")]),d.register([a("./calendars")]),b.exports=d},{"./aggregate":3,"./bar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./contour":10,"./contourcarpet":11,"./core":12,"./filter":13,"./groupby":14,"./heatmap":15,"./heatmapgl":16,"./histogram":17,"./histogram2d":18,"./histogram2dcontour":19,"./mesh3d":21,"./ohlc":22,"./parcoords":23,"./pie":24,"./pointcloud":25,"./sankey":26,"./scatter3d":27,"./scattercarpet":28,"./scattergeo":29,"./scattergl":30,"./scattermapbox":31,"./scatterpolar":32,"./scatterpolargl":33,"./scatterternary":34,"./sort":35,"./surface":36,"./table":37,"./violin":38}],21:[function(a,b,c){"use strict";b.exports=a("../src/traces/mesh3d")},{"../src/traces/mesh3d":1023}],22:[function(a,b,c){"use strict";b.exports=a("../src/traces/ohlc")},{"../src/traces/ohlc":1028}],23:[function(a,b,c){"use strict";b.exports=a("../src/traces/parcoords")},{"../src/traces/parcoords":1037}],24:[function(a,b,c){"use strict";b.exports=a("../src/traces/pie")},{"../src/traces/pie":1047}],25:[function(a,b,c){"use strict";b.exports=a("../src/traces/pointcloud")},{"../src/traces/pointcloud":1056}],26:[function(a,b,c){"use strict";b.exports=a("../src/traces/sankey")},{"../src/traces/sankey":1062}],27:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatter3d")},{"../src/traces/scatter3d":1096}],28:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1102}],29:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattergeo")},{"../src/traces/scattergeo":1109}],30:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattergl")},{"../src/traces/scattergl":1115}],31:[function(a,b,c){"use strict";b.exports=a("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1121}],32:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1128}],33:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1132}],34:[function(a,b,c){"use strict";b.exports=a("../src/traces/scatterternary")},{"../src/traces/scatterternary":1138}],35:[function(a,b,c){"use strict";b.exports=a("../src/transforms/sort")},{"../src/transforms/sort":1170}],36:[function(a,b,c){"use strict";b.exports=a("../src/traces/surface")},{"../src/traces/surface":1145}],37:[function(a,b,c){"use strict";b.exports=a("../src/traces/table")},{"../src/traces/table":1153}],38:[function(a,b,c){"use strict";b.exports=a("../src/traces/violin")},{"../src/traces/violin":1160}],39:[function(a,b,c){"use strict";function d(a,b){function c(b,c,d,f){var g=1/a.clientHeight,h=g*(c-p),i=g*(d-q),k=o.flipX?1:-1,m=o.flipY?1:-1,n=Math.PI*o.rotateSpeed,s=e();if(1&b)f.shift?j.rotate(s,0,0,-h*n):j.rotate(s,k*n*h,-m*n*i,0);else if(2&b)j.pan(s,-o.translateSpeed*h*l,o.translateSpeed*i*l,0);else if(4&b){var t=o.zoomSpeed*i/window.innerHeight*(s-j.lastT())*50;j.pan(s,0,0,l*(Math.exp(t)-1))}p=c,q=d,r=f}a=a||document.body,b=b||{};var d=[.01,1/0];"distanceLimits"in b&&(d[0]=b.distanceLimits[0],d[1]=b.distanceLimits[1]),"zoomMin"in b&&(d[0]=b.zoomMin),"zoomMax"in b&&(d[1]=b.zoomMax);var j=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:d}),k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,m=a.clientWidth,n=a.clientHeight,o={view:j,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:j.modes,tick:function(){var b=e(),c=this.delay;j.idle(b-c),j.flush(b-(100+2*c));var d=b-2*c;j.recalcMatrix(d);for(var f=!0,g=j.computedMatrix,h=0;h<16;++h)f=f&&k[h]===g[h],k[h]=g[h];var i=a.clientWidth===m&&a.clientHeight===n;return m=a.clientWidth,n=a.clientHeight,f?!i:(l=Math.exp(j.computedRadius[0]),!0)},lookAt:function(a,b,c){j.lookAt(j.lastT(),a,b,c)},rotate:function(a,b,c){j.rotate(j.lastT(),a,b,c)},pan:function(a,b,c){j.pan(j.lastT(),a,b,c)},translate:function(a,b,c){j.translate(j.lastT(),a,b,c)}};Object.defineProperties(o,{matrix:{get:function(){return j.computedMatrix},set:function(a){return j.setMatrix(j.lastT(),a),j.computedMatrix},enumerable:!0},mode:{get:function(){return j.getMode()},set:function(a){return j.setMode(a),j.getMode()},enumerable:!0},center:{get:function(){return j.computedCenter},set:function(a){return j.lookAt(j.lastT(),a),j.computedCenter},enumerable:!0},eye:{get:function(){return j.computedEye},set:function(a){return j.lookAt(j.lastT(),null,a),j.computedEye},enumerable:!0},up:{get:function(){return j.computedUp},set:function(a){return j.lookAt(j.lastT(),null,null,a),j.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(a){return j.setDistance(j.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return j.getDistanceLimits(d)},set:function(a){
return j.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var p=0,q=0,r={shift:!1,control:!1,alt:!1,meta:!1};return g(a,c),a.addEventListener("touchstart",function(b){var d=i(b.changedTouches[0],a);c(0,d[0],d[1],r),c(1,d[0],d[1],r)}),a.addEventListener("touchmove",function(b){var d=i(b.changedTouches[0],a);c(1,d[0],d[1],r)}),a.addEventListener("touchend",function(b){i(b.changedTouches[0],a);c(0,p,q,r)}),h(a,function(a,b,c){var d=o.flipX?1:-1,f=o.flipY?1:-1,g=e();if(Math.abs(a)>Math.abs(b))j.rotate(g,0,0,-a*d*Math.PI*o.rotateSpeed/window.innerWidth);else{var h=o.zoomSpeed*f*b/window.innerHeight*(g-j.lastT())/100;j.pan(g,0,0,l*(Math.exp(h)-1))}},!0),o}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel"),i=a("mouse-event-offset")},{"3d-view":40,"mouse-change":443,"mouse-event-offset":444,"mouse-wheel":446,"right-now":509}],40:[function(a,b,c){"use strict";function d(a,b){this._controllerNames=Object.keys(a),this._controllerList=this._controllerNames.map(function(b){return a[b]}),this._mode=b,this._active=a[b],this._active||(this._mode="turntable",this._active=a.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function e(a){a=a||{};var b=a.eye||[0,0,1],c=a.center||[0,0,0],e=a.up||[0,1,0],i=a.distanceLimits||[0,1/0],j=a.mode||"turntable",k=f(),l=g(),m=h();return k.setDistanceLimits(i[0],i[1]),k.lookAt(0,b,c,e),l.setDistanceLimits(i[0],i[1]),l.lookAt(0,b,c,e),m.setDistanceLimits(i[0],i[1]),m.lookAt(0,b,c,e),new d({turntable:k,orbit:l,matrix:m},j)}b.exports=e;var f=a("turntable-camera-controller"),g=a("orbit-camera-controller"),h=a("matrix-camera-controller"),i=d.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(a){for(var b=a[0],c=[],d=0;d<a[1];++d)c.push("a"+d);var e="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+a[0]+"("+c.join()+")}";i[b]=Function.apply(null,c.concat(e))}),i.recalcMatrix=function(a){this._active.recalcMatrix(a)},i.getDistance=function(a){return this._active.getDistance(a)},i.getDistanceLimits=function(a){return this._active.getDistanceLimits(a)},i.lastT=function(){return this._active.lastT()},i.setMode=function(a){if(a!==this._mode){var b=this._controllerNames.indexOf(a);if(!(b<0)){var c=this._active,d=this._controllerList[b],e=Math.max(c.lastT(),d.lastT());c.recalcMatrix(e),d.setMatrix(e,c.computedMatrix),this._active=d,this._mode=a,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},{"matrix-camera-controller":441,"orbit-camera-controller":464,"turntable-camera-controller":551}],41:[function(b,c,d){!function(e,f){"object"==typeof d&&void 0!==c?f(d,b("d3-array"),b("d3-collection"),b("d3-interpolate")):"function"==typeof a&&a.amd?a(["exports","d3-array","d3-collection","d3-interpolate"],f):f(e.d3=e.d3||{},e.d3,e.d3,e.d3)}(this,function(a,b,c,d){"use strict";var e=function(){function a(){q.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),r.forEach(function(a,b){var c=a.source,d=a.target;"number"==typeof c&&(c=a.source=q[a.source]),"number"==typeof d&&(d=a.target=q[a.target]),a.originalIndex=b,c.sourceLinks.push(a),d.targetLinks.push(a)})}function e(){q.forEach(function(a){a.value=Math.max(b.sum(a.sourceLinks,l),b.sum(a.targetLinks,l))})}function f(){for(var a,b=q,c=0;b.length;)a=[],b.forEach(function(b){b.x=c,b.dx=n,b.sourceLinks.forEach(function(b){a.indexOf(b.target)<0&&a.push(b.target)})}),b=a,++c;g(c),h((p[0]-n)/(c-1))}function g(a){q.forEach(function(b){b.sourceLinks.length||(b.x=a-1)})}function h(a){q.forEach(function(b){b.x*=a})}function i(a){function d(){f.forEach(function(a){var b,c,d,f=0,g=a.length;for(a.sort(e),d=0;d<g;++d)b=a[d],c=f-b.y,c>0&&(b.y+=c),f=b.y+b.dy+o;if((c=f-o-p[1])>0)for(f=b.y-=c,d=g-2;d>=0;--d)b=a[d],c=b.y+b.dy+o-f,c>0&&(b.y-=c),f=b.y})}function e(a,b){return a.y-b.y}var f=c.nest().key(function(a){return a.x}).sortKeys(b.ascending).entries(q).map(function(a){return a.values});!function(){var a=b.min(f,function(a){return(p[1]-(a.length-1)*o)/b.sum(a,l)});f.forEach(function(b){b.forEach(function(b,c){b.y=c,b.dy=b.value*a})}),r.forEach(function(b){b.dy=b.value*a})}(),d();for(var g=1;a>0;--a)!function(a){function c(a){return k(a.target)*a.value}f.slice().reverse().forEach(function(d){d.forEach(function(d){if(d.sourceLinks.length){var e=b.sum(d.sourceLinks,c)/b.sum(d.sourceLinks,l);d.y+=(e-k(d))*a}})})}(g*=.99),d(),function(a){function c(a){return k(a.source)*a.value}f.forEach(function(d){d.forEach(function(d){if(d.targetLinks.length){var e=b.sum(d.targetLinks,c)/b.sum(d.targetLinks,l);d.y+=(e-k(d))*a}})})}(g),d()}function j(){function a(a,b){return a.source.y-b.source.y||a.originalIndex-b.originalIndex}function b(a,b){return a.target.y-b.target.y||a.originalIndex-b.originalIndex}q.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),q.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function k(a){return a.y+a.dy/2}function l(a){return a.value}var m={},n=24,o=8,p=[1,1],q=[],r=[];return m.nodeWidth=function(a){return arguments.length?(n=+a,m):n},m.nodePadding=function(a){return arguments.length?(o=+a,m):o},m.nodes=function(a){return arguments.length?(q=a,m):q},m.links=function(a){return arguments.length?(r=a,m):r},m.size=function(a){return arguments.length?(p=a,m):p},m.layout=function(b){return a(),e(),f(),i(b),j(),m},m.relayout=function(){return j(),m},m.link=function(){function a(a){var c=a.source.x+a.source.dx,e=a.target.x,f=d.interpolateNumber(c,e),g=f(b),h=f(1-b),i=a.source.y+a.sy,j=i+a.dy,k=a.target.y+a.ty,l=k+a.dy;return"M"+c+","+i+"C"+g+","+i+" "+h+","+k+" "+e+","+k+"L"+e+","+l+"C"+h+","+l+" "+g+","+j+" "+c+","+j+"Z"}var b=.5;return a.curvature=function(c){return arguments.length?(b=+c,a):b},a},m};a.sankey=e,Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":120,"d3-collection":121,"d3-interpolate":125}],42:[function(a,b,c){"use strict";function d(a){var b=h.get(a),c=b&&(b._triangleBuffer.handle||b._triangleBuffer.buffer);if(!c||!a.isBuffer(c)){var d=f(a,new Float32Array([-1,-1,-1,4,4,-1]));b=g(a,[{buffer:d,type:a.FLOAT,size:2}]),b._triangleBuffer=d,h.set(a,b)}b.bind(),a.drawArrays(a.TRIANGLES,0,3),b.unbind()}var e="undefined"==typeof WeakMap?a("weak-map"):WeakMap,f=a("gl-buffer"),g=a("gl-vao"),h=new e;b.exports=d},{"gl-buffer":165,"gl-vao":259,"weak-map":573}],43:[function(a,b,c){function d(a){var b=0,c=0,d=0,e=0;return a.map(function(a){a=a.slice();var f=a[0],g=f.toUpperCase();if(f!=g)switch(a[0]=g,f){case"a":a[6]+=d,a[7]+=e;break;case"v":a[1]+=e;break;case"h":a[1]+=d;break;default:for(var h=1;h<a.length;)a[h++]+=d,a[h++]+=e}switch(g){case"Z":d=b,e=c;break;case"H":d=a[1];break;case"V":e=a[1];break;case"M":d=b=a[1],e=c=a[2];break;default:d=a[a.length-2],e=a[a.length-1]}return a})}b.exports=d},{}],44:[function(a,b,c){function d(a,b,c){b="number"==typeof b?b:1,c=c||": ";var d=a.split(/\r?\n/),f=String(d.length+b-1).length;return d.map(function(a,d){var g=d+b,h=String(g).length;return e(g,f-h)+c+a}).join("\n")}var e=a("pad-left");b.exports=d},{"pad-left":465}],45:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(b+1),d=0;d<a.length;++d)c[d]=a[d];for(var d=0;d<=a.length;++d){for(var e=a.length;e<=b;++e){for(var g=new Array(b),h=0;h<b;++h)g[h]=Math.pow(e+1-d,h);c[e]=g}if(f.apply(void 0,c))return!0}return!1}function e(a){var b=a.length;if(0===b)return[];if(1===b)return[0];for(var c=a[0].length,e=[a[0]],f=[0],g=1;g<b;++g)if(e.push(a[g]),d(e,c)){if(f.push(g),f.length===c+1)return f}else e.pop();return f}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":515}],46:[function(a,b,c){"use strict";function d(a,b){return e(b).filter(function(c){for(var d=new Array(c.length),e=0;e<c.length;++e)d[e]=b[c[e]];return f(d)*a<1})}b.exports=d;var e=a("delaunay-triangulate"),f=a("circumradius")},{circumradius:92,"delaunay-triangulate":130}],47:[function(a,b,c){function d(a,b){return f(e(a,b))}b.exports=d;var e=a("alpha-complex"),f=a("simplicial-complex-boundary")},{"alpha-complex":46,"simplicial-complex-boundary":523}],48:[function(a,b,c){"use strict";function d(a,b){if(!a||null==a.length)throw Error("Argument should be an array");b=null==b?1:Math.floor(b);for(var c=Array(2*b),d=0;d<b;d++){for(var e=-1/0,f=1/0,g=d,h=a.length;g<h;g+=b)a[g]>e&&(e=a[g]),a[g]<f&&(f=a[g]);c[d]=f,c[b+d]=e}return c}b.exports=d},{}],49:[function(a,b,c){"use strict";function d(a,b,c){if(!a||null==a.length)throw Error("Argument should be an array");null==b&&(b=1),null==c&&(c=e(a,b));for(var d=0;d<b;d++){var f=c[b+d],g=c[d],h=d,i=a.length;if(f===1/0&&g===-1/0)for(h=d;h<i;h+=b)a[h]=a[h]===f?1:a[h]===g?0:.5;else if(f===1/0)for(h=d;h<i;h+=b)a[h]=a[h]===f?1:0;else if(g===-1/0)for(h=d;h<i;h+=b)a[h]=a[h]===g?0:1;else{var j=f-g;for(h=d;h<i;h+=b)a[h]=0===j?.5:(a[h]-g)/j}}return a}var e=a("array-bounds");b.exports=d},{"array-bounds":48}],50:[function(a,b,c){"use strict";b.exports=function(){function a(a){return!Array.isArray(a)&&null!==a&&"object"==typeof a}function b(a,b,c){for(var d=(b-a)/Math.max(c-1,1),e=[],f=0;f<c;f++)e.push(a+f*d);return e}function c(){for(var a=[].slice.call(arguments),b=a.map(function(a){return a.length}),c=Math.min.apply(null,b),d=[],e=0;e<c;e++){d[e]=[];for(var f=0;f<a.length;++f)d[e][f]=a[f][e]}return d}function d(a,b,c){for(var d=Math.min.apply(null,[a.length,b.length,c.length]),e=[],f=0;f<d;f++)e.push([a[f],b[f],c[f]]);return e}function e(a){function b(a){for(var d=0;d<a.length;d++)Array.isArray(a[d])?b(a[d],c):c+=a[d]}var c=0;return b(a,c),c}function f(a){for(var b=[],c=0;c<a.length;++c){b[c]=[];for(var d=0;d<a[c].length;++d)b[c][d]=a[c][d]}return b}function g(a){for(var b=[],c=0;c<a.length;++c)b[c]=a[c];return b}function h(a,b){if(a.length!==b.length)return!1;for(var c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function i(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3])),!b)for(var e=0;e<3;++e)c[e]=c[e]/255;return c}function j(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3]),d[4]?c[3]=parseFloat(d[4]):c[3]=1),!b)for(var e=0;e<3;++e)c[e]=c[e]/255;return c}var k={},l=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,m=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return k.isPlainObject=a,k.linspace=b,k.zip3=d,k.sum=e,k.zip=c,k.isEqual=h,k.copy2D=f,k.copy1D=g,k.str2RgbArray=i,k.str2RgbaArray=j,k}()},{}],51:[function(a,b,c){(function(c){"use strict";function d(a,b){if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0}function e(a){return c.Buffer&&"function"==typeof c.Buffer.isBuffer?c.Buffer.isBuffer(a):!(null==a||!a._isBuffer)}function f(a){return Object.prototype.toString.call(a)}function g(a){return!e(a)&&("function"==typeof c.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):!!a&&(a instanceof DataView||!!(a.buffer&&a.buffer instanceof ArrayBuffer))))}function h(a){if(u.isFunction(a)){if(x)return a.name;var b=a.toString(),c=b.match(z);return c&&c[1]}}function i(a,b){return"string"==typeof a?a.length<b?a:a.slice(0,b):a}function j(a){if(x||!u.isFunction(a))return u.inspect(a);var b=h(a);return"[Function"+(b?": "+b:"")+"]"}function k(a){return i(j(a.actual),128)+" "+a.operator+" "+i(j(a.expected),128)}function l(a,b,c,d,e){throw new y.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function m(a,b){a||l(a,!0,b,"==",y.ok)}function n(a,b,c,h){if(a===b)return!0;if(e(a)&&e(b))return 0===d(a,b);if(u.isDate(a)&&u.isDate(b))return a.getTime()===b.getTime();if(u.isRegExp(a)&&u.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase;if(null!==a&&"object"==typeof a||null!==b&&"object"==typeof b){if(g(a)&&g(b)&&f(a)===f(b)&&!(a instanceof Float32Array||a instanceof Float64Array))return 0===d(new Uint8Array(a.buffer),new Uint8Array(b.buffer));if(e(a)!==e(b))return!1;h=h||{actual:[],expected:[]};var i=h.actual.indexOf(a);return-1!==i&&i===h.expected.indexOf(b)||(h.actual.push(a),h.expected.push(b),p(a,b,c,h))}return c?a===b:a==b}function o(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function p(a,b,c,d){if(null===a||void 0===a||null===b||void 0===b)return!1;if(u.isPrimitive(a)||u.isPrimitive(b))return a===b;if(c&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;var e=o(a),f=o(b);if(e&&!f||!e&&f)return!1;if(e)return a=w.call(a),b=w.call(b),n(a,b,c);var g,h,i=A(a),j=A(b);if(i.length!==j.length)return!1;for(i.sort(),j.sort(),h=i.length-1;h>=0;h--)if(i[h]!==j[h])return!1;for(h=i.length-1;h>=0;h--)if(g=i[h],!n(a[g],b[g],c,d))return!1;return!0}function q(a,b,c){n(a,b,!0)&&l(a,b,c,"notDeepStrictEqual",q)}function r(a,b){if(!a||!b)return!1;if("[object RegExp]"==Object.prototype.toString.call(b))return b.test(a);try{if(a instanceof b)return!0}catch(a){}return!Error.isPrototypeOf(b)&&!0===b.call({},a)}function s(a){var b;try{a()}catch(a){b=a}return b}function t(a,b,c,d){var e;if("function"!=typeof b)throw new TypeError('"block" argument must be a function');"string"==typeof c&&(d=c,c=null),e=s(b),d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&l(e,c,"Missing expected exception"+d);var f="string"==typeof d,g=!a&&u.isError(e),h=!a&&e&&!c;if((g&&f&&r(e,c)||h)&&l(e,c,"Got unwanted exception"+d),a&&e&&c&&!r(e,c)||!a&&e)throw e}var u=a("util/"),v=Object.prototype.hasOwnProperty,w=Array.prototype.slice,x=function(){return"foo"===function(){}.name}(),y=b.exports=m,z=/\s*function\s+([^\(\s]*)\s*/;y.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=k(this),this.generatedMessage=!0);var b=a.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=h(b),f=d.indexOf("\n"+e);if(f>=0){var g=d.indexOf("\n",f+1);d=d.substring(g+1)}this.stack=d}}},u.inherits(y.AssertionError,Error),y.fail=l,y.ok=m,y.equal=function(a,b,c){a!=b&&l(a,b,c,"==",y.equal)},y.notEqual=function(a,b,c){a==b&&l(a,b,c,"!=",y.notEqual)},y.deepEqual=function(a,b,c){n(a,b,!1)||l(a,b,c,"deepEqual",y.deepEqual)},y.deepStrictEqual=function(a,b,c){n(a,b,!0)||l(a,b,c,"deepStrictEqual",y.deepStrictEqual)},y.notDeepEqual=function(a,b,c){n(a,b,!1)&&l(a,b,c,"notDeepEqual",y.notDeepEqual)},y.notDeepStrictEqual=q,y.strictEqual=function(a,b,c){a!==b&&l(a,b,c,"===",y.strictEqual)},y.notStrictEqual=function(a,b,c){a===b&&l(a,b,c,"!==",y.notStrictEqual)},y.throws=function(a,b,c){t(!0,a,b,c)},y.doesNotThrow=function(a,b,c){t(!1,a,b,c)},y.ifError=function(a){if(a)throw a};var A=Object.keys||function(a){var b=[];for(var c in a)v.call(a,c)&&b.push(c);return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":563}],52:[function(a,b,c){b.exports=function(a){return atob(a)}},{}],53:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0;c<a.length;++c)b+=a[c];return b}function e(a,b){for(var c=b.length,e=new Array(c+1),g=0;g<c;++g){for(var h=new Array(c+1),i=0;i<=c;++i)h[i]=a[i][g];e[g]=h}e[c]=new Array(c+1);for(var g=0;g<=c;++g)e[c][g]=1;for(var j=new Array(c+1),g=0;g<c;++g)j[g]=b[g];j[c]=1;var k=f(e,j),l=d(k[c+1]);0===l&&(l=1);for(var m=new Array(c+1),g=0;g<=c;++g)m[g]=d(k[g])/l;return m}b.exports=e;var f=a("robust-linear-solve")},{"robust-linear-solve":514}],54:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":64}],55:[function(a,b,c){"use strict";function d(a,b){return a[0].mul(b[1]).cmp(b[0].mul(a[1]))}b.exports=d},{}],56:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]),a[1].mul(b[0]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":64}],57:[function(a,b,c){"use strict";function d(a,b){if(e(a))return b?j(a,d(b)):[a[0].clone(),a[1].clone()];var c,k,l=0;if(f(a))c=a.clone();else if("string"==typeof a)c=h(a);else{if(0===a)return[g(0),g(1)];if(a===Math.floor(a))c=g(a);else{for(;a!==Math.floor(a);)a*=Math.pow(2,256),l-=256;c=g(a)}}if(e(b))c.mul(b[1]),k=b[0].clone();else if(f(b))k=b.clone();else if("string"==typeof b)k=h(b);else if(b)if(b===Math.floor(b))k=g(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),l+=256;k=g(b)}else k=g(1);return l>0?c=c.ushln(l):l<0&&(k=k.ushln(-l)),i(c,k)}var e=a("./is-rat"),f=a("./lib/is-bn"),g=a("./lib/num-to-bn"),h=a("./lib/str-to-bn"),i=a("./lib/rationalize"),j=a("./div");b.exports=d},{"./div":56,"./is-rat":58,"./lib/is-bn":62,"./lib/num-to-bn":63,"./lib/rationalize":64,"./lib/str-to-bn":65}],58:[function(a,b,c){"use strict";function d(a){return Array.isArray(a)&&2===a.length&&e(a[0])&&e(a[1])}var e=a("./lib/is-bn");b.exports=d},{"./lib/is-bn":62}],59:[function(a,b,c){"use strict";function d(a){return a.cmp(new e(0))}var e=a("bn.js");b.exports=d},{"bn.js":73}],60:[function(a,b,c){"use strict";function d(a){var b=a.length,c=a.words,d=0;if(1===b)d=c[0];else if(2===b)d=c[0]+67108864*c[1];else for(var f=0;f<b;f++){var g=c[f];d+=g*Math.pow(67108864,f)}return e(a)*d}var e=a("./bn-sign");b.exports=d},{"./bn-sign":59}],61:[function(a,b,c){"use strict";function d(a){var b=f(e.lo(a));if(b<32)return b;var c=f(e.hi(a));return c>20?52:c+32}var e=a("double-bits"),f=a("bit-twiddle").countTrailingZeros;b.exports=d},{"bit-twiddle":71,"double-bits":131}],62:[function(a,b,c){"use strict";function d(a){return a&&"object"==typeof a&&Boolean(a.words)}a("bn.js");b.exports=d},{"bn.js":73}],63:[function(a,b,c){"use strict";function d(a){var b=f.exponent(a);return b<52?new e(a):new e(a*Math.pow(2,52-b)).ushln(b-52)}var e=a("bn.js"),f=a("double-bits");b.exports=d},{"bn.js":73,"double-bits":131}],64:[function(a,b,c){"use strict";function d(a,b){var c=f(a),d=f(b);if(0===c)return[e(0),e(1)];if(0===d)return[e(0),e(0)];d<0&&(a=a.neg(),b=b.neg());var g=a.gcd(b);return g.cmpn(1)?[a.div(g),b.div(g)]:[a,b]}var e=a("./num-to-bn"),f=a("./bn-sign");b.exports=d},{"./bn-sign":59,"./num-to-bn":63}],65:[function(a,b,c){"use strict";function d(a){return new e(a)}var e=a("bn.js");b.exports=d},{"bn.js":73}],66:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[0]),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":64}],67:[function(a,b,c){"use strict";function d(a){return e(a[0])*e(a[1])}var e=a("./lib/bn-sign");b.exports=d},{"./lib/bn-sign":59}],68:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":64}],69:[function(a,b,c){"use strict";function d(a){var b=a[0],c=a[1];if(0===b.cmpn(0))return 0;var d=b.abs().divmod(c.abs()),g=d.div,h=e(g),i=d.mod,j=b.negative!==c.negative?-1:1;if(0===i.cmpn(0))return j*h;if(h){var k=f(h)+4,l=e(i.ushln(k).divRound(c));return j*(h+l*Math.pow(2,-k))}var m=c.bitLength()-i.bitLength()+53,l=e(i.ushln(m).divRound(c));return m<1023?j*l*Math.pow(2,-m):(l*=Math.pow(2,-1023),j*l*Math.pow(2,1023-m))}var e=a("./lib/bn-to-num"),f=a("./lib/ctz");b.exports=d},{"./lib/bn-to-num":60,"./lib/ctz":61}],70:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=["function ",a,"(a,l,h,",d.join(","),"){",f?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",e?".get(m)":"[m]"];return f?b.indexOf("c")<0?g.push(";if(x===y){return m}else if(x<=y){"):g.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):g.push(";if(",b,"){i=m;"),c?g.push("l=m+1}else{h=m-1}"):g.push("h=m-1}else{l=m+1}"),g.push("}"),f?g.push("return -1};"):g.push("return i};"),g.join("")}function e(a,b,c,e){return new Function([d("A","x"+a+"y",b,["y"],!1,e),d("B","x"+a+"y",b,["y"],!0,e),d("P","c(x,y)"+a+"0",b,["y","c"],!1,e),d("Q","c(x,y)"+a+"0",b,["y","c"],!0,e),"function dispatchBsearch",c,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",c].join(""))()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],71:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}c.INT_BITS=32,c.INT_MAX=2147483647,c.INT_MIN=-1<<31,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>31;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,(b|=c)|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,16843009*((a=(858993459&a)+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var e=new Array(256);!function(a){for(var b=0;b<256;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(e),c.reverse=function(a){return e[255&a]<<24|e[a>>>8&255]<<16|e[a>>>16&255]<<8|e[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),(a=65535&(a|a>>>16))<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),(a=1023&(a|a>>>16))<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],72:[function(a,b,c){"use strict";function d(a,b){b||(b={});var c,d,f,i,j,k,l,m,n,o,p,q=null==b.cutoff?.25:b.cutoff,r=null==b.radius?8:b.radius,s=b.channel||0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!b.width||!b.height)throw Error("For raw data width and height should be provided by options");c=b.width,d=b.height,i=a,k=b.stride?b.stride:Math.floor(a.length/c/d)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(m=a,l=m.getContext("2d"),c=m.width,d=m.height,n=l.getImageData(0,0,c,d),i=n.data,k=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(m=a.canvas,l=a,c=m.width,d=m.height,n=l.getImageData(0,0,c,d),i=n.data,k=4):window.ImageData&&a instanceof window.ImageData&&(n=a,c=a.width,d=a.height,i=n.data,k=4);if(f=Math.max(c,d),window.Uint8ClampedArray&&i instanceof window.Uint8ClampedArray||window.Uint8Array&&i instanceof window.Uint8Array)for(j=i,i=Array(c*d),o=0,p=j.length;o<p;o++)i[o]=j[o*k+s]/255;else if(1!==k)throw Error("Raw data can have only 1 value per pixel");var t=Array(c*d),u=Array(c*d),v=Array(f),w=Array(f),x=Array(f+1),y=Array(f);for(o=0,p=c*d;o<p;o++){var z=i[o];t[o]=1===z?0:0===z?h:Math.pow(Math.max(0,.5-z),2),u[o]=1===z?h:0===z?0:Math.pow(Math.max(0,z-.5),2)}e(t,c,d,v,w,y,x),e(u,c,d,v,w,y,x);var A=window.Float32Array?new Float32Array(c*d):new Array(c*d);for(o=0,p=c*d;o<p;o++)A[o]=g(1-((t[o]-u[o])/r+q),0,1);return A}function e(a,b,c,d,e,g,h){for(var i=0;i<b;i++){for(var j=0;j<c;j++)d[j]=a[j*b+i];for(f(d,e,g,h,c),j=0;j<c;j++)a[j*b+i]=e[j]}for(j=0;j<c;j++){for(i=0;i<b;i++)d[i]=a[j*b+i];for(f(d,e,g,h,b),i=0;i<b;i++)a[j*b+i]=Math.sqrt(e[i])}}function f(a,b,c,d,e){c[0]=0,d[0]=-h,d[1]=+h;for(var f=1,g=0;f<e;f++){for(var i=(a[f]+f*f-(a[c[g]]+c[g]*c[g]))/(2*f-2*c[g]);i<=d[g];)g--,i=(a[f]+f*f-(a[c[g]]+c[g]*c[g]))/(2*f-2*c[g]);g++,c[g]=f,d[g]=i,d[g+1]=+h}for(f=0,g=0;f<e;f++){for(;d[g+1]<f;)g++;b[f]=(f-c[g])*(f-c[g])+a[c[g]]}}var g=a("clamp");b.exports=d;var h=1e20},{clamp:93}],73:[function(a,b,c){!function(b,c){"use strict";function d(a,b){if(!a)throw new Error(b||"Assertion failed")}function e(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function f(a,b,c){if(f.isBN(a))return a;this.negative=0,this.words=null,this.length=0,this.red=null,null!==a&&("le"!==b&&"be"!==b||(c=b,b=10),this._init(a||0,b||10,c||"be"))}function g(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;f<e;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&g<=54?g-49+10:g>=17&&g<=22?g-17+10:15&g}return d}function h(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;g<f;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function i(a){for(var b=new Array(a.bitLength()),c=0;c<b.length;c++){var d=c/26|0,e=c%26;b[c]=(a.words[d]&1<<e)>>>e}return b}function j(a,b,c){c.negative=b.negative^a.negative;var d=a.length+b.length|0;c.length=d,d=d-1|0;var e=0|a.words[0],f=0|b.words[0],g=e*f,h=67108863&g,i=g/67108864|0;c.words[0]=h;for(var j=1;j<d;j++){for(var k=i>>>26,l=67108863&i,m=Math.min(j,b.length-1),n=Math.max(0,j-a.length+1);n<=m;n++){var o=j-n|0;e=0|a.words[o],f=0|b.words[n],g=e*f+l,k+=g/67108864|0,l=67108863&g}c.words[j]=0|l,i=0|k}return 0!==i?c.words[j]=0|i:c.length--,c.strip()}function k(a,b,c){c.negative=b.negative^a.negative,c.length=a.length+b.length;for(var d=0,e=0,f=0;f<c.length-1;f++){var g=e;e=0;for(var h=67108863&d,i=Math.min(f,b.length-1),j=Math.max(0,f-a.length+1);j<=i;j++){var k=f-j,l=0|a.words[k],m=0|b.words[j],n=l*m,o=67108863&n;g=g+(n/67108864|0)|0,o=o+h|0,h=67108863&o,g=g+(o>>>26)|0,e+=g>>>26,g&=67108863}c.words[f]=h,d=g,g=e}return 0!==d?c.words[f]=d:c.length--,c.strip()}function l(a,b,c){return(new m).mulp(a,b,c)}function m(a,b){this.x=a,this.y=b}function n(a,b){this.name=a,this.p=new f(b,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function o(){n.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){n.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){n.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){n.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function s(a){if("string"==typeof a){var b=f._prime(a);this.m=b.p,this.prime=b}else d(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}function t(a){s.call(this,a),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof b?b.exports=f:c.BN=f,f.BN=f,f.wordSize=26;var u;try{u=a("buffer").Buffer}catch(a){}f.isBN=function(a){return a instanceof f||null!==a&&"object"==typeof a&&a.constructor.wordSize===f.wordSize&&Array.isArray(a.words)},f.max=function(a,b){return a.cmp(b)>0?a:b},f.min=function(a,b){return a.cmp(b)<0?a:b},f.prototype._init=function(a,b,c){if("number"==typeof a)return this._initNumber(a,b,c);if("object"==typeof a)return this._initArray(a,b,c);"hex"===b&&(b=16),d(b===(0|b)&&b>=2&&b<=36),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.negative=1),this.strip(),"le"===c&&this._initArray(this.toArray(),b,c)},f.prototype._initNumber=function(a,b,c){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(d(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===c&&this._initArray(this.toArray(),b,c)},f.prototype._initArray=function(a,b,c){if(d("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f,g,h=0;if("be"===c)for(e=a.length-1,f=0;e>=0;e-=3)g=a[e]|a[e-1]<<8|a[e-2]<<16,this.words[f]|=g<<h&67108863,this.words[f+1]=g>>>26-h&67108863,(h+=24)>=26&&(h-=26,f++);else if("le"===c)for(e=0,f=0;e<a.length;e+=3)g=a[e]|a[e+1]<<8|a[e+2]<<16,this.words[f]|=g<<h&67108863,this.words[f+1]=g>>>26-h&67108863,(h+=24)>=26&&(h-=26,f++);return this.strip()},f.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var d,e,f=0;for(c=a.length-6,d=0;c>=b;c-=6)e=g(a,c,c+6),this.words[d]|=e<<f&67108863,this.words[d+1]|=e>>>26-f&4194303,(f+=24)>=26&&(f-=26,d++);c+6!==b&&(e=g(a,b,c+6),this.words[d]|=e<<f&67108863,this.words[d+1]|=e>>>26-f&4194303),this.strip()},f.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;e<=67108863;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,g=f%d,i=Math.min(f,f-g)+c,j=0,k=c;k<i;k+=d)j=h(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==g){var l=1;for(j=h(a,k,a.length,b),k=0;k<g;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},f.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.negative=this.negative,a.red=this.red},f.prototype.clone=function(){var a=new f(null);return this.copy(a),a},f.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},f.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}
;var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(a,b){a=a||10,b=0|b||1;var c;if(16===a||"hex"===a){c="";for(var e=0,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,c=0!==f||g!==this.length-1?v[6-i.length]+i+c:i+c,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(c=f.toString(16)+c);c.length%b!=0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}if(a===(0|a)&&a>=2&&a<=36){var j=w[a],k=x[a];c="";var l=this.clone();for(l.negative=0;!l.isZero();){var m=l.modn(k).toString(a);l=l.idivn(k),c=l.isZero()?m+c:v[j-m.length]+m+c}for(this.isZero()&&(c="0"+c);c.length%b!=0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}d(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(a,b){return d(void 0!==u),this.toArrayLike(u,a,b)},f.prototype.toArray=function(a,b){return this.toArrayLike(Array,a,b)},f.prototype.toArrayLike=function(a,b,c){var e=this.byteLength(),f=c||Math.max(1,e);d(e<=f,"byte array longer than desired length"),d(f>0,"Requested array length <= 0"),this.strip();var g,h,i="le"===b,j=new a(f),k=this.clone();if(i){for(h=0;!k.isZero();h++)g=k.andln(255),k.iushrn(8),j[h]=g;for(;h<f;h++)j[h]=0}else{for(h=0;h<f-e;h++)j[h]=0;for(h=0;!k.isZero();h++)g=k.andln(255),k.iushrn(8),j[f-h-1]=g}return j},Math.clz32?f.prototype._countBits=function(a){return 32-Math.clz32(a)}:f.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},f.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return 0==(8191&b)&&(c+=13,b>>>=13),0==(127&b)&&(c+=7,b>>>=7),0==(15&b)&&(c+=4,b>>>=4),0==(3&b)&&(c+=2,b>>>=2),0==(1&b)&&c++,c},f.prototype.bitLength=function(){var a=this.words[this.length-1],b=this._countBits(a);return 26*(this.length-1)+b},f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},f.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return 0!==this.negative},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},f.prototype.ior=function(a){return d(0==(this.negative|a.negative)),this.iuor(a)},f.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},f.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},f.prototype.iuand=function(a){var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this.strip()},f.prototype.iand=function(a){return d(0==(this.negative|a.negative)),this.iuand(a)},f.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},f.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},f.prototype.iuxor=function(a){var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},f.prototype.ixor=function(a){return d(0==(this.negative|a.negative)),this.iuxor(a)},f.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},f.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},f.prototype.inotn=function(a){d("number"==typeof a&&a>=0);var b=0|Math.ceil(a/26),c=a%26;this._expand(b),c>0&&b--;for(var e=0;e<b;e++)this.words[e]=67108863&~this.words[e];return c>0&&(this.words[e]=~this.words[e]&67108863>>26-c),this.strip()},f.prototype.notn=function(a){return this.clone().inotn(a)},f.prototype.setn=function(a,b){d("number"==typeof a&&a>=0);var c=a/26|0,e=a%26;return this._expand(c+1),this.words[c]=b?this.words[c]|1<<e:this.words[c]&~(1<<e),this.strip()},f.prototype.iadd=function(a){var b;if(0!==this.negative&&0===a.negative)return this.negative=0,b=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,b=this.isub(a),a.negative=1,b._normSign();var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++)b=(0|c.words[f])+(0|d.words[f])+e,this.words[f]=67108863&b,e=b>>>26;for(;0!==e&&f<c.length;f++)b=(0|c.words[f])+e,this.words[f]=67108863&b,e=b>>>26;if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},f.prototype.add=function(a){var b;return 0!==a.negative&&0===this.negative?(a.negative=0,b=this.sub(a),a.negative^=1,b):0===a.negative&&0!==this.negative?(this.negative=0,b=a.sub(this),this.negative=1,b):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},f.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var b=this.iadd(a);return a.negative=1,b._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var c=this.cmp(a);if(0===c)return this.negative=0,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++)b=(0|d.words[g])-(0|e.words[g])+f,f=b>>26,this.words[g]=67108863&b;for(;0!==f&&g<d.length;g++)b=(0|d.words[g])+f,f=b>>26,this.words[g]=67108863&b;if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(a){return this.clone().isub(a)};var y=function(a,b,c){var d,e,f,g=a.words,h=b.words,i=c.words,j=0,k=0|g[0],l=8191&k,m=k>>>13,n=0|g[1],o=8191&n,p=n>>>13,q=0|g[2],r=8191&q,s=q>>>13,t=0|g[3],u=8191&t,v=t>>>13,w=0|g[4],x=8191&w,y=w>>>13,z=0|g[5],A=8191&z,B=z>>>13,C=0|g[6],D=8191&C,E=C>>>13,F=0|g[7],G=8191&F,H=F>>>13,I=0|g[8],J=8191&I,K=I>>>13,L=0|g[9],M=8191&L,N=L>>>13,O=0|h[0],P=8191&O,Q=O>>>13,R=0|h[1],S=8191&R,T=R>>>13,U=0|h[2],V=8191&U,W=U>>>13,X=0|h[3],Y=8191&X,Z=X>>>13,$=0|h[4],_=8191&$,aa=$>>>13,ba=0|h[5],ca=8191&ba,da=ba>>>13,ea=0|h[6],fa=8191&ea,ga=ea>>>13,ha=0|h[7],ia=8191&ha,ja=ha>>>13,ka=0|h[8],la=8191&ka,ma=ka>>>13,na=0|h[9],oa=8191&na,pa=na>>>13;c.negative=a.negative^b.negative,c.length=19,d=Math.imul(l,P),e=Math.imul(l,Q),e=e+Math.imul(m,P)|0,f=Math.imul(m,Q);var qa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(qa>>>26)|0,qa&=67108863,d=Math.imul(o,P),e=Math.imul(o,Q),e=e+Math.imul(p,P)|0,f=Math.imul(p,Q),d=d+Math.imul(l,S)|0,e=e+Math.imul(l,T)|0,e=e+Math.imul(m,S)|0,f=f+Math.imul(m,T)|0;var ra=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ra>>>26)|0,ra&=67108863,d=Math.imul(r,P),e=Math.imul(r,Q),e=e+Math.imul(s,P)|0,f=Math.imul(s,Q),d=d+Math.imul(o,S)|0,e=e+Math.imul(o,T)|0,e=e+Math.imul(p,S)|0,f=f+Math.imul(p,T)|0,d=d+Math.imul(l,V)|0,e=e+Math.imul(l,W)|0,e=e+Math.imul(m,V)|0,f=f+Math.imul(m,W)|0;var sa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(sa>>>26)|0,sa&=67108863,d=Math.imul(u,P),e=Math.imul(u,Q),e=e+Math.imul(v,P)|0,f=Math.imul(v,Q),d=d+Math.imul(r,S)|0,e=e+Math.imul(r,T)|0,e=e+Math.imul(s,S)|0,f=f+Math.imul(s,T)|0,d=d+Math.imul(o,V)|0,e=e+Math.imul(o,W)|0,e=e+Math.imul(p,V)|0,f=f+Math.imul(p,W)|0,d=d+Math.imul(l,Y)|0,e=e+Math.imul(l,Z)|0,e=e+Math.imul(m,Y)|0,f=f+Math.imul(m,Z)|0;var ta=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ta>>>26)|0,ta&=67108863,d=Math.imul(x,P),e=Math.imul(x,Q),e=e+Math.imul(y,P)|0,f=Math.imul(y,Q),d=d+Math.imul(u,S)|0,e=e+Math.imul(u,T)|0,e=e+Math.imul(v,S)|0,f=f+Math.imul(v,T)|0,d=d+Math.imul(r,V)|0,e=e+Math.imul(r,W)|0,e=e+Math.imul(s,V)|0,f=f+Math.imul(s,W)|0,d=d+Math.imul(o,Y)|0,e=e+Math.imul(o,Z)|0,e=e+Math.imul(p,Y)|0,f=f+Math.imul(p,Z)|0,d=d+Math.imul(l,_)|0,e=e+Math.imul(l,aa)|0,e=e+Math.imul(m,_)|0,f=f+Math.imul(m,aa)|0;var ua=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ua>>>26)|0,ua&=67108863,d=Math.imul(A,P),e=Math.imul(A,Q),e=e+Math.imul(B,P)|0,f=Math.imul(B,Q),d=d+Math.imul(x,S)|0,e=e+Math.imul(x,T)|0,e=e+Math.imul(y,S)|0,f=f+Math.imul(y,T)|0,d=d+Math.imul(u,V)|0,e=e+Math.imul(u,W)|0,e=e+Math.imul(v,V)|0,f=f+Math.imul(v,W)|0,d=d+Math.imul(r,Y)|0,e=e+Math.imul(r,Z)|0,e=e+Math.imul(s,Y)|0,f=f+Math.imul(s,Z)|0,d=d+Math.imul(o,_)|0,e=e+Math.imul(o,aa)|0,e=e+Math.imul(p,_)|0,f=f+Math.imul(p,aa)|0,d=d+Math.imul(l,ca)|0,e=e+Math.imul(l,da)|0,e=e+Math.imul(m,ca)|0,f=f+Math.imul(m,da)|0;var va=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(va>>>26)|0,va&=67108863,d=Math.imul(D,P),e=Math.imul(D,Q),e=e+Math.imul(E,P)|0,f=Math.imul(E,Q),d=d+Math.imul(A,S)|0,e=e+Math.imul(A,T)|0,e=e+Math.imul(B,S)|0,f=f+Math.imul(B,T)|0,d=d+Math.imul(x,V)|0,e=e+Math.imul(x,W)|0,e=e+Math.imul(y,V)|0,f=f+Math.imul(y,W)|0,d=d+Math.imul(u,Y)|0,e=e+Math.imul(u,Z)|0,e=e+Math.imul(v,Y)|0,f=f+Math.imul(v,Z)|0,d=d+Math.imul(r,_)|0,e=e+Math.imul(r,aa)|0,e=e+Math.imul(s,_)|0,f=f+Math.imul(s,aa)|0,d=d+Math.imul(o,ca)|0,e=e+Math.imul(o,da)|0,e=e+Math.imul(p,ca)|0,f=f+Math.imul(p,da)|0,d=d+Math.imul(l,fa)|0,e=e+Math.imul(l,ga)|0,e=e+Math.imul(m,fa)|0,f=f+Math.imul(m,ga)|0;var wa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(wa>>>26)|0,wa&=67108863,d=Math.imul(G,P),e=Math.imul(G,Q),e=e+Math.imul(H,P)|0,f=Math.imul(H,Q),d=d+Math.imul(D,S)|0,e=e+Math.imul(D,T)|0,e=e+Math.imul(E,S)|0,f=f+Math.imul(E,T)|0,d=d+Math.imul(A,V)|0,e=e+Math.imul(A,W)|0,e=e+Math.imul(B,V)|0,f=f+Math.imul(B,W)|0,d=d+Math.imul(x,Y)|0,e=e+Math.imul(x,Z)|0,e=e+Math.imul(y,Y)|0,f=f+Math.imul(y,Z)|0,d=d+Math.imul(u,_)|0,e=e+Math.imul(u,aa)|0,e=e+Math.imul(v,_)|0,f=f+Math.imul(v,aa)|0,d=d+Math.imul(r,ca)|0,e=e+Math.imul(r,da)|0,e=e+Math.imul(s,ca)|0,f=f+Math.imul(s,da)|0,d=d+Math.imul(o,fa)|0,e=e+Math.imul(o,ga)|0,e=e+Math.imul(p,fa)|0,f=f+Math.imul(p,ga)|0,d=d+Math.imul(l,ia)|0,e=e+Math.imul(l,ja)|0,e=e+Math.imul(m,ia)|0,f=f+Math.imul(m,ja)|0;var xa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(xa>>>26)|0,xa&=67108863,d=Math.imul(J,P),e=Math.imul(J,Q),e=e+Math.imul(K,P)|0,f=Math.imul(K,Q),d=d+Math.imul(G,S)|0,e=e+Math.imul(G,T)|0,e=e+Math.imul(H,S)|0,f=f+Math.imul(H,T)|0,d=d+Math.imul(D,V)|0,e=e+Math.imul(D,W)|0,e=e+Math.imul(E,V)|0,f=f+Math.imul(E,W)|0,d=d+Math.imul(A,Y)|0,e=e+Math.imul(A,Z)|0,e=e+Math.imul(B,Y)|0,f=f+Math.imul(B,Z)|0,d=d+Math.imul(x,_)|0,e=e+Math.imul(x,aa)|0,e=e+Math.imul(y,_)|0,f=f+Math.imul(y,aa)|0,d=d+Math.imul(u,ca)|0,e=e+Math.imul(u,da)|0,e=e+Math.imul(v,ca)|0,f=f+Math.imul(v,da)|0,d=d+Math.imul(r,fa)|0,e=e+Math.imul(r,ga)|0,e=e+Math.imul(s,fa)|0,f=f+Math.imul(s,ga)|0,d=d+Math.imul(o,ia)|0,e=e+Math.imul(o,ja)|0,e=e+Math.imul(p,ia)|0,f=f+Math.imul(p,ja)|0,d=d+Math.imul(l,la)|0,e=e+Math.imul(l,ma)|0,e=e+Math.imul(m,la)|0,f=f+Math.imul(m,ma)|0;var ya=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ya>>>26)|0,ya&=67108863,d=Math.imul(M,P),e=Math.imul(M,Q),e=e+Math.imul(N,P)|0,f=Math.imul(N,Q),d=d+Math.imul(J,S)|0,e=e+Math.imul(J,T)|0,e=e+Math.imul(K,S)|0,f=f+Math.imul(K,T)|0,d=d+Math.imul(G,V)|0,e=e+Math.imul(G,W)|0,e=e+Math.imul(H,V)|0,f=f+Math.imul(H,W)|0,d=d+Math.imul(D,Y)|0,e=e+Math.imul(D,Z)|0,e=e+Math.imul(E,Y)|0,f=f+Math.imul(E,Z)|0,d=d+Math.imul(A,_)|0,e=e+Math.imul(A,aa)|0,e=e+Math.imul(B,_)|0,f=f+Math.imul(B,aa)|0,d=d+Math.imul(x,ca)|0,e=e+Math.imul(x,da)|0,e=e+Math.imul(y,ca)|0,f=f+Math.imul(y,da)|0,d=d+Math.imul(u,fa)|0,e=e+Math.imul(u,ga)|0,e=e+Math.imul(v,fa)|0,f=f+Math.imul(v,ga)|0,d=d+Math.imul(r,ia)|0,e=e+Math.imul(r,ja)|0,e=e+Math.imul(s,ia)|0,f=f+Math.imul(s,ja)|0,d=d+Math.imul(o,la)|0,e=e+Math.imul(o,ma)|0,e=e+Math.imul(p,la)|0,f=f+Math.imul(p,ma)|0,d=d+Math.imul(l,oa)|0,e=e+Math.imul(l,pa)|0,e=e+Math.imul(m,oa)|0,f=f+Math.imul(m,pa)|0;var za=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(za>>>26)|0,za&=67108863,d=Math.imul(M,S),e=Math.imul(M,T),e=e+Math.imul(N,S)|0,f=Math.imul(N,T),d=d+Math.imul(J,V)|0,e=e+Math.imul(J,W)|0,e=e+Math.imul(K,V)|0,f=f+Math.imul(K,W)|0,d=d+Math.imul(G,Y)|0,e=e+Math.imul(G,Z)|0,e=e+Math.imul(H,Y)|0,f=f+Math.imul(H,Z)|0,d=d+Math.imul(D,_)|0,e=e+Math.imul(D,aa)|0,e=e+Math.imul(E,_)|0,f=f+Math.imul(E,aa)|0,d=d+Math.imul(A,ca)|0,e=e+Math.imul(A,da)|0,e=e+Math.imul(B,ca)|0,f=f+Math.imul(B,da)|0,d=d+Math.imul(x,fa)|0,e=e+Math.imul(x,ga)|0,e=e+Math.imul(y,fa)|0,f=f+Math.imul(y,ga)|0,d=d+Math.imul(u,ia)|0,e=e+Math.imul(u,ja)|0,e=e+Math.imul(v,ia)|0,f=f+Math.imul(v,ja)|0,d=d+Math.imul(r,la)|0,e=e+Math.imul(r,ma)|0,e=e+Math.imul(s,la)|0,f=f+Math.imul(s,ma)|0,d=d+Math.imul(o,oa)|0,e=e+Math.imul(o,pa)|0,e=e+Math.imul(p,oa)|0,f=f+Math.imul(p,pa)|0;var Aa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,d=Math.imul(M,V),e=Math.imul(M,W),e=e+Math.imul(N,V)|0,f=Math.imul(N,W),d=d+Math.imul(J,Y)|0,e=e+Math.imul(J,Z)|0,e=e+Math.imul(K,Y)|0,f=f+Math.imul(K,Z)|0,d=d+Math.imul(G,_)|0,e=e+Math.imul(G,aa)|0,e=e+Math.imul(H,_)|0,f=f+Math.imul(H,aa)|0,d=d+Math.imul(D,ca)|0,e=e+Math.imul(D,da)|0,e=e+Math.imul(E,ca)|0,f=f+Math.imul(E,da)|0,d=d+Math.imul(A,fa)|0,e=e+Math.imul(A,ga)|0,e=e+Math.imul(B,fa)|0,f=f+Math.imul(B,ga)|0,d=d+Math.imul(x,ia)|0,e=e+Math.imul(x,ja)|0,e=e+Math.imul(y,ia)|0,f=f+Math.imul(y,ja)|0,d=d+Math.imul(u,la)|0,e=e+Math.imul(u,ma)|0,e=e+Math.imul(v,la)|0,f=f+Math.imul(v,ma)|0,d=d+Math.imul(r,oa)|0,e=e+Math.imul(r,pa)|0,e=e+Math.imul(s,oa)|0,f=f+Math.imul(s,pa)|0;var Ba=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ba>>>26)|0,Ba&=67108863,d=Math.imul(M,Y),e=Math.imul(M,Z),e=e+Math.imul(N,Y)|0,f=Math.imul(N,Z),d=d+Math.imul(J,_)|0,e=e+Math.imul(J,aa)|0,e=e+Math.imul(K,_)|0,f=f+Math.imul(K,aa)|0,d=d+Math.imul(G,ca)|0,e=e+Math.imul(G,da)|0,e=e+Math.imul(H,ca)|0,f=f+Math.imul(H,da)|0,d=d+Math.imul(D,fa)|0,e=e+Math.imul(D,ga)|0,e=e+Math.imul(E,fa)|0,f=f+Math.imul(E,ga)|0,d=d+Math.imul(A,ia)|0,e=e+Math.imul(A,ja)|0,e=e+Math.imul(B,ia)|0,f=f+Math.imul(B,ja)|0,d=d+Math.imul(x,la)|0,e=e+Math.imul(x,ma)|0,e=e+Math.imul(y,la)|0,f=f+Math.imul(y,ma)|0,d=d+Math.imul(u,oa)|0,e=e+Math.imul(u,pa)|0,e=e+Math.imul(v,oa)|0,f=f+Math.imul(v,pa)|0;var Ca=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ca>>>26)|0,Ca&=67108863,d=Math.imul(M,_),e=Math.imul(M,aa),e=e+Math.imul(N,_)|0,f=Math.imul(N,aa),d=d+Math.imul(J,ca)|0,e=e+Math.imul(J,da)|0,e=e+Math.imul(K,ca)|0,f=f+Math.imul(K,da)|0,d=d+Math.imul(G,fa)|0,e=e+Math.imul(G,ga)|0,e=e+Math.imul(H,fa)|0,f=f+Math.imul(H,ga)|0,d=d+Math.imul(D,ia)|0,e=e+Math.imul(D,ja)|0,e=e+Math.imul(E,ia)|0,f=f+Math.imul(E,ja)|0,d=d+Math.imul(A,la)|0,e=e+Math.imul(A,ma)|0,e=e+Math.imul(B,la)|0,f=f+Math.imul(B,ma)|0,d=d+Math.imul(x,oa)|0,e=e+Math.imul(x,pa)|0,e=e+Math.imul(y,oa)|0,f=f+Math.imul(y,pa)|0;var Da=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Da>>>26)|0,Da&=67108863,d=Math.imul(M,ca),e=Math.imul(M,da),e=e+Math.imul(N,ca)|0,f=Math.imul(N,da),d=d+Math.imul(J,fa)|0,e=e+Math.imul(J,ga)|0,e=e+Math.imul(K,fa)|0,f=f+Math.imul(K,ga)|0,d=d+Math.imul(G,ia)|0,e=e+Math.imul(G,ja)|0,e=e+Math.imul(H,ia)|0,f=f+Math.imul(H,ja)|0,d=d+Math.imul(D,la)|0,e=e+Math.imul(D,ma)|0,e=e+Math.imul(E,la)|0,f=f+Math.imul(E,ma)|0,d=d+Math.imul(A,oa)|0,e=e+Math.imul(A,pa)|0,e=e+Math.imul(B,oa)|0,f=f+Math.imul(B,pa)|0;var Ea=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ea>>>26)|0,Ea&=67108863,d=Math.imul(M,fa),e=Math.imul(M,ga),e=e+Math.imul(N,fa)|0,f=Math.imul(N,ga),d=d+Math.imul(J,ia)|0,e=e+Math.imul(J,ja)|0,e=e+Math.imul(K,ia)|0,f=f+Math.imul(K,ja)|0,d=d+Math.imul(G,la)|0,e=e+Math.imul(G,ma)|0,e=e+Math.imul(H,la)|0,f=f+Math.imul(H,ma)|0,d=d+Math.imul(D,oa)|0,e=e+Math.imul(D,pa)|0,e=e+Math.imul(E,oa)|0,f=f+Math.imul(E,pa)|0;var Fa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,d=Math.imul(M,ia),e=Math.imul(M,ja),e=e+Math.imul(N,ia)|0,f=Math.imul(N,ja),d=d+Math.imul(J,la)|0,e=e+Math.imul(J,ma)|0,e=e+Math.imul(K,la)|0,f=f+Math.imul(K,ma)|0,d=d+Math.imul(G,oa)|0,e=e+Math.imul(G,pa)|0,e=e+Math.imul(H,oa)|0,f=f+Math.imul(H,pa)|0;var Ga=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ga>>>26)|0,Ga&=67108863,d=Math.imul(M,la),e=Math.imul(M,ma),e=e+Math.imul(N,la)|0,f=Math.imul(N,ma),d=d+Math.imul(J,oa)|0,e=e+Math.imul(J,pa)|0,e=e+Math.imul(K,oa)|0,f=f+Math.imul(K,pa)|0;var Ha=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ha>>>26)|0,Ha&=67108863,d=Math.imul(M,oa),e=Math.imul(M,pa),e=e+Math.imul(N,oa)|0,f=Math.imul(N,pa);var Ia=(j+d|0)+((8191&e)<<13)|0;return j=(f+(e>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,i[0]=qa,i[1]=ra,i[2]=sa,i[3]=ta,i[4]=ua,i[5]=va,i[6]=wa,i[7]=xa,i[8]=ya,i[9]=za,i[10]=Aa,i[11]=Ba,i[12]=Ca,i[13]=Da,i[14]=Ea,i[15]=Fa,i[16]=Ga,i[17]=Ha,i[18]=Ia,0!==j&&(i[19]=j,c.length++),c};Math.imul||(y=j),f.prototype.mulTo=function(a,b){var c=this.length+a.length;return 10===this.length&&10===a.length?y(this,a,b):c<63?j(this,a,b):c<1024?k(this,a,b):l(this,a,b)},m.prototype.makeRBT=function(a){for(var b=new Array(a),c=f.prototype._countBits(a)-1,d=0;d<a;d++)b[d]=this.revBin(d,c,a);return b},m.prototype.revBin=function(a,b,c){if(0===a||a===c-1)return a;for(var d=0,e=0;e<b;e++)d|=(1&a)<<b-e-1,a>>=1;return d},m.prototype.permute=function(a,b,c,d,e,f){for(var g=0;g<f;g++)d[g]=b[a[g]],e[g]=c[a[g]]},m.prototype.transform=function(a,b,c,d,e,f){this.permute(f,a,b,c,d,e);for(var g=1;g<e;g<<=1)for(var h=g<<1,i=Math.cos(2*Math.PI/h),j=Math.sin(2*Math.PI/h),k=0;k<e;k+=h)for(var l=i,m=j,n=0;n<g;n++){var o=c[k+n],p=d[k+n],q=c[k+n+g],r=d[k+n+g],s=l*q-m*r;r=l*r+m*q,q=s,c[k+n]=o+q,d[k+n]=p+r,c[k+n+g]=o-q,d[k+n+g]=p-r,n!==h&&(s=i*l-j*m,m=i*m+j*l,l=s)}},m.prototype.guessLen13b=function(a,b){var c=1|Math.max(b,a),d=1&c,e=0;for(c=c/2|0;c;c>>>=1)e++;return 1<<e+1+d},m.prototype.conjugate=function(a,b,c){if(!(c<=1))for(var d=0;d<c/2;d++){var e=a[d];a[d]=a[c-d-1],a[c-d-1]=e,e=b[d],b[d]=-b[c-d-1],b[c-d-1]=-e}},m.prototype.normalize13b=function(a,b){for(var c=0,d=0;d<b/2;d++){var e=8192*Math.round(a[2*d+1]/b)+Math.round(a[2*d]/b)+c;a[d]=67108863&e,c=e<67108864?0:e/67108864|0}return a},m.prototype.convert13b=function(a,b,c,e){for(var f=0,g=0;g<b;g++)f+=0|a[g],c[2*g]=8191&f,f>>>=13,c[2*g+1]=8191&f,f>>>=13;for(g=2*b;g<e;++g)c[g]=0;d(0===f),d(0==(-8192&f))},m.prototype.stub=function(a){for(var b=new Array(a),c=0;c<a;c++)b[c]=0;return b},m.prototype.mulp=function(a,b,c){var d=2*this.guessLen13b(a.length,b.length),e=this.makeRBT(d),f=this.stub(d),g=new Array(d),h=new Array(d),i=new Array(d),j=new Array(d),k=new Array(d),l=new Array(d),m=c.words;m.length=d,this.convert13b(a.words,a.length,g,d),this.convert13b(b.words,b.length,j,d),this.transform(g,f,h,i,d,e),this.transform(j,f,k,l,d,e);for(var n=0;n<d;n++){var o=h[n]*k[n]-i[n]*l[n];i[n]=h[n]*l[n]+i[n]*k[n],h[n]=o}return this.conjugate(h,i,d),this.transform(h,i,m,f,d,e),this.conjugate(m,f,d),this.normalize13b(m,d),c.negative=a.negative^b.negative,c.length=a.length+b.length,c.strip()},f.prototype.mul=function(a){var b=new f(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},f.prototype.mulf=function(a){var b=new f(null);return b.words=new Array(this.length+a.length),l(this,a,b)},f.prototype.imul=function(a){return this.clone().mulTo(a,this)},f.prototype.imuln=function(a){d("number"==typeof a),d(a<67108864);for(var b=0,c=0;c<this.length;c++){var e=(0|this.words[c])*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[c]=67108863&f}return 0!==b&&(this.words[c]=b,this.length++),this},f.prototype.muln=function(a){return this.clone().imuln(a)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(a){var b=i(a);if(0===b.length)return new f(1);for(var c=this,d=0;d<b.length&&0===b[d];d++,c=c.sqr());if(++d<b.length)for(var e=c.sqr();d<b.length;d++,e=e.sqr())0!==b[d]&&(c=c.mul(e));return c},f.prototype.iushln=function(a){d("number"==typeof a&&a>=0);var b,c=a%26,e=(a-c)/26,f=67108863>>>26-c<<26-c;if(0!==c){var g=0;for(b=0;b<this.length;b++){var h=this.words[b]&f,i=(0|this.words[b])-h<<c;this.words[b]=i|g,g=h>>>26-c}g&&(this.words[b]=g,this.length++)}if(0!==e){for(b=this.length-1;b>=0;b--)this.words[b+e]=this.words[b];for(b=0;b<e;b++)this.words[b]=0;this.length+=e}return this.strip()},f.prototype.ishln=function(a){return d(0===this.negative),this.iushln(a)},f.prototype.iushrn=function(a,b,c){d("number"==typeof a&&a>=0);var e;e=b?(b-b%26)/26:0;var f=a%26,g=Math.min((a-f)/26,this.length),h=67108863^67108863>>>f<<f,i=c;if(e-=g,e=Math.max(0,e),i){for(var j=0;j<g;j++)i.words[j]=this.words[j];i.length=g}if(0===g);else if(this.length>g)for(this.length-=g,j=0;j<this.length;j++)this.words[j]=this.words[j+g];else this.words[0]=0,this.length=1;var k=0;for(j=this.length-1;j>=0&&(0!==k||j>=e);j--){var l=0|this.words[j];this.words[j]=k<<26-f|l>>>f,k=l&h}return i&&0!==k&&(i.words[i.length++]=k),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(a,b,c){return d(0===this.negative),this.iushrn(a,b,c)},f.prototype.shln=function(a){return this.clone().ishln(a)},f.prototype.ushln=function(a){return this.clone().iushln(a)},f.prototype.shrn=function(a){return this.clone().ishrn(a)},f.prototype.ushrn=function(a){return this.clone().iushrn(a)},f.prototype.testn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26,e=1<<b;return!(this.length<=c)&&!!(this.words[c]&e)},f.prototype.imaskn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26;if(d(0===this.negative,"imaskn works only with positive numbers"),this.length<=c)return this;if(0!==b&&c++,this.length=Math.min(c,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},f.prototype.maskn=function(a){return this.clone().imaskn(a)},f.prototype.iaddn=function(a){return d("number"==typeof a),d(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},f.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},f.prototype.isubn=function(a){if(d("number"==typeof a),d(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},f.prototype.addn=function(a){return this.clone().iaddn(a)},f.prototype.subn=function(a){return this.clone().isubn(a)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(a,b,c){var e,f=a.length+c;this._expand(f);var g,h=0;for(e=0;e<a.length;e++){g=(0|this.words[e+c])+h;var i=(0|a.words[e])*b;g-=67108863&i,h=(g>>26)-(i/67108864|0),this.words[e+c]=67108863&g}for(;e<this.length-c;e++)g=(0|this.words[e+c])+h,h=g>>26,this.words[e+c]=67108863&g;if(0===h)return this.strip();for(d(-1===h),h=0,e=0;e<this.length;e++)g=-(0|this.words[e])+h,h=g>>26,this.words[e]=67108863&g;return this.negative=1,this.strip()},f.prototype._wordDiv=function(a,b){var c=this.length-a.length,d=this.clone(),e=a,g=0|e.words[e.length-1];0!==(c=26-this._countBits(g))&&(e=e.ushln(c),d.iushln(c),g=0|e.words[e.length-1]);var h,i=d.length-e.length;if("mod"!==b){h=new f(null),h.length=i+1,h.words=new Array(h.length);for(var j=0;j<h.length;j++)h.words[j]=0}var k=d.clone()._ishlnsubmul(e,1,i);0===k.negative&&(d=k,h&&(h.words[i]=1));for(var l=i-1;l>=0;l--){var m=67108864*(0|d.words[e.length+l])+(0|d.words[e.length+l-1]);for(m=Math.min(m/g|0,67108863),d._ishlnsubmul(e,m,l);0!==d.negative;)m--,d.negative=0,d._ishlnsubmul(e,1,l),d.isZero()||(d.negative^=1);h&&(h.words[l]=m)}return h&&h.strip(),d.strip(),"div"!==b&&0!==c&&d.iushrn(c),{div:h||null,mod:d}},f.prototype.divmod=function(a,b,c){if(d(!a.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var e,g,h;return 0!==this.negative&&0===a.negative?(h=this.neg().divmod(a,b),"mod"!==b&&(e=h.div.neg()),"div"!==b&&(g=h.mod.neg(),c&&0!==g.negative&&g.iadd(a)),{div:e,mod:g}):0===this.negative&&0!==a.negative?(h=this.divmod(a.neg(),b),"mod"!==b&&(e=h.div.neg()),{div:e,mod:h.mod}):0!=(this.negative&a.negative)?(h=this.neg().divmod(a.neg(),b),"div"!==b&&(g=h.mod.neg(),c&&0!==g.negative&&g.isub(a)),{div:h.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new f(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new f(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new f(this.modn(a.words[0]))}:this._wordDiv(a,b)},f.prototype.div=function(a){return this.divmod(a,"div",!1).div},f.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},f.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},f.prototype.divRound=function(a){var b=this.divmod(a);if(b.mod.isZero())return b.div;var c=0!==b.div.negative?b.mod.isub(a):b.mod,d=a.ushrn(1),e=a.andln(1),f=c.cmp(d);return f<0||1===e&&0===f?b.div:0!==b.div.negative?b.div.isubn(1):b.div.iaddn(1)},f.prototype.modn=function(a){d(a<=67108863);for(var b=(1<<26)%a,c=0,e=this.length-1;e>=0;e--)c=(b*c+(0|this.words[e]))%a;return c},f.prototype.idivn=function(a){d(a<=67108863);for(var b=0,c=this.length-1;c>=0;c--){var e=(0|this.words[c])+67108864*b;this.words[c]=e/a|0,b=e%a}return this.strip()},f.prototype.divn=function(a){return this.clone().idivn(a)},f.prototype.egcd=function(a){d(0===a.negative),d(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var e=new f(1),g=new f(0),h=new f(0),i=new f(1),j=0;b.isEven()&&c.isEven();)b.iushrn(1),c.iushrn(1),++j;for(var k=c.clone(),l=b.clone();!b.isZero();){for(var m=0,n=1;0==(b.words[0]&n)&&m<26;++m,n<<=1);if(m>0)for(b.iushrn(m);m-- >0;)(e.isOdd()||g.isOdd())&&(e.iadd(k),g.isub(l)),e.iushrn(1),g.iushrn(1);for(var o=0,p=1;0==(c.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(c.iushrn(o);o-- >0;)(h.isOdd()||i.isOdd())&&(h.iadd(k),i.isub(l)),h.iushrn(1),i.iushrn(1);b.cmp(c)>=0?(b.isub(c),e.isub(h),g.isub(i)):(c.isub(b),h.isub(e),i.isub(g))}return{a:h,b:i,gcd:c.iushln(j)}},f.prototype._invmp=function(a){d(0===a.negative),d(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var e=new f(1),g=new f(0),h=c.clone();b.cmpn(1)>0&&c.cmpn(1)>0;){for(var i=0,j=1;0==(b.words[0]&j)&&i<26;++i,j<<=1);if(i>0)for(b.iushrn(i);i-- >0;)e.isOdd()&&e.iadd(h),e.iushrn(1);for(var k=0,l=1;0==(c.words[0]&l)&&k<26;++k,l<<=1);if(k>0)for(c.iushrn(k);k-- >0;)g.isOdd()&&g.iadd(h),g.iushrn(1);b.cmp(c)>=0?(b.isub(c),e.isub(g)):(c.isub(b),g.isub(e))}var m;return m=0===b.cmpn(1)?e:g,m.cmpn(0)<0&&m.iadd(a),m},f.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var b=this.clone(),c=a.clone();b.negative=0,c.negative=0;for(var d=0;b.isEven()&&c.isEven();d++)b.iushrn(1),c.iushrn(1);for(;;){for(;b.isEven();)b.iushrn(1);for(;c.isEven();)c.iushrn(1);var e=b.cmp(c);if(e<0){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.iushln(d)},f.prototype.invm=function(a){return this.egcd(a).a.umod(a)},f.prototype.isEven=function(){return 0==(1&this.words[0])},f.prototype.isOdd=function(){return 1==(1&this.words[0])},f.prototype.andln=function(a){return this.words[0]&a},f.prototype.bincn=function(a){d("number"==typeof a);var b=a%26,c=(a-b)/26,e=1<<b;if(this.length<=c)return this._expand(c+1),this.words[c]|=e,this;for(var f=e,g=c;0!==f&&g<this.length;g++){var h=0|this.words[g];h+=f,f=h>>>26,h&=67108863,this.words[g]=h}return 0!==f&&(this.words[g]=f,this.length++),this},f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},f.prototype.cmpn=function(a){var b=a<0;if(0!==this.negative&&!b)return-1;if(0===this.negative&&b)return 1;this.strip();var c;if(this.length>1)c=1;else{b&&(a=-a),d(a<=67108863,"Number is too big");var e=0|this.words[0];c=e===a?0:e<a?-1:1}return 0!==this.negative?0|-c:c},f.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var b=this.ucmp(a);return 0!==this.negative?0|-b:b},f.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=0|this.words[c],e=0|a.words[c];if(d!==e){d<e?b=-1:d>e&&(b=1);break}}return b},f.prototype.gtn=function(a){return 1===this.cmpn(a)},f.prototype.gt=function(a){return 1===this.cmp(a)},f.prototype.gten=function(a){return this.cmpn(a)>=0},f.prototype.gte=function(a){return this.cmp(a)>=0},f.prototype.ltn=function(a){return-1===this.cmpn(a)},f.prototype.lt=function(a){return-1===this.cmp(a)},f.prototype.lten=function(a){return this.cmpn(a)<=0},f.prototype.lte=function(a){return this.cmp(a)<=0},f.prototype.eqn=function(a){return 0===this.cmpn(a)},f.prototype.eq=function(a){return 0===this.cmp(a)},f.red=function(a){return new s(a)},f.prototype.toRed=function(a){return d(!this.red,"Already a number in reduction context"),d(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},f.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(a){return this.red=a,this},f.prototype.forceRed=function(a){return d(!this.red,"Already a number in reduction context"),this._forceRed(a)},f.prototype.redAdd=function(a){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},f.prototype.redIAdd=function(a){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},f.prototype.redSub=function(a){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},f.prototype.redISub=function(a){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},f.prototype.redShl=function(a){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},f.prototype.redMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},f.prototype.redIMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},f.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(a){
return d(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var z={k256:null,p224:null,p192:null,p25519:null};n.prototype._tmp=function(){var a=new f(null);return a.words=new Array(Math.ceil(this.n/13)),a},n.prototype.ireduce=function(a){var b,c=a;do{this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength()}while(b>this.n);var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip(),c},n.prototype.split=function(a,b){a.iushrn(this.n,0,b)},n.prototype.imulK=function(a){return a.imul(this.k)},e(o,n),o.prototype.split=function(a,b){for(var c=Math.min(a.length,9),d=0;d<c;d++)b.words[d]=a.words[d];if(b.length=c,a.length<=9)return a.words[0]=0,void(a.length=1);var e=a.words[9];for(b.words[b.length++]=4194303&e,d=10;d<a.length;d++){var f=0|a.words[d];a.words[d-10]=(4194303&f)<<4|e>>>22,e=f}e>>>=22,a.words[d-10]=e,0===e&&a.length>10?a.length-=10:a.length-=9},o.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b=0,c=0;c<a.length;c++){var d=0|a.words[c];b+=977*d,a.words[c]=67108863&b,b=64*d+(b/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},e(p,n),e(q,n),e(r,n),r.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*(0|a.words[c])+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},f._prime=function(a){if(z[a])return z[a];var b;if("k256"===a)b=new o;else if("p224"===a)b=new p;else if("p192"===a)b=new q;else{if("p25519"!==a)throw new Error("Unknown prime "+a);b=new r}return z[a]=b,b},s.prototype._verify1=function(a){d(0===a.negative,"red works only with positives"),d(a.red,"red works only with red numbers")},s.prototype._verify2=function(a,b){d(0==(a.negative|b.negative),"red works only with positives"),d(a.red&&a.red===b.red,"red works only with red numbers")},s.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},s.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},s.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},s.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},s.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},s.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},s.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.ushln(b))},s.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},s.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},s.prototype.isqr=function(a){return this.imul(a,a.clone())},s.prototype.sqr=function(a){return this.mul(a,a)},s.prototype.sqrt=function(a){if(a.isZero())return a.clone();var b=this.m.andln(3);if(d(b%2==1),3===b){var c=this.m.add(new f(1)).iushrn(2);return this.pow(a,c)}for(var e=this.m.subn(1),g=0;!e.isZero()&&0===e.andln(1);)g++,e.iushrn(1);d(!e.isZero());var h=new f(1).toRed(this),i=h.redNeg(),j=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new f(2*k*k).toRed(this);0!==this.pow(k,j).cmp(i);)k.redIAdd(i);for(var l=this.pow(k,e),m=this.pow(a,e.addn(1).iushrn(1)),n=this.pow(a,e),o=g;0!==n.cmp(h);){for(var p=n,q=0;0!==p.cmp(h);q++)p=p.redSqr();d(q<o);var r=this.pow(l,new f(1).iushln(o-q-1));m=m.redMul(r),l=r.redSqr(),n=n.redMul(l),o=q}return m},s.prototype.invm=function(a){var b=a._invmp(this.m);return 0!==b.negative?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},s.prototype.pow=function(a,b){if(b.isZero())return new f(1);if(0===b.cmpn(1))return a.clone();var c=new Array(16);c[0]=new f(1).toRed(this),c[1]=a;for(var d=2;d<c.length;d++)c[d]=this.mul(c[d-1],a);var e=c[0],g=0,h=0,i=b.bitLength()%26;for(0===i&&(i=26),d=b.length-1;d>=0;d--){for(var j=b.words[d],k=i-1;k>=0;k--){var l=j>>k&1;e!==c[0]&&(e=this.sqr(e)),0!==l||0!==g?(g<<=1,g|=l,(4===++h||0===d&&0===k)&&(e=this.mul(e,c[g]),h=0,g=0)):h=0}i=26}return e},s.prototype.convertTo=function(a){var b=a.umod(this.m);return b===a?b.clone():b},s.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},f.mont=function(a){return new t(a)},e(t,s),t.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},t.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},t.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},t.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new f(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),g=e;return e.cmp(this.m)>=0?g=e.isub(this.m):e.cmpn(0)<0&&(g=e.iadd(this.m)),g._forceRed(this)},t.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===b||b,this)},{}],74:[function(a,b,c){"use strict";function d(a){var b,c,d,e=a.length,f=0;for(b=0;b<e;++b)f+=a[b].length;var g=new Array(f),h=0;for(b=0;b<e;++b){var i=a[b],j=i.length;for(c=0;c<j;++c){var k=g[h++]=new Array(j-1),l=0;for(d=0;d<j;++d)d!==c&&(k[l++]=i[d]);if(1&c){var m=k[1];k[1]=k[0],k[0]=m}}}return g}b.exports=d},{}],75:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a;++c)if(!(b[c]<=b[c+a]))return!0;return!1}function e(a,b,c,e){for(var f=0,g=0,h=0,i=a.length;h<i;++h){var j=a[h];if(!d(b,j)){for(var k=0;k<2*b;++k)c[f++]=j[k];e[g++]=h}}return g}function f(a,b,c,d){var f=a.length,g=b.length;if(!(f<=0||g<=0)){var h=a[0].length>>>1;if(!(h<=0)){var i,j=l.mallocDouble(2*h*f),k=l.mallocInt32(f);if((f=e(a,h,j,k))>0){if(1===h&&d)m.init(f),i=m.sweepComplete(h,c,0,f,j,k,0,f,j,k);else{var o=l.mallocDouble(2*h*g),p=l.mallocInt32(g);g=e(b,h,o,p),g>0&&(m.init(f+g),i=1===h?m.sweepBipartite(h,c,0,f,j,k,0,g,o,p):n(h,c,d,f,j,k,g,o,p),l.free(o),l.free(p))}l.free(j),l.free(k)}return i}}}function g(a,b){k.push([a,b])}function h(a){return k=[],f(a,a,g,!0),k}function i(a,b){return k=[],f(a,b,g,!1),k}function j(a,b,c){switch(arguments.length){case 1:return h(a);case 2:return"function"==typeof b?f(a,a,b,!0):i(a,b);case 3:return f(a,b,c,!1);default:throw new Error("box-intersect: Invalid arguments")}}b.exports=j;var k,l=a("typedarray-pool"),m=a("./lib/sweep"),n=a("./lib/intersect")},{"./lib/intersect":77,"./lib/sweep":81,"typedarray-pool":554}],76:[function(a,b,c){"use strict";function d(a,b,c){var d="bruteForce"+(a?"Red":"Blue")+(b?"Flip":"")+(c?"Full":""),e=["function ",d,"(",w.join(),"){","var ",j,"=2*",f,";"],i="for(var i="+k+","+o+"="+j+"*"+k+";i<"+l+";++i,"+o+"+="+j+"){var x0="+m+"["+g+"+"+o+"],x1="+m+"["+g+"+"+o+"+"+f+"],xi="+n+"[i];",x="for(var j="+p+","+t+"="+j+"*"+p+";j<"+q+";++j,"+t+"+="+j+"){var y0="+r+"["+g+"+"+t+"],"+(c?"y1="+r+"["+g+"+"+t+"+"+f+"],":"")+"yi="+s+"[j];";return a?e.push(i,v,":",x):e.push(x,v,":",i),c?e.push("if(y1<x0||x1<y0)continue;"):b?e.push("if(y0<=x0||x1<y0)continue;"):e.push("if(y0<x0||x1<y0)continue;"),e.push("for(var k="+g+"+1;k<"+f+";++k){var r0="+m+"[k+"+o+"],r1="+m+"[k+"+f+"+"+o+"],b0="+r+"[k+"+t+"],b1="+r+"[k+"+f+"+"+t+"];if(r1<b0||b1<r0)continue "+v+";}var "+u+"="+h+"("),b?e.push("yi,xi"):e.push("xi,yi"),e.push(");if("+u+"!==void 0)return "+u+";}}}"),{name:d,code:e.join("")}}function e(a){function b(b,c){var f=d(b,c,a);e.push(f.code),g.push("return "+f.name+"("+w.join()+");")}var c="bruteForce"+(a?"Full":"Partial"),e=[],f=w.slice();a||f.splice(3,0,i);var g=["function "+c+"("+f.join()+"){"];g.push("if("+l+"-"+k+">"+q+"-"+p+"){"),a?(b(!0,!1),g.push("}else{"),b(!1,!1)):(g.push("if("+i+"){"),b(!0,!0),g.push("}else{"),b(!0,!1),g.push("}}else{if("+i+"){"),b(!1,!0),g.push("}else{"),b(!1,!1),g.push("}")),g.push("}}return "+c);var h=e.join("")+g.join("");return new Function(h)()}var f="d",g="ax",h="vv",i="fp",j="es",k="rs",l="re",m="rb",n="ri",o="rp",p="bs",q="be",r="bb",s="bi",t="bp",u="rv",v="Q",w=[f,g,h,k,l,m,n,p,q,r,s];c.partial=e(!1),c.full=e(!0)},{}],77:[function(a,b,c){"use strict";function d(a,b){var c=8*j.log2(b+1)*(a+1)|0,d=j.nextPow2(z*c);B.length<d&&(i.free(B),B=i.mallocInt32(d));var e=j.nextPow2(A*c);C<e&&(i.free(C),C=i.mallocDouble(e))}function e(a,b,c,d,e,f,g,h,i){var j=z*a;B[j]=b,B[j+1]=c,B[j+2]=d,B[j+3]=e,B[j+4]=f,B[j+5]=g;var k=A*a;C[k]=h,C[k+1]=i}function f(a,b,c,d,e,f,g,h,i,j,k){var l=2*a,m=i*l,n=j[m+b];a:for(var o=e,p=e*l;o<f;++o,p+=l){var q=g[p+b],r=g[p+b+a];if(!(n<q||r<n)&&(!d||n!==q)){for(var s=h[o],t=b+1;t<a;++t){var q=g[p+t],r=g[p+t+a],u=j[m+t],v=j[m+t+a];if(r<u||v<q)continue a}var w;if(void 0!==(w=d?c(k,s):c(s,k)))return w}}}function g(a,b,c,d,e,f,g,h,i,j){var k=2*a,l=h*k,m=i[l+b];a:for(var n=d,o=d*k;n<e;++n,o+=k){var p=g[n];if(p!==j){var q=f[o+b],r=f[o+b+a];if(!(m<q||r<m)){for(var s=b+1;s<a;++s){var q=f[o+s],r=f[o+s+a],t=i[l+s],u=i[l+s+a];if(r<t||u<q)continue a}var v=c(p,j);if(void 0!==v)return v}}}}function h(a,b,c,h,i,j,k,p,D){d(a,h+k);var E,F=0,G=2*a;for(e(F++,0,0,h,0,k,c?16:0,-1/0,1/0),c||e(F++,0,0,k,0,h,1,-1/0,1/0);F>0;){F-=1;var H=F*z,I=B[H],J=B[H+1],K=B[H+2],L=B[H+3],M=B[H+4],N=B[H+5],O=F*A,P=C[O],Q=C[O+1],R=1&N,S=!!(16&N),T=i,U=j,V=p,W=D;if(R&&(T=p,U=D,V=i,W=j),!(2&N&&(K=v(a,I,J,K,T,U,Q),J>=K)||4&N&&(J=w(a,I,J,K,T,U,P))>=K)){var X=K-J,Y=M-L;if(S){if(a*X*(X+Y)<s){if(void 0!==(E=n.scanComplete(a,I,b,J,K,T,U,L,M,V,W)))return E;continue}}else{if(a*Math.min(X,Y)<q){if(void 0!==(E=l(a,I,b,R,J,K,T,U,L,M,V,W)))return E;continue}if(a*X*Y<r){if(void 0!==(E=n.scanBipartite(a,I,b,R,J,K,T,U,L,M,V,W)))return E;continue}}var Z=t(a,I,J,K,T,U,P,Q);if(J<Z)if(a*(Z-J)<q){if(void 0!==(E=m(a,I+1,b,J,Z,T,U,L,M,V,W)))return E}else if(I===a-2){if(void 0!==(E=R?n.sweepBipartite(a,b,L,M,V,W,J,Z,T,U):n.sweepBipartite(a,b,J,Z,T,U,L,M,V,W)))return E}else e(F++,I+1,J,Z,L,M,R,-1/0,1/0),e(F++,I+1,L,M,J,Z,1^R,-1/0,1/0);if(Z<K){var $=o(a,I,L,M,V,W),_=V[G*$+I],aa=u(a,I,$,M,V,W,_);if(aa<M&&e(F++,I,Z,K,aa,M,(4|R)+(S?16:0),_,Q),L<$&&e(F++,I,Z,K,L,$,(2|R)+(S?16:0),P,_),$+1===aa){if(void 0!==(E=S?g(a,I,b,Z,K,T,U,$,V,W[$]):f(a,I,b,R,Z,K,T,U,$,V,W[$])))return E}else if($<aa){var ba;if(S){if(ba=x(a,I,Z,K,T,U,_),Z<ba){var ca=u(a,I,Z,ba,T,U,_);if(I===a-2){if(Z<ca&&void 0!==(E=n.sweepComplete(a,b,Z,ca,T,U,$,aa,V,W)))return E;if(ca<ba&&void 0!==(E=n.sweepBipartite(a,b,ca,ba,T,U,$,aa,V,W)))return E}else Z<ca&&e(F++,I+1,Z,ca,$,aa,16,-1/0,1/0),ca<ba&&(e(F++,I+1,ca,ba,$,aa,0,-1/0,1/0),e(F++,I+1,$,aa,ca,ba,1,-1/0,1/0))}}else ba=R?y(a,I,Z,K,T,U,_):x(a,I,Z,K,T,U,_),Z<ba&&(I===a-2?E=R?n.sweepBipartite(a,b,$,aa,V,W,Z,ba,T,U):n.sweepBipartite(a,b,Z,ba,T,U,$,aa,V,W):(e(F++,I+1,Z,ba,$,aa,R,-1/0,1/0),e(F++,I+1,$,aa,Z,ba,1^R,-1/0,1/0)))}}}}}b.exports=h;var i=a("typedarray-pool"),j=a("bit-twiddle"),k=a("./brute"),l=k.partial,m=k.full,n=a("./sweep"),o=a("./median"),p=a("./partition"),q=128,r=1<<22,s=1<<22,t=p("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),u=p("lo===p0",["p0"]),v=p("lo<p0",["p0"]),w=p("hi<=p0",["p0"]),x=p("lo<=p0&&p0<=hi",["p0"]),y=p("lo<p0&&p0<=hi",["p0"]),z=6,A=2,B=i.mallocInt32(1024),C=i.mallocDouble(1024)},{"./brute":76,"./median":78,"./partition":79,"./sweep":81,"bit-twiddle":71,"typedarray-pool":554}],78:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){for(var g=2*a,h=g*(c+1)+b,i=c+1;i<d;++i,h+=g)for(var j=e[h],k=i,l=g*(i-1);k>c&&e[l+b]>j;--k,l-=g){for(var m=l,n=l+g,o=0;o<g;++o,++m,++n){var p=e[m];e[m]=e[n],e[n]=p}var q=f[k];f[k]=f[k-1],f[k-1]=q}}function e(a,b,c,e,f,i){if(e<=c+1)return c;for(var j=c,k=e,l=e+c>>>1,m=2*a,n=l,o=f[m*l+b];j<k;){if(k-j<h){d(a,b,j,k,f,i),o=f[m*l+b];break}var p=k-j,q=Math.random()*p+j|0,r=f[m*q+b],s=Math.random()*p+j|0,t=f[m*s+b],u=Math.random()*p+j|0,v=f[m*u+b];r<=t?v>=t?(n=s,o=t):r>=v?(n=q,o=r):(n=u,o=v):t>=v?(n=s,o=t):v>=r?(n=q,o=r):(n=u,o=v);for(var w=m*(k-1),x=m*n,y=0;y<m;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];i[k-1]=i[n],i[n]=A,n=g(a,b,j,k-1,f,i,o);for(var w=m*(k-1),x=m*n,y=0;y<m;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];if(i[k-1]=i[n],i[n]=A,l<n){for(k=n-1;j<k&&f[m*(k-1)+b]===o;)k-=1;k+=1}else{if(!(n<l))break;for(j=n+1;j<k&&f[m*j+b]===o;)j+=1}}return g(a,b,c,l,f,i,f[m*l+b])}b.exports=e;var f=a("./partition"),g=f("lo<p0",["p0"]),h=8},{"./partition":79}],79:[function(a,b,c){"use strict";function d(a,b){var c="abcdef".split("").concat(b),d=[];return a.indexOf("lo")>=0&&d.push("lo=e[k+n]"),a.indexOf("hi")>=0&&d.push("hi=e[k+o]"),c.push(e.replace("_",d.join()).replace("$",a)),Function.apply(void 0,c)}b.exports=d;var e="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],80:[function(a,b,c){"use strict";function d(a,b){b<=4*m?e(0,b-1,a):l(0,b-1,a)}function e(a,b,c){for(var d=2*(a+1),e=a+1;e<=b;++e){for(var f=c[d++],g=c[d++],h=e,i=d-2;h-- >a;){var j=c[i-2],k=c[i-1];if(j<f)break;if(j===f&&k<g)break;c[i]=j,c[i+1]=k,i-=2}c[i]=f,c[i+1]=g}}function f(a,b,c){a*=2,b*=2;var d=c[a],e=c[a+1];c[a]=c[b],c[a+1]=c[b+1],c[b]=d,c[b+1]=e}function g(a,b,c){a*=2,b*=2,c[a]=c[b],c[a+1]=c[b+1]}function h(a,b,c,d){a*=2,b*=2,c*=2;var e=d[a],f=d[a+1];d[a]=d[b],d[a+1]=d[b+1],d[b]=d[c],d[b+1]=d[c+1],d[c]=e,d[c+1]=f}function i(a,b,c,d,e){a*=2,b*=2,e[a]=e[b],e[b]=c,e[a+1]=e[b+1],e[b+1]=d}function j(a,b,c){a*=2,b*=2;var d=c[a],e=c[b];return!(d<e)&&(d!==e||c[a+1]>c[b+1])}function k(a,b,c,d){a*=2;var e=d[a];return e<b||e===b&&d[a+1]<c}function l(a,b,c){var d=(b-a+1)/6|0,n=a+d,o=b-d,p=a+b>>1,q=p-d,r=p+d,s=n,t=q,u=p,v=r,w=o,x=a+1,y=b-1,z=0;j(s,t,c)&&(z=s,s=t,t=z),j(v,w,c)&&(z=v,v=w,w=z),j(s,u,c)&&(z=s,s=u,u=z),j(t,u,c)&&(z=t,t=u,u=z),j(s,v,c)&&(z=s,s=v,v=z),j(u,v,c)&&(z=u,u=v,v=z),j(t,w,c)&&(z=t,t=w,w=z),j(t,u,c)&&(z=t,t=u,u=z),j(v,w,c)&&(z=v,v=w,w=z);for(var A=c[2*t],B=c[2*t+1],C=c[2*v],D=c[2*v+1],E=2*s,F=2*u,G=2*w,H=2*n,I=2*p,J=2*o,K=0;K<2;++K){var L=c[E+K],M=c[F+K],N=c[G+K];c[H+K]=L,c[I+K]=M,c[J+K]=N}g(q,a,c),g(r,b,c);for(var O=x;O<=y;++O)if(k(O,A,B,c))O!==x&&f(O,x,c),++x;else if(!k(O,C,D,c))for(;;){if(k(y,C,D,c)){k(y,A,B,c)?(h(O,x,y,c),++x,--y):(f(O,y,c),--y);break}if(--y<O)break}i(a,x-1,A,B,c),i(b,y+1,C,D,c),x-2-a<=m?e(a,x-2,c):l(a,x-2,c),b-(y+2)<=m?e(y+2,b,c):l(y+2,b,c),y-x<=m?e(x,y,c):l(x,y,c)}b.exports=d;var m=32},{}],81:[function(a,b,c){"use strict";function d(a){var b=l.nextPow2(a);o.length<b&&(k.free(o),o=k.mallocInt32(b)),p.length<b&&(k.free(p),p=k.mallocInt32(b)),q.length<b&&(k.free(q),q=k.mallocInt32(b)),r.length<b&&(k.free(r),r=k.mallocInt32(b)),s.length<b&&(k.free(s),s=k.mallocInt32(b)),t.length<b&&(k.free(t),t=k.mallocInt32(b));var c=8*b;u.length<c&&(k.free(u),u=k.mallocDouble(c))}function e(a,b,c,d){var e=b[d],f=a[c-1];a[e]=f,b[f]=e}function f(a,b,c,d){a[c]=d,b[d]=c}function g(a,b,c,d,g,h,i,j,k,l){for(var s=0,t=2*a,v=a-1,w=t-1,x=c;x<d;++x){var y=h[x],z=t*x;u[s++]=g[z+v],u[s++]=-(y+1),u[s++]=g[z+w],u[s++]=y}for(var x=i;x<j;++x){var y=l[x]+n,A=t*x;u[s++]=k[A+v],u[s++]=-y,u[s++]=k[A+w],u[s++]=y}var B=s>>>1;m(u,B);for(var C=0,D=0,x=0;x<B;++x){var E=0|u[2*x+1];if(E>=n)E=E-n|0,e(q,r,D--,E);else if(E>=0)e(o,p,C--,E);else if(E<=-n){E=-E-n|0;for(var F=0;F<C;++F){var G=b(o[F],E);if(void 0!==G)return G}f(q,r,D++,E)}else{E=-E-1|0;for(var F=0;F<D;++F){var G=b(E,q[F]);if(void 0!==G)return G}f(o,p,C++,E)}}}function h(a,b,c,d,g,h,i,j,k,l){for(var n=0,v=2*a,w=a-1,x=v-1,y=c;y<d;++y){var z=h[y]+1<<1,A=v*y;u[n++]=g[A+w],u[n++]=-z,u[n++]=g[A+x],u[n++]=z}for(var y=i;y<j;++y){var z=l[y]+1<<1,B=v*y;u[n++]=k[B+w],u[n++]=1|-z,u[n++]=k[B+x],u[n++]=1|z}var C=n>>>1;m(u,C);for(var D=0,E=0,F=0,y=0;y<C;++y){var G=0|u[2*y+1],H=1&G;if(y<C-1&&G>>1==u[2*y+3]>>1&&(H=2,y+=1),G<0){for(var I=-(G>>1)-1,J=0;J<F;++J){var K=b(s[J],I);if(void 0!==K)return K}if(0!==H)for(var J=0;J<D;++J){var K=b(o[J],I);if(void 0!==K)return K}if(1!==H)for(var J=0;J<E;++J){var K=b(q[J],I);if(void 0!==K)return K}0===H?f(o,p,D++,I):1===H?f(q,r,E++,I):2===H&&f(s,t,F++,I)}else{var I=(G>>1)-1;0===H?e(o,p,D--,I):1===H?e(q,r,E--,I):2===H&&e(s,t,F--,I)}}}function i(a,b,c,d,g,h,i,j,k,l,q,r){var s=0,t=2*a,v=b,w=b+a,x=1,y=1;d?y=n:x=n;for(var z=g;z<h;++z){var A=z+x,B=t*z;u[s++]=i[B+v],u[s++]=-A,u[s++]=i[B+w],u[s++]=A}for(var z=k;z<l;++z){var A=z+y,C=t*z;u[s++]=q[C+v],u[s++]=-A}var D=s>>>1;m(u,D);for(var E=0,z=0;z<D;++z){var F=0|u[2*z+1];if(F<0){var A=-F,G=!1;if(A>=n?(G=!d,A-=n):(G=!!d,A-=1),G)f(o,p,E++,A);else{var H=r[A],I=t*A,J=q[I+b+1],K=q[I+b+1+a];a:for(var L=0;L<E;++L){var M=o[L],N=t*M;if(!(K<i[N+b+1]||i[N+b+1+a]<J)){for(var O=b+2;O<a;++O)if(q[I+O+a]<i[N+O]||i[N+O+a]<q[I+O])continue a;var P,Q=j[M];if(void 0!==(P=d?c(H,Q):c(Q,H)))return P}}}}else e(o,p,E--,F-x)}}function j(a,b,c,d,e,f,g,h,i,j,k){for(var l=0,p=2*a,q=b,r=b+a,s=d;s<e;++s){var t=s+n,v=p*s;u[l++]=f[v+q],u[l++]=-t,u[l++]=f[v+r],u[l++]=t}for(var s=h;s<i;++s){var t=s+1,w=p*s;u[l++]=j[w+q],u[l++]=-t}var x=l>>>1;m(u,x);for(var y=0,s=0;s<x;++s){var z=0|u[2*s+1];if(z<0){var t=-z;if(t>=n)o[y++]=t-n;else{t-=1;var A=k[t],B=p*t,C=j[B+b+1],D=j[B+b+1+a];a:for(var E=0;E<y;++E){var F=o[E],G=g[F];if(G===A)break;var H=p*F;if(!(D<f[H+b+1]||f[H+b+1+a]<C)){for(var I=b+2;I<a;++I)if(j[B+I+a]<f[H+I]||f[H+I+a]<j[B+I])continue a;var J=c(G,A);if(void 0!==J)return J}}}}else{for(var t=z-n,E=y-1;E>=0;--E)if(o[E]===t){for(var I=E+1;I<y;++I)o[I-1]=o[I];break}--y}}}b.exports={init:d,sweepBipartite:g,sweepComplete:h,scanBipartite:i,scanComplete:j};var k=a("typedarray-pool"),l=a("bit-twiddle"),m=a("./sort"),n=1<<28,o=k.mallocInt32(1024),p=k.mallocInt32(1024),q=k.mallocInt32(1024),r=k.mallocInt32(1024),s=k.mallocInt32(1024),t=k.mallocInt32(1024),u=k.mallocDouble(8192)},{"./sort":80,"bit-twiddle":71,"typedarray-pool":554}],82:[function(a,b,c){"use strict";function d(a){if(a>X)throw new RangeError("Invalid typed array length");var b=new Uint8Array(a);return b.__proto__=e.prototype,b}function e(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return i(a)}return f(a,b,c)}function f(a,b,c){if("number"==typeof a)throw new TypeError('"value" argument must not be a number');return a instanceof ArrayBuffer?l(a,b,c):"string"==typeof a?j(a,b):m(a)}function g(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function h(a,b,c){return g(a),a<=0?d(a):void 0!==b?"string"==typeof c?d(a).fill(b,c):d(a).fill(b):d(a)}function i(a){return g(a),d(a<0?0:0|n(a))}function j(a,b){if("string"==typeof b&&""!==b||(b="utf8"),!e.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');var c=0|p(a,b),f=d(c),g=f.write(a,b);return g!==c&&(f=f.slice(0,g)),f}function k(a){for(var b=a.length<0?0:0|n(a.length),c=d(b),e=0;e<b;e+=1)c[e]=255&a[e];return c}function l(a,b,c){if(b<0||a.byteLength<b)throw new RangeError("'offset' is out of bounds");if(a.byteLength<b+(c||0))throw new RangeError("'length' is out of bounds");var d;return d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),d.__proto__=e.prototype,d}function m(a){if(e.isBuffer(a)){var b=0|n(a.length),c=d(b);return 0===c.length?c:(a.copy(c,0,0,b),c)}if(a){if(T(a)||"length"in a)return"number"!=typeof a.length||U(a.length)?d(0):k(a);if("Buffer"===a.type&&Array.isArray(a.data))return k(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function n(a){if(a>=X)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+X.toString(16)+" bytes");return 0|a}function o(a){return+a!=a&&(a=0),e.alloc(+a)}function p(a,b){if(e.isBuffer(a))return a.length;if(T(a)||a instanceof ArrayBuffer)return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return O(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return R(a).length;default:if(d)return O(a).length;b=(""+b).toLowerCase(),d=!0}}function q(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return F(this,b,c);case"utf8":case"utf-8":return B(this,b,c);case"ascii":return D(this,b,c);case"latin1":case"binary":return E(this,b,c);case"base64":return A(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function r(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function s(a,b,c,d,f){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,U(c)&&(c=f?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(f)return-1;c=a.length-1}else if(c<0){if(!f)return-1;c=0}if("string"==typeof b&&(b=e.from(b,d)),e.isBuffer(b))return 0===b.length?-1:t(a,b,c,d,f);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):t(a,[b],c,d,f);throw new TypeError("val must be string, number or Buffer")}function t(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===i)return k*g}else-1!==k&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function u(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;var f=b.length;if(f%2!=0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(U(h))return g;a[c+g]=h}return g}function v(a,b,c,d){return S(O(b,a.length-c),a,c,d)}function w(a,b,c,d){return S(P(b),a,c,d)}function x(a,b,c,d){return w(a,b,c,d)}function y(a,b,c,d){return S(R(b),a,c,d)}function z(a,b,c,d){return S(Q(b,a.length-c),a,c,d)}function A(a,b,c){return 0===b&&c===a.length?V.fromByteArray(a):V.fromByteArray(a.slice(b,c))}function B(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128==(192&i)&&(l=(31&f)<<6|63&i)>127&&(g=l);break;case 3:i=a[e+1],j=a[e+2],128==(192&i)&&128==(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j)>2047&&(l<55296||l>57343)&&(g=l);break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128==(192&i)&&128==(192&j)&&128==(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k)>65535&&l<1114112&&(g=l)}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return C(d)}function C(a){var b=a.length;if(b<=Y)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=Y));return c}function D(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function F(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=N(a[f]);return e}function G(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function H(a,b,c){if(a%1!=0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function I(a,b,c,d,f,g){if(!e.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>f||b<g)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function J(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function K(a,b,c,d,e){return b=+b,c>>>=0,e||J(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(a,b,c,d,23,4),c+4}function L(a,b,c,d,e){return b=+b,c>>>=0,e||J(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(a,b,c,d,52,8),c+8}function M(a){if(a=a.trim().replace(Z,""),a.length<2)return"";for(;a.length%4!=0;)a+="=";return a}function N(a){return a<16?"0"+a.toString(16):a.toString(16)}function O(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=65536+(e-55296<<10|c-56320)}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function P(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function Q(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function R(a){return V.toByteArray(M(a))}function S(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function T(a){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(a)}function U(a){return a!==a}var V=a("base64-js"),W=a("ieee754");c.Buffer=e,c.SlowBuffer=o,c.INSPECT_MAX_BYTES=50;var X=2147483647;c.kMaxLength=X,e.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()}catch(a){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(a,b,c){return f(a,b,c)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(a,b,c){return h(a,b,c)},e.allocUnsafe=function(a){return i(a)},e.allocUnsafeSlow=function(a){return i(a)},e.isBuffer=function(a){return null!=a&&!0===a._isBuffer},e.compare=function(a,b){if(!e.isBuffer(a)||!e.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,f=0,g=Math.min(c,d);f<g;++f)if(a[f]!==b[f]){c=a[f],d=b[f];break}return c<d?-1:d<c?1:0},e.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return e.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=e.allocUnsafe(b),f=0;for(c=0;c<a.length;++c){var g=a[c];if(!e.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,f),f+=g.length}return d},e.byteLength=p,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)r(this,b,b+1);return this},e.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)r(this,b,b+3),r(this,b+1,b+2);return this},e.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)r(this,b,b+7),r(this,b+1,b+6),r(this,b+2,b+5),r(this,b+3,b+4);return this},e.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?B(this,0,a):q.apply(this,arguments)},e.prototype.equals=function(a){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===e.compare(this,a)},e.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},e.prototype.compare=function(a,b,c,d,f){if(!e.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===f&&(f=this.length),b<0||c>a.length||d<0||f>this.length)throw new RangeError("out of range index");if(d>=f&&b>=c)return 0;if(d>=f)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,f>>>=0,this===a)return 0;for(var g=f-d,h=c-b,i=Math.min(g,h),j=this.slice(d,f),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){g=j[l],h=k[l];break}return g<h?-1:h<g?1:0},e.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},e.prototype.indexOf=function(a,b,c){return s(this,a,b,c,!0)},e.prototype.lastIndexOf=function(a,b,c){return s(this,a,b,c,!1)},e.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return u(this,a,b,c);case"utf8":case"utf-8":return v(this,a,b,c);case"ascii":return w(this,a,b,c);case"latin1":case"binary":return x(this,a,b,c);case"base64":return y(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Y=4096;e.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);var d=this.subarray(a,b);return d.__proto__=e.prototype,d},e.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},e.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},e.prototype.readUInt8=function(a,b){return a>>>=0,b||H(a,1,this.length),this[a]},e.prototype.readUInt16LE=function(a,b){return a>>>=0,b||H(a,2,this.length),this[a]|this[a+1]<<8},e.prototype.readUInt16BE=function(a,b){return a>>>=0,b||H(a,2,this.length),this[a]<<8|this[a+1]},e.prototype.readUInt32LE=function(a,b){return a>>>=0,b||H(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},e.prototype.readUInt32BE=function(a,b){return a>>>=0,b||H(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},e.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},e.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||H(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},e.prototype.readInt8=function(a,b){return a>>>=0,b||H(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},e.prototype.readInt16LE=function(a,b){a>>>=0,b||H(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},e.prototype.readInt16BE=function(a,b){a>>>=0,b||H(a,2,this.length);var c=this[a+1]|this[a]<<8
;return 32768&c?4294901760|c:c},e.prototype.readInt32LE=function(a,b){return a>>>=0,b||H(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},e.prototype.readInt32BE=function(a,b){return a>>>=0,b||H(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},e.prototype.readFloatLE=function(a,b){return a>>>=0,b||H(a,4,this.length),W.read(this,a,!0,23,4)},e.prototype.readFloatBE=function(a,b){return a>>>=0,b||H(a,4,this.length),W.read(this,a,!1,23,4)},e.prototype.readDoubleLE=function(a,b){return a>>>=0,b||H(a,8,this.length),W.read(this,a,!0,52,8)},e.prototype.readDoubleBE=function(a,b){return a>>>=0,b||H(a,8,this.length),W.read(this,a,!1,52,8)},e.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){I(this,a,b,c,Math.pow(2,8*c)-1,0)}var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},e.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){I(this,a,b,c,Math.pow(2,8*c)-1,0)}var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},e.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,1,255,0),this[b]=255&a,b+1},e.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},e.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},e.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},e.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},e.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},e.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},e.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},e.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},e.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},e.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||I(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},e.prototype.writeFloatLE=function(a,b,c){return K(this,a,b,!0,c)},e.prototype.writeFloatBE=function(a,b,c){return K(this,a,b,!1,c)},e.prototype.writeDoubleLE=function(a,b,c){return L(this,a,b,!0,c)},e.prototype.writeDoubleBE=function(a,b,c){return L(this,a,b,!1,c)},e.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(f<1e3)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},e.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var f=a.charCodeAt(0);f<256&&(a=f)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!e.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a&=255);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var g;if("number"==typeof a)for(g=b;g<c;++g)this[g]=a;else{var h=e.isBuffer(a)?a:new e(a,d),i=h.length;for(g=0;g<c-b;++g)this[g+b]=h[g%i]}return this};var Z=/[^+\/0-9A-Za-z-_]/g},{"base64-js":83,ieee754:277}],83:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h,i=a.length;g=d(a),h=new l(3*i/4-g),e=g>0?i-4:i;var j=0;for(b=0,c=0;b<e;b+=4,c+=3)f=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],h[j++]=f>>16&255,h[j++]=f>>8&255,h[j++]=255&f;return 2===g?(f=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,h[j++]=255&f):1===g&&(f=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,h[j++]=f>>8&255,h[j++]=255&f),h}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=0,i=c-d;g<i;g+=16383)f.push(h(a,g,g+16383>i?i:g+16383));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;n<o;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],84:[function(a,b,c){"use strict";function d(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function e(a,b){return a[0]-b[0]||a[1]-b[1]}function f(a){return a.map(d).sort(e)}function g(a,b,c){return b in a?a[b]:c}function h(a,b,c){Array.isArray(b)?(c=c||{},b=b||[]):(c=b||{},b=[]);var d=!!g(c,"delaunay",!0),e=!!g(c,"interior",!0),h=!!g(c,"exterior",!0),m=!!g(c,"infinity",!1);if(!e&&!h||0===a.length)return[];var n=i(a,b);if(d||e!==h||m){for(var o=j(a.length,f(b)),p=0;p<n.length;++p){var q=n[p];o.addTriangle(q[0],q[1],q[2])}return d&&k(a,o),h?e?m?l(o,0,m):o.cells():l(o,1,m):l(o,-1)}return n}var i=a("./lib/monotone"),j=a("./lib/triangulation"),k=a("./lib/delaunay"),l=a("./lib/filter");b.exports=h},{"./lib/delaunay":85,"./lib/filter":86,"./lib/monotone":87,"./lib/triangulation":88}],85:[function(a,b,c){"use strict";function d(a,b,c,d,e,g){var h=b.opposite(d,e);if(!(h<0)){if(e<d){var i=d;d=e,e=i,i=g,g=h,h=i}b.isConstraint(d,e)||f(a[d],a[e],a[g],a[h])<0&&c.push(d,e)}}function e(a,b){for(var c=[],e=a.length,g=b.stars,h=0;h<e;++h)for(var i=g[h],j=1;j<i.length;j+=2){var k=i[j];if(!(k<h)&&!b.isConstraint(h,k)){for(var l=i[j-1],m=-1,n=1;n<i.length;n+=2)if(i[n-1]===k){m=i[n];break}m<0||f(a[h],a[k],a[l],a[m])<0&&c.push(h,k)}}for(;c.length>0;){for(var k=c.pop(),h=c.pop(),l=-1,m=-1,i=g[h],o=1;o<i.length;o+=2){var p=i[o-1],q=i[o];p===k?m=q:q===k&&(l=p)}l<0||m<0||(f(a[h],a[k],a[l],a[m])>=0||(b.flip(h,k),d(a,b,c,l,h,m),d(a,b,c,h,m,l),d(a,b,c,m,k,l),d(a,b,c,k,l,m)))}}var f=a("robust-in-sphere")[4];a("binary-search-bounds");b.exports=e},{"binary-search-bounds":89,"robust-in-sphere":513}],86:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.cells=a,this.neighbor=b,this.flags=d,this.constraint=c,this.active=e,this.next=f,this.boundary=g}function e(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}function f(a,b){for(var c=a.cells(),f=c.length,g=0;g<f;++g){var h=c[g],i=h[0],j=h[1],k=h[2];j<k?j<i&&(h[0]=j,h[1]=k,h[2]=i):k<i&&(h[0]=k,h[1]=i,h[2]=j)}c.sort(e);for(var l=new Array(f),g=0;g<l.length;++g)l[g]=0;var m=[],n=[],o=new Array(3*f),p=new Array(3*f),q=null;b&&(q=[]);for(var r=new d(c,o,p,l,m,n,q),g=0;g<f;++g)for(var h=c[g],s=0;s<3;++s){var i=h[s],j=h[(s+1)%3],t=o[3*g+s]=r.locate(j,i,a.opposite(j,i)),u=p[3*g+s]=a.isConstraint(i,j);t<0&&(u?n.push(g):(m.push(g),l[g]=1),b&&q.push([j,i,-1]))}return r}function g(a,b,c){for(var d=0,e=0;e<a.length;++e)b[e]===c&&(a[d++]=a[e]);return a.length=d,a}function h(a,b,c){var d=f(a,c);if(0===b)return c?d.cells.concat(d.boundary):d.cells;for(var e=1,h=d.active,i=d.next,j=d.flags,k=d.cells,l=d.constraint,m=d.neighbor;h.length>0||i.length>0;){for(;h.length>0;){var n=h.pop();if(j[n]!==-e){j[n]=e;for(var o=(k[n],0);o<3;++o){var p=m[3*n+o];p>=0&&0===j[p]&&(l[3*n+o]?i.push(p):(h.push(p),j[p]=e))}}}var q=i;i=h,h=q,i.length=0,e=-e}var r=g(k,j,b);return c?r.concat(d.boundary):r}var i=a("binary-search-bounds");b.exports=h,d.prototype.locate=function(){var a=[0,0,0];return function(b,c,d){var f=b,g=c,h=d;return c<d?c<b&&(f=c,g=d,h=b):d<b&&(f=d,g=b,h=c),f<0?-1:(a[0]=f,a[1]=g,a[2]=h,i.eq(this.cells,a,e))}}()},{"binary-search-bounds":89}],87:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.a=a,this.b=b,this.idx=c,this.lowerIds=d,this.upperIds=e}function e(a,b,c,d){this.a=a,this.b=b,this.type=c,this.idx=d}function f(a,b){var c=a.a[0]-b.a[0]||a.a[1]-b.a[1]||a.type-b.type;return c||(a.type!==o&&(c=n(a.a,a.b,b.b))?c:a.idx-b.idx)}function g(a,b){return n(a.a,a.b,b)}function h(a,b,c,d,e){for(var f=m.lt(b,d,g),h=m.gt(b,d,g),i=f;i<h;++i){for(var j=b[i],k=j.lowerIds,l=k.length;l>1&&n(c[k[l-2]],c[k[l-1]],d)>0;)a.push([k[l-1],k[l-2],e]),l-=1;k.length=l,k.push(e);for(var o=j.upperIds,l=o.length;l>1&&n(c[o[l-2]],c[o[l-1]],d)<0;)a.push([o[l-2],o[l-1],e]),l-=1;o.length=l,o.push(e)}}function i(a,b){var c;return(c=a.a[0]<b.a[0]?n(a.a,a.b,b.a):n(b.b,b.a,a.a))?c:(c=b.b[0]<a.b[0]?n(a.a,a.b,b.b):n(b.b,b.a,a.b))||a.idx-b.idx}function j(a,b,c){var e=m.le(a,c,i),f=a[e],g=f.upperIds,h=g[g.length-1];f.upperIds=[h],a.splice(e+1,0,new d(c.a,c.b,c.idx,[h],g))}function k(a,b,c){var d=c.a;c.a=c.b,c.b=d;var e=m.eq(a,c,i),f=a[e];a[e-1].upperIds=f.upperIds,a.splice(e,1)}function l(a,b){for(var c=a.length,g=b.length,i=[],l=0;l<c;++l)i.push(new e(a[l],null,o,l));for(var l=0;l<g;++l){var m=b[l],n=a[m[0]],r=a[m[1]];n[0]<r[0]?i.push(new e(n,r,q,l),new e(r,n,p,l)):n[0]>r[0]&&i.push(new e(r,n,q,l),new e(n,r,p,l))}i.sort(f);for(var s=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),t=[new d([s,1],[s,0],-1,[],[],[],[])],u=[],l=0,v=i.length;l<v;++l){var w=i[l],x=w.type;x===o?h(u,t,a,w.a,w.idx):x===q?j(t,a,w):k(t,a,w)}return u}var m=a("binary-search-bounds"),n=a("robust-orientation")[3],o=0,p=1,q=2;b.exports=l},{"binary-search-bounds":89,"robust-orientation":515}],88:[function(a,b,c){"use strict";function d(a,b){this.stars=a,this.edges=b}function e(a,b,c){for(var d=1,e=a.length;d<e;d+=2)if(a[d-1]===b&&a[d]===c)return a[d-1]=a[e-2],a[d]=a[e-1],void(a.length=e-2)}function f(a,b){for(var c=new Array(a),e=0;e<a;++e)c[e]=[];return new d(c,b)}var g=a("binary-search-bounds");b.exports=f;var h=d.prototype;h.isConstraint=function(){function a(a,b){return a[0]-b[0]||a[1]-b[1]}var b=[0,0];return function(c,d){return b[0]=Math.min(c,d),b[1]=Math.max(c,d),g.eq(this.edges,b,a)>=0}}(),h.removeTriangle=function(a,b,c){var d=this.stars;e(d[a],b,c),e(d[b],c,a),e(d[c],a,b)},h.addTriangle=function(a,b,c){var d=this.stars;d[a].push(b,c),d[b].push(c,a),d[c].push(a,b)},h.opposite=function(a,b){for(var c=this.stars[b],d=1,e=c.length;d<e;d+=2)if(c[d]===a)return c[d-1];return-1},h.flip=function(a,b){var c=this.opposite(a,b),d=this.opposite(b,a);this.removeTriangle(a,b,c),this.removeTriangle(b,a,d),this.addTriangle(a,d,c),this.addTriangle(b,c,d)},h.edges=function(){for(var a=this.stars,b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;f+=2)b.push([e[f],e[f+1]]);return b},h.cells=function(){for(var a=this.stars,b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;f+=2){var h=e[f],i=e[f+1];c<Math.min(h,i)&&b.push([c,h,i])}return b}},{"binary-search-bounds":89}],89:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=["function ",a,"(a,l,h,",d.join(","),"){",e?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return e?b.indexOf("c")<0?f.push(";if(x===y){return m}else if(x<=y){"):f.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):f.push(";if(",b,"){i=m;"),c?f.push("l=m+1}else{h=m-1}"):f.push("h=m-1}else{l=m+1}"),f.push("}"),e?f.push("return -1};"):f.push("return i};"),f.join("")}function e(a,b,c,e){return new Function([d("A","x"+a+"y",b,["y"],e),d("P","c(x,y)"+a+"0",b,["y","c"],e),"function dispatchBsearch",c,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",c].join(""))()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],90:[function(a,b,c){"use strict";function d(a){for(var b=1,c=1;c<a.length;++c)for(var d=0;d<c;++d)if(a[c]<a[d])b=-b;else if(a[d]===a[c])return 0;return b}b.exports=d},{}],91:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=a.length,e=0;e<d;++e)c+=a[e]*b[e];return c}function e(a){var b=a.length;if(0===b)return[];var c=(a[0].length,g([a.length+1,a.length+1],1)),e=g([a.length+1],1);c[b][b]=0;for(var f=0;f<b;++f){for(var i=0;i<=f;++i)c[i][f]=c[f][i]=2*d(a[f],a[i]);e[f]=d(a[f],a[f])}for(var j=h(c,e),k=0,l=j[b+1],f=0;f<l.length;++f)k+=l[f];for(var m=new Array(b),f=0;f<b;++f){for(var l=j[f],n=0,i=0;i<l.length;++i)n+=l[i];m[f]=n/k}return m}function f(a){if(0===a.length)return[];for(var b=a[0].length,c=g([b]),d=e(a),f=0;f<a.length;++f)for(var h=0;h<b;++h)c[h]+=a[f][h]*d[f];return c}var g=a("dup"),h=a("robust-linear-solve");f.barycenetric=e,b.exports=f},{dup:134,"robust-linear-solve":514}],92:[function(a,b,c){function d(a){for(var b=e(a),c=0,d=0;d<a.length;++d)for(var f=a[d],g=0;g<b.length;++g)c+=Math.pow(f[g]-b[g],2);return Math.sqrt(c/a.length)}b.exports=d;var e=a("circumcenter")},{circumcenter:91}],93:[function(a,b,c){function d(a,b,c){return b<c?a<b?b:a>c?c:a:a<c?c:a>b?b:a}b.exports=d},{}],94:[function(a,b,c){"use strict";function d(a){var b=v(a);return[x(b,-1/0),x(b,1/0)]}function e(a,b){for(var c=new Array(b.length),d=0;d<b.length;++d){var e=b[d],f=a[e[0]],g=a[e[1]];c[d]=[x(Math.min(f[0],g[0]),-1/0),x(Math.min(f[1],g[1]),-1/0),x(Math.max(f[0],g[0]),1/0),x(Math.max(f[1],g[1]),1/0)]}return c}function f(a){for(var b=new Array(a.length),c=0;c<a.length;++c){var d=a[c];b[c]=[x(d[0],-1/0),x(d[1],-1/0),x(d[0],1/0),x(d[1],1/0)]}return b}function g(a,b,c){var d=[];return r(c,function(c,e){var f=b[c],g=b[e];if(f[0]!==g[0]&&f[0]!==g[1]&&f[1]!==g[0]&&f[1]!==g[1]){var h=a[f[0]],i=a[f[1]],j=a[g[0]],k=a[g[1]];s(h,i,j,k)&&d.push([c,e])}}),d}function h(a,b,c,d){var e=[];return r(c,d,function(c,d){var f=b[c];if(f[0]!==d&&f[1]!==d){var g=a[d],h=a[f[0]],i=a[f[1]];s(h,i,g,g)&&e.push([c,d])}}),e}function i(a,b,c,d,e){var f,g,h=a.map(function(a){return[t(a[0]),t(a[1])]});for(f=0;f<c.length;++f){var i=c[f];g=i[0];var j=i[1],k=b[g],l=b[j],m=y(w(a[k[0]]),w(a[k[1]]),w(a[l[0]]),w(a[l[1]]));if(m){var n=a.length;a.push([v(m[0]),v(m[1])]),h.push(m),d.push([g,n],[j,n])}}for(d.sort(function(a,b){if(a[0]!==b[0])return a[0]-b[0];var c=h[a[1]],d=h[b[1]];return u(c[0],d[0])||u(c[1],d[1])}),f=d.length-1;f>=0;--f){var o=d[f];g=o[0];var p=b[g],q=p[0],r=p[1],s=a[q],x=a[r];if((s[0]-x[0]||s[1]-x[1])<0){var z=q;q=r,r=z}p[0]=q;var A,B=p[1]=o[1];for(e&&(A=p[2]);f>0&&d[f-1][0]===g;){var o=d[--f],C=o[1];e?b.push([B,C,A]):b.push([B,C]),B=C}e?b.push([B,r,A]):b.push([B,r])}return h}function j(a,b,c){for(var e=b.length,f=new q(e),g=[],h=0;h<b.length;++h){var i=b[h],j=d(i[0]),k=d(i[1]);g.push([x(j[0],-1/0),x(k[0],-1/0),x(j[1],1/0),x(k[1],1/0)])}r(g,function(a,b){f.link(a,b)});for(var l=!0,m=new Array(e),h=0;h<e;++h){var n=f.find(h);n!==h&&(l=!1,a[n]=[Math.min(a[h][0],a[n][0]),Math.min(a[h][1],a[n][1])])}if(l)return null;for(var o=0,h=0;h<e;++h){var n=f.find(h);n===h?(m[h]=o,a[o++]=a[h]):m[h]=-1}a.length=o;for(var h=0;h<e;++h)m[h]<0&&(m[h]=m[f.find(h)]);return m}function k(a,b){return a[0]-b[0]||a[1]-b[1]}function l(a,b){var c=a[0]-b[0]||a[1]-b[1];return c||(a[2]<b[2]?-1:a[2]>b[2]?1:0)}function m(a,b,c){if(0!==a.length){if(b)for(var d=0;d<a.length;++d){var e=a[d],f=b[e[0]],g=b[e[1]];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}else for(var d=0;d<a.length;++d){var e=a[d],f=e[0],g=e[1];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}c?a.sort(l):a.sort(k);for(var h=1,d=1;d<a.length;++d){var i=a[d-1],j=a[d];(j[0]!==i[0]||j[1]!==i[1]||c&&j[2]!==i[2])&&(a[h++]=j)}a.length=h}}function n(a,b,c){var d=j(a,[],f(a));return m(b,d,c),!!d}function o(a,b,c){var d=e(a,b),k=g(a,b,d),l=f(a),n=h(a,b,d,l),o=i(a,b,k,n,c),p=j(a,o,l);return m(b,p,c),!!p||(k.length>0||n.length>0)}function p(a,b,c){var d;if(c){d=b;for(var e=new Array(b.length),f=0;f<b.length;++f){var g=b[f];e[f]=[g[0],g[1],c[f]]}b=e}for(var h=n(a,b,!!c);o(a,b,!!c);)h=!0;if(c&&h){d.length=0,c.length=0;for(var f=0;f<b.length;++f){var g=b[f];d.push([g[0],g[1]]),c.push(g[2])}}return h}b.exports=p;var q=a("union-find"),r=a("box-intersect"),s=a("robust-segment-intersect"),t=a("big-rat"),u=a("big-rat/cmp"),v=a("big-rat/to-float"),w=a("rat-vec"),x=a("nextafter"),y=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":95,"big-rat":57,"big-rat/cmp":55,"big-rat/to-float":69,"box-intersect":75,nextafter:459,"rat-vec":496,"robust-segment-intersect":518,"union-find":555}],95:[function(a,b,c){"use strict";function d(a,b){return h(f(a[0],b[1]),f(a[1],b[0]))}function e(a,b,c,e){var f=j(b,a),h=j(e,c),m=d(f,h);if(0===i(m))return null;var n=j(a,c),o=d(h,n),p=g(o,m),q=l(f,p);return k(a,q)}b.exports=e;var f=a("big-rat/mul"),g=a("big-rat/div"),h=a("big-rat/sub"),i=a("big-rat/sign"),j=a("rat-vec/sub"),k=a("rat-vec/add"),l=a("rat-vec/muls")},{"big-rat/div":56,"big-rat/mul":66,"big-rat/sign":67,"big-rat/sub":68,"rat-vec/add":495,"rat-vec/muls":497,"rat-vec/sub":498}],96:[function(a,b,c){(function(a){var c=function(){"use strict";function b(c,d,e,f){function h(c,e){if(null===c)return null;if(0==e)return c;var l,m;if("object"!=typeof c)return c;if(b.__isArray(c))l=[];else if(b.__isRegExp(c))l=new RegExp(c.source,g(c)),c.lastIndex&&(l.lastIndex=c.lastIndex);else if(b.__isDate(c))l=new Date(c.getTime());else{if(k&&a.isBuffer(c))return l=new a(c.length),c.copy(l),l;void 0===f?(m=Object.getPrototypeOf(c),l=Object.create(m)):(l=Object.create(f),m=f)}if(d){var n=i.indexOf(c);if(-1!=n)return j[n];i.push(c),j.push(l)}for(var o in c){var p;m&&(p=Object.getOwnPropertyDescriptor(m,o)),p&&null==p.set||(l[o]=h(c[o],e-1))}return l}"object"==typeof d&&(e=d.depth,f=d.prototype,d.filter,d=d.circular);var i=[],j=[],k=void 0!==a;return void 0===d&&(d=!0),void 0===e&&(e=1/0),h(c,e)}function c(a){return Object.prototype.toString.call(a)}function d(a){return"object"==typeof a&&"[object Date]"===c(a)}function e(a){return"object"==typeof a&&"[object Array]"===c(a)}function f(a){return"object"==typeof a&&"[object RegExp]"===c(a)}function g(a){var b="";return a.global&&(b+="g"),a.ignoreCase&&(b+="i"),a.multiline&&(b+="m"),b}return b.clonePrototype=function(a){if(null===a)return null;var b=function(){};return b.prototype=a,new b},b.__objToStr=c,b.__isDate=d,b.__isArray=e,b.__isRegExp=f,b.__getRegExpFlags=g,b}();"object"==typeof b&&b.exports&&(b.exports=c)}).call(this,a("buffer").Buffer)},{buffer:82}],97:[function(a,b,c){"use strict";function d(a,b){null==b&&(b=!0);var c=a[0],d=a[1],e=a[2],g=a[3];return null==g&&(g=b?1:255),b&&(c*=255,d*=255,e*=255,g*=255),c=255&f(c,0,255),d=255&f(d,0,255),e=255&f(e,0,255),g=255&f(g,0,255),16777216*c+(d<<16)+(e<<8)+g}function e(a,b){a=+a;var c=a>>>24,d=(16711680&a)>>>16,e=(65280&a)>>>8,f=255&a;return!1===b?[c,d,e,f]:[c/255,d/255,e/255,f/255]}var f=a("clamp");b.exports=d,b.exports.to=d,b.exports.from=e},{clamp:93}],98:[function(a,b,c){"use strict";b.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],99:[function(a,b,c){"use strict";var d=a("color-rgba"),e=a("clamp"),f=a("dtype");b.exports=function(a,b){"float"!==b&&b||(b="array"),"uint"===b&&(b="uint8"),"uint_clamped"===b&&(b="uint8_clamped");var c=f(b),g=new c(4);if(a instanceof c)return Array.isArray(a)?a.slice():(g.set(a),g);var h="uint8"!==b&&"uint8_clamped"!==b;return a instanceof Uint8Array||a instanceof Uint8ClampedArray?(g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=null!=a[3]?a[3]:255,h&&(g[0]/=255,g[1]/=255,g[2]/=255,g[3]/=255),g):(a.length&&"string"!=typeof a||(a=d(a),a[0]/=255,a[1]/=255,a[2]/=255),h?(g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=null!=a[3]?a[3]:1):(g[0]=e(Math.round(255*a[0]),0,255),g[1]=e(Math.round(255*a[1]),0,255),g[2]=e(Math.round(255*a[2]),0,255),g[3]=null==a[3]?255:e(Math.floor(255*a[3]),0,255)),g)}},{clamp:93,"color-rgba":101,dtype:133}],100:[function(a,b,c){(function(c){"use strict";function d(a){var b,d,i=[],j=1;if("string"==typeof a)if(e[a])i=e[a].slice(),d="rgb";else if("transparent"===a)j=0,d="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var k=a.slice(1),l=k.length,m=l<=4;j=1,m?(i=[parseInt(k[0]+k[0],16),parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16)],4===l&&(j=parseInt(k[3]+k[3],16)/255)):(i=[parseInt(k[0]+k[1],16),parseInt(k[2]+k[3],16),parseInt(k[4]+k[5],16)],8===l&&(j=parseInt(k[6]+k[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),d="rgb"}else if(b=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var n=b[1],k=n.replace(/a$/,"");d=k;var l="cmyk"===k?4:"gray"===k?1:3;i=b[2].trim().split(/\s*,\s*/).map(function(a,b){if(/%$/.test(a))return b===l?parseFloat(a)/100:"rgb"===k?255*parseFloat(a)/100:parseFloat(a);if("h"===k[b]){if(/deg$/.test(a))return parseFloat(a);if(void 0!==h[a])return h[a]}return parseFloat(a)}),n===k&&i.push(1),j=void 0===i[l]?1:i[l],i=i.slice(0,l)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(i=a.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),d=a.match(/([a-z])/gi).join("").toLowerCase());else if("number"==typeof a)d="rgb",i=[a>>>16,(65280&a)>>>8,255&a];else if(f(a)){var o=g(a.r,a.red,a.R,null);null!==o?(d="rgb",i=[o,g(a.g,a.green,a.G),g(a.b,a.blue,a.B)]):(d="hsl",i=[g(a.h,a.hue,a.H),g(a.s,a.saturation,a.S),g(a.l,a.lightness,a.L,a.b,a.brightness)]),j=g(a.a,a.alpha,a.opacity,1),null!=a.opacity&&(j/=100)}else(Array.isArray(a)||c.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(i=[a[0],a[1],a[2]],d="rgb",j=4===a.length?a[3]:1);return{space:d,values:i,alpha:j}}var e=a("color-name"),f=a("is-plain-obj"),g=a("defined");b.exports=d;var h={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":98,defined:129,"is-plain-obj":286}],101:[function(a,b,c){"use strict";var d=a("color-parse"),e=a("color-space/hsl"),f=a("clamp");b.exports=function(a){var b;if("string"!=typeof a)throw Error("Argument should be a string");var c=d(a);return c.space?(b=Array(3),b[0]=f(c.values[0],0,255),b[1]=f(c.values[1],0,255),b[2]=f(c.values[2],0,255),"h"===c.space[0]&&(b=e.rgb(b)),b.push(f(c.alpha,0,1)),b):[]}},{clamp:93,"color-parse":100,"color-space/hsl":102}],102:[function(a,b,c){"use strict";var d=a("./rgb");b.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(a){var b,c,d,e,f,g=a[0]/360,h=a[1]/100,i=a[2]/100;if(0===h)return f=255*i,[f,f,f];c=i<.5?i*(1+h):i+h-i*h,b=2*i-c,e=[0,0,0];for(var j=0;j<3;j++)d=g+1/3*-(j-1),d<0?d++:d>1&&d--,f=6*d<1?b+6*(c-b)*d:2*d<1?c:3*d<2?b+(c-b)*(2/3-d)*6:b,e[j]=255*f;return e}},d.hsl=function(a){var b,c,d,e=a[0]/255,f=a[1]/255,g=a[2]/255,h=Math.min(e,f,g),i=Math.max(e,f,g),j=i-h;return i===h?b=0:e===i?b=(f-g)/j:f===i?b=2+(g-e)/j:g===i&&(b=4+(e-f)/j),b=Math.min(60*b,360),b<0&&(b+=360),d=(h+i)/2,c=i===h?0:d<=.5?j/(i+h):j/(2-i-h),[b,100*c,100*d]}},{"./rgb":103}],103:[function(a,b,c){"use strict";b.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],104:[function(a,b,c){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],
cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],105:[function(a,b,c){"use strict";function d(a){var b,c,d,j,k,l,m,n,o,p,q,r,s,t=[],u=[],v=[],w=[];if(g.isPlainObject(a)||(a={}),o=a.nshades||72,n=a.format||"hex",m=a.colormap,m||(m="jet"),"string"==typeof m){if(m=m.toLowerCase(),!i[m])throw Error(m+" not a supported colorscale");l=h(i[m])}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);l=h(m)}if(l.length>o)throw new Error(m+" map requires nshades to be at least size "+l.length);for(q=Array.isArray(a.alpha)?2!==a.alpha.length?[1,1]:h(a.alpha):"number"==typeof a.alpha?[a.alpha,a.alpha]:[1,1],b=l.map(function(a){return Math.round(a.index*o)}),q[0]<0&&(q[0]=0),q[1]<0&&(q[0]=0),q[0]>1&&(q[0]=1),q[1]>1&&(q[0]=1),s=0;s<b.length;++s)r=l[s].index,c=l[s].rgb,4===c.length&&c[3]>=0&&c[3]<=1||(c[3]=q[0]+(q[1]-q[0])*r);for(s=0;s<b.length-1;++s)k=b[s+1]-b[s],d=l[s].rgb,j=l[s+1].rgb,t=t.concat(g.linspace(d[0],j[0],k)),u=u.concat(g.linspace(d[1],j[1],k)),v=v.concat(g.linspace(d[2],j[2],k)),w=w.concat(g.linspace(d[3],j[3],k));return t=t.map(Math.round),u=u.map(Math.round),v=v.map(Math.round),p=g.zip(t,u,v,w),"hex"===n&&(p=p.map(e)),"rgbaString"===n&&(p=p.map(f)),p}function e(a){for(var b,c="#",d=0;d<3;++d)b=a[d],b=b.toString(16),c+=("00"+b).substr(b.length);return c}function f(a){return"rgba("+a.join(",")+")"}var g=a("arraytools"),h=a("clone"),i=a("./colorScales");b.exports=d},{"./colorScales":104,arraytools:50,clone:96}],106:[function(a,b,c){"use strict";function d(a,b,c){var d=h(a[0],-b[0]),e=h(a[1],-b[1]),f=h(c[0],-b[0]),g=h(c[1],-b[1]),k=j(i(d,f),i(e,g));return k[k.length-1]>=0}function e(a,b,c,e){var h=f(b,c,e);if(0===h){var i=g(f(a,b,c)),j=g(f(a,b,e));if(i===j){if(0===i){var k=d(a,b,c);return k===d(a,b,e)?0:k?1:-1}return 0}return 0===j?i>0?-1:d(a,b,e)?-1:1:0===i?j>0?1:d(a,b,c)?1:-1:g(j-i)}var l=f(a,b,c);return l>0?h>0&&f(a,b,e)>0?1:-1:l<0?h>0||f(a,b,e)>0?1:-1:f(a,b,e)>0?1:d(a,b,c)?1:-1}b.exports=e;var f=a("robust-orientation"),g=a("signum"),h=a("two-sum"),i=a("robust-product"),j=a("robust-sum")},{"robust-orientation":515,"robust-product":516,"robust-sum":520,signum:522,"two-sum":553}],107:[function(a,b,c){function d(a,b){return a-b}function e(a,b){var c=a.length,e=a.length-b.length;if(e)return e;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||f(a[0],a[1])-f(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(e=g+a[2]-(h+b[2]))return e;var i=f(a[0],a[1]),j=f(b[0],b[1]);return f(i,a[2])-f(j,b[2])||f(i+a[2],g)-f(j+b[2],h);case 4:var k=a[0],l=a[1],m=a[2],n=a[3],o=b[0],p=b[1],q=b[2],r=b[3];return k+l+m+n-(o+p+q+r)||f(k,l,m,n)-f(o,p,q,r,o)||f(k+l,k+m,k+n,l+m,l+n,m+n)-f(o+p,o+q,o+r,p+q,p+r,q+r)||f(k+l+m,k+l+n,k+m+n,l+m+n)-f(o+p+q,o+p+r,o+q+r,p+q+r);default:for(var s=a.slice().sort(d),t=b.slice().sort(d),u=0;u<c;++u)if(e=s[u]-t[u])return e;return 0}}b.exports=e;var f=Math.min},{}],108:[function(a,b,c){"use strict";function d(a,b){return e(a,b)||f(a)-f(b)}var e=a("compare-cell"),f=a("cell-orientation");b.exports=d},{"cell-orientation":90,"compare-cell":107}],109:[function(a,b,c){"use strict";function d(a){var b=a.length;if(0===b)return[];if(1===b)return[[0]];var c=a[0].length;return 0===c?[]:1===c?e(a):2===c?f(a):g(a,c)}var e=a("./lib/ch1d"),f=a("./lib/ch2d"),g=a("./lib/chnd");b.exports=d},{"./lib/ch1d":110,"./lib/ch2d":111,"./lib/chnd":112}],110:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0,d=1;d<a.length;++d)a[d][0]<a[b][0]&&(b=d),a[d][0]>a[c][0]&&(c=d);return b<c?[[b],[c]]:b>c?[[c],[b]]:[[b]]}b.exports=d},{}],111:[function(a,b,c){"use strict";function d(a){var b=e(a),c=b.length;if(c<=2)return[];for(var d=new Array(c),f=b[c-1],g=0;g<c;++g){var h=b[g];d[g]=[f,h],f=h}return d}b.exports=d;var e=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":442}],112:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),e=0;e<b.length;++e)d[e]=a[b[e]];for(var f=b.length,e=0;e<c;++e)b.indexOf(e)<0&&(d[f++]=a[e]);return d}function e(a,b){for(var c=a.length,d=b.length,e=0;e<c;++e)for(var f=a[e],g=0;g<f.length;++g){var h=f[g];if(h<d)f[g]=b[h];else{h-=d;for(var i=0;i<d;++i)h>=b[i]&&(h+=1);f[g]=h}}return a}function f(a,b){try{return g(a,!0)}catch(j){var c=h(a);if(c.length<=b)return[];var f=d(a,c),i=g(f,!0);return e(i,c)}}b.exports=f;var g=a("incremental-convex-hull"),h=a("affine-hull")},{"affine-hull":45,"incremental-convex-hull":278}],113:[function(a,b,c){b.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],114:[function(a,b,c){function d(a){return a=Math.round(a),a<0?0:a>255?255:a}function e(a){return a<0?0:a>1?1:a}function f(a){return d("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function g(a){return e("%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a))}function h(a,b,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?a+(b-a)*c*6:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a}function i(a){var b=a.replace(/ /g,"").toLowerCase();if(b in j)return j[b].slice();if("#"===b[0]){if(4===b.length){var c=parseInt(b.substr(1),16);return c>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null}if(7===b.length){var c=parseInt(b.substr(1),16);return c>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null}return null}var e=b.indexOf("("),i=b.indexOf(")");if(-1!==e&&i+1===b.length){var k=b.substr(0,e),l=b.substr(e+1,i-(e+1)).split(","),m=1;switch(k){case"rgba":if(4!==l.length)return null;m=g(l.pop());case"rgb":return 3!==l.length?null:[f(l[0]),f(l[1]),f(l[2]),m];case"hsla":if(4!==l.length)return null;m=g(l.pop());case"hsl":if(3!==l.length)return null;var n=(parseFloat(l[0])%360+360)%360/360,o=g(l[1]),p=g(l[2]),q=p<=.5?p*(o+1):p+o-p*o,r=2*p-q;return[d(255*h(r,q,n+1/3)),d(255*h(r,q,n)),d(255*h(r,q,n-1/3)),m];default:return null}}return null}var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{c.parseCSSColor=i}catch(a){}},{}],115:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=6*e*e-6*e,h=3*e*e-4*e+1,i=-6*e*e+6*e,j=3*e*e-2*e;if(a.length){f||(f=new Array(a.length));for(var k=a.length-1;k>=0;--k)f[k]=g*a[k]+h*b[k]+i*c[k]+j*d[k];return f}return g*a+h*b+i*c[k]+j*d}function e(a,b,c,d,e,f){var g=e-1,h=e*e,i=g*g,j=(1+2*e)*i,k=e*i,l=h*(3-2*e),m=h*g;if(a.length){f||(f=new Array(a.length));for(var n=a.length-1;n>=0;--n)f[n]=j*a[n]+k*b[n]+l*c[n]+m*d[n];return f}return j*a+k*b+l*c+m*d}b.exports=e,b.exports.derivative=d},{}],116:[function(a,b,c){"use strict";function d(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function e(a){var b=new d;b.pre=a.pre,b.body=a.body,b.post=a.post;var c=a.args.slice(0);b.argTypes=c;for(var e=0;e<c.length;++e){var g=c[e];if("array"===g||"object"==typeof g&&g.blockIndices){if(b.argTypes[e]="array",b.arrayArgs.push(e),b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0),b.shimArgs.push("array"+e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array args");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===g)b.scalarArgs.push(e),b.shimArgs.push("scalar"+e);else if("index"===g){if(b.indexArgs.push(e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array index");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array index");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===g){if(b.shapeArgs.push(e),e<b.pre.args.length&&b.pre.args[e].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array shape");if(e<b.post.args.length&&b.post.args[e].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof g||!g.offset)throw new Error("cwise: Unknown argument type "+c[e]);b.argTypes[e]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(e)}}if(b.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(b.pre.args.length>c.length)throw new Error("cwise: Too many arguments in pre() block");if(b.body.args.length>c.length)throw new Error("cwise: Too many arguments in body() block");if(b.post.args.length>c.length)throw new Error("cwise: Too many arguments in post() block");return b.debug=!!a.printCode||!!a.debug,b.funcName=a.funcName||"cwise",b.blockSize=a.blockSize||64,f(b)}var f=a("./lib/thunk.js");b.exports=e},{"./lib/thunk.js":118}],117:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=a.length,g=b.arrayArgs.length,h=b.indexArgs.length>0,i=[],j=[],k=0,l=0;for(d=0;d<f;++d)j.push(["i",d,"=0"].join(""));for(e=0;e<g;++e)for(d=0;d<f;++d)l=k,k=a[d],0===d?j.push(["d",e,"s",d,"=t",e,"p",k].join("")):j.push(["d",e,"s",d,"=(t",e,"p",k,"-s",l,"*t",e,"p",l,")"].join(""));for(j.length>0&&i.push("var "+j.join(",")),d=f-1;d>=0;--d)k=a[d],i.push(["for(i",d,"=0;i",d,"<s",k,";++i",d,"){"].join(""));for(i.push(c),d=0;d<f;++d){for(l=k,k=a[d],e=0;e<g;++e)i.push(["p",e,"+=d",e,"s",d].join(""));h&&(d>0&&i.push(["index[",l,"]-=s",l].join("")),i.push(["++index[",k,"]"].join(""))),i.push("}")}return i.join("\n")}function e(a,b,c,e){for(var f=b.length,g=c.arrayArgs.length,h=c.blockSize,i=c.indexArgs.length>0,j=[],k=0;k<g;++k)j.push(["var offset",k,"=p",k].join(""));for(var k=a;k<f;++k)j.push(["for(var j"+k+"=SS[",b[k],"]|0;j",k,">0;){"].join("")),j.push(["if(j",k,"<",h,"){"].join("")),j.push(["s",b[k],"=j",k].join("")),j.push(["j",k,"=0"].join("")),j.push(["}else{s",b[k],"=",h].join("")),j.push(["j",k,"-=",h,"}"].join("")),i&&j.push(["index[",b[k],"]=j",k].join(""));for(var k=0;k<g;++k){for(var l=["offset"+k],m=a;m<f;++m)l.push(["j",m,"*t",k,"p",b[m]].join(""));j.push(["p",k,"=(",l.join("+"),")"].join(""))}j.push(d(b,c,e));for(var k=a;k<f;++k)j.push("}");return j.join("\n")}function f(a){for(var b=0,c=a[0].length;b<c;){for(var d=1;d<a.length;++d)if(a[d][b]!==a[0][b])return b;++b}return b}function g(a,b,c){for(var d=a.body,e=[],f=[],g=0;g<a.args.length;++g){var h=a.args[g];if(!(h.count<=0)){var i=new RegExp(h.name,"g"),j="",k=b.arrayArgs.indexOf(g);switch(b.argTypes[g]){case"offset":var l=b.offsetArgIndex.indexOf(g);k=b.offsetArgs[l].array,j="+q"+l;case"array":j="p"+k+j;var m="l"+g,n="a"+k;if(0===b.arrayBlockIndices[k])1===h.count?"generic"===c[k]?h.lvalue?(e.push(["var ",m,"=",n,".get(",j,")"].join("")),d=d.replace(i,m),f.push([n,".set(",j,",",m,")"].join(""))):d=d.replace(i,[n,".get(",j,")"].join("")):d=d.replace(i,[n,"[",j,"]"].join("")):"generic"===c[k]?(e.push(["var ",m,"=",n,".get(",j,")"].join("")),d=d.replace(i,m),h.lvalue&&f.push([n,".set(",j,",",m,")"].join(""))):(e.push(["var ",m,"=",n,"[",j,"]"].join("")),d=d.replace(i,m),h.lvalue&&f.push([n,"[",j,"]=",m].join("")));else{for(var o=[h.name],p=[j],q=0;q<Math.abs(b.arrayBlockIndices[k]);q++)o.push("\\s*\\[([^\\]]+)\\]"),p.push("$"+(q+1)+"*t"+k+"b"+q);if(i=new RegExp(o.join(""),"g"),j=p.join("+"),"generic"===c[k])throw new Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(i,[n,"[",j,"]"].join(""))}break;case"scalar":d=d.replace(i,"Y"+b.scalarArgs.indexOf(g));break;case"index":d=d.replace(i,"index");break;case"shape":d=d.replace(i,"shape")}}}return[e.join("\n"),d,f.join("\n")].join("\n").trim()}function h(a){for(var b=new Array(a.length),c=!0,d=0;d<a.length;++d){var e=a[d],f=e.match(/\d+/);f=f?f[0]:"",0===e.charAt(0)?b[d]="u"+e.charAt(1)+f:b[d]=e.charAt(0)+f,d>0&&(c=c&&b[d]===b[d-1])}return c?b[0]:b.join("")}function i(a,b){for(var c=b[1].length-Math.abs(a.arrayBlockIndices[0])|0,i=new Array(a.arrayArgs.length),k=new Array(a.arrayArgs.length),l=0;l<a.arrayArgs.length;++l)k[l]=b[2*l],i[l]=b[2*l+1];for(var m=[],n=[],o=[],p=[],q=[],l=0;l<a.arrayArgs.length;++l){a.arrayBlockIndices[l]<0?(o.push(0),p.push(c),m.push(c),n.push(c+a.arrayBlockIndices[l])):(o.push(a.arrayBlockIndices[l]),p.push(a.arrayBlockIndices[l]+c),m.push(0),n.push(a.arrayBlockIndices[l]));for(var r=[],s=0;s<i[l].length;s++)o[l]<=i[l][s]&&i[l][s]<p[l]&&r.push(i[l][s]-o[l]);q.push(r)}for(var t=["SS"],u=["'use strict'"],v=[],s=0;s<c;++s)v.push(["s",s,"=SS[",s,"]"].join(""));for(var l=0;l<a.arrayArgs.length;++l){t.push("a"+l),t.push("t"+l),t.push("p"+l);for(var s=0;s<c;++s)v.push(["t",l,"p",s,"=t",l,"[",o[l]+s,"]"].join(""));for(var s=0;s<Math.abs(a.arrayBlockIndices[l]);++s)v.push(["t",l,"b",s,"=t",l,"[",m[l]+s,"]"].join(""))}for(var l=0;l<a.scalarArgs.length;++l)t.push("Y"+l);if(a.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),a.indexArgs.length>0){for(var w=new Array(c),l=0;l<c;++l)w[l]="0";v.push(["index=[",w.join(","),"]"].join(""))}for(var l=0;l<a.offsetArgs.length;++l){for(var x=a.offsetArgs[l],y=[],s=0;s<x.offset.length;++s)0!==x.offset[s]&&(1===x.offset[s]?y.push(["t",x.array,"p",s].join("")):y.push([x.offset[s],"*t",x.array,"p",s].join("")));0===y.length?v.push("q"+l+"=0"):v.push(["q",l,"=",y.join("+")].join(""))}var z=j([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));v=v.concat(z),v.length>0&&u.push("var "+v.join(","));for(var l=0;l<a.arrayArgs.length;++l)u.push("p"+l+"|=0");a.pre.body.length>3&&u.push(g(a.pre,a,k));var A=g(a.body,a,k),B=f(q);B<c?u.push(e(B,q[0],a,A)):u.push(d(q[0],a,A)),a.post.body.length>3&&u.push(g(a.post,a,k)),a.debug&&console.log("-----Generated cwise routine for ",b,":\n"+u.join("\n")+"\n----------");var C=[a.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",B,h(k)].join("");return new Function(["function ",C,"(",t.join(","),"){",u.join("\n"),"} return ",C].join(""))()}var j=a("uniq");b.exports=i},{uniq:556}],118:[function(a,b,c){"use strict";function d(a){var b=["'use strict'","var CACHED={}"],c=[],d=a.funcName+"_cwise_thunk";b.push(["return function ",d,"(",a.shimArgs.join(","),"){"].join(""));for(var f=[],g=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],i=[],j=[],k=0;k<a.arrayArgs.length;++k){var l=a.arrayArgs[k];c.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),f.push("t"+l),f.push("r"+l),g.push("t"+l),g.push("r"+l+".join()"),h.push("array"+l+".data"),h.push("array"+l+".stride"),h.push("array"+l+".offset|0"),k>0&&(i.push("array"+a.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[k]))),j.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[k])+"]"))}a.arrayArgs.length>1&&(b.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),b.push("if (!("+j.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(var k=0;k<a.scalarArgs.length;++k)h.push("scalar"+a.scalarArgs[k]);return c.push(["type=[",g.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),b.push("var "+c.join(",")),b.push(["if(!proc){","CACHED[type]=proc=compile([",f.join(","),"])}","return proc(",h.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------"),new Function("compile",b.join("\n"))(e.bind(void 0,a))}var e=a("./compile.js");b.exports=d},{"./compile.js":117}],119:[function(a,b,c){b.exports=a("cwise-compiler")},{"cwise-compiler":116}],120:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(a){return function(b,c){return g(a(b),c)}}function c(a,b){return[a,b]}function d(a,b,c){var d=(b-a)/Math.max(0,c),e=Math.floor(Math.log(d)/Math.LN10),f=d/Math.pow(10,e);return e>=0?(f>=y?10:f>=z?5:f>=A?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(f>=y?10:f>=z?5:f>=A?2:1)}function e(a,b,c){var d=Math.abs(b-a)/Math.max(0,c),e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),f=d/e;return f>=y?e*=10:f>=z?e*=5:f>=A&&(e*=2),b<a?-e:e}function f(a){return a.length}var g=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},h=function(a){return 1===a.length&&(a=b(a)),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}},i=h(g),j=i.right,k=i.left,l=function(a,b){null==b&&(b=c);for(var d=0,e=a.length-1,f=a[0],g=new Array(e<0?0:e);d<e;)g[d]=b(f,f=a[++d]);return g},m=function(a,b,d){var e,f,g,h,i=a.length,j=b.length,k=new Array(i*j);for(null==d&&(d=c),e=g=0;e<i;++e)for(h=a[e],f=0;f<j;++f,++g)k[g]=d(h,b[f]);return k},n=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},o=function(a){return null===a?NaN:+a},p=function(a,b){var c,d,e=a.length,f=0,g=-1,h=0,i=0;if(null==b)for(;++g<e;)isNaN(c=o(a[g]))||(d=c-h,h+=d/++f,i+=d*(c-h));else for(;++g<e;)isNaN(c=o(b(a[g],g,a)))||(d=c-h,h+=d/++f,i+=d*(c-h));if(f>1)return i/(f-1)},q=function(a,b){var c=p(a,b);return c?Math.sqrt(c):c},r=function(a,b){var c,d,e,f=a.length,g=-1;if(null==b){for(;++g<f;)if(null!=(c=a[g])&&c>=c)for(d=e=c;++g<f;)null!=(c=a[g])&&(d>c&&(d=c),e<c&&(e=c))
}else for(;++g<f;)if(null!=(c=b(a[g],g,a))&&c>=c)for(d=e=c;++g<f;)null!=(c=b(a[g],g,a))&&(d>c&&(d=c),e<c&&(e=c));return[d,e]},s=Array.prototype,t=s.slice,u=s.map,v=function(a){return function(){return a}},w=function(a){return a},x=function(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):e<3?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f},y=Math.sqrt(50),z=Math.sqrt(10),A=Math.sqrt(2),B=function(a,b,c){var e,f,g,h=b<a,i=-1;if(h&&(e=a,a=b,b=e),0===(g=d(a,b,c))||!isFinite(g))return[];if(g>0)for(a=Math.ceil(a/g),b=Math.floor(b/g),f=new Array(e=Math.ceil(b-a+1));++i<e;)f[i]=(a+i)*g;else for(a=Math.floor(a*g),b=Math.ceil(b*g),f=new Array(e=Math.ceil(a-b+1));++i<e;)f[i]=(a-i)/g;return h&&f.reverse(),f},C=function(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1},D=function(){function a(a){var f,g,h=a.length,i=new Array(h);for(f=0;f<h;++f)i[f]=b(a[f],f,a);var k=c(i),l=k[0],m=k[1],n=d(i,l,m);Array.isArray(n)||(n=e(l,m,n),n=x(Math.ceil(l/n)*n,Math.floor(m/n)*n,n));for(var o=n.length;n[0]<=l;)n.shift(),--o;for(;n[o-1]>m;)n.pop(),--o;var p,q=new Array(o+1);for(f=0;f<=o;++f)p=q[f]=[],p.x0=f>0?n[f-1]:l,p.x1=f<o?n[f]:m;for(f=0;f<h;++f)g=i[f],l<=g&&g<=m&&q[j(n,g,0,o)].push(a[f]);return q}var b=w,c=r,d=C;return a.value=function(c){return arguments.length?(b="function"==typeof c?c:v(c),a):b},a.domain=function(b){return arguments.length?(c="function"==typeof b?b:v([b[0],b[1]]),a):c},a.thresholds=function(b){return arguments.length?(d="function"==typeof b?b:v(Array.isArray(b)?t.call(b):b),a):d},a},E=function(a,b,c){if(null==c&&(c=o),d=a.length){if((b=+b)<=0||d<2)return+c(a[0],0,a);if(b>=1)return+c(a[d-1],d-1,a);var d,e=(d-1)*b,f=Math.floor(e),g=+c(a[f],f,a);return g+(+c(a[f+1],f+1,a)-g)*(e-f)}},F=function(a,b,c){return a=u.call(a,o).sort(g),Math.ceil((c-b)/(2*(E(a,.75)-E(a,.25))*Math.pow(a.length,-1/3)))},G=function(a,b,c){return Math.ceil((c-b)/(3.5*q(a)*Math.pow(a.length,-1/3)))},H=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&c>d&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&c>d&&(d=c);return d},I=function(a,b){var c,d=a.length,e=d,f=-1,g=0;if(null==b)for(;++f<d;)isNaN(c=o(a[f]))?--e:g+=c;else for(;++f<d;)isNaN(c=o(b(a[f],f,a)))?--e:g+=c;if(e)return g/e},J=function(a,b){var c,d=a.length,e=-1,f=[];if(null==b)for(;++e<d;)isNaN(c=o(a[e]))||f.push(c);else for(;++e<d;)isNaN(c=o(b(a[e],e,a)))||f.push(c);return E(f.sort(g),.5)},K=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c},L=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&d>c&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&d>c&&(d=c);return d},M=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},N=function(a,b){if(c=a.length){var c,d,e=0,f=0,h=a[f];for(null==b&&(b=g);++e<c;)(b(d=a[e],h)<0||0!==b(h,h))&&(h=d,f=e);return 0===b(h,h)?f:void 0}},O=function(a,b,c){for(var d,e,f=(null==c?a.length:c)-(b=null==b?0:+b);f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},P=function(a,b){var c,d=a.length,e=-1,f=0;if(null==b)for(;++e<d;)(c=+a[e])&&(f+=c);else for(;++e<d;)(c=+b(a[e],e,a))&&(f+=c);return f},Q=function(a){if(!(e=a.length))return[];for(var b=-1,c=L(a,f),d=new Array(c);++b<c;)for(var e,g=-1,h=d[b]=new Array(e);++g<e;)h[g]=a[g][b];return d},R=function(){return Q(arguments)};a.bisect=j,a.bisectRight=j,a.bisectLeft=k,a.ascending=g,a.bisector=h,a.cross=m,a.descending=n,a.deviation=q,a.extent=r,a.histogram=D,a.thresholdFreedmanDiaconis=F,a.thresholdScott=G,a.thresholdSturges=C,a.max=H,a.mean=I,a.median=J,a.merge=K,a.min=L,a.pairs=l,a.permute=M,a.quantile=E,a.range=x,a.scan=N,a.shuffle=O,a.sum=P,a.ticks=B,a.tickIncrement=d,a.tickStep=e,a.transpose=Q,a.variance=p,a.zip=R,Object.defineProperty(a,"__esModule",{value:!0})})},{}],121:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(){}function c(a,c){var d=new b;if(a instanceof b)a.each(function(a,b){d.set(b,a)});else if(Array.isArray(a)){var e,f=-1,g=a.length;if(null==c)for(;++f<g;)d.set(f,a[f]);else for(;++f<g;)d.set(c(e=a[f],f,a),e)}else if(a)for(var h in a)d.set(h,a[h]);return d}function d(){return{}}function e(a,b,c){a[b]=c}function f(){return c()}function g(a,b,c){a.set(b,c)}function h(){}function i(a,b){var c=new h;if(a instanceof h)a.each(function(a){c.add(a)});else if(a){var d=-1,e=a.length;if(null==b)for(;++d<e;)c.add(a[d]);else for(;++d<e;)c.add(b(a[d],d,a))}return c}b.prototype=c.prototype={constructor:b,has:function(a){return"$"+a in this},get:function(a){return this["$"+a]},set:function(a,b){return this["$"+a]=b,this},remove:function(a){var b="$"+a;return b in this&&delete this[b]},clear:function(){for(var a in this)"$"===a[0]&&delete this[a]},keys:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(b.slice(1));return a},values:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(this[b]);return a},entries:function(){var a=[];for(var b in this)"$"===b[0]&&a.push({key:b.slice(1),value:this[b]});return a},size:function(){var a=0;for(var b in this)"$"===b[0]&&++a;return a},empty:function(){for(var a in this)if("$"===a[0])return!1;return!0},each:function(a){for(var b in this)"$"===b[0]&&a(this[b],b.slice(1),this)}};var j=function(){function a(b,d,e,f){if(d>=k.length)return null!=i?i(b):null!=h?b.sort(h):b;for(var g,j,l,m=-1,n=b.length,o=k[d++],p=c(),q=e();++m<n;)(l=p.get(g=o(j=b[m])+""))?l.push(j):p.set(g,[j]);return p.each(function(b,c){f(q,c,a(b,d,e,f))}),q}function b(a,c){if(++c>k.length)return a;var d,e=l[c-1];return null!=i&&c>=k.length?d=a.entries():(d=[],a.each(function(a,e){d.push({key:e,values:b(a,c)})})),null!=e?d.sort(function(a,b){return e(a.key,b.key)}):d}var h,i,j,k=[],l=[];return j={object:function(b){return a(b,0,d,e)},map:function(b){return a(b,0,f,g)},entries:function(c){return b(a(c,0,f,g),0)},key:function(a){return k.push(a),j},sortKeys:function(a){return l[k.length-1]=a,j},sortValues:function(a){return h=a,j},rollup:function(a){return i=a,j}}},k=c.prototype;h.prototype=i.prototype={constructor:h,has:k.has,add:function(a){return a+="",this["$"+a]=a,this},remove:k.remove,clear:k.clear,values:k.keys,size:k.size,empty:k.empty,each:k.each};var l=function(a){var b=[];for(var c in a)b.push(c);return b},m=function(a){var b=[];for(var c in a)b.push(a[c]);return b},n=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b};a.nest=j,a.set=i,a.map=c,a.keys=l,a.values=m,a.entries=n,Object.defineProperty(a,"__esModule",{value:!0})})},{}],122:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function c(){}function d(a){var b;return a=(a+"").trim().toLowerCase(),(b=F.exec(a))?(b=parseInt(b[1],16),new i(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1)):(b=G.exec(a))?e(parseInt(b[1],16)):(b=H.exec(a))?new i(b[1],b[2],b[3],1):(b=I.exec(a))?new i(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=J.exec(a))?f(b[1],b[2],b[3],b[4]):(b=K.exec(a))?f(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=L.exec(a))?j(b[1],b[2]/100,b[3]/100,1):(b=M.exec(a))?j(b[1],b[2]/100,b[3]/100,b[4]):N.hasOwnProperty(a)?e(N[a]):"transparent"===a?new i(NaN,NaN,NaN,0):null}function e(a){return new i(a>>16&255,a>>8&255,255&a,1)}function f(a,b,c,d){return d<=0&&(a=b=c=NaN),new i(a,b,c,d)}function g(a){return a instanceof c||(a=d(a)),a?(a=a.rgb(),new i(a.r,a.g,a.b,a.opacity)):new i}function h(a,b,c,d){return 1===arguments.length?g(a):new i(a,b,c,null==d?1:d)}function i(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function j(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new m(a,b,c,d)}function k(a){if(a instanceof m)return new m(a.h,a.s,a.l,a.opacity);if(a instanceof c||(a=d(a)),!a)return new m;if(a instanceof m)return a;a=a.rgb();var b=a.r/255,e=a.g/255,f=a.b/255,g=Math.min(b,e,f),h=Math.max(b,e,f),i=NaN,j=h-g,k=(h+g)/2;return j?(i=b===h?(e-f)/j+6*(e<f):e===h?(f-b)/j+2:(b-e)/j+4,j/=k<.5?h+g:2-h-g,i*=60):j=k>0&&k<1?0:i,new m(i,j,k,a.opacity)}function l(a,b,c,d){return 1===arguments.length?k(a):new m(a,b,c,null==d?1:d)}function m(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function n(a,b,c){return 255*(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)}function o(a){if(a instanceof q)return new q(a.l,a.a,a.b,a.opacity);if(a instanceof x){var b=a.h*O;return new q(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof i||(a=g(a));var c=u(a.r),d=u(a.g),e=u(a.b),f=r((.4124564*c+.3575761*d+.1804375*e)/Q),h=r((.2126729*c+.7151522*d+.072175*e)/R);return new q(116*h-16,500*(f-h),200*(h-r((.0193339*c+.119192*d+.9503041*e)/S)),a.opacity)}function p(a,b,c,d){return 1===arguments.length?o(a):new q(a,b,c,null==d?1:d)}function q(a,b,c,d){this.l=+a,this.a=+b,this.b=+c,this.opacity=+d}function r(a){return a>W?Math.pow(a,1/3):a/V+T}function s(a){return a>U?a*a*a:V*(a-T)}function t(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function u(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function v(a){if(a instanceof x)return new x(a.h,a.c,a.l,a.opacity);a instanceof q||(a=o(a));var b=Math.atan2(a.b,a.a)*P;return new x(b<0?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function w(a,b,c,d){return 1===arguments.length?v(a):new x(a,b,c,null==d?1:d)}function x(a,b,c,d){this.h=+a,this.c=+b,this.l=+c,this.opacity=+d}function y(a){if(a instanceof A)return new A(a.h,a.s,a.l,a.opacity);a instanceof i||(a=g(a));var b=a.r/255,c=a.g/255,d=a.b/255,e=(ca*d+aa*b-ba*c)/(ca+aa-ba),f=d-e,h=(_*(c-e)-Z*f)/$,j=Math.sqrt(h*h+f*f)/(_*e*(1-e)),k=j?Math.atan2(h,f)*P-120:NaN;return new A(k<0?k+360:k,j,e,a.opacity)}function z(a,b,c,d){return 1===arguments.length?y(a):new A(a,b,c,null==d?1:d)}function A(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}var B=function(a,b,c){a.prototype=b.prototype=c,c.constructor=a},C="\\s*([+-]?\\d+)\\s*",D="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F=/^#([0-9a-f]{3})$/,G=/^#([0-9a-f]{6})$/,H=new RegExp("^rgb\\("+[C,C,C]+"\\)$"),I=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),J=new RegExp("^rgba\\("+[C,C,C,D]+"\\)$"),K=new RegExp("^rgba\\("+[E,E,E,D]+"\\)$"),L=new RegExp("^hsl\\("+[D,E,E]+"\\)$"),M=new RegExp("^hsla\\("+[D,E,E,D]+"\\)$"),N={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};B(c,d,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),B(i,h,b(c,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new i(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new i(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}})),B(m,l,b(c,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new m(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new m(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(this.h<0),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new i(n(a>=240?a-240:a+120,e,d),n(a,e,d),n(a<120?a+240:a-120,e,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var O=Math.PI/180,P=180/Math.PI,Q=.95047,R=1,S=1.08883,T=4/29,U=6/29,V=3*U*U,W=U*U*U;B(q,p,b(c,{brighter:function(a){return new q(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new q(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;return a=R*s(a),b=Q*s(b),c=S*s(c),new i(t(3.2404542*b-1.5371385*a-.4985314*c),t(-.969266*b+1.8760108*a+.041556*c),t(.0556434*b-.2040259*a+1.0572252*c),this.opacity)}})),B(x,w,b(c,{brighter:function(a){return new x(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new x(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return o(this).rgb()}}));var X=-.14861,Y=1.78277,Z=-.29227,$=-.90649,_=1.97294,aa=_*$,ba=_*Y,ca=Y*Z-$*X;B(A,z,b(c,{brighter:function(a){return a=null==a?1/.7:Math.pow(1/.7,a),new A(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new A(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*O,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a),e=Math.sin(a);return new i(255*(b+c*(X*d+Y*e)),255*(b+c*(Z*d+$*e)),255*(b+c*(_*d)),this.opacity)}})),a.color=d,a.rgb=h,a.hsl=l,a.lab=p,a.hcl=w,a.cubehelix=z,Object.defineProperty(a,"__esModule",{value:!0})})},{}],123:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(){for(var a,b=0,d=arguments.length,e={};b<d;++b){if(!(a=arguments[b]+"")||a in e)throw new Error("illegal type: "+a);e[a]=[]}return new c(e)}function c(a){this._=a}function d(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",d=a.indexOf(".");if(d>=0&&(c=a.slice(d+1),a=a.slice(0,d)),a&&!b.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})}function e(a,b){for(var c,d=0,e=a.length;d<e;++d)if((c=a[d]).name===b)return c.value}function f(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=g,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}var g={value:function(){}};c.prototype=b.prototype={constructor:c,on:function(a,b){var c,g=this._,h=d(a+"",g),i=-1,j=h.length;{if(!(arguments.length<2)){if(null!=b&&"function"!=typeof b)throw new Error("invalid callback: "+b);for(;++i<j;)if(c=(a=h[i]).type)g[c]=f(g[c],a.name,b);else if(null==b)for(c in g)g[c]=f(g[c],a.name,null);return this}for(;++i<j;)if((c=(a=h[i]).type)&&(c=e(g[c],a.name)))return c}},copy:function(){var a={},b=this._;for(var d in b)a[d]=b[d].slice();return new c(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=new Array(c),f=0;f<c;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;f<c;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}},a.dispatch=b,Object.defineProperty(a,"__esModule",{value:!0})})},{}],124:[function(b,c,d){!function(e,f){"object"==typeof d&&void 0!==c?f(d,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):"function"==typeof a&&a.amd?a(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],f):f(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3)}(this,function(a,b,c,d,e){"use strict";function f(a){return a.x+a.vx}function g(a){return a.y+a.vy}function h(a){return a.index}function i(a,b){var c=a.get(b);if(!c)throw new Error("missing: "+b);return c}function j(a){return a.x}function k(a){return a.y}var l=function(a,b){function c(){var c,e,f=d.length,g=0,h=0;for(c=0;c<f;++c)e=d[c],g+=e.x,h+=e.y;for(g=g/f-a,h=h/f-b,c=0;c<f;++c)e=d[c],e.x-=g,e.y-=h}var d;return null==a&&(a=0),null==b&&(b=0),c.initialize=function(a){d=a},c.x=function(b){return arguments.length?(a=+b,c):a},c.y=function(a){return arguments.length?(b=+a,c):b},c},m=function(a){return function(){return a}},n=function(){return 1e-6*(Math.random()-.5)},o=function(a){function c(){function a(a,b,c,d,e){var f=a.data,g=a.r,h=p+g;{if(!f)return b>m+h||d<m-h||c>o+h||e<o-h;if(f.index>l.index){var i=m-f.x-f.vx,k=o-f.y-f.vy,r=i*i+k*k;r<h*h&&(0===i&&(i=n(),r+=i*i),0===k&&(k=n(),r+=k*k),r=(h-(r=Math.sqrt(r)))/r*j,l.vx+=(i*=r)*(h=(g*=g)/(q+g)),l.vy+=(k*=r)*h,f.vx-=i*(h=1-h),f.vy-=k*h)}}}for(var c,e,l,m,o,p,q,r=h.length,s=0;s<k;++s)for(e=b.quadtree(h,f,g).visitAfter(d),c=0;c<r;++c)l=h[c],p=i[l.index],q=p*p,m=l.x+l.vx,o=l.y+l.vy,e.visit(a)}function d(a){if(a.data)return a.r=i[a.data.index];for(var b=a.r=0;b<4;++b)a[b]&&a[b].r>a.r&&(a.r=a[b].r)}function e(){if(h){var b,c,d=h.length;for(i=new Array(d),b=0;b<d;++b)c=h[b],i[c.index]=+a(c,b,h)}}var h,i,j=1,k=1;return"function"!=typeof a&&(a=m(null==a?1:+a)),c.initialize=function(a){h=a,e()},c.iterations=function(a){return arguments.length?(k=+a,c):k},c.strength=function(a){return arguments.length?(j=+a,c):j},c.radius=function(b){return arguments.length?(a="function"==typeof b?b:m(+b),e(),c):a},c},p=function(a){function b(a){return 1/Math.min(o[a.source.index],o[a.target.index])}function d(b){for(var c=0,d=a.length;c<t;++c)for(var e,f,g,h,i,l,m,o=0;o<d;++o)e=a[o],f=e.source,g=e.target,h=g.x+g.vx-f.x-f.vx||n(),i=g.y+g.vy-f.y-f.vy||n(),l=Math.sqrt(h*h+i*i),l=(l-k[o])/l*b*j[o],h*=l,i*=l,g.vx-=h*(m=p[o]),g.vy-=i*m,f.vx+=h*(m=1-m),f.vy+=i*m}function e(){if(l){var b,d,e=l.length,h=a.length,m=c.map(l,q);for(b=0,o=new Array(e);b<h;++b)d=a[b],d.index=b,"object"!=typeof d.source&&(d.source=i(m,d.source)),"object"!=typeof d.target&&(d.target=i(m,d.target)),o[d.source.index]=(o[d.source.index]||0)+1,o[d.target.index]=(o[d.target.index]||0)+1;for(b=0,p=new Array(h);b<h;++b)d=a[b],p[b]=o[d.source.index]/(o[d.source.index]+o[d.target.index]);j=new Array(h),f(),k=new Array(h),g()}}function f(){if(l)for(var b=0,c=a.length;b<c;++b)j[b]=+r(a[b],b,a)}function g(){if(l)for(var b=0,c=a.length;b<c;++b)k[b]=+s(a[b],b,a)}var j,k,l,o,p,q=h,r=b,s=m(30),t=1;return null==a&&(a=[]),d.initialize=function(a){l=a,e()},d.links=function(b){return arguments.length?(a=b,e(),d):a},d.id=function(a){return arguments.length?(q=a,d):q},d.iterations=function(a){return arguments.length?(t=+a,d):t},d.strength=function(a){return arguments.length?(r="function"==typeof a?a:m(+a),f(),d):r},d.distance=function(a){return arguments.length?(s="function"==typeof a?a:m(+a),g(),d):s},d},q=10,r=Math.PI*(3-Math.sqrt(5)),s=function(a){function b(){f(),s.call("tick",i),j<k&&(p.stop(),s.call("end",i))}function f(){var b,c,d=a.length;for(j+=(m-j)*l,o.each(function(a){a(j)}),b=0;b<d;++b)c=a[b],null==c.fx?c.x+=c.vx*=n:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=n:(c.y=c.fy,c.vy=0)}function g(){for(var b,c=0,d=a.length;c<d;++c){if(b=a[c],b.index=c,isNaN(b.x)||isNaN(b.y)){var e=q*Math.sqrt(c),f=c*r;b.x=e*Math.cos(f),b.y=e*Math.sin(f)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function h(b){return b.initialize&&b.initialize(a),b}var i,j=1,k=.001,l=1-Math.pow(k,1/300),m=0,n=.6,o=c.map(),p=e.timer(b),s=d.dispatch("tick","end");return null==a&&(a=[]),g(),i={tick:f,restart:function(){return p.restart(b),i},stop:function(){return p.stop(),i},nodes:function(b){return arguments.length?(a=b,g(),o.each(h),i):a},alpha:function(a){return arguments.length?(j=+a,i):j},alphaMin:function(a){return arguments.length?(k=+a,i):k},alphaDecay:function(a){return arguments.length?(l=+a,i):+l},alphaTarget:function(a){return arguments.length?(m=+a,i):m},velocityDecay:function(a){return arguments.length?(n=1-a,i):1-n},force:function(a,b){return arguments.length>1?(null==b?o.remove(a):o.set(a,h(b)),i):o.get(a)},find:function(b,c,d){var e,f,g,h,i,j=0,k=a.length;for(null==d?d=1/0:d*=d,j=0;j<k;++j)h=a[j],e=b-h.x,f=c-h.y,(g=e*e+f*f)<d&&(i=h,d=g);return i},on:function(a,b){return arguments.length>1?(s.on(a,b),i):s.on(a)}}},t=function(){function a(a){var c,i=f.length,l=b.quadtree(f,j,k).visitAfter(d);for(h=a,c=0;c<i;++c)g=f[c],l.visit(e)}function c(){if(f){var a,b,c=f.length;for(i=new Array(c),a=0;a<c;++a)b=f[a],i[b.index]=+l(b,a,f)}}function d(a){var b,c,d,e,f,g=0;if(a.length){for(d=e=f=0;f<4;++f)(b=a[f])&&(c=b.value)&&(g+=c,d+=c*b.x,e+=c*b.y);a.x=d/g,a.y=e/g}else{b=a,b.x=b.data.x,b.y=b.data.y;do{g+=i[b.data.index]}while(b=b.next)}a.value=g}function e(a,b,c,d){if(!a.value)return!0;var e=a.x-g.x,f=a.y-g.y,j=d-b,k=e*e+f*f;if(j*j/q<k)return k<p&&(0===e&&(e=n(),k+=e*e),0===f&&(f=n(),k+=f*f),k<o&&(k=Math.sqrt(o*k)),g.vx+=e*a.value*h/k,g.vy+=f*a.value*h/k),!0;if(!(a.length||k>=p)){(a.data!==g||a.next)&&(0===e&&(e=n(),k+=e*e),0===f&&(f=n(),k+=f*f),k<o&&(k=Math.sqrt(o*k)));do{a.data!==g&&(j=i[a.data.index]*h/k,g.vx+=e*j,g.vy+=f*j)}while(a=a.next)}}var f,g,h,i,l=m(-30),o=1,p=1/0,q=.81;return a.initialize=function(a){f=a,c()},a.strength=function(b){return arguments.length?(l="function"==typeof b?b:m(+b),c(),a):l},a.distanceMin=function(b){return arguments.length?(o=b*b,a):Math.sqrt(o)},a.distanceMax=function(b){return arguments.length?(p=b*b,a):Math.sqrt(p)},a.theta=function(b){return arguments.length?(q=b*b,a):Math.sqrt(q)},a},u=function(a){function b(a){for(var b,c=0,g=d.length;c<g;++c)b=d[c],b.vx+=(f[c]-b.x)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;b<c;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=m(.1);return"function"!=typeof a&&(a=m(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:m(+a),c(),b):g},b.x=function(d){return arguments.length?(a="function"==typeof d?d:m(+d),c(),b):a},b},v=function(a){function b(a){for(var b,c=0,g=d.length;c<g;++c)b=d[c],b.vy+=(f[c]-b.y)*e[c]*a}function c(){if(d){var b,c=d.length;for(e=new Array(c),f=new Array(c),b=0;b<c;++b)e[b]=isNaN(f[b]=+a(d[b],b,d))?0:+g(d[b],b,d)}}var d,e,f,g=m(.1);return"function"!=typeof a&&(a=m(null==a?0:+a)),b.initialize=function(a){d=a,c()},b.strength=function(a){return arguments.length?(g="function"==typeof a?a:m(+a),c(),b):g},b.y=function(d){return arguments.length?(a="function"==typeof d?d:m(+d),c(),b):a},b};a.forceCenter=l,a.forceCollide=o,a.forceLink=p,a.forceManyBody=t,a.forceSimulation=s,a.forceX=u,a.forceY=v,Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-collection":121,"d3-dispatch":123,"d3-quadtree":126,"d3-timer":127}],125:[function(b,c,d){!function(e,f){"object"==typeof d&&void 0!==c?f(d,b("d3-color")):"function"==typeof a&&a.amd?a(["exports","d3-color"],f):f(e.d3=e.d3||{},e.d3)}(this,function(a,b){"use strict";function c(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}function d(a,b){return function(c){return a+c*b}}function e(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function f(a,b){var c=b-a;return c?d(a,c>180||c<-180?c-360*Math.round(c/360):c):B(isNaN(a)?b:a)}function g(a){return 1==(a=+a)?h:function(b,c){return c-b?e(b,c,a):B(isNaN(b)?c:b)}}function h(a,b){var c=b-a;return c?d(a,c):B(isNaN(a)?b:a)}function i(a){return function(c){var d,e,f=c.length,g=new Array(f),h=new Array(f),i=new Array(f);for(d=0;d<f;++d)e=b.rgb(c[d]),g[d]=e.r||0,h[d]=e.g||0,i[d]=e.b||0;return g=a(g),h=a(h),i=a(i),e.opacity=1,function(a){return e.r=g(a),e.g=h(a),e.b=i(a),e+""}}}function j(a){return function(){return a}}function k(a){return function(b){return a(b)+""}}function l(a){return"none"===a?P:(v||(v=document.createElement("DIV"),w=document.documentElement,x=document.defaultView),v.style.transform=a,a=x.getComputedStyle(w.appendChild(v),null).getPropertyValue("transform"),w.removeChild(v),a=a.slice(7,-1).split(","),Q(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5]))}function m(a){return null==a?P:(y||(y=document.createElementNS("http://www.w3.org/2000/svg","g")),y.setAttribute("transform",a),(a=y.transform.baseVal.consolidate())?(a=a.matrix,Q(a.a,a.b,a.c,a.d,a.e,a.f)):P)}function n(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function f(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:H(a,e)},{i:i-2,x:H(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}function g(a,b,c,f){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:H(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:H(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function i(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:H(a,c)},{i:h-2,x:H(b,d)})}else 1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];return b=a(b),c=a(c),f(b.translateX,b.translateY,c.translateX,c.translateY,d,e),g(b.rotate,c.rotate,d,e),h(b.skewX,c.skewX,d,e),i(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e),b=c=null,function(a){for(var b,c=-1,f=e.length;++c<f;)d[(b=e[c]).i]=b.x(a);return d.join("")}}}function o(a){return((a=Math.exp(a))+1/a)/2}function p(a){return((a=Math.exp(a))-1/a)/2}function q(a){return((a=Math.exp(2*a))-1)/(a+1)}function r(a){return function(c,d){var e=a((c=b.hsl(c)).h,(d=b.hsl(d)).h),f=h(c.s,d.s),g=h(c.l,d.l),i=h(c.opacity,d.opacity);return function(a){return c.h=e(a),c.s=f(a),c.l=g(a),c.opacity=i(a),c+""}}}function s(a,c){var d=h((a=b.lab(a)).l,(c=b.lab(c)).l),e=h(a.a,c.a),f=h(a.b,c.b),g=h(a.opacity,c.opacity);return function(b){return a.l=d(b),a.a=e(b),a.b=f(b),a.opacity=g(b),a+""}}function t(a){return function(c,d){var e=a((c=b.hcl(c)).h,(d=b.hcl(d)).h),f=h(c.c,d.c),g=h(c.l,d.l),i=h(c.opacity,d.opacity);return function(a){return c.h=e(a),c.c=f(a),c.l=g(a),c.opacity=i(a),c+""}}}function u(a){return function c(d){function e(c,e){var f=a((c=b.cubehelix(c)).h,(e=b.cubehelix(e)).h),g=h(c.s,e.s),i=h(c.l,e.l),j=h(c.opacity,e.opacity);return function(a){return c.h=f(a),c.s=g(a),c.l=i(Math.pow(a,d)),c.opacity=j(a),c+""}}return d=+d,e.gamma=c,e}(1)}var v,w,x,y,z=function(a){var b=a.length-1;return function(d){var e=d<=0?d=0:d>=1?(d=1,b-1):Math.floor(d*b),f=a[e],g=a[e+1],h=e>0?a[e-1]:2*f-g,i=e<b-1?a[e+2]:2*g-f;return c((d-e/b)*b,h,f,g,i)}},A=function(a){var b=a.length;return function(d){var e=Math.floor(((d%=1)<0?++d:d)*b),f=a[(e+b-1)%b],g=a[e%b],h=a[(e+1)%b],i=a[(e+2)%b];return c((d-e/b)*b,f,g,h,i)}},B=function(a){return function(){return a}},C=function a(c){function d(a,c){var d=e((a=b.rgb(a)).r,(c=b.rgb(c)).r),f=e(a.g,c.g),g=e(a.b,c.b),i=h(a.opacity,c.opacity);return function(b){return a.r=d(b),a.g=f(b),a.b=g(b),a.opacity=i(b),a+""}}var e=g(c);return d.gamma=a,d}(1),D=i(z),E=i(A),F=function(a,b){var c,d=b?b.length:0,e=a?Math.min(d,a.length):0,f=new Array(d),g=new Array(d);for(c=0;c<e;++c)f[c]=M(a[c],b[c]);for(;c<d;++c)g[c]=b[c];return function(a){for(c=0;c<e;++c)g[c]=f[c](a);return g}},G=function(a,b){var c=new Date;return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}},H=function(a,b){return a=+a,b-=a,function(c){return a+b*c}},I=function(a,b){var c,d={},e={};null!==a&&"object"==typeof a||(a={}),null!==b&&"object"==typeof b||(b={});for(c in b)c in a?d[c]=M(a[c],b[c]):e[c]=b[c];return function(a){for(c in d)e[c]=d[c](a);return e}},J=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,K=new RegExp(J.source,"g"),L=function(a,b){var c,d,e,f=J.lastIndex=K.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=J.exec(a))&&(d=K.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:H(c,d)})),f=K.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?k(i[0].x):j(b):(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})},M=function(a,c){var d,e=typeof c;return null==c||"boolean"===e?B(c):("number"===e?H:"string"===e?(d=b.color(c))?(c=d,C):L:c instanceof b.color?C:c instanceof Date?G:Array.isArray(c)?F:"function"!=typeof c.valueOf&&"function"!=typeof c.toString||isNaN(c)?I:H)(a,c)},N=function(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}},O=180/Math.PI,P={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Q=function(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),a*d<b*c&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*O,skewX:Math.atan(i)*O,scaleX:g,scaleY:h}},R=n(l,"px, ","px)","deg)"),S=n(m,", ",")",")"),T=Math.SQRT2,U=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(m<1e-12)d=Math.log(j/g)/T,c=function(a){return[e+a*k,f+a*l,g*Math.exp(T*a*d)]};else{var n=Math.sqrt(m),r=(j*j-g*g+4*m)/(2*g*2*n),s=(j*j-g*g-4*m)/(2*j*2*n),t=Math.log(Math.sqrt(r*r+1)-r),u=Math.log(Math.sqrt(s*s+1)-s);d=(u-t)/T,c=function(a){var b=a*d,c=o(t),h=g/(2*n)*(c*q(T*b+t)-p(t));return[e+h*k,f+h*l,g*c/o(T*b+t)]}}return c.duration=1e3*d,c},V=r(f),W=r(h),X=t(f),Y=t(h),Z=u(f),$=u(h),_=function(a,b){for(var c=new Array(b),d=0;d<b;++d)c[d]=a(d/(b-1));return c};a.interpolate=M,a.interpolateArray=F,a.interpolateBasis=z,a.interpolateBasisClosed=A,a.interpolateDate=G,a.interpolateNumber=H,a.interpolateObject=I,a.interpolateRound=N,a.interpolateString=L,a.interpolateTransformCss=R,a.interpolateTransformSvg=S,a.interpolateZoom=U,a.interpolateRgb=C,a.interpolateRgbBasis=D,a.interpolateRgbBasisClosed=E,a.interpolateHsl=V,a.interpolateHslLong=W,a.interpolateLab=s,a.interpolateHcl=X,a.interpolateHclLong=Y,a.interpolateCubehelix=Z,a.interpolateCubehelixLong=$,a.quantize=_,
Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-color":122}],126:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(a,b,c,d){if(isNaN(b)||isNaN(c))return a;var e,f,g,h,i,j,k,l,m,n=a._root,o={data:d},p=a._x0,q=a._y0,r=a._x1,s=a._y1;if(!n)return a._root=o,a;for(;n.length;)if((j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g,e=n,!(n=n[l=k<<1|j]))return e[l]=o,a;if(h=+a._x.call(null,n.data),i=+a._y.call(null,n.data),b===h&&c===i)return o.next=n,e?e[l]=o:a._root=o,a;do{e=e?e[l]=new Array(4):a._root=new Array(4),(j=b>=(f=(p+r)/2))?p=f:r=f,(k=c>=(g=(q+s)/2))?q=g:s=g}while((l=k<<1|j)==(m=(i>=g)<<1|h>=f));return e[m]=n,e[l]=o,a}function c(a){var c,d,e,f,g=a.length,h=new Array(g),i=new Array(g),j=1/0,k=1/0,l=-1/0,m=-1/0;for(d=0;d<g;++d)isNaN(e=+this._x.call(null,c=a[d]))||isNaN(f=+this._y.call(null,c))||(h[d]=e,i[d]=f,e<j&&(j=e),e>l&&(l=e),f<k&&(k=f),f>m&&(m=f));for(l<j&&(j=this._x0,l=this._x1),m<k&&(k=this._y0,m=this._y1),this.cover(j,k).cover(l,m),d=0;d<g;++d)b(this,h[d],i[d],a[d]);return this}function d(a){for(var b=0,c=a.length;b<c;++b)this.remove(a[b]);return this}function e(a){return a[0]}function f(a){return a[1]}function g(a,b,c){var d=new h(null==b?e:b,null==c?f:c,NaN,NaN,NaN,NaN);return null==a?d:d.addAll(a)}function h(a,b,c,d,e,f){this._x=a,this._y=b,this._x0=c,this._y0=d,this._x1=e,this._y1=f,this._root=void 0}function i(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}var j=function(a){var c=+this._x.call(null,a),d=+this._y.call(null,a);return b(this.cover(c,d),c,d,a)},k=function(a,b){if(isNaN(a=+a)||isNaN(b=+b))return this;var c=this._x0,d=this._y0,e=this._x1,f=this._y1;if(isNaN(c))e=(c=Math.floor(a))+1,f=(d=Math.floor(b))+1;else{if(!(c>a||a>e||d>b||b>f))return this;var g,h,i=e-c,j=this._root;switch(h=(b<(d+f)/2)<<1|a<(c+e)/2){case 0:do{g=new Array(4),g[h]=j,j=g}while(i*=2,e=c+i,f=d+i,a>e||b>f);break;case 1:do{g=new Array(4),g[h]=j,j=g}while(i*=2,c=e-i,f=d+i,c>a||b>f);break;case 2:do{g=new Array(4),g[h]=j,j=g}while(i*=2,e=c+i,d=f-i,a>e||d>b);break;case 3:do{g=new Array(4),g[h]=j,j=g}while(i*=2,c=e-i,d=f-i,c>a||d>b)}this._root&&this._root.length&&(this._root=j)}return this._x0=c,this._y0=d,this._x1=e,this._y1=f,this},l=function(){var a=[];return this.visit(function(b){if(!b.length)do{a.push(b.data)}while(b=b.next)}),a},m=function(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n=function(a,b,c,d,e){this.node=a,this.x0=b,this.y0=c,this.x1=d,this.y1=e},o=function(a,b,c){var d,e,f,g,h,i,j,k=this._x0,l=this._y0,m=this._x1,o=this._y1,p=[],q=this._root;for(q&&p.push(new n(q,k,l,m,o)),null==c?c=1/0:(k=a-c,l=b-c,m=a+c,o=b+c,c*=c);i=p.pop();)if(!(!(q=i.node)||(e=i.x0)>m||(f=i.y0)>o||(g=i.x1)<k||(h=i.y1)<l))if(q.length){var r=(e+g)/2,s=(f+h)/2;p.push(new n(q[3],r,s,g,h),new n(q[2],e,s,r,h),new n(q[1],r,f,g,s),new n(q[0],e,f,r,s)),(j=(b>=s)<<1|a>=r)&&(i=p[p.length-1],p[p.length-1]=p[p.length-1-j],p[p.length-1-j]=i)}else{var t=a-+this._x.call(null,q.data),u=b-+this._y.call(null,q.data),v=t*t+u*u;if(v<c){var w=Math.sqrt(c=v);k=a-w,l=b-w,m=a+w,o=b+w,d=q.data}}return d},p=function(a){if(isNaN(f=+this._x.call(null,a))||isNaN(g=+this._y.call(null,a)))return this;var b,c,d,e,f,g,h,i,j,k,l,m,n=this._root,o=this._x0,p=this._y0,q=this._x1,r=this._y1;if(!n)return this;if(n.length)for(;;){if((j=f>=(h=(o+q)/2))?o=h:q=h,(k=g>=(i=(p+r)/2))?p=i:r=i,b=n,!(n=n[l=k<<1|j]))return this;if(!n.length)break;(b[l+1&3]||b[l+2&3]||b[l+3&3])&&(c=b,m=l)}for(;n.data!==a;)if(d=n,!(n=n.next))return this;return(e=n.next)&&delete n.next,d?(e?d.next=e:delete d.next,this):b?(e?b[l]=e:delete b[l],(n=b[0]||b[1]||b[2]||b[3])&&n===(b[3]||b[2]||b[1]||b[0])&&!n.length&&(c?c[m]=n:this._root=n),this):(this._root=e,this)},q=function(){return this._root},r=function(){var a=0;return this.visit(function(b){if(!b.length)do{++a}while(b=b.next)}),a},s=function(a){var b,c,d,e,f,g,h=[],i=this._root;for(i&&h.push(new n(i,this._x0,this._y0,this._x1,this._y1));b=h.pop();)if(!a(i=b.node,d=b.x0,e=b.y0,f=b.x1,g=b.y1)&&i.length){var j=(d+f)/2,k=(e+g)/2;(c=i[3])&&h.push(new n(c,j,k,f,g)),(c=i[2])&&h.push(new n(c,d,k,j,g)),(c=i[1])&&h.push(new n(c,j,e,f,k)),(c=i[0])&&h.push(new n(c,d,e,j,k))}return this},t=function(a){var b,c=[],d=[];for(this._root&&c.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));b=c.pop();){var e=b.node;if(e.length){var f,g=b.x0,h=b.y0,i=b.x1,j=b.y1,k=(g+i)/2,l=(h+j)/2;(f=e[0])&&c.push(new n(f,g,h,k,l)),(f=e[1])&&c.push(new n(f,k,h,i,l)),(f=e[2])&&c.push(new n(f,g,l,k,j)),(f=e[3])&&c.push(new n(f,k,l,i,j))}d.push(b)}for(;b=d.pop();)a(b.node,b.x0,b.y0,b.x1,b.y1);return this},u=function(a){return arguments.length?(this._x=a,this):this._x},v=function(a){return arguments.length?(this._y=a,this):this._y},w=g.prototype=h.prototype;w.copy=function(){var a,b,c=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return c;if(!d.length)return c._root=i(d),c;for(a=[{source:d,target:c._root=new Array(4)}];d=a.pop();)for(var e=0;e<4;++e)(b=d.source[e])&&(b.length?a.push({source:b,target:d.target[e]=new Array(4)}):d.target[e]=i(b));return c},w.add=j,w.addAll=c,w.cover=k,w.data=l,w.extent=m,w.find=o,w.remove=p,w.removeAll=d,w.root=q,w.size=r,w.visit=s,w.visitAfter=t,w.x=u,w.y=v,a.quadtree=g,Object.defineProperty(a,"__esModule",{value:!0})})},{}],127:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3=b.d3||{})}(this,function(a){"use strict";function b(){return r||(u(c),r=t.now()+s)}function c(){r=0}function d(){this._call=this._time=this._next=null}function e(a,b,c){var e=new d;return e.restart(a,b,c),e}function f(){b(),++m;for(var a,c=k;c;)(a=r-c._time)>=0&&c._call.call(null,a),c=c._next;--m}function g(){r=(q=t.now())+s,m=n=0;try{f()}finally{m=0,i(),r=0}}function h(){var a=t.now(),b=a-q;b>p&&(s-=b,q=a)}function i(){for(var a,b,c=k,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:k=b);l=a,j(d)}function j(a){if(!m){n&&(n=clearTimeout(n));var b=a-r;b>24?(a<1/0&&(n=setTimeout(g,b)),o&&(o=clearInterval(o))):(o||(q=r,o=setInterval(h,p)),m=1,u(g))}}var k,l,m=0,n=0,o=0,p=1e3,q=0,r=0,s=0,t="object"==typeof performance&&performance.now?performance:Date,u="function"==typeof requestAnimationFrame?requestAnimationFrame:function(a){setTimeout(a,17)};d.prototype=e.prototype={constructor:d,restart:function(a,c,d){if("function"!=typeof a)throw new TypeError("callback is not a function");d=(null==d?b():+d)+(null==c?0:+c),this._next||l===this||(l?l._next=this:k=this,l=this),this._call=a,this._time=d,j()},stop:function(){this._call&&(this._call=null,this._time=1/0,j())}};var v=function(a,b,c){var e=new d;return b=null==b?0:+b,e.restart(function(c){e.stop(),a(c+b)},b,c),e},w=function(a,c,e){var f=new d,g=c;return null==c?(f.restart(a,c,e),f):(c=+c,e=null==e?b():+e,f.restart(function b(d){d+=g,f.restart(b,g+=c,e),a(d)},c,e),f)};a.now=b,a.timer=e,a.timerFlush=f,a.timeout=v,a.interval=w,Object.defineProperty(a,"__esModule",{value:!0})})},{}],128:[function(b,c,d){!function(){function b(a){return a&&(a.ownerDocument||a.document||a).documentElement}function d(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function e(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function f(a){return null===a?NaN:+a}function g(a){return!isNaN(a)}function h(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function i(a){return a.length}function j(a){for(var b=1;a*b%1;)b*=10;return b}function k(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function l(){this._=Object.create(null)}function m(a){return(a+="")===ug||a[0]===vg?vg+a:a}function n(a){return(a+="")[0]===vg?a.slice(1):a}function o(a){return m(a)in this._}function p(a){return(a=m(a))in this._&&delete this._[a]}function q(){var a=[];for(var b in this._)a.push(n(b));return a}function r(){var a=0;for(var b in this._)++a;return a}function s(){for(var a in this._)return!1;return!0}function t(){this._=Object.create(null)}function u(a){return a}function v(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function w(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=wg.length;c<d;++c){var e=wg[c]+b;if(e in a)return e}}function x(){}function y(){}function z(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new l;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function A(){jg.event.preventDefault()}function B(){for(var a,b=jg.event;a=b.sourceEvent;)b=a;return b}function C(a){for(var b=new y,c=0,d=arguments.length;++c<d;)b[arguments[c]]=z(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=jg.event;e.target=a,jg.event=e,b[e.type].apply(c,d)}finally{jg.event=f}}},b}function D(a){return yg(a,Cg),a}function E(a){return"function"==typeof a?a:function(){return zg(a,this)}}function F(a){return"function"==typeof a?a:function(){return Ag(a,this)}}function G(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=jg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function H(a){return a.trim().replace(/\s+/g," ")}function I(a){return new RegExp("(?:^|\\s+)"+jg.requote(a)+"(?:\\s+|$)","g")}function J(a){return(a+"").trim().split(/^|\s+/)}function K(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=J(a).map(L);var e=a.length;return"function"==typeof b?d:c}function L(a){var b=I(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",H(e+" "+a))):c.setAttribute("class",H(e.replace(b," ")))}}function M(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function N(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function O(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c===Dg&&b.documentElement.namespaceURI===Dg?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=jg.ns.qualify(a)).local?c:b}function P(){var a=this.parentNode;a&&a.removeChild(this)}function Q(a){return{__data__:a}}function R(a){return function(){return Bg(this,a)}}function S(a){return arguments.length||(a=e),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function T(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function U(a){return yg(a,Fg),a}function V(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function W(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,lg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+jg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=X;h>0&&(a=a.slice(0,h));var j=Gg.get(a);return j&&(a=j,i=Y),h?b?e:d:b?x:f}function X(a,b){return function(c){var d=jg.event;jg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{jg.event=d}}}function Y(a,b){var c=X(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function Z(a){var c=".dragsuppress-"+ ++Ig,e="click"+c,f=jg.select(d(a)).on("touchmove"+c,A).on("dragstart"+c,A).on("selectstart"+c,A);if(null==Hg&&(Hg=!("onselectstart"in a)&&w(a.style,"userSelect")),Hg){var g=b(a).style,h=g[Hg];g[Hg]="none"}return function(a){if(f.on(c,null),Hg&&(g[Hg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){A(),b()},!0),setTimeout(b,0)}}}function $(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var e=c.createSVGPoint();if(Jg<0){var f=d(a);if(f.scrollX||f.scrollY){c=jg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=c[0][0].getScreenCTM();Jg=!(g.f||g.e),c.remove()}}return Jg?(e.x=b.pageX,e.y=b.pageY):(e.x=b.clientX,e.y=b.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[b.clientX-h.left-a.clientLeft,b.clientY-h.top-a.clientTop]}function _(){return jg.event.changedTouches[0].identifier}function aa(a){return a>0?1:a<0?-1:0}function ba(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ca(a){return a>1?0:a<-1?Mg:Math.acos(a)}function da(a){return a>1?Pg:a<-1?-Pg:Math.asin(a)}function ea(a){return((a=Math.exp(a))-1/a)/2}function fa(a){return((a=Math.exp(a))+1/a)/2}function ga(a){return((a=Math.exp(2*a))-1)/(a+1)}function ha(a){return(a=Math.sin(a/2))*a}function ia(){}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.s,a.l):xa(""+a,ya,ja):new ja(a,b,c)}function ka(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new ta(e(a+120),e(a),e(a-120))}function la(a,b,c){return this instanceof la?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof la?new la(a.h,a.c,a.l):a instanceof na?pa(a.l,a.a,a.b):pa((a=za((a=jg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new la(a,b,c)}function ma(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new na(c,Math.cos(a*=Qg)*b,Math.sin(a)*b)}function na(a,b,c){return this instanceof na?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof na?new na(a.l,a.a,a.b):a instanceof la?ma(a.h,a.c,a.l):za((a=ta(a)).r,a.g,a.b):new na(a,b,c)}function oa(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=qa(e)*Zg,d=qa(d)*$g,f=qa(f)*_g,new ta(sa(3.2404542*e-1.5371385*d-.4985314*f),sa(-.969266*e+1.8760108*d+.041556*f),sa(.0556434*e-.2040259*d+1.0572252*f))}function pa(a,b,c){return a>0?new la(Math.atan2(c,b)*Rg,Math.sqrt(b*b+c*c),a):new la(NaN,NaN,a)}function qa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function ra(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function sa(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ta(a,b,c){return this instanceof ta?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ta?new ta(a.r,a.g,a.b):xa(""+a,ta,ka):new ta(a,b,c)}function ua(a){return new ta(a>>16,a>>8&255,255&a)}function va(a){return ua(a)+""}function wa(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function xa(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Ba(e[0]),Ba(e[1]),Ba(e[2]))}return(f=ch.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g|=g>>4,h=240&f,h|=h>>4,i=15&f,i|=i<<4):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function ya(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new ja(d,e,i)}function za(a,b,c){a=Aa(a),b=Aa(b),c=Aa(c);var d=ra((.4124564*a+.3575761*b+.1804375*c)/Zg),e=ra((.2126729*a+.7151522*b+.072175*c)/$g);return na(116*e-16,500*(d-e),200*(e-ra((.0193339*a+.119192*b+.9503041*c)/_g)))}function Aa(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ba(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ca(a){return"function"==typeof a?a:function(){return a}}function Da(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Ea(b,c,a,d)}}function Ea(a,b,c,d){function e(){var a,b=i.status;if(!b&&Ga(i)||b>=200&&b<300||304===b){try{a=c.call(f,i)}catch(a){return void g.error.call(f,a)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=jg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=jg.event;jg.event=a;try{g.progress.call(f,i)}finally{jg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(lg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},jg.rebind(f,g,"on"),null==d?f:f.get(Fa(d))}function Fa(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ga(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ha(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return eh?eh.n=f:dh=f,eh=f,fh||(gh=clearTimeout(gh),fh=1,hh(Ia)),f}function Ia(){var a=Ja(),b=Ka()-a;b>24?(isFinite(b)&&(clearTimeout(gh),gh=setTimeout(Ia,b)),fh=0):(fh=1,hh(Ia))}function Ja(){for(var a=Date.now(),b=dh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ka(){for(var a,b=dh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:dh=b.n;return eh=a,c}function La(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ma(a,b){var c=Math.pow(10,3*tg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Na(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:u;return function(a){var c=jh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=kh.get(n)||Oa;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):"-"===h?"":h;if(o<0){var i=jg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(w<0){var x=s?a.lastIndexOf("e"):-1;x<0?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=y<k?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Oa(a){return a+""}function Pa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Qa(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new mh(c-1)),1),c}function f(a,c){return b(a=new mh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;g<d;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{mh=Pa;var d=new Pa;return d._=a,g(d,b,c)}finally{mh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Ra(a);return i.floor=i,i.round=Ra(d),i.ceil=Ra(e),i.offset=Ra(f),i.range=h,a}function Ra(a){return function(b,c){try{mh=Pa;var d=new Pa;return d._=b,a(d,c)._}finally{mh=Date}}}function Sa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=oh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var e=null!=d.Z&&mh!==Pa,f=new(e?Pa:mh);return"j"in d?f.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),f.setFullYear(d.y,0,1),f.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(f.getDay()+5)%7:d.w+7*d.U-(f.getDay()+6)%7)):f.setFullYear(d.y,d.m,d.d),f.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),e?f._:f},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(37===(e=b.charCodeAt(h++))){if(g=b.charAt(h++),!(f=D[g in oh?b.charAt(h++):g])||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{mh=Pa;var b=new mh;return b._=a,d(b)}finally{mh=Date}}var d=b(a);return c.parse=function(a){try{mh=Pa;var b=d.parse(a);return b&&b._}finally{mh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=kb;var t=jg.map(),u=Ua(p),v=Va(p),w=Ua(q),x=Va(q),y=Ua(r),z=Va(r),A=Ua(s),B=Va(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ta(a.getDate(),b,2)},e:function(a,b){return Ta(a.getDate(),b,2)},H:function(a,b){return Ta(a.getHours(),b,2)},I:function(a,b){return Ta(a.getHours()%12||12,b,2)},j:function(a,b){return Ta(1+lh.dayOfYear(a),b,3)},L:function(a,b){return Ta(a.getMilliseconds(),b,3)},m:function(a,b){return Ta(a.getMonth()+1,b,2)},M:function(a,b){return Ta(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ta(a.getSeconds(),b,2)},U:function(a,b){return Ta(lh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ta(lh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ta(a.getFullYear()%100,b,2)},Y:function(a,b){return Ta(a.getFullYear()%1e4,b,4)},Z:ib,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:cb,e:cb,H:eb,I:eb,j:db,L:hb,m:bb,M:fb,p:k,S:gb,U:Xa,w:Wa,W:Ya,x:i,X:j,y:$a,Y:Za,Z:_a,"%":jb};return b}function Ta(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Ua(a){return new RegExp("^(?:"+a.map(jg.requote).join("|")+")","i")}function Va(a){for(var b=new l,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Wa(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Xa(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Ya(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Za(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function $a(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.y=ab(+d[0]),c+d[0].length):-1}function _a(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function ab(a){return a+(a>68?1900:2e3)}function bb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function cb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function db(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function eb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function fb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function gb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function hb(a,b,c){ph.lastIndex=0;var d=ph.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function ib(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=tg(b)/60|0,e=tg(b)%60;return c+Ta(d,"0",2)+Ta(e,"0",2)}function jb(a,b,c){qh.lastIndex=0;var d=qh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function kb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function lb(){}function mb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function nb(a,b){a&&uh.hasOwnProperty(a.type)&&uh[a.type](a,b)}function ob(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function pb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)ob(a[c],b,1);b.polygonEnd()}function qb(){function a(a,b){a*=Qg,b=b*Qg/2+Mg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);wh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;xh.point=function(g,h){xh.point=a,d=(b=g)*Qg,e=Math.cos(h=(c=h)*Qg/2+Mg/4),f=Math.sin(h)},xh.lineEnd=function(){a(b,c)}}function rb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function sb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function tb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function ub(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function vb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function wb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function xb(a){return[Math.atan2(a[1],a[0]),da(a[2])]}function yb(a,b){return tg(a[0]-b[0])<Kg&&tg(a[1]-b[1])<Kg}function zb(a,b){a*=Qg;var c=Math.cos(b*=Qg);Ab(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function Ab(a,b,c){++yh,Ah+=(a-Ah)/yh,Bh+=(b-Bh)/yh,Ch+=(c-Ch)/yh}function Bb(){function a(a,e){a*=Qg;var f=Math.cos(e*=Qg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);zh+=j,Dh+=j*(b+(b=g)),Eh+=j*(c+(c=h)),Fh+=j*(d+(d=i)),Ab(b,c,d)}var b,c,d;Jh.point=function(e,f){e*=Qg;var g=Math.cos(f*=Qg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Jh.point=a,Ab(b,c,d)}}function Cb(){Jh.point=zb}function Db(){function a(a,b){a*=Qg;var c=Math.cos(b*=Qg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ca(n)/m,p=Math.atan2(m,n);Gh+=o*j,Hh+=o*k,Ih+=o*l,zh+=p,Dh+=p*(d+(d=g)),Eh+=p*(e+(e=h)),Fh+=p*(f+(f=i)),Ab(d,e,f)}var b,c,d,e,f;Jh.point=function(g,h){b=g,c=h,Jh.point=a,g*=Qg;var i=Math.cos(h*=Qg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),Ab(d,e,f)},Jh.lineEnd=function(){a(b,c),Jh.lineEnd=Cb,Jh.point=zb}}function Eb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return(c=b.invert(c,d))&&a.invert(c[0],c[1])}),c}function Fb(){return!0}function Gb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(yb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Ib(c,a,null,!0),j=new Ib(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Ib(d,a,null,!1),j=new Ib(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Hb(f),Hb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Hb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Ib(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Jb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Kb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=jg.merge(n);var a=Qb(r,o);n.length?(v||(f.polygonStart(),v=!0),Gb(n,Mb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Lb(),u=b(t),v=!1;return s}}function Kb(a){return a.length>1}function Lb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:x,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Mb(a,b){return((a=a.x)[0]<0?a[1]-Pg-Kg:Pg-a[1])-((b=b.x)[0]<0?b[1]-Pg-Kg:Pg-b[1])}function Nb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Mg:-Mg,i=tg(f-c);tg(i-Mg)<Kg?(a.point(c,d=(d+g)/2>0?Pg:-Pg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Mg&&(tg(c-e)<Kg&&(c-=e*Kg),
tg(f-h)<Kg&&(f-=h*Kg),d=Ob(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Ob(a,b,c,d){var e,f,g=Math.sin(a-c);return tg(g)>Kg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Pb(a,b,c,d){var e;if(null==a)e=c*Pg,d.point(-Mg,e),d.point(0,e),d.point(Mg,e),d.point(Mg,0),d.point(Mg,-e),d.point(0,-e),d.point(-Mg,-e),d.point(-Mg,0),d.point(-Mg,e);else if(tg(a[0]-b[0])>Kg){var f=a[0]<b[0]?Mg:-Mg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Qb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;wh.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Mg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Mg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Mg,z=o*t;if(wh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ng:v,y^m>=c^r>=c){var A=tb(rb(l),rb(a));wb(A);var B=tb(e,A);wb(B);var C=(y^v>=0?-1:1)*da(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-Kg||f<Kg&&wh<-Kg)^1&g}function Rb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?Mg:-Mg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(yb(c,n)||yb(o,n))&&(o[0]+=Kg,o[1]+=Kg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&yb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=rb(a),e=rb(b),g=[1,0,0],h=tb(d,e),i=sb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=tb(g,h),o=vb(g,l);ub(o,vb(h,m));var p=n,q=sb(o,p),r=sb(p,p),s=q*q-r*(sb(o,o)-1);if(!(s<0)){var t=Math.sqrt(s),u=vb(p,(-q-t)/r);if(ub(u,o),u=xb(u),!c)return u;var v,w=a[0],x=b[0],y=a[1],z=b[1];x<w&&(v=w,w=x,x=v);var A=x-w,B=tg(A-Mg)<Kg,C=B||A<Kg;if(!B&&z<y&&(v=y,y=z,z=v),C?B?y+z>0^u[1]<(tg(u[0]-w)<Kg?y:z):y<=u[1]&&u[1]<=z:A>Mg^(w<=u[0]&&u[0]<=x)){var D=vb(p,(-q+t)/r);return ub(D,o),[u,xb(D)]}}}function e(b,c){var d=g?a:Mg-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=tg(f)>Kg;return Jb(b,c,qc(a,6*Qg),g?[0,-a]:[-Mg,a-Mg])}function Sb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Tb(a,b,c,d){function e(d,e){return tg(d[0]-a)<Kg?e>0?0:3:tg(d[0]-c)<Kg?e>0?2:1:tg(d[1]-b)<Kg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&ba(j,f,a)>0&&++b:f[1]<=d&&ba(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0)do{j.point(0===k||3===k?a:c,k>1?d:b)}while((k=(k+i+4)%4)!==l);else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Lh,Math.min(Lh,a)),b=Math.max(-Lh,Math.min(Lh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Lb(),C=Sb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=jg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Gb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Ub(a){var b=0,c=Mg/3,d=ic(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Mg/180,c=a[1]*Mg/180):[b/Mg*180,c/Mg*180]},e}function Vb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,da((f-(a*a+c*c)*e*e)/(2*e))]},c}function Wb(){function a(a,b){Nh+=e*a-d*b,d=a,e=b}var b,c,d,e;Sh.point=function(f,g){Sh.point=a,b=d=f,c=e=g},Sh.lineEnd=function(){a(b,c)}}function Xb(a,b){a<Oh&&(Oh=a),a>Qh&&(Qh=a),b<Ph&&(Ph=b),b>Rh&&(Rh=b)}function Yb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Zb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Zb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Zb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function $b(a,b){Ah+=a,Bh+=b,++Ch}function _b(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Dh+=g*(b+a)/2,Eh+=g*(c+d)/2,Fh+=g,$b(b=a,c=d)}var b,c;Uh.point=function(d,e){Uh.point=a,$b(b=d,c=e)}}function ac(){Uh.point=$b}function bc(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Dh+=g*(d+a)/2,Eh+=g*(e+b)/2,Fh+=g,g=e*a-d*b,Gh+=g*(d+a),Hh+=g*(e+b),Ih+=3*g,$b(d=a,e=b)}var b,c,d,e;Uh.point=function(f,g){Uh.point=a,$b(b=d=f,c=e=g)},Uh.lineEnd=function(){a(b,c)}}function cc(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Ng)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:x};return h}function dc(a){function b(a){return(h?d:c)(a)}function c(b){return gc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=rb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=tg(tg(x)-1)<Kg||tg(d-m)<Kg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||tg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Qg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function ec(a){var b=dc(function(b,c){return a([b*Rg,c*Rg])});return function(a){return jc(b(a))}}function fc(a){this.stream=a}function gc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function hc(a){return ic(function(){return a})()}function ic(a){function b(a){return a=h(a[0]*Qg,a[1]*Qg),[a[0]*m+i,j-a[1]*m]}function c(a){return(a=h.invert((a[0]-i)/m,(j-a[1])/m))&&[a[0]*Rg,a[1]*Rg]}function d(){h=Eb(g=mc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=dc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,v=Kh,w=u,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=jc(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Kh):Rb((x=+a)*Qg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Tb(a[0][0],a[0][1],a[1][0],a[1][1]):u,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Qg,q=a[1]%360*Qg,d()):[p*Rg,q*Rg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Qg,s=a[1]%360*Qg,t=a.length>2?a[2]%360*Qg:0,d()):[r*Rg,s*Rg,t*Rg]},jg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function jc(a){return gc(a,function(b,c){a.point(b*Qg,c*Qg)})}function kc(a,b){return[a,b]}function lc(a,b){return[a>Mg?a-Ng:a<-Mg?a+Ng:a,b]}function mc(a,b,c){return a?b||c?Eb(oc(a),pc(b,c)):oc(a):b||c?pc(b,c):lc}function nc(a){return function(b,c){return b+=a,[b>Mg?b-Ng:b<-Mg?b+Ng:b,c]}}function oc(a){var b=nc(a);return b.invert=nc(-a),b}function pc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),da(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),da(k*d-h*e)]},c}function qc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=rc(c,e),f=rc(c,f),(g>0?e<f:e>f)&&(e+=g*Ng)):(e=a+g*Ng,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=xb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function rc(a,b){var c=rb(b);c[0]-=a,wb(c);var d=ca(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Kg)%(2*Math.PI)}function sc(a,b,c){var d=jg.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function tc(a,b,c){var d=jg.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function uc(a){return a.source}function vc(a){return a.target}function wc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ha(d-b)+e*g*ha(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Rg,Math.atan2(g,Math.sqrt(d*d+e*e))*Rg]}:function(){return[a*Rg,b*Rg]};return o.distance=m,o}function xc(){function a(a,e){var f=Math.sin(e*=Qg),g=Math.cos(e),h=tg((a*=Qg)-b),i=Math.cos(h);Vh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Wh.point=function(e,f){b=e*Qg,c=Math.sin(f*=Qg),d=Math.cos(f),Wh.point=a},Wh.lineEnd=function(){Wh.point=Wh.lineEnd=x}}function yc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function zc(a,b){function c(a,b){g>0?b<-Pg+Kg&&(b=-Pg+Kg):b>Pg-Kg&&(b=Pg-Kg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Mg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=aa(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Pg]},c):Bc}function Ac(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return tg(e)<Kg?kc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-aa(e)*Math.sqrt(a*a+c*c)]},c)}function Bc(a,b){return[a,Math.log(Math.tan(Mg/4+b/2))]}function Cc(a){var b,c=hc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Mg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Dc(a,b){return[Math.log(Math.tan(Mg/4+b/2)),-a]}function Ec(a){return a[0]}function Fc(a){return a[1]}function Gc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&ba(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Hc(a,b){return a[0]-b[0]||a[1]-b[1]}function Ic(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Jc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Kc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Lc(){ed(this),this.edge=this.site=this.circle=null}function Mc(a){var b=gi.pop()||new Lc;return b.site=a,b}function Nc(a){Xc(a),di.remove(a),gi.push(a),ed(a)}function Oc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Nc(a);for(var i=f;i.circle&&tg(c-i.circle.x)<Kg&&tg(d-i.circle.cy)<Kg;)f=i.P,h.unshift(i),Nc(i),i=f;h.unshift(i),Xc(i);for(var j=g;j.circle&&tg(c-j.circle.x)<Kg&&tg(d-j.circle.cy)<Kg;)g=j.N,h.push(j),Nc(j),j=g;h.push(j),Xc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],bd(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=_c(i.site,j.site,null,e),Wc(i),Wc(j)}function Pc(a){for(var b,c,d,e,f=a.x,g=a.y,h=di._;h;)if((d=Qc(h,g)-f)>Kg)h=h.L;else{if(!((e=f-Rc(h,g))>Kg)){d>-Kg?(b=h.P,c=h):e>-Kg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Mc(a);if(di.insert(b,i),b||c){if(b===c)return Xc(b),c=Mc(b.site),di.insert(i,c),i.edge=c.edge=_c(b.site,i.site),Wc(b),void Wc(c);if(!c)return void(i.edge=_c(b.site,i.site));Xc(b),Xc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};bd(c.edge,j,o,u),i.edge=_c(j,a,null,u),c.edge=_c(a,o,null,u),Wc(b),Wc(c)}}function Qc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Rc(a,b){var c=a.N;if(c)return Qc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Sc(a){this.site=a,this.edges=[]}function Tc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=ci,q=p.length;q--;)if((f=p[q])&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(tg(d-b)>Kg||tg(e-c)>Kg)&&(h.splice(g,0,new cd(ad(f.site,k,tg(d-l)<Kg&&o-e>Kg?{x:l,y:tg(b-l)<Kg?c:o}:tg(e-o)<Kg&&m-d>Kg?{x:tg(c-o)<Kg?b:m,y:o}:tg(d-m)<Kg&&e-n>Kg?{x:m,y:tg(b-m)<Kg?c:n}:tg(e-n)<Kg&&d-l>Kg?{x:tg(c-n)<Kg?b:l,y:n}:null),f.site,null)),++i)}function Uc(a,b){return b.angle-a.angle}function Vc(){ed(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Lg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=hi.pop()||new Vc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=fi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}fi.insert(s,r),s||(ei=r)}}}}function Xc(a){var b=a.circle;b&&(b.P||(ei=b.N),fi.remove(b),hi.push(b),ed(b),a.circle=null)}function Yc(a){for(var b,c=bi,d=Sb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Zc(b,a)||!d(b)||tg(b.a.x-b.b.x)<Kg&&tg(b.a.y-b.b.y)<Kg)&&(b.a=b.b=null,c.splice(e,1))}function Zc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function $c(a,b){this.l=a,this.r=b,this.a=this.b=null}function _c(a,b,c,d){var e=new $c(a,b);return bi.push(e),c&&bd(e,a,b,c),d&&bd(e,b,a,d),ci[a.i].edges.push(new cd(e,a,b)),ci[b.i].edges.push(new cd(e,b,a)),e}function ad(a,b,c){var d=new $c(a,null);return d.a=b,d.b=c,bi.push(d),d}function bd(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function cd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function dd(){this._=null}function ed(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function fd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function gd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function hd(a){for(;a.L;)a=a.L;return a}function id(a,b){var c,d,e,f=a.sort(jd).pop();for(bi=[],ci=new Array(a.length),di=new dd,fi=new dd;;)if(e=ei,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(ci[f.i]=new Sc(f),Pc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Oc(e.arc)}b&&(Yc(b),Tc(b));var g={cells:ci,edges:bi};return di=fi=bi=ci=null,g}function jd(a,b){return b.y-a.y||b.x-a.x}function kd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function ld(a){return a.x}function md(a){return a.y}function nd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function od(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&od(a,i[0],c,d,g,h),i[1]&&od(a,i[1],g,d,e,h),i[2]&&od(a,i[2],c,h,g,f),i[3]&&od(a,i[3],g,h,e,f)}}function pd(a,b,c,d,e,f,g){var h,i=1/0;return function a(j,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=j.point){var o,p=b-j.x,q=c-j.y,r=p*p+q*q;if(r<i){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=j.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(j=t[3&y])switch(3&y){case 0:a(j,k,l,u,v);break;case 1:a(j,u,l,m,v);break;case 2:a(j,k,v,u,n);break;case 3:a(j,u,v,m,n)}}}(a,d,e,f,g),h}function qd(a,b){a=jg.rgb(a),b=jg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+wa(Math.round(c+f*a))+wa(Math.round(d+g*a))+wa(Math.round(e+h*a))}}function rd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=ud(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function sd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function td(a,b){var c,d,e,f=ji.lastIndex=ki.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=ji.exec(a))&&(d=ki.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:sd(c,d)})),f=ki.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function ud(a,b){for(var c,d=jg.interpolators.length;--d>=0&&!(c=jg.interpolators[d](a,b)););return c}function vd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(ud(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function wd(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function xd(a){return function(b){return 1-a(1-b)}}function yd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function zd(a){return a*a}function Ad(a){return a*a*a}function Bd(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Cd(a){return function(b){return Math.pow(b,a)}}function Dd(a){return 1-Math.cos(a*Pg)}function Ed(a){return Math.pow(2,10*(a-1))}function Fd(a){return 1-Math.sqrt(1-a*a)}function Gd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ng*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ng/b)}}function Hd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Id(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Jd(a,b){a=jg.hcl(a),b=jg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){a=jg.hsl(a),b=jg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Ld(a,b){a=jg.lab(a),b=jg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return oa(c+f*a,d+g*a,e+h*a)+""}}function Md(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Nd(a){var b=[a.a,a.b],c=[a.c,a.d],d=Pd(b),e=Od(b,c),f=Pd(Qd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Rg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Rg:0}function Od(a,b){return a[0]*b[0]+a[1]*b[1]}function Pd(a){var b=Math.sqrt(Od(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Qd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Rd(a){return a.length?a.pop()+",":""}function Sd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:sd(a[0],b[0])},{i:e-2,x:sd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Td(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Rd(c)+"rotate(",null,")")-2,x:sd(a,b)})):b&&c.push(Rd(c)+"rotate("+b+")")}function Ud(a,b,c,d){a!==b?d.push({i:c.push(Rd(c)+"skewX(",null,")")-2,x:sd(a,b)}):b&&c.push(Rd(c)+"skewX("+b+")")}function Vd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Rd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:sd(a[0],b[0])},{i:e-2,x:sd(a[1],b[1])})}else 1===b[0]&&1===b[1]||c.push(Rd(c)+"scale("+b+")")}function Wd(a,b){var c=[],d=[];return a=jg.transform(a),b=jg.transform(b),Sd(a.translate,b.translate,c,d),Td(a.rotate,b.rotate,c,d),Ud(a.skew,b.skew,c,d),Vd(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Xd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Yd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Zd(a){for(var b=a.source,c=a.target,d=_d(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function $d(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function _d(a,b){if(a===b)return a;for(var c=$d(a),d=$d(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function ae(a){a.fixed|=2}function be(a){a.fixed&=-7}function ce(a){a.fixed|=4,a.px=a.x,a.py=a.y}function de(a){a.fixed&=-5}function ee(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)null!=(f=g[i])&&(ee(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function fe(a,b){return jg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=le,a}function ge(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function he(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function ie(a){return a.children}function je(a){return a.value}function ke(a,b){return b.value-a.value}function le(a){return jg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function me(a){return a.x}function ne(a){return a.y}function oe(a,b,c){a.y0=b,a.y=c}function pe(a){return jg.range(a.length)}function qe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function re(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function se(a){return a.reduce(te,0)}function te(a,b){return a+b[1]}function ue(a,b){return ve(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ve(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function we(a){return[jg.min(a),jg.max(a)]}function xe(a,b){return a.value-b.value}function ye(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function ze(a,b){a._pack_next=b,b._pack_prev=a}function Ae(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Be(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(Ce),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],Fe(d,e,f),b(f),ye(d,f),d._pack_prev=f,ye(f,e),e=d._pack_next,g=3;g<j;g++){Fe(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(Ae(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!Ae(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?ze(d,e=h):ze(d=i,e),g--):(ye(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(De)}}function Ce(a){a._pack_next=a._pack_prev=a}function De(a){delete a._pack_next,delete a._pack_prev}function Ee(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Ee(e[f],b,c,d)}function Fe(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Ge(a,b){return a.parent==b.parent?1:2}function He(a){var b=a.children;return b.length?b[0]:a.t}function Ie(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Je(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ke(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Le(a,b,c){return a.a.parent===b.parent?a.a:c}function Me(a){return 1+jg.max(a,function(a){return a.y})}function Ne(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Oe(a){var b=a.children;return b&&b.length?Oe(b[0]):a}function Pe(a){var b,c=a.children;return c&&(b=c.length)?Pe(c[b-1]):a}function Qe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Re(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Se(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Te(a){return a.rangeExtent?a.rangeExtent():Se(a.range())}function Ue(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ve(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function We(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:vi}function Xe(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=jg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Ye(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Xe:Ue,i=d?Yd:Xd;return g=e(a,b,i,c),h=e(b,a,i,ud),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Md)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return af(a,b)},f.tickFormat=function(b,c){return bf(a,b,c)},f.nice=function(b){return $e(a,b),e()},f.copy=function(){return Ye(a,b,c,d)},e()}function Ze(a,b){return jg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function $e(a,b){return Ve(a,We(_e(a,b)[2])),Ve(a,We(_e(a,b)[2])),a}function _e(a,b){null==b&&(b=10);var c=Se(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function af(a,b){return jg.range.apply(jg,_e(a,b))}function bf(a,b,c){var d=_e(a,b);if(c){var e=jh.exec(c);if(e.shift(),"s"===e[8]){var f=jg.formatPrefix(Math.max(tg(d[0]),tg(d[1])));return e[7]||(e[7]="."+cf(f.scale(d[2]))),e[8]="f",c=jg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+df(e[8],d)),c=e.join("")}else c=",."+cf(d[2])+"f";return jg.format(c)}function cf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function df(a,b){var c=cf(b[2]);return a in wi?Math.abs(c-cf(Math.max(tg(b[0]),tg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function ef(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ve(d.map(e),c?Math:yi);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Se(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return xi;arguments.length<2?c=xi:"function"!=typeof c&&(c=jg.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return g*b<b-.5&&(g*=b),g<=d?c(a):""}},g.copy=function(){return ef(a.copy(),b,c,d)},Ze(g,a)}function ff(a,b,c){function d(b){return a(e(b))}var e=gf(b),f=gf(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return af(c,a)},d.tickFormat=function(a,b){return bf(c,a,b)},d.nice=function(a){return d.domain($e(c,a))},d.exponent=function(g){return arguments.length?(e=gf(b=g),f=gf(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return ff(a.copy(),b,c)},Ze(d,a)}function gf(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function hf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return jg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){
if(!arguments.length)return a;a=[],e=new l;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Se(b.a[0])},c.copy=function(){return hf(a,b)},c.domain(a)}function jf(a,b){function c(){var c=0,e=b.length;for(h=[];++c<e;)h[c-1]=jg.quantile(a,c/e);return d}function d(a){if(!isNaN(a=+a))return b[jg.bisect(h,a)]}var h;return d.domain=function(b){return arguments.length?(a=b.map(f).filter(g).sort(e),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return h},d.invertExtent=function(c){return c=b.indexOf(c),c<0?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},d.copy=function(){return jf(a,b)},c()}function kf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return kf(a,b,c)},e()}function lf(a,b){function c(c){if(c<=c)return b[jg.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return lf(a,b)},c}function mf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return af(a,b)},b.tickFormat=function(b,c){return bf(a,b,c)},b.copy=function(){return mf(a)},b}function nf(){return 0}function of(a){return a.innerRadius}function pf(a){return a.outerRadius}function qf(a){return a.startAngle}function rf(a){return a.endAngle}function sf(a){return a&&a.padAngle}function tf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function uf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function vf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ca(c),o=Ca(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Ec,d=Fc,e=Fb,f=wf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Ei.get(a)||wf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function wf(a){return a.length>1?a.join("L"):a+"Z"}function xf(a){return a.join("L")+"Z"}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function zf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Af(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Bf(a,b){return a.length<4?wf(a):a[1]+Ef(a.slice(1,-1),Ff(a,b))}function Cf(a,b){return a.length<3?xf(a):a[0]+Ef((a.push(a[0]),a),Ff([a[a.length-2]].concat(a,[a[1]]),b))}function Df(a,b){return a.length<3?wf(a):a[0]+Ef(a,Ff(a,b))}function Ef(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return wf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Ff(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Gf(a){if(a.length<3)return wf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Kf(Hi,g),",",Kf(Hi,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Lf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Hf(a){if(a.length<4)return wf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Kf(Hi,f)+","+Kf(Hi,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Lf(c,f,g);return c.join("")}function If(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Kf(Hi,g),",",Kf(Hi,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Lf(b,g,h);return b.join("")}function Jf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Gf(a)}function Kf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Lf(a,b,c){a.push("C",Kf(Fi,b),",",Kf(Fi,c),",",Kf(Gi,b),",",Kf(Gi,c),",",Kf(Hi,b),",",Kf(Hi,c))}function Mf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Nf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Mf(e,f);++b<c;)d[b]=(g+(g=Mf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Of(a){for(var b,c,d,e,f=[],g=Nf(a),h=-1,i=a.length-1;++h<i;)b=Mf(a[h],a[h+1]),tg(b)<Kg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,(e=c*c+d*d)>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Pf(a){return a.length<3?wf(a):a[0]+Ef(a,Of(a))}function Qf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Pg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Rf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ca(c),v=Ca(e),w=c===d?function(){return n}:Ca(d),x=e===f?function(){return o}:Ca(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Ec,d=Ec,e=0,f=Fc,g=Fb,h=wf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Ei.get(a)||wf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Sf(a){return a.radius}function Tf(a){return[a.x,a.y]}function Uf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Pg;return[c*Math.cos(d),c*Math.sin(d)]}}function Vf(){return 64}function Wf(){return"circle"}function Xf(a){var b=Math.sqrt(a/Mg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Yf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Zf(a,b,c){return yg(a,Oi),a.namespace=b,a.id=c,a}function $f(a,b,c,d){var e=a.id,f=a.namespace;return T(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function _f(a){return null==a&&(a=""),function(){this.textContent=a}}function ag(a){return null==a?"__transition__":"__transition_"+a+"__"}function bg(a,b,c,d,e){function f(a){var b=p.delay;if(j.t=b+i,b<=a)return g(a-b);j.c=g}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(+g<d){var l=o[g];l.timer.c=null,l.timer.t=NaN,--o.count,delete o[g]}j.c=h,Ha(function(){return j.c&&h(c||1)&&(j.c=null,j.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,k=p.duration}function h(e){for(var f=e/k,g=m(f),h=n.length;h>0;)n[--h].call(a,g);if(f>=1)return p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1}var i,j,k,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,j=Ha(f,0,i),p=o[d]={tween:new l,time:i,timer:j,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function cg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function dg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function eg(a){return a.toISOString()}function fg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=jg.bisect(Xi,e);return f==Xi.length?[b.year,_e(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Xi[f-1]<Xi[f]/e?f-1:f]:[$i,_e(a,c)[2]]}return d.invert=function(b){return gg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(gg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,gg(+c+1),b).length}var f=d.domain(),g=Se(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ve(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=gg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=gg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Se(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],gg(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return fg(a.copy(),b,c)},Ze(d,a)}function gg(a){return new Date(a)}function hg(a){return JSON.parse(a.responseText)}function ig(a){var b=mg.createRange();return b.selectNode(mg.body),b.createContextualFragment(a.responseText)}var jg={version:"3.5.17"},kg=[].slice,lg=function(a){return kg.call(a)},mg=this.document;if(mg)try{lg(mg.documentElement.childNodes)[0].nodeType}catch(a){lg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),mg)try{mg.createElement("DIV").style.setProperty("opacity",0,"")}catch(a){var ng=this.Element.prototype,og=ng.setAttribute,pg=ng.setAttributeNS,qg=this.CSSStyleDeclaration.prototype,rg=qg.setProperty;ng.setAttribute=function(a,b){og.call(this,a,b+"")},ng.setAttributeNS=function(a,b,c){pg.call(this,a,b,c+"")},qg.setProperty=function(a,b,c){rg.call(this,a,b+"",c)}}jg.ascending=e,jg.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},jg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},jg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},jg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},jg.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)g(c=+a[f])&&(d+=c);else for(;++f<e;)g(c=+b.call(a,a[f],f))&&(d+=c);return d},jg.mean=function(a,b){var c,d=0,e=a.length,h=-1,i=e;if(1===arguments.length)for(;++h<e;)g(c=f(a[h]))?d+=c:--i;else for(;++h<e;)g(c=f(b.call(a,a[h],h)))?d+=c:--i;if(i)return d/i},jg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},jg.median=function(a,b){var c,d=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)g(c=f(a[i]))&&d.push(c);else for(;++i<h;)g(c=f(b.call(a,a[i],i)))&&d.push(c);if(d.length)return jg.quantile(d.sort(e),.5)},jg.variance=function(a,b){var c,d,e=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<e;)g(c=f(a[j]))&&(d=c-h,h+=d/++k,i+=d*(c-h));else for(;++j<e;)g(c=f(b.call(a,a[j],j)))&&(d=c-h,h+=d/++k,i+=d*(c-h));if(k>1)return i/(k-1)},jg.deviation=function(){var a=jg.variance.apply(this,arguments);return a?Math.sqrt(a):a};var sg=h(e);jg.bisectLeft=sg.left,jg.bisect=jg.bisectRight=sg.right,jg.bisector=function(a){return h(1===a.length?function(b,c){return e(a(b),c)}:a)},jg.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,f<2&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},jg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},jg.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=new Array(c<0?0:c);b<c;)e[b]=[d,d=a[++b]];return e},jg.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=jg.min(a,i),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d},jg.zip=function(){return jg.transpose(arguments)},jg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},jg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},jg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},jg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var tg=Math.abs;jg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c==1/0)throw new Error("infinite range");var d,e=[],f=j(tg(c)),g=-1;if(a*=f,b*=f,c*=f,c<0)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},jg.map=function(a,b){var c=new l;if(a instanceof l)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var ug="__proto__",vg="\0";k(l,{has:o,get:function(a){return this._[m(a)]},set:function(a,b){return this._[m(a)]=b},remove:p,keys:q,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:n(b),value:this._[b]});return a},size:r,empty:s,forEach:function(a){for(var b in this._)a.call(this,n(b),this._[b])}}),jg.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,j,k,m,n=-1,o=g.length,p=f[h++],q=new l;++n<o;)(m=q.get(i=p(j=g[n])))?m.push(j):q.set(i,[j]);return b?(j=b(),k=function(c,d){j.set(c,a(b,d,h))}):(j={},k=function(c,d){j[c]=a(b,d,h)}),q.forEach(k),j}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(jg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},jg.set=function(a){var b=new t;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},k(t,{has:o,add:function(a){return this._[m(a+="")]=!0,a},remove:p,values:q,size:r,empty:s,forEach:function(a){for(var b in this._)a.call(this,n(b))}}),jg.behavior={},jg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=v(a,b,b[c]);return a};var wg=["webkit","ms","moz","Moz","o","O"];jg.dispatch=function(){for(var a=new y,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=z(a);return a},y.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},jg.event=null,jg.requote=function(a){return a.replace(xg,"\\$&")};var xg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,yg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},zg=function(a,b){return b.querySelector(a)},Ag=function(a,b){return b.querySelectorAll(a)},Bg=function(a,b){var c=a.matches||a[w(a,"matchesSelector")];return(Bg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(zg=function(a,b){return Sizzle(a,b)[0]||null},Ag=Sizzle,Bg=Sizzle.matchesSelector),jg.selection=function(){return jg.select(mg.documentElement)};var Cg=jg.selection.prototype=[];Cg.select=function(a){var b,c,d,e,f=[];a=E(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return D(f)},Cg.selectAll=function(a){var b,c,d=[];a=F(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=lg(a.call(c,c.__data__,h,e))),b.parentNode=c);return D(d)};var Dg="http://www.w3.org/1999/xhtml",Eg={svg:"http://www.w3.org/2000/svg",xhtml:Dg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};jg.ns={prefix:Eg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Eg.hasOwnProperty(c)?{space:Eg[c],local:a}:a}},Cg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=jg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(G(b,a[b]));return this}return this.each(G(a,b))},Cg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=J(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!I(a[e]).test(b))return!1;return!0}for(b in a)this.each(K(b,a[b]));return this}return this.each(K(a,b))},Cg.style=function(a,b,c){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(b="");for(c in a)this.each(M(c,a[c],b));return this}if(e<2){var f=this.node();return d(f).getComputedStyle(f,null).getPropertyValue(a)}c=""}return this.each(M(a,b,c))},Cg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(N(b,a[b]));return this}return this.each(N(a,b))},Cg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Cg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Cg.append=function(a){return a=O(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Cg.insert=function(a,b){return a=O(a),b=E(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Cg.remove=function(){return this.each(P)},Cg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,k=c.length,m=Math.min(g,k),n=new Array(k),o=new Array(k),p=new Array(g);if(b){var q,r=new l,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<k;)(e=r.get(q=b.call(c,f=c[d],d)))?!0!==e&&(n[d]=e,e.__data__=f):o[d]=Q(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&!0!==r.get(s[d])&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=Q(f);for(;d<k;++d)o[d]=Q(c[d]);for(;d<g;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),j.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=U([]),i=D([]),j=D([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return j},i},Cg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Cg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=R(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return D(e)},Cg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Cg.sort=function(a){a=S.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Cg.each=function(a){return T(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Cg.call=function(a){var b=lg(arguments);return a.apply(b[0]=this,b),this},Cg.empty=function(){return!this.node()},Cg.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},Cg.size=function(){var a=0;return T(this,function(){++a}),a};var Fg=[];jg.selection.enter=U,jg.selection.enter.prototype=Fg,Fg.append=Cg.append,Fg.empty=Cg.empty,Fg.node=Cg.node,Fg.call=Cg.call,Fg.size=Cg.size,Fg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return D(g)},Fg.insert=function(a,b){return arguments.length<2&&(b=V(this)),Cg.insert.call(this,a,b)},jg.select=function(a){var c;return"string"==typeof a?(c=[zg(a,mg)],c.parentNode=mg.documentElement):(c=[a],c.parentNode=b(a)),D([c])},jg.selectAll=function(a){var b;return"string"==typeof a?(b=lg(Ag(a,mg)),b.parentNode=mg.documentElement):(b=lg(a),b.parentNode=null),D([b])},Cg.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(W(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(W(a,b,c))};var Gg=jg.map({mouseenter:"mouseover",mouseleave:"mouseout"});mg&&Gg.forEach(function(a){"on"+a in mg&&Gg.remove(a)});var Hg,Ig=0;jg.mouse=function(a){return $(a,B())};var Jg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;jg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=B().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return $(a,d)},jg.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function b(a,b,d,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=jg.event.target.correspondingElement||jg.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=jg.select(d(l)).on(f+q,h).on(g+q,i),s=Z(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=C(a,"drag","dragstart","dragend"),e=null,f=b(x,jg.mouse,d,"mousemove","mouseup"),g=b(_,jg.touch,u,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},jg.rebind(a,c,"on")},jg.touches=function(a,b){return arguments.length<2&&(b=B().touches),b?lg(b).map(function(b){var c=$(a,b);return c.identifier=b.identifier,c}):[]};var Kg=1e-6,Lg=Kg*Kg,Mg=Math.PI,Ng=2*Mg,Og=Ng-Kg,Pg=Mg/2,Qg=Mg/180,Rg=180/Mg,Sg=Math.SQRT2;jg.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(m<Lg)d=Math.log(j/g)/Sg,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Sg*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+4*m)/(2*g*2*n),p=(j*j-g*g-4*m)/(2*j*2*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Sg,c=function(a){var b=a*d,c=fa(q),h=g/(2*n)*(c*ga(Sg*b+q)-ea(q));return[e+h*k,f+h*l,g*c/fa(Sg*b+q)]}}return c.duration=1e3*d,c},jg.behavior.zoom=function(){function a(a){a.on(F,l).on(Ug+".zoom",n).on("dblclick.zoom",o).on(I,m)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function c(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function e(a){y.k=Math.max(B[0],Math.min(B[1],a))}function f(a,b){b=c(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:y.x,y:y.y,k:y.k},e(Math.pow(2,g)),f(q=c,d),b=jg.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(jg.mouse(e),m),j(g)}function c(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=jg.select(d(e)).on(G,a).on(H,c),m=b(jg.mouse(e)),n=Z(e);Ni.call(e),i(g)}function m(){function a(){var a=jg.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=jg.event.target;jg.select(b).on(u,d).on(v,h),w.push(b);for(var c=jg.event.changedTouches,e=0,f=c.length;e<f;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(j-t<500){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),A()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=jg.touches(o);Ni.call(o);for(var h=0,i=g.length;h<i;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(jg.event.touches.length){for(var b=jg.event.changedTouches,c=0,d=b.length;c<d;++c)delete q[b[c].identifier];for(var e in q)return void a()}jg.selectAll(w).on(s,null),x.on(F,l).on(I,m),z(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+jg.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=jg.select(o),z=Z(o);c(),i(p),x.on(F,null).on(I,c)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Ni.call(this),p=b(q=r||jg.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),A(),e(Math.pow(2,.002*Tg())*y.k),f(q,p),j(a)}function o(){var a=jg.mouse(this),c=Math.log(y.k)/Math.LN2;g(this,a,b(a),jg.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var p,q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},z=[960,500],B=Vg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=C(a,"zoomstart","zoom","zoomend");return Ug||(Ug="onwheel"in mg?(Tg=function(){return-jg.event.deltaY*(jg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in mg?(Tg=function(){return jg.event.wheelDelta},"mousewheel"):(Tg=function(){return-jg.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=y;Li?jg.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=jg.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=y={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=y,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:null},e(+b),h(),a):y.k},a.scaleExtent=function(b){return arguments.length?(B=null==b?Vg:[+b[0],+b[1]],a):B},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},jg.rebind(a,J,"on")};var Tg,Ug,Vg=[0,1/0];jg.color=ia,ia.prototype.toString=function(){return this.rgb()+""},jg.hsl=ja;var Wg=ja.prototype=new ia;Wg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ja(this.h,this.s,this.l/a)},Wg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ja(this.h,this.s,a*this.l)},Wg.rgb=function(){return ka(this.h,this.s,this.l)},jg.hcl=la;var Xg=la.prototype=new ia;Xg.brighter=function(a){return new la(this.h,this.c,Math.min(100,this.l+Yg*(arguments.length?a:1)))},Xg.darker=function(a){return new la(this.h,this.c,Math.max(0,this.l-Yg*(arguments.length?a:1)))},Xg.rgb=function(){return ma(this.h,this.c,this.l).rgb()},jg.lab=na;var Yg=18,Zg=.95047,$g=1,_g=1.08883,ah=na.prototype=new ia;ah.brighter=function(a){return new na(Math.min(100,this.l+Yg*(arguments.length?a:1)),this.a,this.b)},ah.darker=function(a){return new na(Math.max(0,this.l-Yg*(arguments.length?a:1)),this.a,this.b)},ah.rgb=function(){return oa(this.l,this.a,this.b)},jg.rgb=ta;var bh=ta.prototype=new ia;bh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new ta(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ta(e,e,e)},bh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ta(a*this.r,a*this.g,a*this.b)},bh.hsl=function(){return ya(this.r,this.g,this.b)},bh.toString=function(){return"#"+wa(this.r)+wa(this.g)+wa(this.b)};var ch=jg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,
gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ch.forEach(function(a,b){ch.set(a,ua(b))}),jg.functor=Ca,jg.xhr=Da(u),jg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Ea(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new t,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},jg.csv=jg.dsv(",","text/csv"),jg.tsv=jg.dsv("\t","text/tab-separated-values");var dh,eh,fh,gh,hh=this[w(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};jg.timer=function(){Ha.apply(this,arguments)},jg.timer.flush=function(){Ja(),Ka()},jg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ih=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ma);jg.formatPrefix=function(a,b){var c=0;return(a=+a)&&(a<0&&(a*=-1),b&&(a=jg.round(a,La(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),ih[8+c/3]};var jh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,kh=jg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=jg.round(a,La(a,b))).toFixed(Math.max(0,Math.min(20,La(a*(1+1e-15),b))))}}),lh=jg.time={},mh=Date;Pa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){nh.setUTCDate.apply(this._,arguments)},setDay:function(){nh.setUTCDay.apply(this._,arguments)},setFullYear:function(){nh.setUTCFullYear.apply(this._,arguments)},setHours:function(){nh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){nh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){nh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){nh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){nh.setUTCSeconds.apply(this._,arguments)},setTime:function(){nh.setTime.apply(this._,arguments)}};var nh=Date.prototype;lh.year=Qa(function(a){return a=lh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),lh.years=lh.year.range,lh.years.utc=lh.year.utc.range,lh.day=Qa(function(a){var b=new mh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),lh.days=lh.day.range,lh.days.utc=lh.day.utc.range,lh.dayOfYear=function(a){var b=lh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=lh[a]=Qa(function(a){return(a=lh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=lh.year(a).getDay();return Math.floor((lh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});lh[a+"s"]=c.range,lh[a+"s"].utc=c.utc.range,lh[a+"OfYear"]=function(a){var c=lh.year(a).getDay();return Math.floor((lh.dayOfYear(a)+(c+b)%7)/7)}}),lh.week=lh.sunday,lh.weeks=lh.sunday.range,lh.weeks.utc=lh.sunday.utc.range,lh.weekOfYear=lh.sundayOfYear;var oh={"-":"",_:" ",0:"0"},ph=/^\s*\d+/,qh=/^%/;jg.locale=function(a){return{numberFormat:Na(a),timeFormat:Sa(a)}};var rh=jg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});jg.format=rh.numberFormat,jg.geo={},lb.prototype={s:0,t:0,add:function(a){mb(a,this.t,sh),mb(sh.s,this.s,this),this.s?this.t+=sh.t:this.s=sh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var sh=new lb;jg.geo.stream=function(a,b){a&&th.hasOwnProperty(a.type)?th[a.type](a,b):nb(a,b)};var th={Feature:function(a,b){nb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)nb(c[d].geometry,b)}},uh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){ob(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b,0)},Polygon:function(a,b){pb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)pb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)nb(c[d],b)}};jg.geo.area=function(a){return vh=0,jg.geo.stream(a,xh),vh};var vh,wh=new lb,xh={sphere:function(){vh+=4*Mg},point:x,lineStart:x,lineEnd:x,polygonStart:function(){wh.reset(),xh.lineStart=qb},polygonEnd:function(){var a=2*wh;vh+=a<0?4*Mg+a:a,xh.lineStart=xh.lineEnd=xh.point=x}};jg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=rb([b*Qg,c*Qg]);if(r){var e=tb(r,d),f=[e[1],-e[0],0],g=tb(f,e);wb(g),g=xb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Rg*j,q=tg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Rg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Rg;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=tg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;xh.point(a,c),b(a,c)}function f(){xh.lineStart()}function g(){e(p,q),xh.lineEnd(),tg(s)>Kg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,xh.polygonStart()},polygonEnd:function(){xh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,wh<0?(k=-(m=180),l=-(n=90)):s>Kg?n=90:s<-Kg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],jg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-1/0,b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),jg.geo.centroid=function(a){yh=zh=Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=0,jg.geo.stream(a,Jh);var b=Gh,c=Hh,d=Ih,e=b*b+c*c+d*d;return e<Lg&&(b=Dh,c=Eh,d=Fh,zh<Kg&&(b=Ah,c=Bh,d=Ch),(e=b*b+c*c+d*d)<Lg)?[NaN,NaN]:[Math.atan2(c,b)*Rg,da(d/Math.sqrt(e))*Rg]};var yh,zh,Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh={sphere:x,point:zb,lineStart:Bb,lineEnd:Cb,polygonStart:function(){Jh.lineStart=Db},polygonEnd:function(){Jh.lineStart=Bb}},Kh=Jb(Fb,Nb,Pb,[-Mg,-Mg/2]),Lh=1e9;jg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Tb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(jg.geo.conicEqualArea=function(){return Ub(Vb)}).raw=Vb,jg.geo.albers=function(){return jg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},jg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=jg.geo.albers(),g=jg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=jg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Kg,l+.12*j+Kg],[k-.214*j-Kg,l+.234*j-Kg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Kg,l+.166*j+Kg],[k-.115*j-Kg,l+.234*j-Kg]]).stream(i).point,a},a.scale(1070)};var Mh,Nh,Oh,Ph,Qh,Rh,Sh={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Nh=0,Sh.lineStart=Wb},polygonEnd:function(){Sh.lineStart=Sh.lineEnd=Sh.point=x,Mh+=tg(Nh/2)}},Th={point:Xb,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Uh={point:$b,lineStart:_b,lineEnd:ac,polygonStart:function(){Uh.lineStart=bc},polygonEnd:function(){Uh.point=$b,Uh.lineStart=_b,Uh.lineEnd=ac}};jg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),jg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Mh=0,jg.geo.stream(a,e(Sh)),Mh},a.centroid=function(a){return Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=0,jg.geo.stream(a,e(Uh)),Ih?[Gh/Ih,Hh/Ih]:Fh?[Dh/Fh,Eh/Fh]:Ch?[Ah/Ch,Bh/Ch]:[NaN,NaN]},a.bounds=function(a){return Qh=Rh=-(Oh=Ph=1/0),jg.geo.stream(a,e(Th)),[[Oh,Ph],[Qh,Rh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||ec(a):u,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Yb:new cc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(jg.geo.albersUsa()).context(null)},jg.geo.transform=function(a){return{stream:function(b){var c=new fc(b);for(var d in a)c[d]=a[d];return c}}},fc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},jg.geo.projection=hc,jg.geo.projectionMutator=ic,(jg.geo.equirectangular=function(){return hc(kc)}).raw=kc.invert=kc,jg.geo.rotation=function(a){function b(b){return b=a(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b}return a=mc(a[0]%360*Qg,a[1]*Qg,a.length>2?a[2]*Qg:0),b.invert=function(b){return b=a.invert(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b},b},lc.invert=kc,jg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=mc(-a[0]*Qg,-a[1]*Qg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Rg,a[1]*=Rg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=qc((b=+d)*Qg,e*Qg),a):b},a.precision=function(d){return arguments.length?(c=qc(b*Qg,(e=+d)*Qg),a):e},a.angle(90)},jg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Qg,e=a[1]*Qg,f=b[1]*Qg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},jg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return jg.range(Math.ceil(f/q)*q,e,q).map(m).concat(jg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(jg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return tg(a%q)>Kg}).map(k)).concat(jg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return tg(a%r)>Kg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=sc(h,g,90),l=tc(d,c,s),m=sc(j,i,90),n=tc(f,e,s),a):s},a.majorExtent([[-180,-90+Kg],[180,90-Kg]]).minorExtent([[-180,-80-Kg],[180,80+Kg]])},jg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=uc,e=vc;return a.distance=function(){return jg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},jg.geo.interpolate=function(a,b){return wc(a[0]*Qg,a[1]*Qg,b[0]*Qg,b[1]*Qg)},jg.geo.length=function(a){return Vh=0,jg.geo.stream(a,Wh),Vh};var Vh,Wh={sphere:x,point:x,lineStart:xc,lineEnd:x,polygonStart:x,polygonEnd:x},Xh=yc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(jg.geo.azimuthalEqualArea=function(){return hc(Xh)}).raw=Xh;var Yh=yc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},u);(jg.geo.azimuthalEquidistant=function(){return hc(Yh)}).raw=Yh,(jg.geo.conicConformal=function(){return Ub(zc)}).raw=zc,(jg.geo.conicEquidistant=function(){return Ub(Ac)}).raw=Ac;var Zh=yc(function(a){return 1/a},Math.atan);(jg.geo.gnomonic=function(){return hc(Zh)}).raw=Zh,Bc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Pg]},(jg.geo.mercator=function(){return Cc(Bc)}).raw=Bc;var $h=yc(function(){return 1},Math.asin);(jg.geo.orthographic=function(){return hc($h)}).raw=$h;var _h=yc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(jg.geo.stereographic=function(){return hc(_h)}).raw=_h,Dc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Pg]},(jg.geo.transverseMercator=function(){var a=Cc(Dc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Dc,jg.geom={},jg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ca(c),f=Ca(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Hc),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=Gc(h),k=Gc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Ec,d=Fc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},jg.geom.polygon=function(a){return yg(a,ai),a};var ai=jg.geom.polygon.prototype=[];ai.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},ai.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},ai.clip=function(a){for(var b,c,d,e,f,g,h=Kc(a),i=-1,j=this.length-Kc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Ic(g,k,e)?(Ic(f,k,e)||a.push(Jc(f,g,k,e)),a.push(g)):Ic(f,k,e)&&a.push(Jc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var bi,ci,di,ei,fi,gi=[],hi=[];Sc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Uc),b.length},cd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},dd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=hd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(fd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,gd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(gd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,fd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?hd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,fd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,gd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,fd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,gd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,fd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,gd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},jg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return id(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site;(b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[]).point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Kg)*Kg,y:Math.round(g(a,b)/Kg)*Kg,i:b}})}var d=Ec,e=Fc,f=d,g=e,h=ii;return a?b(a):(b.links=function(a){return id(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return id(c(a)).cells.forEach(function(c,d){for(var e,f=c.site,g=c.edges.sort(Uc),h=-1,i=g.length,j=g[i-1].edge,k=j.l===f?j.r:j.l;++h<i;)j,e=k,j=g[h].edge,k=j.l===f?j.r:j.l,d<e.i&&d<k.i&&kd(f,e,k)<0&&b.push([a[d],a[e.i],a[k.i]])}),b},b.x=function(a){return arguments.length?(f=Ca(d=a),b):d},b.y=function(a){return arguments.length?(g=Ca(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ii:a,b):h===ii?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ii?null:h&&h[1]},b)};var ii=[[-1e6,-1e6],[1e6,1e6]];jg.geom.delaunay=function(a){return jg.geom.voronoi().triangles(a)},jg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(tg(i-c)+tg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=nd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ca(h),u=Ca(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=nd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){od(a,z,p,q,r,s)},z.find=function(a){return pd(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Ec,i=Fc;return(g=arguments.length)?(h=ld,i=md,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},jg.interpolateRgb=qd,jg.interpolateObject=rd,jg.interpolateNumber=sd,jg.interpolateString=td;var ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ki=new RegExp(ji.source,"g");jg.interpolate=ud,jg.interpolators=[function(a,b){var c=typeof b;return("string"===c?ch.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?qd:td:b instanceof ia?qd:Array.isArray(b)?vd:"object"===c&&isNaN(b)?rd:sd)(a,b)}],jg.interpolateArray=vd;var li=function(){return u},mi=jg.map({linear:li,poly:Cd,quad:function(){return zd},cubic:function(){return Ad},sin:function(){return Dd},exp:function(){return Ed},circle:function(){return Fd},elastic:Gd,back:Hd,bounce:function(){return Id}}),ni=jg.map({in:u,out:xd,"in-out":yd,"out-in":function(a){return yd(xd(a))}});jg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=mi.get(c)||li,d=ni.get(d)||u,wd(d(c.apply(null,kg.call(arguments,1))))},jg.interpolateHcl=Jd,jg.interpolateHsl=Kd,jg.interpolateLab=Ld,jg.interpolateRound=Md,jg.transform=function(a){var b=mg.createElementNS(jg.ns.prefix.svg,"g");return(jg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Nd(c?c.matrix:oi)})(a)},Nd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};jg.interpolateTransform=Wd,jg.layout={},jg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Zd(a[c]));return b}},jg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=jg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(jg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Ng-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},jg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/r<i){if(i<p){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<p){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=jg.event.x,a.py=jg.event.y,i.resume()}var c,d,e,f,g,h,i={},j=jg.dispatch("start","tick","end"),k=[1,1],l=.9,m=pi,n=qi,o=-30,p=ri,q=.1,r=.64,s=[],t=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,u,v,w=s.length,x=t.length;for(d=0;d<x;++d)i=t[d],m=i.source,n=i.target,u=n.x-m.x,v=n.y-m.y,(p=u*u+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,u*=p,v*=p,n.x-=u*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=u*(r=1-r),m.y+=v*r);if((r=e*q)&&(u=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=s[d],i.x+=(u-i.x)*r,i.y+=(v-i.y)*r;if(o)for(ee(b=jg.geom.quadtree(s),e,h),d=-1;++d<w;)(i=s[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=s[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(s=a,i):s},i.links=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Ha(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;i<e;++i)c[i]=[];for(i=0;i<j;++i){var f=t[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=s.length,j=t.length,l=k[0],p=k[1];for(b=0;b<e;++b)(d=s[b]).index=b,d.weight=0;for(b=0;b<j;++b)d=t[b],"number"==typeof d.source&&(d.source=s[d.source]),"number"==typeof d.target&&(d.target=s[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<e;++b)d=s[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;b<j;++b)f[b]=+m.call(this,t[b],b);else for(b=0;b<j;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<j;++b)g[b]=+n.call(this,t[b],b);else for(b=0;b<j;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;b<e;++b)h[b]=+o.call(this,s[b],b);else for(b=0;b<e;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(d||(d=jg.behavior.drag().origin(u).on("dragstart.force",ae).on("drag.force",b).on("dragend.force",be)),!arguments.length)return d;this.on("mouseover.force",ce).on("mouseout.force",de).call(d)},jg.rebind(i,j,"on")};var pi=20,qi=1,ri=1/0;jg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return he(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=ke,c=ie,d=je;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(ge(b,function(a){a.children&&(a.value=0)}),he(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},jg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=jg.layout.hierarchy(),e=[1,1]
;return c.size=function(a){return arguments.length?(e=a,c):e},fe(c,d)},jg.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=jg.sum(j),p=o?(l-i*n)/o:0,q=jg.range(i),r=[];return null!=c&&q.sort(c===si?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=si,d=0,e=Ng,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var si={};jg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=jg.permute(j,l),k=jg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;o<r;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;n<m;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=u,c=pe,d=qe,e=oe,f=me,g=ne;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ti.get(b)||pe,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:ui.get(b)||qe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var ti=jg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(re),f=a.map(se),g=jg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return jg.range(a.length).reverse()},default:pe}),ui=jg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:qe});jg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)(h=j[f])>=k[0]&&h<=k[1]&&(g=i[jg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=we,e=ue;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ca(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ve(a,b)}:Ca(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},jg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,he(h,function(a){a.r=+k(a.value)}),he(h,Be),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;he(h,function(a){a.r+=l}),he(h,Be),he(h,function(a){a.r-=l})}return Ee(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=jg.layout.hierarchy().sort(xe),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},fe(a,c)},jg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(he(m,c),m.parent.m=-m.z,ge(m,d),j)ge(l,f);else{var n=l,o=l,p=l;ge(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);ge(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ke(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Ie(g),e=He(e),g&&e;)i=He(i),f=Ie(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Je(Le(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Ie(f)&&(f.t=g,f.m+=l-k),e&&!He(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=jg.layout.hierarchy().sort(null).value(null),h=Ge,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},fe(a,g)},jg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;he(i,function(a){var b=a.children;b&&b.length?(a.x=Ne(b),a.y=Me(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Oe(i),l=Pe(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return he(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=jg.layout.hierarchy().sort(null).value(null),c=Ge,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},fe(a,b)},jg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=jg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Qe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Qe(b):Re(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Re(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Qe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},fe(f,h)},jg.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do{c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d}while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=jg.random.normal.apply(jg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=jg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},jg.scale={};var vi={floor:u,ceil:u};jg.scale.linear=function(){return Ye([0,1],[0,1],ud,!1)};var wi={s:1,g:1,p:1,r:1,e:1};jg.scale.log=function(){return ef(jg.scale.linear().domain([0,1]),10,!0,[1,10])};var xi=jg.format(".0e"),yi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};jg.scale.pow=function(){return ff(jg.scale.linear(),1,[0,1])},jg.scale.sqrt=function(){return jg.scale.pow().exponent(.5)},jg.scale.ordinal=function(){return hf([],{t:"range",a:[[]]})},jg.scale.category10=function(){return jg.scale.ordinal().range(zi)},jg.scale.category20=function(){return jg.scale.ordinal().range(Ai)},jg.scale.category20b=function(){return jg.scale.ordinal().range(Bi)},jg.scale.category20c=function(){return jg.scale.ordinal().range(Ci)};var zi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(va),Ai=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(va),Bi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(va),Ci=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(va);jg.scale.quantile=function(){return jf([],[])},jg.scale.quantize=function(){return kf(0,1,[0,1])},jg.scale.threshold=function(){return lf([.5],[0,1])},jg.scale.identity=function(){return mf([0,1])},jg.svg={},jg.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Pg,l=h.apply(this,arguments)-Pg,m=Math.abs(l-k),n=k>l?0:1;if(j<a&&(o=j,j=a,a=o),m>=Og)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Di?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=da(q/j*Math.sin(r))),a&&(A=da(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Mg?0:1;if(B&&tf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Mg?0:1;if(A&&tf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Kg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=a<j^n?0:1;var H=o,I=o;if(m<Mg){var J=null==y?[w,x]:null==u?[s,t]:Jc([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=uf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=uf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^tf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=uf([s,t],[y,z],a,-I,n),T=uf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^tf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=of,d=pf,e=nf,f=Di,g=qf,h=rf,i=sf;return a.innerRadius=function(b){return arguments.length?(c=Ca(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ca(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ca(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Di?Di:Ca(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ca(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ca(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ca(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Pg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Di="auto";jg.svg.line=function(){return vf(u)};var Ei=jg.map({linear:wf,"linear-closed":xf,step:yf,"step-before":zf,"step-after":Af,basis:Gf,"basis-open":Hf,"basis-closed":If,bundle:Jf,cardinal:Df,"cardinal-open":Bf,"cardinal-closed":Cf,monotone:Pf});Ei.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Fi=[0,2/3,1/3,0],Gi=[0,1/3,2/3,0],Hi=[0,1/6,2/3,1/6];jg.svg.line.radial=function(){var a=vf(Qf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},zf.reverse=Af,Af.reverse=zf,jg.svg.area=function(){return Rf(u)},jg.svg.area.radial=function(){var a=Rf(Qf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},jg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Pg,k=j.call(a,e,d)-Pg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Mg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=uc,g=vc,h=Sf,i=qf,j=rf;return a.radius=function(b){return arguments.length?(h=Ca(b),a):h},a.source=function(b){return arguments.length?(f=Ca(b),a):f},a.target=function(b){return arguments.length?(g=Ca(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ca(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ca(b),a):j},a},jg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=uc,c=vc,d=Tf;return a.source=function(c){return arguments.length?(b=Ca(c),a):b},a.target=function(b){return arguments.length?(c=Ca(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},jg.svg.diagonal.radial=function(){var a=jg.svg.diagonal(),b=Tf,c=a.projection;return a.projection=function(a){return arguments.length?c(Uf(b=a)):b},a},jg.svg.symbol=function(){function a(a,d){return(Ii.get(b.call(this,a,d))||Xf)(c.call(this,a,d))}var b=Wf,c=Vf;return a.type=function(c){return arguments.length?(b=Ca(c),a):b},a.size=function(b){return arguments.length?(c=Ca(b),a):c},a};var Ii=jg.map({circle:Xf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Ki)),c=b*Ki;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Ji),c=b*Ji/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Ji),c=b*Ji/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});jg.svg.symbolTypes=Ii.keys();var Ji=Math.sqrt(3),Ki=Math.tan(30*Qg);Cg.transition=function(a){for(var b,c,d=Li||++Pi,e=ag(a),f=[],g=Mi||{time:Date.now(),ease:Bd,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&bg(c,k,e,d,g),b.push(c)}return Zf(f,e,d)},Cg.interrupt=function(a){return this.each(null==a?Ni:Yf(ag(a)))};var Li,Mi,Ni=Yf(ag()),Oi=[],Pi=0;Oi.call=Cg.call,Oi.empty=Cg.empty,Oi.node=Cg.node,Oi.size=Cg.size,jg.transition=function(a,b){return a&&a.transition?Li?a.transition(b):a:jg.selection().transition(a)},jg.transition.prototype=Oi,Oi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=E(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),bg(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Zf(g,f,e)},Oi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=F(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&bg(e,o,h,g,f),b.push(e)}return Zf(i,h,g)},Oi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=R(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Zf(e,this.namespace,this.id)},Oi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):T(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Oi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Wd:ud,h=jg.ns.qualify(a);return $f(this,"attr."+a,b,h.local?f:e)},Oi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=jg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Oi.style=function(a,b,c){function e(){this.style.removeProperty(a)}function f(b){return null==b?e:(b+="",function(){var e,f=d(this).getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=ud(f,b),function(b){this.style.setProperty(a,e(b),c)})})}var g=arguments.length;if(g<3){if("string"!=typeof a){g<2&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return $f(this,"style."+a,b,f)},Oi.styleTween=function(a,b,c){function e(e,f){var g=b.call(this,e,f,d(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,e)},Oi.text=function(a){return $f(this,"text",a,_f)},Oi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Oi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=jg.ease.apply(jg,arguments)),T(this,function(d){d[c][b].ease=a}))},Oi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:T(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Oi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:T(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Oi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Mi,f=Li;try{Li=c,T(this,function(b,e,f){Mi=b[d][c],a.call(b,b.__data__,e,f)})}finally{Mi=e,Li=f}}else T(this,function(e){var f=e[d][c];(f.event||(f.event=jg.dispatch("start","end","interrupt"))).on(a,b)});return this},Oi.transition=function(){for(var a,b,c,d,e=this.id,f=++Pi,g=this.namespace,h=[],i=0,j=this.length;i<j;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;k<l;k++)(c=b[k])&&(d=c[g][e],bg(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Zf(h,g,f)},jg.svg.axis=function(){function a(a){a.each(function(){var a,j=jg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):u:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Kg),q=jg.transition(o.exit()).style("opacity",Kg).remove(),r=jg.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Te(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),jg.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=cg,x="x",z="y",y="x2",A="y2",D.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+t[0]+","+G*f+"V0H"+t[1]+"V"+G*f)):(a=dg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),w.attr("d","M"+G*f+","+t[0]+"H0V"+t[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*s),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*s),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=jg.scale.linear(),d=Qi,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ri?b+"":Qi,a):d},a.ticks=function(){return arguments.length?(h=lg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Qi="bottom",Ri={top:1,right:1,bottom:1,left:1};jg.svg.brush=function(){function a(d){d.each(function(){var d=jg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=d.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),d.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=d.selectAll(".resize").data(p,u);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Si[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=jg.transition(d),m=jg.transition(g);j&&(i=Te(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),c(l)),k&&(i=Te(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==jg.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),A())}function p(){32==jg.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,A())}function q(){var a=jg.mouse(v),d=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(jg.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(c(y),d=!0),C&&r(a,k,1)&&(e(y),d=!0),d&&(b(y),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Te(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];if(D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),k<d?(e=d,d=k):e=k),p[0]!=d||p[1]!=e)return c?h=null:g=null,p[0]=d,p[1]=e,!0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),jg.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=jg.select(jg.event.target),x=i.of(v,arguments),y=jg.select(v),z=w.datum(),B=!/^(n|s)$/.test(z)&&j,C=!/^(e|w)$/.test(z)&&k,D=w.classed("extent"),E=Z(v),F=jg.mouse(v),G=jg.select(d(v)).on("keydown.brush",f).on("keyup.brush",p);if(jg.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),y.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(z){var H=+/w$/.test(z),I=+/^n/.test(z);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else jg.event.altKey&&(t=F.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),jg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=C(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Ti[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Li?jg.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=vd(l,b.x),d=vd(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Ti[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Ti[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),d<c&&(i=c,c=d,d=i),c==l[0]&&d==l[1]||(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(i=e,e=f,f=i),e==m[0]&&f==m[1]||(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),d<c&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},jg.rebind(a,i,"on")};var Si={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ti=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ui=lh.format=rh.timeFormat,Vi=Ui.utc,Wi=Vi("%Y-%m-%dT%H:%M:%S.%LZ");Ui.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eg:Wi,eg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},eg.toString=Wi.toString,lh.second=Qa(function(a){return new mh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),lh.seconds=lh.second.range,lh.seconds.utc=lh.second.utc.range,lh.minute=Qa(function(a){return new mh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),lh.minutes=lh.minute.range,lh.minutes.utc=lh.minute.utc.range,lh.hour=Qa(function(a){var b=a.getTimezoneOffset()/60;return new mh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),lh.hours=lh.hour.range,lh.hours.utc=lh.hour.utc.range,lh.month=Qa(function(a){return a=lh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),lh.months=lh.month.range,lh.months.utc=lh.month.utc.range;var Xi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yi=[[lh.second,1],[lh.second,5],[lh.second,15],[lh.second,30],[lh.minute,1],[lh.minute,5],[lh.minute,15],[lh.minute,30],[lh.hour,1],[lh.hour,3],[lh.hour,6],[lh.hour,12],[lh.day,1],[lh.day,2],[lh.week,1],[lh.month,1],[lh.month,3],[lh.year,1]],Zi=Ui.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Fb]]),$i={range:function(a,b,c){return jg.range(Math.ceil(a/c)*c,+b,c).map(gg)},floor:u,ceil:u};Yi.year=lh.year,lh.scale=function(){return fg(jg.scale.linear(),Yi,Zi)};var _i=Yi.map(function(a){return[a[0].utc,a[1]]}),aj=Vi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Fb]]);_i.year=lh.year.utc,lh.scale.utc=function(){return fg(jg.scale.linear(),_i,aj)},jg.text=Da(function(a){return a.responseText}),jg.json=function(a,b){return Ea(a,"application/json",hg,b)},jg.html=function(a,b){return Ea(a,"text/html",ig,b)},jg.xml=Da(function(a){return a.responseXML}),"function"==typeof a&&a.amd?(this.d3=jg,a(jg)):"object"==typeof c&&c.exports?c.exports=jg:this.d3=jg}()},{}],129:[function(a,b,c){b.exports=function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}},{}],130:[function(a,b,c){"use strict";function d(a,b){this.point=a,this.index=b}function e(a,b){for(var c=a.point,d=b.point,e=c.length,f=0;f<e;++f){var g=d[f]-c[f];if(g)return g}return 0}function f(a,b,c){if(1===a)return c?[[-1,0]]:[];var d=b.map(function(a,b){return[a[0],b]});d.sort(function(a,b){return a[0]-b[0]});for(var e=new Array(a-1),f=1;f<a;++f){var g=d[f-1],h=d[f];e[f-1]=[g[1],h[1]]}return c&&e.push([-1,e[0][1]],[e[a-1][1],-1]),e}function g(a,b){var c=a.length;if(0===c)return[];var g=a[0].length;if(g<1)return[];if(1===g)return f(c,a,b);for(var j=new Array(c),k=1,l=0;l<c;++l){for(var m=a[l],n=new Array(g+1),o=0,p=0;p<g;++p){var q=m[p];n[p]=q,o+=q*q}n[g]=o,j[l]=new d(n,l),k=Math.max(o,k)}i(j,e),c=j.length;for(var r=new Array(c+g+1),s=new Array(c+g+1),t=(g+1)*(g+1)*k,u=new Array(g+1),l=0;l<=g;++l)u[l]=0;u[g]=t,r[0]=u.slice(),s[0]=-1;for(var l=0;l<=g;++l){var n=u.slice();n[l]=1,r[l+1]=n,s[l+1]=-1}for(var l=0;l<c;++l){var v=j[l];r[l+g+1]=v.point,s[l+g+1]=v.index}var w=h(r,!1)
;if(w=b?w.filter(function(a){for(var b=0,c=0;c<=g;++c){var d=s[a[c]];if(d<0&&++b>=2)return!1;a[c]=d}return!0}):w.filter(function(a){for(var b=0;b<=g;++b){var c=s[a[b]];if(c<0)return!1;a[b]=c}return!0}),1&g)for(var l=0;l<w.length;++l){var v=w[l],n=v[0];v[0]=v[1],v[1]=n}return w}var h=a("incremental-convex-hull"),i=a("uniq");b.exports=g},{"incremental-convex-hull":278,uniq:556}],131:[function(a,b,c){(function(a){function c(a,b){return n[0]=a,n[1]=b,m[0]}function d(a){return m[0]=a,n[0]}function e(a){return m[0]=a,n[1]}function f(a,b){return n[1]=a,n[0]=b,m[0]}function g(a){return m[0]=a,n[1]}function h(a){return m[0]=a,n[0]}function i(a,b){return o.writeUInt32LE(a,0,!0),o.writeUInt32LE(b,4,!0),o.readDoubleLE(0,!0)}function j(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(0,!0)}function k(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(4,!0)}var l=!1;if("undefined"!=typeof Float64Array){var m=new Float64Array(1),n=new Uint32Array(m.buffer);m[0]=1,l=!0,1072693248===n[1]?(b.exports=function(a){return m[0]=a,[n[0],n[1]]},b.exports.pack=c,b.exports.lo=d,b.exports.hi=e):1072693248===n[0]?(b.exports=function(a){return m[0]=a,[n[1],n[0]]},b.exports.pack=f,b.exports.lo=g,b.exports.hi=h):l=!1}if(!l){var o=new a(8);b.exports=function(a){return o.writeDoubleLE(a,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},b.exports.pack=i,b.exports.lo=j,b.exports.hi=k}b.exports.sign=function(a){return b.exports.hi(a)>>>31},b.exports.exponent=function(a){return(b.exports.hi(a)<<1>>>21)-1023},b.exports.fraction=function(a){var c=b.exports.lo(a),d=b.exports.hi(a),e=1048575&d;return 2146435072&d&&(e+=1<<20),[c,e]},b.exports.denormalized=function(a){return!(2146435072&b.exports.hi(a))}}).call(this,a("buffer").Buffer)},{buffer:82}],132:[function(a,b,c){var d=a("abs-svg-path"),e=a("normalize-svg-path"),f={M:"moveTo",C:"bezierCurveTo"};b.exports=function(a,b){a.beginPath(),e(d(b)).forEach(function(b){var c=b[0],d=b.slice(1);a[f[c]].apply(a,d)}),a.closePath()}},{"abs-svg-path":43,"normalize-svg-path":460}],133:[function(a,b,c){b.exports=function(a){switch(a){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],134:[function(a,b,c){"use strict";function d(a,b,c){var e=0|a[c];if(e<=0)return[];var f,g=new Array(e);if(c===a.length-1)for(f=0;f<e;++f)g[f]=b;else for(f=0;f<e;++f)g[f]=d(a,b,c+1);return g}function e(a,b){var c,d;for(c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function f(a,b){switch(void 0===b&&(b=0),typeof a){case"number":if(a>0)return e(0|a,b);break;case"object":if("number"==typeof a.length)return d(a,b,0)}return[]}b.exports=f},{}],135:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do{if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),(d=b=d.prev)===d.next)return null;c=!0}}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if((a=o)===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;g<h;g++)i=b[g]*d,j=g<h-1?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-1/0;do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(h<=e&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&t(f<l?e:g,f,k,l,f<l?g:e,f,d.x,d.y)&&((i=Math.abs(f-d.y)/(e-d.x))<m||i===m&&d.x>c.x)&&z(d,a)&&(c=d,m=i),d=d.next;return c}function p(a,b,c,d){var e=a;do{null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next}while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do{b.x<c.x&&(c=b),b=b.next}while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do{c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next}while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],136:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if("number"!=typeof b){b=0;for(var d=0;d<c;++d){var f=a[d];b=Math.max(b,f[0],f[1])}b=1+(0|b)}b|=0;for(var g=new Array(b),d=0;d<b;++d)g[d]=[];for(var d=0;d<c;++d){var f=a[d];g[f[0]].push(f[1]),g[f[1]].push(f[0])}for(var h=0;h<b;++h)e(g[h],function(a,b){return a-b});return g}b.exports=d;var e=a("uniq")},{uniq:556}],137:[function(b,c,d){(function(e,f){!function(b,e){"object"==typeof d&&void 0!==c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ES6Promise=e()}(this,function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){T=a}function g(a){U=a}function h(){return function(){S(j)}}function i(){var a=setTimeout;return function(){return a(j,1)}}function j(){for(var a=0;a<R;a+=2){(0,$[a])($[a+1]),$[a]=void 0,$[a+1]=void 0}R=0}function k(a,b){var c=arguments,d=this,e=new this.constructor(m);void 0===e[aa]&&F(e);var f=d._state;return f?function(){var a=c[f-1];U(function(){return C(f,e,a,d._result)})}():y(d,e,a,b),e}function l(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(m);return u(c,a),c}function m(){}function n(){return new TypeError("You cannot resolve a promise with itself")}function o(){return new TypeError("A promises callback cannot return that same promise.")}function p(a){try{return a.then}catch(a){return ea.error=a,ea}}function q(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function r(a,b,c){U(function(a){var d=!1,e=q(c,b,function(c){d||(d=!0,b!==c?u(a,c):w(a,c))},function(b){d||(d=!0,x(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,x(a,e))},a)}function s(a,b){b._state===ca?w(a,b._result):b._state===da?x(a,b._result):y(b,void 0,function(b){return u(a,b)},function(b){return x(a,b)})}function t(a,b,d){b.constructor===a.constructor&&d===k&&b.constructor.resolve===l?s(a,b):d===ea?x(a,ea.error):void 0===d?w(a,b):c(d)?r(a,b,d):w(a,b)}function u(b,c){b===c?x(b,n()):a(c)?t(b,c,p(c)):w(b,c)}function v(a){a._onerror&&a._onerror(a._result),z(a)}function w(a,b){a._state===ba&&(a._result=b,a._state=ca,0!==a._subscribers.length&&U(z,a))}function x(a,b){a._state===ba&&(a._state=da,a._result=b,U(v,a))}function y(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ca]=c,e[f+da]=d,0===f&&a._state&&U(z,a)}function z(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a._subscribers.length=0}}function A(){this.error=null}function B(a,b){try{return a(b)}catch(a){return fa.error=a,fa}}function C(a,b,d,e){var f=c(d),g=void 0,h=void 0,i=void 0,j=void 0;if(f){if(g=B(d,e),g===fa?(j=!0,h=g.error,g=null):i=!0,b===g)return void x(b,o())}else g=e,i=!0;b._state!==ba||(f&&i?u(b,g):j?x(b,h):a===ca?w(b,g):a===da&&x(b,g))}function D(a,b){try{b(function(b){u(a,b)},function(b){x(a,b)})}catch(b){x(a,b)}}function E(){return ga++}function F(a){a[aa]=ga++,a._state=void 0,a._result=void 0,a._subscribers=[]}function G(a,b){this._instanceConstructor=a,this.promise=new a(m),this.promise[aa]||F(this.promise),Q(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,H())}function H(){return new Error("Array Methods must be provided an Array")}function I(a){return new G(this,a).promise}function J(a){var b=this;return new b(Q(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})}function K(a){var b=this,c=new b(m);return x(c,a),c}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(a){this[aa]=E(),this._result=this._state=void 0,this._subscribers=[],m!==a&&("function"!=typeof a&&L(),this instanceof N?D(this,a):M())}function O(){var a=void 0;if(void 0!==f)a=f;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===c&&!b.cast)return}a.Promise=N}var P=void 0;P=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var Q=P,R=0,S=void 0,T=void 0,U=function(a,b){$[R]=a,$[R+1]=b,2===(R+=2)&&(T?T(j):_())},V="undefined"!=typeof window?window:void 0,W=V||{},X=W.MutationObserver||W.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),_=void 0;_=Y?function(){return function(){return e.nextTick(j)}}():X?function(){var a=0,b=new X(j),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}():Z?function(){var a=new MessageChannel;return a.port1.onmessage=j,function(){return a.port2.postMessage(0)}}():void 0===V&&"function"==typeof b?function(){try{var a=b,c=a("vertx");return S=c.runOnLoop||c.runOnContext,h()}catch(a){return i()}}():i();var aa=Math.random().toString(36).substring(16),ba=void 0,ca=1,da=2,ea=new A,fa=new A,ga=0;return G.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===ba&&c<a;c++)this._eachEntry(b[c],c)},G.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===l){var e=p(a);if(e===k&&a._state!==ba)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===N){var f=new c(m);t(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},G.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ba&&(this._remaining--,a===da?x(d,c):this._result[b]=c),0===this._remaining&&w(d,this._result)},G.prototype._willSettleAt=function(a,b){var c=this;y(a,void 0,function(a){return c._settledAt(ca,b,a)},function(a){return c._settledAt(da,b,a)})},N.all=I,N.race=J,N.resolve=l,N.reject=K,N._setScheduler=d,N._setAsap=g,N._asap=U,N.prototype={constructor:N,then:k,catch:function(a){return this.then(null,a)}},O(),N.polyfill=O,N.Promise=N,N})}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:488}],138:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners)&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace()),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){return this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],139:[function(a,b,c){"use strict";function d(a,b,c){var d=b||0,e=c||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[d*a[12]+a[8],d*a[13]+a[9],d*a[14]+a[10],d*a[15]+a[11]],[e*a[12]-a[8],e*a[13]-a[9],e*a[14]-a[10],e*a[15]-a[11]]]}b.exports=d},{}],140:[function(a,b,c){"use strict";function d(a){for(var b,c=a.length,d=0;d<c;d++)if(((b=a.charCodeAt(d))<9||b>13)&&32!==b&&133!==b&&160!==b&&5760!==b&&6158!==b&&(b<8192||b>8205)&&8232!==b&&8233!==b&&8239!==b&&8287!==b&&8288!==b&&12288!==b&&65279!==b)return!1;return!0}b.exports=function(a){var b=typeof a;if("string"===b){var c=a;if(0===(a=+a)&&d(c))return!1}else if("number"!==b)return!1;return a-a<1}},{}],141:[function(a,b,c){"use strict";function d(a){return new Function("f","var p = (f && f.properties || {}); return "+e(a))}function e(a){if(!a)return"true";var b=a[0];return a.length<=1?"any"===b?"false":"true":"("+("=="===b?g(a[1],a[2],"===",!1):"!="===b?g(a[1],a[2],"!==",!1):"<"===b||">"===b||"<="===b||">="===b?g(a[1],a[2],b,!0):"any"===b?h(a.slice(1),"||"):"all"===b?h(a.slice(1),"&&"):"none"===b?k(h(a.slice(1),"||")):"in"===b?i(a[1],a.slice(2)):"!in"===b?k(i(a[1],a.slice(2))):"has"===b?j(a[1]):"!has"===b?k(j([a[1]])):"true")+")"}function f(a){return"$type"===a?"f.type":"$id"===a?"f.id":"p["+JSON.stringify(a)+"]"}function g(a,b,c,d){var e=f(a),g="$type"===a?m.indexOf(b):JSON.stringify(b);return(d?"typeof "+e+"=== typeof "+g+"&&":"")+e+c+g}function h(a,b){return a.map(e).join(b)}function i(a,b){"$type"===a&&(b=b.map(function(a){return m.indexOf(a)}));var c=JSON.stringify(b.sort(l)),d=f(a);return b.length<=200?c+".indexOf("+d+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+d+", "+c+",0,"+(b.length-1)+")"}function j(a){return JSON.stringify(a)+" in p"}function k(a){return"!("+a+")"}function l(a,b){return a<b?-1:a>b?1:0}b.exports=d;var m=["Unknown","Point","LineString","Polygon"]},{}],142:[function(a,b,c){"use strict";function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a,b,c){this.dimension=a.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=a.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[c],this._scratch=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice()]}function f(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=0;return b}function g(a,b,c){switch(arguments.length){case 0:return new e([0],[0],0);case 1:if("number"==typeof a){var d=f(a);return new e(d,d,0)}return new e(a,f(a.length),0);case 2:if("number"==typeof b){var d=f(a.length);return new e(a,d,+b)}c=0;case 3:if(a.length!==b.length)throw new Error("state and velocity lengths must match");return new e(a,b,c)}}b.exports=g;var h=a("cubic-hermite"),i=a("binary-search-bounds"),j=e.prototype;j.flush=function(a){var b=i.gt(this._time,a)-1;b<=0||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},j.curve=function(a){var b=this._time,c=b.length,e=i.le(b,a),f=this._scratch[0],g=this._state,j=this._velocity,k=this.dimension,l=this.bounds;if(e<0)for(var m=k-1,n=0;n<k;++n,--m)f[n]=g[m];else if(e>=c-1)for(var m=g.length-1,o=a-b[c-1],n=0;n<k;++n,--m)f[n]=g[m]+o*j[m];else{for(var m=k*(e+1)-1,p=b[e],q=b[e+1],r=q-p||1,s=this._scratch[1],t=this._scratch[2],u=this._scratch[3],v=this._scratch[4],w=!0,n=0;n<k;++n,--m)s[n]=g[m],u[n]=j[m]*r,t[n]=g[m+k],v[n]=j[m+k]*r,w=w&&s[n]===t[n]&&u[n]===v[n]&&0===u[n];if(w)for(var n=0;n<k;++n)f[n]=s[n];else h(s,u,t,v,(a-p)/r,f)}for(var x=l[0],y=l[1],n=0;n<k;++n)f[n]=d(x[n],y[n],f[n]);return f},j.dcurve=function(a){var b=this._time,c=b.length,d=i.le(b,a),e=this._scratch[0],f=this._state,g=this._velocity,j=this.dimension;if(d>=c-1)for(var k=f.length-1,l=(b[c-1],0);l<j;++l,--k)e[l]=g[k];else{for(var k=j*(d+1)-1,m=b[d],n=b[d+1],o=n-m||1,p=this._scratch[1],q=this._scratch[2],r=this._scratch[3],s=this._scratch[4],t=!0,l=0;l<j;++l,--k)p[l]=f[k],r[l]=g[k]*o,q[l]=f[k+j],s[l]=g[k+j]*o,t=t&&p[l]===q[l]&&r[l]===s[l]&&0===r[l];if(t)for(var l=0;l<j;++l)e[l]=0;else{h.derivative(p,r,q,s,(a-m)/o,e);for(var l=0;l<j;++l)e[l]/=o}}return e},j.lastT=function(){var a=this._time;return a[a.length-1]},j.stable=function(){for(var a=this._velocity,b=a.length,c=this.dimension-1;c>=0;--c)if(a[--b])return!1;return!0},j.jump=function(a){var b=this.lastT(),c=this.dimension;if(!(a<b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1];this._time.push(b,a);for(var k=0;k<2;++k)for(var l=0;l<c;++l)e.push(e[g++]),f.push(0);this._time.push(a);for(var l=c;l>0;--l)e.push(d(i[l-1],j[l-1],arguments[l])),f.push(0)}},j.push=function(a){var b=this.lastT(),c=this.dimension;if(!(a<b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=a-b,i=this.bounds,j=i[0],k=i[1],l=h>1e-6?1/h:0;this._time.push(a);for(var m=c;m>0;--m){var n=d(j[m-1],k[m-1],arguments[m]);e.push(n),f.push((n-e[g++])*l)}}},j.set=function(a){var b=this.dimension;if(!(a<this.lastT()||arguments.length!==b+1)){var c=this._state,e=this._velocity,f=this.bounds,g=f[0],h=f[1];this._time.push(a);for(var i=b;i>0;--i)c.push(d(g[i-1],h[i-1],arguments[i])),e.push(0)}},j.move=function(a){var b=this.lastT(),c=this.dimension;if(!(a<=b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1],k=a-b,l=k>1e-6?1/k:0;this._time.push(a);for(var m=c;m>0;--m){var n=arguments[m];e.push(d(i[m-1],j[m-1],e[g++]+n)),f.push(n*l)}}},j.idle=function(a){var b=this.lastT();if(!(a<b)){var c=this.dimension,e=this._state,f=this._velocity,g=e.length-c,h=this.bounds,i=h[0],j=h[1],k=a-b;this._time.push(a);for(var l=c-1;l>=0;--l)e.push(d(i[l],j[l],e[g]+k*f[g])),f.push(0),g+=1}}},{"binary-search-bounds":70,"cubic-hermite":115}],143:[function(a,b,c){function d(a,b,c){if(!a)throw new TypeError("must specify data as first parameter");if(c=0|+(c||0),Array.isArray(a)&&Array.isArray(a[0])){var d=a[0].length,f=a.length*d;b&&"string"!=typeof b||(b=new(e(b||"float32"))(f+c));var g=b.length-c;if(f!==g)throw new Error("source length "+f+" ("+d+"x"+a.length+") does not match destination length "+g);for(var h=0,i=c;h<a.length;h++)for(var j=0;j<d;j++)b[i++]=a[h][j]}else if(b&&"string"!=typeof b)b.set(a,c);else{var k=e(b||"float32");0===c?b=new k(a):(b=new k(a.length+c),b.set(a,c))}return b}var e=a("dtype");b.exports=d},{dtype:133}],144:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._color=a,this.key=b,this.value=c,this.left=d,this.right=e,this._count=f}function e(a){return new d(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,b){return new d(a,b.key,b.value,b.left,b.right,b._count)}function g(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function h(a,b){this._compare=a,this.root=b}function i(a,b){if(b.left){var c=i(a,b.left);if(c)return c}var c=a(b.key,b.value);return c||(b.right?i(a,b.right):void 0)}function j(a,b,c,d){if(b(a,d.key)<=0){if(d.left){var e=j(a,b,c,d.left);if(e)return e}var e=c(d.key,d.value);if(e)return e}if(d.right)return j(a,b,c,d.right)}function k(a,b,c,d,e){var f,g=c(a,e.key),h=c(b,e.key);if(g<=0){if(e.left&&(f=k(a,b,c,d,e.left)))return f;if(h>0&&(f=d(e.key,e.value)))return f}if(h>0&&e.right)return k(a,b,c,d,e.right)}function l(a,b){this.tree=a,this._stack=b}function m(a,b){a.key=b.key,a.value=b.value,a.left=b.left,a.right=b.right,a._color=b._color,a._count=b._count}function n(a){for(var b,c,d,h,i=a.length-1;i>=0;--i){if(b=a[i],0===i)return void(b._color=r);if(c=a[i-1],c.left===b){if(d=c.right,d.right&&d.right._color===q){if(d=c.right=e(d),h=d.right=e(d.right),c.right=d.left,d.left=c,d.right=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}return void(a[i-1]=d)}if(d.left&&d.left._color===q){if(d=c.right=e(d),h=d.left=e(d.left),c.right=h.left,d.left=h.right,h.left=c,h.right=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.left===c?j.left=h:j.right=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.right=f(q,d));c.right=f(q,d);continue}if(d=e(d),c.right=d.left,d.left=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}else{if(d=c.left,d.left&&d.left._color===q){if(d=c.left=e(d),h=d.left=e(d.left),c.left=d.right,d.right=c,d.left=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}return void(a[i-1]=d)}if(d.right&&d.right._color===q){if(d=c.left=e(d),h=d.right=e(d.right),c.left=h.right,d.right=h.left,h.right=c,h.left=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.right===c?j.right=h:j.left=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.left=f(q,d));c.left=f(q,d);continue}if(d=e(d),c.left=d.right,d.right=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}}}function o(a,b){return a<b?-1:a>b?1:0}function p(a){return new h(a||o,null)}b.exports=p;var q=0,r=1,s=h.prototype;Object.defineProperty(s,"keys",{get:function(){var a=[];return this.forEach(function(b,c){a.push(b)}),a}}),Object.defineProperty(s,"values",{get:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(a,b){for(var c=this._compare,e=this.root,i=[],j=[];e;){var k=c(a,e.key);i.push(e),j.push(k),e=k<=0?e.left:e.right}i.push(new d(q,a,b,null,null,1));for(var l=i.length-2;l>=0;--l){var e=i[l];j[l]<=0?i[l]=new d(e._color,e.key,e.value,i[l+1],e.right,e._count+1):i[l]=new d(e._color,e.key,e.value,e.left,i[l+1],e._count+1)}for(var l=i.length-1;l>1;--l){var m=i[l-1],e=i[l];if(m._color===r||e._color===r)break;var n=i[l-2];if(n.left===m)if(m.left===e){var o=n.right;if(!o||o._color!==q){if(n._color=q,n.left=m.right,m._color=r,m.right=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.left===n?p.left=m:p.right=m}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else{var o=n.right;if(!o||o._color!==q){if(m.right=e.left,n._color=q,n.left=e.right,e._color=r,e.left=m,e.right=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.left===n?p.left=e:p.right=e}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else if(m.right===e){var o=n.left;if(!o||o._color!==q){if(n._color=q,n.right=m.left,m._color=r,m.left=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.right===n?p.right=m:p.left=m}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}else{var o=n.left;if(!o||o._color!==q){if(m.left=e.right,n._color=q,n.right=e.left,e._color=r,e.right=m,e.left=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.right===n?p.right=e:p.left=e}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}}return i[0]._color=r,new h(c,i[0])},s.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return i(a,this.root);case 2:return j(b,this._compare,a,this.root);case 3:if(this._compare(b,c)>=0)return;return k(b,c,this._compare,a,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new l(this,a)}}),Object.defineProperty(s,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new l(this,a)}}),s.at=function(a){if(a<0)return new l(this,[]);for(var b=this.root,c=[];;){if(c.push(b),b.left){if(a<b.left._count){b=b.left;continue}a-=b.left._count}if(!a)return new l(this,c);if(a-=1,!b.right)break;if(a>=b.right._count)break;b=b.right}return new l(this,[])},s.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<=0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.lt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>=0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);if(d.push(c),0===e)return new l(this,d);c=e<=0?c.left:c.right}return new l(this,[])},s.remove=function(a){var b=this.find(a);return b?b.remove():this},s.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,c.key);if(0===d)return c.value;c=d<=0?c.left:c.right}};var t=l.prototype;Object.defineProperty(t,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(t,"node",{get:function(){
return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),t.clone=function(){return new l(this.tree,this._stack.slice())},t.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=new Array(a.length),c=a[a.length-1];b[b.length-1]=new d(c._color,c.key,c.value,c.left,c.right,c._count);for(var e=a.length-2;e>=0;--e){var c=a[e];c.left===a[e+1]?b[e]=new d(c._color,c.key,c.value,b[e+1],c.right,c._count):b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count)}if(c=b[b.length-1],c.left&&c.right){var f=b.length;for(c=c.left;c.right;)b.push(c),c=c.right;var g=b[f-1];b.push(new d(c._color,g.key,g.value,c.left,c.right,c._count)),b[f-1].key=c.key,b[f-1].value=c.value;for(var e=b.length-2;e>=f;--e)c=b[e],b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count);b[f-1].left=b[f]}if(c=b[b.length-1],c._color===q){var i=b[b.length-2];i.left===c?i.left=null:i.right===c&&(i.right=null),b.pop();for(var e=0;e<b.length;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(c.left||c.right){c.left?m(c,c.left):c.right&&m(c,c.right),c._color=r;for(var e=0;e<b.length-1;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(1===b.length)return new h(this.tree._compare,null);for(var e=0;e<b.length;++e)b[e]._count--;var j=b[b.length-2];return n(b),j.left===c?j.left=null:j.right=null,new h(this.tree._compare,b[0])},Object.defineProperty(t,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(t,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(t,"index",{get:function(){var a=0,b=this._stack;if(0===b.length){var c=this.tree.root;return c?c._count:0}b[b.length-1].left&&(a=b[b.length-1].left._count);for(var d=b.length-2;d>=0;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));return a},enumerable:!0}),t.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();a.length>0&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].left===a[b])return!0;return!1}}),t.update=function(a){var b=this._stack;if(0===b.length)throw new Error("Can't update empty node!");var c=new Array(b.length),e=b[b.length-1];c[c.length-1]=new d(e._color,e.key,a,e.left,e.right,e._count);for(var f=b.length-2;f>=0;--f)e=b[f],e.left===b[f+1]?c[f]=new d(e._color,e.key,e.value,c[f+1],e.right,e._count):c[f]=new d(e._color,e.key,e.value,e.left,c[f+1],e._count);return new h(this.tree._compare,c[0])},t.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();a.length>0&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],145:[function(a,b,c){function d(a){if(a<0)return Number("0/0");for(var b=g[0],c=g.length-1;c>0;--c)b+=g[c]/(a+c);var d=a+f+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(d)-d+Math.log(b)-Math.log(a)}var e=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],f=607/128,g=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];b.exports=function a(b){if(b<.5)return Math.PI/(Math.sin(Math.PI*b)*a(1-b));if(b>100)return Math.exp(d(b));b-=1;for(var c=e[0],f=1;f<9;f++)c+=e[f]/(b+f);var g=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,b+.5)*Math.exp(-g)*c},b.exports.log=d},{}],146:[function(a,b,c){function d(a){if("Polygon"===a.type)return e(a.coordinates);if("MultiPolygon"===a.type){for(var b=0,c=0;c<a.coordinates.length;c++)b+=e(a.coordinates[c]);return b}return null}function e(a){var b=0;if(a&&a.length>0){b+=Math.abs(f(a[0]));for(var c=1;c<a.length;c++)b-=Math.abs(f(a[c]))}return b}function f(a){var b=0;if(a.length>2){for(var c,d,e=0;e<a.length-1;e++)c=a[e],d=a[e+1],b+=g(d[0]-c[0])*(2+Math.sin(g(c[1]))+Math.sin(g(d[1])));b=b*h.RADIUS*h.RADIUS/2}return b}function g(a){return a*Math.PI/180}var h=a("wgs84");b.exports.geometry=d,b.exports.ring=f},{wgs84:579}],147:[function(a,b,c){function d(a,b){switch(a&&a.type||null){case"FeatureCollection":return a.features=a.features.map(e(d,b)),a;case"Feature":return a.geometry=d(a.geometry,b),a;case"Polygon":case"MultiPolygon":return f(a,b);default:return a}}function e(a,b){return function(c){return a(c,b)}}function f(a,b){return"Polygon"===a.type?a.coordinates=g(a.coordinates,b):"MultiPolygon"===a.type&&(a.coordinates=a.coordinates.map(e(g,b))),a}function g(a,b){b=!!b,a[0]=h(a[0],!b);for(var c=1;c<a.length;c++)a[c]=h(a[c],b);return a}function h(a,b){return i(a)===b?a:a.reverse()}function i(a){return j.ring(a)>=0}var j=a("geojson-area");b.exports=d},{"geojson-area":146}],148:[function(a,b,c){"use strict";function d(a,b,c,d,g,i,j,k){if(c/=b,d/=b,j>=c&&k<=d)return a;if(j>d||k<c)return null;for(var l=[],m=0;m<a.length;m++){var n,o,p=a[m],q=p.geometry,r=p.type;if(n=p.min[g],o=p.max[g],n>=c&&o<=d)l.push(p);else if(!(n>d||o<c)){var s=1===r?e(q,c,d,g):f(q,c,d,g,i,3===r);s.length&&l.push(h(p.tags,r,s,p.id))}}return l.length?l:null}function e(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=g[d];h>=b&&h<=c&&e.push(g)}return e}function f(a,b,c,d,e,f){for(var h=[],i=0;i<a.length;i++){var j,k,l,m=0,n=0,o=null,p=a[i],q=p.area,r=p.dist,s=p.outer,t=p.length,u=[];for(k=0;k<t-1;k++)j=o||p[k],o=p[k+1],m=n||j[d],n=o[d],m<b?n>c?(u.push(e(j,o,b),e(j,o,c)),f||(u=g(h,u,q,r,s))):n>=b&&u.push(e(j,o,b)):m>c?n<b?(u.push(e(j,o,c),e(j,o,b)),f||(u=g(h,u,q,r,s))):n<=c&&u.push(e(j,o,c)):(u.push(j),n<b?(u.push(e(j,o,b)),f||(u=g(h,u,q,r,s))):n>c&&(u.push(e(j,o,c)),f||(u=g(h,u,q,r,s))));j=p[t-1],m=j[d],m>=b&&m<=c&&u.push(j),l=u[u.length-1],f&&l&&(u[0][0]!==l[0]||u[0][1]!==l[1])&&u.push(u[0]),g(h,u,q,r,s)}return h}function g(a,b,c,d,e){return b.length&&(b.area=c,b.dist=d,void 0!==e&&(b.outer=e),a.push(b)),[]}b.exports=d;var h=a("./feature")},{"./feature":150}],149:[function(a,b,c){"use strict";function d(a,b){var c=[];if("FeatureCollection"===a.type)for(var d=0;d<a.features.length;d++)e(c,a.features[d],b);else"Feature"===a.type?e(c,a,b):e(c,{geometry:a},b);return c}function e(a,b,c){if(null!==b.geometry){var d,h,i,k,l=b.geometry,m=l.type,n=l.coordinates,o=b.properties,p=b.id;if("Point"===m)a.push(j(o,1,[g(n)],p));else if("MultiPoint"===m)a.push(j(o,1,f(n),p));else if("LineString"===m)a.push(j(o,2,[f(n,c)],p));else if("MultiLineString"===m||"Polygon"===m){for(i=[],d=0;d<n.length;d++)k=f(n[d],c),"Polygon"===m&&(k.outer=0===d),i.push(k);a.push(j(o,"Polygon"===m?3:2,i,p))}else if("MultiPolygon"===m){for(i=[],d=0;d<n.length;d++)for(h=0;h<n[d].length;h++)k=f(n[d][h],c),k.outer=0===h,i.push(k);a.push(j(o,3,i,p))}else{if("GeometryCollection"!==m)throw new Error("Input data is not a valid GeoJSON object.");for(d=0;d<l.geometries.length;d++)e(a,{geometry:l.geometries[d],properties:o},c)}}}function f(a,b){for(var c=[],d=0;d<a.length;d++)c.push(g(a[d]));return b&&(i(c,b),h(c)),c}function g(a){var b=Math.sin(a[1]*Math.PI/180),c=a[0]/360+.5,d=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return d=d<0?0:d>1?1:d,[c,d,0]}function h(a){for(var b,c,d=0,e=0,f=0;f<a.length-1;f++)b=c||a[f],c=a[f+1],d+=b[0]*c[1]-c[0]*b[1],e+=Math.abs(c[0]-b[0])+Math.abs(c[1]-b[1]);a.area=Math.abs(d/2),a.dist=e}b.exports=d;var i=a("./simplify"),j=a("./feature")},{"./feature":150,"./simplify":152}],150:[function(a,b,c){"use strict";function d(a,b,c,d){var f={id:d||null,type:b,geometry:c,tags:a||null,min:[1/0,1/0],max:[-1/0,-1/0]};return e(f),f}function e(a){var b=a.geometry,c=a.min,d=a.max;if(1===a.type)f(c,d,b);else for(var e=0;e<b.length;e++)f(c,d,b[e]);return a}function f(a,b,c){for(var d,e=0;e<c.length;e++)d=c[e],a[0]=Math.min(d[0],a[0]),b[0]=Math.max(d[0],b[0]),a[1]=Math.min(d[1],a[1]),b[1]=Math.max(d[1],b[1])}b.exports=d},{}],151:[function(a,b,c){"use strict";function d(a,b){return new e(a,b)}function e(a,b){b=this.options=i(Object.create(this.options),b);var c=b.debug;c&&console.time("preprocess data");var d=1<<b.maxZoom,e=k(a,b.tolerance/(d*b.extent));this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",b.indexMaxZoom,b.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e=n(e,b.buffer/b.extent,g),e.length&&this.splitTile(e,0,0,0),c&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function f(a,b,c){return 32*((1<<a)*c+b)+a}function g(a,b,c){return[c,(c-a[0])*(b[1]-a[1])/(b[0]-a[0])+a[1],1]}function h(a,b,c){return[(c-a[1])*(b[0]-a[0])/(b[1]-a[1])+a[0],c,1]}function i(a,b){for(var c in b)a[c]=b[c];return a}function j(a,b,c){var d=a.source;if(1!==d.length)return!1;var e=d[0];if(3!==e.type||e.geometry.length>1)return!1;var f=e.geometry[0].length;if(5!==f)return!1;for(var g=0;g<f;g++){var h=l.point(e.geometry[0][g],b,a.z2,a.x,a.y);if(h[0]!==-c&&h[0]!==b+c||h[1]!==-c&&h[1]!==b+c)return!1}return!0}b.exports=d;var k=a("./convert"),l=a("./transform"),m=a("./clip"),n=a("./wrap"),o=a("./tile");e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},e.prototype.splitTile=function(a,b,c,d,e,i,k){for(var l=[a,b,c,d],n=this.options,p=n.debug,q=null;l.length;){d=l.pop(),c=l.pop(),b=l.pop(),a=l.pop();var r=1<<b,s=f(b,c,d),t=this.tiles[s],u=b===n.maxZoom?0:n.tolerance/(r*n.extent);if(!t&&(p>1&&console.time("creation"),t=this.tiles[s]=o(a,r,c,d,u,b===n.maxZoom),this.tileCoords.push({z:b,x:c,y:d}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",b,c,d,t.numFeatures,t.numPoints,t.numSimplified),console.timeEnd("creation"));var v="z"+b;this.stats[v]=(this.stats[v]||0)+1,this.total++}if(t.source=a,e){if(b===n.maxZoom||b===e)continue;var w=1<<e-b;if(c!==Math.floor(i/w)||d!==Math.floor(k/w))continue}else if(b===n.indexMaxZoom||t.numPoints<=n.indexMaxPoints)continue;if(n.solidChildren||!j(t,n.extent,n.buffer)){t.source=null,p>1&&console.time("clipping");var x,y,z,A,B,C,D=.5*n.buffer/n.extent,E=.5-D,F=.5+D,G=1+D;x=y=z=A=null,B=m(a,r,c-D,c+F,0,g,t.min[0],t.max[0]),C=m(a,r,c+E,c+G,0,g,t.min[0],t.max[0]),B&&(x=m(B,r,d-D,d+F,1,h,t.min[1],t.max[1]),y=m(B,r,d+E,d+G,1,h,t.min[1],t.max[1])),C&&(z=m(C,r,d-D,d+F,1,h,t.min[1],t.max[1]),A=m(C,r,d+E,d+G,1,h,t.min[1],t.max[1])),p>1&&console.timeEnd("clipping"),a.length&&(l.push(x||[],b+1,2*c,2*d),l.push(y||[],b+1,2*c,2*d+1),l.push(z||[],b+1,2*c+1,2*d),l.push(A||[],b+1,2*c+1,2*d+1))}else e&&(q=b)}return q},e.prototype.getTile=function(a,b,c){var d=this.options,e=d.extent,g=d.debug,h=1<<a;b=(b%h+h)%h;var i=f(a,b,c);if(this.tiles[i])return l.tile(this.tiles[i],e);g>1&&console.log("drilling down to z%d-%d-%d",a,b,c);for(var k,m=a,n=b,o=c;!k&&m>0;)m--,n=Math.floor(n/2),o=Math.floor(o/2),k=this.tiles[f(m,n,o)];if(!k||!k.source)return null;if(g>1&&console.log("found parent tile z%d-%d-%d",m,n,o),j(k,e,d.buffer))return l.tile(k,e);g>1&&console.time("drilling down");var p=this.splitTile(k.source,m,n,o,a,b,c);if(g>1&&console.timeEnd("drilling down"),null!==p){var q=1<<a-p;i=f(p,Math.floor(b/q),Math.floor(c/q))}return this.tiles[i]?l.tile(this.tiles[i],e):null}},{"./clip":148,"./convert":149,"./tile":153,"./transform":154,"./wrap":155}],152:[function(a,b,c){"use strict";function d(a,b){var c,d,f,g,h=b*b,i=a.length,j=0,k=i-1,l=[];for(a[j][2]=1,a[k][2]=1;k;){for(d=0,c=j+1;c<k;c++)(f=e(a[c],a[j],a[k]))>d&&(g=c,d=f);d>h?(a[g][2]=d,l.push(j),l.push(g),j=g):(k=l.pop(),j=l.pop())}}function e(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1],h=a[0],i=a[1],j=f-d,k=g-e;if(0!==j||0!==k){var l=((h-d)*j+(i-e)*k)/(j*j+k*k);l>1?(d=f,e=g):l>0&&(d+=j*l,e+=k*l)}return j=h-d,k=i-e,j*j+k*k}b.exports=d},{}],153:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z2:b,transformed:!1,min:[2,1],max:[-1,0]},i=0;i<a.length;i++){h.numFeatures++,e(h,a[i],f,g);var j=a[i].min,k=a[i].max;j[0]<h.min[0]&&(h.min[0]=j[0]),j[1]<h.min[1]&&(h.min[1]=j[1]),k[0]>h.max[0]&&(h.max[0]=k[0]),k[1]>h.max[1]&&(h.max[1]=k[1])}return h}function e(a,b,c,d){var e,g,h,i,j=b.geometry,k=b.type,l=[],m=c*c;if(1===k)for(e=0;e<j.length;e++)l.push(j[e]),a.numPoints++,a.numSimplified++;else for(e=0;e<j.length;e++)if(h=j[e],d||!(2===k&&h.dist<c||3===k&&h.area<m)){var n=[];for(g=0;g<h.length;g++)i=h[g],(d||i[2]>m)&&(n.push(i),a.numSimplified++),a.numPoints++;3===k&&f(n,h.outer),l.push(n)}else a.numPoints+=h.length;if(l.length){var o={geometry:l,type:k,tags:b.tags||null};null!==b.id&&(o.id=b.id),a.features.push(o)}}function f(a,b){g(a)<0===b&&a.reverse()}function g(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c[0]-b[0])*(b[1]+c[1]);return d}b.exports=d},{}],154:[function(a,b,c){"use strict";function d(a,b){if(a.transformed)return a;var c,d,f,g=a.z2,h=a.x,i=a.y;for(c=0;c<a.features.length;c++){var j=a.features[c],k=j.geometry;if(1===j.type)for(d=0;d<k.length;d++)k[d]=e(k[d],b,g,h,i);else for(d=0;d<k.length;d++){var l=k[d];for(f=0;f<l.length;f++)l[f]=e(l[f],b,g,h,i)}}return a.transformed=!0,a}function e(a,b,c,d,e){return[Math.round(b*(a[0]*c-d)),Math.round(b*(a[1]*c-e))]}c.tile=d,c.point=e},{}],155:[function(a,b,c){"use strict";function d(a,b,c){var d=a,f=g(a,1,-1-b,b,0,c,-1,2),h=g(a,1,1-b,2+b,0,c,-1,2);return(f||h)&&(d=g(a,1,-b,1+b,0,c,-1,2)||[],f&&(d=e(f,1).concat(d)),h&&(d=d.concat(e(h,-1)))),d}function e(a,b){for(var c=[],d=0;d<a.length;d++){var e,g=a[d],i=g.type;if(1===i)e=f(g.geometry,b);else{e=[];for(var j=0;j<g.geometry.length;j++)e.push(f(g.geometry[j],b))}c.push(h(g.tags,i,e,g.id))}return c}function f(a,b){var c=[];c.area=a.area,c.dist=a.dist;for(var d=0;d<a.length;d++)c.push([a[d][0]+b,a[d][1],a[d][2]]);return c}var g=a("./clip"),h=a("./feature");b.exports=d},{"./clip":148,"./feature":150}],156:[function(a,b,c){function d(a,b){if("string"!=typeof a)throw new TypeError("must specify type string");if(b=b||{},"undefined"==typeof document&&!b.canvas)return null;var c=b.canvas||document.createElement("canvas");"number"==typeof b.width&&(c.width=b.width),"number"==typeof b.height&&(c.height=b.height);var d,e=b;try{var f=[a];0===a.indexOf("webgl")&&f.push("experimental-"+a);for(var g=0;g<f.length;g++)if(d=c.getContext(f[g],e))return d}catch(a){d=null}return d||null}b.exports=d},{}],157:[function(a,b,c){"use strict";function d(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function e(a){this.gl=a,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=k(a)}function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function g(a,b,c,d,e){for(var f=a.primalOffset,g=a.primalMinor,h=a.mirrorOffset,i=a.mirrorMinor,j=d[b],k=0;k<3;++k)if(b!==k){var l=f,m=h,n=g,o=i;j&1<<k&&(l=h,m=f,n=i,o=g),l[k]=c[0][k],m[k]=c[1][k],e[k]>0?(n[k]=-1,o[k]=0):(n[k]=0,o[k]=1)}}function h(a,b){var c=new e(a);return c.update(b),c}b.exports=h;var i=a("./lib/text.js"),j=a("./lib/lines.js"),k=a("./lib/background.js"),l=a("./lib/cube.js"),m=a("./lib/ticks.js"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=e.prototype;o.update=function(a){function b(b,c,d){if(d in a){var e,f=a[d],g=this[d];(b?Array.isArray(f)&&Array.isArray(f[0]):Array.isArray(f))?this[d]=e=[c(f[0]),c(f[1]),c(f[2])]:this[d]=e=[c(f),c(f),c(f)];for(var h=0;h<3;++h)if(e[h]!==g[h])return!0}return!1}a=a||{};var c,d=b.bind(this,!1,Number),e=b.bind(this,!1,Boolean),f=b.bind(this,!1,String),g=b.bind(this,!0,function(a){if(Array.isArray(a)){if(3===a.length)return[+a[0],+a[1],+a[2],1];if(4===a.length)return[+a[0],+a[1],+a[2],+a[3]]}return[0,0,0,1]}),h=!1,k=!1;if("bounds"in a)for(var l=a.bounds,n=0;n<2;++n)for(var o=0;o<3;++o)l[n][o]!==this.bounds[n][o]&&(k=!0),this.bounds[n][o]=l[n][o];if("ticks"in a){c=a.ticks,h=!0,this.autoTicks=!1;for(var n=0;n<3;++n)this.tickSpacing[n]=0}else d("tickSpacing")&&(this.autoTicks=!0,k=!0);if(this._firstInit&&("ticks"in a||"tickSpacing"in a||(this.autoTicks=!0),k=!0,h=!0,this._firstInit=!1),k&&this.autoTicks&&(c=m.create(this.bounds,this.tickSpacing),h=!0),h){for(var n=0;n<3;++n)c[n].sort(function(a,b){return a.x-b.x});m.equal(c,this.ticks)?h=!1:this.ticks=c}e("tickEnable"),f("tickFont")&&(h=!0),d("tickSize"),d("tickAngle"),d("tickPad"),g("tickColor");var p=f("labels");f("labelFont")&&(p=!0),e("labelEnable"),d("labelSize"),d("labelPad"),g("labelColor"),e("lineEnable"),e("lineMirror"),d("lineWidth"),g("lineColor"),e("lineTickEnable"),e("lineTickMirror"),d("lineTickLength"),d("lineTickWidth"),g("lineTickColor"),e("gridEnable"),d("gridWidth"),g("gridColor"),e("zeroEnable"),g("zeroLineColor"),d("zeroLineWidth"),e("backgroundEnable"),g("backgroundColor"),this._text?this._text&&(p||h)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=j(this.gl,this.bounds,this.ticks))};var p=[new f,new f,new f],q=[0,0,0],r={model:n,view:n,projection:n};o.isOpaque=function(){return!0},o.isTransparent=function(){return!1},o.drawTransparent=function(a){};var s=[0,0,0],t=[0,0,0],u=[0,0,0];o.draw=function(a){a=a||r;for(var b=this.gl,c=a.model||n,e=a.view||n,f=a.projection||n,h=this.bounds,i=l(c,e,f,h),j=i.cubeEdges,k=i.axis,m=e[12],o=e[13],v=e[14],w=e[15],x=this.pixelRatio*(f[3]*m+f[7]*o+f[11]*v+f[15]*w)/b.drawingBufferHeight,y=0;y<3;++y)this.lastCubeProps.cubeEdges[y]=j[y],this.lastCubeProps.axis[y]=k[y];for(var z=p,y=0;y<3;++y)g(p[y],y,this.bounds,j,k);for(var b=this.gl,A=q,y=0;y<3;++y)this.backgroundEnable[y]?A[y]=k[y]:A[y]=0;this._background.draw(c,e,f,h,A,this.backgroundColor),this._lines.bind(c,e,f,this);for(var y=0;y<3;++y){var B=[0,0,0];k[y]>0?B[y]=h[1][y]:B[y]=h[0][y];for(var C=0;C<2;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.gridEnable[D]&&this._lines.drawGrid(D,E,this.bounds,B,this.gridColor[D],this.gridWidth[D]*this.pixelRatio)}for(var C=0;C<2;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.zeroEnable[E]&&h[0][E]<=0&&h[1][E]>=0&&this._lines.drawZero(D,E,this.bounds,B,this.zeroLineColor[E],this.zeroLineWidth[E]*this.pixelRatio)}}for(var y=0;y<3;++y){this.lineEnable[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].primalOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio),this.lineMirror[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].mirrorOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);for(var F=d(s,z[y].primalMinor),G=d(t,z[y].mirrorMinor),H=this.lineTickLength,C=0;C<3;++C){var I=x/c[5*C];F[C]*=H[C]*I,G[C]*=H[C]*I}this.lineTickEnable[y]&&this._lines.drawAxisTicks(y,z[y].primalOffset,F,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio),this.lineTickMirror[y]&&this._lines.drawAxisTicks(y,z[y].mirrorOffset,G,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio)}this._text.bind(c,e,f,this.pixelRatio);for(var y=0;y<3;++y){for(var J=z[y].primalMinor,K=d(u,z[y].primalOffset),C=0;C<3;++C)this.lineTickEnable[y]&&(K[C]+=x*J[C]*Math.max(this.lineTickLength[C],0)/c[5*C]);if(this.tickEnable[y]){for(var C=0;C<3;++C)K[C]+=x*J[C]*this.tickPad[C]/c[5*C];this._text.drawTicks(y,this.tickSize[y],this.tickAngle[y],K,this.tickColor[y])}if(this.labelEnable[y]){for(var C=0;C<3;++C)K[C]+=x*J[C]*this.labelPad[C]/c[5*C];K[y]+=.5*(h[0][y]+h[1][y]),this._text.drawLabel(y,this.labelSize[y],this.labelAngle[y],K,this.labelColor[y])}}},o.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":158,"./lib/cube.js":159,"./lib/lines.js":160,"./lib/text.js":162,"./lib/ticks.js":163}],158:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d}function e(a){for(var b=[],c=[],e=0,i=0;i<3;++i)for(var j=(i+1)%3,k=(i+2)%3,l=[0,0,0],m=[0,0,0],n=-1;n<=1;n+=2){c.push(e,e+2,e+1,e+1,e+2,e+3),l[i]=n,m[i]=n;for(var o=-1;o<=1;o+=2){l[j]=o;for(var p=-1;p<=1;p+=2)l[k]=p,b.push(l[0],l[1],l[2],m[0],m[1],m[2]),e+=1}var q=j;j=k,k=q}var r=f(a,new Float32Array(b)),s=f(a,new Uint16Array(c),a.ELEMENT_ARRAY_BUFFER),t=g(a,[{buffer:r,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:r,type:a.FLOAT,size:3,offset:12,stride:24}],s),u=h(a);return u.attributes.position.location=0,u.attributes.normal.location=1,new d(a,r,t,u)}b.exports=e;var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders").bg,i=d.prototype;i.draw=function(a,b,c,d,e,f){for(var g=!1,h=0;h<3;++h)g=g||e[h];if(g){var i=this.gl;i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:b,projection:c,bounds:d,enable:e,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),i.disable(i.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":161,"gl-buffer":165,"gl-vao":259}],159:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<4;++d){a[d]=c[12+d];for(var e=0;e<3;++e)a[d]+=b[e]*c[4*e+d]}}function e(a){for(var b=0;b<p.length;++b)if(a=i.positive(a,p[b]),a.length<3)return 0;for(var c=a[0],d=c[0]/c[3],e=c[1]/c[3],f=0,b=1;b+1<a.length;++b){var g=a[b],h=a[b+1],j=g[0]/g[3],k=g[1]/g[3],l=h[0]/h[3],m=h[1]/h[3],n=j-d,o=k-e,q=l-d,r=m-e;f+=Math.abs(n*r-o*q)}return f}function f(a,b,c,f){h(k,b,a),h(k,c,k);for(var i=0,p=0;p<2;++p){n[2]=f[p][2];for(var t=0;t<2;++t){n[1]=f[t][1];for(var u=0;u<2;++u)n[0]=f[u][0],d(l[i],n,k),i+=1}}for(var v=-1,p=0;p<8;++p){for(var w=l[p][3],x=0;x<3;++x)m[p][x]=l[p][x]/w;w<0&&(v<0?v=p:m[p][2]<m[v][2]&&(v=p))}if(v<0){v=0;for(var y=0;y<3;++y){for(var z=(y+2)%3,A=(y+1)%3,B=-1,C=-1,D=0;D<2;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A);j(m[E],m[F],m[G],o)<0||(D?B=1:C=1)}if(B<0||C<0)C>B&&(v|=1<<y);else{for(var D=0;D<2;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A),H=e([l[E],l[F],l[G],l[E+(1<<z)+(1<<A)]]);D?B=H:C=H}C>B&&(v|=1<<y)}}}for(var I=7^v,J=-1,p=0;p<8;++p)p!==v&&p!==I&&(J<0?J=p:m[J][1]>m[p][1]&&(J=p));for(var K=-1,p=0;p<3;++p){var L=J^1<<p;if(L!==v&&L!==I){K<0&&(K=L);var A=m[L];A[0]<m[K][0]&&(K=L)}}for(var M=-1,p=0;p<3;++p){var L=J^1<<p;if(L!==v&&L!==I&&L!==K){M<0&&(M=L);var A=m[L];A[0]>m[M][0]&&(M=L)}}var N=q;N[0]=N[1]=N[2]=0,N[g.log2(K^J)]=J&K,N[g.log2(J^M)]=J&M;var O=7^M;O===v||O===I?(O=7^K,N[g.log2(M^O)]=O&M):N[g.log2(K^O)]=O&K;for(var P=r,Q=v,y=0;y<3;++y)P[y]=Q&1<<y?-1:1;return s}b.exports=f;var g=a("bit-twiddle"),h=a("gl-mat4/multiply"),i=(a("gl-mat4/invert"),a("split-polygon")),j=a("robust-orientation"),k=new Array(16),l=(new Array(16),new Array(8)),m=new Array(8),n=new Array(3),o=[0,0,0];!function(){for(var a=0;a<8;++a)l[a]=[1,1,1,1],m[a]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],q=[1,1,1],r=[0,0,0],s={cubeEdges:q,axis:r}},{"bit-twiddle":71,"gl-mat4/invert":186,"gl-mat4/multiply":188,"robust-orientation":515,"split-polygon":535}],160:[function(a,b,c){"use strict";function d(a){return a[0]=a[1]=a[2]=0,a}function e(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function f(a,b,c,d,e,f,g,h){this.gl=a,this.vertBuffer=b,this.vao=c,this.shader=d,this.tickCount=e,this.tickOffset=f,this.gridCount=g,this.gridOffset=h}function g(a,b,c){var d=[],e=[0,0,0],g=[0,0,0],k=[0,0,0],l=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var m=0;m<3;++m){for(var n=d.length/3|0,o=0;o<c[m].length;++o){var p=+c[m][o].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;e[m]=n,g[m]=q-n;for(var n=d.length/3|0,r=0;r<c[m].length;++r){var p=+c[m][r].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;k[m]=n,l[m]=q-n}var s=h(a,new Float32Array(d)),t=i(a,[{buffer:s,type:a.FLOAT,size:3,stride:0,offset:0}]),u=j(a);return u.attributes.position.location=0,new f(a,s,t,u,g,e,l,k)}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders").line,k=[0,0,0],l=[0,0,0],m=[0,0,0],n=[0,0,0],o=[1,1],p=f.prototype;p.bind=function(a,b,c){this.shader.bind(),this.shader.uniforms.model=a,this.shader.uniforms.view=b,this.shader.uniforms.projection=c,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},p.drawAxisLine=function(a,b,c,f,g){var h=d(l);this.shader.uniforms.majorAxis=l,h[a]=b[1][a]-b[0][a],this.shader.uniforms.minorAxis=h;var i=e(n,c);i[a]+=b[0][a],this.shader.uniforms.offset=i,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=f;var j=d(m);j[(a+2)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6);var j=d(m);j[(a+1)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(a,b,c,e,f){if(this.tickCount[a]){var g=d(k);g[a]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=b,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=e,this.shader.uniforms.lineWidth=f;var h=d(m);h[a]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])}},p.drawGrid=function(a,b,c,f,g,h){if(this.gridCount[a]){var i=d(l);i[b]=c[1][b]-c[0][b],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[b]+=c[0][b],this.shader.uniforms.offset=j;var o=d(k);o[a]=1,this.shader.uniforms.majorAxis=o;var p=d(m);p[a]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,this.gridCount[a],this.gridOffset[a])}},p.drawZero=function(a,b,c,f,g,h){var i=d(l);this.shader.uniforms.majorAxis=i,i[a]=c[1][a]-c[0][a],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[a]+=c[0][a],this.shader.uniforms.offset=j;var k=d(m);k[b]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":161,"gl-buffer":165,"gl-vao":259}],161:[function(a,b,c){"use strict";var d=a("gl-shader");c.line=function(a){return d(a,"#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n","precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",null,[{name:"position",type:"vec3"}])};c.text=function(a){return d(a,"#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}","precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",null,[{name:"position",type:"vec3"}])};c.bg=function(a){return d(a,"#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}",null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":243}],162:[function(a,b,c){(function(c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=b,this.buffer=c,this.vao=d,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function e(a,b){try{return i(a,b)}catch(a){return console.warn("error vectorizing text:",a),{cells:[],positions:[]}}}function f(a,b,c,e,f,i){var k=g(a),l=h(a,[{buffer:k,size:3}]),m=j(a);m.attributes.position.location=0;var n=new d(a,m,k,l);return n.update(b,c,e,f,i),n}b.exports=f;var g=a("gl-buffer"),h=a("gl-vao"),i=a("vectorize-text"),j=a("./shaders").text,k=window||c.global||{},l=k.__TEXT_CACHE||{};k.__TEXT_CACHE={};var m=d.prototype,n=[0,0];m.bind=function(a,b,c,d){this.vao.bind(),this.shader.bind();var e=this.shader.uniforms;e.model=a,e.view=b,e.projection=c,e.pixelScale=d,n[0]=this.gl.drawingBufferWidth,n[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=n},m.update=function(a,b,c,d,f){function g(a,b,c,d){var f=l[c];f||(f=l[c]={});var g=f[b];g||(g=f[b]=e(b,{triangles:!0,font:c,textAlign:"center",textBaseline:"middle"}));for(var i=(d||12)/12,j=g.positions,k=g.cells,m=0,n=k.length;m<n;++m)for(var o=k[m],p=2;p>=0;--p){var q=j[o[p]];h.push(i*q[0],-i*q[1],a)}}for(var h=(this.gl,[]),i=[0,0,0],j=[0,0,0],k=[0,0,0],m=[0,0,0],n=0;n<3;++n){k[n]=h.length/3|0,g(.5*(a[0][n]+a[1][n]),b[n],c),m[n]=(h.length/3|0)-k[n],i[n]=h.length/3|0;for(var o=0;o<d[n].length;++o)d[n][o].text&&g(d[n][o].x,d[n][o].text,d[n][o].font||f,d[n][o].fontSize||12);j[n]=(h.length/3|0)-i[n]}this.buffer.update(h),
this.tickOffset=i,this.tickCount=j,this.labelOffset=k,this.labelCount=m};var o=[0,0,0];m.drawTicks=function(a,b,c,d,e){if(this.tickCount[a]){var f=o;f[0]=f[1]=f[2]=0,f[a]=1,this.shader.uniforms.axis=f,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])}};var p=[0,0,0];m.drawLabel=function(a,b,c,d,e){this.labelCount[a]&&(this.shader.uniforms.axis=p,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.labelCount[a],this.labelOffset[a]))},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":161,_process:488,"gl-buffer":165,"gl-vao":259,"vectorize-text":568}],163:[function(a,b,c){"use strict";function d(a,b){var c=a+"",d=c.indexOf("."),e=0;d>=0&&(e=c.length-d-1);var f=Math.pow(10,e),g=Math.round(a*b*f),h=g+"";if(h.indexOf("e")>=0)return h;var i=g/f,j=g%f;g<0?(i=0|-Math.ceil(i),j=0|-j):(i=0|Math.floor(i),j|=0);var k=""+i;if(g<0&&(k="-"+k),e){for(var l=""+j;l.length<e;)l="0"+l;return k+"."+l}return k}function e(a,b){for(var c=[],e=0;e<3;++e){for(var f=[],g=(a[0][e],a[1][e],0);g*b[e]<=a[1][e];++g)f.push({x:g*b[e],text:d(b[e],g)});for(var g=-1;g*b[e]>=a[0][e];--g)f.push({x:g*b[e],text:d(b[e],g)});c.push(f)}return c}function f(a,b){for(var c=0;c<3;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;++d){var e=a[c][d],f=b[c][d];if(e.x!==f.x||e.text!==f.text||e.font!==f.font||e.fontColor!==f.fontColor||e.fontSize!==f.fontSize||e.dx!==f.dx||e.dy!==f.dy)return!1}}return!0}c.create=e,c.equal=f},{}],164:[function(a,b,c){"use strict";function d(a,b,c){this.lo=a,this.hi=b,this.pixelsPerDataUnit=c}function e(a,b,c,d,e){for(var f=0;f<3;++f){for(var g=o,h=p,i=0;i<3;++i)h[i]=g[i]=c[i];h[3]=g[3]=1,h[f]+=1,l(h,h,b),h[3]<0&&(a[f]=1/0),g[f]-=1,l(g,g,b),g[3]<0&&(a[f]=1/0);var j=(g[0]/g[3]-h[0]/h[3])*d,k=(g[1]/g[3]-h[1]/h[3])*e;a[f]=.25*Math.sqrt(j*j+k*k)}return a}function f(a,b,c,d,f){var l=b.model||m,o=b.view||m,p=b.projection||m,s=a.bounds,f=f||i(l,o,p,s),t=f.axis;f.edges;j(n,o,l),j(n,p,n);for(var u=q,v=0;v<3;++v)u[v].lo=1/0,u[v].hi=-1/0,u[v].pixelsPerDataUnit=1/0;var w=g(k(n,n));k(n,n);for(var x=0;x<3;++x){var y=(x+1)%3,z=(x+2)%3,A=r;a:for(var v=0;v<2;++v){var B=[];if(t[x]<0!=!!v){A[x]=s[v][x];for(var C=0;C<2;++C){A[y]=s[C^v][y];for(var D=0;D<2;++D)A[z]=s[D^C^v][z],B.push(A.slice())}for(var C=0;C<w.length;++C){if(0===B.length)continue a;B=h.positive(B,w[C])}for(var C=0;C<B.length;++C)for(var z=B[C],E=e(r,n,z,c,d),D=0;D<3;++D)u[D].lo=Math.min(u[D].lo,z[D]),u[D].hi=Math.max(u[D].hi,z[D]),D!==x&&(u[D].pixelsPerDataUnit=Math.min(u[D].pixelsPerDataUnit,Math.abs(E[D])))}}}return u}b.exports=f;var g=a("extract-frustum-planes"),h=a("split-polygon"),i=a("./lib/cube.js"),j=a("gl-mat4/multiply"),k=a("gl-mat4/transpose"),l=a("gl-vec4/transformMat4"),m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n=new Float32Array(16),o=[0,0,0,1],p=[0,0,0,1],q=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],r=[0,0,0]},{"./lib/cube.js":159,"extract-frustum-planes":139,"gl-mat4/multiply":188,"gl-mat4/transpose":196,"gl-vec4/transformMat4":265,"split-polygon":535}],165:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.gl=a,this.type=b,this.handle=c,this.length=d,this.usage=e}function e(a,b,c,d,e,f){var g=e.length*e.BYTES_PER_ELEMENT;if(f<0)return a.bufferData(b,e,d),g;if(g+f>c)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return a.bufferSubData(b,f,e),c}function f(a,b){for(var c=i.malloc(a.length,b),d=a.length,e=0;e<d;++e)c[e]=a[e];return c}function g(a,b){for(var c=1,d=b.length-1;d>=0;--d){if(b[d]!==c)return!1;c*=a[d]}return!0}function h(a,b,c,e){if(c=c||a.ARRAY_BUFFER,e=e||a.DYNAMIC_DRAW,c!==a.ARRAY_BUFFER&&c!==a.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(e!==a.DYNAMIC_DRAW&&e!==a.STATIC_DRAW&&e!==a.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=a.createBuffer(),g=new d(a,c,f,0,e);return g.update(b),g}var i=a("typedarray-pool"),j=a("ndarray-ops"),k=a("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],m=d.prototype;m.bind=function(){this.gl.bindBuffer(this.type,this.handle)},m.unbind=function(){this.gl.bindBuffer(this.type,null)},m.dispose=function(){this.gl.deleteBuffer(this.handle)},m.update=function(a,b){if("number"!=typeof b&&(b=-1),this.bind(),"object"==typeof a&&void 0!==a.shape){var c=a.dtype;if(l.indexOf(c)<0&&(c="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16"}if(c===a.dtype&&g(a.shape,a.stride))0===a.offset&&a.data.length===a.shape[0]?this.length=e(this.gl,this.type,this.length,this.usage,a.data,b):this.length=e(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),b);else{var d=i.malloc(a.size,c),h=k(d,a.shape);j.assign(h,a),this.length=b<0?e(this.gl,this.type,this.length,this.usage,d,b):e(this.gl,this.type,this.length,this.usage,d.subarray(0,a.size),b),i.free(d)}}else if(Array.isArray(a)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(a,"uint16"):f(a,"float32"),this.length=b<0?e(this.gl,this.type,this.length,this.usage,m,b):e(this.gl,this.type,this.length,this.usage,m.subarray(0,a.length),b),i.free(m)}else if("object"==typeof a&&"number"==typeof a.length)this.length=e(this.gl,this.type,this.length,this.usage,a,b);else{if("number"!=typeof a&&void 0!==a)throw new Error("gl-buffer: Invalid data type");if(b>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");a|=0,a<=0&&(a=1),this.gl.bufferData(this.type,0|a,this.usage),this.length=a}},b.exports=h},{ndarray:458,"ndarray-ops":452,"typedarray-pool":554}],166:[function(a,b,c){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],167:[function(a,b,c){var d=a("./1.0/numbers");b.exports=function(a){return d[a]}},{"./1.0/numbers":166}],168:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=d,this.buffer=b,this.vao=c,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function e(a,b){for(var c=0;c<3;++c)a[0][c]=Math.min(a[0][c],b[c]),a[1][c]=Math.max(a[1][c],b[c])}function f(a,b,c,d){for(var e=m[d],f=0;f<e.length;++f){var g=e[f];a.push(b[0],b[1],b[2],c[0],c[1],c[2],c[3],g[0],g[1],g[2])}return e.length}function g(a){var b=a.gl,c=h(b),e=i(b,[{buffer:c,type:b.FLOAT,size:3,offset:0,stride:40},{buffer:c,type:b.FLOAT,size:4,offset:12,stride:40},{buffer:c,type:b.FLOAT,size:3,offset:28,stride:40}]),f=j(b);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.offset.location=2;var g=new d(b,c,e,f);return g.update(a),g}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders/index"),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=d.prototype;l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.drawTransparent=l.draw=function(a){var b=this.gl,c=this.shader.uniforms;this.shader.bind();var d=c.view=a.view||k,e=c.projection=a.projection||k;c.model=a.model||k,c.clipBounds=this.clipBounds,c.opacity=this.opacity;var f=d[12],g=d[13],h=d[14],i=d[15],j=this.pixelRatio*(e[3]*f+e[7]*g+e[11]*h+e[15]*i)/b.drawingBufferHeight;this.vao.bind();for(var l=0;l<3;++l)b.lineWidth(this.lineWidth[l]),c.capSize=this.capSize[l]*j,this.lineCount[l]&&b.drawArrays(b.LINES,this.lineOffset[l],this.lineCount[l]);this.vao.unbind()};var m=function(){for(var a=new Array(3),b=0;b<3;++b){for(var c=[],d=1;d<=2;++d)for(var e=-1;e<=1;e+=2){var f=(d+b)%3,g=[0,0,0];g[f]=e,c.push(g)}a[b]=c}return a}();l.update=function(a){a=a||{},"lineWidth"in a&&(this.lineWidth=a.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in a&&(this.capSize=a.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in a&&(this.opacity=a.opacity);var b=a.color||[[0,0,0],[0,0,0],[0,0,0]],c=a.position,d=a.error;if(Array.isArray(b[0])||(b=[b,b,b]),c&&d){var g=[],h=c.length,i=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var j=0;j<3;++j){this.lineOffset[j]=i;a:for(var k=0;k<h;++k){for(var l=c[k],m=0;m<3;++m)if(isNaN(l[m])||!isFinite(l[m]))continue a;var n=d[k],o=b[j];if(Array.isArray(o[0])&&(o=b[k]),3===o.length&&(o=[o[0],o[1],o[2],1]),!isNaN(n[0][j])&&!isNaN(n[1][j])){if(n[0][j]<0){var p=l.slice();p[j]+=n[0][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}if(n[1][j]>0){var p=l.slice();p[j]+=n[1][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}}}this.lineCount[j]=i-this.lineOffset[j]}this.buffer.update(g)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":170,"gl-buffer":165,"gl-vao":259}],169:[function(a,b,c){b.exports=function(a){"string"==typeof a&&(a=[a]);for(var b=[].slice.call(arguments,1),c=[],d=0;d<a.length-1;d++)c.push(a[d],b[d]||"");return c.push(a[d]),c.join("")}},{}],170:[function(a,b,c){"use strict";var d=a("glslify"),e=a("gl-shader"),f=d(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),g=d(["precision mediump float;\n#define GLSLIFY 1\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}"]);b.exports=function(a){return e(a,f,g,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":243,glslify:169}],171:[function(a,b,c){"use strict";function d(a){return[a.getParameter(a.FRAMEBUFFER_BINDING),a.getParameter(a.RENDERBUFFER_BINDING),a.getParameter(a.TEXTURE_BINDING_2D)]}function e(a,b){a.bindFramebuffer(a.FRAMEBUFFER,b[0]),a.bindRenderbuffer(a.RENDERBUFFER,b[1]),a.bindTexture(a.TEXTURE_2D,b[2])}function f(a,b){var c=a.getParameter(b.MAX_COLOR_ATTACHMENTS_WEBGL);s=new Array(c+1);for(var d=0;d<=c;++d){for(var e=new Array(c),f=0;f<d;++f)e[f]=a.COLOR_ATTACHMENT0+f;for(var f=d;f<c;++f)e[f]=a.NONE;s[d]=e}}function g(a){switch(a){case o:throw new Error("gl-fbo: Framebuffer unsupported");case p:throw new Error("gl-fbo: Framebuffer incomplete attachment");case q:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(a,b,c,d,e,f){if(!d)return null;var g=n(a,b,c,e,d);return g.magFilter=a.NEAREST,g.minFilter=a.NEAREST,g.mipSamples=1,g.bind(),a.framebufferTexture2D(a.FRAMEBUFFER,f,a.TEXTURE_2D,g.handle,0),g}function i(a,b,c,d,e){var f=a.createRenderbuffer();return a.bindRenderbuffer(a.RENDERBUFFER,f),a.renderbufferStorage(a.RENDERBUFFER,d,b,c),a.framebufferRenderbuffer(a.FRAMEBUFFER,e,a.RENDERBUFFER,f),f}function j(a){var b=d(a.gl),c=a.gl,f=a.handle=c.createFramebuffer(),j=a._shape[0],k=a._shape[1],l=a.color.length,m=a._ext,n=a._useStencil,o=a._useDepth,p=a._colorType;c.bindFramebuffer(c.FRAMEBUFFER,f);for(var q=0;q<l;++q)a.color[q]=h(c,j,k,p,c.RGBA,c.COLOR_ATTACHMENT0+q);0===l?(a._color_rb=i(c,j,k,c.RGBA4,c.COLOR_ATTACHMENT0),m&&m.drawBuffersWEBGL(s[0])):l>1&&m.drawBuffersWEBGL(s[l]);var r=c.getExtension("WEBGL_depth_texture");r?n?a.depth=h(c,j,k,r.UNSIGNED_INT_24_8_WEBGL,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o&&(a.depth=h(c,j,k,c.UNSIGNED_SHORT,c.DEPTH_COMPONENT,c.DEPTH_ATTACHMENT)):o&&n?a._depth_rb=i(c,j,k,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o?a._depth_rb=i(c,j,k,c.DEPTH_COMPONENT16,c.DEPTH_ATTACHMENT):n&&(a._depth_rb=i(c,j,k,c.STENCIL_INDEX,c.STENCIL_ATTACHMENT));var t=c.checkFramebufferStatus(c.FRAMEBUFFER);if(t!==c.FRAMEBUFFER_COMPLETE){a._destroyed=!0,c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteFramebuffer(a.handle),a.handle=null,a.depth&&(a.depth.dispose(),a.depth=null),a._depth_rb&&(c.deleteRenderbuffer(a._depth_rb),a._depth_rb=null);for(var q=0;q<a.color.length;++q)a.color[q].dispose(),a.color[q]=null;a._color_rb&&(c.deleteRenderbuffer(a._color_rb),a._color_rb=null),e(c,b),g(t)}e(c,b)}function k(a,b,c,d,e,f,g,h){this.gl=a,this._shape=[0|b,0|c],this._destroyed=!1,this._ext=h,this.color=new Array(e);for(var i=0;i<e;++i)this.color[i]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=d,this._useDepth=f,this._useStencil=g;var k=this,l=[0|b,0|c];Object.defineProperties(l,{0:{get:function(){return k._shape[0]},set:function(a){return k.width=a}},1:{get:function(){return k._shape[1]},set:function(a){return k.height=a}}}),this._shapeVector=l,j(this)}function l(a,b,c){if(a._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(a._shape[0]!==b||a._shape[1]!==c){var f=a.gl,h=f.getParameter(f.MAX_RENDERBUFFER_SIZE);if(b<0||b>h||c<0||c>h)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");a._shape[0]=b,a._shape[1]=c;for(var i=d(f),j=0;j<a.color.length;++j)a.color[j].shape=a._shape;a._color_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._color_rb),f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,a._shape[0],a._shape[1])),a.depth&&(a.depth.shape=a._shape),a._depth_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._depth_rb),a._useDepth&&a._useStencil?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,a._shape[0],a._shape[1]):a._useDepth?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,a._shape[0],a._shape[1]):a._useStencil&&f.renderbufferStorage(f.RENDERBUFFER,f.STENCIL_INDEX,a._shape[0],a._shape[1])),f.bindFramebuffer(f.FRAMEBUFFER,a.handle);var k=f.checkFramebufferStatus(f.FRAMEBUFFER);k!==f.FRAMEBUFFER_COMPLETE&&(a.dispose(),e(f,i),g(k)),e(f,i)}}function m(a,b,c,d){o||(o=a.FRAMEBUFFER_UNSUPPORTED,p=a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,q=a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var e=a.getExtension("WEBGL_draw_buffers");if(!s&&e&&f(a,e),Array.isArray(b)&&(d=c,c=0|b[1],b=0|b[0]),"number"!=typeof b)throw new Error("gl-fbo: Missing shape parameter");var g=a.getParameter(a.MAX_RENDERBUFFER_SIZE);if(b<0||b>g||c<0||c>g)throw new Error("gl-fbo: Parameters are too large for FBO");d=d||{};var h=1;if("color"in d){if((h=Math.max(0|d.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!e)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>a.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var i=a.UNSIGNED_BYTE,j=a.getExtension("OES_texture_float");if(d.float&&h>0){if(!j)throw new Error("gl-fbo: Context does not support floating point textures");i=a.FLOAT}else d.preferFloat&&h>0&&j&&(i=a.FLOAT);var l=!0;"depth"in d&&(l=!!d.depth);var m=!1;return"stencil"in d&&(m=!!d.stencil),new k(a,b,c,i,h,l,m,e)}var n=a("gl-texture2d");b.exports=m;var o,p,q,r,s=null,t=k.prototype;Object.defineProperties(t,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(a){if(Array.isArray(a)||(a=[0|a,0|a]),2!==a.length)throw new Error("gl-fbo: Shape vector must be length 2");var b=0|a[0],c=0|a[1];return l(this,b,c),[b,c]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(a){return a|=0,l(this,a,this._shape[1]),a},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(a){return a|=0,l(this,this._shape[0],a),a},enumerable:!1}}),t.bind=function(){if(!this._destroyed){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.handle),a.viewport(0,0,this._shape[0],this._shape[1])}},t.dispose=function(){if(!this._destroyed){this._destroyed=!0;var a=this.gl;a.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(a.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var b=0;b<this.color.length;++b)this.color[b].dispose(),this.color[b]=null;this._color_rb&&(a.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":255}],172:[function(a,b,c){function d(a,b,c){"use strict";var d=g(b)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==c&&(i=c===f.FRAGMENT_SHADER?"fragment":"vertex");for(var j=e("Error compiling %s shader %s:\n",i,d),k=e("%s%s",j,a),l=a.split("\n"),m={},n=0;n<l.length;n++){var o=l[n];if(""!==o){var p=parseInt(o.split(":")[2]);if(isNaN(p))throw new Error(e("Could not parse error: %s",o));m[p]=o}}for(var q=h(b).split("\n"),n=0;n<q.length;n++)if(m[n+3]||m[n+2]||m[n+1]){var r=q[n];if(j+=r+"\n",m[n+1]){var s=m[n+1];s=s.substr(s.split(":",3).join(":").length+1).trim(),j+=e("^^^ %s\n\n",s)}}return{long:j.trim(),short:k.trim()}}var e=a("sprintf-js").sprintf,f=a("gl-constants/lookup"),g=a("glsl-shader-name"),h=a("add-line-numbers");b.exports=d},{"add-line-numbers":44,"gl-constants/lookup":167,"glsl-shader-name":267,"sprintf-js":536}],173:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.plot=a,this.shader=b,this.pickShader=c,this.positionBuffer=d,this.weightBuffer=e,this.colorBuffer=f,this.idBuffer=g,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}function e(a,b){var c=a.gl,e=i(c,k.vertex,k.fragment),f=i(c,k.pickVertex,k.pickFragment),g=j(c),h=j(c),l=j(c),m=j(c),n=new d(a,e,f,g,h,l,m);return n.update(b),a.addObject(n),n}b.exports=e;var f=a("binary-search-bounds"),g=a("iota-array"),h=a("typedarray-pool"),i=a("gl-shader"),j=a("gl-buffer"),k=a("./lib/shaders"),l=d.prototype,m=[0,0,1,0,0,1,1,0,1,1,0,1];l.draw=function(){var a=[1,0,0,0,1,0,0,0,1];return function(){var b=this.plot,c=this.shader,d=this.bounds,e=this.numVertices;if(!(e<=0)){var f=b.gl,g=b.dataBox,h=d[2]-d[0],i=d[3]-d[1],j=g[2]-g[0],k=g[3]-g[1];a[0]=2*h/j,a[4]=2*i/k,a[6]=2*(d[0]-g[0])/j-1,a[7]=2*(d[1]-g[1])/k-1,c.bind();var l=c.uniforms;l.viewTransform=a,l.shape=this.shape;var m=c.attributes;this.positionBuffer.bind(),m.position.pointer(),this.weightBuffer.bind(),m.weight.pointer(f.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),m.color.pointer(f.UNSIGNED_BYTE,!0),f.drawArrays(f.TRIANGLES,0,e)}}}(),l.drawPick=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(c){var d=this.plot,e=this.pickShader,f=this.bounds,g=this.numVertices;if(!(g<=0)){var h=d.gl,i=d.dataBox,j=f[2]-f[0],k=f[3]-f[1],l=i[2]-i[0],m=i[3]-i[1];a[0]=2*j/l,a[4]=2*k/m,a[6]=2*(f[0]-i[0])/l-1,a[7]=2*(f[1]-i[1])/m-1;for(var n=0;n<4;++n)b[n]=c>>8*n&255;this.pickOffset=c,e.bind();var o=e.uniforms;o.viewTransform=a,o.pickOffset=b,o.shape=this.shape;var p=e.attributes;return this.positionBuffer.bind(),p.position.pointer(),this.weightBuffer.bind(),p.weight.pointer(h.UNSIGNED_BYTE,!1),this.idBuffer.bind(),p.pickId.pointer(h.UNSIGNED_BYTE,!1),h.drawArrays(h.TRIANGLES,0,g),c+this.shape[0]*this.shape[1]}}}(),l.pick=function(a,b,c){var d=this.pickOffset,e=this.shape[0]*this.shape[1];if(c<d||c>=d+e)return null;var f=c-d,g=this.xData,h=this.yData;return{object:this,pointId:f,dataCoord:[g[f%this.shape[0]],h[f/this.shape[0]|0]]}},l.update=function(a){a=a||{};var b=a.shape||[0,0],c=a.x||g(b[0]),d=a.y||g(b[1]),e=a.z||new Float32Array(b[0]*b[1]);this.xData=c,this.yData=d;var i=a.colorLevels||[0],j=a.colorValues||[0,0,0,1],k=i.length,l=this.bounds,n=l[0]=c[0],o=l[1]=d[0],p=l[2]=c[c.length-1],q=l[3]=d[d.length-1],r=1/(p-n),s=1/(q-o),t=b[0],u=b[1];this.shape=[t,u];var v=(t-1)*(u-1)*(m.length>>>1);this.numVertices=v;for(var w=h.mallocUint8(4*v),x=h.mallocFloat32(2*v),y=h.mallocUint8(2*v),z=h.mallocUint32(v),A=0,B=0;B<u-1;++B)for(var C=s*(d[B]-o),D=s*(d[B+1]-o),E=0;E<t-1;++E)for(var F=r*(c[E]-n),G=r*(c[E+1]-n),H=0;H<m.length;H+=2){var I,J,K,L,M=m[H],N=m[H+1],O=(B+N)*t+(E+M),P=e[O],Q=f.le(i,P);if(Q<0)I=j[0],J=j[1],K=j[2],L=j[3];else if(Q===k-1)I=j[4*k-4],J=j[4*k-3],K=j[4*k-2],L=j[4*k-1];else{var R=(P-i[Q])/(i[Q+1]-i[Q]),S=1-R,T=4*Q,U=4*(Q+1);I=S*j[T]+R*j[U],J=S*j[T+1]+R*j[U+1],K=S*j[T+2]+R*j[U+2],L=S*j[T+3]+R*j[U+3]}w[4*A]=255*I,w[4*A+1]=255*J,w[4*A+2]=255*K,w[4*A+3]=255*L,x[2*A]=.5*F+.5*G,x[2*A+1]=.5*C+.5*D,y[2*A]=M,y[2*A+1]=N,z[A]=B*t+E,A+=1}this.positionBuffer.update(x),this.weightBuffer.update(y),this.colorBuffer.update(w),this.idBuffer.update(z),h.free(x),h.free(w),h.free(y),h.free(z)},l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":174,"binary-search-bounds":175,"gl-buffer":165,"gl-shader":243,"iota-array":281,"typedarray-pool":554}],174:[function(a,b,c){"use strict";b.exports={fragment:"precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n",pickFragment:"precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n",pickVertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"}},{}],175:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{dup:89}],176:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];c.createShader=function(a){return d(a,e,"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",null,f)},c.createPickShader=function(a){
return d(a,e,"precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",null,f)}},{"gl-shader":243}],177:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=0;d<3;++d){var e=a[d]-b[d];c+=e*e}return Math.sqrt(c)}function e(a){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],c=0;c<3;++c)b[0][c]=Math.max(a[0][c],b[0][c]),b[1][c]=Math.min(a[1][c],b[1][c]);return b}function f(a,b,c,d){this.arcLength=a,this.position=b,this.index=c,this.dataCoordinate=d}function g(a,b,c,d,e,f){this.gl=a,this.shader=b,this.pickShader=c,this.buffer=d,this.vao=e,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=f,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function h(a){var b=a.gl||a.scene&&a.scene.gl,c=p(b);c.attributes.position.location=0,c.attributes.nextPosition.location=1,c.attributes.arcLength.location=2,c.attributes.lineWidth.location=3,c.attributes.color.location=4;var d=q(b);d.attributes.position.location=0,d.attributes.nextPosition.location=1,d.attributes.arcLength.location=2,d.attributes.lineWidth.location=3,d.attributes.color.location=4;for(var e=i(b),f=j(b,[{buffer:e,size:3,offset:0,stride:48},{buffer:e,size:3,offset:12,stride:48},{buffer:e,size:1,offset:24,stride:48},{buffer:e,size:1,offset:28,stride:48},{buffer:e,size:4,offset:32,stride:48}]),h=n(new Array(1024),[256,1,4]),l=0;l<1024;++l)h.data[l]=255;var m=k(b,h);m.wrap=b.REPEAT;var o=new g(b,c,d,e,f,m);return o.update(a),o}b.exports=h;var i=a("gl-buffer"),j=a("gl-vao"),k=a("gl-texture2d"),l=a("glsl-read-float"),m=a("binary-search-bounds"),n=a("ndarray"),o=a("./lib/shaders"),p=o.createShader,q=o.createPickShader,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=g.prototype;s.isTransparent=function(){return this.opacity<1},s.isOpaque=function(){return this.opacity>=1},s.pickSlots=1,s.setPickBase=function(a){this.pickId=a},s.drawTransparent=s.draw=function(a){var b=this.gl,c=this.shader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,clipBounds:e(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.drawPick=function(a){var b=this.gl,c=this.pickShader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,pickId:this.pickId,clipBounds:e(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.update=function(a){var b,c;this.dirty=!0;var e=!!a.connectGaps;"dashScale"in a&&(this.dashScale=a.dashScale),"opacity"in a&&(this.opacity=+a.opacity);var f=a.position||a.positions;if(f){var g=a.color||a.colors||[0,0,0,1],h=a.lineWidth||1,i=[],j=[],k=[],l=0,o=0,p=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],q=!1;a:for(b=1;b<f.length;++b){var r=f[b-1],s=f[b];for(j.push(l),k.push(r.slice()),c=0;c<3;++c){if(isNaN(r[c])||isNaN(s[c])||!isFinite(r[c])||!isFinite(s[c])){if(!e&&i.length>0){for(var t=0;t<24;++t)i.push(i[i.length-12]);o+=2,q=!0}continue a}p[0][c]=Math.min(p[0][c],r[c],s[c]),p[1][c]=Math.max(p[1][c],r[c],s[c])}var u,v;Array.isArray(g[0])?(u=g[b-1],v=g[b]):u=v=g,3===u.length&&(u=[u[0],u[1],u[2],1]),3===v.length&&(v=[v[0],v[1],v[2],1]);var w;w=Array.isArray(h)?h[b-1]:h;var x=l;if(l+=d(r,s),q){for(c=0;c<2;++c)i.push(r[0],r[1],r[2],s[0],s[1],s[2],x,w,u[0],u[1],u[2],u[3]);o+=2,q=!1}i.push(r[0],r[1],r[2],s[0],s[1],s[2],x,w,u[0],u[1],u[2],u[3],r[0],r[1],r[2],s[0],s[1],s[2],x,-w,u[0],u[1],u[2],u[3],s[0],s[1],s[2],r[0],r[1],r[2],l,-w,v[0],v[1],v[2],v[3],s[0],s[1],s[2],r[0],r[1],r[2],l,w,v[0],v[1],v[2],v[3]),o+=4}if(this.buffer.update(i),j.push(l),k.push(f[f.length-1].slice()),this.bounds=p,this.vertexCount=o,this.points=k,this.arcLength=j,"dashes"in a){var y=a.dashes,z=y.slice();for(z.unshift(0),b=1;b<z.length;++b)z[b]=z[b-1]+z[b];var A=n(new Array(1024),[256,1,4]);for(b=0;b<256;++b){for(c=0;c<4;++c)A.set(b,0,c,0);1&m.le(z,z[z.length-1]*b/255)?A.set(b,0,0,0):A.set(b,0,0,255)}this.texture.setPixels(A)}}},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},s.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=l(a.value[0],a.value[1],a.value[2],0),c=m.le(this.arcLength,b);if(c<0)return null;if(c===this.arcLength.length-1)return new f(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),c);for(var d=this.points[c],e=this.points[Math.min(c+1,this.points.length-1)],g=(b-this.arcLength[c])/(this.arcLength[c+1]-this.arcLength[c]),h=1-g,i=[0,0,0],j=0;j<3;++j)i[j]=h*d[j]+g*e[j];var k=Math.min(g<.5?c:c+1,this.points.length-1);return new f(b,i,k,this.points[k])}},{"./lib/shaders":176,"binary-search-bounds":70,"gl-buffer":165,"gl-texture2d":255,"gl-vao":259,"glsl-read-float":266,ndarray:458}],178:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null}b.exports=d},{}],179:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null}b.exports=d},{}],180:[function(a,b,c){function d(a){var b=new Float32Array(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b}b.exports=d},{}],181:[function(a,b,c){function d(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],182:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15];return(b*g-c*f)*(l*q-m*p)-(b*h-d*f)*(k*q-m*o)+(b*i-e*f)*(k*p-l*o)+(c*h-d*g)*(j*q-m*n)-(c*i-e*g)*(j*p-l*n)+(d*i-e*h)*(j*o-k*n)}b.exports=d},{}],183:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],184:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}b.exports=d},{}],185:[function(a,b,c){function d(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],186:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null}b.exports=d},{}],187:[function(a,b,c){function d(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,p=b[0],q=b[1],r=b[2],s=d[0],t=d[1],u=d[2],v=c[0],w=c[1],x=c[2];return Math.abs(p-v)<1e-6&&Math.abs(q-w)<1e-6&&Math.abs(r-x)<1e-6?e(a):(l=p-v,m=q-w,n=r-x,o=1/Math.sqrt(l*l+m*m+n*n),l*=o,m*=o,n*=o,f=t*n-u*m,g=u*l-s*n,h=s*m-t*l,o=Math.sqrt(f*f+g*g+h*h),o?(o=1/o,f*=o,g*=o,h*=o):(f=0,g=0,h=0),i=m*h-n*g,j=n*f-l*h,k=l*g-m*f,o=Math.sqrt(i*i+j*j+k*k),o?(o=1/o,i*=o,j*=o,k*=o):(i=0,j=0,k=0),a[0]=f,a[1]=i,a[2]=l,a[3]=0,a[4]=g,a[5]=j,a[6]=m,a[7]=0,a[8]=h,a[9]=k,a[10]=n,a[11]=0,a[12]=-(f*p+g*q+h*r),a[13]=-(i*p+j*q+k*r),a[14]=-(l*p+m*q+n*r),a[15]=1,a)}var e=a("./identity");b.exports=d},{"./identity":185}],188:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a}b.exports=d},{}],189:[function(a,b,c){function d(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a}b.exports=d},{}],190:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=d[0],D=d[1],E=d[2],F=Math.sqrt(C*C+D*D+E*E);return Math.abs(F)<1e-6?null:(F=1/F,C*=F,D*=F,E*=F,e=Math.sin(c),f=Math.cos(c),g=1-f,h=b[0],i=b[1],j=b[2],k=b[3],l=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9],r=b[10],s=b[11],t=C*C*g+f,u=D*C*g+E*e,v=E*C*g-D*e,w=C*D*g-E*e,x=D*D*g+f,y=E*D*g+C*e,z=C*E*g+D*e,A=D*E*g-C*e,B=E*E*g+f,a[0]=h*t+l*u+p*v,a[1]=i*t+m*u+q*v,a[2]=j*t+n*u+r*v,a[3]=k*t+o*u+s*v,a[4]=h*w+l*x+p*y,a[5]=i*w+m*x+q*y,a[6]=j*w+n*x+r*y,a[7]=k*w+o*x+s*y,a[8]=h*z+l*A+p*B,a[9]=i*z+m*A+q*B,a[10]=j*z+n*A+r*B,a[11]=k*z+o*A+s*B,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)}b.exports=d},{}],191:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a}b.exports=d},{}],192:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a}b.exports=d},{}],193:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a}b.exports=d},{}],194:[function(a,b,c){function d(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}b.exports=d},{}],195:[function(a,b,c){function d(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a}b.exports=d},{}],196:[function(a,b,c){function d(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}b.exports=d},{}],197:[function(a,b,c){"use strict";function d(a,b){switch(b.length){case 0:break;case 1:a[0]=1/b[0];break;case 4:e(a,b);break;case 9:f(a,b);break;case 16:g(a,b);break;default:throw new Error("currently supports matrices up to 4x4")}return a}b.exports=d;var e=a("gl-mat2/invert"),f=a("gl-mat3/invert"),g=a("gl-mat4/invert")},{"gl-mat2/invert":178,"gl-mat3/invert":179,"gl-mat4/invert":186}],198:[function(a,b,c){c.glMatrix=a("./gl-matrix/common.js"),c.mat2=a("./gl-matrix/mat2.js"),c.mat2d=a("./gl-matrix/mat2d.js"),c.mat3=a("./gl-matrix/mat3.js"),c.mat4=a("./gl-matrix/mat4.js"),c.quat=a("./gl-matrix/quat.js"),c.vec2=a("./gl-matrix/vec2.js"),c.vec3=a("./gl-matrix/vec3.js"),c.vec4=a("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":199,"./gl-matrix/mat2.js":200,"./gl-matrix/mat2d.js":201,"./gl-matrix/mat3.js":202,"./gl-matrix/mat4.js":203,"./gl-matrix/quat.js":204,"./gl-matrix/vec2.js":205,"./gl-matrix/vec3.js":206,"./gl-matrix/vec4.js":207}],199:[function(a,b,c){var d={};d.EPSILON=1e-6,d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,d.RANDOM=Math.random,d.ENABLE_SIMD=!1,d.SIMD_AVAILABLE=d.ARRAY_TYPE===Float32Array&&"SIMD"in this,d.USE_SIMD=d.ENABLE_SIMD&&d.SIMD_AVAILABLE,d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};var e=Math.PI/180;d.toRadian=function(a){return a*e},d.equals=function(a,b){return Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},b.exports=d},{}],200:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},b.exports=e},{"./common.js":199}],201:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.fromValues=function(a,b,c,e,f,g){var h=new d.ARRAY_TYPE(6);return h[0]=a,h[1]=b,h[2]=c,h[3]=e,h[4]=f,h[5]=g,h},e.set=function(a,b,c,d,e,f,g){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=b[0],k=b[1],l=b[2],m=b[3],n=b[4],o=b[5];return Math.abs(c-j)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(e-k)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(g-m)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(h-n)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(i-o)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))},b.exports=e},{"./common.js":199}],202:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromValues=function(a,b,c,e,f,g,h,i,j){var k=new d.ARRAY_TYPE(9);return k[0]=a,k[1]=b,k[2]=c,k[3]=e,k[4]=f,k[5]=g,k[6]=h,k[7]=i,k[8]=j,k},e.set=function(a,b,c,d,e,f,g,h,i,j){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5],s=a[6],t=b[7],u=b[8];return Math.abs(c-m)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(e-n)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(f-o)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(o))&&Math.abs(g-p)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(h-q)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(i-r)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(j-s)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(s))&&Math.abs(k-t)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(t))&&Math.abs(l-u)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(u))},b.exports=e},{"./common.js":199}],203:[function(a,b,c){var d=a("./common.js"),e={scalar:{},SIMD:{}};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.fromValues=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=new d.ARRAY_TYPE(16);return r[0]=a,r[1]=b,r[2]=c,r[3]=e,r[4]=f,r[5]=g,r[6]=h,r[7]=i,r[8]=j,r[9]=k,r[10]=l,r[11]=m,r[12]=n,r[13]=o,r[14]=p,r[15]=q,r},e.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a[9]=k,a[10]=l,a[11]=m,a[12]=n,a[13]=o,a[14]=p,a[15]=q,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.scalar.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.SIMD.transpose=function(a,b){var c,d,e,f,g,h,i,j,k,l;return c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12),g=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),i=SIMD.Float32x4.shuffle(g,h,0,2,4,6),j=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,0,i),SIMD.Float32x4.store(a,4,j),g=SIMD.Float32x4.shuffle(c,d,2,3,6,7),h=SIMD.Float32x4.shuffle(e,f,2,3,6,7),k=SIMD.Float32x4.shuffle(g,h,0,2,4,6),l=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,8,k),SIMD.Float32x4.store(a,12,l),a},e.transpose=d.USE_SIMD?e.SIMD.transpose:e.scalar.transpose,e.scalar.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.SIMD.invert=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=SIMD.Float32x4.load(b,0),n=SIMD.Float32x4.load(b,4),o=SIMD.Float32x4.load(b,8),p=SIMD.Float32x4.load(b,12);return g=SIMD.Float32x4.shuffle(m,n,0,1,4,5),d=SIMD.Float32x4.shuffle(o,p,0,1,4,5),c=SIMD.Float32x4.shuffle(g,d,0,2,4,6),d=SIMD.Float32x4.shuffle(d,g,1,3,5,7),g=SIMD.Float32x4.shuffle(m,n,2,3,6,7),f=SIMD.Float32x4.shuffle(o,p,2,3,6,7),e=SIMD.Float32x4.shuffle(g,f,0,2,4,6),f=SIMD.Float32x4.shuffle(f,g,1,3,5,7),g=SIMD.Float32x4.mul(e,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.mul(d,g),i=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),h),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),g=SIMD.Float32x4.mul(d,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),h),k=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),g=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),h),j=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),j),j=SIMD.Float32x4.swizzle(j,2,3,0,1),g=SIMD.Float32x4.mul(c,d),g=SIMD.Float32x4.swizzle(g,1,0,3,2),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,g),k),g=SIMD.Float32x4.swizzle(g,2,3,0,1),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,g)),g=SIMD.Float32x4.mul(c,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),j),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),i),j=SIMD.Float32x4.sub(j,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.mul(c,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),i),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),k),l=SIMD.Float32x4.mul(c,h),
l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,2,3,0,1),l),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,1,0,3,2),l),g=SIMD.Float32x4.reciprocalApproximation(l),l=SIMD.Float32x4.sub(SIMD.Float32x4.add(g,g),SIMD.Float32x4.mul(l,SIMD.Float32x4.mul(g,g))),(l=SIMD.Float32x4.swizzle(l,0,0,0,0))?(SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(l,h)),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(l,i)),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(l,j)),SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(l,k)),a):null},e.invert=d.USE_SIMD?e.SIMD.invert:e.scalar.invert,e.scalar.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.SIMD.adjoint=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12);return k=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),g=SIMD.Float32x4.shuffle(k,h,0,2,4,6),h=SIMD.Float32x4.shuffle(h,k,1,3,5,7),k=SIMD.Float32x4.shuffle(c,d,2,3,6,7),j=SIMD.Float32x4.shuffle(e,f,2,3,6,7),i=SIMD.Float32x4.shuffle(k,j,0,2,4,6),j=SIMD.Float32x4.shuffle(j,k,1,3,5,7),k=SIMD.Float32x4.mul(i,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.mul(h,k),m=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,k),l),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),k=SIMD.Float32x4.mul(h,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),l),o=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),l),n=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),k=SIMD.Float32x4.mul(g,h),k=SIMD.Float32x4.swizzle(k,1,0,3,2),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,k),o),k=SIMD.Float32x4.swizzle(k,2,3,0,1),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(i,k)),k=SIMD.Float32x4.mul(g,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),n),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),m),n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.mul(g,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),m),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),o),SIMD.Float32x4.store(a,0,l),SIMD.Float32x4.store(a,4,m),SIMD.Float32x4.store(a,8,n),SIMD.Float32x4.store(a,12,o),a},e.adjoint=d.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint,e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15];return(b*g-c*f)*(l*q-m*p)-(b*h-d*f)*(k*q-m*o)+(b*i-e*f)*(k*p-l*o)+(c*h-d*g)*(j*q-m*n)-(c*i-e*g)*(j*p-l*n)+(d*i-e*h)*(j*o-k*n)},e.SIMD.multiply=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4.load(c,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),g))));SIMD.Float32x4.store(a,0,i);var j=SIMD.Float32x4.load(c,4),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,3,3,3,3),g))));SIMD.Float32x4.store(a,4,k);var l=SIMD.Float32x4.load(c,8),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),g))));SIMD.Float32x4.store(a,8,m);var n=SIMD.Float32x4.load(c,12),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,3,3,3,3),g))));return SIMD.Float32x4.store(a,12,o),a},e.scalar.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.multiply=d.USE_SIMD?e.SIMD.multiply:e.scalar.multiply,e.mul=e.multiply,e.scalar.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.SIMD.translate=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]),d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(h,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(h,1,1,1,1)),f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(h,2,2,2,2));var i=SIMD.Float32x4.add(d,SIMD.Float32x4.add(e,SIMD.Float32x4.add(f,g)));return SIMD.Float32x4.store(a,12,i),a},e.translate=d.USE_SIMD?e.SIMD.translate:e.scalar.translate,e.scalar.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.SIMD.scale=function(a,b,c){var d,e,f,g=SIMD.Float32x4(c[0],c[1],c[2],0);return d=SIMD.Float32x4.load(b,0),SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,0,0,0,0))),e=SIMD.Float32x4.load(b,4),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(g,1,1,1,1))),f=SIMD.Float32x4.load(b,8),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,2,2,2,2))),a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.scale=d.USE_SIMD?e.SIMD.scale:e.scalar.scale,e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.scalar.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.SIMD.rotateX=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateX=d.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX,e.scalar.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.SIMD.rotateY=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(g,e))),a},e.rotateY=d.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY,e.scalar.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.SIMD.rotateZ=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,4);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateZ=d.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ,e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a},e.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;return c>0?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d),a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-(g-h)*i*.5,a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a[9]=b[9]+c[9],a[10]=b[10]+c[10],a[11]=b[11]+c[11],a[12]=b[12]+c[12],a[13]=b[13]+c[13],a[14]=b[14]+c[14],a[15]=b[15]+c[15],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a[9]=b[9]-c[9],a[10]=b[10]-c[10],a[11]=b[11]-c[11],a[12]=b[12]-c[12],a[13]=b[13]-c[13],a[14]=b[14]-c[14],a[15]=b[15]-c[15],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a[9]=b[9]+c[9]*d,a[10]=b[10]+c[10]*d,a[11]=b[11]+c[11]*d,a[12]=b[12]+c[12]*d,a[13]=b[13]+c[13]*d,a[14]=b[14]+c[14]*d,a[15]=b[15]+c[15]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],x=b[4],y=b[5],z=b[6],A=b[7],B=b[8],C=b[9],D=b[10],E=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return Math.abs(c-t)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(e-u)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-v)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(g-w)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(h-x)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(i-y)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(j-z)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(z))&&Math.abs(k-A)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(l-B)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(m-C)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(n-D)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-E)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(p-F)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(q-G)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(r-H)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(H))&&Math.abs(s-I)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))},b.exports=e},{"./common.js":199}],204:[function(a,b,c){var d=a("./common.js"),e=a("./mat3.js"),f=a("./vec3.js"),g=a("./vec4.js"),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return i<-.999999?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c*=.5;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);return 0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0),c},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,f<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},h.exactEquals=g.exactEquals,h.equals=g.equals,b.exports=h},{"./common.js":199,"./mat3.js":202,"./vec3.js":206,"./vec4.js":207}],205:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},e.equals=function(a,b){var c=a[0],e=a[1],f=b[0],g=b[1];return Math.abs(c-f)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))},b.exports=e},{"./common.js":199}],206:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))},b.exports=e},{"./common.js":199}],207:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],
a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a[3]=Math.ceil(b[3]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a[3]=Math.floor(b[3]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a[3]=Math.round(b[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},b.exports=e},{"./common.js":199}],208:[function(a,b,c){"use strict";function d(a,b){for(var c=[0,0,0,0],d=0;d<4;++d)for(var e=0;e<4;++e)c[e]+=a[4*d+e]*b[d];return c}function e(a,b,c,e,f){for(var g=d(e,d(c,d(b,[a[0],a[1],a[2],1]))),h=0;h<3;++h)g[h]/=g[3];return[.5*f[0]*(1+g[0]),.5*f[1]*(1-g[1])]}function f(a,b){if(2===a.length){for(var c=0,d=0,e=0;e<2;++e)c+=Math.pow(b[e]-a[0][e],2),d+=Math.pow(b[e]-a[1][e],2);return c=Math.sqrt(c),d=Math.sqrt(d),c+d<1e-6?[1,0]:[d/(c+d),c/(d+c)]}if(3===a.length){var f=[0,0];return j(a[0],a[1],a[2],b,f),i(a,f)}return[]}function g(a,b){for(var c=[0,0,0],d=0;d<a.length;++d)for(var e=a[d],f=b[d],g=0;g<3;++g)c[g]+=f*e[g];return c}function h(a,b,c,d,h,i){if(1===a.length)return[0,a[0].slice()];for(var j=new Array(a.length),k=0;k<a.length;++k)j[k]=e(a[k],c,d,h,i);for(var l=0,m=1/0,k=0;k<j.length;++k){for(var n=0,o=0;o<2;++o)n+=Math.pow(j[k][o]-b[o],2);n<m&&(m=n,l=k)}for(var p=f(j,b),q=0,k=0;k<3;++k){if(p[k]<-.001||p[k]>1.0001)return null;q+=p[k]}return Math.abs(q-1)>.001?null:[l,g(a,p),p]}var i=a("barycentric"),j=a("polytope-closest-point/lib/closest_point_2d.js");b.exports=h},{barycentric:53,"polytope-closest-point/lib/closest_point_2d.js":487}],209:[function(a,b,c){var d="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}";c.meshShader={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.wireShader={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.pointShader={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},c.pickShader={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},c.pointPickShader={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},c.contourShader={vertex:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",fragment:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n",attributes:[{name:"position",type:"vec3"}]}},{}],210:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){this.gl=a,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=c,this.lineShader=d,this.pointShader=e,this.pickShader=f,this.pointPickShader=g,this.contourShader=h,this.trianglePositions=i,this.triangleColors=k,this.triangleNormals=m,this.triangleUVs=l,this.triangleIds=j,this.triangleVAO=n,this.triangleCount=0,this.lineWidth=1,this.edgePositions=o,this.edgeColors=q,this.edgeUVs=r,this.edgeIds=p,this.edgeVAO=s,this.edgeCount=0,this.pointPositions=t,this.pointColors=v,this.pointUVs=w,this.pointSizes=x,this.pointIds=u,this.pointVAO=y,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=z,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=H,this._view=H,this._projection=H,this._resolution=[1,1]}function e(a){for(var b=w({colormap:a,nshades:256,format:"rgba"}),c=new Uint8Array(1024),d=0;d<256;++d){for(var e=b[d],f=0;f<3;++f)c[4*d+f]=e[f];c[4*d+3]=255*e[3]}return v(c,[256,256,4],[4,0,1])}function f(a,b,c){for(var d=new Array(b),e=0;e<b;++e)d[e]=0;for(var f=a.length,e=0;e<f;++e)for(var g=a[e],h=0;h<g.length;++h)d[g[h]]=c[e];return d}function g(a){for(var b=a.length,c=new Array(b),d=0;d<b;++d)c[d]=a[d][2];return c}function h(a){var b=o(a,B.vertex,B.fragment);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.normal.location=4,b}function i(a){var b=o(a,C.vertex,C.fragment);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b}function j(a){var b=o(a,D.vertex,D.fragment);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.pointSize.location=4,b}function k(a){var b=o(a,E.vertex,E.fragment);return b.attributes.position.location=0,b.attributes.id.location=1,b}function l(a){var b=o(a,F.vertex,F.fragment);return b.attributes.position.location=0,b.attributes.id.location=1,b.attributes.pointSize.location=4,b}function m(a){var b=o(a,G.vertex,G.fragment);return b.attributes.position.location=0,b}function n(a,b){1===arguments.length&&(b=a,a=b.gl);var c=h(a),e=i(a),f=j(a),g=k(a),n=l(a),o=m(a),s=r(a,v(new Uint8Array([255,255,255,255]),[1,1,4]));s.generateMipmap(),s.minFilter=a.LINEAR_MIPMAP_LINEAR,s.magFilter=a.LINEAR;var t=p(a),u=p(a),w=p(a),x=p(a),y=p(a),z=q(a,[{buffer:t,type:a.FLOAT,size:3},{buffer:y,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:a.FLOAT,size:4},{buffer:w,type:a.FLOAT,size:2},{buffer:x,type:a.FLOAT,size:3}]),A=p(a),B=p(a),C=p(a),D=p(a),E=q(a,[{buffer:A,type:a.FLOAT,size:3},{buffer:D,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:a.FLOAT,size:4},{buffer:C,type:a.FLOAT,size:2}]),F=p(a),G=p(a),H=p(a),I=p(a),J=p(a),K=q(a,[{buffer:F,type:a.FLOAT,size:3},{buffer:J,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:G,type:a.FLOAT,size:4},{buffer:H,type:a.FLOAT,size:2},{buffer:I,type:a.FLOAT,size:1}]),L=p(a),M=q(a,[{buffer:L,type:a.FLOAT,size:3}]),N=new d(a,s,c,e,f,g,n,o,t,y,u,w,x,z,A,D,B,C,E,F,J,G,H,I,K,L,M);return N.update(b),N}var o=a("gl-shader"),p=a("gl-buffer"),q=a("gl-vao"),r=a("gl-texture2d"),s=a("normals"),t=a("gl-mat4/multiply"),u=a("gl-mat4/invert"),v=a("ndarray"),w=a("colormap"),x=a("simplicial-complex-contour"),y=a("typedarray-pool"),z=a("./lib/shaders"),A=a("./lib/closest-point"),B=z.meshShader,C=z.wireShader,D=z.pointShader,E=z.pickShader,F=z.pointPickShader,G=z.contourShader,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=d.prototype;I.isOpaque=function(){return this.opacity>=1},I.isTransparent=function(){return this.opacity<1},I.pickSlots=1,I.setPickBase=function(a){this.pickId=a},I.highlight=function(a){if(!a||!this.contourEnable)return void(this.contourCount=0);for(var b=x(this.cells,this.intensity,a.intensity),c=b.cells,d=b.vertexIds,e=b.vertexWeights,f=c.length,g=y.mallocFloat32(6*f),h=0,i=0;i<f;++i)for(var j=c[i],k=0;k<2;++k){var l=j[0];2===j.length&&(l=j[k]);for(var m=d[l][0],n=d[l][1],o=e[l],p=1-o,q=this.positions[m],r=this.positions[n],s=0;s<3;++s)g[h++]=o*q[s]+p*r[s]}this.contourCount=h/3|0,this.contourPositions.update(g.subarray(0,h)),y.free(g)},I.update=function(a){a=a||{};var b=this.gl;this.dirty=!0,"contourEnable"in a&&(this.contourEnable=a.contourEnable),"contourColor"in a&&(this.contourColor=a.contourColor),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"lightPosition"in a&&(this.lightPosition=a.lightPosition),"opacity"in a&&(this.opacity=a.opacity),"ambient"in a&&(this.ambientLight=a.ambient),"diffuse"in a&&(this.diffuseLight=a.diffuse),"specular"in a&&(this.specularLight=a.specular),"roughness"in a&&(this.roughness=a.roughness),"fresnel"in a&&(this.fresnel=a.fresnel),a.texture?(this.texture.dispose(),this.texture=r(b,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(e(a.colormap)),this.texture.generateMipmap());var c=a.cells,d=a.positions;if(d&&c){var h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=[],q=[],t=[],u=[],v=[],w=[];this.cells=c,this.positions=d;var x=a.vertexNormals,y=a.cellNormals,z=void 0===a.vertexNormalsEpsilon?1e-6:a.vertexNormalsEpsilon,A=void 0===a.faceNormalsEpsilon?1e-6:a.faceNormalsEpsilon;a.useFacetNormals&&!y&&(y=s.faceNormals(c,d,A)),y||x||(x=s.vertexNormals(c,d,z));var B=a.vertexColors,C=a.cellColors,D=a.meshColor||[1,1,1,1],E=a.vertexUVs,F=a.vertexIntensity,G=a.cellUVs,H=a.cellIntensity,I=1/0,J=-1/0;if(!E&&!G)if(F)if(a.vertexIntensityBounds)I=+a.vertexIntensityBounds[0],J=+a.vertexIntensityBounds[1];else for(var K=0;K<F.length;++K){var L=F[K];I=Math.min(I,L),J=Math.max(J,L)}else if(H)for(var K=0;K<H.length;++K){var L=H[K];I=Math.min(I,L),J=Math.max(J,L)}else for(var K=0;K<d.length;++K){var L=d[K][2];I=Math.min(I,L),J=Math.max(J,L)}this.intensity=F||(H?f(c,d.length,H):g(d));var M=a.pointSizes,N=a.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var K=0;K<d.length;++K)for(var O=d[K],P=0;P<3;++P)!isNaN(O[P])&&isFinite(O[P])&&(this.bounds[0][P]=Math.min(this.bounds[0][P],O[P]),this.bounds[1][P]=Math.max(this.bounds[1][P],O[P]));var Q=0,R=0,S=0;a:for(var K=0;K<c.length;++K){var T=c[K];switch(T.length){case 1:for(var U=T[0],O=d[U],P=0;P<3;++P)if(isNaN(O[P])||!isFinite(O[P]))continue a;q.push(O[0],O[1],O[2]);var V;V=B?B[U]:C?C[K]:D,3===V.length?t.push(V[0],V[1],V[2],1):t.push(V[0],V[1],V[2],V[3]);var W;W=E?E[U]:F?[(F[U]-I)/(J-I),0]:G?G[K]:H?[(H[K]-I)/(J-I),0]:[(O[2]-I)/(J-I),0],u.push(W[0],W[1]),M?v.push(M[U]):v.push(N),w.push(K),S+=1;break;case 2:for(var P=0;P<2;++P)for(var U=T[P],O=d[U],X=0;X<3;++X)if(isNaN(O[X])||!isFinite(O[X]))continue a;for(var P=0;P<2;++P){var U=T[P],O=d[U];m.push(O[0],O[1],O[2]);var V;V=B?B[U]:C?C[K]:D,3===V.length?n.push(V[0],V[1],V[2],1):n.push(V[0],V[1],V[2],V[3]);var W;W=E?E[U]:F?[(F[U]-I)/(J-I),0]:G?G[K]:H?[(H[K]-I)/(J-I),0]:[(O[2]-I)/(J-I),0],o.push(W[0],W[1]),p.push(K)}R+=1;break;case 3:for(var P=0;P<3;++P)for(var U=T[P],O=d[U],X=0;X<3;++X)if(isNaN(O[X])||!isFinite(O[X]))continue a;for(var P=0;P<3;++P){var U=T[P],O=d[U];h.push(O[0],O[1],O[2]);var V;V=B?B[U]:C?C[K]:D,3===V.length?i.push(V[0],V[1],V[2],1):i.push(V[0],V[1],V[2],V[3]);var W;W=E?E[U]:F?[(F[U]-I)/(J-I),0]:G?G[K]:H?[(H[K]-I)/(J-I),0]:[(O[2]-I)/(J-I),0],k.push(W[0],W[1]);var Y;Y=x?x[U]:y[K],j.push(Y[0],Y[1],Y[2]),l.push(K)}Q+=1}}this.pointCount=S,this.edgeCount=R,this.triangleCount=Q,this.pointPositions.update(q),this.pointColors.update(t),this.pointUVs.update(u),this.pointSizes.update(v),this.pointIds.update(new Uint32Array(w)),this.edgePositions.update(m),this.edgeColors.update(n),this.edgeUVs.update(o),this.edgeIds.update(new Uint32Array(p)),this.trianglePositions.update(h),this.triangleColors.update(i),this.triangleUVs.update(k),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(l))}},I.drawTransparent=I.draw=function(a){a=a||{};for(var b=this.gl,c=a.model||H,d=a.view||H,e=a.projection||H,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;g<3;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);var h={model:c,view:d,projection:e,clipBounds:f,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var i=new Array(16);t(i,h.view,h.model),t(i,h.projection,i),u(i,i);for(var g=0;g<3;++g)h.eyePosition[g]=i[12+g]/i[15];for(var j=i[15],g=0;g<3;++g)j+=this.lightPosition[g]*i[4*g+3];for(var g=0;g<3;++g){for(var k=i[12+g],l=0;l<3;++l)k+=i[4*l+g]*this.lightPosition[l];h.lightPosition[g]=k/j}if(this.triangleCount>0){var m=this.triShader;m.bind(),m.uniforms=h,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var m=this.lineShader;m.bind(),m.uniforms=h,this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var m=this.pointShader;m.bind(),m.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var m=this.contourShader;m.bind(),m.uniforms=h,this.contourVAO.bind(),b.drawArrays(b.LINES,0,this.contourCount),this.contourVAO.unbind()}},I.drawPick=function(a){a=a||{};for(var b=this.gl,c=a.model||H,d=a.view||H,e=a.projection||H,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;g<3;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c),this._view=[].slice.call(d),this._projection=[].slice.call(e),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var h={model:c,view:d,projection:e,clipBounds:f,pickId:this.pickId/255},i=this.pickShader;if(i.bind(),i.uniforms=h,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var i=this.pointPickShader;i.bind(),i.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}},I.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;for(var b=a.value[0]+256*a.value[1]+65536*a.value[2],c=this.cells[b],d=this.positions,e=new Array(c.length),f=0;f<c.length;++f)e[f]=d[c[f]];var g=A(e,[a.coord[0],this._resolution[1]-a.coord[1]],this._model,this._view,this._projection,this._resolution);if(!g)return null;for(var h=g[2],i=0,f=0;f<c.length;++f)i+=h[f]*this.intensity[c[f]];return{position:g[1],index:c[g[0]],cell:c,cellId:b,intensity:i,dataCoordinate:this.positions[c[g[0]]]}},I.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=n},{"./lib/closest-point":208,"./lib/shaders":209,colormap:105,"gl-buffer":165,"gl-mat4/invert":186,"gl-mat4/multiply":188,"gl-shader":243,"gl-texture2d":255,"gl-vao":259,ndarray:458,normals:461,"simplicial-complex-contour":524,"typedarray-pool":554}],211:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl;return new d(a,f(b,[0,0,0,1,1,0,1,1]),g(b,h.boxVert,h.lineFrag))}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawBox=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g){var h=this.plot,i=this.shader,j=h.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,i.uniforms.lo=a,i.uniforms.hi=b,i.uniforms.color=g,j.drawArrays(j.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":214,"gl-buffer":165,"gl-shader":217}],212:[function(a,b,c){"use strict";function d(a,b,c,d){this.plot=a,this.vbo=b,this.shader=c,this.tickShader=d,this.ticks=[[],[]]}function e(a,b){return a-b}function f(a){var b=a.gl;return new d(a,g(b),h(b,j.gridVert,j.gridFrag),h(b,j.tickVert,j.gridFrag))}b.exports=f;var g=a("gl-buffer"),h=a("gl-shader"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.draw=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){for(var d=this.plot,e=this.vbo,f=this.shader,g=this.ticks,h=d.gl,i=d._tickBounds,j=d.dataBox,k=d.viewBox,l=d.gridLineWidth,m=d.gridLineColor,n=d.gridLineEnable,o=d.pixelRatio,p=0;p<2;++p){var q=i[p],r=i[p+2],s=r-q,t=.5*(j[p+2]+j[p]),u=j[p+2]-j[p];b[p]=2*s/u,a[p]=2*(q-t)/u}f.bind(),e.bind(),f.attributes.dataCoord.pointer(),f.uniforms.dataShift=a,f.uniforms.dataScale=b;for(var v=0,p=0;p<2;++p){c[0]=c[1]=0,c[p]=1,f.uniforms.dataAxis=c,f.uniforms.lineWidth=l[p]/(k[p+2]-k[p])*o,f.uniforms.color=m[p];var w=6*g[p].length;n[p]&&w&&h.drawArrays(h.TRIANGLES,v,w),v+=w}}}(),k.drawTickMarks=function(){var a=[0,0],b=[0,0],c=[1,0],d=[0,1],f=[0,0],g=[0,0];return function(){for(var h=this.plot,j=this.vbo,k=this.tickShader,l=this.ticks,m=h.gl,n=h._tickBounds,o=h.dataBox,p=h.viewBox,q=h.pixelRatio,r=h.screenBox,s=r[2]-r[0],t=r[3]-r[1],u=p[2]-p[0],v=p[3]-p[1],w=0;w<2;++w){var x=n[w],y=n[w+2],z=y-x,A=.5*(o[w+2]+o[w]),B=o[w+2]-o[w];b[w]=2*z/B,a[w]=2*(x-A)/B}b[0]*=u/s,a[0]*=u/s,b[1]*=v/t,a[1]*=v/t,k.bind(),j.bind(),k.attributes.dataCoord.pointer();var C=k.uniforms;C.dataShift=a,C.dataScale=b;var D=h.tickMarkLength,E=h.tickMarkWidth,F=h.tickMarkColor,G=6*l[0].length,H=Math.min(i.ge(l[0],(o[0]-n[0])/(n[2]-n[0]),e),l[0].length),I=Math.min(i.gt(l[0],(o[2]-n[0])/(n[2]-n[0]),e),l[0].length),J=0+6*H,K=6*Math.max(0,I-H),L=Math.min(i.ge(l[1],(o[1]-n[1])/(n[3]-n[1]),e),l[1].length),M=Math.min(i.gt(l[1],(o[3]-n[1])/(n[3]-n[1]),e),l[1].length),N=G+6*L,O=6*Math.max(0,M-L);f[0]=2*(p[0]-D[1])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[1]*q/s,g[1]=E[1]*q/t,O&&(C.color=F[1],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,N,O)),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[1]-D[0])/t-1,g[0]=E[0]*q/s,g[1]=D[0]*q/t,K&&(C.color=F[0],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,J,K)),f[0]=2*(p[2]+D[3])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[3]*q/s,g[1]=E[3]*q/t,O&&(C.color=F[3],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,N,O)),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[3]+D[2])/t-1,g[0]=E[2]*q/s,g[1]=D[2]*q/t,K&&(C.color=F[2],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,J,K))}}(),k.update=function(){var a=[1,1,-1,-1,1,-1],b=[1,-1,1,1,-1,-1];return function(c){for(var d=c.ticks,e=c.bounds,f=new Float32Array(18*(d[0].length+d[1].length)),g=(this.plot.zeroLineEnable,0),h=[[],[]],i=0;i<2;++i)for(var j=h[i],k=d[i],l=e[i],m=e[i+2],n=0;n<k.length;++n){var o=(k[n].x-l)/(m-l);j.push(o);for(var p=0;p<6;++p)f[g++]=o,f[g++]=a[p],f[g++]=b[p]}this.ticks=h,this.vbo.update(f)}}(),k.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":214,"binary-search-bounds":216,"gl-buffer":165,"gl-shader":217}],213:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl;return new d(a,f(b,[-1,-1,-1,1,1,-1,1,1]),g(b,h.lineVert,h.lineFrag))}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawLine=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g,h){var i=this.plot,j=this.shader,k=i.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,j.uniforms.start=a,j.uniforms.end=b,j.uniforms.width=g*i.pixelRatio,j.uniforms.color=h,k.drawArrays(k.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":214,"gl-buffer":165,"gl-shader":217}],214:[function(a,b,c){"use strict";var d="precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n";b.exports={lineVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",lineFrag:d,textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",textFrag:d,gridVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",gridFrag:d,boxVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},{}],215:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function e(a){var b=a.gl;return new d(a,f(b),g(b,j.textVert,j.textFrag))}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("text-cache"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.drawTicks=function(){var a=[0,0],b=[0,0],c=[0,0];return function(d){var e=this.plot,f=this.shader,g=this.tickX[d],h=this.tickOffset[d],j=e.gl,k=e.viewBox,l=e.dataBox,m=e.screenBox,n=e.pixelRatio,o=e.tickEnable,p=e.tickPad,q=e.tickColor,r=e.tickAngle,s=e.labelEnable,t=e.labelPad,u=e.labelColor,v=e.labelAngle,w=this.labelOffset[d],x=this.labelCount[d],y=i.lt(g,l[d]),z=i.le(g,l[d+2]);a[0]=a[1]=0,a[d]=1,b[d]=(k[2+d]+k[d])/(m[2+d]-m[d])-1;var A=2/m[2+(1^d)]-m[1^d];b[1^d]=A*k[1^d]-1,o[d]&&(b[1^d]-=A*n*p[d],y<z&&h[z]>h[y]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d],f.uniforms.angle=r[d],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d]&&x&&(b[1^d]-=A*n*t[d],f.uniforms.dataAxis=c,f.uniforms.screenOffset=b,f.uniforms.color=u[d],f.uniforms.angle=v[d],j.drawArrays(j.TRIANGLES,w,x)),b[1^d]=A*k[2+(1^d)]-1,o[d+2]&&(b[1^d]+=A*n*p[d+2],y<z&&h[z]>h[y]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d+2],f.uniforms.angle=r[d+2],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d+2]&&x&&(b[1^d]+=A*n*t[d+2],f.uniforms.dataAxis=c,
f.uniforms.screenOffset=b,f.uniforms.color=u[d+2],f.uniforms.angle=v[d+2],j.drawArrays(j.TRIANGLES,w,x))}}(),k.drawTitle=function(){var a=[0,0],b=[0,0];return function(){var c=this.plot,d=this.shader,e=c.gl,f=c.screenBox,g=c.titleCenter,h=c.titleAngle,i=c.titleColor,j=c.pixelRatio;if(this.titleCount){for(var k=0;k<2;++k)b[k]=2*(g[k]*j-f[k])/(f[2+k]-f[k])-1;d.bind(),d.uniforms.dataAxis=a,d.uniforms.screenOffset=b,d.uniforms.angle=h,d.uniforms.color=i,e.drawArrays(e.TRIANGLES,this.titleOffset,this.titleCount)}}}(),k.bind=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){var d=this.plot,e=this.shader,f=d._tickBounds,g=d.dataBox,h=d.screenBox,i=d.viewBox;e.bind();for(var j=0;j<2;++j){var k=f[j],l=f[j+2],m=l-k,n=.5*(g[j+2]+g[j]),o=g[j+2]-g[j],p=i[j],q=i[j+2],r=q-p,s=h[j],t=h[j+2],u=t-s;b[j]=2*m/o*r/u,a[j]=2*(k-n)/o*r/u}c[1]=2*d.pixelRatio/(h[3]-h[1]),c[0]=c[1]*(h[3]-h[1])/(h[2]-h[0]),e.uniforms.dataScale=b,e.uniforms.dataShift=a,e.uniforms.textScale=c,this.vbo.bind(),e.attributes.textCoordinate.pointer()}}(),k.update=function(a){var b,c,d,e,f,g=[],i=a.ticks,j=a.bounds;for(f=0;f<2;++f){var k=[Math.floor(g.length/3)],l=[-1/0],m=i[f];for(b=0;b<m.length;++b){var n=m[b],o=n.x,p=n.text,q=n.font||"sans-serif";e=n.fontSize||12;for(var r=1/(j[f+2]-j[f]),s=j[f],t=p.split("\n"),u=0;u<t.length;u++)for(d=h(q,t[u]).data,c=0;c<d.length;c+=2)g.push(d[c]*e,-d[c+1]*e-u*e*1.2,(o-s)*r);k.push(Math.floor(g.length/3)),l.push(o)}this.tickOffset[f]=k,this.tickX[f]=l}for(f=0;f<2;++f){for(this.labelOffset[f]=Math.floor(g.length/3),d=h(a.labelFont[f],a.labels[f],{textAlign:"center"}).data,e=a.labelSize[f],b=0;b<d.length;b+=2)g.push(d[b]*e,-d[b+1]*e,0);this.labelCount[f]=Math.floor(g.length/3)-this.labelOffset[f]}for(this.titleOffset=Math.floor(g.length/3),d=h(a.titleFont,a.title).data,e=a.titleSize,b=0;b<d.length;b+=2)g.push(d[b]*e,-d[b+1]*e,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},k.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":214,"binary-search-bounds":216,"gl-buffer":165,"gl-shader":217,"text-cache":545}],216:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{dup:89}],217:[function(a,b,c){"use strict";function d(a){this.gl=a,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function e(a,b){return a.name<b.name?-1:1}function f(a,b,c,e,f){var g=new d(a);return g.update(b,c,e,f),g}var g=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),i=a("./lib/reflect"),j=a("./lib/shader-cache"),k=a("./lib/runtime-reflect"),l=a("./lib/GLError"),m=d.prototype;m.bind=function(){this.program||this._relink();var a,b=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),c=this.gl.lastAttribCount;if(b>c)for(a=c;a<b;a++)this.gl.enableVertexAttribArray(a);else if(c>b)for(a=b;a<c;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=b,this.gl.useProgram(this.program)},m.dispose=function(){for(var a=this.gl.lastAttribCount,b=0;b<a;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},m.update=function(a,b,c,d){function f(){n.program=j.program(o,n._vref,n._fref,v,w);for(var a=0;a<c.length;++a)C[a]=o.getUniformLocation(n.program,c[a].name)}if(!b||1===arguments.length){var m=a;a=m.vertex,b=m.fragment,c=m.uniforms,d=m.attributes}var n=this,o=n.gl,p=n._vref;n._vref=j.shader(o,o.VERTEX_SHADER,a),p&&p.dispose(),n.vertShader=n._vref.shader;var q=this._fref;if(n._fref=j.shader(o,o.FRAGMENT_SHADER,b),q&&q.dispose(),n.fragShader=n._fref.shader,!c||!d){var r=o.createProgram();if(o.attachShader(r,n.fragShader),o.attachShader(r,n.vertShader),o.linkProgram(r),!o.getProgramParameter(r,o.LINK_STATUS)){var s=o.getProgramInfoLog(r);throw new l(s,"Error linking program:"+s)}c=c||k.uniforms(o,r),d=d||k.attributes(o,r),o.deleteProgram(r)}d=d.slice(),d.sort(e);var t,u=[],v=[],w=[];for(t=0;t<d.length;++t){var x=d[t];if(x.type.indexOf("mat")>=0){for(var y=0|x.type.charAt(x.type.length-1),z=new Array(y),A=0;A<y;++A)z[A]=w.length,v.push(x.name+"["+A+"]"),"number"==typeof x.location?w.push(x.location+A):Array.isArray(x.location)&&x.location.length===y&&"number"==typeof x.location[A]?w.push(0|x.location[A]):w.push(-1);u.push({name:x.name,type:x.type,locations:z})}else u.push({name:x.name,type:x.type,locations:[w.length]}),v.push(x.name),"number"==typeof x.location?w.push(0|x.location):w.push(-1)}var B=0;for(t=0;t<w.length;++t)if(w[t]<0){for(;w.indexOf(B)>=0;)B+=1;w[t]=B}var C=new Array(c.length);f(),n._relink=f,n.types={uniforms:i(c),attributes:i(d)},n.attributes=h(o,n,u,w),Object.defineProperty(n,"uniforms",g(o,n,c,C))},b.exports=f},{"./lib/GLError":218,"./lib/create-attributes":219,"./lib/create-uniforms":220,"./lib/reflect":221,"./lib/runtime-reflect":222,"./lib/shader-cache":223}],218:[function(a,b,c){function d(a,b,c){this.shortMessage=b||"",this.longMessage=c||"",this.rawError=a||"",this.message="gl-shader: "+(b||a||"")+(c?"\n"+c:""),this.stack=(new Error).stack}d.prototype=new Error,d.prototype.name="GLError",d.prototype.constructor=d,b.exports=d},{}],219:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._gl=a,this._wrapper=b,this._index=c,this._locations=d,this._dimension=e,this._constFunc=f}function e(a,b,c,e,f,g,h){for(var i=["gl","v"],j=[],k=0;k<f;++k)i.push("x"+k),j.push("x"+k);i.push("if(x0.length===void 0){return gl.vertexAttrib"+f+"f(v,"+j.join()+")}else{return gl.vertexAttrib"+f+"fv(v,x0)}");var l=Function.apply(null,i),m=new d(a,b,c,e,f,l);Object.defineProperty(g,h,{set:function(b){return a.disableVertexAttribArray(e[c]),l(a,e[c],b),b},get:function(){return m},enumerable:!0})}function f(a,b,c,d,f,g,h){for(var i=new Array(f),j=new Array(f),k=0;k<f;++k)e(a,b,c[k],d,f,i,k),j[k]=i[k];Object.defineProperty(i,"location",{set:function(a){if(Array.isArray(a))for(var b=0;b<f;++b)j[b].location=a[b];else for(var b=0;b<f;++b)j[b].location=a+b;return a},get:function(){for(var a=new Array(f),b=0;b<f;++b)a[b]=d[c[b]];return a},enumerable:!0}),i.pointer=function(b,e,g,h){b=b||a.FLOAT,e=!!e,g=g||f*f,h=h||0;for(var i=0;i<f;++i){var j=d[c[i]];a.vertexAttribPointer(j,f,b,e,g,h+i*f),a.enableVertexAttribArray(j)}};var l=new Array(f),m=a["vertexAttrib"+f+"fv"];Object.defineProperty(g,h,{set:function(b){for(var e=0;e<f;++e){var g=d[c[e]];if(a.disableVertexAttribArray(g),Array.isArray(b[0]))m.call(a,g,b[e]);else{for(var h=0;h<f;++h)l[h]=b[f*e+h];m.call(a,g,l)}}return b},get:function(){return i},enumerable:!0})}function g(a,b,c,d){for(var g={},i=0,j=c.length;i<j;++i){var k=c[i],l=k.name,m=k.type,n=k.locations;switch(m){case"bool":case"int":case"float":e(a,b,n[0],d,1,g,l);break;default:if(m.indexOf("vec")>=0){var o=m.charCodeAt(m.length-1)-48;if(o<2||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);e(a,b,n[0],d,o,g,l)}else{if(!(m.indexOf("mat")>=0))throw new h("","Unknown data type for attribute "+l+": "+m);var o=m.charCodeAt(m.length-1)-48;if(o<2||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);f(a,b,n,d,o,g,l)}}}return g}b.exports=g;var h=a("./GLError"),i=d.prototype;i.pointer=function(a,b,c,d){var e=this,f=e._gl,g=e._locations[e._index];f.vertexAttribPointer(g,e._dimension,a||f.FLOAT,!!b,c||0,d||0),f.enableVertexAttribArray(g)},i.set=function(a,b,c,d){return this._constFunc(this._locations[this._index],a,b,c,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(a){return a!==this._locations[this._index]&&(this._locations[this._index]=0|a,this._wrapper.program=null),0|a}})},{"./GLError":218}],220:[function(a,b,c){"use strict";function d(a){return new Function("y","return function(){return y}")(a)}function e(a,b){for(var c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function f(a,b,c,f){function i(c){return new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+c+"])}")(a,b,f)}function j(a,b,c){switch(c){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+b+"],obj"+a+")";case"float":return"gl.uniform1f(locations["+b+"],obj"+a+")";default:var d=c.indexOf("vec");if(!(0<=d&&d<=1&&c.length===4+d)){if(0===c.indexOf("mat")&&4===c.length){var e=c.charCodeAt(c.length-1)-48;if(e<2||e>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+e+"fv(locations["+b+"],false,obj"+a+")"}throw new h("","Unknown uniform data type for "+name+": "+c)}var e=c.charCodeAt(c.length-1)-48;if(e<2||e>4)throw new h("","Invalid data type");switch(c.charAt(0)){case"b":case"i":return"gl.uniform"+e+"iv(locations["+b+"],obj"+a+")";case"v":return"gl.uniform"+e+"fv(locations["+b+"],obj"+a+")";default:throw new h("","Unrecognized data type for vector "+name+": "+c)}}}function k(a,b){if("object"!=typeof b)return[[a,b]];var c=[];for(var d in b){var e=b[d],f=a;parseInt(d)+""===d?f+="["+d+"]":f+="."+d,"object"==typeof e?c.push.apply(c,k(f,e)):c.push([f,e])}return c}function l(b){for(var d=["return function updateProperty(obj){"],e=k("",b),g=0;g<e.length;++g){var h=e[g],i=h[0],l=h[1];f[l]&&d.push(j(i,l,c[l].type))}return d.push("return obj}"),new Function("gl","locations",d.join("\n"))(a,f)}function m(a){switch(a){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var b=a.indexOf("vec");if(0<=b&&b<=1&&a.length===4+b){var c=a.charCodeAt(a.length-1)-48;if(c<2||c>4)throw new h("","Invalid data type");return"b"===a.charAt(0)?e(c,!1):e(c,0)}if(0===a.indexOf("mat")&&4===a.length){var c=a.charCodeAt(a.length-1)-48;if(c<2||c>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+a);return e(c*c,0)}throw new h("","Unknown uniform data type for "+name+": "+a)}}function n(a,b,e){if("object"==typeof e){var g=o(e);Object.defineProperty(a,b,{get:d(g),set:l(e),enumerable:!0,configurable:!1})}else f[e]?Object.defineProperty(a,b,{get:i(e),set:l(e),enumerable:!0,configurable:!1}):a[b]=m(c[e].type)}function o(a){var b;if(Array.isArray(a)){b=new Array(a.length);for(var c=0;c<a.length;++c)n(b,c,a[c])}else{b={};for(var d in a)n(b,d,a[d])}return b}var p=g(c,!0);return{get:d(o(p)),set:l(p),enumerable:!0,configurable:!0}}var g=a("./reflect"),h=a("./GLError");b.exports=f},{"./GLError":218,"./reflect":221}],221:[function(a,b,c){"use strict";function d(a,b){for(var c={},d=0;d<a.length;++d)for(var e=a[d].name,f=e.split("."),g=c,h=0;h<f.length;++h){var i=f[h].split("[");if(i.length>1){i[0]in g||(g[i[0]]=[]),g=g[i[0]];for(var j=1;j<i.length;++j){var k=parseInt(i[j]);j<i.length-1||h<f.length-1?(k in g||(j<i.length-1?g[k]=[]:g[k]={}),g=g[k]):g[k]=b?d:a[d].type}}else h<f.length-1?(i[0]in g||(g[i[0]]={}),g=g[i[0]]):g[i[0]]=b?d:a[d].type}return c}b.exports=d},{}],222:[function(a,b,c){"use strict";function d(a,b){if(!h){var c=Object.keys(g);h={};for(var d=0;d<c.length;++d){var e=c[d];h[a[e]]=g[e]}}return h[b]}function e(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),e=[],f=0;f<c;++f){var g=a.getActiveUniform(b,f);if(g){var h=d(a,g.type);if(g.size>1)for(var i=0;i<g.size;++i)e.push({name:g.name.replace("[0]","["+i+"]"),type:h});else e.push({name:g.name,type:h})}}return e}function f(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),e=[],f=0;f<c;++f){var g=a.getActiveAttrib(b,f);g&&e.push({name:g.name,type:d(a,g.type)})}return e}c.uniforms=e,c.attributes=f;var g={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},h=null},{}],223:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.id=a,this.src=b,this.type=c,this.shader=d,this.count=f,this.programs=[],this.cache=g}function e(a){this.gl=a,this.shaders=[{},{}],this.programs={}}function f(a,b,c){var d=a.createShader(b);if(a.shaderSource(d,c),a.compileShader(d),!a.getShaderParameter(d,a.COMPILE_STATUS)){var e=a.getShaderInfoLog(d);try{var f=l(e,c,b)}catch(a){throw console.warn("Failed to format compiler error: "+a),new k(e,"Error compiling shader:\n"+e)}throw new k(e,f.short,f.long)}return d}function g(a,b,c,d,e){var f=a.createProgram();a.attachShader(f,b),a.attachShader(f,c);for(var g=0;g<d.length;++g)a.bindAttribLocation(f,e[g],d[g]);if(a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS)){var h=a.getProgramInfoLog(f);throw new k(h,"Error linking program: "+h)}return f}function h(a){var b=n.get(a);return b||(b=new e(a),n.set(a,b)),b}function i(a,b,c){return h(a).getShaderReference(b,c)}function j(a,b,c,d,e){return h(a).getProgram(b,c,d,e)}c.shader=i,c.program=j;var k=a("./GLError"),l=a("gl-format-compiler-error"),m="undefined"==typeof WeakMap?a("weakmap-shim"):WeakMap,n=new m,o=0;d.prototype.dispose=function(){if(0==--this.count){for(var a=this.cache,b=a.gl,c=this.programs,d=0,e=c.length;d<e;++d){var f=a.programs[c[d]];f&&(delete a.programs[d],b.deleteProgram(f))}b.deleteShader(this.shader),delete a.shaders[this.type===b.FRAGMENT_SHADER|0][this.src]}};var p=e.prototype;p.getShaderReference=function(a,b){var c=this.gl,e=this.shaders[a===c.FRAGMENT_SHADER|0],g=e[b];if(g&&c.isShader(g.shader))g.count+=1;else{var h=f(c,a,b);g=e[b]=new d(o++,b,a,h,[],1,this)}return g},p.getProgram=function(a,b,c,d){var e=[a.id,b.id,c.join(":"),d.join(":")].join("@"),f=this.programs[e];return f&&this.gl.isProgram(f)||(this.programs[e]=f=g(this.gl,a.shader,b.shader,c,d),a.programs.push(e),b.programs.push(e)),f}},{"./GLError":218,"gl-format-compiler-error":172,"weakmap-shim":576}],224:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.pickBuffer=b,this.screenBox=[0,0,a.drawingBufferWidth,a.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function e(a){for(var b=a.slice(),c=0;c<b.length;++c)b[c]=b[c].slice();return b}function f(a,b){return a.x-b.x}function g(a){var b=a.gl,c=h(b,[b.drawingBufferWidth,b.drawingBufferHeight]),e=new d(b,c);return e.grid=i(e),e.text=j(e),e.line=k(e),e.box=l(e),e.update(a),e}b.exports=g;var h=a("gl-select-static"),i=a("./lib/grid"),j=a("./lib/text"),k=a("./lib/line"),l=a("./lib/box"),m=d.prototype;m.setDirty=function(){this.dirty=this.pickDirty=!0},m.setOverlayDirty=function(){this.dirty=!0},m.nextDepthValue=function(){return this._depthCounter++/65536},m.draw=function(){return function(){var a=this.gl,b=this.screenBox,c=this.viewBox,d=this.dataBox,e=this.pixelRatio,f=this.grid,g=this.line,h=this.text,i=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),a.disable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.depthMask(!1),a.enable(a.BLEND),a.blendEquation(a.FUNC_ADD,a.FUNC_ADD),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),this.borderColor){a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);var j=this.borderColor;a.clearColor(j[0]*j[3],j[1]*j[3],j[2]*j[3],j[3]),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)}a.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),a.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);var k=this.backgroundColor;a.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),a.clear(a.COLOR_BUFFER_BIT),f.draw();var l=this.zeroLineEnable,m=this.zeroLineColor,n=this.zeroLineWidth;if(l[0]||l[1]){g.bind();for(var o=0;o<2;++o)if(l[o]&&d[o]<=0&&d[o+2]>=0){var p=b[o]-d[o]*(b[o+2]-b[o])/(d[o+2]-d[o]);0===o?g.drawLine(p,b[1],p,b[3],n[o],m[o]):g.drawLine(b[0],p,b[2],p,n[o],m[o])}}for(var o=0;o<i.length;++o)i[o].draw();a.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]),a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.grid.drawTickMarks(),g.bind();var q=this.borderLineEnable,r=this.borderLineWidth,s=this.borderLineColor;q[1]&&g.drawLine(c[0],c[1]-.5*r[1]*e,c[0],c[3]+.5*r[3]*e,r[1],s[1]),q[0]&&g.drawLine(c[0]-.5*r[0]*e,c[1],c[2]+.5*r[2]*e,c[1],r[0],s[0]),q[3]&&g.drawLine(c[2],c[1]-.5*r[1]*e,c[2],c[3]+.5*r[3]*e,r[3],s[3]),q[2]&&g.drawLine(c[0]-.5*r[0]*e,c[3],c[2]+.5*r[2]*e,c[3],r[2],s[2]),h.bind();for(var o=0;o<2;++o)h.drawTicks(o);this.titleEnable&&h.drawTitle();for(var t=this.overlays,o=0;o<t.length;++o)t[o].draw();a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.depthMask(!0)}}}(),m.drawPick=function(){return function(){if(!this.static){var a=this.pickBuffer;this.gl;this._pickTimeout=null,a.begin();for(var b=1,c=this.objects,d=0;d<c.length;++d)b=c[d].drawPick(b);a.end()}}}(),m.pick=function(){return function(a,b){if(!this.static){var c=this.pixelRatio,d=this.pickPixelRatio,e=this.viewBox,f=0|Math.round((a-e[0]/c)*d),g=0|Math.round((b-e[1]/c)*d),h=this.pickBuffer.query(f,g,this.pickRadius);if(!h)return null;for(var i=h.id+(h.value[0]<<8)+(h.value[1]<<16)+(h.value[2]<<24),j=this.objects,k=0;k<j.length;++k){var l=j[k].pick(f,g,i);if(l)return l}return null}}}(),m.setScreenBox=function(a){var b=this.screenBox,c=this.pixelRatio;b[0]=0|Math.round(a[0]*c),b[1]=0|Math.round(a[1]*c),b[2]=0|Math.round(a[2]*c),b[3]=0|Math.round(a[3]*c),this.setDirty()},m.setDataBox=function(a){var b=this.dataBox;(b[0]!==a[0]||b[1]!==a[1]||b[2]!==a[2]||b[3]!==a[3])&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],this.setDirty())},m.setViewBox=function(a){var b=this.pixelRatio,c=this.viewBox;c[0]=0|Math.round(a[0]*b),c[1]=0|Math.round(a[1]*b),c[2]=0|Math.round(a[2]*b),c[3]=0|Math.round(a[3]*b);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((a[2]-a[0])*d),0|Math.round((a[3]-a[1])*d)],this.setDirty()},m.update=function(a){a=a||{};var b=this.gl;this.pixelRatio=a.pixelRatio||1;var c=this.pixelRatio;this.pickPixelRatio=Math.max(c,1),this.setScreenBox(a.screenBox||[0,0,b.drawingBufferWidth/c,b.drawingBufferHeight/c]);this.screenBox;this.setViewBox(a.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/c,.125*(this.screenBox[3]-this.screenBox[1])/c,.875*(this.screenBox[2]-this.screenBox[0])/c,.875*(this.screenBox[3]-this.screenBox[1])/c]);var d=this.viewBox,g=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(a.dataBox||[-10,-10/g,10,10/g]),this.borderColor=!1!==a.borderColor&&(a.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(a.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(a.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(a.gridLineWidth||[1,1]).slice(),this.gridLineColor=e(a.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(a.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(a.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=e(a.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(a.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(a.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=e(a.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(a.titleCenter||[.5*(d[0]+d[2])/c,(d[3]+120)/c]).slice(),this.titleEnable=!("titleEnable"in a&&!a.titleEnable),this.titleAngle=a.titleAngle||0,this.titleColor=(a.titleColor||[0,0,0,1]).slice(),this.labelPad=(a.labelPad||[15,15,15,15]).slice(),this.labelAngle=(a.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(a.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=e(a.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(a.tickPad||[15,15,15,15]).slice(),this.tickAngle=(a.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(a.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=e(a.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(a.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(a.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=e(a.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var h=a.ticks||[[],[]],i=this._tickBounds;i[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var j=0;j<2;++j){var k=h[j].slice(0);0!==k.length&&(k.sort(f),i[j]=Math.min(i[j],k[0].x),i[j+2]=Math.max(i[j+2],k[k.length-1].x))}this.grid.update({bounds:i,ticks:h}),this.text.update({bounds:i,ticks:h,labels:a.labels||["x","y"],labelSize:a.labelSize||[12,12],labelFont:a.labelFont||["sans-serif","sans-serif"],title:a.title||"",titleSize:a.titleSize||18,titleFont:a.titleFont||"sans-serif"}),this.static=!!a.static,this.setDirty()},m.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var a=this.objects.length-1;a>=0;--a)this.objects[a].dispose();this.objects.length=0;for(var a=this.overlays.length-1;a>=0;--a)this.overlays[a].dispose();this.overlays.length=0,this.gl=null},m.addObject=function(a){this.objects.indexOf(a)<0&&(this.objects.push(a),this.setDirty())},m.removeObject=function(a){for(var b=this.objects,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setDirty();break}},m.addOverlay=function(a){this.overlays.indexOf(a)<0&&(this.overlays.push(a),this.setOverlayDirty())},m.removeOverlay=function(a){for(var b=this.overlays,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setOverlayDirty();break}}},{"./lib/box":211,"./lib/grid":212,"./lib/line":213,"./lib/text":215,"gl-select-static":242}],225:[function(a,b,c){var d=a("gl-shader");b.exports=function(a){return d(a,"precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}","precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}",null,[{name:"position",type:"vec2"}])}},{"gl-shader":243}],226:[function(a,b,c){"use strict";function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function e(a,b){var c=null;try{c=a.getContext("webgl",b),c||(c=a.getContext("experimental-webgl",b))}catch(a){return null}return c}function f(a){var b=Math.round(Math.log(Math.abs(a))/Math.log(10));if(b<0){var c=Math.round(Math.pow(10,-b));return Math.ceil(a*c)/c}if(b>0){var c=Math.round(Math.pow(10,b));return Math.ceil(a/c)*c}return Math.ceil(a)}function g(a){return"boolean"!=typeof a||a}function h(a){function b(){if(!w&&T.autoResize){var a=x.parentNode,b=1,c=1;a&&a!==document.body?(b=a.clientWidth,c=a.clientHeight):(b=window.innerWidth,c=window.innerHeight);var d=0|Math.ceil(b*T.pixelRatio),e=0|Math.ceil(c*T.pixelRatio);if(d!==x.width||e!==x.height){x.width=d,x.height=e;var f=x.style;f.position=f.position||"absolute",f.left="0px",f.top="0px",f.width=b+"px",f.height=c+"px",N=!0}}}function c(){for(var a=J.length,b=M.length,c=0;c<b;++c)L[c]=0;a:for(var c=0;c<a;++c){var d=J[c],e=d.pickSlots;if(e){for(var f=0;f<b;++f)if(L[f]+e<255){K[c]=f,d.setPickBase(L[f]+1),L[f]+=e;continue a}var g=m(z,S);K[c]=b,M.push(g),L.push(e),d.setPickBase(1),b+=1}else K[c]=-1}for(;b>0&&0===L[b-1];)L.pop(),M.pop().dispose()}function h(){if(T.contextLost)return!0;z.isContextLost()&&(T.contextLost=!0,T.mouseListener.enabled=!1,T.selection.object=null,T.oncontextloss&&T.oncontextloss())}function t(){if(!h()){z.colorMask(!0,!0,!0,!0),z.depthMask(!0),z.disable(z.BLEND),z.enable(z.DEPTH_TEST);for(var a=J.length,b=M.length,c=0;c<b;++c){var d=M[c];d.shape=U,d.begin();for(var e=0;e<a;++e)if(K[e]===c){var f=J[e];f.drawPick&&(f.pixelRatio=1,f.drawPick(R))}d.end()}}}function u(){if(!h()){b();var a=T.camera.tick();R.view=T.camera.matrix,N=N||a,O=O||a,G.pixelRatio=T.pixelRatio,I.pixelRatio=T.pixelRatio;var c=J.length,d=X[0],e=X[1];d[0]=d[1]=d[2]=1/0,e[0]=e[1]=e[2]=-1/0;for(var g=0;g<c;++g){var i=J[g];i.pixelRatio=T.pixelRatio,i.axes=T.axes,N=N||!!i.dirty,O=O||!!i.dirty;var j=i.bounds;if(j)for(var l=j[0],m=j[1],n=0;n<3;++n)d[n]=Math.min(d[n],l[n]),e[n]=Math.max(e[n],m[n])}var p=T.bounds;if(T.autoBounds)for(var n=0;n<3;++n){if(e[n]<d[n])d[n]=-1,e[n]=1;else{d[n]===e[n]&&(d[n]-=1,e[n]+=1);var r=.05*(e[n]-d[n]);d[n]=d[n]-r,e[n]=e[n]+r}p[0][n]=d[n],p[1][n]=e[n]}for(var s=!1,n=0;n<3;++n)s=s||Y[0][n]!==p[0][n]||Y[1][n]!==p[1][n],Y[0][n]=p[0][n],Y[1][n]=p[1][n];if(O=O||s,N=N||s){if(s){for(var u=[0,0,0],g=0;g<3;++g)u[g]=f((p[1][g]-p[0][g])/10);G.autoTicks?G.update({bounds:p,tickSpacing:u}):G.update({bounds:p})}var v=z.drawingBufferWidth,w=z.drawingBufferHeight;S[0]=v,S[1]=w,U[0]=0|Math.max(v/T.pixelRatio,1),U[1]=0|Math.max(w/T.pixelRatio,1),q(P,T.fovy,v/w,T.zNear,T.zFar);for(var g=0;g<16;++g)Q[g]=0;Q[15]=1;for(var x=0,g=0;g<3;++g)x=Math.max(x,p[1][g]-p[0][g]);for(var g=0;g<3;++g)T.autoScale?Q[5*g]=T.aspect[g]/(p[1][g]-p[0][g]):Q[5*g]=1/x,T.autoCenter&&(Q[12+g]=.5*-Q[5*g]*(p[0][g]+p[1][g]));for(var g=0;g<c;++g){var i=J[g];i.axesBounds=p,T.clipToBounds&&(i.clipBounds=p)}B.object&&(T.snapToData?I.position=B.dataCoordinate:I.position=B.dataPosition,I.bounds=p),O&&(O=!1,t()),T.axesPixels=k(T.axes,R,v,w),T.onrender&&T.onrender(),z.bindFramebuffer(z.FRAMEBUFFER,null),z.viewport(0,0,v,w);var y=T.clearColor;z.clearColor(y[0],y[1],y[2],y[3]),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),z.depthMask(!0),z.colorMask(!0,!0,!0,!0),z.enable(z.DEPTH_TEST),z.depthFunc(z.LEQUAL),z.disable(z.BLEND),z.disable(z.CULL_FACE);var A=!1;G.enable&&(A=A||G.isTransparent(),G.draw(R)),I.axes=G,B.object&&I.draw(R),z.disable(z.CULL_FACE);for(var g=0;g<c;++g){var i=J[g];i.axes=G,i.pixelRatio=T.pixelRatio,i.isOpaque&&i.isOpaque()&&i.draw(R),i.isTransparent&&i.isTransparent()&&(A=!0)}if(A){C.shape=S,C.bind(),z.clear(z.DEPTH_BUFFER_BIT),z.colorMask(!1,!1,!1,!1),z.depthMask(!0),z.depthFunc(z.LESS),G.enable&&G.isTransparent()&&G.drawTransparent(R);for(var g=0;g<c;++g){var i=J[g];i.isOpaque&&i.isOpaque()&&i.draw(R)}z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.ONE,z.ONE_MINUS_SRC_ALPHA),z.colorMask(!0,!0,!0,!0),z.depthMask(!1),z.clearColor(0,0,0,0),z.clear(z.COLOR_BUFFER_BIT),G.isTransparent()&&G.drawTransparent(R);for(var g=0;g<c;++g){var i=J[g];i.isTransparent&&i.isTransparent()&&i.drawTransparent(R)}z.bindFramebuffer(z.FRAMEBUFFER,null),z.blendFunc(z.ONE,z.ONE_MINUS_SRC_ALPHA),z.disable(z.DEPTH_TEST),D.bind(),C.color[0].bind(0),D.uniforms.accumBuffer=0,o(z),z.disable(z.BLEND)}N=!1;for(var g=0;g<c;++g)J[g].dirty=!1}}}function v(){w||T.contextLost||(requestAnimationFrame(v),u())}a=a||{};var w=!1,x=(a.pixelRatio||parseFloat(window.devicePixelRatio),a.canvas);if(!x)if(x=document.createElement("canvas"),a.container){var y=a.container;y.appendChild(x)}else document.body.appendChild(x);var z=a.gl;if(z||(z=e(x,a.glOptions||{premultipliedAlpha:!0,antialias:!0})),!z)throw new Error("webgl not supported");var A=a.bounds||[[-10,-10,-10],[10,10,10]],B=new d,C=n(z,[z.drawingBufferWidth,z.drawingBufferHeight],{preferFloat:!s}),D=r(z),E=a.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},F=a.axes||{},G=j(z,F);G.enable=!F.disable;var H=a.spikes||{},I=l(z,H),J=[],K=[],L=[],M=[],N=!0,O=!0,P=new Array(16),Q=new Array(16),R={view:null,projection:P,model:Q},O=!0,S=[z.drawingBufferWidth,z.drawingBufferHeight],T={gl:z,contextLost:!1,pixelRatio:a.pixelRatio||parseFloat(window.devicePixelRatio),canvas:x,selection:B,camera:i(x,E),axes:G,axesPixels:null,spikes:I,bounds:A,objects:J,shape:S,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||10,zNear:a.zNear||.01,zFar:a.zFar||1e3,fovy:a.fovy||Math.PI/4,clearColor:a.clearColor||[0,0,0,0],autoResize:g(a.autoResize),autoBounds:g(a.autoBounds),autoScale:!!a.autoScale,autoCenter:g(a.autoCenter),clipToBounds:g(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:R,oncontextloss:null,mouseListener:null},U=[z.drawingBufferWidth/T.pixelRatio|0,z.drawingBufferHeight/T.pixelRatio|0];T.autoResize&&b(),window.addEventListener("resize",b),T.update=function(a){w||(a=a||{},N=!0,O=!0)},T.add=function(a){w||(a.axes=G,J.push(a),K.push(-1),N=!0,O=!0,c())},T.remove=function(a){if(!w){var b=J.indexOf(a);b<0||(J.splice(b,1),K.pop(),N=!0,O=!0,c())}},T.dispose=function(){if(!w&&(w=!0,window.removeEventListener("resize",b),x.removeEventListener("webglcontextlost",h),T.mouseListener.enabled=!1,!T.contextLost)){G.dispose(),I.dispose();for(var a=0;a<J.length;++a)J[a].dispose();C.dispose();for(var a=0;a<M.length;++a)M[a].dispose();D.dispose(),z=null,G=null,I=null,J=[]}};var V=!1,W=0;T.mouseListener=p(x,function(a,b,c){if(!w){var d=M.length,e=J.length,f=B.object;B.distance=1/0,B.mouse[0]=b,B.mouse[1]=c,B.object=null,B.screen=null,B.dataCoordinate=B.dataPosition=null;var g=!1;if(a&&W)V=!0;else{V&&(O=!0),V=!1;for(var h=0;h<d;++h){var i=M[h].query(b,U[1]-c-1,T.pickRadius);if(i){if(i.distance>B.distance)continue;for(var j=0;j<e;++j){var k=J[j];if(K[j]===h){var l=k.pick(i);l&&(B.buttons=a,B.screen=i.coord,B.distance=i.distance,B.object=k,B.index=l.distance,B.dataPosition=l.position,B.dataCoordinate=l.dataCoordinate,B.data=l,g=!0)}}}}}f&&f!==B.object&&(f.highlight&&f.highlight(null),N=!0),B.object&&(B.object.highlight&&B.object.highlight(B.data),N=!0),g=g||B.object!==f,g&&T.onselect&&T.onselect(B),1&a&&!(1&W)&&T.onclick&&T.onclick(B),W=a}}),x.addEventListener("webglcontextlost",h);var X=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Y=[X[0].slice(),X[1].slice()];return v(),T.redraw=function(){w||(N=!0,u())},T}b.exports=h;var i=a("3d-view-controls"),j=a("gl-axes3d"),k=a("gl-axes3d/properties"),l=a("gl-spikes3d"),m=a("gl-select-static"),n=a("gl-fbo"),o=a("a-big-triangle"),p=a("mouse-change"),q=a("gl-mat4/perspective"),r=a("./lib/shader"),s=a("is-mobile")()},{"./lib/shader":225,"3d-view-controls":39,"a-big-triangle":42,"gl-axes3d":157,"gl-axes3d/properties":164,"gl-fbo":171,"gl-mat4/perspective":189,"gl-select-static":242,"gl-spikes3d":252,"is-mobile":285,"mouse-change":443}],227:[function(a,b,c){c.pointVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}",
c.pointFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n",c.pickVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n",c.pickFragment="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],228:[function(a,b,c){arguments[4][217][0].apply(c,arguments)},{"./lib/GLError":229,"./lib/create-attributes":230,"./lib/create-uniforms":231,"./lib/reflect":232,"./lib/runtime-reflect":233,"./lib/shader-cache":234,dup:217}],229:[function(a,b,c){arguments[4][218][0].apply(c,arguments)},{dup:218}],230:[function(a,b,c){arguments[4][219][0].apply(c,arguments)},{"./GLError":229,dup:219}],231:[function(a,b,c){arguments[4][220][0].apply(c,arguments)},{"./GLError":229,"./reflect":232,dup:220}],232:[function(a,b,c){arguments[4][221][0].apply(c,arguments)},{dup:221}],233:[function(a,b,c){arguments[4][222][0].apply(c,arguments)},{dup:222}],234:[function(a,b,c){arguments[4][223][0].apply(c,arguments)},{"./GLError":229,dup:223,"gl-format-compiler-error":172,"weakmap-shim":576}],235:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.plot=a,this.offsetBuffer=b,this.pickBuffer=c,this.shader=d,this.pickShader=e,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}function e(a,b){var c,d=0,e=a.length>>>1;for(c=0;c<e;c++){var f=a[2*c],g=a[2*c+1];f>=b[0]&&f<=b[2]&&g>=b[1]&&g<=b[3]&&d++}return d}function f(a,b){var c=a.gl,e=h(c),f=h(c),i=g(c,j.pointVertex,j.pointFragment),k=g(c,j.pickVertex,j.pickFragment),l=new d(a,e,f,i,k);return l.update(b),a.addObject(l),l}var g=a("gl-shader"),h=a("gl-buffer"),i=a("typedarray-pool"),j=a("./lib/shader");b.exports=f;var k=d.prototype;k.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},k.update=function(a){function b(b,c){return b in a?a[b]:c}var c;a=a||{},this.sizeMin=b("sizeMin",.5),this.sizeMax=b("sizeMax",20),this.color=b("color",[1,0,0,1]).slice(),this.areaRatio=b("areaRatio",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.blend=b("blend",!1);var d=a.positions.length>>>1,e=a.positions instanceof Float32Array,f=a.idToIndex instanceof Int32Array&&a.idToIndex.length>=d,g=a.positions,h=e?g:i.mallocFloat32(g.length),j=f?a.idToIndex:i.mallocInt32(d);if(e||h.set(g),!f)for(h.set(g),c=0;c<d;c++)j[c]=c;this.points=g,this.offsetBuffer.update(h),this.pickBuffer.update(j),e||i.free(h),f||i.free(j),this.pointCount=d,this.pickOffset=0},k.unifiedDraw=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(c){var d=void 0!==c,f=d?this.pickShader:this.shader,g=this.plot.gl,h=this.plot.dataBox;if(0===this.pointCount)return c;var i=h[2]-h[0],j=h[3]-h[1],k=e(this.points,h),l=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(k,.33333)));a[0]=2/i,a[4]=2/j,a[6]=-2*h[0]/i-1,a[7]=-2*h[1]/j-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=a,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=l<5,f.uniforms.pointSize=l,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(b[0]=255&c,b[1]=c>>8&255,b[2]=c>>16&255,b[3]=c>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(g.UNSIGNED_BYTE),f.uniforms.pickOffset=b,this.pickOffset=c);var m=g.getParameter(g.BLEND),n=g.getParameter(g.DITHER);return m&&!this.blend&&g.disable(g.BLEND),n&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),m&&!this.blend&&g.enable(g.BLEND),n&&g.enable(g.DITHER),c+this.pointCount}}(),k.draw=k.unifiedDraw,k.drawPick=k.unifiedDraw,k.pick=function(a,b,c){var d=this.pickOffset,e=this.pointCount;if(c<d||c>=d+e)return null;var f=c-d,g=this.points;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}}},{"./lib/shader":227,"gl-buffer":165,"gl-shader":228,"typedarray-pool":554}],236:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,f<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a}b.exports=d},{}],237:[function(a,b,c){"use strict";function d(a,b){var c=f[b];if(c||(c=f[b]={}),a in c)return c[a];for(var d=e(a,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),g=e(a,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),h=[[1/0,1/0],[-1/0,-1/0]],i=0;i<d.positions.length;++i)for(var j=d.positions[i],k=0;k<2;++k)h[0][k]=Math.min(h[0][k],j[k]),h[1][k]=Math.max(h[1][k],j[k]);return c[a]=[g,d,h]}var e=a("vectorize-text");b.exports=d;var f={}},{"vectorize-text":568}],238:[function(a,b,c){function d(a,b){var c=e(a,b),d=c.attributes;return d.position.location=0,d.color.location=1,d.glyph.location=2,d.id.location=3,c}var e=a("gl-shader"),f="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",g="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",h="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",i="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",j="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",k=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:f,fragment:i,attributes:k},m={vertex:g,fragment:i,attributes:k},n={vertex:h,fragment:i,attributes:k},o={vertex:f,fragment:j,attributes:k},p={vertex:g,fragment:j,attributes:k},q={vertex:h,fragment:j,attributes:k};c.createPerspective=function(a){return d(a,l)},c.createOrtho=function(a){return d(a,m)},c.createProject=function(a){return d(a,n)},c.createPickPerspective=function(a){return d(a,o)},c.createPickOrtho=function(a){return d(a,p)},c.createPickProject=function(a){return d(a,q)}},{"gl-shader":243}],239:[function(a,b,c){"use strict";function d(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];return a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*f,a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*f,a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*f,a[3]=b[3]*c+b[7]*d+b[11]*e+b[15]*f,a}function e(a,b,c,e){return d(e,e,c),d(e,e,b),d(e,e,a)}function f(a,b){this.index=a,this.dataCoordinate=this.position=b}function g(a,b,c,d,e,g,h,i,j,k,l,m){this.gl=a,this.pixelRatio=1,this.shader=b,this.orthoShader=c,this.projectShader=d,this.pointBuffer=e,this.colorBuffer=g,this.glyphBuffer=h,this.idBuffer=i,this.vao=j,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=k,this.pickOrthoShader=l,this.pickProjectShader=m,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}function h(a){return a[0]=a[1]=a[2]=0,a}function i(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=1,a}function j(a,b,c,d){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[c]=d,a}function k(a){for(var b=D,c=0;c<2;++c)for(var d=0;d<3;++d)b[c][d]=Math.max(Math.min(a[c][d],1e8),-1e8);return b}function l(a,b,c,d,f){var g,l=b.axesProject,m=b.gl,n=a.uniforms,o=c.model||u,p=c.view||u,q=c.projection||u,s=b.axesBounds,t=k(b.clipBounds);g=b.axes?b.axes.lastCubeProps.axis:[1,1,1],w[0]=2/m.drawingBufferWidth,w[1]=2/m.drawingBufferHeight,a.bind(),n.view=p,n.projection=q,n.screenSize=w,n.highlightId=b.highlightId,n.highlightScale=b.highlightScale,n.clipBounds=t,n.pickGroup=b.pickId/255,n.pixelRatio=b.pixelRatio;for(var v=0;v<3;++v)if(l[v]&&b.projectOpacity[v]<1===d){n.scale=b.projectScale[v],n.opacity=b.projectOpacity[v];for(var D=B,E=0;E<16;++E)D[E]=0;for(var E=0;E<4;++E)D[5*E]=1;D[5*v]=0,g[v]<0?D[12+v]=s[0][v]:D[12+v]=s[1][v],r(D,o,D),n.model=D;var F=(v+1)%3,G=(v+2)%3,H=h(x),I=h(y);H[F]=1,I[G]=1;var J=e(q,p,o,i(z,H)),K=e(q,p,o,i(A,I));if(Math.abs(J[1])>Math.abs(K[1])){var L=J;J=K,K=L,L=H,H=I,I=L;var M=F;F=G,G=M}J[0]<0&&(H[F]=-1),K[1]>0&&(I[G]=-1);for(var N=0,O=0,E=0;E<4;++E)N+=Math.pow(o[4*F+E],2),O+=Math.pow(o[4*G+E],2);H[F]/=Math.sqrt(N),I[G]/=Math.sqrt(O),n.axes[0]=H,n.axes[1]=I,n.fragClipBounds[0]=j(C,t[0],v,-1e8),n.fragClipBounds[1]=j(C,t[1],v,1e8),b.vao.draw(m.TRIANGLES,b.vertexCount),b.lineWidth>0&&(m.lineWidth(b.lineWidth),b.vao.draw(m.LINES,b.lineVertexCount,b.vertexCount))}}function m(a,b,c,d,e,f){var g=c.gl;if(c.vao.bind(),e===c.opacity<1||f){a.bind();var h=a.uniforms;h.model=d.model||u,h.view=d.view||u,h.projection=d.projection||u,w[0]=2/g.drawingBufferWidth,w[1]=2/g.drawingBufferHeight,h.screenSize=w,h.highlightId=c.highlightId,h.highlightScale=c.highlightScale,h.fragClipBounds=G,h.clipBounds=c.axes.bounds,h.opacity=c.opacity,h.pickGroup=c.pickId/255,h.pixelRatio=c.pixelRatio,c.vao.draw(g.TRIANGLES,c.vertexCount),c.lineWidth>0&&(g.lineWidth(c.lineWidth),c.vao.draw(g.LINES,c.lineVertexCount,c.vertexCount))}l(b,c,d,e,f),c.vao.unbind()}function n(a){var b=a.gl,c=s.createPerspective(b),d=s.createOrtho(b),e=s.createProject(b),f=s.createPickPerspective(b),h=s.createPickOrtho(b),i=s.createPickProject(b),j=o(b),k=o(b),l=o(b),m=o(b),n=p(b,[{buffer:j,size:3,type:b.FLOAT},{buffer:k,size:4,type:b.FLOAT},{buffer:l,size:2,type:b.FLOAT},{buffer:m,size:4,type:b.UNSIGNED_BYTE,normalized:!0}]),q=new g(b,c,d,e,j,k,l,m,n,f,h,i);return q.update(a),q}var o=a("gl-buffer"),p=a("gl-vao"),q=a("typedarray-pool"),r=a("gl-mat4/multiply"),s=a("./lib/shaders"),t=a("./lib/glyphs"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.exports=n;var v=g.prototype;v.pickSlots=1,v.setPickBase=function(a){this.pickId=a},v.isTransparent=function(){if(this.opacity<1)return!0;for(var a=0;a<3;++a)if(this.axesProject[a]&&this.projectOpacity[a]<1)return!0;return!1},v.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;a<3;++a)if(this.axesProject[a]&&this.projectOpacity[a]>=1)return!0;return!1};var w=[0,0],x=[0,0,0],y=[0,0,0],z=[0,0,0,1],A=[0,0,0,1],B=u.slice(),C=[0,0,0],D=[[0,0,0],[0,0,0]],E=[-1e8,-1e8,-1e8],F=[1e8,1e8,1e8],G=[E,F];v.draw=function(a){m(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,a,!1,!1)},v.drawTransparent=function(a){m(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,a,!0,!1)},v.drawPick=function(a){m(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,a,!1,!0)},v.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=a.value[2]+(a.value[1]<<8)+(a.value[0]<<16);if(b>=this.pointCount||b<0)return null;var c=this.points[b],d=this._selectResult;d.index=b;for(var e=0;e<3;++e)d.position[e]=d.dataCoordinate[e]=c[e];return d},v.highlight=function(a){if(a){var b=a.index,c=255&b,d=b>>8&255,e=b>>16&255;this.highlightId=[c/255,d/255,e/255,0]}else this.highlightId=[1,1,1,1]},v.update=function(a){if(a=a||{},"perspective"in a&&(this.useOrtho=!a.perspective),"orthographic"in a&&(this.useOrtho=!!a.orthographic),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"project"in a)if(Array.isArray(a.project))this.axesProject=a.project;else{var b=!!a.project;this.axesProject=[b,b,b]}if("projectScale"in a)if(Array.isArray(a.projectScale))this.projectScale=a.projectScale.slice();else{var c=+a.projectScale;this.projectScale=[c,c,c]}if("projectOpacity"in a)if(Array.isArray(a.projectOpacity))this.projectOpacity=a.projectOpacity.slice();else{var c=+a.projectOpacity;this.projectOpacity=[c,c,c]}"opacity"in a&&(this.opacity=a.opacity),this.dirty=!0;var d=a.position;if(d){var e=a.font||"normal",f=a.alignment||[0,0],g=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0],i=a.glyph,j=a.color,k=a.size,l=a.angle,m=a.lineColor,n=0,o=0,p=0,r=d.length;a:for(var s=0;s<r;++s){for(var u=d[s],v=0;v<3;++v)if(isNaN(u[v])||!isFinite(u[v]))continue a;var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("●",e);var x=w[0],y=w[1],z=w[2];o+=3*x.cells.length,p+=2*y.edges.length}var A=o+p,B=q.mallocFloat(3*A),C=q.mallocFloat(4*A),D=q.mallocFloat(2*A),E=q.mallocUint32(A),F=[0,f[1]],G=0,H=o,I=[0,0,0,1],J=[0,0,0,1],K=Array.isArray(j)&&Array.isArray(j[0]),L=Array.isArray(m)&&Array.isArray(m[0]);a:for(var s=0;s<r;++s){for(var u=d[s],v=0;v<3;++v){if(isNaN(u[v])||!isFinite(u[v])){n+=1;continue a}h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v])}var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("●",e);var x=w[0],y=w[1],z=w[2];if(Array.isArray(j)){var M;if(M=K?j[s]:j,3===M.length){for(var v=0;v<3;++v)I[v]=M[v];I[3]=1}else if(4===M.length)for(var v=0;v<4;++v)I[v]=M[v]}else I[0]=I[1]=I[2]=0,I[3]=1;if(Array.isArray(m)){var M;if(M=L?m[s]:m,3===M.length){for(var v=0;v<3;++v)J[v]=M[v];J[v]=1}else if(4===M.length)for(var v=0;v<4;++v)J[v]=M[v]}else J[0]=J[1]=J[2]=0,J[3]=1;var N=.5;Array.isArray(k)?N=+k[s]:k?N=+k:this.useOrtho&&(N=12);var O=0;Array.isArray(l)?O=+l[s]:l&&(O=+l);for(var P=Math.cos(O),Q=Math.sin(O),u=d[s],v=0;v<3;++v)h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v]);f[0]<0?F[0]=f[0]*(1+z[1][0]):f[0]>0&&(F[0]=-f[0]*(1+z[0][0]));for(var R=x.cells,S=x.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;U<3;++U){for(var V=0;V<3;++V)B[3*G+V]=u[V];for(var V=0;V<4;++V)C[4*G+V]=I[V];E[G]=n;var W=S[T[U]];D[2*G]=N*(P*W[0]-Q*W[1]+F[0]),D[2*G+1]=N*(Q*W[0]+P*W[1]+F[1]),G+=1}for(var R=y.edges,S=y.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;U<2;++U){for(var V=0;V<3;++V)B[3*H+V]=u[V];for(var V=0;V<4;++V)C[4*H+V]=J[V];E[H]=n;var W=S[T[U]];D[2*H]=N*(P*W[0]-Q*W[1]+F[0]),D[2*H+1]=N*(Q*W[0]+P*W[1]+F[1]),H+=1}n+=1}this.vertexCount=o,this.lineVertexCount=p,this.pointBuffer.update(B),this.colorBuffer.update(C),this.glyphBuffer.update(D),this.idBuffer.update(new Uint32Array(E)),q.free(B),q.free(C),q.free(D),q.free(E),this.bounds=[g,h],this.points=d,this.pointCount=d.length}},v.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/glyphs":237,"./lib/shaders":238,"gl-buffer":165,"gl-mat4/multiply":188,"gl-vao":259,"typedarray-pool":554}],240:[function(a,b,c){"use strict";c.boxVertex="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n",c.boxFragment="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},{}],241:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.boxBuffer=b,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function e(a,b){var c=a.gl,e=g(c,[0,0,0,1,1,0,1,1]),i=f(c,h.boxVertex,h.boxFragment),j=new d(a,e,i);return j.update(b),a.addOverlay(j),j}var f=a("gl-shader"),g=a("gl-buffer"),h=a("./lib/shaders");b.exports=e;var i=d.prototype;i.draw=function(){if(this.enabled){var a=this.plot,b=this.selectBox,c=this.borderWidth,d=(this.innerFill,this.innerColor),e=(this.outerFill,this.outerColor),f=this.borderColor,g=a.box,h=a.screenBox,i=a.dataBox,j=a.viewBox,k=a.pixelRatio,l=(b[0]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],m=(b[1]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1],n=(b[2]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],o=(b[3]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1];if(l=Math.max(l,j[0]),m=Math.max(m,j[1]),n=Math.min(n,j[2]),o=Math.min(o,j[3]),!(n<l||o<m)){g.bind();var p=h[2]-h[0],q=h[3]-h[1];if(this.outerFill&&(g.drawBox(0,0,p,m,e),g.drawBox(0,m,l,o,e),g.drawBox(0,o,p,q,e),g.drawBox(n,m,p,o,e)),this.innerFill&&g.drawBox(l,m,n,o,d),c>0){var r=c*k;g.drawBox(l-r,m-r,n+r,m+r,f),g.drawBox(l-r,o-r,n+r,o+r,f),g.drawBox(l-r,m-r,l+r,o+r,f),g.drawBox(n-r,m-r,n+r,o+r,f)}}}},i.update=function(a){a=a||{},this.innerFill=!!a.innerFill,this.outerFill=!!a.outerFill,this.innerColor=(a.innerColor||[0,0,0,.5]).slice(),this.outerColor=(a.outerColor||[0,0,0,.5]).slice(),this.borderColor=(a.borderColor||[0,0,0,1]).slice(),this.borderWidth=a.borderWidth||0,this.selectBox=(a.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":240,"gl-buffer":165,"gl-shader":243}],242:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.coord=[a,b],this.id=c,this.value=d,this.distance=e}function e(a,b,c){this.gl=a,this.fbo=b,this.buffer=c,this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(b.bind(),a.readPixels(0,0,b.shape[0],b.shape[1],a.RGBA,a.UNSIGNED_BYTE,d.buffer),d._readTimeout=null)}}function f(a,b){return new e(a,g(a,b),h.mallocUint8(b[0]*b[1]*4))}b.exports=f;var g=a("gl-fbo"),h=a("typedarray-pool"),i=a("ndarray"),j=a("bit-twiddle").nextPow2,k=a("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_46_arg0_<255||_inline_46_arg1_<255||_inline_46_arg2_<255||_inline_46_arg3_<255){var _inline_46_l=_inline_46_arg4_-_inline_46_arg6_[0],_inline_46_a=_inline_46_arg5_-_inline_46_arg6_[1],_inline_46_f=_inline_46_l*_inline_46_l+_inline_46_a*_inline_46_a;_inline_46_f<this_closestD2&&(this_closestD2=_inline_46_f,this_closestX=_inline_46_arg6_[0],this_closestY=_inline_46_arg6_[1])}}",args:[{name:"_inline_46_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_46_a","_inline_46_f","_inline_46_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),l=e.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var b=this.fbo.shape[0],c=this.fbo.shape[1];if(c*b*4>this.buffer.length){h.free(this.buffer);for(var d=this.buffer=h.mallocUint8(j(c*b*4)),e=0;e<c*b*4;++e)d[e]=255}return a}}}),l.begin=function(){var a=this.gl;this.shape;a&&(this.fbo.bind(),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))},l.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},l.query=function(a,b,c){if(!this.gl)return null;var e=this.fbo.shape.slice();a|=0,b|=0,"number"!=typeof c&&(c=1);var f=0|Math.min(Math.max(a-c,0),e[0]),g=0|Math.min(Math.max(a+c,0),e[0]),h=0|Math.min(Math.max(b-c,0),e[1]),j=0|Math.min(Math.max(b+c,0),e[1]);if(g<=f||j<=h)return null;var l=[g-f,j-h],m=i(this.buffer,[l[0],l[1],4],[4,4*e[0],1],4*(f+e[0]*h)),n=k(m.hi(l[0],l[1],1),c,c),o=n[0],p=n[1];return o<0||Math.pow(this.radius,2)<n[2]?null:new d(o+f|0,p+h|0,m.get(o,p,0),[m.get(o,p,1),m.get(o,p,2),m.get(o,p,3)],Math.sqrt(n[2]))},l.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":71,"cwise/lib/wrapper":119,"gl-fbo":171,ndarray:458,"typedarray-pool":554}],243:[function(a,b,c){"use strict";function d(a){this.gl=a,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function e(a,b){return a.name<b.name?-1:1}function f(a,b,c,e,f){var g=new d(a);return g.update(b,c,e,f),g}var g=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),i=a("./lib/reflect"),j=a("./lib/shader-cache"),k=a("./lib/runtime-reflect"),l=a("./lib/GLError"),m=d.prototype;m.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},m.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},m.update=function(a,b,c,d){function f(){n.program=j.program(o,n._vref,n._fref,u,v);for(var a=0;a<c.length;++a)C[a]=o.getUniformLocation(n.program,c[a].name)}if(!b||1===arguments.length){var m=a;a=m.vertex,b=m.fragment,c=m.uniforms,d=m.attributes}var n=this,o=n.gl,p=n._vref;n._vref=j.shader(o,o.VERTEX_SHADER,a),p&&p.dispose(),n.vertShader=n._vref.shader;var q=this._fref;if(n._fref=j.shader(o,o.FRAGMENT_SHADER,b),q&&q.dispose(),n.fragShader=n._fref.shader,!c||!d){var r=o.createProgram();if(o.attachShader(r,n.fragShader),o.attachShader(r,n.vertShader),o.linkProgram(r),!o.getProgramParameter(r,o.LINK_STATUS)){var s=o.getProgramInfoLog(r);throw new l(s,"Error linking program:"+s)}c=c||k.uniforms(o,r),d=d||k.attributes(o,r),o.deleteProgram(r)}d=d.slice(),d.sort(e);for(var t=[],u=[],v=[],w=0;w<d.length;++w){var x=d[w];if(x.type.indexOf("mat")>=0){for(var y=0|x.type.charAt(x.type.length-1),z=new Array(y),A=0;A<y;++A)z[A]=v.length,u.push(x.name+"["+A+"]"),"number"==typeof x.location?v.push(x.location+A):Array.isArray(x.location)&&x.location.length===y&&"number"==typeof x.location[A]?v.push(0|x.location[A]):v.push(-1);t.push({name:x.name,type:x.type,locations:z})}else t.push({name:x.name,type:x.type,locations:[v.length]}),u.push(x.name),"number"==typeof x.location?v.push(0|x.location):v.push(-1)}for(var B=0,w=0;w<v.length;++w)if(v[w]<0){for(;v.indexOf(B)>=0;)B+=1;v[w]=B}var C=new Array(c.length);f(),n._relink=f,n.types={uniforms:i(c),attributes:i(d)},n.attributes=h(o,n,t,v),Object.defineProperty(n,"uniforms",g(o,n,c,C))},b.exports=f},{"./lib/GLError":244,"./lib/create-attributes":245,"./lib/create-uniforms":246,"./lib/reflect":247,"./lib/runtime-reflect":248,"./lib/shader-cache":249}],244:[function(a,b,c){arguments[4][218][0].apply(c,arguments)},{dup:218}],245:[function(a,b,c){arguments[4][219][0].apply(c,arguments)},{"./GLError":244,dup:219}],246:[function(a,b,c){arguments[4][220][0].apply(c,arguments)},{"./GLError":244,"./reflect":247,dup:220}],247:[function(a,b,c){arguments[4][221][0].apply(c,arguments)},{dup:221}],248:[function(a,b,c){arguments[4][222][0].apply(c,arguments)},{dup:222}],249:[function(a,b,c){arguments[4][223][0].apply(c,arguments)},{"./GLError":244,dup:223,"gl-format-compiler-error":172,"weakmap-shim":576}],250:[function(a,b,c){"use strict";function d(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}function e(a,b){var c=new d(a);return c.update(b),a.addOverlay(c),c}b.exports=e;var f=d.prototype;f.update=function(a){a=a||{},this.enable=(a.enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},f.draw=function(){var a=this.enable,b=this.width,c=this.color,d=this.center,e=this.plot,f=e.line,g=e.dataBox,h=e.viewBox;if(f.bind(),g[0]<=d[0]&&d[0]<=g[2]&&g[1]<=d[1]&&d[1]<=g[3]){var i=h[0]+(d[0]-g[0])/(g[2]-g[0])*(h[2]-h[0]),j=h[1]+(d[1]-g[1])/(g[3]-g[1])*(h[3]-h[1]);a[0]&&f.drawLine(i,j,h[0],j,b[0],c[0]),a[1]&&f.drawLine(i,j,i,h[1],b[1],c[1]),a[2]&&f.drawLine(i,j,h[2],j,b[2],c[2]),a[3]&&f.drawLine(i,j,i,h[3],b[3],c[3])}},f.dispose=function(){this.plot.removeOverlay(this)}},{}],251:[function(a,b,c){"use strict";var d=a("gl-shader");b.exports=function(a){return d(a,"precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n","precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}",null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":243}],252:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function e(a,b){function c(a,b,c,d,f,g){var h=[a,b,c,0,0,0,1];h[d+3]=1,h[d]=f,e.push.apply(e,h),h[6]=-1,e.push.apply(e,h),h[d]=g,e.push.apply(e,h),e.push.apply(e,h),h[6]=1,e.push.apply(e,h),h[d]=f,e.push.apply(e,h)}var e=[];c(0,0,0,0,0,1),c(0,0,0,1,0,1),c(0,0,0,2,0,1),c(1,0,0,1,-1,1),c(1,0,0,2,-1,1),c(0,1,0,0,-1,1),c(0,1,0,2,-1,1),c(0,0,1,0,-1,1),c(0,0,1,1,-1,1);var i=f(a,e),j=g(a,[{type:a.FLOAT,buffer:i,size:3,offset:0,stride:28},{type:a.FLOAT,buffer:i,size:3,offset:12,stride:28},{type:a.FLOAT,buffer:i,size:1,offset:24,stride:28}]),k=h(a);k.attributes.position.location=0,k.attributes.color.location=1,k.attributes.weight.location=2;var l=new d(a,i,j,k);return l.update(b),l}var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders/index");b.exports=e;var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],j=d.prototype,k=[0,0,0],l=[0,0,0],m=[0,0];j.isTransparent=function(){return!1},j.drawTransparent=function(a){},j.draw=function(a){var b=this.gl,c=this.vao,d=this.shader;c.bind(),d.bind();var e,f=a.model||i,g=a.view||i,h=a.projection||i;this.axes&&(e=this.axes.lastCubeProps.axis);for(var j=k,n=l,o=0;o<3;++o)e&&e[o]<0?(j[o]=this.bounds[0][o],n[o]=this.bounds[1][o]):(j[o]=this.bounds[1][o],n[o]=this.bounds[0][o]);m[0]=b.drawingBufferWidth,m[1]=b.drawingBufferHeight,d.uniforms.model=f,d.uniforms.view=g,d.uniforms.projection=h,d.uniforms.coordinates=[this.position,j,n],d.uniforms.colors=this.colors,d.uniforms.screenShape=m;for(var o=0;o<3;++o)d.uniforms.lineWidth=this.lineWidth[o]*this.pixelRatio,this.enabled[o]&&(c.draw(b.TRIANGLES,6,6*o),this.drawSides[o]&&c.draw(b.TRIANGLES,12,18+12*o));c.unbind()},j.update=function(a){a&&("bounds"in a&&(this.bounds=a.bounds),"position"in a&&(this.position=a.position),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"colors"in a&&(this.colors=a.colors),"enabled"in a&&(this.enabled=a.enabled),
"drawSides"in a&&(this.drawSides=a.drawSides))},j.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":251,"gl-buffer":165,"gl-vao":259}],253:[function(a,b,c){var d=a("gl-shader"),e="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n",f="precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular_1_1(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor = step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) + step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",g="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",h="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n";c.createShader=function(a){var b=d(a,e,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createPickShader=function(a){var b=d(a,e,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createContourShader=function(a){var b=d(a,g,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b},c.createPickContourShader=function(a){var b=d(a,g,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b}},{"gl-shader":243}],254:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.position=a,this.index=b,this.uv=c,this.level=d,this.dataCoordinate=e}function e(a){var b=u([s({colormap:a,nshades:K,format:"rgba"}).map(function(a){return[a[0],a[1],a[2],255*a[3]]})]);return t.divseq(b,255),b}function f(a,b,c,e,f,g,h,i,j,k,l,m,n,o){this.gl=a,this.shape=b,this.bounds=c,this.intensityBounds=[],this._shader=e,this._pickShader=f,this._coordinateBuffer=g,this._vao=h,this._colorMap=i,this._contourShader=j,this._contourPickShader=k,this._contourBuffer=l,this._contourVAO=m,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new d([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=n,this._dynamicVAO=o,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}function g(a,b){var c,d,e,f=b.axes&&b.axes.lastCubeProps.axis||M,g=b.showSurface,h=b.showContour;for(c=0;c<3;++c)for(g=g||b.surfaceProject[c],d=0;d<3;++d)h=h||b.contourProject[c][d];for(c=0;c<3;++c){var i=N.projections[c];for(d=0;d<16;++d)i[d]=0;for(d=0;d<4;++d)i[5*d]=1;i[5*c]=0,i[12+c]=b.axesBounds[+(f[c]>0)][c],x(i,a.model,i);var j=N.clipBounds[c];for(e=0;e<2;++e)for(d=0;d<3;++d)j[e][d]=a.clipBounds[e][d];j[0][c]=-1e8,j[1][c]=1e8}return N.showSurface=g,N.showContour=h,N}function h(a,b){a=a||{};var c=this.gl;c.disable(c.CULL_FACE),this._colorMap.bind(0);var d=O;d.model=a.model||H,d.view=a.view||H,d.projection=a.projection||H,d.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],d.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],d.contourColor=this.contourColor[0],d.inverseModel=y(d.inverseModel,d.model);for(var e=0;e<2;++e)for(var f=d.clipBounds[e],h=0;h<3;++h)f[h]=Math.min(Math.max(this.clipBounds[e][h],-1e8),1e8);d.kambient=this.ambientLight,d.kdiffuse=this.diffuseLight,d.kspecular=this.specularLight,d.roughness=this.roughness,d.fresnel=this.fresnel,d.opacity=this.opacity,d.height=0,d.permutation=Q,d.vertexColor=this.vertexColor;var i=P;for(x(i,d.view,d.model),x(i,d.projection,i),y(i,i),e=0;e<3;++e)d.eyePosition[e]=i[12+e]/i[15];var j=i[15];for(e=0;e<3;++e)j+=this.lightPosition[e]*i[4*e+3];for(e=0;e<3;++e){var k=i[12+e];for(h=0;h<3;++h)k+=i[4*h+e]*this.lightPosition[h];d.lightPosition[e]=k/j}var l=g(d,this);if(l.showSurface&&b===this.opacity<1){for(this._shader.bind(),this._shader.uniforms=d,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(c.TRIANGLES,this._vertexCount),e=0;e<3;++e)this.surfaceProject[e]&&this.vertexCount&&(this._shader.uniforms.model=l.projections[e],this._shader.uniforms.clipBounds=l.clipBounds[e],this._vao.draw(c.TRIANGLES,this._vertexCount));this._vao.unbind()}if(l.showContour&&!b){var m=this._contourShader;d.kambient=1,d.kdiffuse=0,d.kspecular=0,d.opacity=1,m.bind(),m.uniforms=d;var n=this._contourVAO;for(n.bind(),e=0;e<3;++e)for(m.uniforms.permutation=J[e],c.lineWidth(this.contourWidth[e]),h=0;h<this.contourLevels[e].length;++h)this._contourCounts[e][h]&&(h===this.highlightLevel[e]?(m.uniforms.contourColor=this.highlightColor[e],m.uniforms.contourTint=this.highlightTint[e]):0!==h&&h-1!==this.highlightLevel[e]||(m.uniforms.contourColor=this.contourColor[e],m.uniforms.contourTint=this.contourTint[e]),m.uniforms.height=this.contourLevels[e][h],n.draw(c.LINES,this._contourCounts[e][h],this._contourOffsets[e][h]));for(e=0;e<3;++e)for(m.uniforms.model=l.projections[e],m.uniforms.clipBounds=l.clipBounds[e],h=0;h<3;++h)if(this.contourProject[e][h]){m.uniforms.permutation=J[h],c.lineWidth(this.contourWidth[h]);for(var o=0;o<this.contourLevels[h].length;++o)o===this.highlightLevel[h]?(m.uniforms.contourColor=this.highlightColor[h],m.uniforms.contourTint=this.highlightTint[h]):0!==o&&o-1!==this.highlightLevel[h]||(m.uniforms.contourColor=this.contourColor[h],m.uniforms.contourTint=this.contourTint[h]),m.uniforms.height=this.contourLevels[h][o],n.draw(c.LINES,this._contourCounts[h][o],this._contourOffsets[h][o])}for(n=this._dynamicVAO,n.bind(),e=0;e<3;++e)if(0!==this._dynamicCounts[e])for(m.uniforms.model=d.model,m.uniforms.clipBounds=d.clipBounds,m.uniforms.permutation=J[e],c.lineWidth(this.dynamicWidth[e]),m.uniforms.contourColor=this.dynamicColor[e],m.uniforms.contourTint=this.dynamicTint[e],m.uniforms.height=this.dynamicLevel[e],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]),h=0;h<3;++h)this.contourProject[h][e]&&(m.uniforms.model=l.projections[h],m.uniforms.clipBounds=l.clipBounds[h],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]));n.unbind()}}function i(a,b){var c=b.shape.slice(),d=a.shape.slice();t.assign(a.lo(1,1).hi(c[0],c[1]),b),t.assign(a.lo(1).hi(c[0],1),b.hi(c[0],1)),t.assign(a.lo(1,d[1]-1).hi(c[0],1),b.lo(0,c[1]-1).hi(c[0],1)),t.assign(a.lo(0,1).hi(1,c[1]),b.hi(1)),t.assign(a.lo(d[0]-1,1).hi(1,c[1]),b.lo(c[0]-1)),a.set(0,0,b.get(0,0)),a.set(0,d[1]-1,b.get(0,c[1]-1)),a.set(d[0]-1,0,b.get(c[0]-1,0)),a.set(d[0]-1,d[1]-1,b.get(c[0]-1,c[1]-1))}function j(a,b){return Array.isArray(a)?[b(a[0]),b(a[1]),b(a[2])]:[b(a),b(a),b(a)]}function k(a){return Array.isArray(a)?3===a.length?[a[0],a[1],a[2],1]:[a[0],a[1],a[2],a[3]]:[0,0,0,1]}function l(a){if(Array.isArray(a)){if(Array.isArray(a))return[k(a[0]),k(a[1]),k(a[2])];var b=k(a);return[b.slice(),b.slice(),b.slice()]}}function m(a){var b=a.gl,c=C(b),d=E(b),e=D(b),g=F(b),h=o(b),i=p(b,[{buffer:h,size:4,stride:G,offset:0},{buffer:h,size:3,stride:G,offset:16},{buffer:h,size:3,stride:G,offset:28}]),j=o(b),k=p(b,[{buffer:j,size:4,stride:20,offset:0},{buffer:j,size:1,stride:20,offset:16}]),l=o(b),m=p(b,[{buffer:l,size:2,type:b.FLOAT}]),n=q(b,1,K,b.RGBA,b.UNSIGNED_BYTE);n.minFilter=b.LINEAR,n.magFilter=b.LINEAR;var r=new f(b,[0,0],[[0,0,0],[0,0,0]],c,d,h,i,n,e,g,j,k,l,m),s={levels:[[],[],[]]};for(var t in a)s[t]=a[t];return s.colormap=s.colormap||"jet",r.update(s),r}b.exports=m;var n=a("bit-twiddle"),o=a("gl-buffer"),p=a("gl-vao"),q=a("gl-texture2d"),r=a("typedarray-pool"),s=a("colormap"),t=a("ndarray-ops"),u=a("ndarray-pack"),v=a("ndarray"),w=a("surface-nets"),x=a("gl-mat4/multiply"),y=a("gl-mat4/invert"),z=a("binary-search-bounds"),A=a("ndarray-gradient"),B=a("./lib/shaders"),C=B.createShader,D=B.createContourShader,E=B.createPickShader,F=B.createPickContourShader,G=40,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],J=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var a=0;a<3;++a){var b=J[a],c=(a+1)%3,d=(a+2)%3;b[c+0]=1,b[d+3]=1,b[a+6]=1}}();var K=256,L=f.prototype;L.isTransparent=function(){return this.opacity<1},L.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;a<3;++a)if(this._contourCounts[a].length>0||this._dynamicCounts[a]>0)return!0;return!1},L.pickSlots=1,L.setPickBase=function(a){this.pickId=a};var M=[0,0,0],N={showSurface:!1,showContour:!1,projections:[H.slice(),H.slice(),H.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O={model:H,view:H,projection:H,inverseModel:H.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},P=H.slice(),Q=[1,0,0,0,1,0,0,0,1];L.draw=function(a){return h.call(this,a,!1)},L.drawTransparent=function(a){return h.call(this,a,!0)};var R={model:H,view:H,projection:H,inverseModel:H,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};L.drawPick=function(a){a=a||{};var b=this.gl;b.disable(b.CULL_FACE);var c=R;c.model=a.model||H,c.view=a.view||H,c.projection=a.projection||H,c.shape=this._field[2].shape,c.pickId=this.pickId/255,c.lowerBound=this.bounds[0],c.upperBound=this.bounds[1],c.permutation=Q;for(var d=0;d<2;++d)for(var e=c.clipBounds[d],f=0;f<3;++f)e[f]=Math.min(Math.max(this.clipBounds[d][f],-1e8),1e8);var h=g(c,this);if(h.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=c,this._vao.bind(),this._vao.draw(b.TRIANGLES,this._vertexCount),d=0;d<3;++d)this.surfaceProject[d]&&(this._pickShader.uniforms.model=h.projections[d],this._pickShader.uniforms.clipBounds=h.clipBounds[d],this._vao.draw(b.TRIANGLES,this._vertexCount));this._vao.unbind()}if(h.showContour){var i=this._contourPickShader;i.bind(),i.uniforms=c;var j=this._contourVAO;for(j.bind(),f=0;f<3;++f)for(b.lineWidth(this.contourWidth[f]),i.uniforms.permutation=J[f],d=0;d<this.contourLevels[f].length;++d)this._contourCounts[f][d]&&(i.uniforms.height=this.contourLevels[f][d],j.draw(b.LINES,this._contourCounts[f][d],this._contourOffsets[f][d]));for(d=0;d<3;++d)for(i.uniforms.model=h.projections[d],i.uniforms.clipBounds=h.clipBounds[d],f=0;f<3;++f)if(this.contourProject[d][f]){i.uniforms.permutation=J[f],b.lineWidth(this.contourWidth[f]);for(var k=0;k<this.contourLevels[f].length;++k)this._contourCounts[f][k]&&(i.uniforms.height=this.contourLevels[f][k],j.draw(b.LINES,this._contourCounts[f][k],this._contourOffsets[f][k]))}j.unbind()}},L.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=this._field[2].shape,c=this._pickResult,d=b[0]*(a.value[0]+(a.value[2]>>4)/16)/255,e=Math.floor(d),f=d-e,g=b[1]*(a.value[1]+(15&a.value[2])/16)/255,h=Math.floor(g),i=g-h;e+=1,h+=1;var j=c.position;j[0]=j[1]=j[2]=0;for(var k=0;k<2;++k)for(var l=k?f:1-f,m=0;m<2;++m)for(var n=m?i:1-i,o=e+k,p=h+m,q=l*n,r=0;r<3;++r)j[r]+=this._field[r].get(o,p)*q;for(var s=this._pickResult.level,t=0;t<3;++t)if(s[t]=z.le(this.contourLevels[t],j[t]),s[t]<0)this.contourLevels[t].length>0&&(s[t]=0);else if(s[t]<this.contourLevels[t].length-1){var u=this.contourLevels[t][s[t]],v=this.contourLevels[t][s[t]+1];Math.abs(u-j[t])>Math.abs(v-j[t])&&(s[t]+=1)}for(c.index[0]=f<.5?e:e+1,c.index[1]=i<.5?h:h+1,c.uv[0]=d/b[0],c.uv[1]=g/b[1],r=0;r<3;++r)c.dataCoordinate[r]=this._field[r].get(c.index[0],c.index[1]);return c},L.update=function(a){a=a||{},this.dirty=!0,"contourWidth"in a&&(this.contourWidth=j(a.contourWidth,Number)),"showContour"in a&&(this.showContour=j(a.showContour,Boolean)),"showSurface"in a&&(this.showSurface=!!a.showSurface),"contourTint"in a&&(this.contourTint=j(a.contourTint,Boolean)),"contourColor"in a&&(this.contourColor=l(a.contourColor)),"contourProject"in a&&(this.contourProject=j(a.contourProject,function(a){return j(a,Boolean)})),"surfaceProject"in a&&(this.surfaceProject=a.surfaceProject),"dynamicColor"in a&&(this.dynamicColor=l(a.dynamicColor)),"dynamicTint"in a&&(this.dynamicTint=j(a.dynamicTint,Number)),"dynamicWidth"in a&&(this.dynamicWidth=j(a.dynamicWidth,Number)),"opacity"in a&&(this.opacity=a.opacity),"colorBounds"in a&&(this.colorBounds=a.colorBounds),"vertexColor"in a&&(this.vertexColor=a.vertexColor?1:0);var b=a.field||a.coords&&a.coords[2]||null,c=!1;if(b||(b=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in a||"coords"in a){var d=(b.shape[0]+2)*(b.shape[1]+2);d>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(n.nextPow2(d))),this._field[2]=v(this._field[2].data,[b.shape[0]+2,b.shape[1]+2]),i(this._field[2],b),this.shape=b.shape.slice();for(var f=this.shape,g=0;g<2;++g)this._field[2].size>this._field[g].data.length&&(r.freeFloat(this._field[g].data),this._field[g].data=r.mallocFloat(this._field[2].size)),this._field[g]=v(this._field[g].data,[f[0]+2,f[1]+2]);if(a.coords){var h=a.coords;if(!Array.isArray(h)||3!==h.length)throw new Error("gl-surface: invalid coordinates for x/y");for(g=0;g<2;++g){var k=h[g];for(s=0;s<2;++s)if(k.shape[s]!==f[s])throw new Error("gl-surface: coords have incorrect shape");i(this._field[g],k)}}else if(a.ticks){var m=a.ticks;if(!Array.isArray(m)||2!==m.length)throw new Error("gl-surface: invalid ticks");for(g=0;g<2;++g){var o=m[g];if((Array.isArray(o)||o.length)&&(o=v(o)),o.shape[0]!==f[g])throw new Error("gl-surface: invalid tick length");var p=v(o.data,f);p.stride[g]=o.stride[0],p.stride[1^g]=0,i(this._field[g],p)}}else{for(g=0;g<2;++g){var q=[0,0];q[g]=1,this._field[g]=v(this._field[g].data,[f[0]+2,f[1]+2],q,0)}this._field[0].set(0,0,0);for(var s=0;s<f[0];++s)this._field[0].set(s+1,0,s);for(this._field[0].set(f[0]+1,0,f[0]-1),this._field[1].set(0,0,0),s=0;s<f[1];++s)this._field[1].set(0,s+1,s);this._field[1].set(0,f[1]+1,f[1]-1)}var t=this._field,u=v(r.mallocFloat(3*t[2].size*2),[3,f[0]+2,f[1]+2,2]);for(g=0;g<3;++g)A(u.pick(g),t[g],"mirror");var x=v(r.mallocFloat(3*t[2].size),[f[0]+2,f[1]+2,3]);for(g=0;g<f[0]+2;++g)for(s=0;s<f[1]+2;++s){var y=u.get(0,g,s,0),z=u.get(0,g,s,1),B=u.get(1,g,s,0),C=u.get(1,g,s,1),D=u.get(2,g,s,0),E=u.get(2,g,s,1),F=B*E-C*D,G=D*z-E*y,H=y*C-z*B,J=Math.sqrt(F*F+G*G+H*H);J<1e-8?(J=Math.max(Math.abs(F),Math.abs(G),Math.abs(H)),J<1e-8?(H=1,G=F=0,J=1):J=1/J):J=1/Math.sqrt(J),x.set(g,s,0,F*J),x.set(g,s,1,G*J),x.set(g,s,2,H*J)}r.free(u.data);var K=[1/0,1/0,1/0],L=[-1/0,-1/0,-1/0],M=1/0,N=-1/0,O=(f[0]-1)*(f[1]-1)*6,P=r.mallocFloat(n.nextPow2(10*O)),Q=0,R=0;for(g=0;g<f[0]-1;++g)a:for(s=0;s<f[1]-1;++s){for(var S=0;S<2;++S)for(var T=0;T<2;++T)for(var U=0;U<3;++U){var V=this._field[U].get(1+g+S,1+s+T);if(isNaN(V)||!isFinite(V))continue a}for(U=0;U<6;++U){var W=g+I[U][0],X=s+I[U][1],Y=this._field[0].get(W+1,X+1),Z=this._field[1].get(W+1,X+1);V=this._field[2].get(W+1,X+1);var $=V;F=x.get(W+1,X+1,0),G=x.get(W+1,X+1,1),H=x.get(W+1,X+1,2),a.intensity&&($=a.intensity.get(W,X)),P[Q++]=W,P[Q++]=X,P[Q++]=Y,P[Q++]=Z,P[Q++]=V,P[Q++]=0,P[Q++]=$,P[Q++]=F,P[Q++]=G,P[Q++]=H,K[0]=Math.min(K[0],Y),K[1]=Math.min(K[1],Z),K[2]=Math.min(K[2],V),M=Math.min(M,$),L[0]=Math.max(L[0],Y),L[1]=Math.max(L[1],Z),L[2]=Math.max(L[2],V),N=Math.max(N,$),R+=1}}for(a.intensityBounds&&(M=+a.intensityBounds[0],N=+a.intensityBounds[1]),g=6;g<Q;g+=10)P[g]=(P[g]-M)/(N-M);this._vertexCount=R,this._coordinateBuffer.update(P.subarray(0,Q)),r.freeFloat(P),r.free(x.data),this.bounds=[K,L],this.intensity=a.intensity||this._field[2],this.intensityBounds[0]===M&&this.intensityBounds[1]===N||(c=!0),this.intensityBounds=[M,N]}if("levels"in a){var _=a.levels;for(_=Array.isArray(_[0])?_.slice():[[],[],_],g=0;g<3;++g)_[g]=_[g].slice(),_.sort(function(a,b){return a-b});a:for(g=0;g<3;++g){if(_[g].length!==this.contourLevels[g].length){c=!0;break}for(s=0;s<_[g].length;++s)if(_[g][s]!==this.contourLevels[g][s]){c=!0;break a}}this.contourLevels=_}if(c){t=this._field,f=this.shape;for(var aa=[],ba=0;ba<3;++ba){_=this.contourLevels[ba];var ca=[],da=[],ea=[0,0,0];for(g=0;g<_.length;++g){var fa=w(this._field[ba],_[g]);ca.push(aa.length/5|0),R=0;a:for(s=0;s<fa.cells.length;++s){var ga=fa.cells[s];for(U=0;U<2;++U){var ha=fa.positions[ga[U]],ia=ha[0],ja=0|Math.floor(ia),ka=ia-ja,la=ha[1],ma=0|Math.floor(la),na=la-ma,oa=!1;b:for(var pa=0;pa<3;++pa){ea[pa]=0;var qa=(ba+pa+1)%3;for(S=0;S<2;++S){var ra=S?ka:1-ka;for(W=0|Math.min(Math.max(ja+S,0),f[0]),T=0;T<2;++T){var sa=T?na:1-na;if(X=0|Math.min(Math.max(ma+T,0),f[1]),V=pa<2?this._field[qa].get(W,X):(this.intensity.get(W,X)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(V)||isNaN(V)){oa=!0;break b}var ta=ra*sa;ea[pa]+=ta*V}}}if(oa){if(U>0){for(var ua=0;ua<5;++ua)aa.pop();R-=1}continue a}aa.push(ea[0],ea[1],ha[0],ha[1],ea[2]),R+=1}}da.push(R)}this._contourOffsets[ba]=ca,this._contourCounts[ba]=da}var va=r.mallocFloat(aa.length);for(g=0;g<aa.length;++g)va[g]=aa[g];this._contourBuffer.update(va),r.freeFloat(va)}a.colormap&&this._colorMap.setPixels(e(a.colormap))},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var a=0;a<3;++a)r.freeFloat(this._field[a].data)},L.highlight=function(a){if(!a)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var b=0;b<3;++b)this.enableHighlight[b]?this.highlightLevel[b]=a.level[b]:this.highlightLevel[b]=-1;var c;if(c=this.snapToData?a.dataCoordinate:a.position,this.enableDynamic[0]&&c[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&c[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&c[2]!==this.dynamicLevel[2]){for(var d=0,e=this.shape,f=r.mallocFloat(12*e[0]*e[1]),g=0;g<3;++g)if(this.enableDynamic[g]){this.dynamicLevel[g]=c[g];var h=(g+1)%3,i=(g+2)%3,j=this._field[g],k=this._field[h],l=this._field[i],m=(this.intensity,w(j,c[g])),n=m.cells,o=m.positions;for(this._dynamicOffsets[g]=d,b=0;b<n.length;++b)for(var p=n[b],q=0;q<2;++q){var s=o[p[q]],t=+s[0],u=0|t,v=0|Math.min(u+1,e[0]),x=t-u,y=1-x,z=+s[1],A=0|z,B=0|Math.min(A+1,e[1]),C=z-A,D=1-C,E=y*D,F=y*C,G=x*D,H=x*C,I=E*k.get(u,A)+F*k.get(u,B)+G*k.get(v,A)+H*k.get(v,B),J=E*l.get(u,A)+F*l.get(u,B)+G*l.get(v,A)+H*l.get(v,B);if(isNaN(I)||isNaN(J)){q&&(d-=1);break}f[2*d+0]=I,f[2*d+1]=J,d+=1}this._dynamicCounts[g]=d-this._dynamicOffsets[g]}else this.dynamicLevel[g]=NaN,this._dynamicCounts[g]=0;this._dynamicBuffer.update(f.subarray(0,2*d)),r.freeFloat(f)}}},{"./lib/shaders":253,"binary-search-bounds":70,"bit-twiddle":71,colormap:105,"gl-buffer":165,"gl-mat4/invert":186,"gl-mat4/multiply":188,"gl-texture2d":255,"gl-vao":259,ndarray:458,"ndarray-gradient":449,"ndarray-ops":452,"ndarray-pack":453,"surface-nets":540,"typedarray-pool":554}],255:[function(a,b,c){"use strict";function d(a){r=[a.LINEAR,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_NEAREST],s=[a.NEAREST,a.LINEAR,a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR],t=[a.REPEAT,a.CLAMP_TO_EDGE,a.MIRRORED_REPEAT]}function e(a){return"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&a instanceof ImageData}function f(a,b,c){var d=a.gl,e=d.getParameter(d.MAX_TEXTURE_SIZE);if(b<0||b>e||c<0||c>e)throw new Error("gl-texture2d: Invalid texture size");return a._shape=[b,c],a.bind(),d.texImage2D(d.TEXTURE_2D,0,a.format,b,c,0,a.format,a.type,null),a._mipLevels=[0],a}function g(a,b,c,d,e,f){this.gl=a,this.handle=b,this.format=e,this.type=f,this._shape=[c,d],this._mipLevels=[0],this._magFilter=a.NEAREST,this._minFilter=a.NEAREST,this._wrapS=a.CLAMP_TO_EDGE,this._wrapT=a.CLAMP_TO_EDGE,this._anisoSamples=1;var g=this,h=[this._wrapS,this._wrapT];Object.defineProperties(h,[{get:function(){return g._wrapS},set:function(a){return g.wrapS=a}},{get:function(){return g._wrapT},set:function(a){return g.wrapT=a}}]),this._wrapVector=h;var i=[this._shape[0],this._shape[1]];Object.defineProperties(i,[{get:function(){return g._shape[0]},set:function(a){return g.width=a}},{get:function(){return g._shape[1]},set:function(a){return g.height=a}}]),this._shapeVector=i}function h(a,b){return 3===a.length?1===b[2]&&b[1]===a[0]*a[2]&&b[0]===a[2]:1===b[0]&&b[1]===a[0]}function i(a,b,c,d,e,f,g,i){var j=i.dtype,k=i.shape.slice();if(k.length<2||k.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var l=0,m=0,n=h(k,i.stride.slice());"float32"===j?l=a.FLOAT:"float64"===j?(l=a.FLOAT,n=!1,j="float32"):"uint8"===j?l=a.UNSIGNED_BYTE:(l=a.UNSIGNED_BYTE,n=!1,j="uint8");if(2===k.length)m=a.LUMINANCE,k=[k[0],k[1],1],i=o(i.data,k,[i.stride[0],i.stride[1],1],i.offset);else{if(3!==k.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===k[2])m=a.ALPHA;else if(2===k[2])m=a.LUMINANCE_ALPHA;else if(3===k[2])m=a.RGB;else{if(4!==k[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");m=a.RGBA}k[2]}if(m!==a.LUMINANCE&&m!==a.ALPHA||e!==a.LUMINANCE&&e!==a.ALPHA||(m=e),m!==e)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var r=i.size,s=g.indexOf(d)<0;if(s&&g.push(d),l===f&&n)0===i.offset&&i.data.length===r?s?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data):s?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data.subarray(i.offset,i.offset+r)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data.subarray(i.offset,i.offset+r));else{var t;t=f===a.FLOAT?q.mallocFloat32(r):q.mallocUint8(r);var v=o(t,k,[k[2],k[2]*k[0],1]);l===a.FLOAT&&f===a.UNSIGNED_BYTE?u(v,i):p.assign(v,i),s?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,t.subarray(0,r)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,t.subarray(0,r)),f===a.FLOAT?q.freeFloat32(t):q.freeUint8(t)}}function j(a){var b=a.createTexture();return a.bindTexture(a.TEXTURE_2D,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),b}function k(a,b,c,d,e){var f=a.getParameter(a.MAX_TEXTURE_SIZE);if(b<0||b>f||c<0||c>f)throw new Error("gl-texture2d: Invalid texture shape");if(e===a.FLOAT&&!a.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var h=j(a);return a.texImage2D(a.TEXTURE_2D,0,d,b,c,0,d,e,null),new g(a,h,b,c,d,e)}function l(a,b,c,d,e,f){var h=j(a);return a.texImage2D(a.TEXTURE_2D,0,e,e,f,b),new g(a,h,c,d,e,f)}function m(a,b){var c=b.dtype,d=b.shape.slice(),e=a.getParameter(a.MAX_TEXTURE_SIZE);if(d[0]<0||d[0]>e||d[1]<0||d[1]>e)throw new Error("gl-texture2d: Invalid texture size");var f=h(d,b.stride.slice()),i=0;"float32"===c?i=a.FLOAT:"float64"===c?(i=a.FLOAT,f=!1,c="float32"):"uint8"===c?i=a.UNSIGNED_BYTE:(i=a.UNSIGNED_BYTE,f=!1,c="uint8");var k=0;if(2===d.length)k=a.LUMINANCE,d=[d[0],d[1],1],b=o(b.data,d,[b.stride[0],b.stride[1],1],b.offset);else{if(3!==d.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===d[2])k=a.ALPHA;else if(2===d[2])k=a.LUMINANCE_ALPHA;else if(3===d[2])k=a.RGB;else{if(4!==d[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");k=a.RGBA}}i!==a.FLOAT||a.getExtension("OES_texture_float")||(i=a.UNSIGNED_BYTE,f=!1);var l,m,n=b.size;if(f)l=0===b.offset&&b.data.length===n?b.data:b.data.subarray(b.offset,b.offset+n);else{var r=[d[2],d[2]*d[0],1];m=q.malloc(n,c);var s=o(m,d,r,0);"float32"!==c&&"float64"!==c||i!==a.UNSIGNED_BYTE?p.assign(s,b):u(s,b),l=m.subarray(0,n)}var t=j(a);return a.texImage2D(a.TEXTURE_2D,0,k,d[0],d[1],0,k,i,l),f||q.free(m),new g(a,t,d[0],d[1],k,i)}function n(a){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||d(a),"number"==typeof arguments[1])return k(a,arguments[1],arguments[2],arguments[3]||a.RGBA,arguments[4]||a.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return k(a,0|arguments[1][0],0|arguments[1][1],arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var b=arguments[1],c=e(b)?b:b.raw;if(c)return l(a,c,0|b.width,0|b.height,arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if(b.shape&&b.data&&b.stride)return m(a,b)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var o=a("ndarray"),p=a("ndarray-ops"),q=a("typedarray-pool");b.exports=n;var r=null,s=null,t=null,u=function(a,b){p.muls(a,b,255)},v=g.prototype;Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&r.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a),this._minFilter=a}},magFilter:{get:function(){return this._magFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&r.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a),this._magFilter=a}},mipSamples:{get:function(){return this._anisoSamples},set:function(a){var b=this._anisoSamples;if(this._anisoSamples=0|Math.max(a,1),b!==this._anisoSamples){var c=this.gl.getExtension("EXT_texture_filter_anisotropic");c&&this.gl.texParameterf(this.gl.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(a){if(this.bind(),t.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,a),this._wrapS=a}},wrapT:{get:function(){return this._wrapT},set:function(a){if(this.bind(),t.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,a),this._wrapT=a}},wrap:{get:function(){return this._wrapVector},set:function(a){if(Array.isArray(a)||(a=[a,a]),2!==a.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var b=0;b<2;++b)if(t.indexOf(a[b])<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);this._wrapS=a[0],this._wrapT=a[1];var c=this.gl;return this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),a}},shape:{get:function(){return this._shapeVector},set:function(a){if(Array.isArray(a)){if(2!==a.length)throw new Error("gl-texture2d: Invalid texture shape")}else a=[0|a,0|a];return f(this,0|a[0],0|a[1]),[0|a[0],0|a[1]]}},width:{get:function(){return this._shape[0]},set:function(a){return a|=0,f(this,a,this._shape[1]),a}},height:{get:function(){return this._shape[1]},set:function(a){return a|=0,f(this,this._shape[0],a),a}}}),v.bind=function(a){var b=this.gl;return void 0!==a&&b.activeTexture(b.TEXTURE0+(0|a)),b.bindTexture(b.TEXTURE_2D,this.handle),void 0!==a?0|a:b.getParameter(b.ACTIVE_TEXTURE)-b.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var a=Math.min(this._shape[0],this._shape[1]),b=0;a>0;++b,a>>>=1)this._mipLevels.indexOf(b)<0&&this._mipLevels.push(b)},v.setPixels=function(a,b,c,d){var f=this.gl;this.bind(),Array.isArray(b)?(d=c,c=0|b[1],b=0|b[0]):(b=b||0,c=c||0),d=d||0;var g=e(a)?a:a.raw;if(g){this._mipLevels.indexOf(d)<0?(f.texImage2D(f.TEXTURE_2D,0,this.format,this.format,this.type,g),this._mipLevels.push(d)):f.texSubImage2D(f.TEXTURE_2D,d,b,c,this.format,this.type,g)}else{if(!(a.shape&&a.stride&&a.data))throw new Error("gl-texture2d: Unsupported data type");if(a.shape.length<2||b+a.shape[1]>this._shape[1]>>>d||c+a.shape[0]>this._shape[0]>>>d||b<0||c<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");i(f,b,c,d,this.format,this.type,this._mipLevels,a)}}},{ndarray:458,"ndarray-ops":452,"typedarray-pool":554}],256:[function(a,b,c){"use strict";function d(a,b,c){b?b.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var d=0|a.getParameter(a.MAX_VERTEX_ATTRIBS);if(c){if(c.length>d)throw new Error("gl-vao: Too many vertex attributes");for(var e=0;e<c.length;++e){var f=c[e];if(f.buffer){var g=f.buffer,h=f.size||4,i=f.type||a.FLOAT,j=!!f.normalized,k=f.stride||0,l=f.offset||0;g.bind(),a.enableVertexAttribArray(e),a.vertexAttribPointer(e,h,i,j,k,l)}else{if("number"==typeof f)a.vertexAttrib1f(e,f);else if(1===f.length)a.vertexAttrib1f(e,f[0]);else if(2===f.length)a.vertexAttrib2f(e,f[0],f[1]);else if(3===f.length)a.vertexAttrib3f(e,f[0],f[1],f[2]);else{if(4!==f.length)throw new Error("gl-vao: Invalid vertex attribute");a.vertexAttrib4f(e,f[0],f[1],f[2],f[3])}a.disableVertexAttribArray(e)}}for(;e<d;++e)a.disableVertexAttribArray(e)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var e=0;e<d;++e)a.disableVertexAttribArray(e)}}b.exports=d},{}],257:[function(a,b,c){"use strict";function d(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}function e(a){return new d(a)}var f=a("./do-bind.js");d.prototype.bind=function(){f(this.gl,this._elements,this._attributes)},d.prototype.update=function(a,b,c){this._elements=b,this._attributes=a,this._elementsType=c||this.gl.UNSIGNED_SHORT},d.prototype.dispose=function(){},d.prototype.unbind=function(){},d.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._elements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=e},{"./do-bind.js":256}],258:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this.location=a,this.dimension=b,this.a=c,this.b=d,this.c=e,this.d=f}function e(a,b,c){this.gl=a,this._ext=b,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}function f(a,b){return new e(a,b,b.createVertexArrayOES())}var g=a("./do-bind.js");d.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},e.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},e.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},e.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},e.prototype.update=function(a,b,c){if(this.bind(),g(this.gl,b,a),this.unbind(),this._attribs.length=0,a)for(var e=0;e<a.length;++e){var f=a[e];"number"==typeof f?this._attribs.push(new d(e,1,f)):Array.isArray(f)&&this._attribs.push(new d(e,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!b,this._elementsType=c||this.gl.UNSIGNED_SHORT},e.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._useElements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=f},{"./do-bind.js":256}],259:[function(a,b,c){"use strict";function d(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}function e(a,b,c,e){var h,i=a.createVertexArray?new d(a):a.getExtension("OES_vertex_array_object");return h=i?f(a,i):g(a),h.update(b,c,e),h}var f=a("./lib/vao-native.js"),g=a("./lib/vao-emulated.js");b.exports=e},{"./lib/vao-emulated.js":257,"./lib/vao-native.js":258}],260:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a}b.exports=d},{}],261:[function(a,b,c){function d(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}b.exports=d},{}],262:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)}b.exports=d},{}],263:[function(a,b,c){function d(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a}b.exports=d},{}],264:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a}b.exports=d},{}],265:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}b.exports=d},{}],266:[function(a,b,c){function d(a,b,c,d){return e[0]=d,e[1]=c,e[2]=b,e[3]=a,f[0]}b.exports=d;var e=new Uint8Array(4),f=new Float32Array(e.buffer)},{}],267:[function(a,b,c){function d(a){for(var b=Array.isArray(a)?a:e(a),c=0;c<b.length;c++){var d=b[c];if("preprocessor"===d.type){var g=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(g&&g[2]){var h=g[1],i=g[2];return(h?f(i):i).trim()}}}}var e=a("glsl-tokenizer"),f=a("atob-lite");b.exports=d},{"atob-lite":52,"glsl-tokenizer":274}],268:[function(a,b,c){function d(a){function b(a){a.length&&Q.push({type:x[O],data:a,position:T,line:R,column:S})}function c(a){M=0,W+=a,L=W.length;for(var b;J=W[M],M<L;){switch(b=M,O){case l:M=C();break;case m:M=B();break;case n:M=A();break;case o:M=D();break;case p:M=G();break;case w:M=F();break;case q:M=H();break;case k:M=I();break;case u:M=z();break;case j:M=y()}if(b!==M)switch(W[b]){case"\n":S=0,++R;break;default:++S}}return N+=M,W=W.slice(M),Q}function d(a){return P.length&&b(P.join("")),O=v,b("(eof)"),Q}function y(){return P=P.length?[]:P,"/"===K&&"*"===J?(T=N+M-1,O=l,K=J,M+1):"/"===K&&"/"===J?(T=N+M-1,O=m,K=J,M+1):"#"===J?(O=n,T=N+M,M):/\s/.test(J)?(O=u,T=N+M,M):(U=/\d/.test(J),V=/[^\w_]/.test(J),T=N+M,O=U?p:V?o:k,M)}function z(){return/[^\s]/g.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function A(){return"\r"!==J&&"\n"!==J||"\\"===K?(P.push(J),K=J,M+1):(b(P.join("")),O=j,M)}function B(){return A()}function C(){return"/"===J&&"*"===K?(P.push(J),b(P.join("")),O=j,M+1):(P.push(J),K=J,M+1)}function D(){if("."===K&&/\d/.test(J))return O=q,M;if("/"===K&&"*"===J)return O=l,M;if("/"===K&&"/"===J)return O=m,M;if("."===J&&P.length){for(;E(P););return O=q,M}if(";"===J||")"===J||"("===J){if(P.length)for(;E(P););return b(J),O=j,M+1}var a=2===P.length&&"="!==J;if(/[\w_\d\s]/.test(J)||a){for(;E(P););return O=j,M}return P.push(J),K=J,M+1}function E(a){for(var c,d,e=0;;){if(c=f.indexOf(a.slice(0,a.length+e).join("")),d=f[c],-1===c){if(e--+a.length>0)continue;d=a.slice(0,1).join("")}return b(d),T+=d.length,P=P.slice(d.length),P.length}}function F(){return/[^a-fA-F0-9]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function G(){return"."===J?(P.push(J),O=q,K=J,M+1):/[eE]/.test(J)?(P.push(J),O=q,K=J,M+1):"x"===J&&1===P.length&&"0"===P[0]?(O=w,P.push(J),K=J,M+1):/[^\d]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function H(){return"f"===J&&(P.push(J),K=J,M+=1),/[eE]/.test(J)?(P.push(J),K=J,M+1):"-"===J&&/[eE]/.test(K)?(P.push(J),K=J,M+1):/[^\d]/.test(J)?(b(P.join("")),O=j,M):(P.push(J),K=J,M+1)}function I(){if(/[^\d\w_]/.test(J)){var a=P.join("");return O=Y.indexOf(a)>-1?t:X.indexOf(a)>-1?s:r,b(P.join("")),O=j,M}return P.push(J),K=J,M+1}var J,K,L,M=0,N=0,O=j,P=[],Q=[],R=1,S=0,T=0,U=!1,V=!1,W="";a=a||{};var X=g,Y=e;return"300 es"===a.version&&(X=i,Y=h),function(a){return Q=[],null!==a?c(a.replace?a.replace(/\r\n/g,"\n"):a):d()}}b.exports=d;var e=a("./lib/literals"),f=a("./lib/operators"),g=a("./lib/builtins"),h=a("./lib/literals-300es"),i=a("./lib/builtins-300es"),j=999,k=9999,l=0,m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=9,v=10,w=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":270,"./lib/builtins-300es":269,"./lib/literals":272,"./lib/literals-300es":271,"./lib/operators":273}],269:[function(a,b,c){var d=a("./builtins");d=d.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),b.exports=d.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":270}],270:[function(a,b,c){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],271:[function(a,b,c){var d=a("./literals");b.exports=d.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":272}],272:[function(a,b,c){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],273:[function(a,b,c){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],274:[function(a,b,c){function d(a,b){var c=e(b),d=[];return d=d.concat(c(a)),d=d.concat(c(null))}var e=a("./index");b.exports=d},{"./index":268}],275:[function(a,b,c){"use strict";function d(a,b,c){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var f=new Int32Array(this.arrayBuffer);a=f[0],b=f[1],c=f[2],this.d=b+2*c;for(var g=0;g<this.d*this.d;g++){var h=f[e+g],i=f[e+g+1];d.push(h===i?null:f.subarray(h,i))}var j=f[e+d.length],k=f[e+d.length+1];this.keys=f.subarray(j,k),this.bboxes=f.subarray(k),this.insert=this._insertReadonly}else{this.d=b+2*c;for(var l=0;l<this.d*this.d;l++)d.push([]);this.keys=[],this.bboxes=[]}this.n=b,this.extent=a,this.padding=c,this.scale=b/a,this.uid=0;var m=c/b*a;this.min=-m,this.max=a+m}b.exports=d;var e=3;d.prototype.insert=function(a,b,c,d,e){this._forEachCell(b,c,d,e,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(b),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(e)},d.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},d.prototype._insertCell=function(a,b,c,d,e,f){this.cells[e].push(f)},d.prototype.query=function(a,b,c,d){var e=this.min,f=this.max;if(a<=e&&b<=e&&f<=c&&f<=d)return Array.prototype.slice.call(this.keys);var g=[],h={};return this._forEachCell(a,b,c,d,this._queryCell,g,h),g},d.prototype._queryCell=function(a,b,c,d,e,f,g){var h=this.cells[e];if(null!==h)for(var i=this.keys,j=this.bboxes,k=0;k<h.length;k++){var l=h[k];if(void 0===g[l]){var m=4*l;a<=j[m+2]&&b<=j[m+3]&&c>=j[m+0]&&d>=j[m+1]?(g[l]=!0,f.push(i[l])):g[l]=!1}}},d.prototype._forEachCell=function(a,b,c,d,e,f,g){for(var h=this._convertToCellCoord(a),i=this._convertToCellCoord(b),j=this._convertToCellCoord(c),k=this._convertToCellCoord(d),l=h;l<=j;l++)for(var m=i;m<=k;m++){var n=this.d*m+l;if(e.call(this,a,b,c,d,n,f,g))return}},d.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},d.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,b=e+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=this.cells[d].length;var f=new Int32Array(b+c+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var g=b,h=0;h<a.length;h++){var i=a[h];f[e+h]=g,f.set(i,g),g+=i.length}return f[e+a.length]=g,f.set(this.keys,g),g+=this.keys.length,f[e+a.length+1]=g,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer}},{}],276:[function(a,b,c){(function(c){"use strict";var d,e=a("is-browser");d="function"==typeof c.matchMedia?!c.matchMedia("(hover: none)").matches:e,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":282}],277:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],278:[function(a,b,c){"use strict";function d(a,b,c){this.vertices=a,this.adjacent=b,this.boundary=c,this.lastVisited=-1}function e(a,b,c){this.vertices=a,this.cell=b,this.index=c}function f(a,b){return k(a.vertices,b.vertices)}function g(a){for(var b=["function orient(){var tuple=this.tuple;return test("],c=0;c<=a;++c)c>0&&b.push(","),b.push("tuple[",c,"]");b.push(")}return orient");var d=new Function("test",b.join("")),e=j[a+1];return e||(e=j),d(e)}function h(a,b,c){this.dimension=a,this.vertices=b,this.simplices=c,this.interior=c.filter(function(a){return!a.boundary}),this.tuple=new Array(a+1);for(var d=0;d<=a;++d)this.tuple[d]=this.vertices[d];var e=l[a];e||(e=l[a]=g(a)),this.orient=e}function i(a,b){var c=a.length;if(0===c)throw new Error("Must have at least d+1 points");var e=a[0].length;if(c<=e)throw new Error("Must input at least d+1 points");var f=a.slice(0,e+1),g=j.apply(void 0,f);if(0===g)throw new Error("Input not in general position");for(var i=new Array(e+1),k=0;k<=e;++k)i[k]=k;g<0&&(i[0]=1,i[1]=0);for(var l=new d(i,new Array(e+1),!1),m=l.adjacent,n=new Array(e+2),k=0;k<=e;++k){for(var o=i.slice(),p=0;p<=e;++p)p===k&&(o[p]=-1);var q=o[0];o[0]=o[1],o[1]=q;var r=new d(o,new Array(e+1),!0);m[k]=r,n[k]=r}n[e+1]=l;for(var k=0;k<=e;++k)for(var o=m[k].vertices,s=m[k].adjacent,p=0;p<=e;++p){var t=o[p];if(t<0)s[p]=l;else for(var u=0;u<=e;++u)m[u].vertices.indexOf(t)<0&&(s[p]=m[u])}for(var v=new h(e,f,n),w=!!b,k=e+1;k<c;++k)v.insert(a[k],w);return v.boundary()}b.exports=i;var j=a("robust-orientation"),k=a("simplicial-complex").compareCells;d.prototype.flip=function(){var a=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=a;var b=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=b};var l=[],m=h.prototype;m.handleBoundaryDegeneracy=function(a,b){var c=this.dimension,d=this.vertices.length-1,e=this.tuple,f=this.vertices,g=[a];for(a.lastVisited=-d;g.length>0;){a=g.pop();for(var h=(a.vertices,a.adjacent),i=0;i<=c;++i){var j=h[i];if(j.boundary&&!(j.lastVisited<=-d)){for(var k=j.vertices,l=0;l<=c;++l){var m=k[l];e[l]=m<0?b:f[m]}var n=this.orient();if(n>0)return j;j.lastVisited=-d,0===n&&g.push(j)}}}return null},m.walk=function(a,b){var c=this.vertices.length-1,d=this.dimension,e=this.vertices,f=this.tuple,g=b?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[g];a:for(;!h.boundary;){for(var i=h.vertices,j=h.adjacent,k=0;k<=d;++k)f[k]=e[i[k]];h.lastVisited=c;for(var k=0;k<=d;++k){var l=j[k];if(!(l.lastVisited>=c)){var m=f[k];f[k]=a;var n=this.orient();if(f[k]=m,n<0){h=l;continue a}l.boundary?l.lastVisited=-c:l.lastVisited=c}}return}return h},m.addPeaks=function(a,b){var c=this.vertices.length-1,g=this.dimension,h=this.vertices,i=this.tuple,j=this.interior,k=this.simplices,l=[b];b.lastVisited=c,b.vertices[b.vertices.indexOf(-1)]=c,b.boundary=!1,j.push(b);for(var m=[];l.length>0;){var b=l.pop(),n=b.vertices,o=b.adjacent,p=n.indexOf(c);if(!(p<0))for(var q=0;q<=g;++q)if(q!==p){var r=o[q];if(r.boundary&&!(r.lastVisited>=c)){var s=r.vertices;if(r.lastVisited!==-c){for(var t=0,u=0;u<=g;++u)s[u]<0?(t=u,i[u]=a):i[u]=h[s[u]];var v=this.orient();if(v>0){s[t]=c,r.boundary=!1,j.push(r),l.push(r),r.lastVisited=c;continue}r.lastVisited=-c}var w=r.adjacent,x=n.slice(),y=o.slice(),z=new d(x,y,!0);k.push(z);var A=w.indexOf(b);if(!(A<0)){w[A]=z,y[p]=r,x[q]=-1,y[q]=b,o[q]=z,z.flip();for(var u=0;u<=g;++u){var B=x[u];if(!(B<0||B===c)){for(var C=new Array(g-1),D=0,E=0;E<=g;++E){var F=x[E];F<0||E===u||(C[D++]=F)}m.push(new e(C,z,u))}}}}}}m.sort(f);for(var q=0;q+1<m.length;q+=2){var G=m[q],H=m[q+1],I=G.index,J=H.index;I<0||J<0||(G.cell.adjacent[G.index]=H.cell,H.cell.adjacent[H.index]=G.cell)}},m.insert=function(a,b){var c=this.vertices;c.push(a);var d=this.walk(a,b);if(d){for(var e=this.dimension,f=this.tuple,g=0;g<=e;++g){var h=d.vertices[g];f[g]=h<0?a:c[h]}var i=this.orient(f);i<0||(0!==i||(d=this.handleBoundaryDegeneracy(d,a)))&&this.addPeaks(a,d)}},m.boundary=function(){for(var a=this.dimension,b=[],c=this.simplices,d=c.length,e=0;e<d;++e){var f=c[e];if(f.boundary){for(var g=new Array(a),h=f.vertices,i=0,j=0,k=0;k<=a;++k)h[k]>=0?g[i++]=h[k]:j=1&k;if(j===(1&a)){var l=g[0];g[0]=g[1],g[1]=l}b.push(g)}}return b}},{"robust-orientation":515,"simplicial-complex":526}],279:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.mid=a,this.left=b,this.right=c,this.leftPoints=d,this.rightPoints=e,this.count=(b?b.count:0)+(c?c.count:0)+d.length}function e(a,b){a.mid=b.mid,a.left=b.left,a.right=b.right,a.leftPoints=b.leftPoints,a.rightPoints=b.rightPoints,a.count=b.count}function f(a,b){var c=o(b);a.mid=c.mid,a.left=c.left,a.right=c.right,a.leftPoints=c.leftPoints,a.rightPoints=c.rightPoints,a.count=c.count}function g(a,b){var c=a.intervals([]);c.push(b),f(a,c)}function h(a,b){var c=a.intervals([]),d=c.indexOf(b);return d<0?s:(c.splice(d,1),f(a,c),t)}function i(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var e=c(a[d]);if(e)return e}}function j(a,b,c){for(var d=a.length-1;d>=0&&a[d][1]>=b;--d){var e=c(a[d]);if(e)return e}}function k(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function l(a,b){return a-b}function m(a,b){var c=a[0]-b[0];return c||a[1]-b[1]}function n(a,b){var c=a[1]-b[1];return c||a[0]-b[0]}function o(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(l);for(var e=b[b.length>>1],f=[],g=[],h=[],c=0;c<a.length;++c){var i=a[c];i[1]<e?f.push(i):e<i[0]?g.push(i):h.push(i)}var j=h,k=h.slice();return j.sort(m),k.sort(n),new d(e,o(f),o(g),j,k)}function p(a){this.root=a}function q(a){return new p(a&&0!==a.length?o(a):null)}var r=a("binary-search-bounds"),s=0,t=1;b.exports=q;var u=d.prototype;u.intervals=function(a){return a.push.apply(a,this.leftPoints),this.left&&this.left.intervals(a),this.right&&this.right.intervals(a),a},u.insert=function(a){var b=this.count-this.leftPoints.length;if(this.count+=1,a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?g(this,a):this.left.insert(a):this.left=o([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?g(this,a):this.right.insert(a):this.right=o([a]);else{var c=r.ge(this.leftPoints,a,m),d=r.ge(this.rightPoints,a,n);this.leftPoints.splice(c,0,a),this.rightPoints.splice(d,0,a)}},u.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return s;if(4*(this.right?this.right.count:0)>3*(b-1))return h(this,a);var c=this.left.remove(a);return 2===c?(this.left=null,this.count-=1,t):(c===t&&(this.count-=1),c)}if(a[0]>this.mid){if(!this.right)return s;if(4*(this.left?this.left.count:0)>3*(b-1))return h(this,a);var c=this.right.remove(a);return 2===c?(this.right=null,this.count-=1,t):(c===t&&(this.count-=1),c)}if(1===this.count)return this.leftPoints[0]===a?2:s;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){for(var d=this,f=this.left;f.right;)d=f,f=f.right;if(d===this)f.right=this.right;else{var g=this.left,c=this.right;d.count-=f.count,d.right=f.left,f.left=g,f.right=c}e(this,f),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?e(this,this.left):e(this,this.right);return t}for(var g=r.ge(this.leftPoints,a,m);g<this.leftPoints.length&&this.leftPoints[g][0]===a[0];++g)if(this.leftPoints[g]===a){this.count-=1,this.leftPoints.splice(g,1);for(var c=r.ge(this.rightPoints,a,n);c<this.rightPoints.length&&this.rightPoints[c][1]===a[1];++c)if(this.rightPoints[c]===a)return this.rightPoints.splice(c,1),t}return s},u.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,b);if(c)return c}return i(this.leftPoints,a,b)}if(a>this.mid){if(this.right){var c=this.right.queryPoint(a,b);if(c)return c}return j(this.rightPoints,a,b)}return k(this.leftPoints,b)},u.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var d=this.left.queryInterval(a,b,c);if(d)return d}if(b>this.mid&&this.right){var d=this.right.queryInterval(a,b,c);if(d)return d}return b<this.mid?i(this.leftPoints,b,c):a>this.mid?j(this.rightPoints,a,c):k(this.leftPoints,c)};var v=p.prototype;v.insert=function(a){this.root?this.root.insert(a):this.root=new d(a[0],null,null,[a],[a])},v.remove=function(a){if(this.root){var b=this.root.remove(a);return 2===b&&(this.root=null),b!==s}return!1},v.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)},v.queryInterval=function(a,b,c){if(a<=b&&this.root)return this.root.queryInterval(a,b,c)},Object.defineProperty(v,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(v,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":70}],280:[function(a,b,c){"use strict";function d(a,b){b=b||new Array(a.length);for(var c=0;c<a.length;++c)b[a[c]]=c;return b}b.exports=d},{}],281:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=c;return b}b.exports=d},{}],282:[function(a,b,c){b.exports=!0},{}],283:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],284:[function(a,b,c){"use strict";b.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],285:[function(a,b,c){function d(a){return a||"undefined"==typeof navigator||(a=navigator.userAgent),a&&a.headers&&"string"==typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]),"string"==typeof a&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))}b.exports=d},{}],286:[function(a,b,c){"use strict";var d=Object.prototype.toString;b.exports=function(a){var b;return"[object Object]"===d.call(a)&&(null===(b=Object.getPrototypeOf(a))||b===Object.getPrototypeOf({}))}},{}],287:[function(a,b,c){"use strict";b.exports=function(a){return"string"==typeof a&&(a=a.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(a)&&/[\dz]$/i.test(a)&&a.length>4))}},{}],288:[function(a,b,c){"use strict";function d(a,b,c,d,f){return new e(a,b,c,d,f)}function e(a,b,c,d,e){b=b||f,c=c||g,e=e||Array,this.nodeSize=d||64,this.points=a,this.ids=new e(a.length),this.coords=new e(2*a.length);for(var i=0;i<a.length;i++)this.ids[i]=i,this.coords[2*i]=b(a[i]),this.coords[2*i+1]=c(a[i]);h(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function f(a){return a[0]}function g(a){return a[1]}var h=a("./sort"),i=a("./range"),j=a("./within");b.exports=d,e.prototype={range:function(a,b,c,d){return i(this.ids,this.coords,a,b,c,d,this.nodeSize)},within:function(a,b,c){return j(this.ids,this.coords,a,b,c,this.nodeSize)}}},{"./range":289,"./sort":290,"./within":291}],289:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){for(var h,i,j=[0,a.length-1,0],k=[];j.length;){var l=j.pop(),m=j.pop(),n=j.pop();if(m-n<=g)for(var o=n;o<=m;o++)h=b[2*o],i=b[2*o+1],h>=c&&h<=e&&i>=d&&i<=f&&k.push(a[o]);else{var p=Math.floor((n+m)/2);h=b[2*p],i=b[2*p+1],h>=c&&h<=e&&i>=d&&i<=f&&k.push(a[p]);var q=(l+1)%2;(0===l?c<=h:d<=i)&&(j.push(n),j.push(p-1),
j.push(q)),(0===l?e>=h:f>=i)&&(j.push(p+1),j.push(m),j.push(q))}}return k}b.exports=d},{}],290:[function(a,b,c){"use strict";function d(a,b,c,f,g,h){if(!(g-f<=c)){var i=Math.floor((f+g)/2);e(a,b,i,f,g,h%2),d(a,b,c,f,i-1,h+1),d(a,b,c,i+1,g,h+1)}}function e(a,b,c,d,g,h){for(;g>d;){if(g-d>600){var i=g-d+1,j=c-d+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(j-i/2<0?-1:1);e(a,b,c,Math.max(d,Math.floor(c-j*l/i+m)),Math.min(g,Math.floor(c+(i-j)*l/i+m)),h)}var n=b[2*c+h],o=d,p=g;for(f(a,b,d,c),b[2*g+h]>n&&f(a,b,d,g);o<p;){for(f(a,b,o,p),o++,p--;b[2*o+h]<n;)o++;for(;b[2*p+h]>n;)p--}b[2*d+h]===n?f(a,b,d,p):(p++,f(a,b,p,g)),p<=c&&(d=p+1),c<=p&&(g=p-1)}}function f(a,b,c,d){g(a,c,d),g(b,2*c,2*d),g(b,2*c+1,2*d+1)}function g(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}b.exports=d},{}],291:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h=[0,a.length-1,0],i=[],j=f*f;h.length;){var k=h.pop(),l=h.pop(),m=h.pop();if(l-m<=g)for(var n=m;n<=l;n++)e(b[2*n],b[2*n+1],c,d)<=j&&i.push(a[n]);else{var o=Math.floor((m+l)/2),p=b[2*o],q=b[2*o+1];e(p,q,c,d)<=j&&i.push(a[o]);var r=(k+1)%2;(0===k?c-f<=p:d-f<=q)&&(h.push(m),h.push(o-1),h.push(r)),(0===k?c+f>=p:d+f>=q)&&(h.push(o+1),h.push(l),h.push(r))}}return i}function e(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f}b.exports=d},{}],292:[function(a,b,c){"use strict";function d(a,b){if(!(this instanceof d))return new d(a,b);this.nodeSize=b||64,this.coords=a.slice();var c=Math.floor(a.length/2);this.ids=Array(c);for(var e=0;e<c;e++)this.ids[e]=e;f(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function e(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f}function f(a,b,c,d,e,h){if(!(e-d<=c)){var i=Math.floor((d+e)/2);g(a,b,i,d,e,h%2),f(a,b,c,d,i-1,h+1),f(a,b,c,i+1,e,h+1)}}function g(a,b,c,d,e,f){for(;e>d;){if(e-d>600){var i=e-d+1,j=c-d+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(j-i/2<0?-1:1);g(a,b,c,Math.max(d,Math.floor(c-j*l/i+m)),Math.min(e,Math.floor(c+(i-j)*l/i+m)),f)}var n=b[2*c+f],o=d,p=e;for(h(a,b,d,c),b[2*e+f]>n&&h(a,b,d,e);o<p;){for(h(a,b,o,p),o++,p--;b[2*o+f]<n;)o++;for(;b[2*p+f]>n;)p--}b[2*d+f]===n?h(a,b,d,p):(p++,h(a,b,p,e)),p<=c&&(d=p+1),c<=p&&(e=p-1)}}function h(a,b,c,d){i(a,c,d),i(b,2*c,2*d),i(b,2*c+1,2*d+1)}function i(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}b.exports=d,d.prototype.range=function(a,b,c,d){for(var e,f,g=this.ids,h=this.coords,i=this.nodeSize,j=[0,g.length-1,0],k=[];j.length;){var l=j.pop(),m=j.pop(),n=j.pop();if(m-n<=i)for(var o=n;o<=m;o++)e=h[2*o],f=h[2*o+1],e>=a&&e<=c&&f>=b&&f<=d&&k.push(g[o]);else{var p=Math.floor((n+m)/2);e=h[2*p],f=h[2*p+1],e>=a&&e<=c&&f>=b&&f<=d&&k.push(g[p]);var q=(l+1)%2;(0===l?a<=e:b<=f)&&(j.push(n),j.push(p-1),j.push(q)),(0===l?c>=e:d>=f)&&(j.push(p+1),j.push(m),j.push(q))}}return k},d.prototype.within=function(a,b,c){for(var d=this.ids,f=this.coords,g=this.nodeSize,h=[0,d.length-1,0],i=[],j=c*c;h.length;){var k=h.pop(),l=h.pop(),m=h.pop();if(l-m<=g)for(var n=m;n<=l;n++)e(f[2*n],f[2*n+1],a,b)<=j&&i.push(d[n]);else{var o=Math.floor((m+l)/2),p=f[2*o],q=f[2*o+1];e(p,q,a,b)<=j&&i.push(d[o]);var r=(k+1)%2;(0===k?a-c<=p:b-c<=q)&&(h.push(m),h.push(o-1),h.push(r)),(0===k?a+c>=p:b+c>=q)&&(h.push(o+1),h.push(l),h.push(r))}}return i}},{}],293:[function(a,b,c){"use strict";function d(a,b){var c;if(l(a)){var i,j=a.stops&&"object"==typeof a.stops[0][0],k=j||void 0!==a.property,m=j||!k,n=a.type||b||"exponential";if("exponential"===n)i=g;else if("interval"===n)i=f;else if("categorical"===n)i=e;else{if("identity"!==n)throw new Error('Unknown function type "'+n+'"');i=h}if(j){for(var o={},p=[],q=0;q<a.stops.length;q++){var r=a.stops[q];void 0===o[r[0].zoom]&&(o[r[0].zoom]={zoom:r[0].zoom,type:a.type,property:a.property,stops:[]}),o[r[0].zoom].stops.push([r[0].value,r[1]])}for(var s in o)p.push([o[s].zoom,d(o[s])]);c=function(b,c){return g({stops:p,base:a.base},b)(b,c)},c.isFeatureConstant=!1,c.isZoomConstant=!1}else m?(c=function(b){return i(a,b)},c.isFeatureConstant=!0,c.isZoomConstant=!1):(c=function(b,c){return i(a,c[a.property])},c.isFeatureConstant=!1,c.isZoomConstant=!0)}else c=function(){return a},c.isFeatureConstant=!0,c.isZoomConstant=!0;return c}function e(a,b){for(var c=0;c<a.stops.length;c++)if(b===a.stops[c][0])return a.stops[c][1];return a.stops[0][1]}function f(a,b){for(var c=0;c<a.stops.length&&!(b<a.stops[c][0]);c++);return a.stops[Math.max(c-1,0)][1]}function g(a,b){for(var c=void 0!==a.base?a.base:1,d=0;;){if(d>=a.stops.length)break;if(b<=a.stops[d][0])break;d++}return 0===d?a.stops[d][1]:d===a.stops.length?a.stops[d-1][1]:i(b,c,a.stops[d-1][0],a.stops[d][0],a.stops[d-1][1],a.stops[d][1])}function h(a,b){return b}function i(a,b,c,d,e,f){return"function"==typeof e?function(){var g=e.apply(void 0,arguments),h=f.apply(void 0,arguments);return i(a,b,c,d,g,h)}:e.length?k(a,b,c,d,e,f):j(a,b,c,d,e,f)}function j(a,b,c,d,e,f){var g,h=d-c,i=a-c;return g=1===b?i/h:(Math.pow(b,i)-1)/(Math.pow(b,h)-1),e*(1-g)+f*g}function k(a,b,c,d,e,f){for(var g=[],h=0;h<e.length;h++)g[h]=j(a,b,c,d,e[h],f[h]);return g}function l(a){return"object"==typeof a&&(a.stops||"identity"===a.type)}b.exports.isFunctionDefinition=l,b.exports.interpolated=function(a){return d(a,"exponential")},b.exports["piecewise-constant"]=function(a){return d(a,"interval")}},{}],294:[function(a,b,c){a("path");b.exports={debug:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},circle:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    float t = smoothstep(1.0 - max(blur, v_antialiasblur), 1.0, length(v_extrude));\n    gl_FragColor = color * (1.0 - t) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\nuniform float u_devicepixelratio;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / u_devicepixelratio / radius;\n}\n"},line:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform float u_blur;\n\nvarying vec2 v_linewidth;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\nuniform mediump float u_blur;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_blur;\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    alpha *= u_opacity;\n\n    gl_FragColor = color * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n    v_linesofar = a_linesofar;\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linesdfpattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\n\nuniform float u_blur;\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},outline:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},outlinepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    \n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},pattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n}\n"},raster:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity0;\nuniform float u_opacity1;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = color0 * u_opacity0 + color1 * u_opacity1;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb), color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},icon:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},sdf:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nconst float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = (gl_Position.w - 0.5);\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},collisionbox:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"}},b.exports.util="float evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n"},{path:468}],295:[function(a,b,c){"use strict";function d(a,b){this.message=(a?a+": ":"")+e.apply(e,Array.prototype.slice.call(arguments,2)),null!==b&&void 0!==b&&b.__line__&&(this.line=b.__line__)}var e=a("util").format;b.exports=d},{util:563}],296:[function(a,b,c){"use strict";b.exports=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}},{}],297:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}},{}],298:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}},{}],299:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("../util/extend");b.exports=function(b){var c=a("./validate_function"),g=a("./validate_object"),h={"*":function(){return[]},array:a("./validate_array"),boolean:a("./validate_boolean"),number:a("./validate_number"),color:a("./validate_color"),constants:a("./validate_constants"),enum:a("./validate_enum"),filter:a("./validate_filter"),function:a("./validate_function"),layer:a("./validate_layer"),object:a("./validate_object"),source:a("./validate_source"),string:a("./validate_string")},i=b.value,j=b.valueSpec,k=b.key,l=b.styleSpec,m=b.style;if("string"===e(i)&&"@"===i[0]){if(l.$version>7)return[new d(k,i,"constants have been deprecated as of v8")];if(!(i in m.constants))return[new d(k,i,'constant "%s" not found',i)];b=f({},b,{value:m.constants[i]})}return j.function&&"object"===e(i)?c(b):j.type&&h[j.type]?h[j.type](b):g(f({},b,{valueSpec:j.type?l[j.type]:j}))}},{"../error/validation_error":295,"../util/extend":296,"../util/get_type":297,"./validate_array":300,"./validate_boolean":301,"./validate_color":302,"./validate_constants":303,"./validate_enum":304,"./validate_filter":305,"./validate_function":306,"./validate_layer":308,"./validate_number":310,"./validate_object":311,"./validate_source":313,"./validate_string":314}],300:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("./validate"),f=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.valueSpec,g=a.style,h=a.styleSpec,i=a.key,j=a.arrayElementValidator||e;if("array"!==d(b))return[new f(i,b,"array expected, %s found",d(b))];if(c.length&&b.length!==c.length)return[new f(i,b,"array length %d expected, length %d found",c.length,b.length)];if(c["min-length"]&&b.length<c["min-length"])return[new f(i,b,"array length at least %d expected, length %d found",c["min-length"],b.length)];var k={type:c.value};h.$version<7&&(k.function=c.function),"object"===d(c.value)&&(k=c.value);for(var l=[],m=0;m<b.length;m++)l=l.concat(j({array:b,arrayIndex:m,value:b[m],valueSpec:k,style:g,styleSpec:h,key:i+"["+m+"]"}));return l}},{"../error/validation_error":295,"../util/get_type":297,"./validate":299}],301:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"boolean"!==f?[new e(c,b,"boolean expected, %s found",f)]:[]}},{"../error/validation_error":295,"../util/get_type":297}],302:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("csscolorparser").parseCSSColor;b.exports=function(a){var b=a.key,c=a.value,g=e(c);return"string"!==g?[new d(b,c,"color expected, %s found",g)]:null===f(c)?[new d(b,c,'color expected, "%s" found',c)]:[]}},{"../error/validation_error":295,"../util/get_type":297,csscolorparser:114}],303:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type");b.exports=function(a){var b=a.key,c=a.value;if(a.styleSpec.$version>7)return c?[new d(b,c,"constants have been deprecated as of v8")]:[];var f=e(c);if("object"!==f)return[new d(b,c,"object expected, %s found",f)];var g=[];for(var h in c)"@"!==h[0]&&g.push(new d(b+"."+h,c[h],'constants must start with "@"'));return g}},{"../error/validation_error":295,"../util/get_type":297}],304:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=[];return-1===f.values.indexOf(e(c))&&g.push(new d(b,c,"expected one of [%s], %s found",f.values.join(", "),c)),g}},{"../error/validation_error":295,"../util/unbundle_jsonlint":298}],305:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_enum"),f=a("../util/get_type"),g=a("../util/unbundle_jsonlint");b.exports=function a(b){var c,h=b.value,i=b.key,j=b.styleSpec,k=[];if("array"!==f(h))return[new d(i,h,"array expected, %s found",f(h))];if(h.length<1)return[new d(i,h,"filter array must have at least 1 element")];switch(k=k.concat(e({key:i+"[0]",value:h[0],valueSpec:j.filter_operator,style:b.style,styleSpec:b.styleSpec})),g(h[0])){case"<":case"<=":case">":case">=":h.length>=2&&"$type"==h[1]&&k.push(new d(i,h,'"$type" cannot be use with operator "%s"',h[0]));case"==":case"!=":3!=h.length&&k.push(new d(i,h,'filter array for operator "%s" must have 3 elements',h[0]));case"in":case"!in":h.length>=2&&(c=f(h[1]),"string"!==c?k.push(new d(i+"[1]",h[1],"string expected, %s found",c)):"@"===h[1][0]&&k.push(new d(i+"[1]",h[1],"filter key cannot be a constant")));for(var l=2;l<h.length;l++)c=f(h[l]),"$type"==h[1]?k=k.concat(e({key:i+"["+l+"]",value:h[l],valueSpec:j.geometry_type,style:b.style,styleSpec:b.styleSpec})):"string"===c&&"@"===h[l][0]?k.push(new d(i+"["+l+"]",h[l],"filter value cannot be a constant")):"string"!==c&&"number"!==c&&"boolean"!==c&&k.push(new d(i+"["+l+"]",h[l],"string, number, or boolean expected, %s found",c));break;case"any":case"all":case"none":for(l=1;l<h.length;l++)k=k.concat(a({key:i+"["+l+"]",value:h[l],style:b.style,styleSpec:b.styleSpec}));break;case"has":case"!has":c=f(h[1]),2!==h.length?k.push(new d(i,h,'filter array for "%s" operator must have 2 elements',h[0])):"string"!==c?k.push(new d(i+"[1]",h[1],"string expected, %s found",c)):"@"===h[1][0]&&k.push(new d(i+"[1]",h[1],"filter key cannot be a constant"))}return k}},{"../error/validation_error":295,"../util/get_type":297,"../util/unbundle_jsonlint":298,"./validate_enum":304}],306:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate"),g=a("./validate_object"),h=a("./validate_array"),i=a("./validate_number");b.exports=function(a){function b(a){var b=[],f=a.value;return b=b.concat(h({key:a.key,value:f,valueSpec:a.valueSpec,style:a.style,styleSpec:a.styleSpec,arrayElementValidator:c})),"array"===e(f)&&0===f.length&&b.push(new d(a.key,f,"array must have at least one stop")),b}function c(a){var b=[],c=a.value,h=a.key;if("array"!==e(c))return[new d(h,c,"array expected, %s found",e(c))];if(2!==c.length)return[new d(h,c,"array length %d expected, length %d found",2,c.length)];var m=e(c[0]);if(k||(k=m),m!==k)return[new d(h,c,"%s stop key type must match previous stop key type %s",m,k)];if("object"===m){if(void 0===c[0].zoom)return[new d(h,c,"object stop key must have zoom")];if(void 0===c[0].value)return[new d(h,c,"object stop key must have value")];b=b.concat(g({key:h+"[0]",value:c[0],valueSpec:{zoom:{}},style:a.style,styleSpec:a.styleSpec,objectElementValidators:{zoom:i,value:j}}))}else b=b.concat((n?i:j)({key:h+"[0]",value:c[0],valueSpec:{},style:a.style,styleSpec:a.styleSpec}));return b=b.concat(f({key:h+"[1]",value:c[1],valueSpec:l,style:a.style,styleSpec:a.styleSpec})),"number"===e(c[0])&&("piecewise-constant"===l.function&&c[0]%1!=0&&b.push(new d(h+"[0]",c[0],"zoom level for piecewise-constant functions must be an integer")),0!==a.arrayIndex&&c[0]<a.array[a.arrayIndex-1][0]&&b.push(new d(h+"[0]",c[0],"array stops must appear in ascending order"))),b}function j(a){var b=[],c=e(a.value);return"number"!==c&&"string"!==c&&"array"!==c&&b.push(new d(a.key,a.value,"property value must be a number, string or array")),b}var k,l=a.valueSpec,m=void 0!==a.value.property||"object"===k,n=void 0===a.value.property||"object"===k,o=g({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:b}});return a.styleSpec.$version>=8&&(m&&!a.valueSpec["property-function"]?o.push(new d(a.key,a.value,"property functions not supported")):n&&!a.valueSpec["zoom-function"]&&o.push(new d(a.key,a.value,"zoom functions not supported"))),o}},{"../error/validation_error":295,"../util/get_type":297,"./validate":299,"./validate_array":300,"./validate_number":310,"./validate_object":311}],307:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_string");b.exports=function(a){var b=a.value,c=a.key,f=e(a);return f.length?f:(-1===b.indexOf("{fontstack}")&&f.push(new d(c,b,'"glyphs" url must include a "{fontstack}" token')),-1===b.indexOf("{range}")&&f.push(new d(c,b,'"glyphs" url must include a "{range}" token')),f)}},{"../error/validation_error":295,"./validate_string":314}],308:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_filter"),h=a("./validate_paint_property"),i=a("./validate_layout_property"),j=a("../util/extend");b.exports=function(a){var b=[],c=a.value,k=a.key,l=a.style,m=a.styleSpec;c.type||c.ref||b.push(new d(k,c,'either "type" or "ref" is required'));var n=e(c.type),o=e(c.ref);if(c.id)for(var p=0;p<a.arrayIndex;p++){var q=l.layers[p];e(q.id)===e(c.id)&&b.push(new d(k,c.id,'duplicate layer id "%s", previously used at line %d',c.id,q.id.__line__))}if("ref"in c){["type","source","source-layer","filter","layout"].forEach(function(a){a in c&&b.push(new d(k,c[a],'"%s" is prohibited for ref layers',a))});var r;l.layers.forEach(function(a){a.id==o&&(r=a)}),r?r.ref?b.push(new d(k,c.ref,"ref cannot reference another ref layer")):n=e(r.type):b.push(new d(k,c.ref,'ref layer "%s" not found',o))}else if("background"!==n)if(c.source){var s=l.sources&&l.sources[c.source];s?"vector"==s.type&&"raster"==n?b.push(new d(k,c.source,'layer "%s" requires a raster source',c.id)):"raster"==s.type&&"raster"!=n?b.push(new d(k,c.source,'layer "%s" requires a vector source',c.id)):"vector"!=s.type||c["source-layer"]||b.push(new d(k,c,'layer "%s" must specify a "source-layer"',c.id)):b.push(new d(k,c.source,'source "%s" not found',c.source))}else b.push(new d(k,c,'missing required property "source"'));return b=b.concat(f({key:k,value:c,valueSpec:m.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{filter:g,layout:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return i(j({layerType:n},a))}}})},paint:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return h(j({layerType:n},a))}}})}}}))}},{"../error/validation_error":295,"../util/extend":296,"../util/unbundle_jsonlint":298,"./validate_filter":305,"./validate_layout_property":309,"./validate_object":311,"./validate_paint_property":312}],309:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["layout_"+a.layerType];if(a.valueSpec||i[h]){var j=[];return"symbol"===a.layerType&&("icon-image"===h&&c&&!c.sprite?j.push(new e(b,g,'use of "icon-image" requires a style "sprite" property')):"text-field"===h&&c&&!c.glyphs&&j.push(new e(b,g,'use of "text-field" requires a style "glyphs" property'))),j.concat(d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}))}return[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":295,"./validate":299}],310:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=d(c);return"number"!==g?[new e(b,c,"number expected, %s found",g)]:"minimum"in f&&c<f.minimum?[new e(b,c,"%s is less than the minimum value %s",c,f.minimum)]:"maximum"in f&&c>f.maximum?[new e(b,c,"%s is greater than the maximum value %s",c,f.maximum)]:[]}},{"../error/validation_error":295,"../util/get_type":297}],311:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate");b.exports=function(a){var b=a.key,c=a.value,g=a.valueSpec,h=a.objectElementValidators||{},i=a.style,j=a.styleSpec,k=[],l=e(c);if("object"!==l)return[new d(b,c,"object expected, %s found",l)];for(var m in c){var n=m.split(".")[0],o=g&&(g[n]||g["*"]),p=h[n]||h["*"];o||p?k=k.concat((p||f)({key:(b?b+".":b)+m,value:c[m],valueSpec:o,style:i,styleSpec:j,object:c,objectKey:m})):""!==b&&1!==b.split(".").length&&k.push(new d(b,c[m],'unknown property "%s"',m))}for(n in g)g[n].required&&void 0===g[n].default&&void 0===c[n]&&k.push(new d(b,c,'missing required property "%s"',n));return k}},{"../error/validation_error":295,"../util/get_type":297,"./validate":299}],312:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["paint_"+a.layerType],j=h.match(/^(.*)-transition$/);return j&&i[j[1]]&&i[j[1]].transition?d({key:b,value:g,valueSpec:f.transition,style:c,styleSpec:f}):a.valueSpec||i[h]?d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}):[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":295,"./validate":299}],313:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_enum");b.exports=function(a){var b=a.value,c=a.key,h=a.styleSpec,i=a.style;if(!b.type)return[new d(c,b,'"type" is required')];switch(e(b.type)){case"vector":case"raster":var j=[];if(j=j.concat(f({key:c,value:b,valueSpec:h.source_tile,style:a.style,styleSpec:h})),"url"in b)for(var k in b)["type","url","tileSize"].indexOf(k)<0&&j.push(new d(c+"."+k,b[k],'a source with a "url" property may not include a "%s" property',k));return j;case"geojson":return f({key:c,value:b,valueSpec:h.source_geojson,style:i,styleSpec:h});case"video":return f({key:c,value:b,valueSpec:h.source_video,style:i,styleSpec:h});case"image":return f({key:c,value:b,valueSpec:h.source_image,style:i,styleSpec:h});default:return g({key:c+".type",value:b.type,valueSpec:{values:["vector","raster","geojson","video","image"]},style:i,styleSpec:h})}}},{"../error/validation_error":295,"../util/unbundle_jsonlint":298,"./validate_enum":304,"./validate_object":311}],314:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"string"!==f?[new e(c,b,"string expected, %s found",f)]:[]}},{"../error/validation_error":295,"../util/get_type":297}],315:[function(a,b,c){"use strict";function d(a,b){b=b||i;var c=[];return c=c.concat(h({key:"",value:a,valueSpec:b.$root,styleSpec:b,style:a,objectElementValidators:{glyphs:j}})),b.$version>7&&a.constants&&(c=c.concat(g({key:"constants",value:a.constants,style:a,styleSpec:b}))),e(c)}function e(a){return[].concat(a).sort(function(a,b){return a.line-b.line})}function f(a){return function(){return e(a.apply(this,arguments))}}var g=a("./validate/validate_constants"),h=a("./validate/validate"),i=a("../reference/latest.min"),j=a("./validate/validate_glyphs_url");d.source=f(a("./validate/validate_source")),d.layer=f(a("./validate/validate_layer")),d.filter=f(a("./validate/validate_filter")),d.paintProperty=f(a("./validate/validate_paint_property")),d.layoutProperty=f(a("./validate/validate_layout_property")),b.exports=d},{"../reference/latest.min":316,"./validate/validate":299,"./validate/validate_constants":303,"./validate/validate_filter":305,"./validate/validate_glyphs_url":307,"./validate/validate_layer":308,"./validate/validate_layout_property":309,"./validate/validate_paint_property":312,"./validate/validate_source":313}],316:[function(a,b,c){b.exports=a("./v8.min.json")},{"./v8.min.json":317}],317:[function(a,b,c){b.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"]},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"]},data:{type:"*"},maxzoom:{type:"number",default:14},buffer:{type:"number",default:64},tolerance:{type:"number",default:3},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:400},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:["video"]},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:["image"]},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"]},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:22},maxzoom:{type:"number",minimum:0,maximum:22},interactive:{type:"boolean",default:!1},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_fill:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_circle:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["point","line"],default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"viewport",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!1,values:["none","both","width","height"],default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image","icon-text-fit","text-field"]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"viewport",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["left","center","right"],default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["none","uppercase","lowercase"],default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",
function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_raster:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none","has","!has"]},geometry_type:{type:"enum",values:["Point","LineString","Polygon"]},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"]},function:{stops:{type:"array",required:!0,value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:["exponential","interval","categorical"],default:"exponential"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,"property-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],318:[function(a,b,c){"use strict";function d(a){return!!(e()&&f()&&g()&&h()&&i()&&j()&&k()&&l(a&&a.failIfMajorPerformanceCaveat))}function e(){return"undefined"!=typeof window&&"undefined"!=typeof document}function f(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function g(){return Function.prototype&&Function.prototype.bind}function h(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function i(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function j(){return"Worker"in window}function k(){return"Uint8ClampedArray"in window}function l(a){return void 0===n[a]&&(n[a]=m(a)),n[a]}function m(a){var b=document.createElement("canvas"),c=Object.create(d.webGLContextAttributes);return c.failIfMajorPerformanceCaveat=a,b.probablySupportsContext?b.probablySupportsContext("webgl",c)||b.probablySupportsContext("experimental-webgl",c):b.supportsContext?b.supportsContext("webgl",c)||b.supportsContext("experimental-webgl",c):b.getContext("webgl",c)||b.getContext("experimental-webgl",c)}void 0!==b&&b.exports?b.exports=d:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=d);var n={};d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],319:[function(a,b,c){"use strict";function d(a){var b=a.layoutVertexArrayType;this.layoutVertexArray=new b;var c=a.elementArrayType;c&&(this.elementArray=new c);var d=a.elementArrayType2;d&&(this.elementArray2=new d),this.paintVertexArrays=e.mapObject(a.paintVertexArrayTypes,function(a){return new a})}var e=a("../util/util");b.exports=d,d.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,d.prototype.hasCapacityFor=function(a){return this.layoutVertexArray.length+a<=d.MAX_VERTEX_ARRAY_LENGTH},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.trim=function(){this.layoutVertexArray.trim(),this.elementArray&&this.elementArray.trim(),this.elementArray2&&this.elementArray2.trim();for(var a in this.paintVertexArrays)this.paintVertexArrays[a].trim()},d.prototype.serialize=function(){return{layoutVertexArray:this.layoutVertexArray.serialize(),elementArray:this.elementArray&&this.elementArray.serialize(),elementArray2:this.elementArray2&&this.elementArray2.serialize(),paintVertexArrays:e.mapObject(this.paintVertexArrays,function(a){return a.serialize()})}},d.prototype.getTransferables=function(a){a.push(this.layoutVertexArray.arrayBuffer),this.elementArray&&a.push(this.elementArray.arrayBuffer),this.elementArray2&&a.push(this.elementArray2.arrayBuffer);for(var b in this.paintVertexArrays)a.push(this.paintVertexArrays[b].arrayBuffer)}},{"../util/util":433}],320:[function(a,b,c){"use strict";function d(a){if(this.zoom=a.zoom,this.overscaling=a.overscaling,this.layer=a.layer,this.childLayers=a.childLayers,this.type=this.layer.type,this.features=[],this.id=this.layer.id,this.index=a.index,this.sourceLayer=this.layer.sourceLayer,this.sourceLayerIndex=a.sourceLayerIndex,this.minZoom=this.layer.minzoom,this.maxZoom=this.layer.maxzoom,this.paintAttributes=e(this),a.arrays){var b=this.programInterfaces;this.bufferGroups=k.mapObject(a.arrays,function(c,d){var e=b[d],f=a.paintVertexArrayTypes[d];return c.map(function(a){return new j(a,{layoutVertexArrayType:e.layoutVertexArrayType.serialize(),elementArrayType:e.elementArrayType&&e.elementArrayType.serialize(),elementArrayType2:e.elementArrayType2&&e.elementArrayType2.serialize(),paintVertexArrayTypes:f})})})}}function e(a){var b={};for(var c in a.programInterfaces){for(var d=b[c]={},e=0;e<a.childLayers.length;e++){d[a.childLayers[e].id]={attributes:[],uniforms:[],defines:[],vertexPragmas:{define:{},initialize:{}},fragmentPragmas:{define:{},initialize:{}}}}var h=a.programInterfaces[c];if(h.paintAttributes)for(var i=0;i<h.paintAttributes.length;i++){var j=h.paintAttributes[i];j.multiplier=j.multiplier||1;for(var l=0;l<a.childLayers.length;l++){var n=a.childLayers[l],o=d[n.id],p=j.name;m("a_"===j.name.slice(0,2));var q,r=j.name.slice(2);if(o.fragmentPragmas.initialize[r]="",n.isPaintValueFeatureConstant(j.paintProperty))o.uniforms.push(j),o.fragmentPragmas.define[r]=o.vertexPragmas.define[r]=["uniform","{precision}","{type}",p].join(" ")+";",o.fragmentPragmas.initialize[r]=o.vertexPragmas.initialize[r]=["{precision}","{type}",r,"=",p].join(" ")+";\n";else if(n.isPaintValueZoomConstant(j.paintProperty)){o.attributes.push(k.extend({},j,{name:p})),q=["varying","{precision}","{type}",r].join(" ")+";\n";var s=[o.fragmentPragmas.define[r],"attribute","{precision}","{type}",p].join(" ")+";\n";o.fragmentPragmas.define[r]=q,o.vertexPragmas.define[r]=q+s,o.vertexPragmas.initialize[r]=[r,"=",p,"/",j.multiplier.toFixed(1)].join(" ")+";\n"}else{for(var t="u_"+p.slice(2)+"_t",u=n.getPaintValueStopZoomLevels(j.paintProperty),v=0;v<u.length&&u[v]<a.zoom;)v++;for(var w=Math.max(0,Math.min(u.length-4,v-2)),x=[],y=0;y<4;y++)x.push(u[Math.min(w+y,u.length-1)]);q=["varying","{precision}","{type}",r].join(" ")+";\n",o.vertexPragmas.define[r]=q+["uniform","lowp","float",t].join(" ")+";\n",o.fragmentPragmas.define[r]=q,o.uniforms.push(k.extend({},j,{name:t,getValue:g(j,w),components:1}));var z=j.components;if(1===z)o.attributes.push(k.extend({},j,{getValue:f(j,x),isFunction:!0,components:4*z})),o.vertexPragmas.define[r]+=["attribute","{precision}","vec4",p].join(" ")+";\n",o.vertexPragmas.initialize[r]=[r,"=","evaluate_zoom_function_1("+p+", "+t+")","/",j.multiplier.toFixed(1)].join(" ")+";\n";else{for(var A=[],B=0;B<4;B++)A.push(p+B),o.attributes.push(k.extend({},j,{getValue:f(j,[x[B]]),isFunction:!0,name:p+B})),o.vertexPragmas.define[r]+=["attribute","{precision}","{type}",p+B].join(" ")+";\n";o.vertexPragmas.initialize[r]=[r," = ","evaluate_zoom_function_4("+A.join(", ")+", "+t+")","/",j.multiplier.toFixed(1)].join(" ")+";\n"}}}}}return b}function f(a,b){return function(c,d,e){if(1===b.length)return a.getValue(c,k.extend({},d,{zoom:b[0]}),e);for(var f=[],g=0;g<b.length;g++){var h=b[g];f.push(a.getValue(c,k.extend({},d,{zoom:h}),e)[0])}return f}}function g(a,b){return function(c,d){var e=c.getPaintInterpolationT(a.paintProperty,d.zoom);return[Math.max(0,Math.min(4,e-b))]}}var h=a("feature-filter"),i=a("./array_group"),j=a("./buffer_group"),k=a("../util/util"),l=a("../util/struct_array"),m=a("assert");b.exports=d,d.create=function(b){return new({fill:a("./bucket/fill_bucket"),line:a("./bucket/line_bucket"),circle:a("./bucket/circle_bucket"),symbol:a("./bucket/symbol_bucket")}[b.layer.type])(b)},d.EXTENT=8192,d.prototype.populateArrays=function(){this.createArrays(),this.recalculateStyleLayers();for(var a=0;a<this.features.length;a++)this.addFeature(this.features[a]);this.trimArrays()},d.prototype.prepareArrayGroup=function(a,b){var c=this.arrayGroups[a],d=c.length&&c[c.length-1];return d&&d.hasCapacityFor(b)||(d=new i({layoutVertexArrayType:this.programInterfaces[a].layoutVertexArrayType,elementArrayType:this.programInterfaces[a].elementArrayType,elementArrayType2:this.programInterfaces[a].elementArrayType2,paintVertexArrayTypes:this.paintVertexArrayTypes[a]}),d.index=c.length,c.push(d)),d},d.prototype.createArrays=function(){this.arrayGroups={},this.paintVertexArrayTypes={};for(var a in this.programInterfaces){this.arrayGroups[a]=[];var b=this.paintVertexArrayTypes[a]={},c=this.paintAttributes[a];for(var e in c)b[e]=new d.VertexArrayType(c[e].attributes)}},d.prototype.destroy=function(a){for(var b in this.bufferGroups)for(var c=this.bufferGroups[b],d=0;d<c.length;d++)c[d].destroy(a)},d.prototype.trimArrays=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)b[c].trim()},d.prototype.isEmpty=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)if(!b[c].isEmpty())return!1;return!0},d.prototype.getTransferables=function(a){for(var b in this.arrayGroups)for(var c=this.arrayGroups[b],d=0;d<c.length;d++)c[d].getTransferables(a)},d.prototype.setUniforms=function(a,b,c,d,e){for(var f=this.paintAttributes[b][d.id].uniforms,g=0;g<f.length;g++){var h=f[g],i=c[h.name];a["uniform"+h.components+"fv"](i,h.getValue(d,e))}},d.prototype.serialize=function(){return{layerId:this.layer.id,zoom:this.zoom,arrays:k.mapObject(this.arrayGroups,function(a){return a.map(function(a){return a.serialize()})}),paintVertexArrayTypes:k.mapObject(this.paintVertexArrayTypes,function(a){return k.mapObject(a,function(a){return a.serialize()})}),childLayerIds:this.childLayers.map(function(a){return a.id})}},d.prototype.createFilter=function(){this.filter||(this.filter=h(this.layer.filter))};var n={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};d.prototype.recalculateStyleLayers=function(){for(var a=0;a<this.childLayers.length;a++)this.childLayers[a].recalculate(this.zoom,n)},d.prototype.populatePaintArrays=function(a,b,c,d,e){for(var f=0;f<this.childLayers.length;f++)for(var g=this.childLayers[f],h=this.arrayGroups[a],i=d.index;i<h.length;i++){var j=h[i],k=j.layoutVertexArray.length,l=j.paintVertexArrays[g.id];l.resize(k);for(var m=this.paintAttributes[a][g.id].attributes,n=0;n<m.length;n++)for(var o=m[n],p=o.getValue(g,b,c),q=o.multiplier||1,r=o.components||1,s=i===d.index?e:0,t=s;t<k;t++)for(var u=l.get(t),v=0;v<r;v++){var w=r>1?o.name+v:o.name;u[w]=p[v]*q}}},d.VertexArrayType=function(a){return new l({members:a,alignment:4})},d.ElementArrayType=function(a){return new l({members:[{type:"Uint16",name:"vertices",components:a||3}]})}},{"../util/struct_array":431,"../util/util":433,"./array_group":319,"./bucket/circle_bucket":321,"./bucket/fill_bucket":322,"./bucket/line_bucket":323,"./bucket/symbol_bucket":324,"./buffer_group":326,assert:51,"feature-filter":141}],321:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addCircleVertex=function(a,b,c,d,e){return a.emplaceBack(2*b+(d+1)/2,2*c+(e+1)/2)},d.prototype.programInterfaces={circle:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new e.ElementArrayType,paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("circle-color",b,c)},multiplier:255,paintProperty:"circle-color"},{name:"a_radius",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-radius",b,c)]},multiplier:10,paintProperty:"circle-radius"},{name:"a_blur",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-blur",b,c)]},multiplier:10,paintProperty:"circle-blur"},{name:"a_opacity",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-opacity",b,c)]},multiplier:255,paintProperty:"circle-opacity"}]}},d.prototype.addFeature=function(a){for(var b={zoom:this.zoom},c=g(a),d=this.prepareArrayGroup("circle",0),e=d.layoutVertexArray.length,f=0;f<c.length;f++)for(var i=0;i<c[f].length;i++){var j=c[f][i].x,k=c[f][i].y;if(!(j<0||j>=h||k<0||k>=h)){var l=this.prepareArrayGroup("circle",4),m=l.layoutVertexArray,n=this.addCircleVertex(m,j,k,-1,-1);this.addCircleVertex(m,j,k,1,-1),this.addCircleVertex(m,j,k,1,1),this.addCircleVertex(m,j,k,-1,1),l.elementArray.emplaceBack(n,n+1,n+2),l.elementArray.emplaceBack(n,n+3,n+2)}}this.populatePaintArrays("circle",b,a.properties,d,e)}},{"../../util/util":433,"../bucket":320,"../load_geometry":328}],322:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=a("earcut"),i=a("../../util/classify_rings");b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.programInterfaces={fill:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new e.ElementArrayType(1),elementArrayType2:new e.ElementArrayType(2),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-color",b,c)},multiplier:255,paintProperty:"fill-color"},{name:"a_outline_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-outline-color",b,c)},multiplier:255,paintProperty:"fill-outline-color"},{name:"a_opacity",components:1,type:"Uint8",getValue:function(a,b,c){return[a.getPaintValue("fill-opacity",b,c)]},multiplier:255,paintProperty:"fill-opacity"}]}},d.prototype.addFeature=function(a){for(var b=g(a),c=i(b,500),d=this.prepareArrayGroup("fill",0),e=d.layoutVertexArray.length,f=0;f<c.length;f++)this.addPolygon(c[f]);this.populatePaintArrays("fill",{zoom:this.zoom},a.properties,d,e)},d.prototype.addPolygon=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].length;for(var d=this.prepareArrayGroup("fill",b),e=[],f=[],g=d.layoutVertexArray.length,i=0;i<a.length;i++){var j=a[i];i>0&&f.push(e.length/2);for(var k=0;k<j.length;k++){var l=j[k],m=d.layoutVertexArray.emplaceBack(l.x,l.y);k>=1&&d.elementArray2.emplaceBack(m-1,m),e.push(l.x),e.push(l.y)}}for(var n=h(e,f),o=0;o<n.length;o++)d.elementArray.emplaceBack(n[o]+g)}},{"../../util/classify_rings":421,"../../util/util":433,"../bucket":320,"../load_geometry":328,earcut:135}],323:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT,i=Math.cos(Math.PI/180*37.5),j=Math.pow(2,14)/.5;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addLineVertex=function(a,b,c,d,e,f,g){return a.emplaceBack(b.x<<1|d,b.y<<1|e,Math.round(63*c.x)+128,Math.round(63*c.y)+128,1+(0===f?0:f<0?-1:1)|(.5*g&63)<<2,.5*g>>6)},d.prototype.programInterfaces={line:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),elementArrayType:new e.ElementArrayType}},d.prototype.addFeature=function(a){for(var b=g(a,15),c=0;c<b.length;c++)this.addLine(b[c],this.layer.layout["line-join"],this.layer.layout["line-cap"],this.layer.layout["line-miter-limit"],this.layer.layout["line-round-limit"])},d.prototype.addLine=function(a,b,c,d,e){for(var f=a.length;f>2&&a[f-1].equals(a[f-2]);)f--;if(!(a.length<2)){"bevel"===b&&(d=1.05);var g=h/(512*this.overscaling)*15,j=a[0],k=a[f-1],l=j.equals(k);if(this.prepareArrayGroup("line",10*f),2!==f||!l){this.distance=0;var m,n,o,p,q,r,s,t=c,u=l?"butt":c,v=!0;this.e1=this.e2=this.e3=-1,l&&(m=a[f-2],q=j.sub(m)._unit()._perp());for(var w=0;w<f;w++)if(!(o=l&&w===f-1?a[1]:a[w+1])||!a[w].equals(o)){q&&(p=q),m&&(n=m),m=a[w],q=o?o.sub(m)._unit()._perp():p,p=p||q;var x=p.add(q)._unit(),y=x.x*q.x+x.y*q.y,z=1/y,A=y<i&&n&&o;if(A&&w>0){var B=m.dist(n);if(B>2*g){var C=m.sub(m.sub(n)._mult(g/B)._round());this.distance+=C.dist(n),this.addCurrentVertex(C,this.distance,p.mult(1),0,0,!1),n=C}}var D=n&&o,E=D?b:o?t:u;if(D&&"round"===E&&(z<e?E="miter":z<=2&&(E="fakeround")),"miter"===E&&z>d&&(E="bevel"),"bevel"===E&&(z>2&&(E="flipbevel"),z<d&&(E="miter")),n&&(this.distance+=m.dist(n)),"miter"===E)x._mult(z),this.addCurrentVertex(m,this.distance,x,0,0,!1);else if("flipbevel"===E){if(z>100)x=q.clone();else{var F=p.x*q.y-p.y*q.x>0?-1:1,G=z*p.add(q).mag()/p.sub(q).mag();x._perp()._mult(G*F)}this.addCurrentVertex(m,this.distance,x,0,0,!1),this.addCurrentVertex(m,this.distance,x.mult(-1),0,0,!1)}else if("bevel"===E||"fakeround"===E){var H=p.x*q.y-p.y*q.x>0,I=-Math.sqrt(z*z-1);if(H?(s=0,r=I):(r=0,s=I),v||this.addCurrentVertex(m,this.distance,p,r,s,!1),"fakeround"===E){for(var J,K=Math.floor(8*(.5-(y-.5))),L=0;L<K;L++)J=q.mult((L+1)/(K+1))._add(p)._unit(),this.addPieSliceVertex(m,this.distance,J,H);this.addPieSliceVertex(m,this.distance,x,H);for(var M=K-1;M>=0;M--)J=p.mult((M+1)/(K+1))._add(q)._unit(),this.addPieSliceVertex(m,this.distance,J,H)}o&&this.addCurrentVertex(m,this.distance,q,-r,-s,!1)}else"butt"===E?(v||this.addCurrentVertex(m,this.distance,p,0,0,!1),o&&this.addCurrentVertex(m,this.distance,q,0,0,!1)):"square"===E?(v||(this.addCurrentVertex(m,this.distance,p,1,1,!1),this.e1=this.e2=-1),o&&this.addCurrentVertex(m,this.distance,q,-1,-1,!1)):"round"===E&&(v||(this.addCurrentVertex(m,this.distance,p,0,0,!1),this.addCurrentVertex(m,this.distance,p,1,1,!0),this.e1=this.e2=-1),o&&(this.addCurrentVertex(m,this.distance,q,-1,-1,!0),this.addCurrentVertex(m,this.distance,q,0,0,!1)));if(A&&w<f-1){var N=m.dist(o);if(N>2*g){var O=m.add(o.sub(m)._mult(g/N)._round());this.distance+=O.dist(m),this.addCurrentVertex(O,this.distance,q.mult(1),0,0,!1),m=O}}v=!1}}}},d.prototype.addCurrentVertex=function(a,b,c,d,e,f){var g,h=f?1:0,i=this.arrayGroups.line[this.arrayGroups.line.length-1],k=i.layoutVertexArray,l=i.elementArray;g=c.clone(),d&&g._sub(c.perp()._mult(d)),this.e3=this.addLineVertex(k,a,g,h,0,d,b),this.e1>=0&&this.e2>=0&&l.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,g=c.mult(-1),e&&g._sub(c.perp()._mult(e)),this.e3=this.addLineVertex(k,a,g,h,1,-e,b),this.e1>=0&&this.e2>=0&&l.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,b>j/2&&(this.distance=0,this.addCurrentVertex(a,this.distance,c,d,e,f))},d.prototype.addPieSliceVertex=function(a,b,c,d){var e=d?1:0;c=c.mult(d?-1:1);var f=this.arrayGroups.line[this.arrayGroups.line.length-1],g=f.layoutVertexArray,h=f.elementArray;this.e3=this.addLineVertex(g,a,c,0,e,0,b),this.e1>=0&&this.e2>=0&&h.emplaceBack(this.e1,this.e2,this.e3),d?this.e2=this.e3:this.e1=this.e3}},{"../../util/util":433,"../bucket":320,"../load_geometry":328}],324:[function(a,b,c){"use strict";function d(a){g.apply(this,arguments),this.showCollisionBoxes=a.showCollisionBoxes,this.overscaling=a.overscaling,this.collisionBoxArray=a.collisionBoxArray,this.symbolQuadsArray=a.symbolQuadsArray,this.symbolInstancesArray=a.symbolInstancesArray,this.sdfIcons=a.sdfIcons,this.iconsNeedLinear=a.iconsNeedLinear,this.adjustedTextSize=a.adjustedTextSize,this.adjustedIconSize=a.adjustedIconSize,this.fontstack=a.fontstack}function e(a,b,c,d,e,f,g,h,i,j,k){return a.emplaceBack(b,c,Math.round(64*d),Math.round(64*e),f/4,g/4,10*(j||0),k,10*(h||0),10*Math.min(i||25,25))}var f=a("point-geometry"),g=a("../bucket"),h=a("../../symbol/anchor"),i=a("../../symbol/get_anchors"),j=a("../../util/token"),k=a("../../symbol/quads"),l=a("../../symbol/shaping"),m=a("../../symbol/resolve_text"),n=a("../../symbol/mergelines"),o=a("../../symbol/clip_line"),p=a("../../util/util"),q=a("../load_geometry"),r=a("../../symbol/collision_feature"),s=l.shapeText,t=l.shapeIcon,u=k.getGlyphQuads,v=k.getIconQuads,w=g.EXTENT;b.exports=d,d.MAX_QUADS=65535,d.prototype=p.inherit(g,{}),d.prototype.serialize=function(){var a=g.prototype.serialize.apply(this);return a.sdfIcons=this.sdfIcons,a.iconsNeedLinear=this.iconsNeedLinear,a.adjustedTextSize=this.adjustedTextSize,a.adjustedIconSize=this.adjustedIconSize,a.fontstack=this.fontstack,a};var x=new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),y=new g.ElementArrayType;d.prototype.addCollisionBoxVertex=function(a,b,c,d,e){return a.emplaceBack(b.x,b.y,Math.round(c.x),Math.round(c.y),10*d,10*e)},d.prototype.programInterfaces={glyph:{layoutVertexArrayType:x,elementArrayType:y},icon:{layoutVertexArrayType:x,elementArrayType:y},collisionBox:{layoutVertexArrayType:new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}])}},d.prototype.populateArrays=function(a,b,c){var d={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};this.adjustedTextMaxSize=this.layer.getLayoutValue("text-size",{zoom:18,zoomHistory:d}),this.adjustedTextSize=this.layer.getLayoutValue("text-size",{zoom:this.zoom+1,zoomHistory:d}),this.adjustedIconMaxSize=this.layer.getLayoutValue("icon-size",{zoom:18,zoomHistory:d}),this.adjustedIconSize=this.layer.getLayoutValue("icon-size",{zoom:this.zoom+1,zoomHistory:d});var e=512*this.overscaling;this.tilePixelRatio=w/e,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var f=this.layer.layout,g=this.features,h=this.textFeatures,i=.5,k=.5;switch(f["text-anchor"]){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(f["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":k=1;break;case"top":case"top-right":case"top-left":k=0}for(var l="right"===f["text-justify"]?1:"left"===f["text-justify"]?0:.5,m=24*f["text-line-height"],o="line"!==f["symbol-placement"]?24*f["text-max-width"]:0,r=24*f["text-letter-spacing"],u=[24*f["text-offset"][0],24*f["text-offset"][1]],v=this.fontstack=f["text-font"].join(","),x=[],y=0;y<g.length;y++)x.push(q(g[y]));if("line"===f["symbol-placement"]){var z=n(g,h,x);x=z.geometries,g=z.features,h=z.textFeatures}for(var A,B,C=0;C<g.length;C++)if(x[C]){if(A=h[C]?s(h[C],b[v],o,m,i,k,l,r,u):null,f["icon-image"]){var D=j(g[C].properties,f["icon-image"]),E=c[D];B=t(E,f),E&&(void 0===this.sdfIcons?this.sdfIcons=E.sdf:this.sdfIcons!==E.sdf&&p.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==E.pixelRatio?this.iconsNeedLinear=!0:0===f["icon-rotate"]&&this.layer.isLayoutValueFeatureConstant("icon-rotate")||(this.iconsNeedLinear=!0))}else B=null;(A||B)&&this.addFeature(x[C],A,B,g[C])}this.symbolInstancesEndIndex=this.symbolInstancesArray.length,this.placeFeatures(a,this.showCollisionBoxes),this.trimArrays()},d.prototype.addFeature=function(a,b,c,d){var e=this.layer.layout,f=this.adjustedTextSize/24,g=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,j=this.tilePixelRatio*f,k=this.tilePixelRatio*g/24,l=this.tilePixelRatio*this.adjustedIconSize,m=this.tilePixelRatio*e["symbol-spacing"],n=e["symbol-avoid-edges"],p=e["text-padding"]*this.tilePixelRatio,q=e["icon-padding"]*this.tilePixelRatio,r=e["text-max-angle"]/180*Math.PI,s="map"===e["text-rotation-alignment"]&&"line"===e["symbol-placement"],t="map"===e["icon-rotation-alignment"]&&"line"===e["symbol-placement"],u=e["text-allow-overlap"]||e["icon-allow-overlap"]||e["text-ignore-placement"]||e["icon-ignore-placement"],v="line"===e["symbol-placement"],x=m/2;v&&(a=o(a,0,0,w,w));for(var y=0;y<a.length;y++){var z,A=a[y];z=v?i(A,m,r,b,c,24,k,this.overscaling,w):[new h(A[0].x,A[0].y,0)];for(var B=0,C=z.length;B<C;B++){var D=z[B];if(!(b&&v&&this.anchorIsTooClose(b.text,x,D))){var E=!(D.x<0||D.x>w||D.y<0||D.y>w);if(!n||E){var F=E||u;this.addSymbolInstance(D,A,b,c,this.layer,F,this.symbolInstancesArray.length,this.collisionBoxArray,d.index,this.sourceLayerIndex,this.index,j,p,s,l,q,t,{zoom:this.zoom},d.properties)}}}}},d.prototype.anchorIsTooClose=function(a,b,c){var d=this.compareText;if(a in d){for(var e=d[a],f=e.length-1;f>=0;f--)if(c.dist(e[f])<b)return!0}else d[a]=[];return d[a].push(c),!1},d.prototype.placeFeatures=function(a,b){this.recalculateStyleLayers(),this.createArrays();var c=this.layer.layout,d=a.maxScale,e="map"===c["text-rotation-alignment"]&&"line"===c["symbol-placement"],f="map"===c["icon-rotation-alignment"]&&"line"===c["symbol-placement"]
;if(c["text-allow-overlap"]||c["icon-allow-overlap"]||c["text-ignore-placement"]||c["icon-ignore-placement"]){var g=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),h=a.angle,i=Math.sin(h),j=Math.cos(h);this.sortedSymbolInstances=g.sort(function(a,b){return(i*a.anchorPointX+j*a.anchorPointY|0)-(i*b.anchorPointX+j*b.anchorPointY|0)||b.index-a.index})}for(var k=this.symbolInstancesStartIndex;k<this.symbolInstancesEndIndex;k++){var l=this.sortedSymbolInstances?this.sortedSymbolInstances[k-this.symbolInstancesStartIndex]:this.symbolInstancesArray.get(k),m={boxStartIndex:l.textBoxStartIndex,boxEndIndex:l.textBoxEndIndex},n={boxStartIndex:l.iconBoxStartIndex,boxEndIndex:l.iconBoxEndIndex},o=!(l.textBoxStartIndex===l.textBoxEndIndex),p=!(l.iconBoxStartIndex===l.iconBoxEndIndex),q=c["text-optional"]||!o,r=c["icon-optional"]||!p,s=o?a.placeCollisionFeature(m,c["text-allow-overlap"],c["symbol-avoid-edges"]):a.minScale,t=p?a.placeCollisionFeature(n,c["icon-allow-overlap"],c["symbol-avoid-edges"]):a.minScale;q||r?!r&&s?s=Math.max(t,s):!q&&t&&(t=Math.max(t,s)):t=s=Math.max(t,s),o&&(a.insertCollisionFeature(m,s,c["text-ignore-placement"]),s<=d&&this.addSymbols("glyph",l.glyphQuadStartIndex,l.glyphQuadEndIndex,s,c["text-keep-upright"],e,a.angle)),p&&(a.insertCollisionFeature(n,t,c["icon-ignore-placement"]),t<=d&&this.addSymbols("icon",l.iconQuadStartIndex,l.iconQuadEndIndex,t,c["icon-keep-upright"],f,a.angle))}b&&this.addToDebugBuffers(a)},d.prototype.addSymbols=function(a,b,c,d,f,g,h){for(var i=this.prepareArrayGroup(a,4*(c-b)),j=i.elementArray,k=i.layoutVertexArray,l=this.zoom,m=Math.max(Math.log(d)/Math.LN2+l,0),n=b;n<c;n++){var o=this.symbolQuadsArray.get(n).SymbolQuad,p=(o.anchorAngle+h+Math.PI)%(2*Math.PI);if(!(f&&g&&(p<=Math.PI/2||p>3*Math.PI/2))){var q=o.tl,r=o.tr,s=o.bl,t=o.br,u=o.tex,v=o.anchorPoint,w=Math.max(l+Math.log(o.minScale)/Math.LN2,m),x=Math.min(l+Math.log(o.maxScale)/Math.LN2,25);if(!(x<=w)){w===m&&(w=0);var y=Math.round(o.glyphAngle/(2*Math.PI)*256),z=e(k,v.x,v.y,q.x,q.y,u.x,u.y,w,x,m,y);e(k,v.x,v.y,r.x,r.y,u.x+u.w,u.y,w,x,m,y),e(k,v.x,v.y,s.x,s.y,u.x,u.y+u.h,w,x,m,y),e(k,v.x,v.y,t.x,t.y,u.x+u.w,u.y+u.h,w,x,m,y),j.emplaceBack(z,z+1,z+2),j.emplaceBack(z+1,z+2,z+3)}}}},d.prototype.updateIcons=function(a){this.recalculateStyleLayers();var b=this.layer.layout["icon-image"];if(b)for(var c=0;c<this.features.length;c++){var d=j(this.features[c].properties,b);d&&(a[d]=!0)}},d.prototype.updateFont=function(a){this.recalculateStyleLayers();var b=this.layer.layout["text-font"],c=a[b]=a[b]||{};this.textFeatures=m(this.features,this.layer.layout,c)},d.prototype.addToDebugBuffers=function(a){for(var b=this.prepareArrayGroup("collisionBox",0),c=b.layoutVertexArray,d=-a.angle,e=a.yStretch,g=this.symbolInstancesStartIndex;g<this.symbolInstancesEndIndex;g++){var h=this.symbolInstancesArray.get(g);h.textCollisionFeature={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},h.iconCollisionFeature={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex};for(var i=0;i<2;i++){var j=h[0===i?"textCollisionFeature":"iconCollisionFeature"];if(j)for(var k=j.boxStartIndex;k<j.boxEndIndex;k++){var l=this.collisionBoxArray.get(k),m=l.anchorPoint,n=new f(l.x1,l.y1*e)._rotate(d),o=new f(l.x2,l.y1*e)._rotate(d),p=new f(l.x1,l.y2*e)._rotate(d),q=new f(l.x2,l.y2*e)._rotate(d),r=Math.max(0,Math.min(25,this.zoom+Math.log(l.maxScale)/Math.LN2)),s=Math.max(0,Math.min(25,this.zoom+Math.log(l.placementScale)/Math.LN2));this.addCollisionBoxVertex(c,m,n,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,n,r,s)}}}},d.prototype.addSymbolInstance=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,q,s,t,w,x){var y,z,A,B,C,D,E,F;if(c&&(E=g?u(a,c,m,b,f,o):[],C=new r(i,b,a,j,k,l,c,m,n,o,!1)),y=this.symbolQuadsArray.length,E&&E.length)for(var G=0;G<E.length;G++)this.addSymbolQuad(E[G]);z=this.symbolQuadsArray.length;var H=C?C.boxStartIndex:this.collisionBoxArray.length,I=C?C.boxEndIndex:this.collisionBoxArray.length;e&&(F=g?v(a,e,q,b,f,t,c,w,x):[],D=new r(i,b,a,j,k,l,e,q,s,t,!0)),A=this.symbolQuadsArray.length,F&&1===F.length&&this.addSymbolQuad(F[0]),B=this.symbolQuadsArray.length;var J=D?D.boxStartIndex:this.collisionBoxArray.length,K=D?D.boxEndIndex:this.collisionBoxArray.length;return B>d.MAX_QUADS&&p.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),z>d.MAX_QUADS&&p.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),this.symbolInstancesArray.emplaceBack(H,I,J,K,y,z,A,B,a.x,a.y,h)},d.prototype.addSymbolQuad=function(a){return this.symbolQuadsArray.emplaceBack(a.anchorPoint.x,a.anchorPoint.y,a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y,a.tex.h,a.tex.w,a.tex.x,a.tex.y,a.anchorAngle,a.glyphAngle,a.maxScale,a.minScale)}},{"../../symbol/anchor":382,"../../symbol/clip_line":384,"../../symbol/collision_feature":386,"../../symbol/get_anchors":388,"../../symbol/mergelines":391,"../../symbol/quads":392,"../../symbol/resolve_text":393,"../../symbol/shaping":394,"../../util/token":432,"../../util/util":433,"../bucket":320,"../load_geometry":328,"point-geometry":477}],325:[function(a,b,c){"use strict";function d(a,b,c){this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.attributes=b.members,this.itemSize=b.bytesPerElement,this.type=c,this.arrayType=b}b.exports=d,d.prototype.bind=function(a){var b=a[this.type];this.buffer?a.bindBuffer(b,this.buffer):(this.buffer=a.createBuffer(),a.bindBuffer(b,this.buffer),a.bufferData(b,this.arrayBuffer,a.STATIC_DRAW),this.arrayBuffer=null)};var e={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"};d.prototype.setVertexAttribPointers=function(a,b){for(var c=0;c<this.attributes.length;c++){var d=this.attributes[c],f=b[d.name];void 0!==f&&a.vertexAttribPointer(f,d.components,a[e[d.type]],!1,this.arrayType.bytesPerElement,d.offset)}},d.prototype.destroy=function(a){this.buffer&&a.deleteBuffer(this.buffer)},d.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"}},{}],326:[function(a,b,c){"use strict";function d(a,b){this.layoutVertexBuffer=new f(a.layoutVertexArray,b.layoutVertexArrayType,f.BufferType.VERTEX),a.elementArray&&(this.elementBuffer=new f(a.elementArray,b.elementArrayType,f.BufferType.ELEMENT));var c,d=this.vaos={};a.elementArray2&&(this.elementBuffer2=new f(a.elementArray2,b.elementArrayType2,f.BufferType.ELEMENT),c=this.secondVaos={}),this.paintVertexBuffers=e.mapObject(a.paintVertexArrays,function(e,h){return d[h]=new g,a.elementArray2&&(c[h]=new g),new f(e,b.paintVertexArrayTypes[h],f.BufferType.VERTEX)})}var e=a("../util/util"),f=a("./buffer"),g=a("../render/vertex_array_object");b.exports=d,d.prototype.destroy=function(a){this.layoutVertexBuffer.destroy(a),this.elementBuffer&&this.elementBuffer.destroy(a),this.elementBuffer2&&this.elementBuffer2.destroy(a);for(var b in this.paintVertexBuffers)this.paintVertexBuffers[b].destroy(a);for(var c in this.vaos)this.vaos[c].destroy(a);for(var d in this.secondVaos)this.secondVaos[d].destroy(a)}},{"../render/vertex_array_object":348,"../util/util":433,"./buffer":325}],327:[function(a,b,c){"use strict";function d(a,b,c){if(a.grid){var d=a,e=b;a=d.coord,b=d.overscaling,this.grid=new o(d.grid),this.featureIndexArray=new y(d.featureIndexArray),this.rawTileData=e,this.bucketLayerIDs=d.bucketLayerIDs}else this.grid=new o(l,16,0),this.featureIndexArray=new y;this.coord=a,this.overscaling=b,this.x=a.x,this.y=a.y,this.z=a.z-Math.log(b)/Math.LN2,this.setCollisionTile(c)}function e(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function f(a,b){return b-a}function g(a){return a["line-gap-width"]>0?a["line-gap-width"]+2*a["line-width"]:a["line-width"]}function h(a,b,c,d,e){if(!b[0]&&!b[1])return a;b=j.convert(b),"viewport"===c&&b._rotate(-d);for(var f=[],g=0;g<a.length;g++){for(var h=a[g],i=[],k=0;k<h.length;k++)i.push(h[k].sub(b._mult(e)));f.push(i)}return f}function i(a,b){for(var c=[],d=new j(0,0),e=0;e<a.length;e++){for(var f=a[e],g=[],h=0;h<f.length;h++){var i=f[h-1],k=f[h],l=f[h+1],m=0===h?d:k.sub(i)._unit()._perp(),n=h===f.length-1?d:l.sub(k)._unit()._perp(),o=m._add(n)._unit(),p=o.x*n.x+o.y*n.y;o._mult(1/p),g.push(o._mult(b)._add(k))}c.push(g)}return c}var j=a("point-geometry"),k=a("./load_geometry"),l=a("./bucket").EXTENT,m=a("feature-filter"),n=a("../util/struct_array"),o=a("grid-index"),p=a("../util/dictionary_coder"),q=a("vector-tile"),r=a("pbf"),s=a("../util/vectortile_to_geojson"),t=a("../util/util").arraysIntersect,u=a("../util/intersection_tests"),v=u.multiPolygonIntersectsBufferedMultiPoint,w=u.multiPolygonIntersectsMultiPolygon,x=u.multiPolygonIntersectsBufferedMultiLine,y=new n({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]});b.exports=d,d.prototype.insert=function(a,b,c,d){var e=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,c,d);for(var f=k(a),g=0;g<f.length;g++){for(var h=f[g],i=[1/0,1/0,-1/0,-1/0],j=0;j<h.length;j++){var l=h[j];i[0]=Math.min(i[0],l.x),i[1]=Math.min(i[1],l.y),i[2]=Math.max(i[2],l.x),i[3]=Math.max(i[3],l.y)}this.grid.insert(e,i[0],i[1],i[2],i[3])}},d.prototype.setCollisionTile=function(a){this.collisionTile=a},d.prototype.serialize=function(){var a={coord:this.coord,overscaling:this.overscaling,grid:this.grid.toArrayBuffer(),featureIndexArray:this.featureIndexArray.serialize(),bucketLayerIDs:this.bucketLayerIDs};return{data:a,transferables:[a.grid,a.featureIndexArray.arrayBuffer]}},d.prototype.query=function(a,b){this.vtLayers||(this.vtLayers=new q.VectorTile(new r(new Uint8Array(this.rawTileData))).layers,this.sourceLayerCoder=new p(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var c={},d=a.params||{},h=l/a.tileSize/a.scale,i=m(d.filter),k=0;for(var n in b){var o=b[n],s=o.paint,t=0;"line"===o.type?t=g(s)/2+Math.abs(s["line-offset"])+e(s["line-translate"]):"fill"===o.type?t=e(s["fill-translate"]):"circle"===o.type&&(t=s["circle-radius"]+e(s["circle-translate"])),k=Math.max(k,t*h)}for(var u=a.queryGeometry.map(function(a){return a.map(function(a){return new j(a.x,a.y)})}),v=1/0,w=1/0,x=-1/0,y=-1/0,z=0;z<u.length;z++)for(var A=u[z],B=0;B<A.length;B++){var C=A[B];v=Math.min(v,C.x),w=Math.min(w,C.y),x=Math.max(x,C.x),y=Math.max(y,C.y)}var D=this.grid.query(v-k,w-k,x+k,y+k);D.sort(f),this.filterMatching(c,D,this.featureIndexArray,u,i,d.layers,b,a.bearing,h);var E=this.collisionTile.queryRenderedSymbols(v,w,x,y,a.scale);return E.sort(),this.filterMatching(c,E,this.collisionTile.collisionBoxArray,u,i,d.layers,b,a.bearing,h),c},d.prototype.filterMatching=function(a,b,c,d,e,f,j,l,m){for(var n,o=0;o<b.length;o++){var p=b[o];if(p!==n){n=p;var q=c.get(p),r=this.bucketLayerIDs[q.bucketIndex];if(!f||t(f,r)){var u=this.sourceLayerCoder.decode(q.sourceLayerIndex),y=this.vtLayers[u],z=y.feature(q.featureIndex);if(e(z))for(var A=null,B=0;B<r.length;B++){var C=r[B];if(!(f&&f.indexOf(C)<0)){var D=j[C];if(D){var E;if("symbol"!==D.type){A||(A=k(z));var F=D.paint;if("line"===D.type){E=h(d,F["line-translate"],F["line-translate-anchor"],l,m);var G=g(F)/2*m;if(F["line-offset"]&&(A=i(A,F["line-offset"]*m)),!x(E,A,G))continue}else if("fill"===D.type){if(E=h(d,F["fill-translate"],F["fill-translate-anchor"],l,m),!w(E,A))continue}else if("circle"===D.type){E=h(d,F["circle-translate"],F["circle-translate-anchor"],l,m);var H=F["circle-radius"]*m;if(!v(E,A,H))continue}}var I=new s(z,this.z,this.x,this.y);I.layer=D.serialize({includeRefProperties:!0});var J=a[C];void 0===J&&(J=a[C]=[]),J.push(I)}}}}}}}},{"../util/dictionary_coder":423,"../util/intersection_tests":428,"../util/struct_array":431,"../util/util":433,"../util/vectortile_to_geojson":434,"./bucket":320,"./load_geometry":328,"feature-filter":141,"grid-index":275,pbf:470,"point-geometry":477,"vector-tile":564}],328:[function(a,b,c){"use strict";function d(a){return{min:-1*Math.pow(2,a-1),max:Math.pow(2,a-1)-1}}var e=a("../util/util"),f=a("./bucket").EXTENT,g=a("assert"),h={15:d(15),16:d(16)};b.exports=function(a,b){var c=h[b||16];g(c);for(var d=f/a.extent,i=a.loadGeometry(),j=0;j<i.length;j++)for(var k=i[j],l=0;l<k.length;l++){var m=k[l];m.x=Math.round(m.x*d),m.y=Math.round(m.y*d),(m.x<c.min||m.x>c.max||m.y<c.min||m.y>c.max)&&e.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}},{"../util/util":433,"./bucket":320,assert:51}],329:[function(a,b,c){"use strict";function d(a,b,c){this.column=a,this.row=b,this.zoom=c}b.exports=d,d.prototype={clone:function(){return new d(this.column,this.row,this.zoom)},zoomTo:function(a){return this.clone()._zoomTo(a)},sub:function(a){return this.clone()._sub(a)},_zoomTo:function(a){var b=Math.pow(2,a-this.zoom);return this.column*=b,this.row*=b,this.zoom=a,this},_sub:function(a){return a=a.zoomTo(this.zoom),this.column-=a.column,this.row-=a.row,this}}},{}],330:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))throw new Error("Invalid LngLat object: ("+a+", "+b+")");if(this.lng=+a,this.lat=+b,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}b.exports=d;var e=a("../util/util").wrap;d.prototype.wrap=function(){return new d(e(this.lng,-180,180),this.lat)},d.prototype.toArray=function(){return[this.lng,this.lat]},d.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{"../util/util":433}],331:[function(a,b,c){"use strict";function d(a,b){a&&(b?this.extend(a).extend(b):4===a.length?this.extend([a[0],a[1]]).extend([a[2],a[3]]):this.extend(a[0]).extend(a[1]))}b.exports=d;var e=a("./lng_lat");d.prototype={extend:function(a){var b,c,f=this._sw,g=this._ne;if(a instanceof e)b=a,c=a;else{if(!(a instanceof d))return a?this.extend(e.convert(a)||d.convert(a)):this;if(b=a._sw,c=a._ne,!b||!c)return this}return f||g?(f.lng=Math.min(b.lng,f.lng),f.lat=Math.min(b.lat,f.lat),g.lng=Math.max(c.lng,g.lng),g.lat=Math.max(c.lat,g.lat)):(this._sw=new e(b.lng,b.lat),this._ne=new e(c.lng,c.lat)),this},getCenter:function(){return new e((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new e(this.getWest(),this.getNorth())},getSouthEast:function(){return new e(this.getEast(),this.getSouth())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat},toArray:function(){return[this._sw.toArray(),this._ne.toArray()]},toString:function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}},d.convert=function(a){return!a||a instanceof d?a:new d(a)}},{"./lng_lat":330}],332:[function(a,b,c){"use strict";function d(a,b){this.tileSize=512,this._minZoom=a||0,this._maxZoom=b||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new e(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var e=a("./lng_lat"),f=a("point-geometry"),g=a("./coordinate"),h=a("../util/util").wrap,i=a("../util/interpolate"),j=a("../source/tile_coord"),k=a("../data/bucket").EXTENT,l=a("gl-matrix"),m=l.vec4,n=l.mat4,o=l.mat2;b.exports=d,d.prototype={get minZoom(){return this._minZoom},set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))},get maxZoom(){return this._maxZoom},set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new f(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(a){var b=-h(a,-180,180)*Math.PI/180;this.angle!==b&&(this._unmodified=!1,this.angle=b,this._calcMatrices(),this.rotationMatrix=o.create(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(a){var b=Math.min(60,a)/180*Math.PI;this._pitch!==b&&(this._unmodified=!1,this._pitch=b,this._calcMatrices())},get altitude(){return this._altitude},set altitude(a){var b=Math.max(.75,a);this._altitude!==b&&(this._unmodified=!1,this._altitude=b,this._calcMatrices())},get zoom(){return this._zoom},set zoom(a){var b=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==b&&(this._unmodified=!1,this._zoom=b,this.scale=this.zoomScale(b),this.tileZoom=Math.floor(b),this.zoomFraction=b-this.tileZoom,this._calcMatrices(),this._constrain())},get center(){return this._center},set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._calcMatrices(),this._constrain())},coveringZoomLevel:function(a){return(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize))},coveringTiles:function(a){var b=this.coveringZoomLevel(a),c=b;if(b<a.minzoom)return[];b>a.maxzoom&&(b=a.maxzoom);var d=this,e=d.locationCoordinate(d.center)._zoomTo(b),g=new f(e.column-.5,e.row-.5);return j.cover(b,[d.pointCoordinate(new f(0,0))._zoomTo(b),d.pointCoordinate(new f(d.width,0))._zoomTo(b),d.pointCoordinate(new f(d.width,d.height))._zoomTo(b),d.pointCoordinate(new f(0,d.height))._zoomTo(b)],a.reparseOverscaled?c:b).sort(function(a,b){return g.dist(a)-g.dist(b)})},resize:function(a,b){this.width=a,this.height=b,this.pixelsToGLUnits=[2/a,-2/b],this._calcMatrices(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(a){return Math.pow(2,a)},scaleZoom:function(a){return Math.log(a)/Math.LN2},project:function(a,b){return new f(this.lngX(a.lng,b),this.latY(a.lat,b))},unproject:function(a,b){return new e(this.xLng(a.x,b),this.yLat(a.y,b))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new f(this.x,this.y)},lngX:function(a,b){return(180+a)*(b||this.worldSize)/360},latY:function(a,b){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))*(b||this.worldSize)/360},xLng:function(a,b){return 360*a/(b||this.worldSize)-180},yLat:function(a,b){var c=180-360*a/(b||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(c*Math.PI/180))-90},panBy:function(a){var b=this.centerPoint._add(a);this.center=this.pointLocation(b)},setLocationAtPoint:function(a,b){var c=this.locationCoordinate(a),d=this.pointCoordinate(b),e=this.pointCoordinate(this.centerPoint),f=d._sub(c);this._unmodified=!1,this.center=this.coordinateLocation(e._sub(f))},locationPoint:function(a){return this.coordinatePoint(this.locationCoordinate(a))},pointLocation:function(a){return this.coordinateLocation(this.pointCoordinate(a))},locationCoordinate:function(a){var b=this.zoomScale(this.tileZoom)/this.worldSize,c=e.convert(a);return new g(this.lngX(c.lng)*b,this.latY(c.lat)*b,this.tileZoom)},coordinateLocation:function(a){var b=this.zoomScale(a.zoom);return new e(this.xLng(a.column,b),this.yLat(a.row,b))},pointCoordinate:function(a){var b=[a.x,a.y,0,1],c=[a.x,a.y,1,1];m.transformMat4(b,b,this.pixelMatrixInverse),m.transformMat4(c,c,this.pixelMatrixInverse);var d=b[3],e=c[3],f=b[0]/d,h=c[0]/e,j=b[1]/d,k=c[1]/e,l=b[2]/d,n=c[2]/e,o=l===n?0:(0-l)/(n-l),p=this.worldSize/this.zoomScale(this.tileZoom);return new g(i(f,h,o)/p,i(j,k,o)/p,this.tileZoom)},coordinatePoint:function(a){var b=this.worldSize/this.zoomScale(a.zoom),c=[a.column*b,a.row*b,0,1];return m.transformMat4(c,c,this.pixelMatrix),new f(c[0]/c[3],c[1]/c[3])},calculatePosMatrix:function(a,b){void 0===b&&(b=1/0),a instanceof j&&(a=a.toCoordinate(b));var c=Math.min(a.zoom,b),d=this.worldSize/Math.pow(2,c),e=new Float64Array(16);return n.identity(e),n.translate(e,e,[a.column*d,a.row*d,0]),n.scale(e,e,[d/k,d/k,1]),n.multiply(e,this.projMatrix,e),new Float32Array(e)},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,b,c,d,e,g,h,i,j=this.size,k=this._unmodified;this.latRange&&(a=this.latY(this.latRange[1]),b=this.latY(this.latRange[0]),e=b-a<j.y?j.y/(b-a):0),this.lngRange&&(c=this.lngX(this.lngRange[0]),d=this.lngX(this.lngRange[1]),g=d-c<j.x?j.x/(d-c):0);var l=Math.max(g||0,e||0);if(l)return this.center=this.unproject(new f(g?(d+c)/2:this.x,e?(b+a)/2:this.y)),this.zoom+=this.scaleZoom(l),this._unmodified=k,void(this._constraining=!1);if(this.latRange){var m=this.y,n=j.y/2;m-n<a&&(i=a+n),m+n>b&&(i=b-n)}if(this.lngRange){var o=this.x,p=j.x/2;o-p<c&&(h=c+p),o+p>d&&(h=d-p)}void 0===h&&void 0===i||(this.center=this.unproject(new f(void 0!==h?h:this.x,void 0!==i?i:this.y))),this._unmodified=k,this._constraining=!1}},_calcMatrices:function(){if(this.height){var a=Math.atan(.5/this.altitude),b=Math.sin(a)*this.altitude/Math.sin(Math.PI/2-this._pitch-a),c=Math.cos(Math.PI/2-this._pitch)*b+this.altitude,d=new Float64Array(16);if(n.perspective(d,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,c),n.translate(d,d,[0,0,-this.altitude]),n.scale(d,d,[1,-1,1/this.height]),n.rotateX(d,d,this._pitch),n.rotateZ(d,d,this.angle),n.translate(d,d,[-this.x,-this.y,0]),this.projMatrix=d,d=n.create(),n.scale(d,d,[this.width/2,-this.height/2,1]),n.translate(d,d,[1,-1,0]),this.pixelMatrix=n.multiply(new Float64Array(16),d,this.projMatrix),!(d=n.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=d}}}},{"../data/bucket":320,"../source/tile_coord":360,"../util/interpolate":427,"../util/util":433,"./coordinate":329,"./lng_lat":330,"gl-matrix":198,"point-geometry":477}],333:[function(a,b,c){"use strict";var d={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};b.exports=function(a,b,c,e){e=e||1;var f,g,h,i,j,k,l,m,n=[];for(f=0,g=a.length;f<g;f++)if(j=d[a[f]]){for(m=null,h=0,i=j[1].length;h<i;h+=2)-1===j[1][h]&&-1===j[1][h+1]?m=null:(k=b+j[1][h]*e,l=c-j[1][h+1]*e,m&&n.push(m.x,m.y,k,l),m={x:k,y:l});b+=j[0]*e}return n}},{}],334:[function(a,b,c){"use strict";var d=b.exports={};d.version=a("../package.json").version,d.Map=a("./ui/map"),d.Control=a("./ui/control/control"),d.Navigation=a("./ui/control/navigation"),d.Geolocate=a("./ui/control/geolocate"),d.Attribution=a("./ui/control/attribution"),d.Popup=a("./ui/popup"),d.Marker=a("./ui/marker"),d.Style=a("./style/style"),d.LngLat=a("./geo/lng_lat"),d.LngLatBounds=a("./geo/lng_lat_bounds"),d.Point=a("point-geometry"),d.Evented=a("./util/evented"),d.util=a("./util/util"),d.supported=a("./util/browser").supported;var e=a("./util/ajax");d.util.getJSON=e.getJSON,d.util.getArrayBuffer=e.getArrayBuffer;var f=a("./util/config");d.config=f,Object.defineProperty(d,"accessToken",{get:function(){return f.ACCESS_TOKEN},set:function(a){f.ACCESS_TOKEN=a}})},{"../package.json":435,"./geo/lng_lat":330,"./geo/lng_lat_bounds":331,"./style/style":369,"./ui/control/attribution":400,"./ui/control/control":401,"./ui/control/geolocate":402,"./ui/control/navigation":403,"./ui/map":412,"./ui/marker":413,"./ui/popup":414,"./util/ajax":416,"./util/browser":417,"./util/config":422,"./util/evented":425,"./util/util":433,"point-geometry":477}],335:[function(a,b,c){"use strict";var d=a("assert");b.exports=function(a){for(var b={define:{},initialize:{}},c=0;c<a.length;c++){var e=a[c];d("u_"===e.name.slice(0,2));var f="{precision} "+(1===e.components?"float":"vec"+e.components);b.define[e.name.slice(2)]="uniform "+f+" "+e.name+";\n",b.initialize[e.name.slice(2)]=f+" "+e.name.slice(2)+" = "+e.name+";\n"}return b}},{assert:51}],336:[function(a,b,c){"use strict";function d(a,b,c){var d,h=a.gl,i=a.transform,j=c.paint["background-color"],k=c.paint["background-pattern"],l=c.paint["background-opacity"],m=k?a.spriteAtlas.getPosition(k.from,!0):null,n=k?a.spriteAtlas.getPosition(k.to,!0):null;if(a.setDepthSublayer(0),m&&n){if(a.isOpaquePass)return;d=a.useProgram("pattern"),h.uniform1i(d.u_image,0),h.uniform2fv(d.u_pattern_tl_a,m.tl),h.uniform2fv(d.u_pattern_br_a,m.br),h.uniform2fv(d.u_pattern_tl_b,n.tl),h.uniform2fv(d.u_pattern_br_b,n.br),h.uniform1f(d.u_opacity,l),h.uniform1f(d.u_mix,k.t),h.uniform2fv(d.u_pattern_size_a,m.size),h.uniform2fv(d.u_pattern_size_b,n.size),h.uniform1f(d.u_scale_a,k.fromScale),h.uniform1f(d.u_scale_b,k.toScale),h.activeTexture(h.TEXTURE0),a.spriteAtlas.bind(h,!0),a.tileExtentPatternVAO.bind(h,d,a.tileExtentBuffer)}else{if(a.isOpaquePass!==(1===j[3]))return;var o=f([{name:"u_color",components:4},{name:"u_opacity",components:1}]);d=a.useProgram("fill",[],o,o),h.uniform4fv(d.u_color,j),h.uniform1f(d.u_opacity,l),a.tileExtentVAO.bind(h,d,a.tileExtentBuffer)}h.disable(h.STENCIL_TEST);for(var p=i.coveringTiles({tileSize:g}),q=0;q<p.length;q++){var r=p[q];if(m&&n){var s={coord:r,tileSize:g};h.uniform1f(d.u_tile_units_to_pixels,1/e(s,1,a.transform.tileZoom));var t=s.tileSize*Math.pow(2,a.transform.tileZoom-s.coord.z),u=t*(s.coord.x+r.w*Math.pow(2,s.coord.z)),v=t*s.coord.y
;h.uniform2f(d.u_pixel_coord_upper,u>>16,v>>16),h.uniform2f(d.u_pixel_coord_lower,65535&u,65535&v)}h.uniformMatrix4fv(d.u_matrix,!1,a.transform.calculatePosMatrix(r)),h.drawArrays(h.TRIANGLE_STRIP,0,a.tileExtentBuffer.length)}h.stencilMask(0),h.stencilFunc(h.EQUAL,128,128)}var e=a("../source/pixels_to_tile_units"),f=a("./create_uniform_pragmas"),g=512;b.exports=d},{"../source/pixels_to_tile_units":354,"./create_uniform_pragmas":335}],337:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;a.setDepthSublayer(0),a.depthMask(!1),f.disable(f.STENCIL_TEST);for(var g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.circle;if(k){var l=j.paintAttributes.circle[c.id],m=a.useProgram("circle",l.defines,l.vertexPragmas,l.fragmentPragmas);"map"===c.paint["circle-pitch-scale"]?(f.uniform1i(m.u_scale_with_map,!0),f.uniform2f(m.u_extrude_scale,a.transform.pixelsToGLUnits[0]*a.transform.altitude,a.transform.pixelsToGLUnits[1]*a.transform.altitude)):(f.uniform1i(m.u_scale_with_map,!1),f.uniform2fv(m.u_extrude_scale,a.transform.pixelsToGLUnits)),f.uniform1f(m.u_devicepixelratio,e.devicePixelRatio),f.uniformMatrix4fv(m.u_matrix,!1,a.translatePosMatrix(h.posMatrix,i,c.paint["circle-translate"],c.paint["circle-translate-anchor"])),j.setUniforms(f,"circle",m,c,{zoom:a.transform.zoom});for(var n=0;n<k.length;n++){var o=k[n];o.vaos[c.id].bind(f,m,o.layoutVertexBuffer,o.elementBuffer,o.paintVertexBuffers[c.id]),f.drawElements(f.TRIANGLES,3*o.elementBuffer.length,f.UNSIGNED_SHORT,0)}}}}}}var e=a("../util/browser");b.exports=d},{"../util/browser":417}],338:[function(a,b,c){"use strict";function d(a,b,c,d){var e=a.gl;e.enable(e.STENCIL_TEST);for(var f=a.useProgram("collisionbox"),g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.collisionBox;if(k&&k.length){var l=k[0];0!==l.layoutVertexBuffer.length&&(e.uniformMatrix4fv(f.u_matrix,!1,h.posMatrix),a.enableTileClippingMask(h),a.lineWidth(1),e.uniform1f(f.u_scale,Math.pow(2,a.transform.zoom-i.coord.z)),e.uniform1f(f.u_zoom,10*a.transform.zoom),e.uniform1f(f.u_maxzoom,10*(i.coord.z+1)),l.vaos[c.id].bind(e,f,l.layoutVertexBuffer),e.drawArrays(e.LINES,0,l.layoutVertexBuffer.length))}}}}b.exports=d},{}],339:[function(a,b,c){"use strict";function d(a,b,c){if(!a.isOpaquePass&&a.options.debug)for(var d=0;d<c.length;d++)e(a,b,c[d])}function e(a,b,c){var d=a.gl;d.disable(d.STENCIL_TEST),a.lineWidth(1*g.devicePixelRatio);var e=c.posMatrix,l=a.useProgram("debug");d.uniformMatrix4fv(l.u_matrix,!1,e),d.uniform4f(l.u_color,1,0,0,1),a.debugVAO.bind(d,l,a.debugBuffer),d.drawArrays(d.LINE_STRIP,0,a.debugBuffer.length);for(var m=f(c.toString(),50,200,5),n=new a.PosArray,o=0;o<m.length;o+=2)n.emplaceBack(m[o],m[o+1]);var p=new j(n.serialize(),a.PosArray.serialize(),j.BufferType.VERTEX);(new k).bind(d,l,p),d.uniform4f(l.u_color,1,1,1,1);for(var q=b.getTile(c).tileSize,r=i/(Math.pow(2,a.transform.zoom-c.z)*q),s=[[-1,-1],[-1,1],[1,-1],[1,1]],t=0;t<s.length;t++){var u=s[t];d.uniformMatrix4fv(l.u_matrix,!1,h.translate([],e,[r*u[0],r*u[1],0])),d.drawArrays(d.LINES,0,p.length)}d.uniform4f(l.u_color,0,0,0,1),d.uniformMatrix4fv(l.u_matrix,!1,e),d.drawArrays(d.LINES,0,p.length)}var f=a("../lib/debugtext"),g=a("../util/browser"),h=a("gl-matrix").mat4,i=a("../data/bucket").EXTENT,j=a("../data/buffer"),k=a("./vertex_array_object");b.exports=d},{"../data/bucket":320,"../data/buffer":325,"../lib/debugtext":333,"../util/browser":417,"./vertex_array_object":348,"gl-matrix":198}],340:[function(a,b,c){"use strict";function d(a,b,c,d){var g=a.gl;g.enable(g.STENCIL_TEST);var h;if(h=!c.paint["fill-pattern"]&&(c.isPaintValueFeatureConstant("fill-color")&&c.isPaintValueFeatureConstant("fill-opacity")&&1===c.paint["fill-color"][3]&&1===c.paint["fill-opacity"]),a.isOpaquePass===h){a.setDepthSublayer(1);for(var i=0;i<d.length;i++)e(a,b,c,d[i])}if(!a.isOpaquePass&&c.paint["fill-antialias"]){a.lineWidth(2),a.depthMask(!1);var j=c.getPaintProperty("fill-outline-color");(j||!c.paint["fill-pattern"])&&j?a.setDepthSublayer(2):a.setDepthSublayer(0);for(var k=0;k<d.length;k++)f(a,b,c,d[k])}}function e(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h=f.bufferGroups.fill;if(h){var i,j=a.gl,k=c.paint["fill-pattern"];if(k)i=a.useProgram("pattern"),g(k,c.paint["fill-opacity"],e,d,a,i),j.activeTexture(j.TEXTURE0),a.spriteAtlas.bind(j,!0);else{var l=f.paintAttributes.fill[c.id];i=a.useProgram("fill",l.defines,l.vertexPragmas,l.fragmentPragmas),f.setUniforms(j,"fill",i,c,{zoom:a.transform.zoom})}j.uniformMatrix4fv(i.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),a.enableTileClippingMask(d);for(var m=0;m<h.length;m++){var n=h[m];n.vaos[c.id].bind(j,i,n.layoutVertexBuffer,n.elementBuffer,n.paintVertexBuffers[c.id]),j.drawElements(j.TRIANGLES,n.elementBuffer.length,j.UNSIGNED_SHORT,0)}}}}function f(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h,i=a.gl,j=f.bufferGroups.fill,k=c.paint["fill-pattern"],l=c.paint["fill-opacity"],m=c.getPaintProperty("fill-outline-color");if(k&&!m)h=a.useProgram("outlinepattern"),i.uniform2f(h.u_world,i.drawingBufferWidth,i.drawingBufferHeight);else{var n=f.paintAttributes.fill[c.id];h=a.useProgram("outline",n.defines,n.vertexPragmas,n.fragmentPragmas),i.uniform2f(h.u_world,i.drawingBufferWidth,i.drawingBufferHeight),i.uniform1f(h.u_opacity,l),f.setUniforms(i,"fill",h,c,{zoom:a.transform.zoom})}i.uniformMatrix4fv(h.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),k&&g(k,l,e,d,a,h),a.enableTileClippingMask(d);for(var o=0;o<j.length;o++){var p=j[o];p.secondVaos[c.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer2,p.paintVertexBuffers[c.id]),i.drawElements(i.LINES,2*p.elementBuffer2.length,i.UNSIGNED_SHORT,0)}}}function g(a,b,c,d,e,f){var g=e.gl,i=e.spriteAtlas.getPosition(a.from,!0),j=e.spriteAtlas.getPosition(a.to,!0);if(i&&j){g.uniform1i(f.u_image,0),g.uniform2fv(f.u_pattern_tl_a,i.tl),g.uniform2fv(f.u_pattern_br_a,i.br),g.uniform2fv(f.u_pattern_tl_b,j.tl),g.uniform2fv(f.u_pattern_br_b,j.br),g.uniform1f(f.u_opacity,b),g.uniform1f(f.u_mix,a.t),g.uniform1f(f.u_tile_units_to_pixels,1/h(c,1,e.transform.tileZoom)),g.uniform2fv(f.u_pattern_size_a,i.size),g.uniform2fv(f.u_pattern_size_b,j.size),g.uniform1f(f.u_scale_a,a.fromScale),g.uniform1f(f.u_scale_b,a.toScale);var k=c.tileSize*Math.pow(2,e.transform.tileZoom-c.coord.z),l=k*(c.coord.x+d.w*Math.pow(2,c.coord.z)),m=k*c.coord.y;g.uniform2f(f.u_pixel_coord_upper,l>>16,m>>16),g.uniform2f(f.u_pixel_coord_lower,65535&l,65535&m),g.activeTexture(g.TEXTURE0),e.spriteAtlas.bind(g,!0)}}var h=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":354}],341:[function(a,b,c){"use strict";var d=a("../util/browser"),e=a("gl-matrix").mat2,f=a("../source/pixels_to_tile_units");b.exports=function(a,b,c,g){if(!a.isOpaquePass){a.setDepthSublayer(0),a.depthMask(!1);var h=a.gl;if(h.enable(h.STENCIL_TEST),!(c.paint["line-width"]<=0)){var i=1/d.devicePixelRatio,j=c.paint["line-blur"]+i,k=c.paint["line-color"],l=a.transform,m=e.create();e.scale(m,m,[1,Math.cos(l._pitch)]),e.rotate(m,m,a.transform.angle);var n,o,p,q,r,s=Math.sqrt(l.height*l.height/4*(1+l.altitude*l.altitude)),t=l.height/2*Math.tan(l._pitch),u=(s+t)/s-1,v=c.paint["line-dasharray"],w=c.paint["line-pattern"];if(v)n=a.useProgram("linesdfpattern"),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform4fv(n.u_color,k),h.uniform1f(n.u_opacity,c.paint["line-opacity"]),o=a.lineAtlas.getDash(v.from,"round"===c.layout["line-cap"]),p=a.lineAtlas.getDash(v.to,"round"===c.layout["line-cap"]),h.uniform1i(n.u_image,0),h.activeTexture(h.TEXTURE0),a.lineAtlas.bind(h),h.uniform1f(n.u_tex_y_a,o.y),h.uniform1f(n.u_tex_y_b,p.y),h.uniform1f(n.u_mix,v.t),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m);else if(w){if(q=a.spriteAtlas.getPosition(w.from,!0),r=a.spriteAtlas.getPosition(w.to,!0),!q||!r)return;n=a.useProgram("linepattern"),h.uniform1i(n.u_image,0),h.activeTexture(h.TEXTURE0),a.spriteAtlas.bind(h,!0),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform2fv(n.u_pattern_tl_a,q.tl),h.uniform2fv(n.u_pattern_br_a,q.br),h.uniform2fv(n.u_pattern_tl_b,r.tl),h.uniform2fv(n.u_pattern_br_b,r.br),h.uniform1f(n.u_fade,w.t),h.uniform1f(n.u_opacity,c.paint["line-opacity"]),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m)}else n=a.useProgram("line"),h.uniform1f(n.u_linewidth,c.paint["line-width"]/2),h.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),h.uniform1f(n.u_antialiasing,i/2),h.uniform1f(n.u_blur,j),h.uniform1f(n.u_extra,u),h.uniform1f(n.u_offset,-c.paint["line-offset"]),h.uniformMatrix2fv(n.u_antialiasingmatrix,!1,m),h.uniform4fv(n.u_color,k),h.uniform1f(n.u_opacity,c.paint["line-opacity"]);for(var x=0;x<g.length;x++){var y=g[x],z=b.getTile(y),A=z.getBucket(c);if(A){var B=A.bufferGroups.line;if(B){a.enableTileClippingMask(y);var C=a.translatePosMatrix(y.posMatrix,z,c.paint["line-translate"],c.paint["line-translate-anchor"]);h.uniformMatrix4fv(n.u_matrix,!1,C);var D=1/f(z,1,a.transform.zoom);if(v){var E=o.width*v.fromScale,F=p.width*v.toScale,G=[1/f(z,E,a.transform.tileZoom),-o.height/2],H=[1/f(z,F,a.transform.tileZoom),-p.height/2],I=a.lineAtlas.width/(256*Math.min(E,F)*d.devicePixelRatio)/2;h.uniform1f(n.u_ratio,D),h.uniform2fv(n.u_patternscale_a,G),h.uniform2fv(n.u_patternscale_b,H),h.uniform1f(n.u_sdfgamma,I)}else w?(h.uniform1f(n.u_ratio,D),h.uniform2fv(n.u_pattern_size_a,[f(z,q.size[0]*w.fromScale,a.transform.tileZoom),r.size[1]]),h.uniform2fv(n.u_pattern_size_b,[f(z,r.size[0]*w.toScale,a.transform.tileZoom),r.size[1]])):h.uniform1f(n.u_ratio,D);for(var J=0;J<B.length;J++){var K=B[J];K.vaos[c.id].bind(h,n,K.layoutVertexBuffer,K.elementBuffer),h.drawElements(h.TRIANGLES,3*K.elementBuffer.length,h.UNSIGNED_SHORT,0)}}}}}}}},{"../source/pixels_to_tile_units":354,"../util/browser":417,"gl-matrix":198}],342:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;f.enable(f.DEPTH_TEST),a.depthMask(!0),f.depthFunc(f.LESS);for(var g=d.length&&d[0].z,h=0;h<d.length;h++){var i=d[h];a.setDepthSublayer(i.z-g),e(a,b,c,i)}f.depthFunc(f.LEQUAL)}}function e(a,b,c,d){var e=a.gl;e.disable(e.STENCIL_TEST);var j=b.getTile(d),k=a.transform.calculatePosMatrix(d,b.maxzoom),l=a.useProgram("raster");e.uniformMatrix4fv(l.u_matrix,!1,k),e.uniform1f(l.u_brightness_low,c.paint["raster-brightness-min"]),e.uniform1f(l.u_brightness_high,c.paint["raster-brightness-max"]),e.uniform1f(l.u_saturation_factor,h(c.paint["raster-saturation"])),e.uniform1f(l.u_contrast_factor,g(c.paint["raster-contrast"])),e.uniform3fv(l.u_spin_weights,f(c.paint["raster-hue-rotate"]));var m,n,o=j.source&&j.source.findLoadedParent(d,0,{}),p=i(j,o,c,a.transform);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,j.texture),e.activeTexture(e.TEXTURE1),o?(e.bindTexture(e.TEXTURE_2D,o.texture),m=Math.pow(2,o.coord.z-j.coord.z),n=[j.coord.x*m%1,j.coord.y*m%1]):(e.bindTexture(e.TEXTURE_2D,j.texture),p[1]=0),e.uniform2fv(l.u_tl_parent,n||[0,0]),e.uniform1f(l.u_scale_parent,m||1),e.uniform1f(l.u_buffer_scale,1),e.uniform1f(l.u_opacity0,p[0]),e.uniform1f(l.u_opacity1,p[1]),e.uniform1i(l.u_image0,0),e.uniform1i(l.u_image1,1);var q=j.boundsBuffer||a.rasterBoundsBuffer;(j.boundsVAO||a.rasterBoundsVAO).bind(e,l,q),e.drawArrays(e.TRIANGLE_STRIP,0,q.length)}function f(a){a*=Math.PI/180;var b=Math.sin(a),c=Math.cos(a);return[(2*c+1)/3,(-Math.sqrt(3)*b-c+1)/3,(Math.sqrt(3)*b-c+1)/3]}function g(a){return a>0?1/(1-a):1+a}function h(a){return a>0?1-1/(1.001-a):-a}function i(a,b,c,d){var e=[1,0],f=c.paint["raster-fade-duration"];if(a.source&&f>0){var g=(new Date).getTime(),h=(g-a.timeAdded)/f,i=b?(g-b.timeAdded)/f:-1,k=d.coveringZoomLevel(a.source),l=!!b&&Math.abs(b.coord.z-k)>Math.abs(a.coord.z-k);!b||l?(e[0]=j.clamp(h,0,1),e[1]=1-e[0]):(e[0]=j.clamp(1-i,0,1),e[1]=1-e[0])}var m=c.paint["raster-opacity"];return e[0]*=m,e[1]*=m,e}var j=a("../util/util"),k=a("../util/struct_array");b.exports=d,d.RasterBoundsArray=new k({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]})},{"../util/struct_array":431,"../util/util":433}],343:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=!(c.layout["text-allow-overlap"]||c.layout["icon-allow-overlap"]||c.layout["text-ignore-placement"]||c.layout["icon-ignore-placement"]),g=a.gl;f?g.disable(g.STENCIL_TEST):g.enable(g.STENCIL_TEST),a.setDepthSublayer(0),a.depthMask(!1),g.disable(g.DEPTH_TEST),e(a,b,c,d,!1,c.paint["icon-translate"],c.paint["icon-translate-anchor"],c.layout["icon-rotation-alignment"],c.layout["icon-rotation-alignment"],c.layout["icon-size"],c.paint["icon-halo-width"],c.paint["icon-halo-color"],c.paint["icon-halo-blur"],c.paint["icon-opacity"],c.paint["icon-color"]),e(a,b,c,d,!0,c.paint["text-translate"],c.paint["text-translate-anchor"],c.layout["text-rotation-alignment"],c.layout["text-pitch-alignment"],c.layout["text-size"],c.paint["text-halo-width"],c.paint["text-halo-color"],c.paint["text-halo-blur"],c.paint["text-opacity"],c.paint["text-color"]),g.enable(g.DEPTH_TEST),b.map.showCollisionBoxes&&h(a,b,c,d)}}function e(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p){for(var q=0;q<d.length;q++){var r=b.getTile(d[q]),s=r.getBucket(c);if(s){var t=s.bufferGroups,u=e?t.glyph:t.icon;u.length&&(a.enableTileClippingMask(d[q]),f(a,c,d[q].posMatrix,r,s,u,e,e||s.sdfIcons,!e&&s.iconsNeedLinear,e?s.adjustedTextSize:s.adjustedIconSize,s.fontstack,g,h,i,j,k,l,m,n,o,p))}}}function f(a,b,c,d,e,f,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y,z,A=a.gl,B=a.transform,C="map"===p,D="map"===q,E=h?24:1,F=r/E;if(D?(y=i(d,1,a.transform.zoom)*F,z=1/Math.cos(B._pitch),x=[y,y]):(y=a.transform.altitude*F,z=1,x=[B.pixelsToGLUnits[0]*y,B.pixelsToGLUnits[1]*y]),h||a.style.sprite.loaded()){var G=a.useProgram(j?"sdf":"icon");if(A.uniformMatrix4fv(G.u_matrix,!1,a.translatePosMatrix(c,d,n,o)),A.uniform1i(G.u_rotate_with_map,C),A.uniform1i(G.u_pitch_with_map,D),A.uniform2fv(G.u_extrude_scale,x),A.activeTexture(A.TEXTURE0),A.uniform1i(G.u_texture,0),h){var H=m&&a.glyphSource.getGlyphAtlas(m);if(!H)return;H.updateTexture(A),A.uniform2f(G.u_texsize,H.width/4,H.height/4)}else{var I=a.options.rotating||a.options.zooming,J=1!==F||g.devicePixelRatio!==a.spriteAtlas.pixelRatio||k,K=D||a.transform.pitch;a.spriteAtlas.bind(A,j||I||J||K),A.uniform2f(G.u_texsize,a.spriteAtlas.width/4,a.spriteAtlas.height/4)}var L=Math.log(r/l)/Math.LN2||0;A.uniform1f(G.u_zoom,10*(a.transform.zoom-L)),A.activeTexture(A.TEXTURE1),a.frameHistory.bind(A),A.uniform1i(G.u_fadetexture,1);var M;if(j){var N=.105*E/r/g.devicePixelRatio;if(s){A.uniform1f(G.u_gamma,(1.19*u/F/8+N)*z),A.uniform4fv(G.u_color,t),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,(6-s/F)/8);for(var O=0;O<f.length;O++)M=f[O],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}A.uniform1f(G.u_gamma,N*z),A.uniform4fv(G.u_color,w),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,.75),A.uniform1f(G.u_pitch,B.pitch/360*2*Math.PI),A.uniform1f(G.u_bearing,B.bearing/360*2*Math.PI),A.uniform1f(G.u_aspect_ratio,B.width/B.height);for(var P=0;P<f.length;P++)M=f[P],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}else{A.uniform1f(G.u_opacity,v);for(var Q=0;Q<f.length;Q++)M=f[Q],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}}}var g=a("../util/browser"),h=a("./draw_collision_debug"),i=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":354,"../util/browser":417,"./draw_collision_debug":338}],344:[function(a,b,c){"use strict";function d(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.fadeDuration=300,this.previousZoom=0,this.firstFrame=!0}b.exports=d,d.prototype.record=function(a){var b=Date.now();this.firstFrame&&(b=0,this.firstFrame=!1),a=Math.floor(10*a);var c;if(a<this.previousZoom)for(c=a+1;c<=this.previousZoom;c++)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];else for(c=a;c>this.previousZoom;c--)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];for(c=0;c<256;c++){var d=b-this.changeTimes[c],e=d/this.fadeDuration*255;this.opacities[c]=c<=a?this.changeOpacities[c]+e:this.changeOpacities[c]-e}this.changed=!0,this.previousZoom=a},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.changed&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,256,1,a.ALPHA,a.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,256,1,0,a.ALPHA,a.UNSIGNED_BYTE,this.array))}},{}],345:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}var e=a("../util/util");b.exports=d,d.prototype.setSprite=function(a){this.sprite=a},d.prototype.getDash=function(a,b){var c=a.join(",")+b;return this.positions[c]||(this.positions[c]=this.addDash(a,b)),this.positions[c]},d.prototype.addDash=function(a,b){var c=b?7:0,d=2*c+1;if(this.nextRow+d>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var f=0,g=0;g<a.length;g++)f+=a[g];for(var h=this.width/f,i=h/2,j=a.length%2==1,k=-c;k<=c;k++)for(var l=this.nextRow+c+k,m=this.width*l,n=j?-a[a.length-1]:0,o=a[0],p=1,q=0;q<this.width;q++){for(;o<q/h;)n=o,o+=a[p],j&&p===a.length-1&&(o+=a[0]),p++;var r,s=Math.abs(q-n*h),t=Math.abs(q-o*h),u=Math.min(s,t),v=p%2==1;if(b){var w=c?k/c*(i+1):0;if(v){var x=i-Math.abs(w);r=Math.sqrt(u*u+x*x)}else r=i-Math.sqrt(u*u+w*w)}else r=(v?1:-1)*u;this.data[3+4*(m+q)]=Math.max(0,Math.min(255,r+128))}var y={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:f};return this.nextRow+=d,this.dirty=!0,y},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this.data))}},{"../util/util":433}],346:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.transform=b,this.reusableTextures={},this.preFbos={},this.frameHistory=new g,this.setup(),this.numSublayers=h.maxUnderzooming+h.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE)}var e=a("../util/browser"),f=a("gl-matrix").mat4,g=a("./frame_history"),h=a("../source/source_cache"),i=a("../data/bucket").EXTENT,j=a("../source/pixels_to_tile_units"),k=a("../util/util"),l=a("../util/struct_array"),m=a("../data/buffer"),n=a("./vertex_array_object"),o=a("./draw_raster").RasterBoundsArray,p=a("./create_uniform_pragmas");b.exports=d,k.extend(d.prototype,a("./painter/use_program")),d.prototype.resize=function(a,b){var c=this.gl;this.width=a*e.devicePixelRatio,this.height=b*e.devicePixelRatio,c.viewport(0,0,this.width,this.height)},d.prototype.setup=function(){var a=this.gl;a.verbose=!0,a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),this._depthMask=!1,a.depthMask(!1);var b=this.PosArray=new l({members:[{name:"a_pos",type:"Int16",components:2}]}),c=new b;c.emplaceBack(0,0),c.emplaceBack(i,0),c.emplaceBack(0,i),c.emplaceBack(i,i),this.tileExtentBuffer=new m(c.serialize(),b.serialize(),m.BufferType.VERTEX),this.tileExtentVAO=new n,this.tileExtentPatternVAO=new n;var d=new b;d.emplaceBack(0,0),d.emplaceBack(i,0),d.emplaceBack(i,i),d.emplaceBack(0,i),d.emplaceBack(0,0),this.debugBuffer=new m(d.serialize(),b.serialize(),m.BufferType.VERTEX),this.debugVAO=new n;var e=new o;e.emplaceBack(0,0,0,0),e.emplaceBack(i,0,32767,0),e.emplaceBack(0,i,0,32767),e.emplaceBack(i,i,32767,32767),this.rasterBoundsBuffer=new m(e.serialize(),o.serialize(),m.BufferType.VERTEX),this.rasterBoundsVAO=new n},d.prototype.clearColor=function(){var a=this.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},d.prototype.clearStencil=function(){var a=this.gl;a.clearStencil(0),a.stencilMask(255),a.clear(a.STENCIL_BUFFER_BIT)},d.prototype.clearDepth=function(){var a=this.gl;a.clearDepth(1),this.depthMask(!0),a.clear(a.DEPTH_BUFFER_BIT)},d.prototype._renderTileClippingMasks=function(a){var b=this.gl;b.colorMask(!1,!1,!1,!1),this.depthMask(!1),b.disable(b.DEPTH_TEST),b.enable(b.STENCIL_TEST),b.stencilMask(248),b.stencilOp(b.KEEP,b.KEEP,b.REPLACE);var c=1;this._tileClippingMaskIDs={};for(var d=0;d<a.length;d++){var e=a[d],f=this._tileClippingMaskIDs[e.id]=c++<<3;b.stencilFunc(b.ALWAYS,f,248);var g=p([{name:"u_color",components:4},{name:"u_opacity",components:1}]),h=this.useProgram("fill",[],g,g);b.uniformMatrix4fv(h.u_matrix,!1,e.posMatrix),this.tileExtentVAO.bind(b,h,this.tileExtentBuffer),b.drawArrays(b.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}b.stencilMask(0),b.colorMask(!0,!0,!0,!0),this.depthMask(!0),b.enable(b.DEPTH_TEST)},d.prototype.enableTileClippingMask=function(a){var b=this.gl;b.stencilFunc(b.EQUAL,this._tileClippingMaskIDs[a.id],248)},d.prototype.prepareBuffers=function(){},d.prototype.bindDefaultFramebuffer=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)};var q={symbol:a("./draw_symbol"),circle:a("./draw_circle"),line:a("./draw_line"),fill:a("./draw_fill"),raster:a("./draw_raster"),background:a("./draw_background"),debug:a("./draw_debug")};d.prototype.render=function(a,b){this.style=a,this.options=b,this.lineAtlas=a.lineAtlas,this.spriteAtlas=a.spriteAtlas,this.spriteAtlas.setSprite(a.sprite),this.glyphSource=a.glyphSource,this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(b.showOverdrawInspector),this.depthRange=(a._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass({isOpaquePass:!0}),this.renderPass({isOpaquePass:!1})},d.prototype.renderPass=function(a){var b=this.style._groups,c=a.isOpaquePass;this.currentLayer=c?this.style._order.length:-1;for(var d=0;d<b.length;d++){var e,f=b[c?b.length-1-d:d],g=this.style.sources[f.source],h=[];if(g){for(h=g.getVisibleCoordinates(),e=0;e<h.length;e++)h[e].posMatrix=this.transform.calculatePosMatrix(h[e],g.maxzoom);this.clearStencil(),g.prepare&&g.prepare(),g.isTileClipped&&this._renderTileClippingMasks(h)}for(c?(this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.isOpaquePass=!0):(this.gl.enable(this.gl.BLEND),this.isOpaquePass=!1,h.reverse()),e=0;e<f.length;e++){var i=f[c?f.length-1-e:e];this.currentLayer+=c?-1:1,this.renderLayer(this,g,i,h)}g&&q.debug(this,g,h)}},d.prototype.depthMask=function(a){a!==this._depthMask&&(this._depthMask=a,this.gl.depthMask(a))},d.prototype.renderLayer=function(a,b,c,d){c.isHidden(this.transform.zoom)||("background"===c.type||d.length)&&(this.id=c.id,q[c.type](a,b,c,d))},d.prototype.setDepthSublayer=function(a){var b=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon,c=b-1+this.depthRange;this.gl.depthRange(c,b)},d.prototype.translatePosMatrix=function(a,b,c,d){if(!c[0]&&!c[1])return a;if("viewport"===d){var e=Math.sin(-this.transform.angle),g=Math.cos(-this.transform.angle);c=[c[0]*g-c[1]*e,c[0]*e+c[1]*g]}var h=[j(b,c[0],this.transform.zoom),j(b,c[1],this.transform.zoom),0],i=new Float32Array(16);return f.translate(i,a,h),i},d.prototype.saveTexture=function(a){var b=this.reusableTextures[a.size];b?b.push(a):this.reusableTextures[a.size]=[a]},d.prototype.getTexture=function(a){var b=this.reusableTextures[a];return b&&b.length>0?b.pop():null},d.prototype.lineWidth=function(a){this.gl.lineWidth(k.clamp(a,this.lineWidthRange[0],this.lineWidthRange[1]))},d.prototype.showOverdrawInspector=function(a){if(a||this._showOverdrawInspector){this._showOverdrawInspector=a;var b=this.gl;if(a){b.blendFunc(b.CONSTANT_COLOR,b.ONE);b.blendColor(1/8,1/8,1/8,0),b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)}else b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA)}}},{"../data/bucket":320,"../data/buffer":325,"../source/pixels_to_tile_units":354,"../source/source_cache":358,"../util/browser":417,"../util/struct_array":431,"../util/util":433,"./create_uniform_pragmas":335,"./draw_background":336,"./draw_circle":337,"./draw_debug":339,"./draw_fill":340,"./draw_line":341,"./draw_raster":342,"./draw_symbol":343,"./frame_history":344,"./painter/use_program":347,"./vertex_array_object":348,"gl-matrix":198}],347:[function(a,b,c){"use strict";function d(a,b){return a.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(a,c,d,e,f){return b[c][f].replace(/{type}/g,e).replace(/{precision}/g,d)})}var e=a("assert"),f=a("../../util/util"),g=a("mapbox-gl-shaders"),h=g.util;b.exports._createProgram=function(a,b,c,i){for(var j=this.gl,k=j.createProgram(),l=g[a],m="#define MAPBOX_GL_JS;\n",n=0;n<b.length;n++)m+="#define "+b[n]+";\n";var o=j.createShader(j.FRAGMENT_SHADER);j.shaderSource(o,d(m+l.fragmentSource,i)),j.compileShader(o),e(j.getShaderParameter(o,j.COMPILE_STATUS),j.getShaderInfoLog(o)),j.attachShader(k,o);var p=j.createShader(j.VERTEX_SHADER);j.shaderSource(p,d(m+h+l.vertexSource,c)),j.compileShader(p),e(j.getShaderParameter(p,j.COMPILE_STATUS),j.getShaderInfoLog(p)),j.attachShader(k,p),j.linkProgram(k),e(j.getProgramParameter(k,j.LINK_STATUS),j.getProgramInfoLog(k));for(var q={},r=j.getProgramParameter(k,j.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var t=j.getActiveAttrib(k,s);q[t.name]=j.getAttribLocation(k,t.name)}for(var u={},v=j.getProgramParameter(k,j.ACTIVE_UNIFORMS),w=0;w<v;w++){var x=j.getActiveUniform(k,w);u[x.name]=j.getUniformLocation(k,x.name)}return f.extend({program:k,definition:l,attributes:q,numAttributes:r},q,u)},b.exports._createProgramCached=function(a,b,c,d){this.cache=this.cache||{};var e=JSON.stringify({name:a,defines:b,vertexPragmas:c,fragmentPragmas:d});return this.cache[e]||(this.cache[e]=this._createProgram(a,b,c,d)),this.cache[e]},b.exports.useProgram=function(a,b,c,d){var e=this.gl;b=b||[],this._showOverdrawInspector&&(b=b.concat("OVERDRAW_INSPECTOR"));var f=this._createProgramCached(a,b,c,d);return this.currentProgram!==f&&(e.useProgram(f.program),this.currentProgram=f),f}},{"../../util/util":433,assert:51,"mapbox-gl-shaders":294}],348:[function(a,b,c){"use strict";function d(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.vao=null}var e=a("assert");b.exports=d,d.prototype.bind=function(a,b,c,d,e){void 0===a.extVertexArrayObject&&(a.extVertexArrayObject=a.getExtension("OES_vertex_array_object"));var f=!this.vao||this.boundProgram!==b||this.boundVertexBuffer!==c||this.boundVertexBuffer2!==e||this.boundElementBuffer!==d;!a.extVertexArrayObject||f?this.freshBind(a,b,c,d,e):a.extVertexArrayObject.bindVertexArrayOES(this.vao)},d.prototype.freshBind=function(a,b,c,d,f){var g,h=b.numAttributes;if(a.extVertexArrayObject)this.vao&&this.destroy(a),this.vao=a.extVertexArrayObject.createVertexArrayOES(),a.extVertexArrayObject.bindVertexArrayOES(this.vao),g=0,this.boundProgram=b,this.boundVertexBuffer=c,this.boundVertexBuffer2=f,this.boundElementBuffer=d;else{g=a.currentNumAttributes||0;for(var i=h;i<g;i++)e(0!==i),a.disableVertexAttribArray(i)}for(var j=g;j<h;j++)a.enableVertexAttribArray(j);c.bind(a),c.setVertexAttribPointers(a,b),f&&(f.bind(a),f.setVertexAttribPointers(a,b)),d&&d.bind(a),a.currentNumAttributes=h},d.prototype.unbind=function(a){var b=a.extVertexArrayObject;b&&b.bindVertexArrayOES(null)},d.prototype.destroy=function(a){var b=a.extVertexArrayObject;b&&this.vao&&(b.deleteVertexArrayOES(this.vao),this.vao=null)}},{assert:51}],349:[function(a,b,c){"use strict";function d(a,b,c){b=b||{},this.id=a,this.dispatcher=c,this._data=b.data,void 0!==b.maxzoom&&(this.maxzoom=b.maxzoom),b.type&&(this.type=b.type);var d=h/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:b.cluster||!1,geojsonVtOptions:{buffer:(void 0!==b.buffer?b.buffer:128)*d,tolerance:(void 0!==b.tolerance?b.tolerance:.375)*d,extent:h,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(b.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:h,radius:(b.clusterRadius||50)*d,log:!1}},b.workerOptions),this._updateWorkerData(function(a){if(a)return void this.fire("error",{error:a});this.fire("load")}.bind(this))}var e=a("../util/evented"),f=a("../util/util"),g=a("resolve-url"),h=a("../data/bucket").EXTENT;b.exports=d,d.prototype=f.inherit(e,{type:"geojson",minzoom:0,maxzoom:18,tileSize:512,isTileClipped:!0,reparseOverscaled:!0,onAdd:function(a){this.map=a},setData:function(a){return this._data=a,this._updateWorkerData(function(a){if(a)return this.fire("error",{error:a});this.fire("change")}.bind(this)),this},_updateWorkerData:function(a){var b=f.extend({},this.workerOptions),c=this._data;"string"==typeof c?b.url="undefined"!=typeof window?g(window.location.href,c):c:b.data=JSON.stringify(c),this.workerID=this.dispatcher.send(this.type+".loadData",b,function(b){this._loaded=!0,a(b)}.bind(this))},loadTile:function(a,b){var c=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,d={type:this.type,uid:a.uid,coord:a.coord,zoom:a.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:c,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID=this.dispatcher.send("load tile",d,function(c,d){if(a.unloadVectorData(this.map.painter),!a.aborted)return c?b(c):(a.loadVectorData(d,this.map.style),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null))}.bind(this),this.workerID)},abortTile:function(a){a.aborted=!0},unloadTile:function(a){a.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},function(){},a.workerID)},serialize:function(){return{type:this.type,data:this._data}}})},{"../data/bucket":320,"../util/evented":425,"../util/util":433,"resolve-url":508}],350:[function(a,b,c){"use strict";function d(a,b,c){c&&(this.loadGeoJSON=c),l.call(this,a,b)}var e=a("../util/util"),f=a("../util/ajax"),g=a("geojson-rewind"),h=a("./geojson_wrapper"),i=a("vt-pbf"),j=a("supercluster"),k=a("geojson-vt"),l=a("./vector_tile_worker_source");b.exports=d,d.prototype=e.inherit(l,{_geoJSONIndexes:{},loadVectorData:function(a,b){var c=a.source,d=a.coord;if(!this._geoJSONIndexes[c])return b(null,null);var e=this._geoJSONIndexes[c].getTile(Math.min(d.z,a.maxZoom),d.x,d.y);if(!e)return b(null,null);var f=new h(e.features);f.name="_geojsonTileLayer";var g=i({layers:{_geojsonTileLayer:f}});0===g.byteOffset&&g.byteLength===g.buffer.byteLength||(g=new Uint8Array(g)),b(null,{tile:f,rawTileData:g.buffer})},loadData:function(a,b){var c=function(c,d){return c?b(c):"object"!=typeof d?b(new Error("Input data is not a valid GeoJSON object.")):(g(d,!0),void this._indexData(d,a,function(c,d){if(c)return b(c);this._geoJSONIndexes[a.source]=d,
b(null)}.bind(this)))}.bind(this);this.loadGeoJSON(a,c)},loadGeoJSON:function(a,b){if(a.url)f.getJSON(a.url,b);else{if("string"!=typeof a.data)return b(new Error("Input data is not a valid GeoJSON object."));try{return b(null,JSON.parse(a.data))}catch(a){return b(new Error("Input data is not a valid GeoJSON object."))}}},_indexData:function(a,b,c){try{b.cluster?c(null,j(b.superclusterOptions).load(a.features)):c(null,k(a,b.geojsonVtOptions))}catch(a){return c(a)}}})},{"../util/ajax":416,"../util/util":433,"./geojson_wrapper":351,"./vector_tile_worker_source":362,"geojson-rewind":147,"geojson-vt":151,supercluster:538,"vt-pbf":570}],351:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length,this.extent=h}function e(a){if(this.type=a.type,1===a.type){this.rawGeometry=[];for(var b=0;b<a.geometry.length;b++)this.rawGeometry.push([a.geometry[b]])}else this.rawGeometry=a.geometry;this.properties=a.tags,this.extent=h}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature,h=a("../data/bucket").EXTENT;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-1/0,d=1/0,e=-1/0,f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"../data/bucket":320,"point-geometry":477,"vector-tile":564}],352:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c,this.url=b.url,this.coordinates=b.coordinates,j.getImage(b.url,function(a,c){if(a)return this.fire("error",{error:a});this.image=c,this.image.addEventListener("load",function(){this.map._rerender()}.bind(this)),this._loaded=!0,this.fire("load"),this.map&&this.setCoordinates(b.coordinates)}.bind(this))}var e=a("../util/util"),f=a("./tile_coord"),g=a("../geo/lng_lat"),h=a("point-geometry"),i=a("../util/evented"),j=a("../util/ajax"),k=a("../data/bucket").EXTENT,l=a("../render/draw_raster").RasterBoundsArray,m=a("../data/buffer"),n=a("../render/vertex_array_object");b.exports=d,d.prototype=e.inherit(i,{minzoom:0,maxzoom:22,tileSize:512,onAdd:function(a){this.map=a,this.image&&this.setCoordinates(this.coordinates)},setCoordinates:function(a){this.coordinates=a;var b=this.map,c=a.map(function(a){return b.transform.locationCoordinate(g.convert(a)).zoomTo(0)}),d=this.centerCoord=e.getCoordinatesCenter(c);return d.column=Math.round(d.column),d.row=Math.round(d.row),this.minzoom=this.maxzoom=d.zoom,this._coord=new f(d.zoom,d.column,d.row),this._tileCoords=c.map(function(a){var b=a.zoomTo(d.zoom);return new h(Math.round((b.column-d.column)*k),Math.round((b.row-d.row)*k))}),this.fire("change"),this},_setTile:function(a){this._prepared=!1,this.tile=a;var b=new l;b.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),b.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,32767,0),b.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,32767),b.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,32767,32767),this.tile.buckets={},this.tile.boundsBuffer=new m(b.serialize(),l.serialize(),m.BufferType.VERTEX),this.tile.boundsVAO=new n,this.tile.state="loaded"},prepare:function(){if(this._loaded&&this.image&&this.image.complete&&this.tile){var a=this.map.painter,b=a.gl;this._prepared?(b.bindTexture(b.TEXTURE_2D,this.tile.texture),b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,this.image)):(this.tile.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.tile.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,this.image))}},loadTile:function(a,b){this._coord&&this._coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},serialize:function(){return{type:"image",urls:this.url,coordinates:this.coordinates}}})},{"../data/bucket":320,"../data/buffer":325,"../geo/lng_lat":330,"../render/draw_raster":342,"../render/vertex_array_object":348,"../util/ajax":416,"../util/evented":425,"../util/util":433,"./tile_coord":360,"point-geometry":477}],353:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/ajax"),f=a("../util/browser"),g=a("../util/mapbox").normalizeSourceURL;b.exports=function(a,b){var c=function(a,c){if(a)return b(a);var e=d.pick(c,["tiles","minzoom","maxzoom","attribution"]);c.vector_layers&&(e.vectorLayers=c.vector_layers,e.vectorLayerIds=e.vectorLayers.map(function(a){return a.id})),b(null,e)};a.url?e.getJSON(g(a.url),c):f.frame(c.bind(null,null,a))}},{"../util/ajax":416,"../util/browser":417,"../util/mapbox":430,"../util/util":433}],354:[function(a,b,c){"use strict";var d=a("../data/bucket");b.exports=function(a,b,c){return b*(d.EXTENT/(a.tileSize*Math.pow(2,c-a.coord.z)))}},{"../data/bucket":320}],355:[function(a,b,c){"use strict";function d(a,b){var c=a.coord,d=b.coord;return c.z-d.z||c.y-d.y||c.w-d.w||c.x-d.x}function e(a){for(var b=a[0]||{},c=1;c<a.length;c++){var d=a[c];for(var e in d){var f=d[e],g=b[e];if(void 0===g)g=b[e]=f;else for(var h=0;h<f.length;h++)g.push(f[h])}}return b}var f=a("./tile_coord");c.rendered=function(a,b,c,f,g,h){var i=a.tilesIn(c);i.sort(d);for(var j=[],k=0;k<i.length;k++){var l=i[k];l.tile.featureIndex&&j.push(l.tile.featureIndex.query({queryGeometry:l.queryGeometry,scale:l.scale,tileSize:l.tile.tileSize,bearing:h,params:f},b))}return e(j)},c.source=function(a,b){for(var c=a.getRenderableIds().map(function(b){return a.getTileByID(b)}),d=[],e={},g=0;g<c.length;g++){var h=c[g],i=new f(Math.min(h.sourceMaxZoom,h.coord.z),h.coord.x,h.coord.y,0).id;e[i]||(e[i]=!0,h.querySourceFeatures(d,b))}return d}},{"./tile_coord":360}],356:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c,e.extend(this,e.pick(b,["url","scheme","tileSize"])),h(b,function(a,b){if(a)return this.fire("error",a);e.extend(this,b),this.fire("load")}.bind(this))}var e=a("../util/util"),f=a("../util/ajax"),g=a("../util/evented"),h=a("./load_tilejson"),i=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=e.inherit(g,{minzoom:0,maxzoom:22,roundZoom:!0,scheme:"xyz",tileSize:512,_loaded:!1,onAdd:function(a){this.map=a},serialize:function(){return{type:"raster",url:this.url,tileSize:this.tileSize}},loadTile:function(a,b){function c(c,d){if(delete a.request,!a.aborted){if(c)return b(c);var e=this.map.painter.gl;a.texture=this.map.painter.getTexture(d.width),a.texture?(e.bindTexture(e.TEXTURE_2D,a.texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,d)):(a.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,a.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,d),a.texture.size=d.width),e.generateMipmap(e.TEXTURE_2D),this.map.animationLoop.set(this.map.style.rasterFadeDuration),a.state="loaded",b(null)}}var d=i(a.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);a.request=f.getImage(d,c.bind(this))},abortTile:function(a){a.request&&(a.request.abort(),delete a.request)},unloadTile:function(a){a.texture&&this.map.painter.saveTexture(a.texture)}})},{"../util/ajax":416,"../util/evented":425,"../util/mapbox":430,"../util/util":433,"./load_tilejson":353}],357:[function(a,b,c){"use strict";var d=a("../util/util"),e={vector:a("../source/vector_tile_source"),raster:a("../source/raster_tile_source"),geojson:a("../source/geojson_source"),video:a("../source/video_source"),image:a("../source/image_source")};c.create=function(a,b,c){if(b=new e[b.type](a,b,c),b.id!==a)throw new Error("Expected Source id to be "+a+" instead of "+b.id);return d.bindAll(["load","abort","unload","serialize","prepare"],b),b},c.getType=function(a){return e[a]},c.setType=function(a,b){e[a]=b}},{"../source/geojson_source":349,"../source/image_source":352,"../source/raster_tile_source":356,"../source/vector_tile_source":361,"../source/video_source":363,"../util/util":433}],358:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c;var d=this._source=g.create(a,b,c).on("load",function(){this.map&&this._source.onAdd&&this._source.onAdd(this.map),this._sourceLoaded=!0,this.tileSize=d.tileSize,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,this.roundZoom=d.roundZoom,this.reparseOverscaled=d.reparseOverscaled,this.isTileClipped=d.isTileClipped,this.attribution=d.attribution,this.vectorLayerIds=d.vectorLayerIds,this.fire("load")}.bind(this)).on("error",function(a){this._sourceErrored=!0,this.fire("error",a)}.bind(this)).on("change",function(){this.reload(),this.transform&&this.update(this.transform,this.map&&this.map.style.rasterFadeDuration),this.fire("change")}.bind(this));this._tiles={},this._cache=new k(0,this.unloadTile.bind(this)),this._isIdRenderable=this._isIdRenderable.bind(this)}function e(a,b,c){var d=c.zoomTo(Math.min(a.z,b));return{x:(d.column-(a.x+a.w*Math.pow(2,a.z)))*n,y:(d.row-a.y)*n}}function f(a,b){return a%32-b%32}var g=a("./source"),h=a("./tile"),i=a("../util/evented"),j=a("./tile_coord"),k=a("../util/lru_cache"),l=a("../geo/coordinate"),m=a("../util/util"),n=a("../data/bucket").EXTENT;b.exports=d,d.maxOverzooming=10,d.maxUnderzooming=3,d.prototype=m.inherit(i,{onAdd:function(a){this.map=a,this._source&&this._source.onAdd&&this._source.onAdd(a)},loaded:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var a in this._tiles){var b=this._tiles[a];if("loaded"!==b.state&&"errored"!==b.state)return!1}return!0},getSource:function(){return this._source},loadTile:function(a,b){return this._source.loadTile(a,b)},unloadTile:function(a){if(this._source.unloadTile)return this._source.unloadTile(a)},abortTile:function(a){if(this._source.abortTile)return this._source.abortTile(a)},serialize:function(){return this._source.serialize()},prepare:function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},getIds:function(){return Object.keys(this._tiles).map(Number).sort(f)},getRenderableIds:function(){return this.getIds().filter(this._isIdRenderable)},_isIdRenderable:function(a){return this._tiles[a].isRenderable()&&!this._coveredTiles[a]},reload:function(){this._cache.reset();for(var a in this._tiles){var b=this._tiles[a];"loading"!==b.state&&(b.state="reloading"),this.loadTile(this._tiles[a],this._tileLoaded.bind(this,this._tiles[a]))}},_tileLoaded:function(a,b){if(b)return a.state="errored",this.fire("tile.error",{tile:a,error:b}),void this._source.fire("tile.error",{tile:a,error:b});a.source=this,a.timeAdded=(new Date).getTime(),this.fire("tile.load",{tile:a}),this._source.fire("tile.load",{tile:a})},getTile:function(a){return this.getTileByID(a.id)},getTileByID:function(a){return this._tiles[a]},getZoom:function(a){return a.zoom+a.scaleZoom(a.tileSize/this.tileSize)},findLoadedChildren:function(a,b,c){var d=!1;for(var e in this._tiles){var f=this._tiles[e];if(!(c[e]||!f.isRenderable()||f.coord.z<=a.z||f.coord.z>b)){var g=Math.pow(2,Math.min(f.coord.z,this.maxzoom)-Math.min(a.z,this.maxzoom));if(Math.floor(f.coord.x/g)===a.x&&Math.floor(f.coord.y/g)===a.y)for(c[e]=!0,d=!0;f&&f.coord.z-1>a.z;){var h=f.coord.parent(this.maxzoom).id;f=this._tiles[h],f&&f.isRenderable()&&(delete c[e],c[h]=!0)}}}return d},findLoadedParent:function(a,b,c){for(var d=a.z-1;d>=b;d--){a=a.parent(this.maxzoom);var e=this._tiles[a.id];if(e&&e.isRenderable())return c[a.id]=!0,e;if(this._cache.has(a.id))return this.addTile(a),c[a.id]=!0,this._tiles[a.id]}},updateCacheSize:function(a){var b=Math.ceil(a.width/a.tileSize)+1,c=Math.ceil(a.height/a.tileSize)+1,d=b*c;this._cache.setMaxSize(Math.floor(5*d))},update:function(a,b){if(this._sourceLoaded){var c,e,f;this.updateCacheSize(a);var g=(this.roundZoom?Math.round:Math.floor)(this.getZoom(a)),h=Math.max(g-d.maxOverzooming,this.minzoom),i=Math.max(g+d.maxUnderzooming,this.minzoom),k={},l=(new Date).getTime();this._coveredTiles={};var n=this.used?a.coveringTiles(this._source):[];for(c=0;c<n.length;c++)e=n[c],f=this.addTile(e),k[e.id]=!0,f.isRenderable()||this.findLoadedChildren(e,i,k)||this.findLoadedParent(e,h,k);for(var o={},p=Object.keys(k),q=0;q<p.length;q++){var r=p[q];e=j.fromID(r),f=this._tiles[r],f&&f.timeAdded>l-(b||0)&&(this.findLoadedChildren(e,i,k)&&(k[r]=!0),this.findLoadedParent(e,h,o))}var s;for(s in o)k[s]||(this._coveredTiles[s]=!0);for(s in o)k[s]=!0;var t=m.keysDifference(this._tiles,k);for(c=0;c<t.length;c++)this.removeTile(+t[c]);this.transform=a}},addTile:function(a){var b=this._tiles[a.id];if(b)return b;var c=a.wrapped();if(b=this._tiles[c.id],b||(b=this._cache.get(c.id))&&this._redoPlacement&&this._redoPlacement(b),!b){var d=a.z,e=d>this.maxzoom?Math.pow(2,d-this.maxzoom):1;b=new h(c,this.tileSize*e,this.maxzoom),this.loadTile(b,this._tileLoaded.bind(this,b))}return b.uses++,this._tiles[a.id]=b,this.fire("tile.add",{tile:b}),this._source.fire("tile.add",{tile:b}),b},removeTile:function(a){var b=this._tiles[a];b&&(b.uses--,delete this._tiles[a],this.fire("tile.remove",{tile:b}),this._source.fire("tile.remove",{tile:b}),b.uses>0||(b.isRenderable()?this._cache.add(b.coord.wrapped().id,b):(b.aborted=!0,this.abortTile(b),this.unloadTile(b))))},clearTiles:function(){for(var a in this._tiles)this.removeTile(a);this._cache.reset()},tilesIn:function(a){for(var b={},c=this.getIds(),d=1/0,f=1/0,g=-1/0,h=-1/0,i=a[0].zoom,k=0;k<a.length;k++){var m=a[k];d=Math.min(d,m.column),f=Math.min(f,m.row),g=Math.max(g,m.column),h=Math.max(h,m.row)}for(var o=0;o<c.length;o++){var p=this._tiles[c[o]],q=j.fromID(c[o]),r=[e(q,p.sourceMaxZoom,new l(d,f,i)),e(q,p.sourceMaxZoom,new l(g,h,i))];if(r[0].x<n&&r[0].y<n&&r[1].x>=0&&r[1].y>=0){for(var s=[],t=0;t<a.length;t++)s.push(e(q,p.sourceMaxZoom,a[t]));var u=b[p.coord.id];void 0===u&&(u=b[p.coord.id]={tile:p,coord:q,queryGeometry:[],scale:Math.pow(2,this.transform.zoom-p.coord.z)}),u.queryGeometry.push(s)}}var v=[];for(var w in b)v.push(b[w]);return v},redoPlacement:function(){for(var a=this.getIds(),b=0;b<a.length;b++){this.getTileByID(a[b]).redoPlacement(this)}},getVisibleCoordinates:function(){return this.getRenderableIds().map(j.fromID)}})},{"../data/bucket":320,"../geo/coordinate":329,"../util/evented":425,"../util/lru_cache":429,"../util/util":433,"./source":357,"./tile":359,"./tile_coord":360}],359:[function(a,b,c){"use strict";function d(a,b,c){this.coord=a,this.uid=f.uniqueId(),this.uses=0,this.tileSize=b,this.sourceMaxZoom=c,this.buckets={},this.state="loading"}function e(a,b){if(b){for(var c={},d=0;d<a.length;d++){var e=b.getLayer(a[d].layerId);if(e){var h=g.create(f.extend({layer:e,childLayers:a[d].childLayerIds.map(b.getLayer.bind(b)).filter(function(a){return a})},a[d]));c[h.id]=h}}return c}}var f=a("../util/util"),g=a("../data/bucket"),h=a("../data/feature_index"),i=a("vector-tile"),j=a("pbf"),k=a("../util/vectortile_to_geojson"),l=a("feature-filter"),m=a("../symbol/collision_tile"),n=a("../symbol/collision_box"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype={loadVectorData:function(a,b){this.state="loaded",a&&(this.collisionBoxArray=new n(a.collisionBoxArray),this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new o(a.symbolInstancesArray),this.symbolQuadsArray=new p(a.symbolQuadsArray),this.featureIndex=new h(a.featureIndex,a.rawTileData,this.collisionTile),this.rawTileData=a.rawTileData,this.buckets=e(a.buckets,b))},reloadSymbolData:function(a,b,c){if("unloaded"!==this.state){this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var d in this.buckets){var g=this.buckets[d];"symbol"===g.type&&(g.destroy(b.gl),delete this.buckets[d])}f.extend(this.buckets,e(a.buckets,c))}},unloadVectorData:function(a){for(var b in this.buckets){this.buckets[b].destroy(a.gl)}this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.rawTileData=null,this.buckets=null,this.state="unloaded"},redoPlacement:function(a){function b(b,c){this.reloadSymbolData(c,a.map.painter,a.map.style),a.fire("tile.load",{tile:this}),this.state="loaded",this.redoWhenDone&&(this.redoPlacement(a),this.redoWhenDone=!1)}if("loaded"!==this.state||"reloading"===this.state)return void(this.redoWhenDone=!0);this.state="reloading",a.dispatcher.send("redo placement",{uid:this.uid,source:a.id,angle:a.map.transform.angle,pitch:a.map.transform.pitch,showCollisionBoxes:a.map.showCollisionBoxes},b.bind(this),this.workerID)},getBucket:function(a){return this.buckets&&this.buckets[a.ref||a.id]},querySourceFeatures:function(a,b){if(this.rawTileData){this.vtLayers||(this.vtLayers=new i.VectorTile(new j(new Uint8Array(this.rawTileData))).layers);var c=this.vtLayers._geojsonTileLayer||this.vtLayers[b.sourceLayer];if(c)for(var d=l(b.filter),e={z:this.coord.z,x:this.coord.x,y:this.coord.y},f=0;f<c.length;f++){var g=c.feature(f);if(d(g)){var h=new k(g,this.coord.z,this.coord.x,this.coord.y);h.tile=e,a.push(h)}}}},isRenderable:function(){return"loaded"===this.state||"reloading"===this.state}}},{"../data/bucket":320,"../data/feature_index":327,"../symbol/collision_box":385,"../symbol/collision_tile":387,"../symbol/symbol_instances":396,"../symbol/symbol_quads":397,"../util/util":433,"../util/vectortile_to_geojson":434,"feature-filter":141,pbf:470,"vector-tile":564}],360:[function(a,b,c){"use strict";function d(a,b,c,d){i(!isNaN(a)&&a>=0&&a%1==0),i(!isNaN(b)&&b>=0&&b%1==0),i(!isNaN(c)&&c>=0&&c%1==0),isNaN(d)&&(d=0),this.z=+a,this.x=+b,this.y=+c,this.w=+d,(d*=2)<0&&(d=-1*d-1);var e=1<<this.z;this.id=32*(e*e*d+e*this.y+this.x)+this.z,this.posMatrix=null}function e(a,b,c){for(var d,e="",f=a;f>0;f--)d=1<<f-1,e+=(b&d?1:0)+(c&d?2:0);return e}function f(a,b){if(a.row>b.row){var c=a;a=b,b=c}return{x0:a.column,y0:a.row,x1:b.column,y1:b.row,dx:b.column-a.column,dy:b.row-a.row}}function g(a,b,c,d,e){var f=Math.max(c,Math.floor(b.y0)),g=Math.min(d,Math.ceil(b.y1));if(a.x0===b.x0&&a.y0===b.y0?a.x0+b.dy/a.dy*a.dx<b.x1:a.x1-b.dy/a.dy*a.dx<b.x0){var h=a;a=b,b=h}for(var i=a.dx/a.dy,j=b.dx/b.dy,k=a.dx>0,l=b.dx<0,m=f;m<g;m++){var n=i*Math.max(0,Math.min(a.dy,m+k-a.y0))+a.x0,o=j*Math.max(0,Math.min(b.dy,m+l-b.y0))+b.x0;e(Math.floor(o),Math.ceil(n),m)}}function h(a,b,c,d,e,h){var i,j=f(a,b),k=f(b,c),l=f(c,a);j.dy>k.dy&&(i=j,j=k,k=i),j.dy>l.dy&&(i=j,j=l,l=i),k.dy>l.dy&&(i=k,k=l,l=i),j.dy&&g(l,j,d,e,h),k.dy&&g(l,k,d,e,h)}var i=a("assert"),j=a("whoots-js"),k=a("../geo/coordinate");b.exports=d,d.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},d.prototype.toCoordinate=function(a){var b=Math.min(this.z,a),c=Math.pow(2,b),d=this.y,e=this.x+c*this.w;return new k(e,d,b)},d.fromID=function(a){var b=a%32,c=1<<b,e=(a-b)/32,f=e%c,g=(e-f)/c%c,h=Math.floor(e/(c*c));return h%2!=0&&(h=-1*h-1),h/=2,new d(b,f,g,h)},d.prototype.url=function(a,b,c){var d=j.getTileBBox(this.x,this.y,this.z),f=e(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,b||this.z)).replace("{x}",this.x).replace("{y}","tms"===c?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)},d.prototype.parent=function(a){return 0===this.z?null:this.z>a?new d(this.z-1,this.x,this.y,this.w):new d(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},d.prototype.wrapped=function(){return new d(this.z,this.x,this.y,0)},d.prototype.children=function(a){if(this.z>=a)return[new d(this.z+1,this.x,this.y,this.w)];var b=this.z+1,c=2*this.x,e=2*this.y;return[new d(b,c,e,this.w),new d(b,c+1,e,this.w),new d(b,c,e+1,this.w),new d(b,c+1,e+1,this.w)]},d.cover=function(a,b,c){function e(a,b,e){var h,i,j;if(e>=0&&e<=f)for(h=a;h<b;h++)i=(h%f+f)%f,j=new d(c,i,e,Math.floor(h/f)),g[j.id]=j}var f=1<<a,g={};return h(b[0],b[1],b[2],0,f,e),h(b[2],b[3],b[0],0,f,e),Object.keys(g).map(function(a){return g[a]})}},{"../geo/coordinate":329,assert:51,"whoots-js":580}],361:[function(a,b,c){"use strict";function d(a,b,c){if(this.id=a,this.dispatcher=c,f.extend(this,f.pick(b,["url","scheme","tileSize"])),this._options=f.extend({type:"vector"},b),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");g(b,function(a,b){if(a)return void this.fire("error",a);f.extend(this,b),this.fire("load")}.bind(this))}var e=a("../util/evented"),f=a("../util/util"),g=a("./load_tilejson"),h=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=f.inherit(e,{minzoom:0,maxzoom:22,scheme:"xyz",tileSize:512,reparseOverscaled:!0,isTileClipped:!0,onAdd:function(a){this.map=a},serialize:function(){return f.extend({},this._options)},loadTile:function(a,b){function c(c,d){if(!a.aborted){if(c)return b(c);a.loadVectorData(d,this.map.style),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null),a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)}}var d=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,e={url:h(a.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:a.uid,coord:a.coord,zoom:a.coord.z,tileSize:this.tileSize*d,source:this.id,overscaling:d,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID?"loading"===a.state?a.reloadCallback=b:(e.rawTileData=a.rawTileData,this.dispatcher.send("reload tile",e,c.bind(this),a.workerID)):a.workerID=this.dispatcher.send("load tile",e,c.bind(this))},abortTile:function(a){this.dispatcher.send("abort tile",{uid:a.uid,source:this.id},null,a.workerID)},unloadTile:function(a){a.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},null,a.workerID)}})},{"../util/evented":425,"../util/mapbox":430,"../util/util":433,"./load_tilejson":353}],362:[function(a,b,c){"use strict";function d(a,b,c){this.actor=a,this.styleLayers=b,c&&(this.loadVectorData=c),this.loading={},this.loaded={}}var e=a("../util/ajax"),f=a("vector-tile"),g=a("pbf"),h=a("./worker_tile");b.exports=d,d.prototype={loadTile:function(a,b){function c(a,c){return delete this.loading[d][e],a?b(a):c?(f.data=c.tile,f.parse(f.data,this.styleLayers.getLayerFamilies(),this.actor,c.rawTileData,b),this.loaded[d]=this.loaded[d]||{},void(this.loaded[d][e]=f)):b(null,null)}var d=a.source,e=a.uid;this.loading[d]||(this.loading[d]={});var f=this.loading[d][e]=new h(a);f.abort=this.loadVectorData(a,c.bind(this))},reloadTile:function(a,b){var c=this.loaded[a.source],d=a.uid;if(c&&c[d]){var e=c[d];e.parse(e.data,this.styleLayers.getLayerFamilies(),this.actor,a.rawTileData,b)}},abortTile:function(a){var b=this.loading[a.source],c=a.uid;b&&b[c]&&b[c].abort&&(b[c].abort(),delete b[c])},removeTile:function(a){var b=this.loaded[a.source],c=a.uid;b&&b[c]&&delete b[c]},loadVectorData:function(a,b){function c(a,c){if(a)return b(a);var d=new f.VectorTile(new g(new Uint8Array(c)));b(a,{tile:d,rawTileData:c})}var d=e.getArrayBuffer(a.url,c.bind(this));return function(){d.abort()}},redoPlacement:function(a,b){var c=this.loaded[a.source],d=this.loading[a.source],e=a.uid;if(c&&c[e]){var f=c[e],g=f.redoPlacement(a.angle,a.pitch,a.showCollisionBoxes);g.result&&b(null,g.result,g.transferables)}else d&&d[e]&&(d[e].angle=a.angle)}}},{"../util/ajax":416,"./worker_tile":365,pbf:470,"vector-tile":564}],363:[function(a,b,c){"use strict";function d(a,b){this.id=a,this.urls=b.urls,this.coordinates=b.coordinates,j.getVideo(b.urls,function(a,c){if(a)return this.fire("error",{error:a});this.video=c,this.video.loop=!0;var d;this.video.addEventListener("playing",function(){d=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener("pause",function(){this.map.style.animationLoop.cancel(d)}.bind(this)),this.map&&(this.video.play(),this.setCoordinates(b.coordinates)),this.fire("load")}.bind(this))}var e=a("../util/util"),f=a("./tile_coord"),g=a("../geo/lng_lat"),h=a("point-geometry"),i=a("../util/evented"),j=a("../util/ajax"),k=a("../data/bucket").EXTENT,l=a("../render/draw_raster").RasterBoundsArray,m=a("../data/buffer"),n=a("../render/vertex_array_object");b.exports=d,d.prototype=e.inherit(i,{minzoom:0,maxzoom:22,tileSize:512,roundZoom:!0,getVideo:function(){return this.video},onAdd:function(a){this.map||(this.map=a,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},setCoordinates:function(a){this.coordinates=a;var b=this.map,c=a.map(function(a){return b.transform.locationCoordinate(g.convert(a)).zoomTo(0)}),d=this.centerCoord=e.getCoordinatesCenter(c);return d.column=Math.round(d.column),d.row=Math.round(d.row),this.minzoom=this.maxzoom=d.zoom,this._coord=new f(d.zoom,d.column,d.row),this._tileCoords=c.map(function(a){var b=a.zoomTo(d.zoom);return new h(Math.round((b.column-d.column)*k),Math.round((b.row-d.row)*k))}),this.fire("change"),this},_setTile:function(a){this._prepared=!1,this.tile=a;var b=new l;b.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),b.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,32767,0),b.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,32767),b.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,32767,32767),this.tile.buckets={},this.tile.boundsBuffer=new m(b.serialize(),l.serialize(),m.BufferType.VERTEX),this.tile.boundsVAO=new n,this.tile.state="loaded"},prepare:function(){if(!(this.video.readyState<2)&&this.tile){var a=this.map.painter.gl;this._prepared?(a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this._prepared=!0,this.tile.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.video)),this._currentTime=this.video.currentTime}},loadTile:function(a,b){this._coord&&this._coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},serialize:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}})},{"../data/bucket":320,"../data/buffer":325,"../geo/lng_lat":330,"../render/draw_raster":342,"../render/vertex_array_object":348,"../util/ajax":416,"../util/evented":425,"../util/util":433,"./tile_coord":360,"point-geometry":477}],364:[function(a,b,c){"use strict";function d(a){this.self=a,this.actor=new f(a,this);var b={getLayers:function(){return this.layers}.bind(this),getLayerFamilies:function(){return this.layerFamilies}.bind(this)};this.workerSources={vector:new i(this.actor,b),geojson:new j(this.actor,b)},this.self.registerWorkerSource=function(a,c){if(this.workerSources[a])throw new Error('Worker source with name "'+a+'" already registered.');this.workerSources[a]=new c(this.actor,b)}.bind(this)}function e(a){var b={};for(var c in a){var d=a[c],e=d.ref||d.id,f=a[e];f.layout&&"none"===f.layout.visibility||(b[e]=b[e]||[],c===e?b[e].unshift(d):b[e].push(d))}return b}var f=a("../util/actor"),g=a("../style/style_layer"),h=a("../util/util"),i=a("./vector_tile_worker_source"),j=a("./geojson_worker_source");b.exports=function(a){return new d(a)},h.extend(d.prototype,{"set layers":function(a){function b(a){var b=g.create(a,a.ref&&c.layers[a.ref]);b.updatePaintTransitions({},{transition:!1}),c.layers[b.id]=b}this.layers={};for(var c=this,d=[],f=0;f<a.length;f++){var h=a[f];"fill"!==h.type&&"line"!==h.type&&"circle"!==h.type&&"symbol"!==h.type||(h.ref?d.push(f):b(h))}for(var i=0;i<d.length;i++)b(a[d[i]]);this.layerFamilies=e(this.layers)},"update layers":function(a){function b(a){var b=f.layers[a.ref];f.layers[a.id]?f.layers[a.id].set(a,b):f.layers[a.id]=g.create(a,b),f.layers[a.id].updatePaintTransitions({},{transition:!1})}var c,d,f=this;for(c in a)d=a[c],d.ref&&b(d);for(c in a)d=a[c],d.ref||b(d);this.layerFamilies=e(this.layers)},"load tile":function(a,b){var c=a.type||"vector";this.workerSources[c].loadTile(a,b)},"reload tile":function(a,b){var c=a.type||"vector";this.workerSources[c].reloadTile(a,b)},"abort tile":function(a){var b=a.type||"vector";this.workerSources[b].abortTile(a)},"remove tile":function(a){var b=a.type||"vector";this.workerSources[b].removeTile(a)},"redo placement":function(a,b){var c=a.type||"vector";this.workerSources[c].redoPlacement(a,b)},"load worker source":function(a,b){try{this.self.importScripts(a.url),b()}catch(a){b(a)}}})},{"../style/style_layer":372,"../util/actor":415,"../util/util":433,"./geojson_worker_source":350,"./vector_tile_worker_source":362}],365:[function(a,b,c){"use strict";function d(a){this.coord=a.coord,this.uid=a.uid,this.zoom=a.zoom,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=a.overscaling,this.angle=a.angle,this.pitch=a.pitch,this.showCollisionBoxes=a.showCollisionBoxes}function e(a){return!a.isEmpty()}function f(a){return a.serialize()}function g(a){var b=[];for(var c in a)a[c].getTransferables(b);return b}function h(a){return a.id}var i=a("../data/feature_index"),j=a("../symbol/collision_tile"),k=a("../data/bucket"),l=a("../symbol/collision_box"),m=a("../util/dictionary_coder"),n=a("../util/util"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype.parse=function(a,b,c,d,q){function r(a,b){for(var c=0;c<a.length;c++){var d=a.feature(c);d.index=c;for(var e in b)b[e].filter(d)&&b[e].features.push(d)}}function s(a){if(a)return q(a);if(2===++N){for(var b=I.length-1;b>=0;b--)t(C,I[b]);u()}}function t(a,b){if(b.populateArrays(z,M,L),"symbol"!==b.type)for(var c=0;c<b.features.length;c++){var d=b.features[c];A.insert(d,d.index,b.sourceLayerIndex,b.index)}b.features=null}function u(){C.status="done",C.redoPlacementAfterDone&&(C.redoPlacement(C.angle,C.pitch,null),C.redoPlacementAfterDone=!1);var a=A.serialize(),b=z.serialize(),c=C.collisionBoxArray.serialize(),h=C.symbolInstancesArray.serialize(),i=C.symbolQuadsArray.serialize(),j=[d].concat(a.transferables).concat(b.transferables),k=H.filter(e);q(null,{buckets:k.map(f),featureIndex:a.data,collisionTile:b.data,collisionBoxArray:c,symbolInstancesArray:h,symbolQuadsArray:i,rawTileData:d},g(k).concat(j))}this.status="parsing",this.data=a,this.collisionBoxArray=new l,this.symbolInstancesArray=new o,this.symbolQuadsArray=new p;var v,w,x,y,z=new j(this.angle,this.pitch,this.collisionBoxArray),A=new i(this.coord,this.overscaling,z,a.layers),B=new m(a.layers?Object.keys(a.layers).sort():["_geojsonTileLayer"]),C=this,D={},E={},F=0;for(var G in b)w=b[G][0],w.source===this.source&&(w.ref||w.minzoom&&this.zoom<w.minzoom||w.maxzoom&&this.zoom>=w.maxzoom||w.layout&&"none"===w.layout.visibility||a.layers&&!a.layers[w.sourceLayer]||(y=k.create({layer:w,index:F++,childLayers:b[G],zoom:this.zoom,overscaling:this.overscaling,showCollisionBoxes:this.showCollisionBoxes,collisionBoxArray:this.collisionBoxArray,symbolQuadsArray:this.symbolQuadsArray,symbolInstancesArray:this.symbolInstancesArray,sourceLayerIndex:B.encode(w.sourceLayer||"_geojsonTileLayer")}),y.createFilter(),D[w.id]=y,a.layers&&(x=w.sourceLayer,E[x]=E[x]||{},E[x][w.id]=y)))
;if(a.layers)for(x in E)1===w.version&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+x+'" does not use vector tile spec v2 and therefore may have some rendering errors.'),(w=a.layers[x])&&r(w,E[x]);else r(a,D);var H=[],I=this.symbolBuckets=[],J=[];A.bucketLayerIDs={};for(var K in D)y=D[K],0!==y.features.length&&(A.bucketLayerIDs[y.index]=y.childLayers.map(h),H.push(y),"symbol"===y.type?I.push(y):J.push(y));var L={},M={},N=0;if(I.length>0){for(v=I.length-1;v>=0;v--)I[v].updateIcons(L),I[v].updateFont(M);for(var O in M)M[O]=Object.keys(M[O]).map(Number);L=Object.keys(L),c.send("get glyphs",{uid:this.uid,stacks:M},function(a,b){M=b,s(a)}),L.length?c.send("get icons",{icons:L},function(a,b){L=b,s(a)}):s()}for(v=J.length-1;v>=0;v--)t(this,J[v]);if(0===I.length)return u()},d.prototype.redoPlacement=function(a,b,c){if("done"!==this.status)return this.redoPlacementAfterDone=!0,this.angle=a,{};for(var d=new j(a,b,this.collisionBoxArray),h=this.symbolBuckets,i=h.length-1;i>=0;i--)h[i].placeFeatures(d,c);var k=d.serialize(),l=h.filter(e);return{result:{buckets:l.map(f),collisionTile:k.data},transferables:g(l).concat(k.transferables)}}},{"../data/bucket":320,"../data/feature_index":327,"../symbol/collision_box":385,"../symbol/collision_tile":387,"../symbol/symbol_instances":396,"../symbol/symbol_quads":397,"../util/dictionary_coder":423,"../util/util":433}],366:[function(a,b,c){"use strict";function d(){this.n=0,this.times=[]}b.exports=d,d.prototype.stopped=function(){return this.times=this.times.filter(function(a){return a.time>=(new Date).getTime()}),!this.times.length},d.prototype.set=function(a){return this.times.push({id:this.n,time:a+(new Date).getTime()}),this.n++},d.prototype.cancel=function(a){this.times=this.times.filter(function(b){return b.id!==a})}},{}],367:[function(a,b,c){"use strict";function d(a){this.base=a,this.retina=h.devicePixelRatio>1;var b=this.retina?"@2x":"";g.getJSON(i(a,b,".json"),function(a,b){if(a)return void this.fire("error",{error:a});this.data=b,this.img&&this.fire("load")}.bind(this)),g.getImage(i(a,b,".png"),function(a,b){if(a)return void this.fire("error",{error:a});for(var c=b.getData(),d=b.data=new Uint8Array(c.length),e=0;e<c.length;e+=4){var f=c[e+3]/255;d[e+0]=c[e+0]*f,d[e+1]=c[e+1]*f,d[e+2]=c[e+2]*f,d[e+3]=c[e+3]}this.img=b,this.data&&this.fire("load")}.bind(this))}function e(){}var f=a("../util/evented"),g=a("../util/ajax"),h=a("../util/browser"),i=a("../util/mapbox").normalizeSpriteURL;b.exports=d,d.prototype=Object.create(f),d.prototype.toJSON=function(){return this.base},d.prototype.loaded=function(){return!(!this.data||!this.img)},d.prototype.resize=function(){if(h.devicePixelRatio>1!==this.retina){var a=new d(this.base);a.on("load",function(){this.img=a.img,this.data=a.data,this.retina=a.retina}.bind(this))}},e.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},d.prototype.getSpritePosition=function(a){if(!this.loaded())return new e;var b=this.data&&this.data[a];return b&&this.img?b:new e}},{"../util/ajax":416,"../util/browser":417,"../util/evented":425,"../util/mapbox":430}],368:[function(a,b,c){"use strict";var d=a("csscolorparser").parseCSSColor,e=a("../util/util"),f=a("./style_function"),g={};b.exports=function a(b){if(f.isFunctionDefinition(b))return e.extend({},b,{stops:b.stops.map(function(b){return[b[0],a(b[1])]})});if("string"==typeof b){if(!g[b]){var c=d(b);if(!c)throw new Error("Invalid color "+b);g[b]=[c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]]}return g[b]}throw new Error("Invalid color "+b)}},{"../util/util":433,"./style_function":371,csscolorparser:114}],369:[function(a,b,c){"use strict";function d(a,b,c){this.animationLoop=b||new p,this.dispatcher=new o(c||1,this),this.spriteAtlas=new i(1024,1024),this.lineAtlas=new j(256,512),this._layers={},this._order=[],this._groups=[],this.sources={},this.zoomHistory={},k.bindAll(["_forwardSourceEvent","_forwardTileEvent","_forwardLayerEvent","_redoPlacement"],this),this._resetUpdates();var d=function(a,b){if(a)return void this.fire("error",{error:a});if(!q.emitErrors(this,q(b))){this._loaded=!0,this.stylesheet=b,this.updateClasses();var c=b.sources;for(var d in c)this.addSource(d,c[d]);b.sprite&&(this.sprite=new g(b.sprite),this.sprite.on("load",this.fire.bind(this,"change"))),this.glyphSource=new h(b.glyphs),this._resolve(),this.fire("load")}}.bind(this);"string"==typeof a?l.getJSON(m(a),d):n.frame(d.bind(this,null,a)),this.on("source.load",function(a){var b=a.source;if(b&&b.vectorLayerIds)for(var c in this._layers){var d=this._layers[c];d.source===b.id&&this._validateLayer(d)}})}var e=a("../util/evented"),f=a("./style_layer"),g=a("./image_sprite"),h=a("../symbol/glyph_source"),i=a("../symbol/sprite_atlas"),j=a("../render/line_atlas"),k=a("../util/util"),l=a("../util/ajax"),m=a("../util/mapbox").normalizeStyleURL,n=a("../util/browser"),o=a("../util/dispatcher"),p=a("./animation_loop"),q=a("./validate_style"),r=a("../source/source"),s=a("../source/query_features"),t=a("../source/source_cache"),u=a("./style_spec"),v=a("./style_function");b.exports=d,d.prototype=k.inherit(e,{_loaded:!1,_validateLayer:function(a){var b=this.sources[a.source];a.sourceLayer&&b&&b.vectorLayerIds&&-1===b.vectorLayerIds.indexOf(a.sourceLayer)&&this.fire("error",{error:new Error('Source layer "'+a.sourceLayer+'" does not exist on source "'+b.id+'" as specified by style layer "'+a.id+'"')})},loaded:function(){if(!this._loaded)return!1;if(Object.keys(this._updates.sources).length)return!1;for(var a in this.sources)if(!this.sources[a].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},_resolve:function(){var a,b;this._layers={},this._order=this.stylesheet.layers.map(function(a){return a.id});for(var c=0;c<this.stylesheet.layers.length;c++)b=this.stylesheet.layers[c],b.ref||(a=f.create(b),this._layers[a.id]=a,a.on("error",this._forwardLayerEvent));for(var d=0;d<this.stylesheet.layers.length;d++)if(b=this.stylesheet.layers[d],b.ref){var e=this.getLayer(b.ref);a=f.create(b,e),this._layers[a.id]=a,a.on("error",this._forwardLayerEvent)}this._groupLayers(),this._updateWorkerLayers()},_groupLayers:function(){var a;this._groups=[];for(var b=0;b<this._order.length;++b){var c=this._layers[this._order[b]];a&&c.source===a.source||(a=[],a.source=c.source,this._groups.push(a)),a.push(c)}},_updateWorkerLayers:function(a){this.dispatcher.broadcast(a?"update layers":"set layers",this._serializeLayers(a))},_serializeLayers:function(a){a=a||this._order;for(var b=[],c={includeRefProperties:!0},d=0;d<a.length;d++)b.push(this._layers[a[d]].serialize(c));return b},_applyClasses:function(a,b){if(this._loaded){a=a||[],b=b||{transition:!0};var c=this.stylesheet.transition||{},d=this._updates.allPaintProps?this._layers:this._updates.paintProps;for(var e in d){var f=this._layers[e],g=this._updates.paintProps[e];if(this._updates.allPaintProps||g.all)f.updatePaintTransitions(a,b,c,this.animationLoop);else for(var h in g)this._layers[e].updatePaintTransition(h,a,b,c,this.animationLoop)}}},_recalculate:function(a){for(var b in this.sources)this.sources[b].used=!1;this._updateZoomHistory(a),this.rasterFadeDuration=300;for(var c in this._layers){var d=this._layers[c];d.recalculate(a,this.zoomHistory),!d.isHidden(a)&&d.source&&(this.sources[d.source].used=!0)}Math.floor(this.z)!==Math.floor(a)&&this.animationLoop.set(300),this.z=a,this.fire("zoom")},_updateZoomHistory:function(a){var b=this.zoomHistory;void 0===b.lastIntegerZoom&&(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=0,b.lastZoom=a),Math.floor(b.lastZoom)<Math.floor(a)?(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=Date.now()):Math.floor(b.lastZoom)>Math.floor(a)&&(b.lastIntegerZoom=Math.floor(a+1),b.lastIntegerZoomTime=Date.now()),b.lastZoom=a},_checkLoaded:function(){if(!this._loaded)throw new Error("Style is not done loading")},update:function(a,b){if(!this._updates.changed)return this;if(this._updates.allLayers)this._groupLayers(),this._updateWorkerLayers();else{var c=Object.keys(this._updates.layers);c.length&&this._updateWorkerLayers(c)}var d,e=Object.keys(this._updates.sources);for(d=0;d<e.length;d++)this._reloadSource(e[d]);for(d=0;d<this._updates.events.length;d++){var f=this._updates.events[d];this.fire(f[0],f[1])}return this._applyClasses(a,b),this._updates.changed&&this.fire("change"),this._resetUpdates(),this},_resetUpdates:function(){this._updates={events:[],layers:{},sources:{},paintProps:{}}},addSource:function(a,b){if(this._checkLoaded(),void 0!==this.sources[a])throw new Error("There is already a source with this ID");if(!b.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(b)+".");return["vector","raster","geojson","video","image"].indexOf(b.type)>=0&&this._handleErrors(q.source,"sources."+a,b)?this:(b=new t(a,b,this.dispatcher),this.sources[a]=b,b.style=this,b.on("load",this._forwardSourceEvent).on("error",this._forwardSourceEvent).on("change",this._forwardSourceEvent).on("tile.add",this._forwardTileEvent).on("tile.load",this._forwardTileEvent).on("tile.error",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.add",{source:b}]),this._updates.changed=!0,this)},removeSource:function(a){if(this._checkLoaded(),void 0===this.sources[a])throw new Error("There is no source with this ID");var b=this.sources[a];return delete this.sources[a],delete this._updates.sources[a],b.off("load",this._forwardSourceEvent).off("error",this._forwardSourceEvent).off("change",this._forwardSourceEvent).off("tile.add",this._forwardTileEvent).off("tile.load",this._forwardTileEvent).off("tile.error",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.remove",{source:b}]),this._updates.changed=!0,this},getSource:function(a){return this.sources[a]&&this.sources[a].getSource()},addLayer:function(a,b){if(this._checkLoaded(),!(a instanceof f)){if(this._handleErrors(q.layer,"layers."+a.id,a,!1,{arrayIndex:-1}))return this;var c=a.ref&&this.getLayer(a.ref);a=f.create(a,c)}return this._validateLayer(a),a.on("error",this._forwardLayerEvent),this._layers[a.id]=a,this._order.splice(b?this._order.indexOf(b):1/0,0,a.id),this._updates.allLayers=!0,a.source&&(this._updates.sources[a.source]=!0),this._updates.events.push(["layer.add",{layer:a}]),this.updateClasses(a.id)},removeLayer:function(a){this._checkLoaded();var b=this._layers[a];if(void 0===b)throw new Error("There is no layer with this ID");for(var c in this._layers)this._layers[c].ref===a&&this.removeLayer(c);return b.off("error",this._forwardLayerEvent),delete this._layers[a],delete this._updates.layers[a],delete this._updates.paintProps[a],this._order.splice(this._order.indexOf(a),1),this._updates.allLayers=!0,this._updates.events.push(["layer.remove",{layer:b}]),this._updates.changed=!0,this},getLayer:function(a){return this._layers[a]},getReferentLayer:function(a){var b=this.getLayer(a);return b.ref&&(b=this.getLayer(b.ref)),b},setLayerZoomRange:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return d.minzoom===b&&d.maxzoom===c?this:(null!=b&&(d.minzoom=b),null!=c&&(d.maxzoom=c),this._updateLayer(d))},setFilter:function(a,b){this._checkLoaded();var c=this.getReferentLayer(a);return null!==b&&this._handleErrors(q.filter,"layers."+c.id+".filter",b)?this:k.deepEqual(c.filter,b)?this:(c.filter=k.clone(b),this._updateLayer(c))},getFilter:function(a){return this.getReferentLayer(a).filter},setLayoutProperty:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return k.deepEqual(d.getLayoutProperty(b),c)?this:(d.setLayoutProperty(b,c),this._updateLayer(d))},getLayoutProperty:function(a,b){return this.getReferentLayer(a).getLayoutProperty(b)},setPaintProperty:function(a,b,c,d){this._checkLoaded();var e=this.getLayer(a);if(k.deepEqual(e.getPaintProperty(b,d),c))return this;var f=e.isPaintValueFeatureConstant(b);return e.setPaintProperty(b,c,d),!(c&&v.isFunctionDefinition(c)&&"$zoom"!==c.property&&void 0!==c.property)&&f||(this._updates.layers[a]=!0,e.source&&(this._updates.sources[e.source]=!0)),this.updateClasses(a,b)},getPaintProperty:function(a,b,c){return this.getLayer(a).getPaintProperty(b,c)},updateClasses:function(a,b){if(this._updates.changed=!0,a){var c=this._updates.paintProps;c[a]||(c[a]={}),c[a][b||"all"]=!0}else this._updates.allPaintProps=!0;return this},serialize:function(){return k.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:k.mapObject(this.sources,function(a){return a.serialize()}),layers:this._order.map(function(a){return this._layers[a].serialize()},this)},function(a){return void 0!==a})},_updateLayer:function(a){return this._updates.layers[a.id]=!0,a.source&&(this._updates.sources[a.source]=!0),this._updates.changed=!0,this},_flattenRenderedFeatures:function(a){for(var b=[],c=this._order.length-1;c>=0;c--)for(var d=this._order[c],e=0;e<a.length;e++){var f=a[e][d];if(f)for(var g=0;g<f.length;g++)b.push(f[g])}return b},queryRenderedFeatures:function(a,b,c,d){b&&b.filter&&this._handleErrors(q.filter,"queryRenderedFeatures.filter",b.filter,!0);var e={};if(b&&b.layers)for(var f=0;f<b.layers.length;f++){var g=b.layers[f];e[this._layers[g].source]=!0}var h=[];for(var i in this.sources)if(!b.layers||e[i]){var j=this.sources[i],k=s.rendered(j,this._layers,a,b,c,d);h.push(k)}return this._flattenRenderedFeatures(h)},querySourceFeatures:function(a,b){b&&b.filter&&this._handleErrors(q.filter,"querySourceFeatures.filter",b.filter,!0);var c=this.sources[a];return c?s.source(c,b):[]},addSourceType:function(a,b,c){return r.getType(a)?c(new Error('A source type called "'+a+'" already exists.')):(r.setType(a,b),b.workerSourceURL?void this.dispatcher.broadcast("load worker source",{name:a,url:b.workerSourceURL},c):c(null,null))},_handleErrors:function(a,b,c,d,e){var f=d?q.throwErrors:q.emitErrors,g=a.call(q,k.extend({key:b,style:this.serialize(),value:c,styleSpec:u},e));return f.call(q,this,g)},_remove:function(){this.dispatcher.remove()},_reloadSource:function(a){this.sources[a].reload()},_updateSources:function(a){for(var b in this.sources)this.sources[b].update(a)},_redoPlacement:function(){for(var a in this.sources)this.sources[a].redoPlacement&&this.sources[a].redoPlacement()},_forwardSourceEvent:function(a){this.fire("source."+a.type,k.extend({source:a.target.getSource()},a))},_forwardTileEvent:function(a){this.fire(a.type,k.extend({source:a.target},a))},_forwardLayerEvent:function(a){this.fire("layer."+a.type,k.extend({layer:{id:a.target.id}},a))},"get sprite json":function(a,b){var c=this.sprite;c.loaded()?b(null,{sprite:c.data,retina:c.retina}):c.on("load",function(){b(null,{sprite:c.data,retina:c.retina})})},"get icons":function(a,b){var c=this.sprite,d=this.spriteAtlas;c.loaded()?(d.setSprite(c),d.addIcons(a.icons,b)):c.on("load",function(){d.setSprite(c),d.addIcons(a.icons,b)})},"get glyphs":function(a,b){function c(a,c,d){a&&console.error(a),f[d]=c,0===--e&&b(null,f)}var d=a.stacks,e=Object.keys(d).length,f={};for(var g in d)this.glyphSource.getSimpleGlyphs(g,d[g],a.uid,c)}})},{"../render/line_atlas":345,"../source/query_features":355,"../source/source":357,"../source/source_cache":358,"../symbol/glyph_source":390,"../symbol/sprite_atlas":395,"../util/ajax":416,"../util/browser":417,"../util/dispatcher":424,"../util/evented":425,"../util/mapbox":430,"../util/util":433,"./animation_loop":366,"./image_sprite":367,"./style_function":371,"./style_layer":372,"./style_spec":379,"./validate_style":381}],370:[function(a,b,c){"use strict";function d(a,b){this.value=h.clone(b),this.isFunction=f.isFunctionDefinition(b),this.json=JSON.stringify(this.value);var c="color"===a.type&&this.value?g(this.value):b;if(this.calculate=f[a.function||"piecewise-constant"](c),this.isFeatureConstant=this.calculate.isFeatureConstant,this.isZoomConstant=this.calculate.isZoomConstant,"piecewise-constant"===a.function&&a.transition&&(this.calculate=e(this.calculate)),!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var d=[],i=this.value.stops,j=0;j<this.value.stops.length;j++){var k=i[j][0].zoom;this.stopZoomLevels.indexOf(k)<0&&(this.stopZoomLevels.push(k),d.push([k,d.length]))}this.calculateInterpolationT=f.interpolated({stops:d,base:b.base})}}function e(a){return function(b,c){var d,e,f,g=b.zoom,h=b.zoomHistory,i=b.duration,j=g%1,k=Math.min((Date.now()-h.lastIntegerZoomTime)/i,1),l=1;return g>h.lastIntegerZoom?(d=j+(1-j)*k,l*=2,e=a({zoom:g-1},c),f=a({zoom:g},c)):(d=1-(1-k)*j,f=a({zoom:g},c),e=a({zoom:g+1},c),l/=2),void 0===e||void 0===f?void 0:{from:e,fromScale:l,to:f,toScale:1,t:d}}}var f=a("./style_function"),g=a("./parse_color"),h=a("../util/util");b.exports=d},{"../util/util":433,"./parse_color":368,"./style_function":371}],371:[function(a,b,c){"use strict";var d=a("mapbox-gl-function");c.interpolated=function(a){var b=d.interpolated(a),c=function(a,c){return b(a&&a.zoom,c||{})};return c.isFeatureConstant=b.isFeatureConstant,c.isZoomConstant=b.isZoomConstant,c},c["piecewise-constant"]=function(a){var b=d["piecewise-constant"](a),c=function(a,c){return b(a&&a.zoom,c||{})};return c.isFeatureConstant=b.isFeatureConstant,c.isZoomConstant=b.isZoomConstant,c},c.isFunctionDefinition=d.isFunctionDefinition},{"mapbox-gl-function":293}],372:[function(a,b,c){"use strict";function d(a,b){this.set(a,b)}function e(a){return a.value}var f=a("../util/util"),g=a("./style_transition"),h=a("./style_declaration"),i=a("./style_spec"),j=a("./validate_style"),k=a("./parse_color"),l=a("../util/evented");b.exports=d;d.create=function(b,c){return new({background:a("./style_layer/background_style_layer"),circle:a("./style_layer/circle_style_layer"),fill:a("./style_layer/fill_style_layer"),line:a("./style_layer/line_style_layer"),raster:a("./style_layer/raster_style_layer"),symbol:a("./style_layer/symbol_style_layer")}[(c||b).type])(b,c)},d.prototype=f.inherit(l,{set:function(a,b){this.id=a.id,this.ref=a.ref,this.metadata=a.metadata,this.type=(b||a).type,this.source=(b||a).source,this.sourceLayer=(b||a)["source-layer"],this.minzoom=(b||a).minzoom,this.maxzoom=(b||a).maxzoom,this.filter=(b||a).filter,this.paint={},this.layout={},this._paintSpecifications=i["paint_"+this.type],this._layoutSpecifications=i["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var c,d;for(var e in a){var f=e.match(/^paint(?:\.(.*))?$/);if(f){var g=f[1]||"";for(c in a[e])this.setPaintProperty(c,a[e][c],g)}}if(this.ref)this._layoutDeclarations=b._layoutDeclarations;else for(d in a.layout)this.setLayoutProperty(d,a.layout[d]);for(c in this._paintSpecifications)this.paint[c]=this.getPaintValue(c);for(d in this._layoutSpecifications)this._updateLayoutValue(d)},setLayoutProperty:function(a,b){if(null==b)delete this._layoutDeclarations[a];else{var c="layers."+this.id+".layout."+a;if(this._handleErrors(j.layoutProperty,c,a,b))return;this._layoutDeclarations[a]=new h(this._layoutSpecifications[a],b)}this._updateLayoutValue(a)},getLayoutProperty:function(a){return this._layoutDeclarations[a]&&this._layoutDeclarations[a].value},getLayoutValue:function(a,b,c){var d=this._layoutSpecifications[a],e=this._layoutDeclarations[a];return e?e.calculate(b,c):d.default},setPaintProperty:function(a,b,c){var d="layers."+this.id+(c?'["paint.'+c+'"].':".paint.")+a;if(f.endsWith(a,"-transition"))if(this._paintTransitionOptions[c||""]||(this._paintTransitionOptions[c||""]={}),null===b||void 0===b)delete this._paintTransitionOptions[c||""][a];else{if(this._handleErrors(j.paintProperty,d,a,b))return;this._paintTransitionOptions[c||""][a]=b}else if(this._paintDeclarations[c||""]||(this._paintDeclarations[c||""]={}),null===b||void 0===b)delete this._paintDeclarations[c||""][a];else{if(this._handleErrors(j.paintProperty,d,a,b))return;this._paintDeclarations[c||""][a]=new h(this._paintSpecifications[a],b)}},getPaintProperty:function(a,b){return b=b||"",f.endsWith(a,"-transition")?this._paintTransitionOptions[b]&&this._paintTransitionOptions[b][a]:this._paintDeclarations[b]&&this._paintDeclarations[b][a]&&this._paintDeclarations[b][a].value},getPaintValue:function(a,b,c){var d=this._paintSpecifications[a],e=this._paintTransitions[a];return e?e.calculate(b,c):"color"===d.type&&d.default?k(d.default):d.default},getPaintValueStopZoomLevels:function(a){var b=this._paintTransitions[a];return b?b.declaration.stopZoomLevels:[]},getPaintInterpolationT:function(a,b){return this._paintTransitions[a].declaration.calculateInterpolationT({zoom:b})},isPaintValueFeatureConstant:function(a){var b=this._paintTransitions[a];return!b||b.declaration.isFeatureConstant},isLayoutValueFeatureConstant:function(a){var b=this._layoutDeclarations[a];return!b||b.isFeatureConstant},isPaintValueZoomConstant:function(a){var b=this._paintTransitions[a];return!b||b.declaration.isZoomConstant},isHidden:function(a){return!!(this.minzoom&&a<this.minzoom)||(!!(this.maxzoom&&a>=this.maxzoom)||("none"===this.layout.visibility||0===this.paint[this.type+"-opacity"]))},updatePaintTransitions:function(a,b,c,d){for(var e=f.extend({},this._paintDeclarations[""]),g=0;g<a.length;g++)f.extend(e,this._paintDeclarations[a[g]]);var h;for(h in e)this._applyPaintDeclaration(h,e[h],b,c,d);for(h in this._paintTransitions)h in e||this._applyPaintDeclaration(h,null,b,c,d)},updatePaintTransition:function(a,b,c,d,e){for(var f=this._paintDeclarations[""][a],g=0;g<b.length;g++){var h=this._paintDeclarations[b[g]];h&&h[a]&&(f=h[a])}this._applyPaintDeclaration(a,f,c,d,e)},recalculate:function(a,b){for(var c in this._paintTransitions)this.paint[c]=this.getPaintValue(c,{zoom:a,zoomHistory:b});for(var d in this._layoutFunctions)this.layout[d]=this.getLayoutValue(d,{zoom:a,zoomHistory:b})},serialize:function(a){var b={id:this.id,ref:this.ref,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom};for(var c in this._paintDeclarations){b[""===c?"paint":"paint."+c]=f.mapObject(this._paintDeclarations[c],e)}return(!this.ref||a&&a.includeRefProperties)&&f.extend(b,{type:this.type,source:this.source,"source-layer":this.sourceLayer,filter:this.filter,layout:f.mapObject(this._layoutDeclarations,e)}),f.filterObject(b,function(a,b){return void 0!==a&&!("layout"===b&&!Object.keys(a).length)})},_applyPaintDeclaration:function(a,b,c,d,e){var i=c.transition?this._paintTransitions[a]:void 0,j=this._paintSpecifications[a];if(null!==b&&void 0!==b||(b=new h(j,j.default)),!i||i.declaration.json!==b.json){var k=f.extend({duration:300,delay:0},d,this.getPaintProperty(a+"-transition")),l=this._paintTransitions[a]=new g(j,b,i,k);l.instant()||(l.loopID=e.set(l.endTime-Date.now())),i&&e.cancel(i.loopID)}},_updateLayoutValue:function(a){var b=this._layoutDeclarations[a];b&&b.isFunction?this._layoutFunctions[a]=!0:(delete this._layoutFunctions[a],this.layout[a]=this.getLayoutValue(a))},_handleErrors:function(a,b,c,d){return j.emitErrors(this,a.call(j,{key:b,layerType:this.type,objectKey:c,value:d,styleSpec:i,style:{glyphs:!0,sprite:!0}}))}})},{"../util/evented":425,"../util/util":433,"./parse_color":368,"./style_declaration":370,"./style_layer/background_style_layer":373,"./style_layer/circle_style_layer":374,"./style_layer/fill_style_layer":375,"./style_layer/line_style_layer":376,"./style_layer/raster_style_layer":377,"./style_layer/symbol_style_layer":378,"./style_spec":379,"./style_transition":380,"./validate_style":381}],373:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":433,"../style_layer":372}],374:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":433,"../style_layer":372}],375:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValue.call(this,"fill-color",b,c):f.prototype.getPaintValue.call(this,a,b,c)},getPaintValueStopZoomLevels:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):f.prototype.getPaintValueStopZoomLevels.call(this,arguments)},getPaintInterpolationT:function(a,b){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintInterpolationT.call(this,"fill-color",b):f.prototype.getPaintInterpolationT.call(this,a,b)},isPaintValueFeatureConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):f.prototype.isPaintValueFeatureConstant.call(this,a)},isPaintValueZoomConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueZoomConstant.call(this,"fill-color"):f.prototype.isPaintValueZoomConstant.call(this,a)}}),b.exports=d},{"../../util/util":433,"../style_layer":372}],376:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){var d=f.prototype.getPaintValue.apply(this,arguments);if(d&&"line-dasharray"===a){var e=Math.floor(b.zoom);this._flooredZoom!==e&&(this._flooredZoom=e,this._flooredLineWidth=this.getPaintValue("line-width",b,c)),d.fromScale*=this._flooredLineWidth,d.toScale*=this._flooredLineWidth}return d}})},{"../../util/util":433,"../style_layer":372}],377:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":433,"../style_layer":372}],378:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{isHidden:function(){if(f.prototype.isHidden.apply(this,arguments))return!0;var a=0===this.paint["text-opacity"]||!this.layout["text-field"],b=0===this.paint["icon-opacity"]||!this.layout["icon-image"];return!(!a||!b)},getLayoutValue:function(a,b,c){return("text-rotation-alignment"!==a||"line"!==this.getLayoutValue("symbol-placement",b,c)||this.getLayoutProperty("text-rotation-alignment"))&&("icon-rotation-alignment"!==a||"line"!==this.getLayoutValue("symbol-placement",b,c)||this.getLayoutProperty("icon-rotation-alignment"))?"text-pitch-alignment"!==a||this.getLayoutProperty("text-pitch-alignment")?f.prototype.getLayoutValue.apply(this,arguments):this.getLayoutValue("text-rotation-alignment"):"map"}})},{"../../util/util":433,"../style_layer":372}],379:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":316}],380:[function(a,b,c){"use strict";function d(a,b,c,d){this.declaration=b,this.startTime=this.endTime=(new Date).getTime(),"piecewise-constant"===a.function&&a.transition?this.interp=e:this.interp=g[a.type],this.oldTransition=c,this.duration=d.duration||0,this.delay=d.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=f.easeCubicInOut),c&&c.endTime<=this.startTime&&delete c.oldTransition}function e(a,b,c){return void 0===(a&&a.to)||void 0===(b&&b.to)?void 0:{from:a.to,fromScale:a.toScale,to:b.to,toScale:b.toScale,t:c}}var f=a("../util/util"),g=a("../util/interpolate");b.exports=d,d.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},d.prototype.calculate=function(a,b){var c=this.declaration.calculate(f.extend({},a,{duration:this.duration}),b);if(this.instant())return c;var d=a.time||Date.now();if(d<this.endTime){var e=this.oldTransition.calculate(f.extend({},a,{time:this.startTime}),b),g=this.ease((d-this.startTime-this.delay)/this.duration);c=this.interp(e,c,g)}return c}},{"../util/interpolate":427,"../util/util":433}],381:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/lib/validate_style.min"),b.exports.emitErrors=function(a,b){if(b&&b.length){for(var c=0;c<b.length;c++)a.fire("error",{error:new Error(b[c].message)});return!0}return!1},b.exports.throwErrors=function(a,b){if(b)for(var c=0;c<b.length;c++)throw new Error(b[c].message)}},{"mapbox-gl-style-spec/lib/validate_style.min":315}],382:[function(a,b,c){"use strict";function d(a,b,c,d){this.x=a,this.y=b,this.angle=c,void 0!==d&&(this.segment=d)}var e=a("point-geometry");b.exports=d,d.prototype=Object.create(e.prototype),d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)}},{"point-geometry":477}],383:[function(a,b,c){"use strict";function d(a,b,c,d,e){if(void 0===b.segment)return!0;for(var f=b,g=b.segment+1,h=0;h>-c/2;){if(--g<0)return!1;h-=a[g].dist(f),f=a[g]}h+=a[g].dist(a[g+1]),g++;for(var i=[],j=0;h<c/2;){var k=a[g-1],l=a[g],m=a[g+1];if(!m)return!1;var n=k.angleTo(l)-l.angleTo(m);for(n=Math.abs((n+3*Math.PI)%(2*Math.PI)-Math.PI),i.push({distance:h,angleDelta:n}),j+=n;h-i[0].distance>d;)j-=i.shift().angleDelta;if(j>e)return!1;g++,h+=l.dist(m)}return!0}b.exports=d},{}],384:[function(a,b,c){"use strict";function d(a,b,c,d,f){for(var g=[],h=0;h<a.length;h++)for(var i,j=a[h],k=0;k<j.length-1;k++){var l=j[k],m=j[k+1];l.x<b&&m.x<b||(l.x<b?l=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round():m.x<b&&(m=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round()),l.y<c&&m.y<c||(l.y<c?l=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round():m.y<c&&(m=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round()),l.x>=d&&m.x>=d||(l.x>=d?l=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round():m.x>=d&&(m=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round()),l.y>=f&&m.y>=f||(l.y>=f?l=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round():m.y>=f&&(m=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round()),i&&l.equals(i[i.length-1])||(i=[l],g.push(i)),i.push(m)))))}return g}var e=a("point-geometry");b.exports=d},{"point-geometry":477}],385:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":431,"../util/util":433,"point-geometry":477}],386:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k){var l=g.top*h-i,m=g.bottom*h+i,n=g.left*h-i,o=g.right*h+i;if(this.boxStartIndex=a.length,j){var p=m-l,q=o-n;if(p>0)if(p=Math.max(10*h,p),k){var r=b[c.segment+1].sub(b[c.segment])._unit()._mult(q),s=[c.sub(r),c.add(r)];this._addLineCollisionBoxes(a,s,c,0,q,p,d,e,f)}else this._addLineCollisionBoxes(a,b,c,c.segment,q,p,d,e,f)}else a.emplaceBack(c.x,c.y,n,l,o,m,1/0,d,e,f,0,0,0,0,0);this.boxEndIndex=a.length}b.exports=d,d.prototype._addLineCollisionBoxes=function(a,b,c,d,e,f,g,h,i){var j=f/2,k=Math.floor(e/j),l=-f/2,m=this.boxes,n=c,o=d+1,p=l;do{if(--o<0)return m;p-=b[o].dist(n),n=b[o]}while(p>-e/2);for(var q=b[o].dist(b[o+1]),r=0;r<k;r++){
for(var s=-e/2+r*j;p+q<s;){if(p+=q,++o+1>=b.length)return m;q=b[o].dist(b[o+1])}var t=s-p,u=b[o],v=b[o+1],w=v.sub(u)._unit()._mult(t)._add(u)._round(),x=Math.max(Math.abs(s-l)-j/2,0),y=e/2/x;a.emplaceBack(w.x,w.y,-f/2,-f/2,f/2,f/2,y,g,h,i,0,0,0,0,0)}return m}},{}],387:[function(a,b,c){"use strict";function d(a,b,c){if("object"==typeof a){var d=a;c=b,a=d.angle,b=d.pitch,this.grid=new g(d.grid),this.ignoredGrid=new g(d.ignoredGrid)}else this.grid=new g(f,12,6),this.ignoredGrid=new g(f,12,0);this.angle=a,this.pitch=b;var e=Math.sin(a),h=Math.cos(a);if(this.rotationMatrix=[h,-e,e,h],this.reverseRotationMatrix=[h,e,-e,h],this.yStretch=1/Math.cos(b/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=c,0===c.length){c.emplaceBack();c.emplaceBack(0,0,0,-32767,0,32767,32767,0,0,0,0,0,0,0,0,0),c.emplaceBack(f,0,0,-32767,0,32767,32767,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,0,-32767,0,32767,0,32767,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,f,-32767,0,32767,0,32767,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=c.get(0),this.edges=[c.get(1),c.get(2),c.get(3),c.get(4)]}var e=a("point-geometry"),f=a("../data/bucket").EXTENT,g=a("grid-index");b.exports=d,d.prototype.serialize=function(){var a={angle:this.angle,pitch:this.pitch,grid:this.grid.toArrayBuffer(),ignoredGrid:this.ignoredGrid.toArrayBuffer()};return{data:a,transferables:[a.grid,a.ignoredGrid]}},d.prototype.minScale=.25,d.prototype.maxScale=2,d.prototype.placeCollisionFeature=function(a,b,c){for(var d=this.collisionBoxArray,f=this.minScale,g=this.rotationMatrix,h=this.yStretch,i=a.boxStartIndex;i<a.boxEndIndex;i++){var j=d.get(i),k=j.anchorPoint._matMult(g),l=k.x,m=k.y,n=l+j.x1,o=m+j.y1*h,p=l+j.x2,q=m+j.y2*h;if(j.bbox0=n,j.bbox1=o,j.bbox2=p,j.bbox3=q,!b)for(var r=this.grid.query(n,o,p,q),s=0;s<r.length;s++){var t=d.get(r[s]),u=t.anchorPoint._matMult(g);if((f=this.getPlacementScale(f,k,j,u,t))>=this.maxScale)return f}if(c){var v;if(this.angle){var w=this.reverseRotationMatrix,x=new e(j.x1,j.y1).matMult(w),y=new e(j.x2,j.y1).matMult(w),z=new e(j.x1,j.y2).matMult(w),A=new e(j.x2,j.y2).matMult(w);v=this.tempCollisionBox,v.anchorPointX=j.anchorPoint.x,v.anchorPointY=j.anchorPoint.y,v.x1=Math.min(x.x,y.x,z.x,A.x),v.y1=Math.min(x.y,y.x,z.x,A.x),v.x2=Math.max(x.x,y.x,z.x,A.x),v.y2=Math.max(x.y,y.x,z.x,A.x),v.maxScale=j.maxScale}else v=j;for(var B=0;B<this.edges.length;B++){var C=this.edges[B];if((f=this.getPlacementScale(f,j.anchorPoint,v,C.anchorPoint,C))>=this.maxScale)return f}}}return f},d.prototype.queryRenderedSymbols=function(a,b,c,d,f){var g={},h=[],i=this.collisionBoxArray,j=this.rotationMatrix,k=new e(a,b)._matMult(j),l=this.tempCollisionBox;l.anchorX=k.x,l.anchorY=k.y,l.x1=0,l.y1=0,l.x2=c-a,l.y2=d-b,l.maxScale=f,f=l.maxScale;for(var m=[k.x+l.x1/f,k.y+l.y1/f*this.yStretch,k.x+l.x2/f,k.y+l.y2/f*this.yStretch],n=this.grid.query(m[0],m[1],m[2],m[3]),o=this.ignoredGrid.query(m[0],m[1],m[2],m[3]),p=0;p<o.length;p++)n.push(o[p]);for(var q=0;q<n.length;q++){var r=i.get(n[q]),s=r.sourceLayerIndex,t=r.featureIndex;if(void 0===g[s]&&(g[s]={}),!g[s][t]){var u=r.anchorPoint.matMult(j);this.getPlacementScale(this.minScale,k,l,u,r)>=f&&(g[s][t]=!0,h.push(n[q]))}}return h},d.prototype.getPlacementScale=function(a,b,c,d,e){var f=b.x-d.x,g=b.y-d.y,h=(e.x1-c.x2)/f,i=(e.x2-c.x1)/f,j=(e.y1-c.y2)*this.yStretch/g,k=(e.y2-c.y1)*this.yStretch/g;(isNaN(h)||isNaN(i))&&(h=i=1),(isNaN(j)||isNaN(k))&&(j=k=1);var l=Math.min(Math.max(h,i),Math.max(j,k)),m=e.maxScale,n=c.maxScale;return l>m&&(l=m),l>n&&(l=n),l>a&&l>=e.placementScale&&(a=l),a},d.prototype.insertCollisionFeature=function(a,b,c){for(var d=c?this.ignoredGrid:this.grid,e=this.collisionBoxArray,f=a.boxStartIndex;f<a.boxEndIndex;f++){var g=e.get(f);g.placementScale=b,b<this.maxScale&&d.insert(f,g.bbox0,g.bbox1,g.bbox2,g.bbox3)}}},{"../data/bucket":320,"grid-index":275,"point-geometry":477}],388:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){var k=d?.6*g*h:0,l=Math.max(d?d.right-d.left:0,f?f.right-f.left:0),m=0===a[0].x||a[0].x===j||0===a[0].y||a[0].y===j;b-l*h<b/4&&(b=l*h+b/4);var n=2*g;return e(a,m?b/2*i%b:(l/2+n)*h*i%b,b,k,c,l*h,m,!1,j)}function e(a,b,c,d,i,j,k,l,m){for(var n=j/2,o=0,p=0;p<a.length-1;p++)o+=a[p].dist(a[p+1]);for(var q=0,r=b-c,s=[],t=0;t<a.length-1;t++){for(var u=a[t],v=a[t+1],w=u.dist(v),x=v.angleTo(u);r+c<q+w;){r+=c;var y=(r-q)/w,z=f(u.x,v.x,y),A=f(u.y,v.y,y);if(z>=0&&z<m&&A>=0&&A<m&&r-n>=0&&r+n<=o){var B=new g(z,A,x,t)._round();d&&!h(a,B,j,d,i)||s.push(B)}}q+=w}return l||s.length||k||(s=e(a,q/2,c,d,i,j,k,!0,m)),s}var f=a("../util/interpolate"),g=a("../symbol/anchor"),h=a("./check_max_angle");b.exports=d},{"../symbol/anchor":382,"../util/interpolate":427,"./check_max_angle":383}],389:[function(a,b,c){"use strict";function d(){this.width=g,this.height=g,this.bin=new e(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)}var e=a("shelf-pack"),f=a("../util/util"),g=128;b.exports=d,d.prototype.getGlyphs=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]=[]),d[b].push(c);return d},d.prototype.getRects=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]={}),d[b][c]=this.index[e];return d},d.prototype.addGlyph=function(a,b,c,d){if(!c)return null;var e=b+"#"+c.id;if(this.index[e])return this.ids[e].indexOf(a)<0&&this.ids[e].push(a),this.index[e];if(!c.bitmap)return null;var g=c.width+2*d,h=c.height+2*d,i=g+2,j=h+2;i+=4-i%4,j+=4-j%4;var k=this.bin.packOne(i,j);if(k||(this.resize(),k=this.bin.packOne(i,j)),!k)return f.warnOnce("glyph bitmap overflow"),null;this.index[e]=k,this.ids[e]=[a];for(var l=this.data,m=c.bitmap,n=0;n<h;n++)for(var o=this.width*(k.y+n+1)+k.x+1,p=g*n,q=0;q<g;q++)l[o+q]=m[p+q];return this.dirty=!0,k},d.prototype.resize=function(){var a=this.width,b=this.height;if(!(a>=2048||b>=2048)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=4,this.height*=4,this.bin.resize(this.width,this.height);for(var c=new ArrayBuffer(this.width*this.height),d=0;d<b;d++){var e=new Uint8Array(this.data.buffer,b*d,a);new Uint8Array(c,b*d*4,a).set(e)}this.data=new Uint8Array(c)}},d.prototype.bind=function(a){this.gl=a,this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,null))},d.prototype.updateTexture=function(a){this.bind(a),this.dirty&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data),this.dirty=!1)}},{"../util/util":433,"shelf-pack":521}],390:[function(a,b,c){"use strict";function d(a){this.url=a&&g(a),this.atlases={},this.stacks={},this.loading={}}function e(a,b,c){this.advance=a.advance,this.left=a.left-c-1,this.top=a.top+c+1,this.rect=b}function f(a,b,c,d){return d=d||"abc",c.replace("{s}",d[a.length%d.length]).replace("{fontstack}",a).replace("{range}",b)}var g=a("../util/mapbox").normalizeGlyphsURL,h=a("../util/ajax").getArrayBuffer,i=a("../util/glyphs"),j=a("../symbol/glyph_atlas"),k=a("pbf");b.exports=d,d.prototype.getSimpleGlyphs=function(a,b,c,d){void 0===this.stacks[a]&&(this.stacks[a]={}),void 0===this.atlases[a]&&(this.atlases[a]=new j);for(var f,g={},h=this.stacks[a],i=this.atlases[a],k={},l=0,m=0;m<b.length;m++){var n=b[m];if(f=Math.floor(n/256),h[f]){var o=h[f].glyphs[n],p=i.addGlyph(c,a,o,3);o&&(g[n]=new e(o,p,3))}else void 0===k[f]&&(k[f]=[],l++),k[f].push(n)}l||d(void 0,g,a);var q=function(b,f,h){if(!b)for(var j=this.stacks[a][f]=h.stacks[0],m=0;m<k[f].length;m++){var n=k[f][m],o=j.glyphs[n],p=i.addGlyph(c,a,o,3);o&&(g[n]=new e(o,p,3))}--l||d(void 0,g,a)}.bind(this);for(var r in k)this.loadRange(a,r,q)},d.prototype.loadRange=function(a,b,c){if(256*b>65535)return c("glyphs > 65535 not supported");void 0===this.loading[a]&&(this.loading[a]={});var d=this.loading[a];if(d[b])d[b].push(c);else{d[b]=[c];var e=256*b+"-"+(256*b+255),g=f(a,e,this.url);h(g,function(a,c){for(var e=!a&&new i(new k(new Uint8Array(c))),f=0;f<d[b].length;f++)d[b][f](a,b,e);delete d[b]})}},d.prototype.getGlyphAtlas=function(a){return this.atlases[a]}},{"../symbol/glyph_atlas":389,"../util/ajax":416,"../util/glyphs":426,"../util/mapbox":430,pbf:470}],391:[function(a,b,c){"use strict";b.exports=function(a,b,c){function d(d){k.push(a[d]),l.push(c[d]),m.push(b[d]),n++}function e(a,b,c){var d=j[a];return delete j[a],j[b]=d,l[d][0].pop(),l[d][0]=l[d][0].concat(c[0]),d}function f(a,b,c){var d=i[b];return delete i[b],i[a]=d,l[d][0].shift(),l[d][0]=c[0].concat(l[d][0]),d}function g(a,b,c){var d=c?b[0][b[0].length-1]:b[0][0];return a+":"+d.x+":"+d.y}var h,i={},j={},k=[],l=[],m=[],n=0;for(h=0;h<a.length;h++){var o=c[h],p=b[h];if(p){var q=g(p,o),r=g(p,o,!0);if(q in j&&r in i&&j[q]!==i[r]){var s=f(q,r,o),t=e(q,r,l[s]);delete i[q],delete j[r],j[g(p,l[t],!0)]=t,l[s]=null}else q in j?e(q,r,o):r in i?f(q,r,o):(d(h),i[q]=n-1,j[r]=n-1)}else d(h)}return{features:k,textFeatures:m,geometries:l}}},{}],392:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){this.anchorPoint=a,this.tl=b,this.tr=c,this.bl=d,this.br=e,this.tex=f,this.anchorAngle=g,this.glyphAngle=h,this.minScale=i,this.maxScale=j}function e(a,b,c,e,f,g,j,k,l){var m,n,o,p,q=b.image.rect,r=f.layout,s=b.left-1,t=s+q.w/b.image.pixelRatio,u=b.top-1,v=u+q.h/b.image.pixelRatio;if("none"!==r["icon-text-fit"]&&j){var w=t-s,x=v-u,y=r["text-size"]/24,z=j.left*y,A=j.right*y,B=j.top*y,C=j.bottom*y,D=A-z,E=C-B,F=r["icon-text-fit-padding"][0],G=r["icon-text-fit-padding"][1],H=r["icon-text-fit-padding"][2],I=r["icon-text-fit-padding"][3],J="width"===r["icon-text-fit"]?.5*(E-x):0,K="height"===r["icon-text-fit"]?.5*(D-w):0,L="width"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?D:w,M="height"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?E:x;m=new h(z+K-I,B+J-F),n=new h(z+K+G+L,B+J-F),o=new h(z+K+G+L,B+J+H+M),p=new h(z+K-I,B+J+H+M)}else m=new h(s,u),n=new h(t,u),o=new h(t,v),p=new h(s,v);var N=f.getLayoutValue("icon-rotate",k,l)*Math.PI/180;if(g){var O=e[a.segment];if(a.y===O.y&&a.x===O.x&&a.segment+1<e.length){var P=e[a.segment+1];N+=Math.atan2(a.y-P.y,a.x-P.x)+Math.PI}else N+=Math.atan2(a.y-O.y,a.x-O.x)}if(N){var Q=Math.sin(N),R=Math.cos(N),S=[R,-Q,Q,R];m=m.matMult(S),n=n.matMult(S),p=p.matMult(S),o=o.matMult(S)}return[new d(new h(a.x,a.y),m,n,p,o,b.image.rect,0,0,i,1/0)]}function f(a,b,c,e,f,j){for(var k=f.layout["text-rotate"]*Math.PI/180,l=f.layout["text-keep-upright"],m=b.positionedGlyphs,n=[],o=0;o<m.length;o++){var p=m[o],q=p.glyph,r=q.rect;if(r){var s,t=(p.x+q.advance/2)*c,u=i;j?(s=[],u=g(s,a,t,e,a.segment,!0),l&&(u=Math.min(u,g(s,a,t,e,a.segment,!1)))):s=[{anchorPoint:new h(a.x,a.y),offset:0,angle:0,maxScale:1/0,minScale:i}];for(var v=p.x+q.left,w=p.y-q.top,x=v+r.w,y=w+r.h,z=new h(v,w),A=new h(x,w),B=new h(v,y),C=new h(x,y),D=0;D<s.length;D++){var E=s[D],F=z,G=A,H=B,I=C;if(k){var J=Math.sin(k),K=Math.cos(k),L=[K,-J,J,K];F=F.matMult(L),G=G.matMult(L),H=H.matMult(L),I=I.matMult(L)}var M=Math.max(E.minScale,u),N=(a.angle+E.offset+2*Math.PI)%(2*Math.PI),O=(E.angle+E.offset+2*Math.PI)%(2*Math.PI);n.push(new d(E.anchorPoint,F,G,H,I,r,N,O,M,E.maxScale))}}}return n}function g(a,b,c,d,e,f){var g=!f;c<0&&(f=!f),f&&e++;var j=new h(b.x,b.y),k=d[e],l=1/0;c=Math.abs(c);for(var m=i;;){var n=j.dist(k),o=c/n,p=Math.atan2(k.y-j.y,k.x-j.x);if(f||(p+=Math.PI),a.push({anchorPoint:j,offset:g?Math.PI:0,minScale:o,maxScale:l,angle:(p+2*Math.PI)%(2*Math.PI)}),o<=m)break;for(j=k;j.equals(k);)if(e+=f?1:-1,!(k=d[e]))return o;var q=k.sub(j)._unit();j=j.sub(q._mult(n)),l=o}return m}var h=a("point-geometry");b.exports={getIconQuads:e,getGlyphQuads:f,SymbolQuad:d};var i=.5},{"point-geometry":477}],393:[function(a,b,c){"use strict";function d(a,b,c){for(var d=[],f=0,g=a.length;f<g;f++){var h=e(a[f].properties,b["text-field"]);if(h){h=h.toString();var i=b["text-transform"];"uppercase"===i?h=h.toLocaleUpperCase():"lowercase"===i&&(h=h.toLocaleLowerCase());for(var j=0;j<h.length;j++)c[h.charCodeAt(j)]=!0;d[f]=h}else d[f]=null}return d}var e=a("../util/token");b.exports=d},{"../util/token":432}],394:[function(a,b,c){"use strict";function d(a,b,c,d){this.codePoint=a,this.x=b,this.y=c,this.glyph=d}function e(a,b,c,d,e,f){this.positionedGlyphs=a,this.text=b,this.top=c,this.bottom=d,this.left=e,this.right=f}function f(a,b,c,f,h,i,j,k,l){for(var m=[],n=new e(m,a,l[1],l[1],l[0],l[0]),o=0,p=0;p<a.length;p++){var q=a.charCodeAt(p),r=b[q];r&&(m.push(new d(q,o,-17,r)),o+=r.advance+k)}return!!m.length&&(g(n,b,f,c,h,i,j,l),n)}function g(a,b,c,d,e,f,g,j){var k=null,n=0,o=0,p=0,q=0,r=a.positionedGlyphs;if(d)for(var s=0;s<r.length;s++){var t=r[s];if(t.x-=n,t.y+=c*p,t.x>d&&null!==k){var u=r[k+1].x;q=Math.max(u,q);for(var v=k+1;v<=s;v++)r[v].y+=c,r[v].x-=u;if(g){var w=k;l[r[k].codePoint]&&w--,h(r,b,o,w,g)}o=k+1,k=null,n+=u,p++}m[t.codePoint]&&(k=s)}var x=r[r.length-1],y=x.x+b[x.codePoint].advance;q=Math.max(q,y);var z=(p+1)*c;h(r,b,o,r.length-1,g),i(r,g,e,f,q,c,p,j),a.top+=-f*z,a.bottom=a.top+z,a.left+=-e*q,a.right=a.left+q}function h(a,b,c,d,e){for(var f=b[a[d].codePoint].advance,g=(a[d].x+f)*e,h=c;h<=d;h++)a[h].x-=g}function i(a,b,c,d,e,f,g,h){for(var i=(b-c)*e+h[0],j=(-d*(g+1)+.5)*f+h[1],k=0;k<a.length;k++)a[k].x+=i,a[k].y+=j}function j(a,b){if(!a||!a.rect)return null;var c=b["icon-offset"][0],d=b["icon-offset"][1],e=c-a.width/2,f=e+a.width,g=d-a.height/2;return new k(a,g,g+a.height,e,f)}function k(a,b,c,d,e){this.image=a,this.top=b,this.bottom=c,this.left=d,this.right=e}b.exports={shapeText:f,shapeIcon:j};var l={32:!0,8203:!0},m={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0}},{}],395:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.bin=new g(a,b),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function e(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=d*b+c,o=h*f+g;if(k)for(o-=f,m=-1;m<=j;m++,n=((m+j)%j+d)*b+c,o+=f)for(l=-1;l<=i;l++)e[o+l]=a[n+(l+i)%i];else for(m=0;m<j;m++,n+=b,o+=f)for(l=0;l<i;l++)e[o+l]=a[n+l]}function f(a,b,c,d,e){this.rect=a,this.width=b,this.height=c,this.sdf=d,this.pixelRatio=e}var g=a("shelf-pack"),h=a("../util/browser"),i=a("../util/util");b.exports=d,d.prototype.allocateImage=function(a,b){a/=this.pixelRatio,b/=this.pixelRatio;var c=a+2+(4-(a+2)%4),d=b+2+(4-(b+2)%4),e=this.bin.packOne(c,d);return e||(i.warnOnce("SpriteAtlas out of space."),null)},d.prototype.getImage=function(a,b){if(this.images[a])return this.images[a];if(!this.sprite)return null;var c=this.sprite.getSpritePosition(a);if(!c.width||!c.height)return null;var d=this.allocateImage(c.width,c.height);if(!d)return null;var e=new f(d,c.width/c.pixelRatio,c.height/c.pixelRatio,c.sdf,c.pixelRatio/this.pixelRatio);return this.images[a]=e,this.copy(d,c,b),e},d.prototype.getPosition=function(a,b){var c=this.getImage(a,b),d=c&&c.rect;if(!d)return null;var e=c.width*c.pixelRatio,f=c.height*c.pixelRatio;return{size:[c.width,c.height],tl:[(d.x+1)/this.width,(d.y+1)/this.height],br:[(d.x+1+e)/this.width,(d.y+1+f)/this.height]}},d.prototype.allocate=function(){if(!this.data){var a=Math.floor(this.width*this.pixelRatio),b=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(a*b);for(var c=0;c<this.data.length;c++)this.data[c]=0}},d.prototype.copy=function(a,b,c){if(this.sprite.img.data){var d=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var f=this.data;e(d,this.sprite.img.width,b.x,b.y,f,this.width*this.pixelRatio,(a.x+1)*this.pixelRatio,(a.y+1)*this.pixelRatio,b.width,b.height,c),this.dirty=!0}},d.prototype.setSprite=function(a){a&&(this.pixelRatio=h.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=a},d.prototype.addIcons=function(a,b){for(var c=0;c<a.length;c++)this.getImage(a[c]);b(null,this.images)},d.prototype.bind=function(a,b){var c=!1;this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),c=!0);var d=b?a.LINEAR:a.NEAREST;d!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d),this.filter=d),this.dirty&&(this.allocate(),c?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)}},{"../util/browser":417,"../util/util":433,"shelf-pack":521}],396:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":431,"../util/util":433,"point-geometry":477}],397:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=a("./quads").SymbolQuad,h=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"}]});e.extendAll(h.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)},get SymbolQuad(){return new g(this.anchorPoint,new f(this.tlX,this.tlY),new f(this.trX,this.trY),new f(this.blX,this.blY),new f(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale)}})},{"../util/struct_array":431,"../util/util":433,"./quads":392,"point-geometry":477}],398:[function(a,b,c){"use strict";var d=a("../util/dom"),e=a("point-geometry"),f={scrollZoom:a("./handler/scroll_zoom"),boxZoom:a("./handler/box_zoom"),dragRotate:a("./handler/drag_rotate"),dragPan:a("./handler/drag_pan"),keyboard:a("./handler/keyboard"),doubleClickZoom:a("./handler/dblclick_zoom"),touchZoomRotate:a("./handler/touch_zoom_rotate")};b.exports=function(a,b){function c(a){r("mouseout",a)}function g(b){a.stop(),v=d.mousePos(t,b),r("mousedown",b)}function h(b){var c=a.dragRotate&&a.dragRotate.isActive();u&&!c&&r("contextmenu",u),u=null,r("mouseup",b)}function i(b){if(!(a.dragPan&&a.dragPan.isActive()||a.dragRotate&&a.dragRotate.isActive())){for(var c=b.toElement||b.target;c&&c!==t;)c=c.parentNode;c===t&&r("mousemove",b)}}function j(b){a.stop(),s("touchstart",b),!b.touches||b.touches.length>1||(w?(clearTimeout(w),w=null,r("dblclick",b)):w=setTimeout(n,300))}function k(a){s("touchmove",a)}function l(a){s("touchend",a)}function m(a){s("touchcancel",a)}function n(){w=null}function o(a){d.mousePos(t,a).equals(v)&&r("click",a)}function p(a){r("dblclick",a),a.preventDefault()}function q(a){u=a,a.preventDefault()}function r(b,c){var e=d.mousePos(t,c);return a.fire(b,{lngLat:a.unproject(e),point:e,originalEvent:c})}function s(b,c){var f=d.touchPos(t,c),g=f.reduce(function(a,b,c,d){return a.add(b.div(d.length))},new e(0,0));return a.fire(b,{lngLat:a.unproject(g),point:g,lngLats:f.map(function(b){return a.unproject(b)},this),points:f,originalEvent:c})}var t=a.getCanvasContainer(),u=null,v=null,w=null;for(var x in f)a[x]=new f[x](a,b),b.interactive&&b[x]&&a[x].enable();t.addEventListener("mouseout",c,!1),t.addEventListener("mousedown",g,!1),t.addEventListener("mouseup",h,!1),t.addEventListener("mousemove",i,!1),t.addEventListener("touchstart",j,!1),t.addEventListener("touchend",l,!1),t.addEventListener("touchmove",k,!1),t.addEventListener("touchcancel",m,!1),t.addEventListener("click",o,!1),t.addEventListener("dblclick",p,!1),t.addEventListener("contextmenu",q,!1)}},{"../util/dom":419,"./handler/box_zoom":404,"./handler/dblclick_zoom":405,"./handler/drag_pan":406,"./handler/drag_rotate":407,"./handler/keyboard":408,"./handler/scroll_zoom":409,"./handler/touch_zoom_rotate":410,"point-geometry":477}],399:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/interpolate"),f=a("../util/browser"),g=a("../geo/lng_lat"),h=a("../geo/lng_lat_bounds"),i=a("point-geometry"),j=b.exports=function(){};d.extend(j.prototype,{getCenter:function(){return this.transform.center},setCenter:function(a,b){return this.jumpTo({center:a},b),this},panBy:function(a,b,c){return this.panTo(this.transform.center,d.extend({offset:i.convert(a).mult(-1)},b),c),this},panTo:function(a,b,c){return this.easeTo(d.extend({center:a},b),c)},getZoom:function(){return this.transform.zoom},setZoom:function(a,b){return this.jumpTo({zoom:a},b),this},zoomTo:function(a,b,c){return this.easeTo(d.extend({zoom:a},b),c)},zoomIn:function(a,b){return this.zoomTo(this.getZoom()+1,a,b),this},zoomOut:function(a,b){return this.zoomTo(this.getZoom()-1,a,b),this},getBearing:function(){return this.transform.bearing},setBearing:function(a,b){return this.jumpTo({bearing:a},b),this},rotateTo:function(a,b,c){return this.easeTo(d.extend({bearing:a},b),c)},resetNorth:function(a,b){return this.rotateTo(0,d.extend({duration:1e3},a),b),this},snapToNorth:function(a,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,b):this},getPitch:function(){return this.transform.pitch},setPitch:function(a,b){return this.jumpTo({pitch:a},b),this},fitBounds:function(a,b,c){b=d.extend({padding:0,offset:[0,0],maxZoom:1/0},b),a=h.convert(a);var e=i.convert(b.offset),f=this.transform,g=f.project(a.getNorthWest()),j=f.project(a.getSouthEast()),k=j.sub(g),l=(f.width-2*b.padding-2*Math.abs(e.x))/k.x,m=(f.height-2*b.padding-2*Math.abs(e.y))/k.y;return b.center=f.unproject(g.add(j).div(2)),b.zoom=Math.min(f.scaleZoom(f.scale*Math.min(l,m)),b.maxZoom),b.bearing=0,b.linear?this.easeTo(b,c):this.flyTo(b,c)},jumpTo:function(a,b){this.stop();var c=this.transform,d=!1,e=!1,f=!1;return"zoom"in a&&c.zoom!==+a.zoom&&(d=!0,c.zoom=+a.zoom),"center"in a&&(c.center=g.convert(a.center)),"bearing"in a&&c.bearing!==+a.bearing&&(e=!0,c.bearing=+a.bearing),"pitch"in a&&c.pitch!==+a.pitch&&(f=!0,c.pitch=+a.pitch),this.fire("movestart",b).fire("move",b),d&&this.fire("zoomstart",b).fire("zoom",b).fire("zoomend",b),e&&this.fire("rotate",b),f&&this.fire("pitch",b),this.fire("moveend",b)},easeTo:function(a,b){this.stop(),a=d.extend({offset:[0,0],duration:500,easing:d.ease},a);var c,f,h=this.transform,j=i.convert(a.offset),k=this.getZoom(),l=this.getBearing(),m=this.getPitch(),n="zoom"in a?+a.zoom:k,o="bearing"in a?this._normalizeBearing(a.bearing,l):l,p="pitch"in a?+a.pitch:m;"center"in a?(c=g.convert(a.center),f=h.centerPoint.add(j)):"around"in a?(c=g.convert(a.around),f=h.locationPoint(c)):(f=h.centerPoint.add(j),c=h.pointLocation(f));var q=h.locationPoint(c);return!1===a.animate&&(a.duration=0),this.zooming=n!==k,this.rotating=l!==o,this.pitching=p!==m,a.noMoveStart||this.fire("movestart",b),this.zooming&&this.fire("zoomstart",b),clearTimeout(this._onEaseEnd),this._ease(function(a){this.zooming&&(h.zoom=e(k,n,a)),this.rotating&&(h.bearing=e(l,o,a)),this.pitching&&(h.pitch=e(m,p,a)),h.setLocationAtPoint(c,q.add(f.sub(q)._mult(a))),this.fire("move",b),this.zooming&&this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){a.delayEndEvents?this._onEaseEnd=setTimeout(this._easeToEnd.bind(this,b),a.delayEndEvents):this._easeToEnd(b)}.bind(this),a),this},_easeToEnd:function(a){var b=this.zooming;this.zooming=!1,this.rotating=!1,this.pitching=!1,b&&this.fire("zoomend",a),this.fire("moveend",a)},flyTo:function(a,b){function c(a){var b=(z*z-y*y+(a?-1:1)*D*D*A*A)/(2*(a?z:y)*D*A);return Math.log(Math.sqrt(b*b+1)-b)}function f(a){return(Math.exp(a)-Math.exp(-a))/2}function h(a){return(Math.exp(a)+Math.exp(-a))/2}function j(a){return f(a)/h(a)}this.stop(),a=d.extend({offset:[0,0],speed:1.2,curve:1.42,easing:d.ease},a);var k=this.transform,l=i.convert(a.offset),m=this.getZoom(),n=this.getBearing(),o=this.getPitch(),p="center"in a?g.convert(a.center):this.getCenter(),q="zoom"in a?+a.zoom:m,r="bearing"in a?this._normalizeBearing(a.bearing,n):n,s="pitch"in a?+a.pitch:o;Math.abs(k.center.lng)+Math.abs(p.lng)>180&&(k.center.lng>0&&p.lng<0?p.lng+=360:k.center.lng<0&&p.lng>0&&(p.lng-=360));var t=k.zoomScale(q-m),u=k.point,v="center"in a?k.project(p).sub(l.div(t)):u,w=k.worldSize,x=a.curve,y=Math.max(k.width,k.height),z=y/t,A=v.sub(u).mag();if("minZoom"in a){var B=d.clamp(Math.min(a.minZoom,m,q),k.minZoom,k.maxZoom),C=y/k.zoomScale(B-m);x=Math.sqrt(C/A*2)}var D=x*x,E=c(0),F=function(a){return h(E)/h(E+x*a)},G=function(a){return y*((h(E)*j(E+x*a)-f(E))/D)/A},H=(c(1)-E)/x;if(Math.abs(A)<1e-6){if(Math.abs(y-z)<1e-6)return this.easeTo(a);var I=z<y?-1:1;H=Math.abs(Math.log(z/y))/x,G=function(){return 0},F=function(a){return Math.exp(I*x*a)}}if("duration"in a)a.duration=+a.duration;else{var J="screenSpeed"in a?+a.screenSpeed/x:+a.speed;a.duration=1e3*H/J}return this.zooming=!0,n!==r&&(this.rotating=!0),o!==s&&(this.pitching=!0),this.fire("movestart",b),this.fire("zoomstart",b),this._ease(function(a){var c=a*H,d=G(c);k.zoom=m+k.scaleZoom(1/F(c)),k.center=k.unproject(u.add(v.sub(u).mult(d)),w),this.rotating&&(k.bearing=e(n,r,a)),this.pitching&&(k.pitch=e(o,s,a)),this.fire("move",b),this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",b),this.fire("moveend",b)},a),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},_ease:function(a,b,c){this._finishFn=b,this._abortFn=f.timed(function(b){a.call(this,c.easing(b)),1===b&&this._finishEase()},!1===c.animate?0:c.duration,this)},_finishEase:function(){delete this._abortFn;var a=this._finishFn;delete this._finishFn,a.call(this)},_normalizeBearing:function(a,b){a=d.wrap(a,-180,180);var c=Math.abs(a-b);return Math.abs(a-360-b)<c&&(a-=360),Math.abs(a+360-b)<c&&(a+=360),a},_updateEasing:function(a,b,c){var e;if(this.ease){var f=this.ease,g=(Date.now()-f.start)/f.duration,h=f.easing(g+.01)-f.easing(g),i=.27/Math.sqrt(h*h+1e-4)*.01,j=Math.sqrt(.0729-i*i);e=d.bezier(i,j,.25,1)}else e=c?d.bezier.apply(d,c):d.ease;return this.ease={start:(new Date).getTime(),to:Math.pow(2,b),duration:a,easing:e},e}})},{"../geo/lng_lat":330,"../geo/lng_lat_bounds":331,"../util/browser":417,"../util/interpolate":427,"../util/util":433,"point-geometry":477}],400:[function(a,b,c){"use strict";function d(a){g.setOptions(this,a)}var e=a("./control"),f=a("../../util/dom"),g=a("../../util/util");b.exports=d,d.createAttributionString=function(a){var b=[];for(var c in a){var d=a[c];d.attribution&&b.indexOf(d.attribution)<0&&b.push(d.attribution)}return b.sort(function(a,b){return a.length-b.length}),b=b.filter(function(a,c){for(var d=c+1;d<b.length;d++)if(b[d].indexOf(a)>=0)return!1;return!0}),b.join(" | ")},d.prototype=g.inherit(e,{options:{position:"bottom-right"},onAdd:function(a){var b=this._container=f.create("div","mapboxgl-ctrl-attrib",a.getContainer());return this._update(),a.on("source.load",this._update.bind(this)),a.on("source.change",this._update.bind(this)),a.on("source.remove",this._update.bind(this)),a.on("moveend",this._updateEditLink.bind(this)),b},_update:function(){this._map.style&&(this._container.innerHTML=d.createAttributionString(this._map.style.sources)),this._editLink=this._container.getElementsByClassName("mapbox-improve-map")[0],this._updateEditLink()},_updateEditLink:function(){if(this._editLink){var a=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+a.lng+"/"+a.lat+"/"+Math.round(this._map.getZoom()+1)}}})},{"../../util/dom":419,"../../util/util":433,"./control":401}],401:[function(a,b,c){"use strict";function d(){}var e=a("../../util/util"),f=a("../../util/evented");b.exports=d,d.prototype={addTo:function(a){this._map=a;var b=this._container=this.onAdd(a);if(this.options&&this.options.position){var c=this.options.position,d=a._controlCorners[c];b.className+=" mapboxgl-ctrl",-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}},e.extend(d.prototype,f)},{"../../util/evented":425,"../../util/util":433}],402:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}var e=a("./control"),f=a("../../util/browser"),g=a("../../util/dom"),h=a("../../util/util");b.exports=d;var i={enableHighAccuracy:!1,timeout:6e3};d.prototype=h.inherit(e,{options:{position:"top-right"},onAdd:function(a){var b=this._container=g.create("div","mapboxgl-ctrl-group",a.getContainer());return f.supportsGeolocation?(this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._geolocateButton=g.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),b):b},_onContextMenu:function(a){a.preventDefault()},_onClickGeolocate:function(){navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this),i),this._timeoutId=setTimeout(this._finish.bind(this),1e4)},_success:function(a){this._map.jumpTo({center:[a.coords.longitude,a.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",a),this._finish()},_error:function(a){this.fire("error",a),this._finish()},_finish:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}})},{"../../util/browser":417,"../../util/dom":419,"../../util/util":433,"./control":401}],403:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}function e(a){return new MouseEvent(a.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:a.detail,view:a.view,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY,movementX:a.movementX,movementY:a.movementY,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,altKey:a.altKey,metaKey:a.metaKey})}var f=a("./control"),g=a("../../util/dom"),h=a("../../util/util");b.exports=d,d.prototype=h.inherit(f,{options:{position:"top-right"},onAdd:function(a){var b="mapboxgl-ctrl",c=this._container=g.create("div",b+"-group",a.getContainer());return this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(b+"-icon "+b+"-zoom-in",a.zoomIn.bind(a)),this._zoomOutButton=this._createButton(b+"-icon "+b+"-zoom-out",a.zoomOut.bind(a)),this._compass=this._createButton(b+"-icon "+b+"-compass",a.resetNorth.bind(a)),this._compassArrow=g.create("div","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),
a.on("rotate",this._rotateCompassArrow.bind(this)),this._rotateCompassArrow(),this._el=a.getCanvasContainer(),c},_onContextMenu:function(a){a.preventDefault()},_onCompassDown:function(a){0===a.button&&(g.disableDrag(),document.addEventListener("mousemove",this._onCompassMove),document.addEventListener("mouseup",this._onCompassUp),this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassMove:function(a){0===a.button&&(this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassUp:function(a){0===a.button&&(document.removeEventListener("mousemove",this._onCompassMove),document.removeEventListener("mouseup",this._onCompassUp),g.enableDrag(),this._el.dispatchEvent(e(a)),a.stopPropagation())},_createButton:function(a,b){var c=g.create("button",a,this._container);return c.type="button",c.addEventListener("click",function(){b()}),c},_rotateCompassArrow:function(){var a="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=a}})},{"../../util/dom":419,"../../util/util":433,"./control":401}],404:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),g.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../geo/lng_lat_bounds"),g=a("../../util/util");b.exports=d,d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},_onMouseDown:function(a){a.shiftKey&&0===a.button&&(document.addEventListener("mousemove",this._onMouseMove,!1),document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("mouseup",this._onMouseUp,!1),e.disableDrag(),this._startPos=e.mousePos(this._el,a),this._active=!0)},_onMouseMove:function(a){var b=this._startPos,c=e.mousePos(this._el,a);this._box||(this._box=e.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));var d=Math.min(b.x,c.x),f=Math.max(b.x,c.x),g=Math.min(b.y,c.y),h=Math.max(b.y,c.y);e.setTransform(this._box,"translate("+d+"px,"+g+"px)"),this._box.style.width=f-d+"px",this._box.style.height=h-g+"px"},_onMouseUp:function(a){if(0===a.button){var b=this._startPos,c=e.mousePos(this._el,a),d=new f(this._map.unproject(b),this._map.unproject(c));this._finish(),b.x===c.x&&b.y===c.y?this._fireEvent("boxzoomcancel",a):this._map.fitBounds(d,{linear:!0}).fire("boxzoomend",{originalEvent:a,boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",a))},_finish:function(){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!1),document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),e.enableDrag()},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})}}},{"../../geo/lng_lat_bounds":331,"../../util/dom":419,"../../util/util":433}],405:[function(a,b,c){"use strict";function d(a){this._map=a,this._onDblClick=this._onDblClick.bind(this)}b.exports=d,d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},_onDblClick:function(a){this._map.zoomTo(this._map.getZoom()+(a.originalEvent.shiftKey?-1:1),{around:a.lngLat},a)}}},{}],406:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util");b.exports=d;var g=f.bezier(0,0,.3,1);d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},_onDown:function(a){this._ignoreEvent(a)||this.isActive()||(a.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=e.mousePos(this._el,a),this._inertia=[[Date.now(),this._pos]])},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",a),this._fireEvent("movestart",a));var b=e.mousePos(this._el,a),c=this._map;c.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),b]),c.transform.setLocationAtPoint(c.transform.pointLocation(this._pos),b),this._fireEvent("drag",a),this._fireEvent("move",a),this._pos=b,a.preventDefault()}},_onUp:function(a){if(this.isActive()){this._active=!1,this._fireEvent("dragend",a),this._drainInertiaBuffer();var b=function(){this._fireEvent("moveend",a)}.bind(this),c=this._inertia;if(c.length<2)return void b();var d=c[c.length-1],e=c[0],f=d[1].sub(e[1]),h=(d[0]-e[0])/1e3;if(0===h||d[1].equals(e[1]))return void b();var i=f.mult(.3/h),j=i.mag();j>1400&&(j=1400,i._unit()._mult(j));var k=j/750,l=i.mult(-k/2);this._map.panBy(l,{duration:1e3*k,easing:g,noMoveStart:!0},{originalEvent:a})}},_onMouseUp:function(a){this._ignoreEvent(a)||(this._onUp(a),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp))},_onTouchEnd:function(a){this._ignoreEvent(a)||(this._onUp(a),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd))},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragRotate&&b.dragRotate.isActive())return!0;if(a.touches)return a.touches.length>1;if(a.ctrlKey)return!0;return"mousemove"===a.type?!1&a.buttons:0!==a.button},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now();a.length>0&&b-a[0][0]>160;)a.shift()}}},{"../../util/dom":419,"../../util/util":433}],407:[function(a,b,c){"use strict";function d(a,b){this._map=a,this._el=a.getCanvasContainer(),this._bearingSnap=b.bearingSnap,g.bindHandlers(this)}var e=a("../../util/dom"),f=a("point-geometry"),g=a("../../util/util");b.exports=d;var h=g.bezier(0,0,.25,1);d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},_onDown:function(a){if(!this._ignoreEvent(a)&&!this.isActive()){document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=e.mousePos(this._el,a),this._center=this._map.transform.centerPoint;var b=this._startPos.sub(this._center);b.mag()<200&&(this._center=this._startPos.add(new f(-200,0)._rotate(b.angle()))),a.preventDefault()}},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",a),this._fireEvent("movestart",a));var b=this._map;b.stop();var c=this._pos,d=e.mousePos(this._el,a),f=this._center,g=c.sub(f).angleWith(d.sub(f))/Math.PI*180,h=b.getBearing()-g,i=this._inertia,j=i[i.length-1];this._drainInertiaBuffer(),i.push([Date.now(),b._normalizeBearing(h,j[1])]),b.transform.bearing=h,this._fireEvent("rotate",a),this._fireEvent("move",a),this._pos=d}},_onUp:function(a){if(!this._ignoreEvent(a)&&(document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",a),this._drainInertiaBuffer();var b=this._map,c=b.getBearing(),d=this._inertia,e=function(){Math.abs(c)<this._bearingSnap?b.resetNorth({noMoveStart:!0},{originalEvent:a}):this._fireEvent("moveend",a)}.bind(this);if(d.length<2)return void e();var f=d[0],g=d[d.length-1],i=d[d.length-2],j=b._normalizeBearing(c,i[1]),k=g[1]-f[1],l=k<0?-1:1,m=(g[0]-f[0])/1e3;if(0===k||0===m)return void e();var n=Math.abs(k*(.25/m));n>180&&(n=180);var o=n/180;j+=l*n*(o/2),Math.abs(b._normalizeBearing(j,0))<this._bearingSnap&&(j=b._normalizeBearing(0,j)),b.rotateTo(j,{duration:1e3*o,easing:h,noMoveStart:!0},{originalEvent:a})}},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragPan&&b.dragPan.isActive())return!0;if(a.touches)return a.touches.length>1;var c=a.ctrlKey?1:2,d=a.ctrlKey?0:2;return"mousemove"===a.type?a.buttons&0===c:a.button!==d},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now();a.length>0&&b-a[0][0]>160;)a.shift()}}},{"../../util/dom":419,"../../util/util":433,"point-geometry":477}],408:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)}b.exports=d;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b=this._map,c={originalEvent:a};if(!b.isEasing())switch(a.keyCode){case 61:case 107:case 171:case 187:b.zoomTo(Math.round(b.getZoom())+(a.shiftKey?2:1),c);break;case 189:case 109:case 173:b.zoomTo(Math.round(b.getZoom())-(a.shiftKey?2:1),c);break;case 37:a.shiftKey?b.easeTo({bearing:b.getBearing()-2},c):(a.preventDefault(),b.panBy([-80,0],c));break;case 39:a.shiftKey?b.easeTo({bearing:b.getBearing()+2},c):(a.preventDefault(),b.panBy([80,0],c));break;case 38:a.shiftKey?b.easeTo({pitch:b.getPitch()+5},c):(a.preventDefault(),b.panBy([0,-80],c));break;case 40:a.shiftKey?b.easeTo({pitch:Math.max(b.getPitch()-5,0)},c):(a.preventDefault(),b.panBy([0,80],c))}}}}},{}],409:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),g.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/browser"),g=a("../../util/util");b.exports=d;var h="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=-1!==h.indexOf("firefox"),j=-1!==h.indexOf("safari")&&-1===h.indexOf("chrom");d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},_onWheel:function(a){var b;"wheel"===a.type?(b=a.deltaY,i&&a.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(b/=f.devicePixelRatio),a.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(b*=40)):"mousewheel"===a.type&&(b=-a.wheelDeltaY,j&&(b/=3));var c=f.now(),d=c-(this._time||0);this._pos=e.mousePos(this._el,a),this._time=c,0!==b&&b%4.000244140625==0?(this._type="wheel",b=Math.floor(b/4)):0!==b&&Math.abs(b)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=b,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(d*b)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,b+=this._lastValue)),a.shiftKey&&b&&(b/=4),this._type&&this._zoom(-b,a),a.preventDefault()},_onTimeout:function(){this._type="wheel",this._zoom(-this._lastValue)},_zoom:function(a,b){if(0!==a){var c=this._map,d=2/(1+Math.exp(-Math.abs(a/100)));a<0&&0!==d&&(d=1/d);var e=c.ease?c.ease.to:c.transform.scale,f=c.transform.scaleZoom(e*d);c.zoomTo(f,{duration:0,around:c.unproject(this._pos),delayEndEvents:200},{originalEvent:b})}}}},{"../../util/browser":417,"../../util/dom":419,"../../util/util":433}],410:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util");b.exports=d;var g=f.bezier(0,0,.15,1);d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},disableRotation:function(){this._rotationDisabled=!0},enableRotation:function(){this._rotationDisabled=!1},_onStart:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]);this._startVec=b.sub(c),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],document.addEventListener("touchmove",this._onMove,!1),document.addEventListener("touchend",this._onEnd,!1)}},_onMove:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]),d=b.add(c).div(2),f=b.sub(c),g=f.mag()/this._startVec.mag(),h=this._rotationDisabled?0:180*f.angleWith(this._startVec)/Math.PI,i=this._map;if(this._gestureIntent){var j={duration:0,around:i.unproject(d)};"rotate"===this._gestureIntent&&(j.bearing=this._startBearing+h),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(j.zoom=i.transform.scaleZoom(this._startScale*g)),i.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),g,d]),i.easeTo(j,{originalEvent:a})}else{var k=Math.abs(1-g)>.15;Math.abs(h)>4?this._gestureIntent="rotate":k&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=f,this._startScale=i.transform.scale,this._startBearing=i.transform.bearing)}a.preventDefault()}},_onEnd:function(a){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var b=this._inertia,c=this._map;if(b.length<2)return void c.snapToNorth({},{originalEvent:a});var d=b[b.length-1],e=b[0],f=c.transform.scaleZoom(this._startScale*d[1]),h=c.transform.scaleZoom(this._startScale*e[1]),i=f-h,j=(d[0]-e[0])/1e3,k=d[2];if(0===j||f===h)return void c.snapToNorth({},{originalEvent:a});var l=.15*i/j;Math.abs(l)>2.5&&(l=l>0?2.5:-2.5);var m=1e3*Math.abs(l/(12*.15)),n=f+l*m/2e3;n<0&&(n=0),c.easeTo({zoom:n,duration:m,easing:g,around:c.unproject(k)},{originalEvent:a})},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now();a.length>2&&b-a[0][0]>160;)a.shift()}}},{"../../util/dom":419,"../../util/util":433}],411:[function(a,b,c){"use strict";function d(){e.bindAll(["_onHashChange","_updateHash"],this)}b.exports=d;var e=a("../util/util");d.prototype={addTo:function(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},remove:function(){return window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},_onHashChange:function(){var a=location.hash.replace("#","").split("/");return a.length>=3&&(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||0)}),!0)},_updateHash:function(){var a=this._map.getCenter(),b=this._map.getZoom(),c=this._map.getBearing(),d=Math.max(0,Math.ceil(Math.log(b)/Math.LN2)),e="#"+Math.round(100*b)/100+"/"+a.lat.toFixed(d)+"/"+a.lng.toFixed(d)+(c?"/"+Math.round(10*c)/10:"");window.history.replaceState("","",e)}}},{"../util/util":433}],412:[function(a,b,c){"use strict";function d(a){a.parentNode&&a.parentNode.removeChild(a)}var e=a("../util/canvas"),f=a("../util/util"),g=a("../util/browser"),h=a("../util/browser").window,i=a("../util/evented"),j=a("../util/dom"),k=a("../style/style"),l=a("../style/animation_loop"),m=a("../render/painter"),n=a("../geo/transform"),o=a("./hash"),p=a("./bind_handlers"),q=a("./camera"),r=a("../geo/lng_lat"),s=a("../geo/lng_lat_bounds"),t=a("point-geometry"),u=a("./control/attribution"),v={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:20,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,workerCount:Math.max(g.hardwareConcurrency-1,1)},w=b.exports=function(a){if(a=f.extend({},v,a),a.workerCount<1)throw new Error("workerCount must an integer greater than or equal to 1.");this._interactive=a.interactive,this._failIfMajorPerformanceCaveat=a.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=a.preserveDrawingBuffer,this._trackResize=a.trackResize,this._workerCount=a.workerCount,this._bearingSnap=a.bearingSnap,"string"==typeof a.container?this._container=document.getElementById(a.container):this._container=a.container,this.animationLoop=new l,this.transform=new n(a.minZoom,a.maxZoom),a.maxBounds&&this.setMaxBounds(a.maxBounds),f.bindAll(["_forwardStyleEvent","_forwardSourceEvent","_forwardLayerEvent","_forwardTileEvent","_onStyleLoad","_onStyleChange","_onSourceAdd","_onSourceRemove","_onSourceUpdate","_onWindowOnline","_onWindowResize","_update","_render"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){this.animationLoop.set(300),this._rerender()}.bind(this)),void 0!==h&&(h.addEventListener("online",this._onWindowOnline,!1),h.addEventListener("resize",this._onWindowResize,!1)),p(this,a),this._hash=a.hash&&(new o).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),this.stacks={},this._classes=[],this.resize(),a.classes&&this.setClasses(a.classes),a.style&&this.setStyle(a.style),a.attributionControl&&this.addControl(new u(a.attributionControl));var b=this.fire.bind(this,"error");this.on("style.error",b),this.on("source.error",b),this.on("tile.error",b),this.on("layer.error",b)};f.extend(w.prototype,i),f.extend(w.prototype,q.prototype),f.extend(w.prototype,{addControl:function(a){return a.addTo(this),this},addClass:function(a,b){return this._classes.indexOf(a)>=0||""===a?this:(this._classes.push(a),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},removeClass:function(a,b){var c=this._classes.indexOf(a);return c<0||""===a?this:(this._classes.splice(c,1),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},setClasses:function(a,b){for(var c={},d=0;d<a.length;d++)""!==a[d]&&(c[a[d]]=!0);return this._classes=Object.keys(c),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0)},hasClass:function(a){return this._classes.indexOf(a)>=0},getClasses:function(){return this._classes},resize:function(){var a=0,b=0;return this._container&&(a=this._container.offsetWidth||400,b=this._container.offsetHeight||300),this._canvas.resize(a,b),this.transform.resize(a,b),this.painter.resize(a,b),this.fire("movestart").fire("move").fire("resize").fire("moveend")},getBounds:function(){var a=new s(this.transform.pointLocation(new t(0,0)),this.transform.pointLocation(this.transform.size));return(this.transform.angle||this.transform.pitch)&&(a.extend(this.transform.pointLocation(new t(this.transform.size.x,0))),a.extend(this.transform.pointLocation(new t(0,this.transform.size.y)))),a},setMaxBounds:function(a){if(a){var b=s.convert(a);this.transform.lngRange=[b.getWest(),b.getEast()],this.transform.latRange=[b.getSouth(),b.getNorth()],this.transform._constrain(),this._update()}else null!==a&&void 0!==a||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},setMinZoom:function(a){if((a=null===a||void 0===a?0:a)>=0&&a<=this.transform.maxZoom)return this.transform.minZoom=a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},setMaxZoom:function(a){if((a=null===a||void 0===a?20:a)>=this.transform.minZoom&&a<=20)return this.transform.maxZoom=a,this._update(),this.getZoom()>a&&this.setZoom(a),this;throw new Error("maxZoom must be between the current minZoom and 20, inclusive")},project:function(a){return this.transform.locationPoint(r.convert(a))},unproject:function(a){return this.transform.pointLocation(t.convert(a))},queryRenderedFeatures:function(){var a,b={};return 2===arguments.length?(a=arguments[0],b=arguments[1]):1===arguments.length&&function(a){return a instanceof t||Array.isArray(a)}(arguments[0])?a=arguments[0]:1===arguments.length&&(b=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(a),b,this.transform.zoom,this.transform.angle)},_makeQueryGeometry:function(a){void 0===a&&(a=[t.convert([0,0]),t.convert([this.transform.width,this.transform.height])]);var b;if(a instanceof t||"number"==typeof a[0])b=[t.convert(a)];else{var c=[t.convert(a[0]),t.convert(a[1])];b=[c[0],new t(c[1].x,c[0].y),c[1],new t(c[0].x,c[1].y),c[0]]}return b=b.map(function(a){return this.transform.pointCoordinate(a)}.bind(this))},querySourceFeatures:function(a,b){return this.style.querySourceFeatures(a,b)},setStyle:function(a){return this.style&&(this.style.off("load",this._onStyleLoad).off("error",this._forwardStyleEvent).off("change",this._onStyleChange).off("source.add",this._onSourceAdd).off("source.remove",this._onSourceRemove).off("source.load",this._onSourceUpdate).off("source.error",this._forwardSourceEvent).off("source.change",this._onSourceUpdate).off("layer.add",this._forwardLayerEvent).off("layer.remove",this._forwardLayerEvent).off("layer.error",this._forwardLayerEvent).off("tile.add",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.load",this._update).off("tile.error",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent)._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),a?(this.style=a instanceof k?a:new k(a,this.animationLoop,this._workerCount),this.style.on("load",this._onStyleLoad).on("error",this._forwardStyleEvent).on("change",this._onStyleChange).on("source.add",this._onSourceAdd).on("source.remove",this._onSourceRemove).on("source.load",this._onSourceUpdate).on("source.error",this._forwardSourceEvent).on("source.change",this._onSourceUpdate).on("layer.add",this._forwardLayerEvent).on("layer.remove",this._forwardLayerEvent).on("layer.error",this._forwardLayerEvent).on("tile.add",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.load",this._update).on("tile.error",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},getStyle:function(){if(this.style)return this.style.serialize()},addSource:function(a,b){return this.style.addSource(a,b),this._update(!0),this},addSourceType:function(a,b,c){return this.style.addSourceType(a,b,c)},removeSource:function(a){return this.style.removeSource(a),this._update(!0),this},getSource:function(a){return this.style.getSource(a)},addLayer:function(a,b){return this.style.addLayer(a,b),this._update(!0),this},removeLayer:function(a){return this.style.removeLayer(a),this._update(!0),this},getLayer:function(a){return this.style.getLayer(a)},setFilter:function(a,b){return this.style.setFilter(a,b),this._update(!0),this},setLayerZoomRange:function(a,b,c){return this.style.setLayerZoomRange(a,b,c),this._update(!0),this},getFilter:function(a){return this.style.getFilter(a)},setPaintProperty:function(a,b,c,d){return this.style.setPaintProperty(a,b,c,d),this._update(!0),this},getPaintProperty:function(a,b,c){return this.style.getPaintProperty(a,b,c)},setLayoutProperty:function(a,b,c){return this.style.setLayoutProperty(a,b,c),this._update(!0),this},getLayoutProperty:function(a,b){return this.style.getLayoutProperty(a,b)},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas.getElement()},_setupContainer:function(){var a=this._container;a.classList.add("mapboxgl-map");var b=this._canvasContainer=j.create("div","mapboxgl-canvas-container",a);this._interactive&&b.classList.add("mapboxgl-interactive"),this._canvas=new e(this,b);var c=this._controlContainer=j.create("div","mapboxgl-control-container",a),d=this._controlCorners={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(a){d[a]=j.create("div","mapboxgl-ctrl-"+a,c)})},_setupPainter:function(){var a=this._canvas.getWebGLContext({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer});if(!a)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new m(a,this.transform)},_contextLost:function(a){a.preventDefault(),this._frameId&&g.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:a})},_contextRestored:function(a){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:a})},loaded:function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},_update:function(a){return this.style?(this._styleDirty=this._styleDirty||a,this._sourcesDirty=!0,this._rerender(),this):this},_render:function(){try{this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender()}catch(a){this.fire("error",{error:a})}return this},remove:function(){this._hash&&this._hash.remove(),g.cancelFrame(this._frameId),this.setStyle(null),void 0!==h&&h.removeEventListener("resize",this._onWindowResize,!1);var a=this.painter.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),d(this._canvasContainer),d(this._controlContainer),this._container.classList.remove("mapboxgl-map")},_rerender:function(){this.style&&!this._frameId&&(this._frameId=g.frame(this._render))},_forwardStyleEvent:function(a){this.fire("style."+a.type,f.extend({style:a.target},a))},_forwardSourceEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_forwardLayerEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_forwardTileEvent:function(a){this.fire(a.type,f.extend({style:a.target},a))},_onStyleLoad:function(a){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1}),this._forwardStyleEvent(a)},_onStyleChange:function(a){this._update(!0),this._forwardStyleEvent(a)},_onSourceAdd:function(a){var b=a.source;b.onAdd&&b.onAdd(this),this._forwardSourceEvent(a)},_onSourceRemove:function(a){var b=a.source;b.onRemove&&b.onRemove(this),this._forwardSourceEvent(a)},_onSourceUpdate:function(a){this._update(),this._forwardSourceEvent(a)},_onWindowOnline:function(){this._update()},_onWindowResize:function(){this._trackResize&&this.stop().resize()._update()}}),f.extendAll(w.prototype,{_showTileBoundaries:!1,get showTileBoundaries(){return this._showTileBoundaries},set showTileBoundaries(a){this._showTileBoundaries!==a&&(this._showTileBoundaries=a,this._update())},_showCollisionBoxes:!1,get showCollisionBoxes(){return this._showCollisionBoxes},set showCollisionBoxes(a){this._showCollisionBoxes!==a&&(this._showCollisionBoxes=a,this.style._redoPlacement())},_showOverdrawInspector:!1,get showOverdrawInspector(){return this._showOverdrawInspector},set showOverdrawInspector(a){this._showOverdrawInspector!==a&&(this._showOverdrawInspector=a,this._update())},_repaint:!1,get repaint(){return this._repaint},set repaint(a){this._repaint=a,this._update()},_vertices:!1,get vertices(){return this._vertices},set vertices(a){this._vertices=a,this._update()}})},{"../geo/lng_lat":330,"../geo/lng_lat_bounds":331,"../geo/transform":332,"../render/painter":346,"../style/animation_loop":366,"../style/style":369,"../util/browser":417,"../util/canvas":418,"../util/dom":419,"../util/evented":425,"../util/util":433,"./bind_handlers":398,"./camera":399,"./control/attribution":400,"./hash":411,"point-geometry":477}],413:[function(a,b,c){"use strict";function d(a,b){a||(a=e.create("div")),a.classList.add("mapboxgl-marker"),this._el=a,this._offset=g.convert(b&&b.offset||[0,0]),this._update=this._update.bind(this)}b.exports=d;var e=a("../util/dom"),f=a("../geo/lng_lat"),g=a("point-geometry");d.prototype={addTo:function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._el),a.on("move",this._update),this._update(),this},remove:function(){this._map&&(this._map.off("move",this._update),this._map=null);var a=this._el.parentNode;return a&&a.removeChild(this._el),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=f.convert(a),this._update(),this},getElement:function(){return this._el},_update:function(){if(this._map){var a=this._map.project(this._lngLat)._add(this._offset);e.setTransform(this._el,"translate("+a.x+"px,"+a.y+"px)")}}}},{"../geo/lng_lat":330,"../util/dom":419,"point-geometry":477}],414:[function(a,b,c){"use strict";function d(a){e.setOptions(this,a),e.bindAll(["_update","_onClickClose"],this)}b.exports=d;var e=a("../util/util"),f=a("../util/evented"),g=a("../util/dom"),h=a("../geo/lng_lat");d.prototype=e.inherit(f,{options:{closeButton:!0,closeOnClick:!0},addTo:function(a){return this._map=a,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},remove:function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=h.convert(a),this._update(),this},setText:function(a){return this.setDOMContent(document.createTextNode(a))},setHTML:function(a){var b,c=document.createDocumentFragment(),d=document.createElement("body");for(d.innerHTML=a;;){if(!(b=d.firstChild))break;c.appendChild(b)}return this.setDOMContent(c)},setDOMContent:function(a){return this._createContent(),this._content.appendChild(a),this._update(),this},_createContent:function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=g.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=g.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},_update:function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=g.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","mapboxgl-popup-tip",this._container),
this._container.appendChild(this._content));var a=this._map.project(this._lngLat).round(),b=this.options.anchor;if(!b){var c=this._container.offsetWidth,d=this._container.offsetHeight;b=a.y<d?["top"]:a.y>this._map.transform.height-d?["bottom"]:[],a.x<c/2?b.push("left"):a.x>this._map.transform.width-c/2&&b.push("right"),b=0===b.length?"bottom":b.join("-")}var e={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},f=this._container.classList;for(var h in e)f.remove("mapboxgl-popup-anchor-"+h);f.add("mapboxgl-popup-anchor-"+b),g.setTransform(this._container,e[b]+" translate("+a.x+"px,"+a.y+"px)")}},_onClickClose:function(){this.remove()}})},{"../geo/lng_lat":330,"../util/dom":419,"../util/evented":425,"../util/util":433}],415:[function(a,b,c){"use strict";function d(a,b){this.target=a,this.parent=b,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)}b.exports=d,d.prototype.receive=function(a){function b(a,b,c){this.postMessage({type:"<response>",id:String(e),error:a?String(a):null,data:b},c)}var c,d=a.data,e=d.id;if("<response>"===d.type)c=this.callbacks[d.id],delete this.callbacks[d.id],c&&c(d.error||null,d.data);else if(void 0!==d.id&&this.parent[d.type])this.parent[d.type](d.data,b.bind(this));else if(void 0!==d.id&&this.parent.workerSources){var f=d.type.split(".");this.parent.workerSources[f[0]][f[1]](d.data,b.bind(this))}else this.parent[d.type](d.data)},d.prototype.send=function(a,b,c,d){var e=null;c&&(this.callbacks[e=this.callbackID++]=c),this.postMessage({type:a,id:String(e),data:b},d)},d.prototype.postMessage=function(a,b){this.target.postMessage(a,b)}},{}],416:[function(a,b,c){"use strict";function d(a){var b=document.createElement("a");return b.href=a,b.protocol===document.location.protocol&&b.host===document.location.host}c.getJSON=function(a,b){var c=new XMLHttpRequest;return c.open("GET",a,!0),c.setRequestHeader("Accept","application/json"),c.onerror=function(a){b(a)},c.onload=function(){if(c.status>=200&&c.status<300&&c.response){var a;try{a=JSON.parse(c.response)}catch(a){return b(a)}b(null,a)}else b(new Error(c.statusText))},c.send(),c},c.getArrayBuffer=function(a,b){var c=new XMLHttpRequest;return c.open("GET",a,!0),c.responseType="arraybuffer",c.onerror=function(a){b(a)},c.onload=function(){c.status>=200&&c.status<300&&c.response?b(null,c.response):b(new Error(c.statusText))},c.send(),c},c.getImage=function(a,b){return c.getArrayBuffer(a,function(a,c){if(a)return b(a);var d=new Image;d.onload=function(){b(null,d),(window.URL||window.webkitURL).revokeObjectURL(d.src)};var e=new Blob([new Uint8Array(c)],{type:"image/png"});return d.src=(window.URL||window.webkitURL).createObjectURL(e),d.getData=function(){var a=document.createElement("canvas"),b=a.getContext("2d");return a.width=d.width,a.height=d.height,b.drawImage(d,0,0),b.getImageData(0,0,d.width,d.height).data},d})},c.getVideo=function(a,b){var c=document.createElement("video");c.onloadstart=function(){b(null,c)};for(var e=0;e<a.length;e++){var f=document.createElement("source");d(a[e])||(c.crossOrigin="Anonymous"),f.src=a[e],c.appendChild(f)}return c.getData=function(){return c},c}},{}],417:[function(a,b,c){"use strict";c.window=window,b.exports.now=function(){return window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date)}();var d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;c.frame=function(a){return d(a)};var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;c.cancelFrame=function(a){e(a)},c.timed=function(a,d,e){function f(i){g||(i=b.exports.now(),i>=h+d?a.call(e,1):(a.call(e,(i-h)/d),c.frame(f)))}if(!d)return a.call(e,1),null;var g=!1,h=b.exports.now();return c.frame(f),function(){g=!0}},c.supported=a("mapbox-gl-supported"),c.hardwareConcurrency=navigator.hardwareConcurrency||4,Object.defineProperty(c,"devicePixelRatio",{get:function(){return window.devicePixelRatio}}),c.supportsWebp=!1;var f=document.createElement("img");f.onload=function(){c.supportsWebp=!0},f.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",c.supportsGeolocation=!!navigator.geolocation},{"mapbox-gl-supported":318}],418:[function(a,b,c){"use strict";function d(a,b){this.canvas=document.createElement("canvas"),a&&b&&(this.canvas.style.position="absolute",this.canvas.classList.add("mapboxgl-canvas"),this.canvas.addEventListener("webglcontextlost",a._contextLost.bind(a),!1),this.canvas.addEventListener("webglcontextrestored",a._contextRestored.bind(a),!1),this.canvas.setAttribute("tabindex",0),b.appendChild(this.canvas))}var e=a("../util"),f=a("mapbox-gl-supported");b.exports=d,d.prototype.resize=function(a,b){var c=window.devicePixelRatio||1;this.canvas.width=c*a,this.canvas.height=c*b,this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"},d.prototype.getWebGLContext=function(a){return a=e.extend({},a,f.webGLContextAttributes),this.canvas.getContext("webgl",a)||this.canvas.getContext("experimental-webgl",a)},d.prototype.getElement=function(){return this.canvas}},{"../util":433,"mapbox-gl-supported":318}],419:[function(a,b,c){"use strict";function d(a){for(var b=0;b<a.length;b++)if(a[b]in h)return a[b]}function e(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",e,!0)}var f=a("point-geometry");c.create=function(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c&&c.appendChild(d),d};var g,h=document.documentElement.style,i=d(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);c.disableDrag=function(){i&&(g=h[i],h[i]="none")},c.enableDrag=function(){i&&(h[i]=g)};var j=d(["transform","WebkitTransform"]);c.setTransform=function(a,b){a.style[j]=b},c.suppressClick=function(){window.addEventListener("click",e,!0),window.setTimeout(function(){window.removeEventListener("click",e,!0)},0)},c.mousePos=function(a,b){var c=a.getBoundingClientRect();return b=b.touches?b.touches[0]:b,new f(b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop)},c.touchPos=function(a,b){for(var c=a.getBoundingClientRect(),d=[],e=0;e<b.touches.length;e++)d.push(new f(b.touches[e].clientX-c.left-a.clientLeft,b.touches[e].clientY-c.top-a.clientTop));return d}},{"point-geometry":477}],420:[function(a,b,c){"use strict";var d=a("webworkify");b.exports=function(){return new d(a("../../source/worker"))}},{"../../source/worker":364,webworkify:578}],421:[function(a,b,c){"use strict";function d(a,b){return b.area-a.area}function e(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var f=a("quickselect");b.exports=function(a,b){var c=a.length;if(c<=1)return[a];for(var g,h,i=[],j=0;j<c;j++){var k=e(a[j]);0!==k&&(a[j].area=Math.abs(k),void 0===h&&(h=k<0),h===k<0?(g&&i.push(g),g=[a[j]]):g.push(a[j]))}if(g&&i.push(g),b>1)for(var l=0;l<i.length;l++)i[l].length<=b||(f(i[l],b,1,i[l].length-1,d),i[l]=i[l].slice(0,b));return i}},{quickselect:494}],422:[function(a,b,c){"use strict";b.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0}},{}],423:[function(a,b,c){"use strict";function d(a){this._stringToNumber={},this._numberToString=[];for(var b=0;b<a.length;b++){var c=a[b];this._stringToNumber[c]=b,this._numberToString[b]=c}}var e=a("assert");b.exports=d,d.prototype.encode=function(a){return e(a in this._stringToNumber),this._stringToNumber[a]},d.prototype.decode=function(a){return e(a<this._numberToString.length),this._numberToString[a]}},{assert:51}],424:[function(a,b,c){"use strict";function d(a,b){this.actors=[],this.currentActor=0;for(var c=0;c<a;c++){var d=new g,e=new f(d,b);e.name="Worker "+c,this.actors.push(e)}}var e=a("./util"),f=a("./actor"),g=a("./web_worker");b.exports=d,d.prototype={broadcast:function(a,b,c){c=c||function(){},e.asyncAll(this.actors,function(c,d){c.send(a,b,d)},c)},send:function(a,b,c,d,e){return("number"!=typeof d||isNaN(d))&&(d=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[d].send(a,b,c,e),d},remove:function(){for(var a=0;a<this.actors.length;a++)this.actors[a].target.terminate();this.actors=[]}}},{"./actor":415,"./util":433,"./web_worker":420}],425:[function(a,b,c){"use strict";var d=a("./util"),e={on:function(a,b){return this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b),this},off:function(a,b){if(!a)return delete this._events,this;if(!this.listens(a))return this;if(b){var c=this._events[a].indexOf(b);c>=0&&this._events[a].splice(c,1),this._events[a].length||delete this._events[a]}else delete this._events[a];return this},once:function(a,b){var c=function(d){this.off(a,c),b.call(this,d)}.bind(this);return this.on(a,c),this},fire:function(a,b){if(!this.listens(a))return d.endsWith(a,"error")&&console.error(b&&b.error||b||"Empty error event"),this;b=d.extend({},b),d.extend(b,{type:a,target:this});for(var c=this._events[a].slice(),e=0;e<c.length;e++)c[e].call(this,b);return this},listens:function(a){return!(!this._events||!this._events[a])}};b.exports=e},{"./util":433}],426:[function(a,b,c){"use strict";function d(a,b){this.stacks=a.readFields(e,[],b)}function e(a,b,c){if(1===a){var d=c.readMessage(f,{glyphs:{}});b.push(d)}}function f(a,b,c){if(1===a)b.name=c.readString();else if(2===a)b.range=c.readString();else if(3===a){var d=c.readMessage(g,{});b.glyphs[d.id]=d}}function g(a,b,c){1===a?b.id=c.readVarint():2===a?b.bitmap=c.readBytes():3===a?b.width=c.readVarint():4===a?b.height=c.readVarint():5===a?b.left=c.readSVarint():6===a?b.top=c.readSVarint():7===a&&(b.advance=c.readVarint())}b.exports=d},{}],427:[function(a,b,c){"use strict";function d(a,b,c){return a*(1-c)+b*c}b.exports=d,d.number=d,d.vec2=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c)]},d.color=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c),d(a[2],b[2],c),d(a[3],b[3],c)]},d.array=function(a,b,c){return a.map(function(a,e){return d(a,b[e],c)})}},{}],428:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++)for(var g=b[f],h=0;h<g.length;h++){var i=g[h];if(n(e,i))return!0;if(k(i,e,c))return!0}return!1}function e(a,b){if(1===a.length&&1===a[0].length)return m(b,a[0][0]);for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)if(m(a,d[e]))return!0;for(var f=0;f<a.length;f++){for(var g=a[f],i=0;i<g.length;i++)if(m(b,g[i]))return!0;for(var j=0;j<b.length;j++)if(h(g,b[j]))return!0}return!1}function f(a,b,c){for(var d=0;d<b.length;d++)for(var e=b[d],f=0;f<a.length;f++){var h=a[f];if(h.length>=3)for(var i=0;i<e.length;i++)if(n(h,e[i]))return!0;if(g(h,e,c))return!0}return!1}function g(a,b,c){if(a.length>1){if(h(a,b))return!0;for(var d=0;d<b.length;d++)if(k(b[d],a,c))return!0}for(var e=0;e<a.length;e++)if(k(a[e],b,c))return!0;return!1}function h(a,b){for(var c=0;c<a.length-1;c++)for(var d=a[c],e=a[c+1],f=0;f<b.length-1;f++){var g=b[f],h=b[f+1];if(j(d,e,g,h))return!0}return!1}function i(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}function j(a,b,c,d){return i(a,c,d)!==i(b,c,d)&&i(a,b,c)!==i(a,b,d)}function k(a,b,c){var d=c*c;if(1===b.length)return a.distSqr(b[0])<d;for(var e=1;e<b.length;e++){if(l(a,b[e-1],b[e])<d)return!0}return!1}function l(a,b,c){var d=b.distSqr(c);if(0===d)return a.distSqr(b);var e=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d;return e<0?a.distSqr(b):e>1?a.distSqr(c):a.distSqr(c.sub(b)._mult(e)._add(b))}function m(a,b){for(var c,d,e,f=!1,g=0;g<a.length;g++){c=a[g];for(var h=0,i=c.length-1;h<c.length;i=h++)d=c[h],e=c[i],d.y>b.y!=e.y>b.y&&b.x<(e.x-d.x)*(b.y-d.y)/(e.y-d.y)+d.x&&(f=!f)}return f}function n(a,b){for(var c=!1,d=0,e=a.length-1;d<a.length;e=d++){var f=a[d],g=a[e];f.y>b.y!=g.y>b.y&&b.x<(g.x-f.x)*(b.y-f.y)/(g.y-f.y)+f.x&&(c=!c)}return c}b.exports={multiPolygonIntersectsBufferedMultiPoint:d,multiPolygonIntersectsMultiPolygon:e,multiPolygonIntersectsBufferedMultiLine:f}},{}],429:[function(a,b,c){"use strict";function d(a,b){this.max=a,this.onRemove=b,this.reset()}b.exports=d,d.prototype.reset=function(){for(var a in this.data)this.onRemove(this.data[a]);return this.data={},this.order=[],this},d.prototype.add=function(a,b){if(this.has(a))this.order.splice(this.order.indexOf(a),1),this.data[a]=b,this.order.push(a);else if(this.data[a]=b,this.order.push(a),this.order.length>this.max){var c=this.get(this.order[0]);c&&this.onRemove(c)}return this},d.prototype.has=function(a){return a in this.data},d.prototype.keys=function(){return this.order},d.prototype.get=function(a){if(!this.has(a))return null;var b=this.data[a];return delete this.data[a],this.order.splice(this.order.indexOf(a),1),b},d.prototype.setMaxSize=function(a){for(this.max=a;this.order.length>this.max;){var b=this.get(this.order[0]);b&&this.onRemove(b)}return this}},{}],430:[function(a,b,c){"use strict";function d(a,b,c){if(!(c=c||g.ACCESS_TOKEN)&&g.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens");if(a=a.replace(/^mapbox:\/\//,g.API_URL+b),a+=-1!==a.indexOf("?")?"&access_token=":"?access_token=",g.REQUIRE_ACCESS_TOKEN){if("s"===c[0])throw new Error("Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens");a+=c}return a}function e(a){return a?"?"+a:""}function f(a){return a.access_token&&"tk."===a.access_token.slice(0,3)?j.extend({},a,{access_token:g.ACCESS_TOKEN}):a}var g=a("./config"),h=a("./browser"),i=a("url"),j=a("./util");b.exports.normalizeStyleURL=function(a,b){var c=i.parse(a);return"mapbox:"!==c.protocol?a:d("mapbox:/"+c.pathname+e(c.query),"/styles/v1/",b)},b.exports.normalizeSourceURL=function(a,b){return"mapbox:"!==i.parse(a).protocol?a:d(a+".json","/v4/",b)+"&secure"},b.exports.normalizeGlyphsURL=function(a,b){var c=i.parse(a);return"mapbox:"!==c.protocol?a:d("mapbox://"+c.pathname.split("/")[1]+"/{fontstack}/{range}.pbf"+e(c.query),"/fonts/v1/",b)},b.exports.normalizeSpriteURL=function(a,b,c,f){var g=i.parse(a);return"mapbox:"!==g.protocol?(g.pathname+=b+c,i.format(g)):d("mapbox:/"+g.pathname+"/sprite"+b+c+e(g.query),"/styles/v1/",f)},b.exports.normalizeTileURL=function(a,b,c){var d=i.parse(a,!0);if(!b)return a;if("mapbox:"!==i.parse(b).protocol)return a;var e=h.supportsWebp?".webp":"$1",g=h.devicePixelRatio>=2||512===c?"@2x":"";return i.format({protocol:d.protocol,hostname:d.hostname,pathname:d.pathname.replace(/(\.(?:png|jpg)\d*)/,g+e),query:f(d.query)})}},{"./browser":417,"./config":422,"./util":433,url:559}],431:[function(a,b,c){"use strict";function d(a){function b(){m.apply(this,arguments)}function c(){n.apply(this,arguments),this.members=b.prototype.members}var d=JSON.stringify(a);if(q[d])return q[d];void 0===a.alignment&&(a.alignment=1),b.prototype=Object.create(m.prototype);var h=0,j=0,r=["Uint8"];return b.prototype.members=a.members.map(function(c){c={name:c.name,type:c.type,components:c.components||1},o(c.name.length),o(c.type in p),r.indexOf(c.type)<0&&r.push(c.type);var d=g(c.type);j=Math.max(j,d),c.offset=h=f(h,Math.max(a.alignment,d));for(var e=0;e<c.components;e++)Object.defineProperty(b.prototype,c.name+(1===c.components?"":e),{get:k(c,e),set:l(c,e)});return h+=d*c.components,c}),b.prototype.alignment=a.alignment,b.prototype.size=f(h,Math.max(j,a.alignment)),c.serialize=e,c.prototype=Object.create(n.prototype),c.prototype.StructType=b,c.prototype.bytesPerElement=b.prototype.size,c.prototype.emplaceBack=i(b.prototype.members,b.prototype.size),c.prototype._usedTypes=r,q[d]=c,c}function e(){return{members:this.prototype.StructType.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}}function f(a,b){return Math.ceil(a/b)*b}function g(a){return p[a].BYTES_PER_ELEMENT}function h(a){return a.toLowerCase()}function i(a,b){for(var c=[],d=[],e="var i = this.length;\nthis.resize(this.length + 1);\n",f=0;f<a.length;f++){var i=a[f],j=g(i.type);c.indexOf(j)<0&&(c.push(j),e+="var o"+j.toFixed(0)+" = i * "+(b/j).toFixed(0)+";\n");for(var k=0;k<i.components;k++){var l="v"+d.length,m="o"+j.toFixed(0)+" + "+(i.offset/j+k).toFixed(0);e+="this."+h(i.type)+"["+m+"] = "+l+";\n",d.push(l)}}return e+="return i;",new Function(d,e)}function j(a,b){var c="this._pos"+g(a.type).toFixed(0),d=(a.offset/g(a.type)+b).toFixed(0),e=c+" + "+d;return"this._structArray."+h(a.type)+"["+e+"]"}function k(a,b){return new Function([],"return "+j(a,b)+";")}function l(a,b){return new Function(["x"],j(a,b)+" = x;")}function m(a,b){this._structArray=a,this._pos1=b*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function n(a){void 0!==a?(this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))}var o=a("assert");b.exports=d;var p={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},q={};n.prototype.DEFAULT_CAPACITY=128,n.prototype.RESIZE_MULTIPLIER=5,n.prototype.serialize=function(){return this.trim(),{length:this.length,arrayBuffer:this.arrayBuffer}},n.prototype.get=function(a){return new this.StructType(this,a)},n.prototype.trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},n.prototype.resize=function(a){if(this.length=a,a>this.capacity){this.capacity=Math.max(a,Math.floor(this.capacity*this.RESIZE_MULTIPLIER),this.DEFAULT_CAPACITY),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var b=this.uint8;this._refreshViews(),b&&this.uint8.set(b)}},n.prototype._refreshViews=function(){for(var a=0;a<this._usedTypes.length;a++){var b=this._usedTypes[a];this[h(b)]=new p[b](this.arrayBuffer)}},n.prototype.toArray=function(a,b){for(var c=[],d=a;d<b;d++){var e=this.get(d);c.push(e)}return c}},{assert:51}],432:[function(a,b,c){"use strict";function d(a,b){return b.replace(/{([^{}]+)}/g,function(b,c){return c in a?a[c]:""})}b.exports=d},{}],433:[function(a,b,c){"use strict";var d=a("unitbezier"),e=a("../geo/coordinate");c.easeCubicInOut=function(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)},c.bezier=function(a,b,c,e){var f=new d(a,b,c,e);return function(a){return f.solve(a)}},c.ease=c.bezier(.25,.1,.25,1),c.clamp=function(a,b,c){return Math.min(c,Math.max(b,a))},c.wrap=function(a,b,c){var d=c-b,e=((a-b)%d+d)%d+b;return e===b?c:e},c.coalesce=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(null!==b&&void 0!==b)return b}},c.asyncAll=function(a,b,c){if(!a.length)return c(null,[]);var d=a.length,e=new Array(a.length),f=null;a.forEach(function(a,g){b(a,function(a,b){a&&(f=a),e[g]=b,0==--d&&c(f,e)})})},c.keysDifference=function(a,b){var c=[];for(var d in a)d in b||c.push(d);return c},c.extend=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},c.extendAll=function(a,b){for(var c in b)Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c));return a},c.inherit=function(a,b){var d="function"==typeof a?a.prototype:a,e=Object.create(d);return c.extendAll(e,b),e},c.pick=function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d];e in a&&(c[e]=a[e])}return c};var f=1;c.uniqueId=function(){return f++},c.debounce=function(a,b){var c,d;return function(){d=arguments,clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},c.bindAll=function(a,b){a.forEach(function(a){b[a]&&(b[a]=b[a].bind(b))})},c.bindHandlers=function(a){for(var b in a)"function"==typeof a[b]&&0===b.indexOf("_on")&&(a[b]=a[b].bind(a))},c.setOptions=function(a,b){a.hasOwnProperty("options")||(a.options=a.options?Object.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},c.getCoordinatesCenter=function(a){for(var b=1/0,c=1/0,d=-1/0,f=-1/0,g=0;g<a.length;g++)b=Math.min(b,a[g].column),c=Math.min(c,a[g].row),d=Math.max(d,a[g].column),f=Math.max(f,a[g].row);var h=d-b,i=f-c,j=Math.max(h,i);return new e((b+d)/2,(c+f)/2,0).zoomTo(Math.floor(-Math.log(j)/Math.LN2))},c.endsWith=function(a,b){return-1!==a.indexOf(b,a.length-b.length)},c.startsWith=function(a,b){return 0===a.indexOf(b)},c.mapObject=function(a,b,c){var d={};for(var e in a)d[e]=b.call(c||this,a[e],e,a);return d},c.filterObject=function(a,b,c){var d={};for(var e in a)b.call(c||this,a[e],e,a)&&(d[e]=a[e]);return d},c.deepEqual=function a(b,c){if(Array.isArray(b)){if(!Array.isArray(c)||b.length!==c.length)return!1;for(var d=0;d<b.length;d++)if(!a(b[d],c[d]))return!1;return!0}if("object"==typeof b&&null!==b&&null!==c){if("object"!=typeof c)return!1;if(Object.keys(b).length!==Object.keys(c).length)return!1;for(var e in b)if(!a(b[e],c[e]))return!1;return!0}return b===c},c.clone=function(a){return Array.isArray(a)?a.map(c.clone):"object"==typeof a?c.mapObject(a,c.clone):a},c.arraysIntersect=function(a,b){for(var c=0;c<a.length;c++)if(b.indexOf(a[c])>=0)return!0;return!1};var g={};c.warnOnce=function(a){g[a]||("undefined"!=typeof console&&console.warn(a),g[a]=!0)}},{"../geo/coordinate":329,unitbezier:557}],434:[function(a,b,c){"use strict";function d(a,b,c,d){this._vectorTileFeature=a,a._z=b,a._x=c,a._y=d,this.properties=a.properties,null!=a.id&&(this.id=a.id)}b.exports=d,d.prototype={type:"Feature",get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set geometry(a){this._geometry=a},toJSON:function(){var a={};for(var b in this)"_geometry"!==b&&"_vectorTileFeature"!==b&&"toJSON"!==b&&(a[b]=this[b]);return a}}},{}],435:[function(a,b,c){b.exports={_args:[[{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},"/home/etienne/Documents/plotly/plotly.js"]],_from:"mapbox-gl@>=0.22.0 <0.23.0",_id:"mapbox-gl@0.22.1",_inCache:!0,_location:"/mapbox-gl",_nodeVersion:"4.4.5",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/mapbox-gl-0.22.1.tgz_1471549891670_0.8762630566488951"},_npmUser:{name:"lucaswoj",email:"lucas@lucaswoj.com"},_npmVersion:"2.15.5",_phantomChildren:{},_requested:{raw:"mapbox-gl@^0.22.0",scope:null,escapedName:"mapbox-gl",name:"mapbox-gl",rawSpec:"^0.22.0",spec:">=0.22.0 <0.23.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz",_shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",_shrinkwrap:null,_spec:"mapbox-gl@^0.22.0",_where:"/home/etienne/Documents/plotly/plotly.js",browser:{"./js/util/ajax.js":"./js/util/browser/ajax.js","./js/util/browser.js":"./js/util/browser/browser.js","./js/util/canvas.js":"./js/util/browser/canvas.js","./js/util/dom.js":"./js/util/browser/dom.js","./js/util/web_worker.js":"./js/util/browser/web_worker.js"},bugs:{url:"https://github.com/mapbox/mapbox-gl-js/issues"},dependencies:{csscolorparser:"^1.0.2",earcut:"^2.0.3","feature-filter":"^2.2.0","geojson-rewind":"^0.1.0","geojson-vt":"^2.4.0","gl-matrix":"^2.3.1","grid-index":"^1.0.0","mapbox-gl-function":"^1.2.1","mapbox-gl-shaders":"github:mapbox/mapbox-gl-shaders#de2ab007455aa2587c552694c68583f94c9f2747","mapbox-gl-style-spec":"github:mapbox/mapbox-gl-style-spec#83b1a3e5837d785af582efd5ed1a212f2df6a4ae","mapbox-gl-supported":"^1.2.0",pbf:"^1.3.2",pngjs:"^2.2.0","point-geometry":"^0.0.0",quickselect:"^1.0.0",request:"^2.39.0","resolve-url":"^0.2.1","shelf-pack":"^1.0.0",supercluster:"^2.0.1",unassertify:"^2.0.0",unitbezier:"^0.0.0","vector-tile":"^1.3.0","vt-pbf":"^2.0.2",webworkify:"^1.3.0","whoots-js":"^2.0.0"},description:"A WebGL interactive maps library",devDependencies:{"babel-preset-react":"^6.11.1",babelify:"^7.3.0",benchmark:"~2.1.0",browserify:"^13.0.0",clipboard:"^1.5.12","concat-stream":"1.5.1",coveralls:"^2.11.8",doctrine:"^1.2.1",documentation:"https://github.com/documentationjs/documentation/archive/bb41619c734e59ef3fbc3648610032efcfdaaace.tar.gz","documentation-theme-utils":"3.0.0",envify:"^3.4.0",eslint:"^2.5.3","eslint-config-mourner":"^2.0.0","eslint-plugin-html":"^1.5.1",gl:"^4.0.1",handlebars:"4.0.5","highlight.js":"9.3.0",istanbul:"^0.4.2","json-loader":"^0.5.4",lodash:"^4.13.1","mapbox-gl-test-suite":"github:mapbox/mapbox-gl-test-suite#7babab52fb02788ebbc38384139bf350e8e38552","memory-fs":"^0.3.0",minifyify:"^7.0.1","npm-run-all":"^3.0.0",nyc:"6.4.0",proxyquire:"^1.7.9",remark:"4.2.2","remark-html":"3.0.0",sinon:"^1.15.4",st:"^1.2.0",tap:"^5.7.0","transform-loader":"^0.2.3","unist-util-visit":"1.1.0",vinyl:"1.1.1","vinyl-fs":"2.4.3",watchify:"^3.7.0",webpack:"^1.13.1","webworkify-webpack":"^1.1.3"},directories:{},dist:{shasum:"92a965547d4c2f24c22cbc487eeda48694cb627a",tarball:"https://registry.npmjs.org/mapbox-gl/-/mapbox-gl-0.22.1.tgz"},engines:{node:">=4.0.0"},gitHead:"13a9015341f0602ccb55c98c53079838ad4b70b5",homepage:"https://github.com/mapbox/mapbox-gl-js#readme",license:"BSD-3-Clause",main:"js/mapbox-gl.js",maintainers:[{name:"aaronlidman",email:"aaronlidman@gmail.com"},{name:"ajashton",email:"aj.ashton@gmail.com"},{name:"ansis",email:"ansis.brammanis@gmail.com"},{name:"bergwerkgis",email:"wb@bergwerk-gis.at"},{name:"bhousel",email:"bryan@mapbox.com"},{name:"bsudekum",email:"bobby@mapbox.com"},{name:"camilleanne",email:"camille@mapbox.com"},{name:"dnomadb",email:"damon@mapbox.com"},{name:"dthompson",email:"dthompson@gmail.com"},{name:"emilymcafee",email:"emily@mapbox.com"},{name:"flippmoke",email:"flippmoke@gmail.com"},{name:"freenerd",email:"spam@freenerd.de"},{name:"gretacb",email:"carol@mapbox.com"},{name:"ian29",email:"ian.villeda@gmail.com"},{name:"ianshward",email:"ian@mapbox.com"},{name:"ingalls",email:"nicholas.ingalls@gmail.com"},{name:"jfirebaugh",email:"john.firebaugh@gmail.com"},{name:"jrpruit1",email:"jake@jakepruitt.com"},{name:"karenzshea",email:"karen@mapbox.com"},{name:"kkaefer",email:"kkaefer@gmail.com"},{name:"lbud",email:"lauren@mapbox.com"},{name:"lucaswoj",email:"lucas@lucaswoj.com"},{name:"lxbarth",email:"alex@mapbox.com"},{name:"lyzidiamond",email:"lyzi@mapbox.com"},{name:"mapbox-admin",email:"accounts@mapbox.com"},{name:"mateov",email:"matt@mapbox.com"},{name:"mcwhittemore",email:"mcwhittemore@gmail.com"},{name:"miccolis",email:"jeff@miccolis.net"},{name:"mikemorris",email:"michael.patrick.morris@gmail.com"},{name:"morganherlocker",email:"morgan.herlocker@gmail.com"},{name:"mourner",email:"agafonkin@gmail.com"},{name:"nickidlugash",email:"nicki@mapbox.com"},{name:"rclark",email:"ryan.clark.j@gmail.com"},{name:"samanbb",email:"saman@mapbox.com"},{name:"sbma44",email:"tlee@mapbox.com"},{name:"scothis",email:"scothis@gmail.com"},{name:"sgillies",email:"sean@mapbox.com"},{name:"springmeyer",email:"dane@mapbox.com"},{name:"themarex",email:"patrick@mapbox.com"},{name:"tmcw",email:"tom@macwright.org"},{name:"tristen",email:"tristen.brown@gmail.com"},{name:"willwhite",email:"will@mapbox.com"},{name:"yhahn",email:"young@mapbox.com"}],name:"mapbox-gl",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/mapbox/mapbox-gl-js.git"},scripts:{build:"npm run build-docs # invoked by publisher when publishing docs on the mb-pages branch","build-dev":"browserify js/mapbox-gl.js --debug --standalone mapboxgl > dist/mapbox-gl-dev.js && tap --no-coverage test/build/dev.test.js","build-docs":"documentation build --github --format html -c documentation.yml --theme ./docs/_theme --output docs/api/","build-min":"browserify js/mapbox-gl.js --debug -t unassertify --plugin [minifyify --map mapbox-gl.js.map --output dist/mapbox-gl.js.map] --standalone mapboxgl > dist/mapbox-gl.js && tap --no-coverage test/build/min.test.js","build-token":"browserify debug/access-token-src.js --debug -t envify > debug/access-token.js",lint:"eslint  --ignore-path .gitignore js test bench docs/_posts/examples/*.html","open-changed-examples":"git diff --name-only mb-pages HEAD -- docs/_posts/examples/*.html | awk '{print \"http://127.0.0.1:4000/mapbox-gl-js/example/\" substr($0,33,length($0)-37)}' | xargs open",start:"run-p build-token watch-dev watch-bench start-server","start-bench":"run-p build-token watch-bench start-server","start-debug":"run-p build-token watch-dev start-server","start-docs":"npm run build-min && npm run build-docs && jekyll serve -w","start-server":"st --no-cache --localhost --port 9966 --index index.html .",test:"npm run lint && tap --reporter dot test/js/*/*.js test/build/webpack.test.js","test-suite":"node test/render.test.js && node test/query.test.js","watch-bench":"node bench/download-data.js && watchify bench/index.js --plugin [minifyify --no-map] -t [babelify --presets react] -t unassertify -t envify -o bench/bench.js -v","watch-dev":"watchify js/mapbox-gl.js --debug --standalone mapboxgl -o dist/mapbox-gl-dev.js -v"},version:"0.22.1"}},{}],436:[function(a,b,c){"use strict";function d(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=0,e===b&&(d[e]+=.5),e===c&&(d[e]+=.5);return d}function e(a,b){if(0===b||b===(1<<a+1)-1)return[];for(var c=[],e=[],f=0;f<=a;++f)if(b&1<<f){c.push(d(a,f-1,f-1)),e.push(null);for(var h=0;h<=a;++h)~b&1<<h&&(c.push(d(a,f-1,h-1)),e.push([f,h]))}var i=g(c),j=[];a:for(var f=0;f<i.length;++f){for(var k=i[f],l=[],h=0;h<k.length;++h){if(!e[k[h]])continue a;l.push(e[k[h]].slice())}j.push(l)}return j}function f(a){for(var b=1<<a+1,c=new Array(b),d=0;d<b;++d)c[d]=e(a,d);return c}b.exports=f;var g=a("convex-hull")},{"convex-hull":109}],437:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}function e(a,b){a[0][0]=b[0],a[0][1]=b[1],a[0][2]=b[2],a[1][0]=b[4],a[1][1]=b[5],a[1][2]=b[6],a[2][0]=b[8],a[2][1]=b[9],a[2][2]=b[10]}function f(a,b,c,d,e){a[0]=b[0]*d+c[0]*e,a[1]=b[1]*d+c[1]*e,a[2]=b[2]*d+c[2]*e}var g=a("./normalize"),h=a("gl-mat4/create"),i=a("gl-mat4/clone"),j=a("gl-mat4/determinant"),k=a("gl-mat4/invert"),l=a("gl-mat4/transpose"),m={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},n=h(),o=h(),p=[0,0,0,0],q=[[0,0,0],[0,0,0],[0,0,0]],r=[0,0,0];b.exports=function(a,b,c,h,s,t){if(b||(b=[0,0,0]),c||(c=[0,0,0]),h||(h=[0,0,0]),s||(s=[0,0,0,1]),t||(t=[0,0,0,1]),!g(n,a))return!1;if(i(o,n),o[3]=0,o[7]=0,o[11]=0,o[15]=1,Math.abs(j(o)<1e-8))return!1;var u=n[3],v=n[7],w=n[11],x=n[12],y=n[13],z=n[14],A=n[15];if(0!==u||0!==v||0!==w){p[0]=u,p[1]=v,p[2]=w,p[3]=A;if(!k(o,o))return!1;l(o,o),d(s,p,o)}else s[0]=s[1]=s[2]=0,s[3]=1;if(b[0]=x,b[1]=y,b[2]=z,e(q,n),c[0]=m.length(q[0]),m.normalize(q[0],q[0]),h[0]=m.dot(q[0],q[1]),f(q[1],q[1],q[0],1,-h[0]),c[1]=m.length(q[1]),m.normalize(q[1],q[1]),h[0]/=c[1],h[1]=m.dot(q[0],q[2]),f(q[2],q[2],q[0],1,-h[1]),h[2]=m.dot(q[1],q[2]),f(q[2],q[2],q[1],1,-h[2]),c[2]=m.length(q[2]),m.normalize(q[2],q[2]),h[1]/=c[2],h[2]/=c[2],m.cross(r,q[1],q[2]),m.dot(q[0],r)<0)for(var B=0;B<3;B++)c[B]*=-1,q[B][0]*=-1,q[B][1]*=-1,q[B][2]*=-1;return t[0]=.5*Math.sqrt(Math.max(1+q[0][0]-q[1][1]-q[2][2],0)),t[1]=.5*Math.sqrt(Math.max(1-q[0][0]+q[1][1]-q[2][2],0)),t[2]=.5*Math.sqrt(Math.max(1-q[0][0]-q[1][1]+q[2][2],0)),t[3]=.5*Math.sqrt(Math.max(1+q[0][0]+q[1][1]+q[2][2],0)),q[2][1]>q[1][2]&&(t[0]=-t[0]),q[0][2]>q[2][0]&&(t[1]=-t[1]),q[1][0]>q[0][1]&&(t[2]=-t[2]),!0}},{"./normalize":438,"gl-mat4/clone":180,"gl-mat4/create":181,"gl-mat4/determinant":182,"gl-mat4/invert":186,"gl-mat4/transpose":196,"gl-vec3/cross":260,"gl-vec3/dot":261,"gl-vec3/length":262,"gl-vec3/normalize":264}],
438:[function(a,b,c){b.exports=function(a,b){var c=b[15];if(0===c)return!1;for(var d=1/c,e=0;e<16;e++)a[e]=b[e]*d;return!0}},{}],439:[function(a,b,c){function d(a,b,c,d){if(0===k(b)||0===k(c))return!1;var e=j(b,m.translate,m.scale,m.skew,m.perspective,m.quaternion),f=j(c,n.translate,n.scale,n.skew,n.perspective,n.quaternion);return!(!e||!f)&&(h(o.translate,m.translate,n.translate,d),h(o.skew,m.skew,n.skew,d),h(o.scale,m.scale,n.scale,d),h(o.perspective,m.perspective,n.perspective,d),l(o.quaternion,m.quaternion,n.quaternion,d),i(a,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function e(){return{translate:f(),scale:f(1),skew:f(),perspective:g(),quaternion:g()}}function f(a){return[a||0,a||0,a||0]}function g(){return[0,0,0,1]}var h=a("gl-vec3/lerp"),i=a("mat4-recompose"),j=a("mat4-decompose"),k=a("gl-mat4/determinant"),l=a("quat-slerp"),m=e(),n=e(),o=e();b.exports=d},{"gl-mat4/determinant":182,"gl-vec3/lerp":263,"mat4-decompose":437,"mat4-recompose":440,"quat-slerp":490}],440:[function(a,b,c){var d={identity:a("gl-mat4/identity"),translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")},e=(d.create(),d.create());b.exports=function(a,b,c,f,g,h){return d.identity(a),d.fromRotationTranslation(a,h,b),a[3]=g[0],a[7]=g[1],a[11]=g[2],a[15]=g[3],d.identity(e),0!==f[2]&&(e[9]=f[2],d.multiply(a,a,e)),0!==f[1]&&(e[9]=0,e[8]=f[1],d.multiply(a,a,e)),0!==f[0]&&(e[8]=0,e[4]=f[0],d.multiply(a,a,e)),d.scale(a,a,c),a}},{"gl-mat4/create":181,"gl-mat4/fromRotationTranslation":184,"gl-mat4/identity":185,"gl-mat4/multiply":188,"gl-mat4/scale":194,"gl-mat4/translate":195}],441:[function(a,b,c){"use strict";function d(a){this._components=a.slice(),this._time=[0],this.prevMatrix=a.slice(),this.nextMatrix=a.slice(),this.computedMatrix=a.slice(),this.computedInverse=a.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}function e(a){return a=a||{},new d(a.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}var f=a("binary-search-bounds"),g=a("mat4-interpolate"),h=a("gl-mat4/invert"),i=a("gl-mat4/rotateX"),j=a("gl-mat4/rotateY"),k=a("gl-mat4/rotateZ"),l=a("gl-mat4/lookAt"),m=a("gl-mat4/translate"),n=(a("gl-mat4/scale"),a("gl-vec3/normalize")),o=[0,0,0];b.exports=e;var p=d.prototype;p.recalcMatrix=function(a){var b=this._time,c=f.le(b,a),d=this.computedMatrix;if(!(c<0)){var e=this._components;if(c===b.length-1)for(var i=16*c,j=0;j<16;++j)d[j]=e[i++];else{for(var k=b[c+1]-b[c],i=16*c,l=this.prevMatrix,m=!0,j=0;j<16;++j)l[j]=e[i++];for(var o=this.nextMatrix,j=0;j<16;++j)o[j]=e[i++],m=m&&l[j]===o[j];if(k<1e-6||m)for(var j=0;j<16;++j)d[j]=l[j];else g(d,l,o,(a-b[c])/k)}var p=this.computedUp;p[0]=d[1],p[1]=d[5],p[2]=d[9],n(p,p);var q=this.computedInverse;h(q,d);var r=this.computedEye,s=q[15];r[0]=q[12]/s,r[1]=q[13]/s,r[2]=q[14]/s;for(var t=this.computedCenter,u=Math.exp(this.computedRadius[0]),j=0;j<3;++j)t[j]=r[j]-d[2+4*j]*u}},p.idle=function(a){if(!(a<this.lastT())){for(var b=this._components,c=b.length-16,d=0;d<16;++d)b.push(b[c++]);this._time.push(a)}},p.flush=function(a){var b=f.gt(this._time,a)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(a,b,c,d){this.recalcMatrix(a),b=b||this.computedEye,c=c||o,d=d||this.computedUp,this.setMatrix(a,l(this.computedMatrix,b,c,d));for(var e=0,f=0;f<3;++f)e+=Math.pow(c[f]-b[f],2);e=Math.log(Math.sqrt(e)),this.computedRadius[0]=e},p.rotate=function(a,b,c,d){this.recalcMatrix(a);var e=this.computedInverse;b&&j(e,e,b),c&&i(e,e,c),d&&k(e,e,d),this.setMatrix(a,h(this.computedMatrix,e))};var q=[0,0,0];p.pan=function(a,b,c,d){q[0]=-(b||0),q[1]=-(c||0),q[2]=-(d||0),this.recalcMatrix(a);var e=this.computedInverse;m(e,e,q),this.setMatrix(a,h(e,e))},p.translate=function(a,b,c,d){q[0]=b||0,q[1]=c||0,q[2]=d||0,this.recalcMatrix(a);var e=this.computedMatrix;m(e,e,q),this.setMatrix(a,e)},p.setMatrix=function(a,b){if(!(a<this.lastT())){this._time.push(a);for(var c=0;c<16;++c)this._components.push(b[c])}},p.setDistance=function(a,b){this.computedRadius[0]=b},p.setDistanceLimits=function(a,b){var c=this._limits;c[0]=a,c[1]=b},p.getDistanceLimits=function(a){var b=this._limits;return a?(a[0]=b[0],a[1]=b[1],a):b}},{"binary-search-bounds":70,"gl-mat4/invert":186,"gl-mat4/lookAt":187,"gl-mat4/rotateX":191,"gl-mat4/rotateY":192,"gl-mat4/rotateZ":193,"gl-mat4/scale":194,"gl-mat4/translate":195,"gl-vec3/normalize":264,"mat4-interpolate":439}],442:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b<3){for(var c=new Array(b),d=0;d<b;++d)c[d]=d;return 2===b&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:c}for(var f=new Array(b),d=0;d<b;++d)f[d]=d;f.sort(function(b,c){var d=a[b][0]-a[c][0];return d||a[b][1]-a[c][1]});for(var g=[f[0],f[1]],h=[f[0],f[1]],d=2;d<b;++d){for(var i=f[d],j=a[i],k=g.length;k>1&&e(a[g[k-2]],a[g[k-1]],j)<=0;)k-=1,g.pop();for(g.push(i),k=h.length;k>1&&e(a[h[k-2]],a[h[k-1]],j)>=0;)k-=1,h.pop();h.push(i)}for(var c=new Array(h.length+g.length-2),l=0,d=0,m=g.length;d<m;++d)c[l++]=g[d];for(var n=h.length-2;n>0;--n)c[l++]=h[n];return c}b.exports=d;var e=a("robust-orientation")[3]},{"robust-orientation":515}],443:[function(a,b,c){"use strict";function d(a,b){function c(a){var b=!1;return"altKey"in a&&(b=b||a.altKey!==q.alt,q.alt=!!a.altKey),"shiftKey"in a&&(b=b||a.shiftKey!==q.shift,q.shift=!!a.shiftKey),"ctrlKey"in a&&(b=b||a.ctrlKey!==q.control,q.control=!!a.ctrlKey),"metaKey"in a&&(b=b||a.metaKey!==q.meta,q.meta=!!a.metaKey),b}function d(a,d){var f=e.x(d),g=e.y(d);"buttons"in d&&(a=0|d.buttons),(a!==n||f!==o||g!==p||c(d))&&(n=0|a,o=f||0,p=g||0,b&&b(n,o,p,q))}function f(a){d(0,a)}function g(){(n||o||p||q.shift||q.alt||q.meta||q.control)&&(o=p=0,n=0,q.shift=q.alt=q.control=q.meta=!1,b&&b(0,0,0,q))}function h(a){c(a)&&b&&b(n,o,p,q)}function i(a){0===e.buttons(a)?d(0,a):d(n,a)}function j(a){d(n|e.buttons(a),a)}function k(a){d(n&~e.buttons(a),a)}function l(){r||(r=!0,a.addEventListener("mousemove",i),a.addEventListener("mousedown",j),a.addEventListener("mouseup",k),a.addEventListener("mouseleave",f),a.addEventListener("mouseenter",f),a.addEventListener("mouseout",f),a.addEventListener("mouseover",f),a.addEventListener("blur",g),a.addEventListener("keyup",h),a.addEventListener("keydown",h),a.addEventListener("keypress",h),a!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}function m(){r&&(r=!1,a.removeEventListener("mousemove",i),a.removeEventListener("mousedown",j),a.removeEventListener("mouseup",k),a.removeEventListener("mouseleave",f),a.removeEventListener("mouseenter",f),a.removeEventListener("mouseout",f),a.removeEventListener("mouseover",f),a.removeEventListener("blur",g),a.removeEventListener("keyup",h),a.removeEventListener("keydown",h),a.removeEventListener("keypress",h),a!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}b||(b=a,a=window);var n=0,o=0,p=0,q={shift:!1,alt:!1,control:!1,meta:!1},r=!1;l();var s={element:a};return Object.defineProperties(s,{enabled:{get:function(){return r},set:function(a){a?l():m()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return q},enumerable:!0}}),s}b.exports=d;var e=a("mouse-event")},{"mouse-event":445}],444:[function(a,b,c){function d(a,b,c){b=b||a.currentTarget||a.srcElement,Array.isArray(c)||(c=[0,0]);var d=a.clientX||0,f=a.clientY||0,g=e(b);return c[0]=d-g.left,c[1]=f-g.top,c}function e(a){return a===window||a===document||a===document.body?f:a.getBoundingClientRect()}var f={left:0,top:0};b.exports=d},{}],445:[function(a,b,c){"use strict";function d(a){if("object"==typeof a){if("buttons"in a)return a.buttons;if("which"in a){var b=a.which;if(2===b)return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in a){var b=a.button;if(1===b)return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0}function e(a){return a.target||a.srcElement||window}function f(a){if("object"==typeof a){if("offsetX"in a)return a.offsetX;var b=e(a),c=b.getBoundingClientRect();return a.clientX-c.left}return 0}function g(a){if("object"==typeof a){if("offsetY"in a)return a.offsetY;var b=e(a),c=b.getBoundingClientRect();return a.clientY-c.top}return 0}c.buttons=d,c.element=e,c.x=f,c.y=g},{}],446:[function(a,b,c){"use strict";function d(a,b,c){"function"==typeof a&&(c=!!b,b=a,a=window);var d=e("ex",a),f=function(a){c&&a.preventDefault();var e=a.deltaX||0,f=a.deltaY||0,g=a.deltaZ||0,h=a.deltaMode,i=1;switch(h){case 1:i=d;break;case 2:i=window.innerHeight}if(e*=i,f*=i,g*=i,e||f||g)return b(e,f,g,a)};return a.addEventListener("wheel",f),f}var e=a("to-px");b.exports=d},{"to-px":548}],447:[function(a,b,c){"use strict";function d(a){return"a"+a}function e(a){return"d"+a}function f(a,b){return"c"+a+"_"+b}function g(a){return"s"+a}function h(a,b){return"t"+a+"_"+b}function i(a){return"o"+a}function j(a){return"x"+a}function k(a){return"p"+a}function l(a,b){return"d"+a+"_"+b}function m(a){return"i"+a}function n(a,b){return"u"+a+"_"+b}function o(a){return"b"+a}function p(a){return"y"+a}function q(a){return"e"+a}function r(a){return"v"+a}function s(a,b,c){for(var d=0,e=0;e<a;++e)b&1<<e&&(d|=1<<c[e]);return d}function t(a,b,c,t,u,C){function D(a,b){M.push("for(",m(u[a]),"=",b,";",m(u[a]),"<",g(u[a]),";","++",m(u[a]),"){")}function E(a){for(var b=0;b<J;++b)M.push(k(b),"+=",n(b,u[a]),";");M.push("}")}function F(a){for(var b=a-1;b>=0;--b)D(b,0);for(var c=[],b=0;b<J;++b)C[b]?c.push(e(b)+".get("+k(b)+")"):c.push(e(b)+"["+k(b)+"]");for(var b=0;b<t;++b)c.push(j(b));M.push(x,"[",A,"++]=phase(",c.join(),");");for(var b=0;b<a;++b)E(b);for(var d=0;d<J;++d)M.push(k(d),"+=",n(d,u[a]),";")}function G(a){for(var b=0;b<J;++b)C[b]?M.push(f(b,0),"=",e(b),".get(",k(b),");"):M.push(f(b,0),"=",e(b),"[",k(b),"];");for(var c=[],b=0;b<J;++b)c.push(f(b,0));for(var b=0;b<t;++b)c.push(j(b));M.push(o(0),"=",x,"[",A,"]=phase(",c.join(),");");for(var d=1;d<1<<K;++d)M.push(o(d),"=",x,"[",A,"+",q(d),"];");for(var g=[],d=1;d<1<<K;++d)g.push("("+o(0)+"!=="+o(d)+")");M.push("if(",g.join("||"),"){");for(var h=[],b=0;b<K;++b)h.push(m(b));for(var b=0;b<J;++b){h.push(f(b,0));for(var d=1;d<1<<K;++d)C[b]?M.push(f(b,d),"=",e(b),".get(",k(b),"+",l(b,d),");"):M.push(f(b,d),"=",e(b),"[",k(b),"+",l(b,d),"];"),h.push(f(b,d))}for(var b=0;b<1<<K;++b)h.push(o(b));for(var b=0;b<t;++b)h.push(j(b));M.push("vertex(",h.join(),");",r(0),"=",w,"[",A,"]=",y,"++;");for(var i=(1<<K)-1,n=o(i),d=0;d<K;++d)if(0==(a&~(1<<d))){for(var p=i^1<<d,s=o(p),u=[],v=p;v>0;v=v-1&p)u.push(w+"["+A+"+"+q(v)+"]");u.push(r(0));for(var v=0;v<J;++v)1&d?u.push(f(v,i),f(v,p)):u.push(f(v,p),f(v,i));1&d?u.push(n,s):u.push(s,n);for(var v=0;v<t;++v)u.push(j(v));M.push("if(",n,"!==",s,"){","face(",u.join(),")}")}M.push("}",A,"+=1;")}function H(){for(var a=1;a<1<<K;++a)M.push(B,"=",q(a),";",q(a),"=",p(a),";",p(a),"=",B,";")}function I(a,b){if(a<0)return void G(b);F(a),M.push("if(",g(u[a]),">0){",m(u[a]),"=1;"),I(a-1,b|1<<u[a]);for(var c=0;c<J;++c)M.push(k(c),"+=",n(c,u[a]),";");a===K-1&&(M.push(A,"=0;"),H()),D(a,2),I(a-1,b),a===K-1&&(M.push("if(",m(u[K-1]),"&1){",A,"=0;}"),H()),E(a),M.push("}")}var J=C.length,K=u.length;if(K<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var L="extractContour"+u.join("_"),M=[],N=[],O=[],P=0;P<J;++P)O.push(d(P));for(var P=0;P<t;++P)O.push(j(P));for(var P=0;P<K;++P)N.push(g(P)+"="+d(0)+".shape["+P+"]|0");for(var P=0;P<J;++P){N.push(e(P)+"="+d(P)+".data",i(P)+"="+d(P)+".offset|0");for(var Q=0;Q<K;++Q)N.push(h(P,Q)+"="+d(P)+".stride["+Q+"]|0")}for(var P=0;P<J;++P){N.push(k(P)+"="+i(P)),N.push(f(P,0));for(var Q=1;Q<1<<K;++Q){for(var R=[],S=0;S<K;++S)Q&1<<S&&R.push("-"+h(P,S));N.push(l(P,Q)+"=("+R.join("")+")|0"),N.push(f(P,Q)+"=0")}}for(var P=0;P<J;++P)for(var Q=0;Q<K;++Q){var T=[h(P,u[Q])];Q>0&&T.push(h(P,u[Q-1])+"*"+g(u[Q-1])),N.push(n(P,u[Q])+"=("+T.join("-")+")|0")}for(var P=0;P<K;++P)N.push(m(P)+"=0");N.push(y+"=0");for(var U=["2"],P=K-2;P>=0;--P)U.push(g(u[P]));N.push(z+"=("+U.join("*")+")|0",x+"=mallocUint32("+z+")",w+"=mallocUint32("+z+")",A+"=0"),N.push(o(0)+"=0");for(var Q=1;Q<1<<K;++Q){for(var V=[],W=[],S=0;S<K;++S)Q&1<<S&&(0===W.length?V.push("1"):V.unshift(W.join("*"))),W.push(g(u[S]));var X="";V[0].indexOf(g(u[K-2]))<0&&(X="-");var Y=s(K,Q,u);N.push(q(Y)+"=(-"+V.join("-")+")|0",p(Y)+"=("+X+V.join("-")+")|0",o(Y)+"=0")}N.push(r(0)+"=0",B+"=0"),I(K-1,0),M.push("freeUint32(",w,");freeUint32(",x,");");var Z=["'use strict';","function ",L,"(",O.join(),"){","var ",N.join(),";",M.join(""),"}","return ",L].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",Z)(a,b,c,v.mallocUint32,v.freeUint32)}function u(a){function b(a){throw new Error("ndarray-extract-contour: "+a)}"object"!=typeof a&&b("Must specify arguments");var c=a.order;Array.isArray(c)||b("Must specify order");var d=a.arrayArguments||1;d<1&&b("Must have at least one array argument");var e=a.scalarArguments||0;e<0&&b("Scalar arg count must be > 0"),"function"!=typeof a.vertex&&b("Must specify vertex creation function"),"function"!=typeof a.cell&&b("Must specify cell creation function"),"function"!=typeof a.phase&&b("Must specify phase function");for(var f=a.getters||[],g=new Array(d),h=0;h<d;++h)f.indexOf(h)>=0?g[h]=!0:g[h]=!1;return t(a.vertex,a.cell,a.phase,e,c,g)}var v=a("typedarray-pool");b.exports=u;var w="V",x="P",y="N",z="Q",A="X",B="T"},{"typedarray-pool":554}],448:[function(a,b,c){"use strict";var d=a("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});b.exports=function(a,b){return d(a,b),a}},{"cwise/lib/wrapper":119}],449:[function(a,b,c){"use strict";function d(a){if(a in i)return i[a];for(var b=[],c=0;c<a;++c)b.push("out",c,"s=0.5*(inp",c,"l-inp",c,"r);");for(var d=["array"],e=["junk"],c=0;c<a;++c){d.push("array"),e.push("out"+c+"s");var f=g(a);f[c]=-1,d.push({array:0,offset:f.slice()}),f[c]=1,d.push({array:0,offset:f.slice()}),e.push("inp"+c+"l","inp"+c+"r")}return i[a]=h({args:d,pre:k,post:k,body:{body:b.join(""),args:e.map(function(a){return{name:a,lvalue:0===a.indexOf("out"),rvalue:0===a.indexOf("inp"),count:"junk"!==a|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+a})}function e(a){var b=a.join(),c=j[b];if(c)return c;for(var e=a.length,f=["function gradient(dst,src){var s=src.shape.slice();"],g=0;g<1<<e;++g){for(var h=[],k=0;k<e;++k)g&1<<k&&h.push(k+1);for(var n=0;n<1<<h.length;++n){for(var o=h.slice(),k=0;k<h.length;++k)n&1<<k&&(o[k]=-o[k]);!function(b){for(var c=e-b.length,d=[],g=[],h=[],i=0;i<e;++i)b.indexOf(i+1)>=0?h.push("0"):b.indexOf(-(i+1))>=0?h.push("s["+i+"]-1"):(h.push("-1"),d.push("1"),g.push("s["+i+"]-2"));var j=".lo("+d.join()+").hi("+g.join()+")";if(0===d.length&&(j=""),c>0){f.push("if(1");for(var i=0;i<e;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||f.push("&&s[",i,"]>2");f.push("){grad",c,"(src.pick(",h.join(),")",j);for(var i=0;i<e;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||f.push(",dst.pick(",h.join(),",",i,")",j);f.push(");")}for(var i=0;i<b.length;++i){var k=Math.abs(b[i])-1,l="dst.pick("+h.join()+","+k+")"+j;switch(a[k]){case"clamp":var m=h.slice(),n=h.slice();b[i]<0?m[k]="s["+k+"]-2":n[k]="1",0===c?f.push("if(s[",k,"]>1){dst.set(",h.join(),",",k,",0.5*(src.get(",m.join(),")-src.get(",n.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):f.push("if(s[",k,"]>1){diff(",l,",src.pick(",m.join(),")",j,",src.pick(",n.join(),")",j,");}else{zero(",l,");};");break;case"mirror":0===c?f.push("dst.set(",h.join(),",",k,",0);"):f.push("zero(",l,");");break;case"wrap":var o=h.slice(),p=h.slice();b[i]<0?(o[k]="s["+k+"]-2",p[k]="0"):(o[k]="s["+k+"]-1",p[k]="1"),0===c?f.push("if(s[",k,"]>2){dst.set(",h.join(),",",k,",0.5*(src.get(",o.join(),")-src.get(",p.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):f.push("if(s[",k,"]>2){diff(",l,",src.pick(",o.join(),")",j,",src.pick(",p.join(),")",j,");}else{zero(",l,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}c>0&&f.push("};")}(o)}}f.push("return dst;};return gradient");for(var p=["diff","zero"],q=[l,m],g=1;g<=e;++g)p.push("grad"+g),q.push(d(g));p.push(f.join(""));var r=Function.apply(void 0,p),c=r.apply(void 0,q);return i[b]=c,c}function f(a,b,c){if(Array.isArray(c)){if(c.length!==b.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else c="string"==typeof c?g(b.dimension,c):g(b.dimension,"clamp");if(a.dimension!==b.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(a.shape[b.dimension]!==b.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<b.dimension;++d)if(a.shape[d]!==b.shape[d])throw new Error("ndarray-gradient: shape mismatch");return 0===b.size?a:b.dimension<=0?(a.set(0),a):e(c)(a,b)}b.exports=f;var g=a("dup"),h=a("cwise-compiler"),i={},j={},k={body:"",args:[],thisVars:[],localVars:[]},l=h({args:["array","array","array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),m=h({args:["array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":116,dup:134}],450:[function(a,b,c){"use strict";function d(a,b,c){var d=b.dimension,g=f([],c);return e(a,b,function(a,b){for(var c=0;c<d;++c){a[c]=g[(d+1)*d+c];for(var e=0;e<d;++e)a[c]+=g[(d+1)*e+c]*b[e]}for(var f=g[(d+1)*(d+1)-1],e=0;e<d;++e)f+=g[(d+1)*e+d]*b[e];for(var h=1/f,c=0;c<d;++c)a[c]*=h;return a}),a}var e=a("ndarray-warp"),f=a("gl-matrix-invert");b.exports=d},{"gl-matrix-invert":197,"ndarray-warp":457}],451:[function(a,b,c){"use strict";function d(a,b){var c=Math.floor(b),d=b-c,e=0<=c&&c<a.shape[0],f=0<=c+1&&c+1<a.shape[0];return(1-d)*(e?+a.get(c):0)+d*(f?+a.get(c+1):0)}function e(a,b,c){var d=Math.floor(b),e=b-d,f=0<=d&&d<a.shape[0],g=0<=d+1&&d+1<a.shape[0],h=Math.floor(c),i=c-h,j=0<=h&&h<a.shape[1],k=0<=h+1&&h+1<a.shape[1],l=f&&j?a.get(d,h):0,m=f&&k?a.get(d,h+1):0;return(1-i)*((1-e)*l+e*(g&&j?a.get(d+1,h):0))+i*((1-e)*m+e*(g&&k?a.get(d+1,h+1):0))}function f(a,b,c,d){var e=Math.floor(b),f=b-e,g=0<=e&&e<a.shape[0],h=0<=e+1&&e+1<a.shape[0],i=Math.floor(c),j=c-i,k=0<=i&&i<a.shape[1],l=0<=i+1&&i+1<a.shape[1],m=Math.floor(d),n=d-m,o=0<=m&&m<a.shape[2],p=0<=m+1&&m+1<a.shape[2],q=g&&k&&o?a.get(e,i,m):0,r=g&&l&&o?a.get(e,i+1,m):0,s=h&&k&&o?a.get(e+1,i,m):0,t=h&&l&&o?a.get(e+1,i+1,m):0,u=g&&k&&p?a.get(e,i,m+1):0,v=g&&l&&p?a.get(e,i+1,m+1):0;return(1-n)*((1-j)*((1-f)*q+f*s)+j*((1-f)*r+f*t))+n*((1-j)*((1-f)*u+f*(h&&k&&p?a.get(e+1,i,m+1):0))+j*((1-f)*v+f*(h&&l&&p?a.get(e+1,i+1,m+1):0)))}function g(a){var b,c,d=0|a.shape.length,e=new Array(d),f=new Array(d),g=new Array(d),h=new Array(d);for(b=0;b<d;++b)c=+arguments[b+1],e[b]=Math.floor(c),f[b]=c-e[b],g[b]=0<=e[b]&&e[b]<a.shape[b],h[b]=0<=e[b]+1&&e[b]+1<a.shape[b];var i,j,k,l=0;a:for(b=0;b<1<<d;++b){for(j=1,k=a.offset,i=0;i<d;++i)if(b&1<<i){if(!h[i])continue a;j*=f[i],k+=a.stride[i]*(e[i]+1)}else{if(!g[i])continue a;j*=1-f[i],k+=a.stride[i]*e[i]}l+=j*a.data[k]}return l}function h(a,b,c,h){switch(a.shape.length){case 0:return 0;case 1:return d(a,b);case 2:return e(a,b,c);case 3:return f(a,b,c,h);default:return g.apply(void 0,arguments)}}b.exports=h,b.exports.d1=d,b.exports.d2=e,b.exports.d3=f},{}],452:[function(a,b,c){"use strict";function d(a){if(!a)return h;for(var b=0;b<a.args.length;++b){var c=a.args[b];a.args[b]=0===b?{name:c,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:{name:c,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function e(a){return g({args:a.args,pre:d(a.pre),body:d(a.body),post:d(a.proc),funcName:a.funcName})}function f(a){for(var b=[],c=0;c<a.args.length;++c)b.push("a"+c);return new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),") {P(",b.join(","),");return a0}"].join(""))(e(a))}var g=a("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},i={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in i){var b=i[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+b+"=b"},rvalue:!0,funcName:a+"eq"}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+b+"=s"},rvalue:!0,funcName:a+"seq"})}}();var j={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in j){var b=j[a];c[a]=f({args:["array","array"],body:{args:["a","b"],body:"a="+b+"b"},funcName:a}),c[a+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+b+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var k={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in k){var b=k[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+b+"b"},rvalue:!0,count:2,funcName:a+"eq"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+b+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<l.length;++a){var b=l[a];c[b]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:b}),c[b+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"})}}();var m=["max","min","atan2","pow"];!function(){for(var a=0;a<m.length;++a){var b=m[a];c[b]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b}),c[b+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b+"s"}),c[b+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"}),c[b+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"seq"})}}();var n=["atan2","pow"];!function(){for(var a=0;a<n.length;++a){var b=n[a];c[b+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"op"}),c[b+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"ops"}),c[b+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opeq"}),c[b+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opseq"})}}(),c.any=g({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),c.all=g({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),c.sum=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),c.prod=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),c.norm2squared=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),c.norm2=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),c.norminf=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),c.norm1=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),c.sup=g({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.inf=g({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.argmin=g({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.argmax=g({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.random=f({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),c.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),c.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),c.equals=g({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":116}],453:[function(a,b,c){"use strict";var d=a("ndarray"),e=a("./doConvert.js");b.exports=function(a,b){for(var c=[],f=a,g=1;Array.isArray(f);)c.push(f.length),g*=f.length,f=f[0];return 0===c.length?d():(b||(b=d(new Float64Array(g),c)),e(b,a),b)}},{"./doConvert.js":454,ndarray:458}],454:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":116}],455:[function(a,b,c){"use strict";function d(a){switch(a){case"uint8":return[i.mallocUint8,i.freeUint8];case"uint16":return[i.mallocUint16,i.freeUint16];case"uint32":return[i.mallocUint32,i.freeUint32];case"int8":return[i.mallocInt8,i.freeInt8];case"int16":return[i.mallocInt16,i.freeInt16];case"int32":return[i.mallocInt32,i.freeInt32];case"float32":return[i.mallocFloat,i.freeFloat];case"float64":return[i.mallocDouble,i.freeDouble];default:return null}}function e(a){for(var b=[],c=0;c<a;++c)b.push("s"+c);for(var c=0;c<a;++c)b.push("n"+c);for(var c=1;c<a;++c)b.push("d"+c);for(var c=1;c<a;++c)b.push("e"+c);for(var c=1;c<a;++c)b.push("f"+c);return b}function f(a,b){function c(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function f(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}var g=["'use strict'"],h=["ndarrayInsertionSort",a.join("d"),b].join(""),i=["left","right","data","offset"].concat(e(a.length)),j=d(b),k=["i,j,cptr,ptr=left*s0+offset"];if(a.length>1){for(var l=[],m=1;m<a.length;++m)k.push("i"+m),l.push("n"+m);j?k.push("scratch=malloc("+l.join("*")+")"):k.push("scratch=new Array("+l.join("*")+")"),k.push("dptr","sptr","a","b")}else k.push("scratch");if(g.push(["function ",h,"(",i.join(","),"){var ",k.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),a.length>1){g.push("dptr=0;sptr=ptr");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push("scratch[dptr++]=",c("sptr"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("sptr+=d"+n,"}")}g.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0");for(var m=1;m<a.length;++m)1===m&&g.push("__l:"),
g.push(["for(i",m,"=0;i",m,"<n",m,";++i",m,"){"].join(""));g.push(["a=",c("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var m=a.length-1;m>=1;--m)g.push("sptr+=e"+m,"dptr+=f"+m,"}");g.push("dptr=cptr;sptr=cptr-s0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr",c("sptr")));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push(["dptr+=d",n,";sptr+=d",n].join(""),"}")}g.push("cptr-=s0\n}"),g.push("dptr=cptr;sptr=0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr","scratch[sptr++]"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("dptr+=d"+n,"}")}}else g.push("scratch="+c("ptr"),"while((j--\x3eleft)&&("+c("cptr-s0")+">scratch)){",f("cptr",c("cptr-s0")),"cptr-=s0","}",f("cptr","scratch"));if(g.push("}"),a.length>1&&j&&g.push("free(scratch)"),g.push("} return "+h),j){var o=new Function("malloc","free",g.join("\n"));return o(j[0],j[1])}var o=new Function(g.join("\n"));return o()}function g(a,b,c){function f(a){return["(offset+",a,"*s0)"].join("")}function g(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function h(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}function i(b,c,d){if(1===b.length)v.push("ptr0="+f(b[0]));else for(var e=0;e<b.length;++e)v.push(["b_ptr",e,"=s0*",b[e]].join(""));c&&v.push("pivot_ptr=0"),v.push("ptr_shift=offset");for(var e=a.length-1;e>=0;--e){var g=a[e];0!==g&&v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""))}if(b.length>1)for(var e=0;e<b.length;++e)v.push(["ptr",e,"=b_ptr",e,"+ptr_shift"].join(""));v.push(d),c&&v.push("++pivot_ptr");for(var e=0;e<a.length;++e){var g=a[e];0!==g&&(b.length>1?v.push("ptr_shift+=d"+g):v.push("ptr0+=d"+g),v.push("}"))}}function k(b,c,d,e){if(1===c.length)v.push("ptr0="+f(c[0]));else{for(var g=0;g<c.length;++g)v.push(["b_ptr",g,"=s0*",c[g]].join(""));v.push("ptr_shift=offset")}d&&v.push("pivot_ptr=0"),b&&v.push(b+":");for(var g=1;g<a.length;++g)v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""));if(c.length>1)for(var g=0;g<c.length;++g)v.push(["ptr",g,"=b_ptr",g,"+ptr_shift"].join(""));v.push(e);for(var g=a.length-1;g>=1;--g)d&&v.push("pivot_ptr+=f"+g),c.length>1?v.push("ptr_shift+=e"+g):v.push("ptr0+=e"+g),v.push("}")}function l(){a.length>1&&y&&v.push("free(pivot1)","free(pivot2)")}function m(b,c){var d="el"+b,e="el"+c;if(a.length>1){var h="__l"+ ++z;k(h,[d,e],!1,["comp=",g("ptr0"),"-",g("ptr1"),"\n","if(comp>0){tmp0=",d,";",d,"=",e,";",e,"=tmp0;break ",h,"}\n","if(comp<0){break ",h,"}"].join(""))}else v.push(["if(",g(f(d)),">",g(f(e)),"){tmp0=",d,";",d,"=",e,";",e,"=tmp0}"].join(""))}function n(b,c){a.length>1?i([b,c],!1,h("ptr0",g("ptr1"))):v.push(h(f(b),g(f(c))))}function o(b,c,d){if(a.length>1){var e="__l"+ ++z;k(e,[c],!0,[b,"=",g("ptr0"),"-pivot",d,"[pivot_ptr]\n","if(",b,"!==0){break ",e,"}"].join(""))}else v.push([b,"=",g(f(c)),"-pivot",d].join(""))}function p(b,c){a.length>1?i([b,c],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join("")):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join(""))}function q(b,c,d){a.length>1?(i([b,c,d],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join("")),v.push("++"+c,"--"+d)):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","ptr2=",f(d),"\n","++",c,"\n","--",d,"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join(""))}function r(a,b){p(a,b),v.push("--"+b)}function s(b,c,d){a.length>1?i([b,c],!0,[h("ptr0",g("ptr1")),"\n",h("ptr1",["pivot",d,"[pivot_ptr]"].join(""))].join("")):v.push(h(f(b),g(f(c))),h(f(c),"pivot"+d))}function t(b,c){v.push(["if((",c,"-",b,")<=",j,"){\n","insertionSort(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}else{\n",w,"(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}"].join(""))}function u(b,c,d){a.length>1?(v.push(["__l",++z,":while(true){"].join("")),i([b],!0,["if(",g("ptr0"),"!==pivot",c,"[pivot_ptr]){break __l",z,"}"].join("")),v.push(d,"}")):v.push(["while(",g(f(b)),"===pivot",c,"){",d,"}"].join(""))}var v=["'use strict'"],w=["ndarrayQuickSort",a.join("d"),b].join(""),x=["left","right","data","offset"].concat(e(a.length)),y=d(b),z=0;v.push(["function ",w,"(",x.join(","),"){"].join(""));var A=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(a.length>1){for(var B=[],C=1;C<a.length;++C)B.push("n"+C),A.push("i"+C);for(var C=0;C<8;++C)A.push("b_ptr"+C);A.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+B.join("*")),y?A.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):A.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else A.push("pivot1","pivot2");if(v.push("var "+A.join(",")),m(1,2),m(4,5),m(1,3),m(2,3),m(1,4),m(3,4),m(2,5),m(2,3),m(4,5),a.length>1?i(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",g("ptr1"),"\n","pivot2[pivot_ptr]=",g("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",g("ptr0"),"\n","y=",g("ptr2"),"\n","z=",g("ptr4"),"\n",h("ptr5","x"),"\n",h("ptr6","y"),"\n",h("ptr7","z")].join("")):v.push(["pivot1=",g(f("el2")),"\n","pivot2=",g(f("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",g(f("el1")),"\n","y=",g(f("el3")),"\n","z=",g(f("el5")),"\n",h(f("index1"),"x"),"\n",h(f("index3"),"y"),"\n",h(f("index5"),"z")].join("")),n("index2","left"),n("index4","right"),v.push("if(pivots_are_equal){"),v.push("for(k=less;k<=great;++k){"),o("comp","k",1),v.push("if(comp===0){continue}"),v.push("if(comp<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),v.push("while(true){"),o("comp","great",1),v.push("if(comp>0){"),v.push("great--"),v.push("}else if(comp<0){"),q("k","less","great"),v.push("break"),v.push("}else{"),r("k","great"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}else{"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2>0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp>0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),s("left","(less-1)",1),s("right","(great+1)",2),t("left","(less-2)"),t("(great+2)","right"),v.push("if(pivots_are_equal){"),l(),v.push("return"),v.push("}"),v.push("if(less<index1&&great>index5){"),u("less",1,"++less"),u("great",2,"--great"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1===0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2===0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp===0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),l(),t("less","great"),v.push("}return "+w),a.length>1&&y){var D=new Function("insertionSort","malloc","free",v.join("\n"));return D(c,y[0],y[1])}var D=new Function("insertionSort",v.join("\n"));return D(c)}function h(a,b){var c=["'use strict'"],d=["ndarraySortWrapper",a.join("d"),b].join(""),h=["array"];c.push(["function ",d,"(",h.join(","),"){"].join(""));for(var i=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],k=0;k<a.length;++k)i.push(["s",k,"=stride[",k,"]|0,n",k,"=shape[",k,"]|0"].join(""));for(var l=new Array(a.length),m=[],k=0;k<a.length;++k){var n=a[k];0!==n&&(0===m.length?l[n]="1":l[n]=m.join("*"),m.push("n"+n))}for(var o=-1,p=-1,k=0;k<a.length;++k){var q=a[k];0!==q&&(o>0?i.push(["d",q,"=s",q,"-d",o,"*n",o].join("")):i.push(["d",q,"=s",q].join("")),o=q);var n=a.length-1-k;0!==n&&(p>0?i.push(["e",n,"=s",n,"-e",p,"*n",p,",f",n,"=",l[n],"-f",p,"*n",p].join("")):i.push(["e",n,"=s",n,",f",n,"=",l[n]].join("")),p=n)}c.push("var "+i.join(","));var r=["0","n0-1","data","offset"].concat(e(a.length));c.push(["if(n0<=",j,"){","insertionSort(",r.join(","),")}else{","quickSort(",r.join(","),")}"].join("")),c.push("}return "+d);var s=new Function("insertionSort","quickSort",c.join("\n")),t=f(a,b);return s(t,g(a,b,t))}var i=a("typedarray-pool"),j=32;b.exports=h},{"typedarray-pool":554}],456:[function(a,b,c){"use strict";function d(a){var b=a.order,c=a.dtype,d=[b,c],g=d.join(":"),h=f[g];return h||(f[g]=h=e(b,c)),h(a),a}var e=a("./lib/compile_sort.js"),f={};b.exports=d},{"./lib/compile_sort.js":455}],457:[function(a,b,c){"use strict";var d=a("ndarray-linear-interpolate"),e=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_9_arg4_)}",args:[{name:"_inline_9_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_9_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_=_inline_10_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),f=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_(_inline_13_arg4_,this_warped[0])}",args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),g=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_16_arg2_(this_warped,_inline_16_arg0_),_inline_16_arg1_=_inline_16_arg3_(_inline_16_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),h=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_19_arg2_(this_warped,_inline_19_arg0_),_inline_19_arg1_=_inline_19_arg3_(_inline_19_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_19_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_19_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});b.exports=function(a,b,c){switch(b.shape.length){case 1:f(a,c,d.d1,b);break;case 2:g(a,c,d.d2,b);break;case 3:h(a,c,d.d3,b);break;default:e(a,c,d.bind(void 0,b),b.shape.length)}return a}},{"cwise/lib/wrapper":119,"ndarray-linear-interpolate":451}],458:[function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");b<0&&(c="View_Nil"+a);var d="generic"===a;if(-1===b){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),b<4?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;q<b;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;i<h;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=a("iota-array"),j=a("is-buffer"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};b.exports=h},{"iota-array":281,"is-buffer":283}],459:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return b<0?-f:f;var c=e.hi(a),d=e.lo(a);return b>a==a>0?d===g?(c+=1,d=0):d+=1:0===d?(d=g,c-=1):d-=1,e.pack(d,c)}var e=a("double-bits"),f=Math.pow(2,-1074),g=-1>>>0;b.exports=d},{"double-bits":131}],460:[function(a,b,c){function d(a){for(var b,c=[],d=0,h=0,j=0,k=0,l=null,m=null,n=0,o=0,p=0,q=a.length;p<q;p++){var r=a[p],s=r[0];switch(s){case"M":j=r[1],k=r[2];break;case"A":r=g(n,o,r[1],r[2],i(r[3]),r[4],r[5],r[6],r[7]),r.unshift("C"),r.length>7&&(c.push(r.splice(0,7)),r.unshift("C"));break;case"S":var t=n,u=o;"C"!=b&&"S"!=b||(t+=t-d,u+=u-h),r=["C",t,u,r[1],r[2],r[3],r[4]];break;case"T":"Q"==b||"T"==b?(l=2*n-l,m=2*o-m):(l=n,m=o),r=f(n,o,l,m,r[1],r[2]);break;case"Q":l=r[1],m=r[2],r=f(n,o,r[1],r[2],r[3],r[4]);break;case"L":r=e(n,o,r[1],r[2]);break;case"H":r=e(n,o,r[1],o);break;case"V":r=e(n,o,n,r[1]);break;case"Z":r=e(n,o,j,k)}b=s,n=r[r.length-2],o=r[r.length-1],r.length>4?(d=r[r.length-4],h=r[r.length-3]):(d=n,h=o),c.push(r)}return c}function e(a,b,c,d){return["C",a,b,c,d,c,d]}function f(a,b,c,d,e,f){return["C",a/3+2/3*c,b/3+2/3*d,e/3+2/3*c,f/3+2/3*d,e,f]}function g(a,b,c,d,e,f,i,l,m,n){if(n)x=n[0],y=n[1],v=n[2],w=n[3];else{var o=h(a,b,-e);a=o.x,b=o.y,o=h(l,m,-e),l=o.x,m=o.y;var p=(a-l)/2,q=(b-m)/2,r=p*p/(c*c)+q*q/(d*d);r>1&&(r=Math.sqrt(r),c*=r,d*=r);var s=c*c,t=d*d,u=(f==i?-1:1)*Math.sqrt(Math.abs((s*t-s*q*q-t*p*p)/(s*q*q+t*p*p)));u==1/0&&(u=1);var v=u*c*q/d+(a+l)/2,w=u*-d*p/c+(b+m)/2,x=Math.asin(((b-w)/d).toFixed(9)),y=Math.asin(((m-w)/d).toFixed(9));x=a<v?j-x:x,y=l<v?j-y:y,x<0&&(x=2*j+x),y<0&&(y=2*j+y),i&&x>y&&(x-=2*j),!i&&y>x&&(y-=2*j)}if(Math.abs(y-x)>k){var z=y,A=l,B=m;y=x+k*(i&&y>x?1:-1),l=v+c*Math.cos(y),m=w+d*Math.sin(y);var C=g(l,m,c,d,e,0,i,A,B,[y,z,v,w])}var D=Math.tan((y-x)/4),E=4/3*c*D,F=4/3*d*D,G=[2*a-(a+E*Math.sin(x)),2*b-(b-F*Math.cos(x)),l+E*Math.sin(y),m-F*Math.cos(y),l,m];if(n)return G;C&&(G=G.concat(C));for(var H=0;H<G.length;){var I=h(G[H],G[H+1],e);G[H++]=I.x,G[H++]=I.y}return G}function h(a,b,c){return{x:a*Math.cos(c)-b*Math.sin(c),y:a*Math.sin(c)+b*Math.cos(c)}}function i(a){return a*(j/180)}var j=Math.PI,k=i(120);b.exports=d},{}],461:[function(a,b,c){c.vertexNormals=function(a,b,c){for(var d=b.length,e=new Array(d),f=void 0===c?1e-6:c,g=0;g<d;++g)e[g]=[0,0,0];for(var g=0;g<a.length;++g)for(var h=a[g],i=0,j=h[h.length-1],k=h[0],l=0;l<h.length;++l){i=j,j=k,k=h[(l+1)%h.length];for(var m=b[i],n=b[j],o=b[k],p=new Array(3),q=0,r=new Array(3),s=0,t=0;t<3;++t)p[t]=m[t]-n[t],q+=p[t]*p[t],r[t]=o[t]-n[t],s+=r[t]*r[t];if(q*s>f)for(var u=e[j],v=1/Math.sqrt(q*s),t=0;t<3;++t){var w=(t+1)%3,x=(t+2)%3;u[t]+=v*(r[w]*p[x]-r[x]*p[w])}}for(var g=0;g<d;++g){for(var u=e[g],y=0,t=0;t<3;++t)y+=u[t]*u[t];if(y>f)for(var v=1/Math.sqrt(y),t=0;t<3;++t)u[t]*=v;else for(var t=0;t<3;++t)u[t]=0}return e},c.faceNormals=function(a,b,c){for(var d=a.length,e=new Array(d),f=void 0===c?1e-6:c,g=0;g<d;++g){for(var h=a[g],i=new Array(3),j=0;j<3;++j)i[j]=b[h[j]];for(var k=new Array(3),l=new Array(3),j=0;j<3;++j)k[j]=i[1][j]-i[0][j],l[j]=i[2][j]-i[0][j];for(var m=new Array(3),n=0,j=0;j<3;++j){var o=(j+1)%3,p=(j+2)%3;m[j]=k[o]*l[p]-k[p]*l[o],n+=m[j]*m[j]}n=n>f?1/Math.sqrt(n):0;for(var j=0;j<3;++j)m[j]*=n;e[g]=m}return e}},{}],462:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}var e=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;b.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},d)).join("")}catch(a){return!1}}()?Object.assign:function(a,b){for(var c,h,i=d(a),j=1;j<arguments.length;j++){c=Object(arguments[j]);for(var k in c)f.call(c,k)&&(i[k]=c[k]);if(e){h=e(c);for(var l=0;l<h.length;l++)g.call(c,h[l])&&(i[h[l]]=c[h[l]])}}return i}},{}],463:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){var k=b+f+j;if(l>0){var l=Math.sqrt(k+1);a[0]=.5*(g-i)/l,a[1]=.5*(h-d)/l,a[2]=.5*(c-f)/l,a[3]=.5*l}else{var m=Math.max(b,f,j),l=Math.sqrt(2*m-k+1);b>=m?(a[0]=.5*l,a[1]=.5*(e+c)/l,a[2]=.5*(h+d)/l,a[3]=.5*(g-i)/l):f>=m?(a[0]=.5*(c+e)/l,a[1]=.5*l,a[2]=.5*(i+g)/l,a[3]=.5*(h-d)/l):(a[0]=.5*(d+h)/l,a[1]=.5*(g+i)/l,a[2]=.5*l,a[3]=.5*(c-e)/l)}return a}b.exports=d},{}],464:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a,b,c,d){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2)+Math.pow(d,2))}function f(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],h=e(c,d,f,g);h>1e-6?(a[0]=c/h,a[1]=d/h,a[2]=f/h,a[3]=g/h):(a[0]=a[1]=a[2]=0,a[3]=1)}function g(a,b,c){this.radius=i([c]),this.center=i(b),this.rotation=i(a),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.rotation||[0,0,0,1],d=a.radius||1;b=[].slice.call(b,0,3),c=[].slice.call(c,0,4),f(c,c);var e=new g(c,b,Math.log(d));return e.setDistanceLimits(a.zoomMin,a.zoomMax),("eye"in a||"up"in a)&&e.lookAt(0,a.eye,a.center,a.up),e}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/lookAt"),k=a("gl-mat4/fromQuat"),l=a("gl-mat4/invert"),m=a("./lib/quatFromFrame"),n=g.prototype;n.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},n.recalcMatrix=function(a){this.radius.curve(a),this.center.curve(a),this.rotation.curve(a);var b=this.computedRotation;f(b,b);var c=this.computedMatrix;k(c,b);var d=this.computedCenter,e=this.computedEye,g=this.computedUp,h=Math.exp(this.computedRadius[0]);e[0]=d[0]+h*c[2],e[1]=d[1]+h*c[6],e[2]=d[2]+h*c[10],g[0]=c[1],g[1]=c[5],g[2]=c[9];for(var i=0;i<3;++i){for(var j=0,l=0;l<3;++l)j+=c[i+4*l]*e[l];c[12+i]=-j}},n.getMatrix=function(a,b){this.recalcMatrix(a);var c=this.computedMatrix;if(b){for(var d=0;d<16;++d)b[d]=c[d];return b}return c},n.idle=function(a){this.center.idle(a),this.radius.idle(a),this.rotation.idle(a)},n.flush=function(a){this.center.flush(a),this.radius.flush(a),this.rotation.flush(a)},n.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=f[1],h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);k/=o,l/=o,m/=o;var p=f[2],q=f[6],r=f[10],s=p*g+q*h+r*i,t=p*k+q*l+r*m;p-=s*g+t*k,q-=s*h+t*l,r-=s*i+t*m;var u=d(p,q,r);p/=u,q/=u,r/=u;var v=k*b+g*c,w=l*b+h*c,x=m*b+i*c;this.center.move(a,v,w,x);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+e),this.radius.set(a,Math.log(y))},n.rotate=function(a,b,c,f){this.recalcMatrix(a),b=b||0,c=c||0;var g=this.computedMatrix,h=g[0],i=g[4],j=g[8],k=g[1],l=g[5],m=g[9],n=g[2],o=g[6],p=g[10],q=b*h+c*k,r=b*i+c*l,s=b*j+c*m,t=-(o*s-p*r),u=-(p*q-n*s),v=-(n*r-o*q),w=Math.sqrt(Math.max(0,1-Math.pow(t,2)-Math.pow(u,2)-Math.pow(v,2))),x=e(t,u,v,w);x>1e-6?(t/=x,u/=x,v/=x,w/=x):(t=u=v=0,w=1);var y=this.computedRotation,z=y[0],A=y[1],B=y[2],C=y[3],D=z*w+C*t+A*v-B*u,E=A*w+C*u+B*t-z*v,F=B*w+C*v+z*u-A*t,G=C*w-z*t-A*u-B*v;if(f){t=n,u=o,v=p;var H=Math.sin(f)/d(t,u,v);t*=H,u*=H,v*=H,w=Math.cos(b),D=D*w+G*t+E*v-F*u,E=E*w+G*u+F*t-D*v,F=F*w+G*v+D*u-E*t,G=G*w-D*t-E*u-F*v}var I=e(D,E,F,G);I>1e-6?(D/=I,E/=I,F/=I,G/=I):(D=E=F=0,G=1),this.rotation.set(a,D,E,F,G)},n.lookAt=function(a,b,c,d){this.recalcMatrix(a),c=c||this.computedCenter,b=b||this.computedEye,d=d||this.computedUp;var e=this.computedMatrix;j(e,b,c,d);var g=this.computedRotation;m(g,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),f(g,g),this.rotation.set(a,g[0],g[1],g[2],g[3]);for(var h=0,i=0;i<3;++i)h+=Math.pow(c[i]-b[i],2);this.radius.set(a,.5*Math.log(Math.max(h,1e-6))),this.center.set(a,c[0],c[1],c[2])},n.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},n.setMatrix=function(a,b){var c=this.computedRotation;m(c,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),f(c,c),this.rotation.set(a,c[0],c[1],c[2],c[3]);var d=this.computedMatrix;l(d,b);var e=d[15];if(Math.abs(e)>1e-6){var g=d[12]/e,h=d[13]/e,i=d[14]/e;this.recalcMatrix(a);var j=Math.exp(this.computedRadius[0]);this.center.set(a,g-d[2]*j,h-d[6]*j,i-d[10]*j),this.radius.idle(a)}else this.center.idle(a),this.radius.idle(a)},n.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},n.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-1/0,b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},n.getDistanceLimits=function(a){var b=this.radius.bounds;return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},n.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},n.fromJSON=function(a){var b=this.lastT(),c=a.center;c&&this.center.set(b,c[0],c[1],c[2]);var d=a.rotation;d&&this.rotation.set(b,d[0],d[1],d[2],d[3]);var e=a.distance;e&&e>0&&this.radius.set(b,Math.log(e)),this.setDistanceLimits(a.zoomMin,a.zoomMax)}},{"./lib/quatFromFrame":463,"filtered-vector":142,"gl-mat4/fromQuat":183,"gl-mat4/invert":186,"gl-mat4/lookAt":187}],465:[function(a,b,c){"use strict";var d=a("repeat-string");b.exports=function(a,b,c){return c=void 0!==c?c+"":" ",d(c,b)+a}},{"repeat-string":507}],466:[function(a,b,c){function d(a){var b=[];return a.replace(g,function(a,c,d){var g=c.toLowerCase();for(d=e(d),"m"==g&&d.length>2&&(b.push([c].concat(d.splice(0,2))),g="l",c="m"==c?"l":"L");;){if(d.length==f[g])return d.unshift(c),b.push(d);if(d.length<f[g])throw new Error("malformed path data");b.push([c].concat(d.splice(0,f[g])))}}),b}function e(a){var b=a.match(h);return b?b.map(Number):[]}b.exports=d;var f={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=/([astvzqmhlc])([^astvzqmhlc]*)/gi,h=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],467:[function(a,b,c){b.exports=function(a,b){b||(b=[0,""]),a=String(a);var c=parseFloat(a,10);return b[0]=c,b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},{}],468:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:488}],469:[function(a,b,c){"use strict";function d(a){var b;a&&a.length&&(b=a,a=b.length);var c=new Uint8Array(a||0);return b&&c.set(b),c.readUInt32LE=f.readUInt32LE,c.writeUInt32LE=f.writeUInt32LE,c.readInt32LE=f.readInt32LE,c.writeInt32LE=f.writeInt32LE,c.readFloatLE=f.readFloatLE,c.writeFloatLE=f.writeFloatLE,c.readDoubleLE=f.readDoubleLE,c.writeDoubleLE=f.writeDoubleLE,c.toString=f.toString,c.write=f.write,c.slice=f.slice,c.copy=f.copy,c._isBuffer=!0,c}function e(a){for(var b,c,d=a.length,e=[],f=0;f<d;f++){
if((b=a.charCodeAt(f))>55295&&b<57344){if(!c){b>56319||f+1===d?e.push(239,191,189):c=b;continue}if(b<56320){e.push(239,191,189),c=b;continue}b=c-55296<<10|b-56320|65536,c=null}else c&&(e.push(239,191,189),c=null);b<128?e.push(b):b<2048?e.push(b>>6|192,63&b|128):b<65536?e.push(b>>12|224,b>>6&63|128,63&b|128):e.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}return e}b.exports=d;var f,g,h,i=a("ieee754");f={readUInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},writeUInt32LE:function(a,b){this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24},readInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},readFloatLE:function(a){return i.read(this,a,!0,23,4)},readDoubleLE:function(a){return i.read(this,a,!0,52,8)},writeFloatLE:function(a,b){return i.write(this,a,b,!0,23,4)},writeDoubleLE:function(a,b){return i.write(this,a,b,!0,52,8)},toString:function(a,b,c){var d="",e="";b=b||0,c=Math.min(this.length,c||this.length);for(var f=b;f<c;f++){var g=this[f];g<=127?(d+=decodeURIComponent(e)+String.fromCharCode(g),e=""):e+="%"+g.toString(16)}return d+=decodeURIComponent(e)},write:function(a,b){for(var c=a===g?h:e(a),d=0;d<c.length;d++)this[b+d]=c[d]},slice:function(a,b){return this.subarray(a,b)},copy:function(a,b){b=b||0;for(var c=0;c<this.length;c++)a[b+c]=this[c]}},f.writeInt32LE=f.writeUInt32LE,d.byteLength=function(a){return g=a,h=e(a),h.length},d.isBuffer=function(a){return!(!a||!a._isBuffer)}},{ieee754:277}],470:[function(a,b,c){(function(c){"use strict";function d(a){this.buf=q.isBuffer(a)?a:new q(a||0),this.pos=0,this.length=this.buf.length}function e(a,b){var c,d=b.buf;if(c=d[b.pos++],a+=268435456*(127&c),c<128)return a;if(c=d[b.pos++],a+=34359738368*(127&c),c<128)return a;if(c=d[b.pos++],a+=4398046511104*(127&c),c<128)return a;if(c=d[b.pos++],a+=562949953421312*(127&c),c<128)return a;if(c=d[b.pos++],a+=72057594037927940*(127&c),c<128)return a;if(c=d[b.pos++],a+=0x8000000000000000*(127&c),c<128)return a;throw new Error("Expected varint not more than 10 bytes")}function f(a,b){b.realloc(10);for(var c=b.pos+10;a>=1;){if(b.pos>=c)throw new Error("Given varint doesn't fit into 10 bytes");var d=255&a;b.buf[b.pos++]=d|(a>=128?128:0),a/=128}}function g(a,b,c){var d=b<=16383?1:b<=2097151?2:b<=268435455?3:Math.ceil(Math.log(b)/(7*Math.LN2));c.realloc(d);for(var e=c.pos-1;e>=a;e--)c.buf[e+d]=c.buf[e]}function h(a,b){for(var c=0;c<a.length;c++)b.writeVarint(a[c])}function i(a,b){for(var c=0;c<a.length;c++)b.writeSVarint(a[c])}function j(a,b){for(var c=0;c<a.length;c++)b.writeFloat(a[c])}function k(a,b){for(var c=0;c<a.length;c++)b.writeDouble(a[c])}function l(a,b){for(var c=0;c<a.length;c++)b.writeBoolean(a[c])}function m(a,b){for(var c=0;c<a.length;c++)b.writeFixed32(a[c])}function n(a,b){for(var c=0;c<a.length;c++)b.writeSFixed32(a[c])}function o(a,b){for(var c=0;c<a.length;c++)b.writeFixed64(a[c])}function p(a,b){for(var c=0;c<a.length;c++)b.writeSFixed64(a[c])}b.exports=d;var q=c.Buffer||a("./buffer");d.Varint=0,d.Fixed64=1,d.Bytes=2,d.Fixed32=5;var r=Math.pow(2,63);d.prototype={destroy:function(){this.buf=null},readFields:function(a,b,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),e=d>>3,f=this.pos;a(e,b,this),this.pos===f&&this.skip(d)}return b},readMessage:function(a,b){return this.readFields(a,b,this.readVarint()+this.pos)},readFixed32:function(){var a=this.buf.readUInt32LE(this.pos);return this.pos+=4,a},readSFixed32:function(){var a=this.buf.readInt32LE(this.pos);return this.pos+=4,a},readFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+4294967296*this.buf.readUInt32LE(this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+4294967296*this.buf.readInt32LE(this.pos+4);return this.pos+=8,a},readFloat:function(){var a=this.buf.readFloatLE(this.pos);return this.pos+=4,a},readDouble:function(){var a=this.buf.readDoubleLE(this.pos);return this.pos+=8,a},readVarint:function(){var a,b,c=this.buf;return b=c[this.pos++],a=127&b,b<128?a:(b=c[this.pos++],a|=(127&b)<<7,b<128?a:(b=c[this.pos++],a|=(127&b)<<14,b<128?a:(b=c[this.pos++],a|=(127&b)<<21,b<128?a:e(a,this))))},readVarint64:function(){var a=this.pos,b=this.readVarint();if(b<r)return b;for(var c=this.pos-2;255===this.buf[c];)c--;c<a&&(c=a),b=0;for(var d=0;d<c-a+1;d++){var e=127&~this.buf[a+d];b+=d<4?e<<7*d:e*Math.pow(2,7*d)}return-b-1},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,b=this.buf.toString("utf8",this.pos,a);return this.pos=a,b},readBytes:function(){var a=this.readVarint()+this.pos,b=this.buf.slice(this.pos,a);return this.pos=a,b},readPackedVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readVarint());return b},readPackedSVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFloat());return b},readPackedDouble:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed32());return b},readPackedFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(a){var b=7&a;if(b===d.Varint)for(;this.buf[this.pos++]>127;);else if(b===d.Bytes)this.pos=this.readVarint()+this.pos;else if(b===d.Fixed32)this.pos+=4;else{if(b!==d.Fixed64)throw new Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(a,b){this.writeVarint(a<<3|b)},realloc:function(a){for(var b=this.length||16;b<this.pos+a;)b*=2;if(b!==this.length){var c=new q(b);this.buf.copy(c),this.buf=c,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(a){this.realloc(4),this.buf.writeUInt32LE(a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),this.buf.writeInt32LE(a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(-1&a,this.pos),this.buf.writeUInt32LE(Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(-1&a,this.pos),this.buf.writeInt32LE(Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(a){if((a=+a)>268435455)return void f(a,this);this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127)))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a);var b=q.byteLength(a);this.writeVarint(b),this.realloc(b),this.buf.write(a,this.pos),this.pos+=b},writeFloat:function(a){this.realloc(4),this.buf.writeFloatLE(a,this.pos),this.pos+=4},writeDouble:function(a){this.realloc(8),this.buf.writeDoubleLE(a,this.pos),this.pos+=8},writeBytes:function(a){var b=a.length;this.writeVarint(b),this.realloc(b);for(var c=0;c<b;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,b){this.pos++;var c=this.pos;a(b,this);var d=this.pos-c;d>=128&&g(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,b,c){this.writeTag(a,d.Bytes),this.writeRawMessage(b,c)},writePackedVarint:function(a,b){this.writeMessage(a,h,b)},writePackedSVarint:function(a,b){this.writeMessage(a,i,b)},writePackedBoolean:function(a,b){this.writeMessage(a,l,b)},writePackedFloat:function(a,b){this.writeMessage(a,j,b)},writePackedDouble:function(a,b){this.writeMessage(a,k,b)},writePackedFixed32:function(a,b){this.writeMessage(a,m,b)},writePackedSFixed32:function(a,b){this.writeMessage(a,n,b)},writePackedFixed64:function(a,b){this.writeMessage(a,o,b)},writePackedSFixed64:function(a,b){this.writeMessage(a,p,b)},writeBytesField:function(a,b){this.writeTag(a,d.Bytes),this.writeBytes(b)},writeFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeSFixed64(b)},writeVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeVarint(b)},writeSVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeSVarint(b)},writeStringField:function(a,b){this.writeTag(a,d.Bytes),this.writeString(b)},writeFloatField:function(a,b){this.writeTag(a,d.Fixed32),this.writeFloat(b)},writeDoubleField:function(a,b){this.writeTag(a,d.Fixed64),this.writeDouble(b)},writeBooleanField:function(a,b){this.writeVarintField(a,Boolean(b))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":469}],471:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b<e){for(var c=1,d=0;d<b;++d)for(var g=0;g<d;++g)if(a[d]<a[g])c=-c;else if(a[d]===a[g])return 0;return c}for(var h=f.mallocUint8(b),d=0;d<b;++d)h[d]=0;for(var c=1,d=0;d<b;++d)if(!h[d]){var i=1;h[d]=1;for(var g=a[d];g!==d;g=a[g]){if(h[g])return f.freeUint8(h),0;i+=1,h[g]=1}1&i||(c=-c)}return f.freeUint8(h),c}b.exports=d;var e=32,f=a("typedarray-pool")},{"typedarray-pool":554}],472:[function(a,b,c){"use strict";function d(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var c,d,e,h=f.mallocUint32(b),i=f.mallocUint32(b),j=0;for(g(a,i),e=0;e<b;++e)h[e]=a[e];for(e=b-1;e>0;--e)d=i[e],c=h[e],h[e]=h[d],h[d]=c,i[e]=i[c],i[c]=d,j=(j+c)*e;return f.freeUint32(i),f.freeUint32(h),j}function e(a,b,c){switch(a){case 0:return c||[];case 1:return c?(c[0]=0,c):[0];case 2:return c?(b?(c[0]=0,c[1]=1):(c[0]=1,c[1]=0),c):b?[0,1]:[1,0]}c=c||new Array(a);var d,e,f,g=1;for(c[0]=0,f=1;f<a;++f)c[f]=f,g=g*f|0;for(f=a-1;f>0;--f)d=b/g|0,b=b-d*g|0,g=g/f|0,e=0|c[f],c[f]=0|c[d],c[d]=0|e;return c}var f=a("typedarray-pool"),g=a("invert-permutation");c.rank=d,c.unrank=e},{"invert-permutation":280,"typedarray-pool":554}],473:[function(a,b,c){"use strict";function d(a){return e[a]?e[a]:("string"==typeof a&&(a=e[a]=a.split(/\s*,\s*|\s+/)),a)}b.exports=function(a,b,c){var e,f,g={};if("string"==typeof b&&(b=d(b)),Array.isArray(b)){var h={};for(f=0;f<b.length;f++)h[b[f]]=!0;b=h}for(e in b)b[e]=d(b[e]);var i={};for(e in b){var j=b[e];if(Array.isArray(j))for(f=0;f<j.length;f++){var k=j[f];if(c&&(i[k]=!0),k in a){if(g[e]=a[k],c)for(var l=f;l<j.length;l++)i[j[l]]=!0;break}}else e in a&&(b[e]&&(g[e]=a[e]),c&&(i[e]=!0))}if(c)for(e in a)i[e]||(g[e]=a[e]);return g};var e={}},{}],474:[function(a,b,c){"use strict";function d(a,b){function c(a,b){var c=h[b][a[b]];c.splice(c.indexOf(a),1)}function d(a,d,f){for(var g,i,j,k=0;k<2;++k)if(h[k][d].length>0){g=h[k][d][0],j=k;break}i=g[1^j];for(var l=0;l<2;++l)for(var m=h[l][d],n=0;n<m.length;++n){var o=m[n],p=o[1^l],q=e(b[a],b[d],b[i],b[p]);q>0&&(g=o,i=p,j=l)}return f?i:(g&&c(g,j),i)}for(var f=0|b.length,g=a.length,h=[new Array(f),new Array(f)],i=0;i<f;++i)h[0][i]=[],h[1][i]=[];for(var i=0;i<g;++i){var j=a[i];h[0][j[0]].push(j),h[1][j[1]].push(j)}for(var k=[],i=0;i<f;++i)h[0][i].length+h[1][i].length===0&&k.push([i]);for(var i=0;i<f;++i)for(var l=0;l<2;++l){for(var m=[];h[l][i].length>0;){var n=(h[0][i].length,function(a,f){var g=h[f][a][0],i=[a];c(g,f);for(var j=g[1^f];;){for(;j!==a;)i.push(j),j=d(i[i.length-2],j,!1);if(h[0][a].length+h[1][a].length===0)break;var k=i[i.length-1],l=a,m=i[1],n=d(k,l,!0);if(e(b[k],b[l],b[m],b[n])<0)break;i.push(a),j=d(k,l)}return i}(i,l));!function(a,b){return b[1]===b[b.length-1]}(m,n)?(m.length>0&&k.push(m),m=n):m.push.apply(m,n)}m.length>0&&k.push(m)}return k}b.exports=d;var e=a("compare-angle")},{"compare-angle":106}],475:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a,b.length),d=new Array(b.length),f=new Array(b.length),g=[],h=0;h<b.length;++h){var i=c[h].length;f[h]=i,d[h]=!0,i<=1&&g.push(h)}for(;g.length>0;){var j=g.pop();d[j]=!1;for(var k=c[j],h=0;h<k.length;++h){var l=k[h];0==--f[l]&&g.push(l)}}for(var m=new Array(b.length),n=[],h=0;h<b.length;++h)if(d[h]){var j=n.length;m[h]=j,n.push(b[h])}else m[h]=-1;for(var o=[],h=0;h<a.length;++h){var p=a[h];d[p[0]]&&d[p[1]]&&o.push([m[p[0]],m[p[1]]])}return[o,n]}b.exports=d;var e=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":136}],476:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function e(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=[];return b}function f(a,b){function c(a){for(var c=a.length,d=[0],e=0;e<c;++e){var f=b[a[e]],g=b[a[(e+1)%c]],h=j(-f[0],f[1]),i=j(-f[0],g[1]),l=j(g[0],f[1]),m=j(g[0],g[1]);d=k(d,k(k(h,i),k(l,m)))}return d[d.length-1]>0}function f(a){for(var b=a.length,c=0;c<b;++c)if(!I[a[c]])return!1;return!0}var n=m(a,b);a=n[0],b=n[1];for(var o=b.length,p=(a.length,g(a,b.length)),q=0;q<o;++q)if(p[q].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var r=h(a,b);r=r.filter(c);for(var s=r.length,t=new Array(s),u=new Array(s),q=0;q<s;++q){t[q]=q;var v=new Array(s),w=r[q].map(function(a){return b[a]}),x=i([w]),y=0;a:for(var z=0;z<s;++z)if(v[z]=0,q!==z){for(var A=r[z],B=A.length,C=0;C<B;++C){var D=x(b[A[C]]);if(0!==D){D<0&&(v[z]=1,y+=1);continue a}}v[z]=1,y+=1}u[q]=[y,q,v]}u.sort(function(a,b){return b[0]-a[0]});for(var q=0;q<s;++q)for(var v=u[q],E=v[1],F=v[2],z=0;z<s;++z)F[z]&&(t[z]=E);for(var G=e(s),q=0;q<s;++q)G[q].push(t[q]),G[t[q]].push(q);for(var H={},I=d(o,!1),q=0;q<s;++q)for(var A=r[q],B=A.length,z=0;z<B;++z){var J=A[z],K=A[(z+1)%B],L=Math.min(J,K)+":"+Math.max(J,K);if(L in H){var M=H[L];G[M].push(q),G[q].push(M),I[J]=I[K]=!0}else H[L]=q}for(var N=[],O=d(s,-1),q=0;q<s;++q)t[q]!==q||f(r[q])?O[q]=-1:(N.push(q),O[q]=0);for(var n=[];N.length>0;){var P=N.pop(),Q=G[P];l(Q,function(a,b){return a-b});var R,S=Q.length,T=O[P];if(0===T){var A=r[P];R=[A]}for(var q=0;q<S;++q){var U=Q[q];if(!(O[U]>=0)&&(O[U]=1^T,N.push(U),0===T)){var A=r[U];f(A)||(A.reverse(),R.push(A))}}0===T&&n.push(R)}return n}b.exports=f;var g=a("edges-to-adjacency-list"),h=a("planar-dual"),i=a("point-in-big-polygon"),j=a("two-product"),k=a("robust-sum"),l=a("uniq"),m=a("./lib/trim-leaves")},{"./lib/trim-leaves":475,"edges-to-adjacency-list":136,"planar-dual":474,"point-in-big-polygon":478,"robust-sum":520,"two-product":552,uniq:556}],477:[function(a,b,c){"use strict";function d(a,b){this.x=a,this.y=b}b.exports=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var b=a.x-this.x,c=a.y-this.y;return b*b+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,b){return Math.atan2(this.x*b-this.y*a,this.x*a+this.y*b)},_matMult:function(a){var b=a[0]*this.x+a[1]*this.y,c=a[2]*this.x+a[3]*this.y;return this.x=b,this.y=c,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y,e=c*this.x+b*this.y;return this.x=d,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{}],478:[function(a,b,c){function d(){return!0}function e(a){return function(b,c){var e=a[b];return!!e&&!!e.queryPoint(c,d)}}function f(a){for(var b={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],h=d[1][1],i=[Math.min(g,h),Math.max(g,h)];f in b?b[f].push(i):b[f]=[i]}for(var j={},k=Object.keys(b),c=0;c<k.length;++c){var l=b[k[c]];j[k[c]]=n(l)}return e(j)}function g(a,b){return function(c){var d=o.le(b,c[0]);if(d<0)return 1;var e=a[d];if(!e){if(!(d>0&&b[d]===c[0]))return 1;e=a[d-1]}for(var f=1;e;){var g=e.key,h=l(c,g[0],g[1]);if(g[0][0]<g[1][0])if(h<0)e=e.left;else{if(!(h>0))return 0;f=-1,e=e.right}else if(h>0)e=e.left;else{if(!(h<0))return 0;f=1,e=e.right}}return f}}function h(a){return 1}function i(a){return function(b){return a(b[0],b[1])?0:1}}function j(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}function k(a){for(var b=a.length,c=[],d=[],e=0;e<b;++e)for(var k=a[e],l=k.length,n=l-1,o=0;o<l;n=o++){var p=k[n],q=k[o];p[0]===q[0]?d.push([p,q]):c.push([p,q])}if(0===c.length)return 0===d.length?h:i(f(d));var r=m(c),s=g(r.slabs,r.coordinates);return 0===d.length?s:j(f(d),s)}b.exports=k;var l=a("robust-orientation")[3],m=a("slab-decomposition"),n=a("interval-tree-1d"),o=a("binary-search-bounds")},{"binary-search-bounds":70,"interval-tree-1d":279,"robust-orientation":515,"slab-decomposition":532}],479:[function(a,b,c){function d(a,b,c){var d=e.segments(a),f=e.segments(b),g=e.combine(d,f),h=c(g);return e.polygon(h)}var e,f=a("./lib/build-log"),g=a("./lib/epsilon"),h=a("./lib/intersecter"),i=a("./lib/segment-chainer"),j=a("./lib/segment-selector"),k=a("./lib/geojson"),l=!1,m=g();e={buildLog:function(a){return!0===a?l=f():!1===a&&(l=!1),!1!==l&&l.list},epsilon:function(a){return m.epsilon(a)},segments:function(a){var b=h(!0,m,l);return a.regions.forEach(b.addRegion),{segments:b.calculate(a.inverted),inverted:a.inverted}},combine:function(a,b){return{combined:h(!1,m,l).calculate(a.segments,a.inverted,b.segments,b.inverted),inverted1:a.inverted,inverted2:b.inverted}},selectUnion:function(a){return{segments:j.union(a.combined,l),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:j.intersect(a.combined,l),inverted:a.inverted1&&a.inverted2}},selectDifference:function(a){return{segments:j.difference(a.combined,l),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:j.differenceRev(a.combined,l),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:j.xor(a.combined,l),inverted:a.inverted1!==a.inverted2}},polygon:function(a){return{regions:i(a.segments,m,l),inverted:a.inverted}},polygonFromGeoJSON:function(a){return k.toPolygon(e,a)},polygonToGeoJSON:function(a){return k.fromPolygon(e,m,a)},union:function(a,b){return d(a,b,e.selectUnion)},intersect:function(a,b){return d(a,b,e.selectIntersect)},difference:function(a,b){return d(a,b,e.selectDifference)},differenceRev:function(a,b){return d(a,b,e.selectDifferenceRev)},xor:function(a,b){return d(a,b,e.selectXor)}},"object"==typeof window&&(window.PolyBool=e),b.exports=e},{"./lib/build-log":480,"./lib/epsilon":481,"./lib/geojson":482,"./lib/intersecter":483,"./lib/segment-chainer":485,"./lib/segment-selector":486}],480:[function(a,b,c){function d(){function a(a,c){return b.list.push({type:a,data:c?JSON.parse(JSON.stringify(c)):void 0}),b}var b,c=0,d=!1;return b={list:[],segmentId:function(){return c++},checkIntersection:function(b,c){return a("check",{seg1:b,seg2:c})},segmentChop:function(b,c){return a("div_seg",{seg:b,pt:c}),a("chop",{seg:b,pt:c})},statusRemove:function(b){return a("pop_seg",{seg:b})},segmentUpdate:function(b){return a("seg_update",{seg:b})},segmentNew:function(b,c){return a("new_seg",{seg:b,primary:c})},segmentRemove:function(b){return a("rem_seg",{seg:b})},tempStatus:function(b,c,d){return a("temp_status",{seg:b,above:c,below:d})},rewind:function(b){return a("rewind",{seg:b})},status:function(b,c,d){return a("status",{seg:b,above:c,below:d})},vert:function(c){return c===d?b:(d=c,a("vert",{x:c}))},log:function(b){return"string"!=typeof b&&(b=JSON.stringify(b,!1,"  ")),a("log",{txt:b})},reset:function(){return a("reset")},selected:function(b){return a("selected",{segs:b})},chainStart:function(b){return a("chain_start",{seg:b})},chainRemoveHead:function(b,c){return a("chain_rem_head",{index:b,pt:c})},chainRemoveTail:function(b,c){return a("chain_rem_tail",{index:b,pt:c})},chainNew:function(b,c){return a("chain_new",{pt1:b,pt2:c})},chainMatch:function(b){return a("chain_match",{index:b})},chainClose:function(b){return a("chain_close",{index:b})},chainAddHead:function(b,c){return a("chain_add_head",{index:b,pt:c})},chainAddTail:function(b,c){return a("chain_add_tail",{index:b,pt:c})},chainConnect:function(b,c){return a("chain_con",{index1:b,index2:c})},chainReverse:function(b){return a("chain_rev",{index:b})},chainJoin:function(b,c){return a("chain_join",{index1:b,index2:c})},done:function(){return a("done")}}}b.exports=d},{}],481:[function(a,b,c){function d(a){"number"!=typeof a&&(a=1e-10);var b={epsilon:function(b){return"number"==typeof b&&(a=b),a},pointAboveOrOnLine:function(b,c,d){var e=c[0],f=c[1],g=d[0],h=d[1],i=b[0];return(g-e)*(b[1]-f)-(h-f)*(i-e)>=-a},pointBetween:function(b,c,d){var e=b[1]-c[1],f=d[0]-c[0],g=b[0]-c[0],h=d[1]-c[1],i=g*f+e*h;return!(i<a)&&!(i-(f*f+h*h)>-a)},pointsSameX:function(b,c){return Math.abs(b[0]-c[0])<a},pointsSameY:function(b,c){return Math.abs(b[1]-c[1])<a},pointsSame:function(a,c){return b.pointsSameX(a,c)&&b.pointsSameY(a,c)},pointsCompare:function(a,c){return b.pointsSameX(a,c)?b.pointsSameY(a,c)?0:a[1]<c[1]?-1:1:a[0]<c[0]?-1:1},pointsCollinear:function(b,c,d){var e=b[0]-c[0],f=b[1]-c[1],g=c[0]-d[0],h=c[1]-d[1];return Math.abs(e*h-g*f)<a},linesIntersect:function(b,c,d,e){var f=c[0]-b[0],g=c[1]-b[1],h=e[0]-d[0],i=e[1]-d[1],j=f*i-g*h;if(Math.abs(j)<a)return!1;var k=b[0]-d[0],l=b[1]-d[1],m=(h*l-i*k)/j,n=(f*l-g*k)/j,o={alongA:0,alongB:0,pt:[b[0]+m*f,b[1]+m*g]};return o.alongA=m<=-a?-2:m<a?-1:m-1<=-a?0:m-1<a?1:2,o.alongB=n<=-a?-2:n<a?-1:n-1<=-a?0:n-1<a?1:2,o},pointInsideRegion:function(b,c){for(var d=b[0],e=b[1],f=c[c.length-1][0],g=c[c.length-1][1],h=!1,i=0;i<c.length;i++){var j=c[i][0],k=c[i][1];k-e>a!=g-e>a&&(f-j)*(e-k)/(g-k)+j-d>a&&(h=!h),f=j,g=k}return h}};return b}b.exports=d},{}],482:[function(a,b,c){var d={toPolygon:function(a,b){function c(b){function c(b){var c=b.slice(0,b.length-1);return a.segments({inverted:!1,regions:[c]})}if(b.length<=0)return a.segments({inverted:!1,regions:[]});for(var d=c(b[0]),e=1;e<b.length;e++)d=a.selectDifference(a.combine(d,c(b[e])));return d}if("Polygon"===b.type)return a.polygon(c(b.coordinates));if("MultiPolygon"===b.type){for(var d=a.segments({inverted:!1,regions:[]}),e=0;e<b.coordinates.length;e++)d=a.selectUnion(a.combine(d,c(b.coordinates[e])));return a.polygon(d)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(a,b,c){function d(a,c){return b.pointInsideRegion([.5*(a[0][0]+a[1][0]),.5*(a[0][1]+a[1][1])],c)}function e(a){return{region:a,children:[]}}function f(a,b){for(var c=0;c<a.children.length;c++){var g=a.children[c];if(d(b,g.region))return void f(g,b)}for(var h=e(b),c=0;c<a.children.length;c++){var g=a.children[c];d(g.region,b)&&(h.children.push(g),a.children.splice(c,1),c--)}a.children.push(h)}function g(a,b){for(var c=0,d=a[a.length-1][0],e=a[a.length-1][1],f=[],g=0;g<a.length;g++){var h=a[g][0],i=a[g][1];f.push([h,i]),c+=i*d-h*e,d=h,e=i}return c<0!==b&&f.reverse(),f.push([f[0][0],f[0][1]]),f}function h(a){var b=[g(a.region,!1)];m.push(b);for(var c=0;c<a.children.length;c++)b.push(i(a.children[c]))}function i(a){for(var b=0;b<a.children.length;b++)h(a.children[b]);return g(a.region,!0)}c=a.polygon(a.segments(c));for(var j=e(null),k=0;k<c.regions.length;k++){var l=c.regions[k];l.length<3||f(j,l)}for(var m=[],k=0;k<j.children.length;k++)h(j.children[k]);return m.length<=0?{type:"Polygon",coordinates:[]}:1==m.length?{type:"Polygon",coordinates:m[0]}:{type:"MultiPolygon",coordinates:m}}};b.exports=d},{}],483:[function(a,b,c){function d(a,b,c){function d(a,b){return{id:c?c.segmentId():-1,start:a,end:b,myFill:{above:null,below:null},otherFill:null}}function f(a,b,d){return{id:c?c.segmentId():-1,start:a,end:b,myFill:{above:d.myFill.above,below:d.myFill.below},otherFill:null}}function g(a,c,d,e,f,g){var h=b.pointsCompare(c,f);return 0!==h?h:b.pointsSame(d,g)?0:a!==e?a?1:-1:b.pointAboveOrOnLine(d,e?f:g,e?g:f)?1:-1}function h(a,b){o.insertBefore(a,function(c){return g(a.isStart,a.pt,b,c.isStart,c.pt,c.other.pt)<0})}function i(a,b){var c=e.node({isStart:!0,pt:a.start,seg:a,primary:b,other:null,status:null});return h(c,a.end),c}function j(a,b,c){var d=e.node({isStart:!1,pt:b.end,seg:b,primary:c,other:a,status:null});a.other=d,h(d,a.pt)}function k(a,b){var c=i(a,b);return j(c,a,b),c}function l(a,b){c&&c.segmentChop(a.seg,b),a.other.remove(),a.seg.end=b,a.other.pt=b,h(a.other,a.pt)}function m(a,b){var c=f(b,a.seg.end,a.seg);return l(a,b),k(c,a.primary)}function n(d,f){function g(a,c){var d=a.seg.start,e=a.seg.end,f=c.seg.start,g=c.seg.end;return b.pointsCollinear(d,f,g)?b.pointsCollinear(e,f,g)?1:b.pointAboveOrOnLine(e,f,g)?1:-1:b.pointAboveOrOnLine(d,f,g)?1:-1}function h(a,d){var e=a.seg,f=d.seg,g=e.start,h=e.end,i=f.start,j=f.end;c&&c.checkIntersection(e,f);var k=b.linesIntersect(g,h,i,j);if(!1===k){if(!b.pointsCollinear(g,h,i))return!1;if(b.pointsSame(g,j)||b.pointsSame(h,i))return!1;var l=b.pointsSame(g,i),n=b.pointsSame(h,j);if(l&&n)return d;var o=!l&&b.pointBetween(g,i,j),p=!n&&b.pointBetween(h,i,j);if(l)return p?m(d,h):m(a,j),d;o&&(n||(p?m(d,h):m(a,j)),m(d,g))}else 0===k.alongA&&(-1===k.alongB?m(a,i):0===k.alongB?m(a,k.pt):1===k.alongB&&m(a,j)),0===k.alongB&&(-1===k.alongA?m(d,g):0===k.alongA?m(d,k.pt):1===k.alongA&&m(d,h));return!1}for(var i=e.create(),j=[];!o.isEmpty();){var k=o.getHead();if(c&&c.vert(k.pt[0]),k.isStart){c&&c.segmentNew(k.seg,k.primary);var l=function(a){return i.findTransition(function(b){return g(a,b.ev)>0})}(k),n=l.before?l.before.ev:null,p=l.after?l.after.ev:null;c&&c.tempStatus(k.seg,!!n&&n.seg,!!p&&p.seg);var q=function(){if(n){var a=h(k,n);if(a)return a}return!!p&&h(k,p)}();if(q){if(a){var r;r=null===k.seg.myFill.below||k.seg.myFill.above!==k.seg.myFill.below,r&&(q.seg.myFill.above=!q.seg.myFill.above)}else q.seg.otherFill=k.seg.myFill;c&&c.segmentUpdate(q.seg),k.other.remove(),k.remove()}if(o.getHead()!==k){c&&c.rewind(k.seg);continue}if(a){var r;r=null===k.seg.myFill.below||k.seg.myFill.above!==k.seg.myFill.below,k.seg.myFill.below=p?p.seg.myFill.above:d,k.seg.myFill.above=r?!k.seg.myFill.below:k.seg.myFill.below}else if(null===k.seg.otherFill){var s;s=p?k.primary===p.primary?p.seg.otherFill.above:p.seg.myFill.above:k.primary?f:d,k.seg.otherFill={above:s,below:s}}c&&c.status(k.seg,!!n&&n.seg,!!p&&p.seg),k.other.status=l.insert(e.node({ev:k}))}else{var t=k.status;if(null===t)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(i.exists(t.prev)&&i.exists(t.next)&&h(t.prev.ev,t.next.ev),c&&c.statusRemove(t.ev.seg),t.remove(),!k.primary){var u=k.seg.myFill;k.seg.myFill=k.seg.otherFill,k.seg.otherFill=u}j.push(k.seg)}o.getHead().remove()}return c&&c.done(),j}var o=e.create();return a?{addRegion:function(a){for(var c,e=a[a.length-1],f=0;f<a.length;f++){c=e,e=a[f];var g=b.pointsCompare(c,e);0!==g&&k(d(g<0?c:e,g<0?e:c),!0)}},calculate:function(a){return n(a,!1)}}:{calculate:function(a,b,c,d){return a.forEach(function(a){k(f(a.start,a.end,a),!0)}),c.forEach(function(a){k(f(a.start,a.end,a),!1)}),n(b,d)}}}var e=a("./linked-list");b.exports=d},{"./linked-list":484}],484:[function(a,b,c){var d={create:function(){var a={root:{root:!0,next:null},exists:function(b){return null!==b&&b!==a.root},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(b,c){for(var d=a.root,e=a.root.next;null!==e;){if(c(e))return b.prev=e.prev,b.next=e,e.prev.next=b,void(e.prev=b);d=e,e=e.next}d.next=b,b.prev=d,b.next=null},findTransition:function(b){for(var c=a.root,d=a.root.next;null!==d&&!b(d);)c=d,d=d.next;return{before:c===a.root?null:c,after:d,insert:function(a){return a.prev=c,a.next=d,c.next=a,null!==d&&(d.prev=a),a}}}};return a},node:function(a){return a.prev=null,a.next=null,a.remove=function(){a.prev.next=a.next,a.next&&(a.next.prev=a.prev),a.prev=null,a.next=null},a}};b.exports=d},{}],485:[function(a,b,c){function d(a,b,c){var d=[],e=[];return a.forEach(function(a){function f(a,b,c){return m.index=a,m.matches_head=b,m.matches_pt1=c,m===k?(m=l,!1):(m=null,!0)}function g(a){c&&c.chainReverse(a),d[a].reverse()}function h(a,e){var f=d[a],g=d[e],h=f[f.length-1],i=f[f.length-2],j=g[0],k=g[1];b.pointsCollinear(i,h,j)&&(c&&c.chainRemoveTail(a,h),f.pop(),h=i),b.pointsCollinear(h,j,k)&&(c&&c.chainRemoveHead(e,j),g.shift()),c&&c.chainJoin(a,e),d[a]=f.concat(g),d.splice(e,1)}var i=a.start,j=a.end;if(b.pointsSame(i,j))return void console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");c&&c.chainStart(a);for(var k={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},m=k,n=0;n<d.length;n++){var o=d[n],p=o[0],q=(o[1],o[o.length-1]);o[o.length-2];if(b.pointsSame(p,i)){if(f(n,!0,!0))break}else if(b.pointsSame(p,j)){if(f(n,!0,!1))break}else if(b.pointsSame(q,i)){if(f(n,!1,!0))break}else if(b.pointsSame(q,j)&&f(n,!1,!1))break}if(m===k)return d.push([i,j]),void(c&&c.chainNew(i,j));if(m===l){c&&c.chainMatch(k.index);var r=k.index,s=k.matches_pt1?j:i,t=k.matches_head,o=d[r],u=t?o[0]:o[o.length-1],v=t?o[1]:o[o.length-2],w=t?o[o.length-1]:o[0],x=t?o[o.length-2]:o[1];return b.pointsCollinear(v,u,s)&&(t?(c&&c.chainRemoveHead(k.index,s),o.shift()):(c&&c.chainRemoveTail(k.index,s),o.pop()),u=v),b.pointsSame(w,s)?(d.splice(r,1),b.pointsCollinear(x,w,u)&&(t?(c&&c.chainRemoveTail(k.index,u),o.pop()):(c&&c.chainRemoveHead(k.index,u),o.shift())),c&&c.chainClose(k.index),void e.push(o)):void(t?(c&&c.chainAddHead(k.index,s),o.unshift(s)):(c&&c.chainAddTail(k.index,s),o.push(s)))}var y=k.index,z=l.index;c&&c.chainConnect(y,z);var A=d[y].length<d[z].length;k.matches_head?l.matches_head?A?(g(y),h(y,z)):(g(z),h(z,y)):h(z,y):l.matches_head?h(y,z):A?(g(y),h(z,y)):(g(z),h(y,z))}),e}b.exports=d},{}],486:[function(a,b,c){function d(a,b,c){var d=[];return a.forEach(function(a){var e=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);0!==b[e]&&d.push({id:c?c.segmentId():-1,start:a.start,end:a.end,myFill:{above:1===b[e],below:2===b[e]},otherFill:null})}),c&&c.selected(d),d}var e={union:function(a,b){return d(a,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],b)},intersect:function(a,b){return d(a,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],b)},difference:function(a,b){return d(a,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],b)},differenceRev:function(a,b){return d(a,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],b)},xor:function(a,b){return d(a,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],b)}};b.exports=e},{}],487:[function(a,b,c){"use strict";function d(a,b,c,d,h){e.length<d.length&&(e=new Float64Array(d.length),f=new Float64Array(d.length),g=new Float64Array(d.length));for(var i=0;i<d.length;++i)e[i]=a[i]-d[i],f[i]=b[i]-a[i],g[i]=c[i]-a[i];for(var j=0,k=0,l=0,m=0,n=0,o=0,i=0;i<d.length;++i){var p=f[i],q=g[i],r=e[i];j+=p*p,k+=p*q,
l+=q*q,m+=r*p,n+=r*q,o+=r*r}var s,t=Math.abs(j*l-k*k),u=k*n-l*m,v=k*m-j*n;if(u+v<=t)if(u<0)v<0&&m<0?(v=0,-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o)):(u=0,n>=0?(v=0,s=o):-n>=l?(v=1,s=l+2*n+o):(v=-n/l,s=n*v+o));else if(v<0)v=0,m>=0?(u=0,s=o):-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o);else{var w=1/t;u*=w,v*=w,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o}else{var x,y,z,A;u<0?(x=k+m,y=l+n,y>x?(z=y-x,A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(u=0,y<=0?(v=1,s=l+2*n+o):n>=0?(v=0,s=o):(v=-n/l,s=n*v+o))):v<0?(x=k+n,y=j+m,y>x?(z=y-x,A=j-2*k+l,z>=A?(v=1,u=0,s=l+2*n+o):(v=z/A,u=1-v,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(v=0,y<=0?(u=1,s=j+2*m+o):m>=0?(u=0,s=o):(u=-m/j,s=m*u+o))):(z=l+n-k-m,z<=0?(u=0,v=1,s=l+2*n+o):(A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)))}for(var B=1-u-v,i=0;i<d.length;++i)h[i]=B*a[i]+u*b[i]+v*c[i];return s<0?0:s}var e=new Float64Array(4),f=new Float64Array(4),g=new Float64Array(4);b.exports=d},{}],488:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],489:[function(b,c,d){(function(b){!function(e){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,"."),d+g(a.split("."),b).join(".")}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:x}function l(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<q;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=i<=t?y:i>=t+z?z:i-t,!(l<n);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;h<q;++h)(p=a[h])<128&&u.push(L(p));for(d=e=u.length,e&&u.push(E);d<q;){for(j=w,h=0;h<q;++h)(p=a[h])>=b&&p<j&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;h<q;++h)if(p=a[h],p<b&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=n<=g?y:n>=g+z?z:n-g,!(k<o);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],490:[function(a,b,c){b.exports=a("gl-quat/slerp")},{"gl-quat/slerp":236}],491:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],492:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],493:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":491,"./encode":492}],494:[function(a,b,c){"use strict";function d(a,b,c,g,h){for(c=c||0,g=g||a.length-1,h=h||f;g>c;){if(g-c>600){var i=g-c+1,j=b-c+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(j-i/2<0?-1:1);d(a,b,Math.max(c,Math.floor(b-j*l/i+m)),Math.min(g,Math.floor(b+(i-j)*l/i+m)),h)}var n=a[b],o=c,p=g;for(e(a,c,b),h(a[g],n)>0&&e(a,c,g);o<p;){for(e(a,o,p),o++,p--;h(a[o],n)<0;)o++;for(;h(a[p],n)>0;)p--}0===h(a[c],n)?e(a,c,p):(p++,e(a,p,g)),p<=b&&(c=p+1),b<=p&&(g=p-1)}}function e(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function f(a,b){return a<b?-1:a>b?1:0}b.exports=d},{}],495:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;f<c;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/add");b.exports=d},{"big-rat/add":54}],496:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a.length),c=0;c<a.length;++c)b[c]=e(a[c]);return b}b.exports=d;var e=a("big-rat")},{"big-rat":57}],497:[function(a,b,c){"use strict";function d(a,b){for(var c=e(b),d=a.length,g=new Array(d),h=0;h<d;++h)g[h]=f(a[h],c);return g}var e=a("big-rat"),f=a("big-rat/mul");b.exports=d},{"big-rat":57,"big-rat/mul":66}],498:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;f<c;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/sub");b.exports=d},{"big-rat/sub":68}],499:[function(a,b,c){"use strict";function d(a){a.sort(f);for(var b=a.length,c=0,d=0;d<b;++d){var h=a[d],i=g(h);if(0!==i){if(c>0){var j=a[c-1];if(0===e(h,j)&&g(j)!==i){c-=1;continue}}a[c++]=h}}return a.length=c,a}var e=a("compare-cell"),f=a("compare-oriented-cell"),g=a("cell-orientation");b.exports=d},{"cell-orientation":90,"compare-cell":107,"compare-oriented-cell":108}],500:[function(a,b,c){"use strict";function d(a,b){function c(a){a?o(a):null===a&&p(),d()}function d(b){if("number"==typeof b)return k(b);b&&!Array.isArray(b)&&(b=[b]),a._refresh(),y.forEach(function(a,c){if(a){if(b&&(b[c]?a.draw=!0:a.draw=!1),!a.draw)return void(a.draw=!0);k(c)}})}function k(a){"number"==typeof a&&(a=y[a]),null!=a&&a&&a.count&&a.color&&a.opacity&&a.positions&&a.positions.length>1&&(a.scaleRatio=[a.scale[0]*a.viewport.width,a.scale[1]*a.viewport.height],q(a),a.after&&a.after(a))}function o(a){if(a){null!=a.length?"number"==typeof a[0]&&(a=[{positions:a}]):Array.isArray(a)||(a=[a]);var b=0,c=0;if(y=a.map(function(a,d){var k=y[d];return a?("function"==typeof a?a={after:a}:"number"==typeof a[0]&&(a={positions:a}),a=h(a,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),k||(y[d]=k={id:d,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},a=i({},x,a)),g(k,a,[{lineWidth:function(a){return.5*+a},capSize:function(a){return.5*+a},opacity:parseFloat,errors:function(a){return a=j(a),c+=a.length,a},positions:function(a,c){return a=j(a,"float64"),c.count=Math.floor(a.length/2),c.bounds=e(a,2),c.offset=b,b+=c.count,a}},{color:function(a,b){var c=b.count;if(a||(a="transparent"),!Array.isArray(a)||"number"==typeof a[0]){var d=a;a=Array(c);for(var e=0;e<c;e++)a[e]=d}if(a.length<c)throw Error("Not enough colors");for(var g=new Uint8Array(4*c),h=0;h<c;h++){var i=f(a[h],"uint8");g.set(i,4*h)}return g},range:function(a,b,c){var d=b.bounds;return a||(a=d),b.scale=[1/(a[2]-a[0]),1/(a[3]-a[1])],b.translate=[-a[0],-a[1]],b.scaleFract=m(b.scale),b.translateFract=m(b.translate),a},viewport:function(a){var b;return Array.isArray(a)?b={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]}:a?(b={x:a.x||a.left||0,y:a.y||a.top||0},a.right?b.width=a.right-b.x:b.width=a.w||a.width||0,a.bottom?b.height=a.bottom-b.y:b.height=a.h||a.height||0):b={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight},b}}]),k):k}),b||c){var d=y.reduce(function(a,b,c){return a+(b?b.count:0)},0),k=new Float64Array(2*d),n=new Uint8Array(4*d),o=new Float32Array(4*d);y.forEach(function(a,b){if(a){var c=a.positions,d=a.count,e=a.offset,f=a.color,g=a.errors;d&&(n.set(f,4*e),o.set(g,4*e),k.set(c,2*e))}}),r(l(k)),s(m(k)),t(n),u(o)}}}function p(){r.destroy(),s.destroy(),t.destroy(),u.destroy(),v.destroy()}if("function"==typeof a?(b||(b={}),b.regl=a):b=a,b.length&&(b.positions=b),a=b.regl,!a.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var q,r,s,t,u,v,w=a._gl,x={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},y=[];return t=a.buffer({usage:"dynamic",type:"uint8",data:null}),r=a.buffer({usage:"dynamic",type:"float",data:null}),s=a.buffer({usage:"dynamic",type:"float",data:null}),u=a.buffer({usage:"dynamic",type:"float",data:null}),v=a.buffer({usage:"static",type:"float",data:n}),o(b),q=a({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:a.prop("range"),lineWidth:a.prop("lineWidth"),capSize:a.prop("capSize"),opacity:a.prop("opacity"),scale:a.prop("scale"),translate:a.prop("translate"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),viewport:function(a,b){return[b.viewport.x,b.viewport.y,a.viewportWidth,a.viewportHeight]}},attributes:{color:{buffer:t,offset:function(a,b){return 4*b.offset},divisor:1},position:{buffer:r,offset:function(a,b){return 8*b.offset},divisor:1},positionFract:{buffer:s,offset:function(a,b){return 8*b.offset},divisor:1},error:{buffer:u,offset:function(a,b){return 16*b.offset},divisor:1},direction:{buffer:v,stride:24,offset:0},lineOffset:{buffer:v,stride:24,offset:8},capOffset:{buffer:v,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:!1,instances:a.prop("count"),count:n.length}),i(c,{update:o,draw:d,destroy:p,regl:a,gl:w,canvas:w.canvas,groups:y}),c}var e=a("array-bounds"),f=a("color-normalize"),g=a("update-diff"),h=a("pick-by-alias"),i=a("object-assign"),j=a("flatten-vertex-data"),k=a("to-float32"),l=k.float32,m=k.fract32;b.exports=d;var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":48,"color-normalize":99,"flatten-vertex-data":143,"object-assign":462,"pick-by-alias":473,"to-float32":547,"update-diff":558}],501:[function(a,b,c){"use strict";function d(a,b){function c(a){a?q(a):null===a&&r(),d()}function d(a){if("number"==typeof a)return p(a);a&&!Array.isArray(a)&&(a=[a]),C.forEach(function(b,c){if(a&&(a[c]?b.draw=!0:b.draw=!1),!b.draw)return void(b.draw=!0);p(c)})}function p(b){"number"==typeof b&&(b=C[b]),b&&b.count&&b.opacity&&b.positions&&b.positions.length>2&&(a._refresh(),b.fill&&b.triangles&&b.triangles.length>2&&u(b),b.thickness&&b.color&&(b.scaleRatio=[b.scale[0]*b.viewport.width,b.scale[1]*b.viewport.height],b.scaleRatio[0]>E||b.scaleRatio[1]>E?t(b):"rect"===b.join||!b.join&&(b.thickness<=2||b.positions.length>=F)?t(b):s(b),b.after&&b.after(b)))}function q(a){if(a){null!=a.length?"number"==typeof a[0]&&(a=[{positions:a}]):Array.isArray(a)||(a=[a]);var b=0;if(C=a.map(function(a,c){var d=C[c];return a?("function"==typeof a?a={after:a}:"number"==typeof a[0]&&(a={positions:a}),a=k(a,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color stroke colors stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",after:"after callback done pass"}),d||(C[c]=d={id:c,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,offset:0,dashLength:0,hole:!0},a=i({},B,a)),l(d,a,[{thickness:parseFloat,opacity:parseFloat,miterLimit:parseFloat,overlay:Boolean,join:function(a){return a},after:function(a){return a},hole:function(a){return a||[]},positions:function(a,c,d){a=m(a,"float64");var e=Math.floor(a.length/2),f=h(a,2);return c.range||d.range||(d.range=f),c.count=e,c.bounds=f,b+=e,a},fill:function(a){return a?g(a,"uint8"):null},dashes:function(a,b,c){var d,e=b.dashLength;if(!a||a.length<2)e=1,d=new Uint8Array([255,255,255,255,255,255,255,255]);else{e=0;for(var f=0;f<a.length;++f)e+=a[f];d=new Uint8Array(e*D);for(var g=0,h=255,i=0;i<2;i++)for(var j=0;j<a.length;++j){for(var k=0,l=a[j]*D*.5;k<l;++k)d[g++]=h;h^=255}}return z.subimage({data:d,width:d.length,height:1},0,b.id),b.dashLength=e,d}},{close:function(a,b,c){return null!=a?a:b.positions.length>=4&&b.positions[0]===b.positions[b.positions.length-2]&&b.positions[1]===b.positions[b.positions.length-1]},positions:function(a,b,c){if(b.fill&&a.length){for(var d=[],e={},f=0,g=0,h=0,i=b.count;g<i;g++){var j=b.positions[2*g],k=b.positions[2*g+1];Number.isNaN(j)||Number.isNaN(k)?(j=b.positions[2*f],k=b.positions[2*f+1],e[g]=f):f=g,d[h++]=j,d[h++]=k}for(var l=n(d,b.hole),m=0,o=l.length;m<o;m++)null!=e[l[m]]&&(l[m]=e[l[m]]);b.triangles=l}return b.positions},color:function(a,b,c){var d=b.count;if(a||(a="transparent"),!Array.isArray(a)||"number"==typeof a[0]){var e=a;a=Array(d);for(var f=0;f<d;f++)a[f]=e}if(a.length<d)throw Error("Not enough colors");for(var h=new Uint8Array(4*d+4),i=0;i<d;i++){var j=g(a[i],"uint8");h.set(j,4*i)}return h},range:function(a,b,c){if(!b.count)return null;var d=b.bounds;a||(a=d);var f=o(a.slice(),2,d);return b.scale=[1/(f[2]-f[0]),1/(f[3]-f[1])],b.translate=[-f[0],-f[1]],b.scaleFract=e(b.scale),b.translateFract=e(b.translate),a},viewport:function(a){var b;return Array.isArray(a)?b={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]}:a?(b={x:a.x||a.left||0,y:a.y||a.top||0},a.right?b.width=a.right-b.x:b.width=a.w||a.width||0,a.bottom?b.height=a.bottom-b.y:b.height=a.h||a.height||0):b={x:0,y:0,width:A.drawingBufferWidth,height:A.drawingBufferHeight},b}}]),d):d}),b){var d=2*b+6*C.length,j=new Float64Array(d),p=0,q=new Uint8Array(2*d);C.forEach(function(a,b){if(a){var c=a.positions,d=a.count,e=a.color;if(a.offset=p,d){var f=new Float64Array(c.length);f.set(c),o(f,2,a.bounds),a.close?c[0]===c[2*d-2]&&c[1]===c[2*d-1]?(j[2*p+0]=f[2*d-4],j[2*p+1]=f[2*d-3]):(j[2*p+0]=f[2*d-2],j[2*p+1]=f[2*d-1]):(j[2*p+0]=f[0],j[2*p+1]=f[1]),q[4*p+0]=e[0],q[4*p+1]=e[1],q[4*p+2]=e[2],q[4*p+3]=e[3],j.set(f,2*p+2),q.set(e,4*p+4),a.close?c[0]===c[2*d-2]&&c[1]===c[2*d-1]?(j[2*p+2*d+2]=f[2],j[2*p+2*d+3]=f[3],p+=d+2,a.count-=1):(j[2*p+2*d+2]=f[0],j[2*p+2*d+3]=f[1],j[2*p+2*d+4]=f[2],j[2*p+2*d+5]=f[3],p+=d+3):(j[2*p+2*d+2]=f[2*d-2],j[2*p+2*d+3]=f[2*d-1],j[2*p+2*d+4]=f[2*d-2],j[2*p+2*d+5]=f[2*d-1],p+=d+3)}}}),v(q),x(f(j)),y(e(j))}return c}}function r(){C.length=0,v.destroy(),w.destroy(),x.destroy(),z.destroy()}if("function"==typeof a?(b||(b={}),b.regl=a):b=a,b.length&&(b.positions=b),a=b.regl,!a.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,t,u,v,w,x,y,z,A=a._gl,B={positions:[],dashes:null,join:null,miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:null,fill:null},C=[],D=2,E=3e6,F=1e4;v=a.buffer({usage:"dynamic",type:"uint8",data:null}),w=a.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x=a.buffer({usage:"dynamic",type:"float",data:null}),y=a.buffer({usage:"dynamic",type:"float",data:null}),z=a.texture({channels:1,width:256,height:2048,mag:"linear",min:"linear"}),q(b);var G={primitive:"triangle strip",instances:a.prop("count"),count:4,offset:0,uniforms:{miterMode:function(a,b){return"round"===b.join?2:1},miterLimit:a.prop("miterLimit"),scale:a.prop("scale"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),translate:a.prop("translate"),thickness:a.prop("thickness"),dashPattern:z,dashLength:a.prop("dashLength"),dashShape:[256,2048],opacity:a.prop("opacity"),pixelRatio:a.context("pixelRatio"),id:a.prop("id"),scaleRatio:a.prop("scaleRatio"),viewport:function(a,b){return[b.viewport.x,b.viewport.y,a.viewportWidth,a.viewportHeight]}},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(a,b){return!b.overlay}},scissor:{enable:!0,box:a.prop("viewport")},stencil:!1,viewport:a.prop("viewport")};return s=a(i({cull:{enable:!0,face:"back"},vert:j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\nuniform float miterLimit, dashLength, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float MAX_LINES = 256.;\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIST = 1.;\n\n//TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n//TODO: precalculate dot products, normalize things beforehead etc.\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\tfloat depth = (MAX_LINES - 1. - id) / MAX_LINES;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevDirection = normalize(prevDiff);\n\tvec2 currDirection = normalize(currDiff);\n\tvec2 nextDirection = normalize(nextDiff);\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t//collapsed/unidirectional segment cases\n\tif (prevDirection == currDirection) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (nextDirection == currDirection) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord + translate) * scale;\n\tvec2 aBotPosition = (aBotCoord + translate) * scale;\n\n\tvec2 bTopPosition = (bTopCoord + translate) * scale;\n\tvec2 bBotPosition = (bBotCoord + translate) * scale;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = (aCoord + translate) * scaleRatio + viewport.xy;\n\tendCoord = (bCoord + translate) * scaleRatio + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = (startCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = (endCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = (startCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = (endCutoff + translate.xyxy) * scaleRatio.xyxy;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:j(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aColor:{buffer:v,stride:4,offset:function(a,b){return 4*b.offset},divisor:1},bColor:{buffer:v,stride:4,offset:function(a,b){
return 4*b.offset+4},divisor:1},prevCoord:{buffer:x,stride:8,offset:function(a,b){return 8*b.offset},divisor:1},aCoord:{buffer:x,stride:8,offset:function(a,b){return 8+8*b.offset},divisor:1},bCoord:{buffer:x,stride:8,offset:function(a,b){return 16+8*b.offset},divisor:1},nextCoord:{buffer:x,stride:8,offset:function(a,b){return 24+8*b.offset},divisor:1}}},G)),t=a(i({vert:j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nconst float MAX_LINES = 256.;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n  return (position + translate) * scale\n       + (positionFract + translateFract) * scale\n       + (position + translate) * scaleFract\n       + (positionFract + translateFract) * scaleFract;\n}\n\nvoid main() {\n\t// vec2 scaleRatio = scale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\tfloat depth = (MAX_LINES - 1. - id) / (MAX_LINES);\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scaleRatio);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:j(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aCoord:{buffer:x,stride:8,offset:function(a,b){return 8+8*b.offset},divisor:1},bCoord:{buffer:x,stride:8,offset:function(a,b){return 16+8*b.offset},divisor:1},aCoordFract:{buffer:y,stride:8,offset:function(a,b){return 8+8*b.offset},divisor:1},bCoordFract:{buffer:y,stride:8,offset:function(a,b){return 16+8*b.offset},divisor:1},color:{buffer:v,stride:4,offset:function(a,b){return 4*b.offset},divisor:1}}},G)),u=a({primitive:"triangle",elements:function(a,b){return b.triangles},offset:0,vert:j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = (position + translate) * scale\n       + (positionFract + translateFract) * scale\n       + (position + translate) * scaleFract\n       + (positionFract + translateFract) * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:j(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= opacity;\n}\n"]),uniforms:{scale:a.prop("scale"),color:a.prop("fill"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),translate:a.prop("translate"),opacity:a.prop("opacity"),pixelRatio:a.context("pixelRatio"),id:a.prop("id"),viewport:function(a,b){return[b.viewport.x,b.viewport.y,a.viewportWidth,a.viewportHeight]}},attributes:{position:{buffer:x,stride:8,offset:function(a,b){return 8+8*b.offset}},positionFract:{buffer:y,stride:8,offset:function(a,b){return 8+8*b.offset}}},blend:G.blend,depth:{enable:!1},scissor:G.scissor,stencil:G.stencil,viewport:G.viewport}),i(c,{update:q,draw:d,destroy:r,regl:a,gl:A,canvas:A.canvas,lines:C}),c}function e(a){var b=new Float32Array(a.length);b.set(a);for(var c=0,d=b.length;c<d;c++)b[c]=a[c]-b[c];return b}function f(a){if(a instanceof Float32Array)return a;var b=new Float32Array(a);return b.set(a),b}var g=a("color-normalize"),h=a("array-bounds"),i=a("object-assign"),j=a("glslify"),k=a("pick-by-alias"),l=a("update-diff"),m=a("flatten-vertex-data"),n=a("earcut"),o=a("array-normalize");b.exports=d},{"array-bounds":48,"array-normalize":49,"color-normalize":99,earcut:135,"flatten-vertex-data":143,glslify:502,"object-assign":462,"pick-by-alias":473,"update-diff":558}],502:[function(a,b,c){arguments[4][169][0].apply(c,arguments)},{dup:169}],503:[function(a,b,c){"use strict";function d(a,b){function c(a){a?t(a):null===a&&x(),d()}function d(a){return"number"==typeof a?p(a):Array.isArray(a)?void a.forEach(function(a,b){if(null!=a)return a.length?p(a,b):p(a)}):void J.forEach(function(a,b){a&&p(b)})}function p(b,c){"number"==typeof b&&(b=J[b]);var d;if(Array.isArray(b)&&(d=b,b=J[c]),b&&b.count&&b.opacity){var e;if(d){e=Array(b.count);for(var f=0;f<d.length;f++)e[d[f]]=!0}if(b.markerIds[0]){a._refresh();var g=s(b.markerIds[0],b,e);z(g)}for(var h=[],i=1;i<b.markerIds.length;i++){var j=b.markerIds[i];j&&j.length&&[].push.apply(h,s(j,b,e))}h.length&&(a._refresh(),y(h))}}function s(a,b,c){function d(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var g=a[d];b[g-f]&&c.push(g)}return c}var e=b.range,f=b.offset;if(!a.snap){var g=c?d(a.data,c):a.elements;return[i({},b,{elements:g,offset:0,count:c?g.length:a.length,marker:K[a.id]})]}for(var h=[],j=a.lod,l=a.x,m=a.id,n=(e[2]-e[0])/b.viewport.width,o=j.length;o--;){var p=j[o];if(!(p.pixelSize&&p.pixelSize<n&&o>1)){var q=p.offset,r=p.count+q,s=k.ge(l,e[0],q,r-1),t=k.lt(l,e[2],s,r-1)+1;if(!(t<=s))if(c){var u=d(a.data.subarray(s,t),c);h.push(i({},b,{elements:u,marker:K[m],offset:0,count:u.length}))}else h.push(i({},b,{elements:a.elements,marker:K[m],offset:s,count:t-s}))}}return h}function t(b){if(b){null!=b.length?"number"==typeof b[0]&&(b=[{positions:b}]):Array.isArray(b)||(b=[b]);var c=0,d=0,e=0;J=b.map(function(b,g){var j=J[g];return b?("function"==typeof b?b={after:b}:"number"==typeof b[0]&&(b={positions:b}),b=l(b,{positions:"positions data points",snap:"snap cluster",size:"sizes size radius",borderSize:"borderSizes borderSize stroke-width strokeWidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",palette:"palette swatch",marker:"markers marker shape",range:"range dataBox",viewport:"viewport viewBox",opacity:"opacity alpha"}),j||(J[g]=j={id:g,scale:null,translate:null,scaleFract:null,translateFract:null,markerIds:[]},b=i({},I,b)),!b.positions||"marker"in b||(b.marker=j.marker,delete j.marker),m(j,b,[{snap:!0,size:function(a){return d+=a.length?1:0,a},borderSize:function(a){return d+=a.length?1:0,a},opacity:parseFloat,color:function(a){return a=w(a),e++,a},borderColor:function(a){return a=w(a),e++,a},positions:function(a,b,d){a=n(a,"float64");var e=b.count=Math.floor(a.length/2),g=b.bounds=e?f(a,2):null;return d.range||b.range||(delete b.range,d.range=g),b.offset=c,c+=e,d.marker||b.marker||(delete b.marker,d.marker=null),a}},{marker:function(a,b,c){if(b.markerIds.length=0,a&&"number"!=typeof a[0])for(var d=0,e=a.length;d<e;d++){var f=v(a[d]);b.markerIds[f]||(b.markerIds[f]=[]),b.markerIds[f].push(d)}else{for(var g=v(a),h=Array(b.count),i=0;i<b.count;i++)h[i]=i;b.markerIds[g]=h}return a}},{positions:function(b,c){for(var d=c.markerIds,e=c.snap,f=c.bounds,g=c.offset,i=0;i<d.length;i++){var j=d[i];if(j&&j.length){var k=j.length,l=void 0;if(j.id=i,e&&(!0===e||k>e)){j.snap=!0;var m=j.x=Array(k),n=j.w=Array(k),o=void 0;if(d.length>1){o=Array(2*k);for(var p=0;p<k;p++){var q=j[p];o[2*p]=b[2*q],o[2*p+1]=b[2*q+1]}}else o=new Float64Array(b.length),o.set(b);var r=new Uint32Array(k);j.lod=h(o,r,n,f),l=new Uint32Array(k);for(var s=0;s<k;s++){var t=r[s],u=j[t];l[s]=u+g,m[s]=b[2*u]}}else{l=new Uint32Array(k);for(var v=0;v<k;v++)l[v]=j[v]+g}j.data=l,j.elements=a.elements({primitive:"points",type:"uint32",data:l})}}},range:function(a,b,c){var d=b.bounds;if(d)return a||(a=d),b.scale=[1/(a[2]-a[0]),1/(a[3]-a[1])],b.translate=[-a[0],-a[1]],b.scaleFract=r(b.scale),b.translateFract=r(b.translate),a},viewport:function(a){var b;return Array.isArray(a)?b={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]}:a?(b={x:a.x||a.left||0,y:a.y||a.top||0},a.right?b.width=a.right-b.x:b.width=a.w||a.width||0,a.bottom?b.height=a.bottom-b.y:b.height=a.h||a.height||0):b={x:0,y:0,width:F.drawingBufferWidth,height:F.drawingBufferHeight},b}}]),j):j}),u({point:c,size:d,color:e})}}function u(a){var b=a.point,c=a.size,d=a.color,e=J.reduce(function(a,b,c){return a+(b?b.count:0)},0);if(b){var f=new Float32Array(2*e),g=new Float32Array(2*e);J.forEach(function(a,b){if(a){var c=a.positions,d=a.count,e=a.offset;d&&(f.set(q(c),2*e),g.set(r(c),2*e))}}),B(f),C(g)}if(c){var h=new Uint8Array(2*e);J.forEach(function(a,b){if(a){var c=a.count,d=a.offset,e=a.size,f=a.borderSize;if(c&&(e.length||f.length)){for(var g=new Uint8Array(2*c),i=0;i<c;i++)g[2*i]=Math.round(255*(null==e[i]?e:e[i])/N),g[2*i+1]=Math.round(255*(null==f[i]?f:f[i])/N);h.set(g,2*d)}}}),A(h)}if(d){var i=new Uint16Array(2*e);J.forEach(function(a,b){if(a){var c=a.count,d=a.offset,e=a.color,f=a.borderColor;if(c&&(e.length||f.length)){for(var g=new Uint16Array(2*c),h=0;h<c;h++)g[2*h]=null==e[h]?e:e[h],g[2*h+1]=null==f[h]?f:f[h];i.set(g,2*d)}}}),D(i)}}function v(b){var c=null==b?0:L.indexOf(b);if(c>=0)return c;var d;if(b instanceof Uint8Array||b instanceof Uint8ClampedArray)d=b;else{d=new Uint8Array(b.length);for(var e=0,f=b.length;e<f;e++)d[e]=255*b[e]}var g=Math.floor(Math.sqrt(d.length));return c=K.length,L.push(b),K.push(a.texture({channels:1,data:d,radius:g,mag:"linear",min:"linear"})),c}function w(a){Array.isArray(a)||(a=[a]);for(var b=G.length,c=[],d=0;d<a.length;d++){var f=a[d];if("number"!=typeof f){f=e(f,"uint8");var h=g(f,!1);if(null==H[h]){var i=G.length;H[h]=Math.floor(i/4),G[i]=f[0],G[i+1]=f[1],G[i+2]=f[2],G[i+3]=f[3]}c[d]=Math.min(H[h],M-1)}else c[d]=f}return b<4*M&&E.subimage({width:Math.min(.25*G.length,M),height:1,data:G.slice(0,4*M)},0,0),1===c.length?c[0]:c}function x(){J.length=0,A.destroy(),B.destroy(),C.destroy(),D.destroy(),E.destroy()}"function"==typeof a?(b||(b={}),b.regl=a):(b=a,a=null),b&&b.length&&(b.positions=b),a=b.regl;var y,z,A,B,C,D,E,F=a._gl,G=[],H={},I={color:"black",borderColor:"transparent",borderSize:1,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,offset:0,count:0,bounds:null,positions:[],snap:1e4},J=[],K=[null],L=[null],M=4096,N=100;E=a.texture({width:M,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),A=a.buffer({usage:"dynamic",type:"float",data:null}),D=a.buffer({usage:"dynamic",type:"uint16",data:null}),B=a.buffer({usage:"dynamic",type:"float",data:null}),C=a.buffer({usage:"dynamic",type:"float",data:null}),b.clone?(J=b.clone.groups.map(function(b){return b=i({},b),b.markerIds&&(b.markerIds=b.markerIds.map(function(b){var c=b.slice();return c.lod=b.lod,c.snap=b.snap,c.data=b.data,c.id=b.id,c.elements=a.elements({primitive:"points",type:"uint32",data:b.data}),c})),b}),b.clone.markers.forEach(function(a){v(a)}),u({point:!0,color:!0,size:!0})):t(b);var O={uniforms:{pixelRatio:a.context("pixelRatio"),palette:E,scale:a.prop("scale"),scaleFract:a.prop("scaleFract"),translate:a.prop("translate"),translateFract:a.prop("translateFract"),opacity:a.prop("opacity"),marker:a.prop("marker")},attributes:{position:B,positionFract:C,size:function(a,b){return b.size.length?{buffer:A,stride:2,offset:0}:{constant:[Math.round(255*b.size/N)]}},borderSize:function(a,b){return b.borderSize.length?{buffer:A,stride:2,offset:1}:{constant:[Math.round(255*b.borderSize/N)]}},colorId:function(a,b){return b.color.length?{buffer:D,stride:4,offset:0}:{constant:[b.color]}},borderColorId:function(a,b){return b.borderColor.length?{buffer:D,stride:4,offset:2}:{constant:[b.borderColor]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:a.prop("elements"),count:a.prop("count"),offset:a.prop("offset"),primitive:"points"};if(o)z=a(i({},O,{frag:j(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth, fragBorderSize, fragSize;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n\n  float centerFraction = fragBorderSize == 0. ? 2. : fragSize / (fragSize + fragBorderSize + 1.25);\n\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, 1.);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n"]),vert:j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float paletteSize = 4096., maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth, fragBorderSize, fragSize;\n\nvoid main() {\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n  fragBorderSize = borderSize;\n  fragSize = size;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t+ (position + translate) * scaleFract\n\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = borderSize == 0. ? 2. : 1. - 2. * borderSize / (size + borderSize);\n  fragWidth = 1. / gl_PointSize;\n}\n"]),uniforms:{color:function(a,b){var c=b.color.length?b.color[0]:b.color;return G.slice(4*c,4*c+4).map(function(a){return a/255})},borderColor:function(a,b){var c=b.borderColor.length?b.borderColor[0]:b.borderColor;return G.slice(4*c,4*c+4).map(function(a){return a/255})},pixelRatio:a.context("pixelRatio"),palette:E,scale:a.prop("scale"),scaleFract:a.prop("scaleFract"),translate:a.prop("translate"),translateFract:a.prop("translateFract"),opacity:a.prop("opacity"),marker:a.prop("marker")},attributes:{position:B,positionFract:C,size:O.attributes.size,borderSize:O.attributes.borderSize}}));else{var P=i({},O);P.frag=j(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  //max-distance alpha\n  if (dist < 0.003) discard;\n\n  //null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a);\n    return;\n  }\n\n  float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n  float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n  vec4 color = fragBorderColor;\n  color.a *= borderColorAmt;\n  color = mix(color, fragColor, colorAmt);\n  color.a *= opacity;\n\n  gl_FragColor = color;\n}\n"]),P.vert=j(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\nattribute float colorId, borderColorId;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float paletteSize = 4096., maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius,\n\t\tfragWidth, fragBorderColorLevel, fragColorLevel;\n\nvoid main() {\n  vec4 color = texture2D(palette, vec2((colorId + .5) / paletteSize, 0));\n  vec4 borderColor = texture2D(palette, vec2((borderColorId + .5) / paletteSize, 0));\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pixelRatio;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),y=a(P);var Q=i({},O);Q.frag=j(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif(radius > 1.0 + delta) {\n\t\tdiscard;\n\t\treturn;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),Q.vert=j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\nattribute float colorId, borderColorId;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float paletteSize = 4096., maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nvoid main() {\n  vec4 color = texture2D(palette, vec2((colorId + .5) / paletteSize, 0));\n  vec4 borderColor = texture2D(palette, vec2((borderColorId + .5) / paletteSize, 0));\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t+ (position + translate) * scaleFract\n\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = borderSize == 0. ? 2. : 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),z=a(Q)}return i(c,{update:t,draw:d,destroy:x,regl:a,gl:F,canvas:F.canvas,groups:J,markers:L}),c}var e=a("color-normalize"),f=a("array-bounds"),g=a("color-id"),h=a("snap-points-2d"),i=a("object-assign"),j=a("glslify"),k=a("binary-search-bounds"),l=a("pick-by-alias"),m=a("update-diff"),n=a("flatten-vertex-data"),o=a("is-iexplorer"),p=a("to-float32"),q=p.float32,r=p.fract32;b.exports=d},{"array-bounds":48,"binary-search-bounds":504,"color-id":97,"color-normalize":99,"flatten-vertex-data":143,glslify:505,"is-iexplorer":284,"object-assign":462,"pick-by-alias":473,"snap-points-2d":534,"to-float32":547,"update-diff":558}],504:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{dup:89}],505:[function(a,b,c){arguments[4][169][0].apply(c,arguments)},{dup:169}],506:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.createREGL=e()}(this,function(){function a(a,b){this.id=W++,this.type=a,this.data=b}function b(a){if(0===a.length)return[];var c=a.charAt(0),d=a.charAt(a.length-1);if(1<a.length&&c===d&&('"'===c||"'"===c))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,c.index)).concat(b(c[1])).concat(b(a.substr(c.index+c[0].length)));if(c=a.split("."),1===c.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(a=[],d=0;d<c.length;++d)a=a.concat(b(c[d]));return a}function c(a){return"["+b(a).join("][")+"]"}function d(){var a={"":0},b=[""];return{id:function(c){var d=a[c];return d||(d=a[c]=b.length,b.push(c),d)},str:function(a){return b[a]}}}function e(a,b,c){function d(){var b=window.innerWidth,d=window.innerHeight;a!==document.body&&(d=a.getBoundingClientRect(),b=d.right-d.left,d=d.bottom-d.top),e.width=c*b,e.height=c*d,V(e.style,{width:b+"px",height:d+"px"})}var e=document.createElement("canvas");return V(e.style,{border:0,margin:0,padding:0,top:0,left:0}),a.appendChild(e),a===document.body&&(e.style.position="absolute",V(a.style,{margin:0,padding:0})),window.addEventListener("resize",d,!1),d(),{canvas:e,onDestroy:function(){window.removeEventListener("resize",d),a.removeChild(e)}}}function f(a,b){function c(c){try{return a.getContext(c,b)}catch(a){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function g(a){return"string"==typeof a?a.split():a}function h(a){return"string"==typeof a?document.querySelector(a):a}function i(a){var b,c,d,i,j=a||{};a={};var k=[],l=[],m="undefined"==typeof window?1:window.devicePixelRatio,n=!1,o=function(a){},p=function(){};if("string"==typeof j?b=document.querySelector(j):"object"==typeof j&&("string"==typeof j.nodeName&&"function"==typeof j.appendChild&&"function"==typeof j.getBoundingClientRect?b=j:"function"==typeof j.drawArrays||"function"==typeof j.drawElements?(i=j,d=i.canvas):("gl"in j?i=j.gl:"canvas"in j?d=h(j.canvas):"container"in j&&(c=h(j.container)),"attributes"in j&&(a=j.attributes),"extensions"in j&&(k=g(j.extensions)),"optionalExtensions"in j&&(l=g(j.optionalExtensions)),"onDone"in j&&(o=j.onDone),"profile"in j&&(n=!!j.profile),"pixelRatio"in j&&(m=+j.pixelRatio))),b&&("canvas"===b.nodeName.toLowerCase()?d=b:c=b),!i){if(!d){if(!(b=e(c||document.body,o,m)))return null;d=b.canvas,p=b.onDestroy}i=f(d,a)}return i?{gl:i,canvas:d,container:c,extensions:k,optionalExtensions:l,pixelRatio:m,profile:n,onDone:o,onDestroy:p}:(p(),o("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function j(a,b){function c(b){b=b.toLowerCase();var c;try{c=d[b]=a.getExtension(b)}catch(a){}return!!c}for(var d={},e=0;e<b.extensions.length;++e){var f=b.extensions[e];if(!c(f))return b.onDestroy(),b.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return b.optionalExtensions.forEach(c),{extensions:d,restore:function(){Object.keys(d).forEach(function(a){if(!c(a))throw Error("(regl): error restoring extension "+a)})}}}function k(a){return!!a&&"object"==typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"==typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||_(a.data))}function l(a,b){for(var c=Array(a),d=0;d<a;++d)c[d]=b(d);return c}function m(a){var b,c;return b=(65535<a)<<4,a>>>=b,c=(255<a)<<3,a>>>=c,b|=c,c=(15<a)<<2,a>>>=c,b|=c,c=(3<a)<<1,b|c|a>>>c>>1}function n(a){a:{for(var b=16;268435456>=b;b*=16)if(a<=b){a=b;break a}a=0}return b=ba[m(a)>>2],0<b.length?b.pop():new ArrayBuffer(a)}function o(a){ba[m(a.byteLength)>>2].push(a)}function p(a,b,c,d,e,f){for(var g=0;g<b;++g)for(var h=a[g],i=0;i<c;++i)for(var j=h[i],k=0;k<d;++k)e[f++]=j[k]}function q(a,b,c,d,e){for(var f=1,g=c+1;g<b.length;++g)f*=b[g];var h=b[c];if(4==b.length-c){var i=b[c+1],j=b[c+2];for(b=b[c+3],g=0;g<h;++g)p(a[g],i,j,b,d,e),e+=f}else for(g=0;g<h;++g)q(a[g],b,c+1,d,e),e+=f}function r(a){return 0|ea[Object.prototype.toString.call(a)]}function s(a,b){for(var c=0;c<b.length;++c)a[c]=b[c]}function t(a,b,c,d,e,f,g){for(var h=0,i=0;i<c;++i)for(var j=0;j<d;++j)a[h++]=b[e*i+f*j+g]}function u(a,b,c){function d(b){this.id=h++,this.buffer=a.createBuffer(),this.type=b,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,c.profile&&(this.stats={size:0})}function e(b,c,d){b.byteLength=c.byteLength,a.bufferData(b.type,c,d)}function f(a,b,c,d,f,g){if(a.usage=c,Array.isArray(b)){if(a.dtype=d||5126,0<b.length)if(Array.isArray(b[0])){f=ia(b);for(var h=d=1;h<f.length;++h)d*=f[h];a.dimension=d,b=ha(b,f,a.dtype),e(a,b,c),g?a.persistentData=b:ca.freeType(b)}else"number"==typeof b[0]?(a.dimension=f,f=ca.allocType(a.dtype,b.length),s(f,b),e(a,f,c),g?a.persistentData=f:ca.freeType(f)):_(b[0])&&(a.dimension=b[0].length,a.dtype=d||r(b[0])||5126,b=ha(b,[b.length,b[0].length],a.dtype),e(a,b,c),g?a.persistentData=b:ca.freeType(b))}else if(_(b))a.dtype=d||r(b),a.dimension=f,e(a,b,c),g&&(a.persistentData=new Uint8Array(new Uint8Array(b.buffer)));else if(k(b)){f=b.shape;var i=b.stride,h=b.offset,j=0,l=0,m=0,n=0;1===f.length?(j=f[0],l=1,m=i[0],n=0):2===f.length&&(j=f[0],l=f[1],m=i[0],n=i[1]),a.dtype=d||r(b.data)||5126,a.dimension=l,f=ca.allocType(a.dtype,j*l),t(f,b.data,j,l,m,n,h),e(a,f,c),g?a.persistentData=f:ca.freeType(f)}}function g(c){b.bufferCount--,a.deleteBuffer(c.buffer),c.buffer=null,delete i[c.id]}var h=0,i={};d.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)},d.prototype.destroy=function(){g(this)};var j=[];return c.profile&&(b.getTotalBufferSize=function(){var a=0;return Object.keys(i).forEach(function(b){a+=i[b].stats.size}),a}),{create:function(e,h,j,l){function m(b){var d=35044,e=null,g=0,h=0,i=1;return Array.isArray(b)||_(b)||k(b)?e=b:"number"==typeof b?g=0|b:b&&("data"in b&&(e=b.data),"usage"in b&&(d=ga[b.usage]),"type"in b&&(h=fa[b.type]),"dimension"in b&&(i=0|b.dimension),"length"in b&&(g=0|b.length)),n.bind(),e?f(n,e,d,h,i,l):(a.bufferData(n.type,g,d),n.dtype=h||5121,n.usage=d,n.dimension=i,n.byteLength=g),c.profile&&(n.stats.size=n.byteLength*ja[n.dtype]),m}b.bufferCount++;var n=new d(h);return i[n.id]=n,j||m(e),m._reglType="buffer",m._buffer=n,m.subdata=function(b,c){var d,e=0|(c||0);if(n.bind(),_(b))a.bufferSubData(n.type,e,b);else if(Array.isArray(b)){if(0<b.length)if("number"==typeof b[0]){var f=ca.allocType(n.dtype,b.length);s(f,b),a.bufferSubData(n.type,e,f),ca.freeType(f)}else(Array.isArray(b[0])||_(b[0]))&&(d=ia(b),f=ha(b,d,n.dtype),a.bufferSubData(n.type,e,f),ca.freeType(f))}else if(k(b)){d=b.shape;var g=b.stride,h=f=0,i=0,j=0;1===d.length?(f=d[0],h=1,i=g[0],j=0):2===d.length&&(f=d[0],h=d[1],i=g[0],j=g[1]),d=Array.isArray(b.data)?n.dtype:r(b.data),d=ca.allocType(d,f*h),t(d,b.data,f,h,i,j,b.offset),a.bufferSubData(n.type,e,d),ca.freeType(d)}return m},c.profile&&(m.stats=n.stats),m.destroy=function(){g(n)},m},createStream:function(a,b){var c=j.pop();return c||(c=new d(a)),c.bind(),f(c,b,35040,0,1,!1),c},destroyStream:function(a){j.push(a)},clear:function(){aa(i).forEach(g),j.forEach(g)},getBuffer:function(a){return a&&a._buffer instanceof d?a._buffer:null},restore:function(){aa(i).forEach(function(b){b.buffer=a.createBuffer(),a.bindBuffer(b.type,b.buffer),a.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:f}}function v(a,b,c,d){function e(a){this.id=i++,h[this.id]=this,this.buffer=a,this.primType=4,this.type=this.vertCount=0}function f(d,e,f,g,h,i,j){if(d.buffer.bind(),e){var l=j;j||_(e)&&(!k(e)||_(e.data))||(l=b.oes_element_index_uint?5125:5123),c._initBuffer(d.buffer,e,f,l,3)}else a.bufferData(34963,i,f),d.buffer.dtype=l||5121,d.buffer.usage=f,d.buffer.dimension=3,d.buffer.byteLength=i;if(l=j,!j){switch(d.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125}d.buffer.dtype=l}d.type=l,e=h,0>e&&(e=d.buffer.byteLength,5123===l?e>>=1:5125===l&&(e>>=2)),d.vertCount=e,e=g,0>g&&(e=4,g=d.buffer.dimension,1===g&&(e=0),2===g&&(e=1),3===g&&(e=4)),d.primType=e}function g(a){d.elementsCount--,delete h[a.id],a.buffer.destroy(),a.buffer=null}var h={},i=0,j={uint8:5121,uint16:5123};b.oes_element_index_uint&&(j.uint32=5125),e.prototype.bind=function(){this.buffer.bind()};var l=[];return{create:function(a,b){function h(a){if(a)if("number"==typeof a)i(a),l.primType=4,l.vertCount=0|a,l.type=5121;else{var b=null,c=35044,d=-1,e=-1,g=0,m=0;Array.isArray(a)||_(a)||k(a)?b=a:("data"in a&&(b=a.data),"usage"in a&&(c=ga[a.usage]),"primitive"in a&&(d=ka[a.primitive]),"count"in a&&(e=0|a.count),"type"in a&&(m=j[a.type]),"length"in a?g=0|a.length:(g=e,5123===m||5122===m?g*=2:5125!==m&&5124!==m||(g*=4))),f(l,b,c,d,e,g,m)}else i(),l.primType=4,l.vertCount=0,l.type=5121;return h}var i=c.create(null,34963,!0),l=new e(i._buffer);return d.elementsCount++,h(a),h._reglType="elements",h._elements=l,h.subdata=function(a,b){return i.subdata(a,b),h},h.destroy=function(){g(l)},h},createStream:function(a){var b=l.pop();return b||(b=new e(c.create(null,34963,!0,!1)._buffer)),f(b,a,35040,-1,-1,0,0),b},destroyStream:function(a){l.push(a)},getElements:function(a){return"function"==typeof a&&a._elements instanceof e?a._elements:null},clear:function(){aa(h).forEach(g)}}}function w(a){for(var b=ca.allocType(5123,a.length),c=0;c<a.length;++c)if(isNaN(a[c]))b[c]=65535;else if(1/0===a[c])b[c]=31744;else if(-1/0===a[c])b[c]=64512;else{la[0]=a[c];var d=ma[0],e=d>>>31<<15,f=(d<<1>>>24)-127,d=d>>13&1023;b[c]=-24>f?e:-14>f?e+(d+1024>>-14-f):15<f?e+31744:e+(f+15<<10)+d}return b}function x(a){return Array.isArray(a)||_(a)}function y(a){return Array.isArray(a)&&(0===a.length||"number"==typeof a[0])}function z(a){return!(!Array.isArray(a)||0===a.length||!x(a[0]))}function A(a){return Object.prototype.toString.call(a)}function B(a){if(!a)return!1;var b=A(a);return 0<=qa.indexOf(b)||(y(a)||z(a)||k(a))}function C(a,b){36193===a.type?(a.data=w(b),ca.freeType(b)):a.data=b}function D(a,b,c,d,e,f){if(a=void 0!==sa[a]?sa[a]:pa[a]*ra[b],f&&(a*=6),e){for(d=0;1<=c;)d+=a*c*c,c/=2;return d}return a*c*d}function E(a,b,c,d,e,f,g){function h(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function i(a,b){a.internalformat=b.internalformat,a.format=b.format,a.type=b.type,a.compressed=b.compressed,a.premultiplyAlpha=b.premultiplyAlpha,a.flipY=b.flipY,a.unpackAlignment=b.unpackAlignment,a.colorSpace=b.colorSpace,a.width=b.width,a.height=b.height,a.channels=b.channels}function j(a,b){if("object"==typeof b&&b){"premultiplyAlpha"in b&&(a.premultiplyAlpha=b.premultiplyAlpha),"flipY"in b&&(a.flipY=b.flipY),"alignment"in b&&(a.unpackAlignment=b.alignment),"colorSpace"in b&&(a.colorSpace=Q[b.colorSpace]),"type"in b&&(a.type=R[b.type]);var c=a.width,d=a.height,e=a.channels,f=!1;"shape"in b?(c=b.shape[0],d=b.shape[1],3===b.shape.length&&(e=b.shape[2],f=!0)):("radius"in b&&(c=d=b.radius),"width"in b&&(c=b.width),"height"in b&&(d=b.height),"channels"in b&&(e=b.channels,f=!0)),a.width=0|c,a.height=0|d,a.channels=0|e,c=!1,"format"in b&&(c=b.format,d=a.internalformat=S[c],a.format=fa[d],c in R&&!("type"in b)&&(a.type=R[c]),c in T&&(a.compressed=!0),c=!0),!f&&c?a.channels=pa[a.format]:f&&!c&&a.channels!==oa[a.format]&&(a.format=a.internalformat=oa[a.channels])}}function l(b){a.pixelStorei(37440,b.flipY),a.pixelStorei(37441,b.premultiplyAlpha),a.pixelStorei(37443,b.colorSpace),a.pixelStorei(3317,b.unpackAlignment)}function m(){h.call(this),this.yOffset=this.xOffset=0,this.data=null,
this.needsFree=!1,this.element=null,this.needsCopy=!1}function n(a,b){var c=null;if(B(b)?c=b:b&&(j(a,b),"x"in b&&(a.xOffset=0|b.x),"y"in b&&(a.yOffset=0|b.y),B(b.data)&&(c=b.data)),b.copy){var d=e.viewportWidth,f=e.viewportHeight;a.width=a.width||d-a.xOffset,a.height=a.height||f-a.yOffset,a.needsCopy=!0}else if(c){if(_(c))a.channels=a.channels||4,a.data=c,"type"in b||5121!==a.type||(a.type=0|ea[Object.prototype.toString.call(c)]);else if(y(c)){switch(a.channels=a.channels||4,d=c,f=d.length,a.type){case 5121:case 5123:case 5125:case 5126:f=ca.allocType(a.type,f),f.set(d),a.data=f;break;case 36193:a.data=w(d)}a.alignment=1,a.needsFree=!0}else if(k(c)){d=c.data,Array.isArray(d)||5121!==a.type||(a.type=0|ea[Object.prototype.toString.call(d)]);var g,h,i,l,f=c.shape,m=c.stride;3===f.length?(i=f[2],l=m[2]):l=i=1,g=f[0],h=f[1],f=m[0],m=m[1],a.alignment=1,a.width=g,a.height=h,a.channels=i,a.format=a.internalformat=oa[i],a.needsFree=!0,g=l,c=c.offset,i=a.width,l=a.height,h=a.channels;for(var n=ca.allocType(36193===a.type?5126:a.type,i*l*h),o=0,p=0;p<l;++p)for(var q=0;q<i;++q)for(var r=0;r<h;++r)n[o++]=d[f*q+m*p+g*r+c];C(a,n)}else if("[object HTMLCanvasElement]"===A(c)||"[object CanvasRenderingContext2D]"===A(c))"[object HTMLCanvasElement]"===A(c)?a.element=c:a.element=c.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if("[object HTMLImageElement]"===A(c))a.element=c,a.width=c.naturalWidth,a.height=c.naturalHeight,a.channels=4;else if("[object HTMLVideoElement]"===A(c))a.element=c,a.width=c.videoWidth,a.height=c.videoHeight,a.channels=4;else if(z(c)){for(d=a.width||c[0].length,f=a.height||c.length,m=a.channels,m=x(c[0][0])?m||c[0][0].length:m||1,g=da.shape(c),i=1,l=0;l<g.length;++l)i*=g[l];i=ca.allocType(36193===a.type?5126:a.type,i),da.flatten(c,g,"",i),C(a,i),a.alignment=1,a.width=d,a.height=f,a.channels=m,a.format=a.internalformat=oa[m],a.needsFree=!0}}else a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4}function o(b,c,e,f,g){var h=b.element,i=b.data,j=b.internalformat,k=b.format,m=b.type,n=b.width,o=b.height;l(b),h?a.texSubImage2D(c,g,e,f,k,m,h):b.compressed?a.compressedTexSubImage2D(c,g,e,f,j,n,o,i):b.needsCopy?(d(),a.copyTexSubImage2D(c,g,e,f,b.xOffset,b.yOffset,n,o)):a.texSubImage2D(c,g,e,f,n,o,k,m,i)}function p(){return ga.pop()||new m}function q(a){a.needsFree&&ca.freeType(a.data),m.call(a),ga.push(a)}function r(){h.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function s(a,b,c){var d=a.images[0]=p();a.mipmask=1,d.width=a.width=b,d.height=a.height=c,d.channels=a.channels=4}function t(a,b){var c=null;if(B(b))c=a.images[0]=p(),i(c,a),n(c,b),a.mipmask=1;else if(j(a,b),Array.isArray(b.mipmap))for(var d=b.mipmap,e=0;e<d.length;++e)c=a.images[e]=p(),i(c,a),c.width>>=e,c.height>>=e,n(c,d[e]),a.mipmask|=1<<e;else c=a.images[0]=p(),i(c,a),n(c,b),a.mipmask=1;i(a,a.images[0])}function u(b,c){for(var e=b.images,f=0;f<e.length&&e[f];++f){var g=e[f],h=c,i=f,j=g.element,k=g.data,m=g.internalformat,n=g.format,o=g.type,p=g.width,q=g.height;l(g),j?a.texImage2D(h,i,n,n,o,j):g.compressed?a.compressedTexImage2D(h,i,m,p,q,0,k):g.needsCopy?(d(),a.copyTexImage2D(h,i,n,g.xOffset,g.yOffset,p,q,0)):a.texImage2D(h,i,n,p,q,0,n,o,k)}}function v(){var a=ha.pop()||new r;h.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function E(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&q(b[c]),b[c]=null;ha.push(a)}function F(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function G(a,b){"min"in b&&(a.minFilter=P[b.min],0<=na.indexOf(a.minFilter)&&(a.genMipmaps=!0)),"mag"in b&&(a.magFilter=O[b.mag]);var c=a.wrapS,d=a.wrapT;if("wrap"in b){var e=b.wrap;"string"==typeof e?c=d=N[e]:Array.isArray(e)&&(c=N[e[0]],d=N[e[1]])}else"wrapS"in b&&(c=N[b.wrapS]),"wrapT"in b&&(d=N[b.wrapT]);if(a.wrapS=c,a.wrapT=d,"anisotropic"in b&&(a.anisotropic=b.anisotropic),"mipmap"in b){switch(c=!1,typeof b.mipmap){case"string":a.mipmapHint=M[b.mipmap],c=a.genMipmaps=!0;break;case"boolean":c=a.genMipmaps=b.mipmap;break;case"object":a.genMipmaps=!1,c=!0}!c||"min"in b||(a.minFilter=9984)}}function H(c,d){a.texParameteri(d,10241,c.minFilter),a.texParameteri(d,10240,c.magFilter),a.texParameteri(d,10242,c.wrapS),a.texParameteri(d,10243,c.wrapT),b.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,c.anisotropic),c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(d))}function I(b){h.call(this),this.mipmask=0,this.internalformat=6408,this.id=ia++,this.refCount=1,this.target=b,this.texture=a.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new F,g.profile&&(this.stats={size:0})}function J(b){a.activeTexture(33984),a.bindTexture(b.target,b.texture)}function K(){var b=la[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function L(b){var c=b.texture,d=b.unit,e=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(e,null),la[d]=null),a.deleteTexture(c),b.texture=null,b.params=null,b.pixels=null,b.refCount=0,delete ja[b.id],f.textureCount--}var M={"don't care":4352,"dont care":4352,nice:4354,fast:4353},N={repeat:10497,clamp:33071,mirror:33648},O={nearest:9728,linear:9729},P=V({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},O),Q={none:0,browser:37444},R={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},S={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},T={};b.ext_srgb&&(S.srgb=35904,S.srgba=35906),b.oes_texture_float&&(R.float32=R.float=5126),b.oes_texture_half_float&&(R.float16=R["half float"]=36193),b.webgl_depth_texture&&(V(S,{depth:6402,"depth stencil":34041}),V(R,{uint16:5123,uint32:5125,"depth stencil":34042})),b.webgl_compressed_texture_s3tc&&V(T,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),b.webgl_compressed_texture_atc&&V(T,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),b.webgl_compressed_texture_pvrtc&&V(T,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),b.webgl_compressed_texture_etc1&&(T["rgb etc1"]=36196);var U=Array.prototype.slice.call(a.getParameter(34467));Object.keys(T).forEach(function(a){var b=T[a];0<=U.indexOf(b)&&(S[a]=b)});var W=Object.keys(S);c.textureFormats=W;var X=[];Object.keys(S).forEach(function(a){X[S[a]]=a});var Y=[];Object.keys(R).forEach(function(a){Y[R[a]]=a});var Z=[];Object.keys(O).forEach(function(a){Z[O[a]]=a});var $=[];Object.keys(P).forEach(function(a){$[P[a]]=a});var ba=[];Object.keys(N).forEach(function(a){ba[N[a]]=a});var fa=W.reduce(function(a,b){var c=S[b];return 6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407,a},{}),ga=[],ha=[],ia=0,ja={},ka=c.maxTextureUnits,la=Array(ka).map(function(){return null});return V(I.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<ka;++c){var d=la[c];if(d){if(0<d.bindCount)continue;d.unit=-1}la[c]=this,b=c;break}g.profile&&f.maxTextureUnits<b+1&&(f.maxTextureUnits=b+1),this.unit=b,a.activeTexture(33984+b),a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&L(this)}}),g.profile&&(f.getTotalTextureSize=function(){var a=0;return Object.keys(ja).forEach(function(b){a+=ja[b].stats.size}),a}),{create2D:function(b,c){function d(a,b){var c=e.texInfo;F.call(c);var f=v();return"number"==typeof a?"number"==typeof b?s(f,0|a,0|b):s(f,0|a,0|a):a?(G(c,a),t(f,a)):s(f,1,1),c.genMipmaps&&(f.mipmask=(f.width<<1)-1),e.mipmask=f.mipmask,i(e,f),e.internalformat=f.internalformat,d.width=f.width,d.height=f.height,J(e),u(f,3553),H(c,3553),K(),E(f),g.profile&&(e.stats.size=D(e.internalformat,e.type,f.width,f.height,c.genMipmaps,!1)),d.format=X[e.internalformat],d.type=Y[e.type],d.mag=Z[c.magFilter],d.min=$[c.minFilter],d.wrapS=ba[c.wrapS],d.wrapT=ba[c.wrapT],d}var e=new I(3553);return ja[e.id]=e,f.textureCount++,d(b,c),d.subimage=function(a,b,c,f){b|=0,c|=0,f|=0;var g=p();return i(g,e),g.width=0,g.height=0,n(g,a),g.width=g.width||(e.width>>f)-b,g.height=g.height||(e.height>>f)-c,J(e),o(g,3553,b,c,f),K(),q(g),d},d.resize=function(b,c){var f=0|b,h=0|c||f;if(f===e.width&&h===e.height)return d;d.width=e.width=f,d.height=e.height=h,J(e);for(var i=0;e.mipmask>>i;++i)a.texImage2D(3553,i,e.format,f>>i,h>>i,0,e.format,e.type,null);return K(),g.profile&&(e.stats.size=D(e.internalformat,e.type,f,h,!1,!1)),d},d._reglType="texture2d",d._texture=e,g.profile&&(d.stats=e.stats),d.destroy=function(){e.decRef()},d},createCube:function(b,c,d,e,h,k){function l(a,b,c,d,e,f){var h,k=m.texInfo;for(F.call(k),h=0;6>h;++h)r[h]=v();if("number"!=typeof a&&a){if("object"==typeof a)if(b)t(r[0],a),t(r[1],b),t(r[2],c),t(r[3],d),t(r[4],e),t(r[5],f);else if(G(k,a),j(m,a),"faces"in a)for(a=a.faces,h=0;6>h;++h)i(r[h],m),t(r[h],a[h]);else for(h=0;6>h;++h)t(r[h],a)}else for(a=0|a||1,h=0;6>h;++h)s(r[h],a,a);for(i(m,r[0]),m.mipmask=k.genMipmaps?(r[0].width<<1)-1:r[0].mipmask,m.internalformat=r[0].internalformat,l.width=r[0].width,l.height=r[0].height,J(m),h=0;6>h;++h)u(r[h],34069+h);for(H(k,34067),K(),g.profile&&(m.stats.size=D(m.internalformat,m.type,l.width,l.height,k.genMipmaps,!0)),l.format=X[m.internalformat],l.type=Y[m.type],l.mag=Z[k.magFilter],l.min=$[k.minFilter],l.wrapS=ba[k.wrapS],l.wrapT=ba[k.wrapT],h=0;6>h;++h)E(r[h]);return l}var m=new I(34067);ja[m.id]=m,f.cubeCount++;var r=Array(6);return l(b,c,d,e,h,k),l.subimage=function(a,b,c,d,e){c|=0,d|=0,e|=0;var f=p();return i(f,m),f.width=0,f.height=0,n(f,b),f.width=f.width||(m.width>>e)-c,f.height=f.height||(m.height>>e)-d,J(m),o(f,34069+a,c,d,e),K(),q(f),l},l.resize=function(b){if((b|=0)!==m.width){l.width=m.width=b,l.height=m.height=b,J(m);for(var c=0;6>c;++c)for(var d=0;m.mipmask>>d;++d)a.texImage2D(34069+c,d,m.format,b>>d,b>>d,0,m.format,m.type,null);return K(),g.profile&&(m.stats.size=D(m.internalformat,m.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=m,g.profile&&(l.stats=m.stats),l.destroy=function(){m.decRef()},l},clear:function(){for(var b=0;b<ka;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),la[b]=null;aa(ja).forEach(L),f.cubeCount=0,f.textureCount=0},getTexture:function(a){return null},restore:function(){aa(ja).forEach(function(b){b.texture=a.createTexture(),a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!=(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);H(b.texInfo,b.target)})}}}function F(a,b,c,d,e,f){function g(a,b,c){this.target=a,this.texture=b,this.renderbuffer=c;var d=a=0;b?(a=b.width,d=b.height):c&&(a=c.width,d=c.height),this.width=a,this.height=d}function h(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function i(a,b,c){a&&(a.texture?a.texture._texture.refCount+=1:a.renderbuffer._renderbuffer.refCount+=1)}function j(b,c){c&&(c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer))}function k(a){var b=3553,c=null,d=null,e=a;return"object"==typeof a&&(e=a.data,"target"in a&&(b=0|a.target)),a=e._reglType,"texture2d"===a?c=e:"textureCube"===a?c=e:"renderbuffer"===a&&(d=e,b=36161),new g(b,c,d)}function l(a,b,c,f,h){return c?(a=d.create2D({width:a,height:b,format:f,type:h}),a._texture.refCount=0,new g(3553,a,null)):(a=e.create({width:a,height:b,format:f}),a._renderbuffer.refCount=0,new g(36161,null,a))}function m(a){return a&&(a.texture||a.renderbuffer)}function n(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c))}function o(){this.id=x++,y[this.id]=this,this.framebuffer=a.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function p(a){a.colorAttachments.forEach(h),h(a.depthAttachment),h(a.stencilAttachment),h(a.depthStencilAttachment)}function q(b){a.deleteFramebuffer(b.framebuffer),b.framebuffer=null,f.framebufferCount--,delete y[b.id]}function r(b){var d;a.bindFramebuffer(36160,b.framebuffer);var e=b.colorAttachments;for(d=0;d<e.length;++d)j(36064+d,e[d]);for(d=e.length;d<c.maxColorAttachments;++d)a.framebufferTexture2D(36160,36064+d,3553,null,0);a.framebufferTexture2D(36160,33306,3553,null,0),a.framebufferTexture2D(36160,36096,3553,null,0),a.framebufferTexture2D(36160,36128,3553,null,0),j(36096,b.depthAttachment),j(36128,b.stencilAttachment),j(33306,b.depthStencilAttachment),a.checkFramebufferStatus(36160),a.bindFramebuffer(36160,t.next),t.cur=t.next,a.getError()}function s(a,b){function c(a,b){var e,f=0,g=0,h=!0,j=!0;e=null;var n=!0,o="rgba",q="uint8",s=1,t=null,w=null,x=null,y=!1;"number"==typeof a?(f=0|a,g=0|b||f):a?("shape"in a?(g=a.shape,f=g[0],g=g[1]):("radius"in a&&(f=g=a.radius),"width"in a&&(f=a.width),"height"in a&&(g=a.height)),("color"in a||"colors"in a)&&(e=a.color||a.colors,Array.isArray(e)),e||("colorCount"in a&&(s=0|a.colorCount),"colorTexture"in a&&(n=!!a.colorTexture,o="rgba4"),"colorType"in a&&(q=a.colorType,!n)&&("half float"===q||"float16"===q?o="rgba16f":"float"!==q&&"float32"!==q||(o="rgba32f")),"colorFormat"in a&&(o=a.colorFormat,0<=u.indexOf(o)?n=!0:0<=v.indexOf(o)&&(n=!1))),("depthTexture"in a||"depthStencilTexture"in a)&&(y=!(!a.depthTexture&&!a.depthStencilTexture)),"depth"in a&&("boolean"==typeof a.depth?h=a.depth:(t=a.depth,j=!1)),"stencil"in a&&("boolean"==typeof a.stencil?j=a.stencil:(w=a.stencil,h=!1)),"depthStencil"in a&&("boolean"==typeof a.depthStencil?h=j=a.depthStencil:(x=a.depthStencil,j=h=!1))):f=g=1;var z=null,A=null,B=null,C=null;if(Array.isArray(e))z=e.map(k);else if(e)z=[k(e)];else for(z=Array(s),e=0;e<s;++e)z[e]=l(f,g,n,o,q);for(f=f||z[0].width,g=g||z[0].height,t?A=k(t):h&&!j&&(A=l(f,g,y,"depth","uint32")),w?B=k(w):j&&!h&&(B=l(f,g,!1,"stencil","uint8")),x?C=k(x):!t&&!w&&j&&h&&(C=l(f,g,y,"depth stencil","depth stencil")),h=null,e=0;e<z.length;++e)i(z[e],f,g),z[e]&&z[e].texture&&(j=va[z[e].texture._texture.format]*wa[z[e].texture._texture.type],null===h&&(h=j));return i(A,f,g),i(B,f,g),i(C,f,g),p(d),d.width=f,d.height=g,d.colorAttachments=z,d.depthAttachment=A,d.stencilAttachment=B,d.depthStencilAttachment=C,c.color=z.map(m),c.depth=m(A),c.stencil=m(B),c.depthStencil=m(C),c.width=d.width,c.height=d.height,r(d),c}var d=new o;return f.framebufferCount++,c(a,b),V(c,{resize:function(a,b){var e=0|a,f=0|b||e;if(e===d.width&&f===d.height)return c;for(var g=d.colorAttachments,h=0;h<g.length;++h)n(g[h],e,f);return n(d.depthAttachment,e,f),n(d.stencilAttachment,e,f),n(d.depthStencilAttachment,e,f),d.width=c.width=e,d.height=c.height=f,r(d),c},_reglType:"framebuffer",_framebuffer:d,destroy:function(){q(d),p(d)},use:function(a){t.setFBO({framebuffer:c},a)}})}var t={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],v=["rgba4","rgb565","rgb5 a1"];b.ext_srgb&&v.push("srgba"),b.ext_color_buffer_half_float&&v.push("rgba16f","rgb16f"),b.webgl_color_buffer_float&&v.push("rgba32f");var w=["uint8"];b.oes_texture_half_float&&w.push("half float","float16"),b.oes_texture_float&&w.push("float","float32");var x=0,y={};return V(t,{getFramebuffer:function(a){return"function"==typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer)instanceof o?a:null},create:s,createCube:function(a){function b(a){var e,f={color:null},g=0,h=null;e="rgba";var i="uint8",j=1;if("number"==typeof a?g=0|a:a?("shape"in a?g=a.shape[0]:("radius"in a&&(g=0|a.radius),"width"in a?g=0|a.width:"height"in a&&(g=0|a.height)),("color"in a||"colors"in a)&&(h=a.color||a.colors,Array.isArray(h)),h||("colorCount"in a&&(j=0|a.colorCount),"colorType"in a&&(i=a.colorType),"colorFormat"in a&&(e=a.colorFormat)),"depth"in a&&(f.depth=a.depth),"stencil"in a&&(f.stencil=a.stencil),"depthStencil"in a&&(f.depthStencil=a.depthStencil)):g=1,h)if(Array.isArray(h))for(a=[],e=0;e<h.length;++e)a[e]=h[e];else a=[h];else for(a=Array(j),h={radius:g,format:e,type:i},e=0;e<j;++e)a[e]=d.createCube(h);for(f.color=Array(a.length),e=0;e<a.length;++e)j=a[e],g=g||j.width,f.color[e]={target:34069,data:a[e]};for(e=0;6>e;++e){for(j=0;j<a.length;++j)f.color[j].target=34069+e;0<e&&(f.depth=c[0].depth,f.stencil=c[0].stencil,f.depthStencil=c[0].depthStencil),c[e]?c[e](f):c[e]=s(f)}return V(b,{width:g,height:g,color:a})}var c=Array(6);return b(a),V(b,{faces:c,resize:function(a){var d=0|a;if(d===b.width)return b;var e=b.color;for(a=0;a<e.length;++a)e[a].resize(d);for(a=0;6>a;++a)c[a].resize(d);return b.width=b.height=d,b},_reglType:"framebufferCube",destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){aa(y).forEach(q)},restore:function(){aa(y).forEach(function(b){b.framebuffer=a.createFramebuffer(),r(b)})}})}function G(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function H(a,b,c,d,e){for(a=c.maxAttributes,b=Array(a),c=0;c<a;++c)b[c]=new G;return{Record:G,scope:{},state:b}}function I(a,b,c,d){function e(a,b,c,d){this.name=a,this.id=b,this.location=c,this.info=d}function f(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id)return void(a[c].location=b.location);a.push(b)}function g(c,d,e){e=35632===c?j:k;var f=e[d];if(!f){var g=b.str(d),f=a.createShader(c);a.shaderSource(f,g),a.compileShader(f),e[d]=f}return f}function h(a,b){this.id=n++,this.fragId=a,this.vertId=b,this.program=null,this.uniforms=[],this.attributes=[],d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function i(c,h){var i,j;i=g(35632,c.fragId),j=g(35633,c.vertId);var k=c.program=a.createProgram();a.attachShader(k,i),a.attachShader(k,j),a.linkProgram(k);var l=a.getProgramParameter(k,35718);d.profile&&(c.stats.uniformsCount=l);var m=c.uniforms;for(i=0;i<l;++i)if(j=a.getActiveUniform(k,i))if(1<j.size)for(var n=0;n<j.size;++n){var o=j.name.replace("[0]","["+n+"]");f(m,new e(o,b.id(o),a.getUniformLocation(k,o),j))}else f(m,new e(j.name,b.id(j.name),a.getUniformLocation(k,j.name),j));for(l=a.getProgramParameter(k,35721),d.profile&&(c.stats.attributesCount=l),m=c.attributes,i=0;i<l;++i)(j=a.getActiveAttrib(k,i))&&f(m,new e(j.name,b.id(j.name),a.getAttribLocation(k,j.name),j))}var j={},k={},l={},m=[],n=0;return d.profile&&(c.getMaxUniformsCount=function(){var a=0;return m.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)}),a},c.getMaxAttributesCount=function(){var a=0;return m.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)}),a}),{clear:function(){var b=a.deleteShader.bind(a);aa(j).forEach(b),j={},aa(k).forEach(b),k={},m.forEach(function(b){a.deleteProgram(b.program)}),m.length=0,l={},c.shaderCount=0},program:function(a,b,d){var e=l[b];e||(e=l[b]={});var f=e[a];return f||(f=new h(b,a),c.shaderCount++,i(f,d),e[a]=f,m.push(f)),f},restore:function(){j={},k={};for(var a=0;a<m.length;++a)i(m[a])},shader:g,frag:-1,vert:-1}}function J(a,b,c,d,e,f){function g(e){var f;f=null===b.next?5121:b.next.colorAttachments[0].texture._texture.type;var g=0,h=0,i=d.framebufferWidth,j=d.framebufferHeight,k=null;return _(e)?k=e:e&&(g=0|e.x,h=0|e.y,i=0|(e.width||d.framebufferWidth-g),j=0|(e.height||d.framebufferHeight-h),k=e.data||null),c(),e=i*j*4,k||(5121===f?k=new Uint8Array(e):5126===f&&(k=k||new Float32Array(e))),a.pixelStorei(3333,4),a.readPixels(g,h,i,j,6408,f,k),k}function h(a){var c;return b.setFBO({framebuffer:a.framebuffer},function(){c=g(a)}),c}return function(a){return a&&"framebuffer"in a?h(a):g(a)}}function K(a){return Array.prototype.slice.call(a)}function L(a){return K(a).join("")}function M(){function a(){var a=[],b=[];return V(function(){a.push.apply(a,K(arguments))},{def:function(){var d="v"+c++;return b.push(d),0<arguments.length&&(a.push(d,"="),a.push.apply(a,K(arguments)),a.push(";")),d},toString:function(){return L([0<b.length?"var "+b+";":"",L(a)])}})}function b(){function b(a,b){d(a,b,"=",c.def(a,b),";")}var c=a(),d=a(),e=c.toString,f=d.toString;return V(function(){c.apply(c,K(arguments))},{def:c.def,entry:c,exit:d,save:b,set:function(a,d,e){b(a,d),c(a,d,"=",e,";")},toString:function(){return e()+f()}})}var c=0,d=[],e=[],f=a(),g={};return{global:f,link:function(a){for(var b=0;b<e.length;++b)if(e[b]===a)return d[b];return b="g"+c++,d.push(b),e.push(a),b},block:a,proc:function(a,c){function d(){var a="a"+e.length;return e.push(a),a}var e=[];c=c||0;for(var f=0;f<c;++f)d();var f=b(),h=f.toString;return g[a]=V(f,{arg:d,toString:function(){return L(["function(",e.join(),"){",h(),"}"])}})},scope:b,cond:function(){var a=L(arguments),c=b(),d=b(),e=c.toString,f=d.toString;return V(c,{then:function(){return c.apply(c,K(arguments)),this},else:function(){return d.apply(d,K(arguments)),this},toString:function(){var b=f();return b&&(b="else{"+b+"}"),L(["if(",a,"){",e(),"}",b])}})},compile:function(){var a=['"use strict";',f,"return {"];Object.keys(g).forEach(function(b){a.push('"',b,'":',g[b].toString(),",")}),a.push("}");var b=L(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,d.concat(b)).apply(null,e)}}}function N(a){return Array.isArray(a)||_(a)||k(a)}function O(a){return a.sort(function(a,b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function P(a,b,c,d){this.thisDep=a,this.contextDep=b,this.propDep=c,this.append=d}function Q(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function R(a){return new P(!1,!1,!1,a)}function S(a,b){var c=a.type;return 0===c?(c=a.data.length,new P(!0,1<=c,2<=c,b)):4===c?(c=a.data,new P(c.thisDep,c.contextDep,c.propDep,b)):new P(3===c,2===c,1===c,b)}function T(a,b,c,d,e,f,g,h,i,j,k,m,n,o,p){function q(a){return a.replace(".","_")}function r(a,b,c){var d=q(a);la.push(a),ja[d]=ia[d]=!!c,ma[d]=b}function s(a,b,c){var d=q(a);la.push(a),Array.isArray(c)?(ia[d]=c.slice(),ja[d]=c.slice()):ia[d]=ja[d]=c,na[d]=b}function t(){var a=M(),c=a.link,d=a.global;a.id=qa++,a.batchId="0";var e=c(oa),f=a.shared={props:"a0"};Object.keys(oa).forEach(function(a){f[a]=d.def(e,".",a)});var g=a.next={},h=a.current={};Object.keys(na).forEach(function(a){Array.isArray(ia[a])&&(g[a]=d.def(f.next,".",a),h[a]=d.def(f.current,".",a))});var i=a.constants={};Object.keys(pa).forEach(function(a){i[a]=d.def(JSON.stringify(pa[a]))}),a.invoke=function(b,d){switch(d.type){case 0:var e=["this",f.context,f.props,a.batchId];return b.def(c(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(f.props,d.data);case 2:return b.def(f.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,b),d.data.ref}},a.attribCache={};var k={};return a.scopeAttrib=function(a){if((a=b.id(a))in k)return k[a];var d=j.scope[a];return d||(d=j.scope[a]=new da),k[a]=c(d)},a}function u(a){var b=a.static;a=a.dynamic;var c;if("profile"in b){var d=!!b.profile;c=R(function(a,b){return d}),c.enable=d}else if("profile"in a){var e=a.profile;c=S(e,function(a,b){return a.invoke(b,e)})}return c}function v(a,b){var c=a.static,d=a.dynamic;if("framebuffer"in c){var e=c.framebuffer;return e?(e=h.getFramebuffer(e),R(function(a,b){var c=a.link(e),d=a.shared;return b.set(d.framebuffer,".next",c),d=d.context,b.set(d,".framebufferWidth",c+".width"),b.set(d,".framebufferHeight",c+".height"),c})):R(function(a,b){var c=a.shared;return b.set(c.framebuffer,".next","null"),c=c.context,b.set(c,".framebufferWidth",c+".drawingBufferWidth"),b.set(c,".framebufferHeight",c+".drawingBufferHeight"),"null"})}if("framebuffer"in d){var f=d.framebuffer;return S(f,function(a,b){var c=a.invoke(b,f),d=a.shared,e=d.framebuffer,c=b.def(e,".getFramebuffer(",c,")");return b.set(e,".next",c),d=d.context,b.set(d,".framebufferWidth",c+"?"+c+".width:"+d+".drawingBufferWidth"),b.set(d,".framebufferHeight",c+"?"+c+".height:"+d+".drawingBufferHeight"),c})}return null}function w(a,b,c){function d(a){if(a in e){var c=e[a];a=!0;var d,g,h=0|c.x,i=0|c.y;return"width"in c?d=0|c.width:a=!1,"height"in c?g=0|c.height:a=!1,new P(!a&&b&&b.thisDep,!a&&b&&b.contextDep,!a&&b&&b.propDep,function(a,b){var e=a.shared.context,f=d;"width"in c||(f=b.def(e,".","framebufferWidth","-",h));var j=g;return"height"in c||(j=b.def(e,".","framebufferHeight","-",i)),[h,i,f,j]})}if(a in f){var j=f[a];return a=S(j,function(a,b){var c=a.invoke(b,j),d=a.shared.context,e=b.def(c,".x|0"),f=b.def(c,".y|0"),g=b.def('"width" in ',c,"?",c,".width|0:","(",d,".","framebufferWidth","-",e,")"),c=b.def('"height" in ',c,"?",c,".height|0:","(",d,".","framebufferHeight","-",f,")");return[e,f,g,c]}),b&&(a.thisDep=a.thisDep||b.thisDep,a.contextDep=a.contextDep||b.contextDep,a.propDep=a.propDep||b.propDep),a}return b?new P(b.thisDep,b.contextDep,b.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".","framebufferWidth"),b.def(c,".","framebufferHeight")]}):null}var e=a.static,f=a.dynamic;if(a=d("viewport")){var g=a;a=new P(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=g.append(a,b),d=a.shared.context;return b.set(d,".viewportWidth",c[2]),b.set(d,".viewportHeight",c[3]),c})}return{viewport:a,scissor_box:d("scissor.box")}}function y(a){function c(a){if(a in d){var c=b.id(d[a]);return a=R(function(){return c}),a.id=c,a}if(a in e){var f=e[a];return S(f,function(a,b){var c=a.invoke(b,f);return b.def(a.shared.strings,".id(",c,")")})}return null}var d=a.static,e=a.dynamic,f=c("frag"),g=c("vert"),h=null;return Q(f)&&Q(g)?(h=k.program(g.id,f.id),a=R(function(a,b){return a.link(h)})):a=new P(f&&f.thisDep||g&&g.thisDep,f&&f.contextDep||g&&g.contextDep,f&&f.propDep||g&&g.propDep,function(a,b){var c,d=a.shared.shader;c=f?f.append(a,b):b.def(d,".","frag");var e;return e=g?g.append(a,b):b.def(d,".","vert"),b.def(d+".program("+e+","+c+")")}),{frag:f,vert:g,progVar:a,program:h}}function z(a,b){function c(a,b){if(a in d){var c=0|d[a];return R(function(a,d){return b&&(a.OFFSET=c),c})}if(a in e){var f=e[a];return S(f,function(a,c){var d=a.invoke(c,f);return b&&(a.OFFSET=d),d})}return b&&g?R(function(a,b){return a.OFFSET="0",0}):null}var d=a.static,e=a.dynamic,g=function(){if("elements"in d){var a=d.elements;N(a)?a=f.getElements(f.create(a,!0)):a&&(a=f.getElements(a));var b=R(function(b,c){if(a){var d=b.link(a);return b.ELEMENTS=d}return b.ELEMENTS=null});return b.value=a,b}if("elements"in e){var c=e.elements;return S(c,function(a,b){var d=a.shared,e=d.isBufferArgs,d=d.elements,f=a.invoke(b,c),g=b.def("null"),e=b.def(e,"(",f,")"),f=a.cond(e).then(g,"=",d,".createStream(",f,");").else(g,"=",d,".getElements(",f,");");return b.entry(f),b.exit(a.cond(e).then(d,".destroyStream(",g,");")),a.ELEMENTS=g})}return null}(),h=c("offset",!0);return{elements:g,primitive:function(){if("primitive"in d){var a=d.primitive;return R(function(b,c){return ka[a]})}if("primitive"in e){var b=e.primitive;return S(b,function(a,c){var d=a.constants.primTypes,e=a.invoke(c,b);return c.def(d,"[",e,"]")})}return g?Q(g)?R(g.value?function(a,b){return b.def(a.ELEMENTS,".primType")}:function(){return 4}):new P(g.thisDep,g.contextDep,g.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",4)}):null}(),count:function(){if("count"in d){var a=0|d.count;return R(function(){return a})}if("count"in e){var b=e.count;return S(b,function(a,c){return a.invoke(c,b)})}return g?Q(g)?g?h?new P(h.thisDep,h.contextDep,h.propDep,function(a,b){return b.def(a.ELEMENTS,".vertCount-",a.OFFSET)}):R(function(a,b){return b.def(a.ELEMENTS,".vertCount")}):R(function(){return-1}):new P(g.thisDep||h.thisDep,g.contextDep||h.contextDep,g.propDep||h.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")}):null}(),instances:c("instances",!1),offset:h}}function A(a,b){var c=a.static,d=a.dynamic,e={};return la.forEach(function(a){function b(b,g){if(a in c){var h=b(c[a]);e[f]=R(function(){return h})}else if(a in d){var i=d[a];e[f]=S(i,function(a,b){return g(a,b,a.invoke(b,i))})}}var f=q(a);switch(a){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return b(function(a){return a},function(a,b,c){return c});case"depth.func":return b(function(a){return Aa[a]},function(a,b,c){return b.def(a.constants.compareFuncs,"[",c,"]")});case"depth.range":return b(function(a){return a},function(a,b,c){return a=b.def("+",c,"[0]"),b=b.def("+",c,"[1]"),[a,b]});case"blend.func":return b(function(a){return[za["srcRGB"in a?a.srcRGB:a.src],za["dstRGB"in a?a.dstRGB:a.dst],za["srcAlpha"in a?a.srcAlpha:a.src],za["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,b,c){function d(a,d){return b.def('"',a,d,'" in ',c,"?",c,".",a,d,":",c,".",a)}a=a.constants.blendFuncs;var e=d("src","RGB"),f=d("dst","RGB"),e=b.def(a,"[",e,"]"),g=b.def(a,"[",d("src","Alpha"),"]"),f=b.def(a,"[",f,"]");return a=b.def(a,"[",d("dst","Alpha"),"]"),[e,f,g,a]});case"blend.equation":return b(function(a){return"string"==typeof a?[ea[a],ea[a]]:"object"==typeof a?[ea[a.rgb],ea[a.alpha]]:void 0},function(a,b,c){var d=a.constants.blendEquations,e=b.def(),f=b.def();return a=a.cond("typeof ",c,'==="string"'),a.then(e,"=",f,"=",d,"[",c,"];"),a.else(e,"=",d,"[",c,".rgb];",f,"=",d,"[",c,".alpha];"),b(a),[e,f]});case"blend.color":return b(function(a){return l(4,function(b){return+a[b]})},function(a,b,c){return l(4,function(a){return b.def("+",c,"[",a,"]")})});case"stencil.mask":return b(function(a){return 0|a},function(a,b,c){return b.def(c,"|0")});case"stencil.func":return b(function(a){return[Aa[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,b,c){a=b.def('"cmp" in ',c,"?",a.constants.compareFuncs,"[",c,".cmp]",":",7680);var d=b.def(c,".ref|0");return b=b.def('"mask" in ',c,"?",c,".mask|0:-1"),[a,d,b]});case"stencil.opFront":case"stencil.opBack":return b(function(b){return["stencil.opBack"===a?1029:1028,Ba[b.fail||"keep"],Ba[b.zfail||"keep"],Ba[b.zpass||"keep"]]},function(b,c,d){function e(a){return c.def('"',a,'" in ',d,"?",f,"[",d,".",a,"]:",7680)}var f=b.constants.stencilOps;return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("zpass")]});case"polygonOffset.offset":return b(function(a){return[0|a.factor,0|a.units]},function(a,b,c){return a=b.def(c,".factor|0"),b=b.def(c,".units|0"),[a,b]});case"cull.face":return b(function(a){var b=0;return"front"===a?b=1028:"back"===a&&(b=1029),b},function(a,b,c){return b.def(c,'==="front"?',1028,":",1029)});case"lineWidth":return b(function(a){return a},function(a,b,c){return c});case"frontFace":return b(function(a){return Ca[a]},function(a,b,c){return b.def(c+'==="cw"?2304:2305')});case"colorMask":return b(function(a){return a.map(function(a){return!!a})},function(a,b,c){return l(4,function(a){return"!!"+c+"["+a+"]"})});case"sample.coverage":return b(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,b,c){return a=b.def('"value" in ',c,"?+",c,".value:1"),b=b.def("!!",c,".invert"),[a,b]})}}),e}function B(a,b){var c=a.static,d=a.dynamic,e={};return Object.keys(c).forEach(function(a){var b,d=c[a];if("number"==typeof d||"boolean"==typeof d)b=R(function(){return d});else if("function"==typeof d){var f=d._reglType;"texture2d"===f||"textureCube"===f?b=R(function(a){return a.link(d)}):"framebuffer"!==f&&"framebufferCube"!==f||(b=R(function(a){return a.link(d.color[0])}))}else x(d)&&(b=R(function(a){return a.global.def("[",l(d.length,function(a){return d[a]}),"]")}));b.value=d,e[a]=b}),Object.keys(d).forEach(function(a){var b=d[a];e[a]=S(b,function(a,c){return a.invoke(c,b)})}),e}function C(a,c){var d=a.static,f=a.dynamic,g={};return Object.keys(d).forEach(function(a){var c=d[a],f=b.id(a),h=new da;if(N(c))h.state=1,h.buffer=e.getBuffer(e.create(c,34962,!1,!0)),h.type=0;else{var i=e.getBuffer(c);if(i)h.state=1,h.buffer=i,h.type=0;else if(c.constant){var j=c.constant;h.buffer="null",h.state=2,
"number"==typeof j?h.x=j:xa.forEach(function(a,b){b<j.length&&(h[a]=j[b])})}else{var i=N(c.buffer)?e.getBuffer(e.create(c.buffer,34962,!1,!0)):e.getBuffer(c.buffer),k=0|c.offset,l=0|c.stride,m=0|c.size,n=!!c.normalized,o=0;"type"in c&&(o=fa[c.type]),c=0|c.divisor,h.buffer=i,h.state=1,h.size=m,h.normalized=n,h.type=o||i.dtype,h.offset=k,h.stride=l,h.divisor=c}}g[a]=R(function(a,b){var c=a.attribCache;if(f in c)return c[f];var d={isStream:!1};return Object.keys(h).forEach(function(a){d[a]=h[a]}),h.buffer&&(d.buffer=a.link(h.buffer),d.type=d.type||d.buffer+".dtype"),c[f]=d})}),Object.keys(f).forEach(function(a){var b=f[a];g[a]=S(b,function(a,c){function d(a){c(i[a],"=",e,".",a,"|0;")}var e=a.invoke(c,b),f=a.shared,g=f.isBufferArgs,h=f.buffer,i={isStream:c.def(!1)},j=new da;j.state=1,Object.keys(j).forEach(function(a){i[a]=c.def(""+j[a])});var k=i.buffer,l=i.type;return c("if(",g,"(",e,")){",i.isStream,"=true;",k,"=",h,".createStream(",34962,",",e,");",l,"=",k,".dtype;","}else{",k,"=",h,".getBuffer(",e,");","if(",k,"){",l,"=",k,".dtype;",'}else if("constant" in ',e,"){",i.state,"=",2,";","if(typeof "+e+'.constant === "number"){',i[xa[0]],"=",e,".constant;",xa.slice(1).map(function(a){return i[a]}).join("="),"=0;","}else{",xa.map(function(a,b){return i[a]+"="+e+".constant.length>="+b+"?"+e+".constant["+b+"]:0;"}).join(""),"}}else{","if(",g,"(",e,".buffer)){",k,"=",h,".createStream(",34962,",",e,".buffer);","}else{",k,"=",h,".getBuffer(",e,".buffer);","}",l,'="type" in ',e,"?",f.glTypes,"[",e,".type]:",k,".dtype;",i.normalized,"=!!",e,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),c("}}"),c.exit("if(",i.isStream,"){",h,".destroyStream(",k,");","}"),i})}),g}function D(a){var b=a.static,c=a.dynamic,d={};return Object.keys(b).forEach(function(a){var c=b[a];d[a]=R(function(a,b){return"number"==typeof c||"boolean"==typeof c?""+c:a.link(c)})}),Object.keys(c).forEach(function(a){var b=c[a];d[a]=S(b,function(a,c){return a.invoke(c,b)})}),d}function E(a,b,c,d,e){var f=v(a,e),g=w(a,f,e),h=z(a,e),i=A(a,e),j=y(a,e),k=g.viewport;return k&&(i.viewport=k),k=q("scissor.box"),(g=g[k])&&(i[k]=g),g=0<Object.keys(i).length,f={framebuffer:f,draw:h,shader:j,state:i,dirty:g},f.profile=u(a,e),f.uniforms=B(c,e),f.attributes=C(b,e),f.context=D(d,e),f}function F(a,b,c){var d=a.shared.context,e=a.scope();Object.keys(c).forEach(function(f){b.save(d,"."+f),e(d,".",f,"=",c[f].append(a,b),";")}),b(e)}function G(a,b,c,d){var e,f=a.shared,g=f.gl,h=f.framebuffer;ha&&(e=b.def(f.extensions,".webgl_draw_buffers"));var i=a.constants,f=i.drawBuffer,i=i.backBuffer;a=c?c.append(a,b):b.def(h,".next"),d||b("if(",a,"!==",h,".cur){"),b("if(",a,"){",g,".bindFramebuffer(",36160,",",a,".framebuffer);"),ha&&b(e,".drawBuffersWEBGL(",f,"[",a,".colorAttachments.length]);"),b("}else{",g,".bindFramebuffer(",36160,",null);"),ha&&b(e,".drawBuffersWEBGL(",i,");"),b("}",h,".cur=",a,";"),d||b("}")}function H(a,b,c){var d=a.shared,e=d.gl,f=a.current,g=a.next,h=d.current,i=d.next,j=a.cond(h,".dirty");la.forEach(function(b){if(!((b=q(b))in c.state)){var d,k;if(b in g){d=g[b],k=f[b];var m=l(ia[b].length,function(a){return j.def(d,"[",a,"]")});j(a.cond(m.map(function(a,b){return a+"!=="+k+"["+b+"]"}).join("||")).then(e,".",na[b],"(",m,");",m.map(function(a,b){return k+"["+b+"]="+a}).join(";"),";"))}else d=j.def(i,".",b),m=a.cond(d,"!==",h,".",b),j(m),b in ma?m(a.cond(d).then(e,".enable(",ma[b],");").else(e,".disable(",ma[b],");"),h,".",b,"=",d,";"):m(e,".",na[b],"(",d,");",h,".",b,"=",d,";")}}),0===Object.keys(c.state).length&&j(h,".dirty=false;"),b(j)}function I(a,b,c,d){var e=a.shared,f=a.current,g=e.current,h=e.gl;O(Object.keys(c)).forEach(function(e){var i=c[e];if(!d||d(i)){var j=i.append(a,b);if(ma[e]){var k=ma[e];Q(i)?j?b(h,".enable(",k,");"):b(h,".disable(",k,");"):b(a.cond(j).then(h,".enable(",k,");").else(h,".disable(",k,");")),b(g,".",e,"=",j,";")}else if(x(j)){var l=f[e];b(h,".",na[e],"(",j,");",j.map(function(a,b){return l+"["+b+"]="+a}).join(";"),";")}else b(h,".",na[e],"(",j,");",g,".",e,"=",j,";")}})}function J(a,b){ga&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function K(a,b,c,d,e){function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function g(a){n=b.def(),a(n,"=",f(),";"),"string"==typeof e?a(k,".count+=",e,";"):a(k,".count++;"),o&&(d?(p=b.def(),a(p,"=",m,".getNumPendingQueries();")):a(m,".beginQuery(",k,");"))}function h(a){a(k,".cpuTime+=",f(),"-",n,";"),o&&(d?a(m,".pushScopeStats(",p,",",m,".getNumPendingQueries(),",k,");"):a(m,".endQuery();"))}function i(a){var c=b.def(l,".profile");b(l,".profile=",a,";"),b.exit(l,".profile=",c,";")}var j=a.shared,k=a.stats,l=j.current,m=j.timer;c=c.profile;var n,p;if(c){if(Q(c))return void(c.enable?(g(b),h(b.exit),i("true")):i("false"));c=c.append(a,b),i(c)}else c=b.def(l,".profile");j=a.block(),g(j),b("if(",c,"){",j,"}"),a=a.block(),h(a),b.exit("if(",c,"){",a,"}")}function L(a,b,c,d,e){function f(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(c,d,e){function f(){b("if(!",k,".buffer){",i,".enableVertexAttribArray(",j,");}");var c,f=e.type;c=e.size?b.def(e.size,"||",d):d,b("if(",k,".type!==",f,"||",k,".size!==",c,"||",n.map(function(a){return k+"."+a+"!=="+e[a]}).join("||"),"){",i,".bindBuffer(",34962,",",l,".buffer);",i,".vertexAttribPointer(",[j,c,f,e.normalized,e.stride,e.offset],");",k,".type=",f,";",k,".size=",c,";",n.map(function(a){return k+"."+a+"="+e[a]+";"}).join(""),"}"),ga&&(f=e.divisor,b("if(",k,".divisor!==",f,"){",a.instancing,".vertexAttribDivisorANGLE(",[j,f],");",k,".divisor=",f,";}"))}function g(){b("if(",k,".buffer){",i,".disableVertexAttribArray(",j,");","}if(",xa.map(function(a,b){return k+"."+a+"!=="+m[b]}).join("||"),"){",i,".vertexAttrib4f(",j,",",m,");",xa.map(function(a,b){return k+"."+a+"="+m[b]+";"}).join(""),"}")}var i=h.gl,j=b.def(c,".location"),k=b.def(h.attributes,"[",j,"]");c=e.state;var l=e.buffer,m=[e.x,e.y,e.z,e.w],n=["buffer","normalized","offset","stride"];1===c?f():2===c?g():(b("if(",c,"===",1,"){"),f(),b("}else{"),g(),b("}"))}var h=a.shared;d.forEach(function(d){var h,i=d.name,j=c.attributes[i];if(j){if(!e(j))return;h=j.append(a,b)}else{if(!e(Da))return;var k=a.scopeAttrib(i);h={},Object.keys(new da).forEach(function(a){h[a]=b.def(k,".",a)})}g(a.link(d),f(d.info.type),h)})}function T(a,c,d,e,f){for(var g,h=a.shared,i=h.gl,j=0;j<e.length;++j){var k,m=e[j],n=m.name,o=m.info.type,p=d.uniforms[n],m=a.link(m)+".location";if(p){if(!f(p))continue;if(Q(p)){if(n=p.value,35678===o||35680===o)o=a.link(n._texture||n.color[0]._texture),c(i,".uniform1i(",m,",",o+".bind());"),c.exit(o,".unbind();");else if(35674===o||35675===o||35676===o)n=a.global.def("new Float32Array(["+Array.prototype.slice.call(n)+"])"),p=2,35675===o?p=3:35676===o&&(p=4),c(i,".uniformMatrix",p,"fv(",m,",false,",n,");");else{switch(o){case 5126:g="1f";break;case 35664:g="2f";break;case 35665:g="3f";break;case 35666:g="4f";break;case 35670:case 5124:g="1i";break;case 35671:case 35667:g="2i";break;case 35672:case 35668:g="3i";break;case 35673:g="4i";break;case 35669:g="4i"}c(i,".uniform",g,"(",m,",",x(n)?Array.prototype.slice.call(n):n,");")}continue}k=p.append(a,c)}else{if(!f(Da))continue;k=c.def(h.uniforms,"[",b.id(n),"]")}switch(35678===o?c("if(",k,"&&",k,'._reglType==="framebuffer"){',k,"=",k,".color[0];","}"):35680===o&&c("if(",k,"&&",k,'._reglType==="framebufferCube"){',k,"=",k,".color[0];","}"),n=1,o){case 35678:case 35680:o=c.def(k,"._texture"),c(i,".uniform1i(",m,",",o,".bind());"),c.exit(o,".unbind();");continue;case 5124:case 35670:g="1i";break;case 35667:case 35671:g="2i",n=2;break;case 35668:case 35672:g="3i",n=3;break;case 35669:case 35673:g="4i",n=4;break;case 5126:g="1f";break;case 35664:g="2f",n=2;break;case 35665:g="3f",n=3;break;case 35666:g="4f",n=4;break;case 35674:g="Matrix2fv";break;case 35675:g="Matrix3fv";break;case 35676:g="Matrix4fv"}if(c(i,".uniform",g,"(",m,","),"M"===g.charAt(0)){var m=Math.pow(o-35674+2,2),q=a.global.def("new Float32Array(",m,")");c("false,(Array.isArray(",k,")||",k," instanceof Float32Array)?",k,":(",l(m,function(a){return q+"["+a+"]="+k+"["+a+"]"}),",",q,")")}else c(1<n?l(n,function(a){return k+"["+a+"]"}):k);c(");")}}function U(a,b,c,d){function e(e){var f=k[e];return f?f.contextDep&&d.contextDynamic||f.propDep?f.append(a,c):f.append(a,b):b.def(j,".",e)}function f(){function a(){c(q,".drawElementsInstancedANGLE(",[m,o,r,n+"<<(("+r+"-5121)>>1)",p],");")}function b(){c(q,".drawArraysInstancedANGLE(",[m,n,o,p],");")}l?s?a():(c("if(",l,"){"),a(),c("}else{"),b(),c("}")):b()}function g(){function a(){c(i+".drawElements("+[m,o,r,n+"<<(("+r+"-5121)>>1)"]+");")}function b(){c(i+".drawArrays("+[m,n,o]+");")}l?s?a():(c("if(",l,"){"),a(),c("}else{"),b(),c("}")):b()}var h=a.shared,i=h.gl,j=h.draw,k=d.draw,l=function(){var e=k.elements,f=b;return e?((e.contextDep&&d.contextDynamic||e.propDep)&&(f=c),e=e.append(a,f)):e=f.def(j,".","elements"),e&&f("if("+e+")"+i+".bindBuffer(34963,"+e+".buffer.buffer);"),e}(),m=e("primitive"),n=e("offset"),o=function(){var e=k.count,f=b;return e?((e.contextDep&&d.contextDynamic||e.propDep)&&(f=c),e=e.append(a,f)):e=f.def(j,".","count"),e}();if("number"==typeof o){if(0===o)return}else c("if(",o,"){"),c.exit("}");var p,q;ga&&(p=e("instances"),q=a.instancing);var r=l+".type",s=k.elements&&Q(k.elements);ga&&("number"!=typeof p||0<=p)?"string"==typeof p?(c("if(",p,">0){"),f(),c("}else if(",p,"<0){"),g(),c("}")):f():g()}function V(a,b,c,d,e){return b=t(),e=b.proc("body",e),ga&&(b.instancing=e.def(b.shared.extensions,".angle_instanced_arrays")),a(b,e,c,d),b.compile().body}function W(a,b,c,d){J(a,b),L(a,b,c,d.attributes,function(){return!0}),T(a,b,c,d.uniforms,function(){return!0}),U(a,b,b,c)}function Y(a,b){var c=a.proc("draw",1);J(a,c),F(a,c,b.context),G(a,c,b.framebuffer),H(a,c,b),I(a,c,b.state),K(a,c,b,!1,!0);var d=b.shader.progVar.append(a,c);if(c(a.shared.gl,".useProgram(",d,".program);"),b.shader.program)W(a,c,b,b.shader.program);else{var e=a.global.def("{}"),f=c.def(d,".id"),g=c.def(e,"[",f,"]");c(a.cond(g).then(g,".call(this,a0);").else(g,"=",e,"[",f,"]=",a.link(function(c){return V(W,a,b,c,1)}),"(",d,");",g,".call(this,a0);"))}0<Object.keys(b.state).length&&c(a.shared.current,".dirty=true;")}function Z(a,b,c,d){function e(){return!0}a.batchId="a1",J(a,b),L(a,b,c,d.attributes,e),T(a,b,c,d.uniforms,e),U(a,b,b,c)}function $(a,b,c,d){function e(a){return a.contextDep&&g||a.propDep}function f(a){return!e(a)}J(a,b);var g=c.contextDep,h=b.def(),i=b.def();a.shared.props=i,a.batchId=h;var j=a.scope(),k=a.scope();b(j.entry,"for(",h,"=0;",h,"<","a1",";++",h,"){",i,"=","a0","[",h,"];",k,"}",j.exit),c.needsContext&&F(a,k,c.context),c.needsFramebuffer&&G(a,k,c.framebuffer),I(a,k,c.state,e),c.profile&&e(c.profile)&&K(a,k,c,!1,!0),d?(L(a,j,c,d.attributes,f),L(a,k,c,d.attributes,e),T(a,j,c,d.uniforms,f),T(a,k,c,d.uniforms,e),U(a,j,k,c)):(b=a.global.def("{}"),d=c.shader.progVar.append(a,k),i=k.def(d,".id"),j=k.def(b,"[",i,"]"),k(a.shared.gl,".useProgram(",d,".program);","if(!",j,"){",j,"=",b,"[",i,"]=",a.link(function(b){return V(Z,a,c,b,2)}),"(",d,");}",j,".call(this,a0[",h,"],",h,");"))}function _(a,b){function c(a){return a.contextDep&&e||a.propDep}var d=a.proc("batch",2);a.batchId="0",J(a,d);var e=!1,f=!0;Object.keys(b.context).forEach(function(a){e=e||b.context[a].propDep}),e||(F(a,d,b.context),f=!1);var g=b.framebuffer,h=!1;if(g?(g.propDep?e=h=!0:g.contextDep&&e&&(h=!0),h||G(a,d,g)):G(a,d,null),b.state.viewport&&b.state.viewport.propDep&&(e=!0),H(a,d,b),I(a,d,b.state,function(a){return!c(a)}),b.profile&&c(b.profile)||K(a,d,b,!1,"a1"),b.contextDep=e,b.needsContext=f,b.needsFramebuffer=h,f=b.shader.progVar,f.contextDep&&e||f.propDep)$(a,d,b,null);else if(f=f.append(a,d),d(a.shared.gl,".useProgram(",f,".program);"),b.shader.program)$(a,d,b,b.shader.program);else{var g=a.global.def("{}"),h=d.def(f,".id"),i=d.def(g,"[",h,"]");d(a.cond(i).then(i,".call(this,a0,a1);").else(i,"=",g,"[",h,"]=",a.link(function(c){return V($,a,b,c,2)}),"(",f,");",i,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&d(a.shared.current,".dirty=true;")}function aa(a,c){function d(b){var d=c.shader[b];d&&e.set(f.shader,"."+b,d.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var f=a.shared,g=f.current;F(a,e,c.context),c.framebuffer&&c.framebuffer.append(a,e),O(Object.keys(c.state)).forEach(function(b){var d=c.state[b].append(a,e);x(d)?d.forEach(function(c,d){e.set(a.next[b],"["+d+"]",c)}):e.set(f.next,"."+b,d)}),K(a,e,c,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(b){var d=c.draw[b];d&&e.set(f.draw,"."+b,""+d.append(a,e))}),Object.keys(c.uniforms).forEach(function(d){e.set(f.uniforms,"["+b.id(d)+"]",c.uniforms[d].append(a,e))}),Object.keys(c.attributes).forEach(function(b){var d=c.attributes[b].append(a,e),f=a.scopeAttrib(b);Object.keys(new da).forEach(function(a){e.set(f,"."+a,d[a])})}),d("vert"),d("frag"),0<Object.keys(c.state).length&&(e(g,".dirty=true;"),e.exit(g,".dirty=true;")),e("a1(",a.shared.context,",a0,",a.batchId,");")}function ba(a){if("object"==typeof a&&!x(a)){for(var b=Object.keys(a),c=0;c<b.length;++c)if(X.isDynamic(a[b[c]]))return!0;return!1}}function ca(a,b,c){function d(a,b){g.forEach(function(c){var d=e[c];X.isDynamic(d)&&(d=a.invoke(b,d),b(k,".",c,"=",d,";"))})}var e=b.static[c];if(e&&ba(e)){var f=a.global,g=Object.keys(e),h=!1,i=!1,j=!1,k=a.global.def("{}");g.forEach(function(b){var c=e[b];if(X.isDynamic(c))"function"==typeof c&&(c=e[b]=X.unbox(c)),b=S(c,null),h=h||b.thisDep,j=j||b.propDep,i=i||b.contextDep;else{switch(f(k,".",b,"="),typeof c){case"number":f(c);break;case"string":f('"',c,'"');break;case"object":Array.isArray(c)&&f("[",c.join(),"]");break;default:f(a.link(c))}f(";")}}),b.dynamic[c]=new X.DynamicVariable(4,{thisDep:h,contextDep:i,propDep:j,ref:k,append:d}),delete b.static[c]}}var da=j.Record,ea={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(ea.min=32775,ea.max=32776);var ga=c.angle_instanced_arrays,ha=c.webgl_draw_buffers,ia={dirty:!0,profile:p.profile},ja={},la=[],ma={},na={};r("dither",3024),r("blend.enable",3042),s("blend.color","blendColor",[0,0,0,0]),s("blend.equation","blendEquationSeparate",[32774,32774]),s("blend.func","blendFuncSeparate",[1,0,1,0]),r("depth.enable",2929,!0),s("depth.func","depthFunc",513),s("depth.range","depthRange",[0,1]),s("depth.mask","depthMask",!0),s("colorMask","colorMask",[!0,!0,!0,!0]),r("cull.enable",2884),s("cull.face","cullFace",1029),s("frontFace","frontFace",2305),s("lineWidth","lineWidth",1),r("polygonOffset.enable",32823),s("polygonOffset.offset","polygonOffset",[0,0]),r("sample.alpha",32926),r("sample.enable",32928),s("sample.coverage","sampleCoverage",[1,!1]),r("stencil.enable",2960),s("stencil.mask","stencilMask",-1),s("stencil.func","stencilFunc",[519,0,-1]),s("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),s("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),r("scissor.enable",3089),s("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]),s("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var oa={gl:a,context:n,strings:b,next:ja,current:ia,draw:m,elements:f,buffer:e,shader:k,attributes:j.state,uniforms:i,framebuffer:h,extensions:c,timer:o,isBufferArgs:N},pa={primTypes:ka,compareFuncs:Aa,blendFuncs:za,blendEquations:ea,stencilOps:Ba,glTypes:fa,orientationType:Ca};ha&&(pa.backBuffer=[1029],pa.drawBuffer=l(d.maxDrawbuffers,function(a){return 0===a?[0]:l(a,function(a){return 36064+a})}));var qa=0;return{next:ja,current:ia,procs:function(){var b=t(),c=b.proc("poll"),e=b.proc("refresh"),f=b.block();c(f),e(f);var g=b.shared,h=g.gl,i=g.next,j=g.current;f(j,".dirty=false;"),G(b,c),G(b,e,null,!0);var k,m=a.getExtension("angle_instanced_arrays");m&&(k=b.link(m));for(var n=0;n<d.maxAttributes;++n){var o=e.def(g.attributes,"[",n,"]"),p=b.cond(o,".buffer");p.then(h,".enableVertexAttribArray(",n,");",h,".bindBuffer(",34962,",",o,".buffer.buffer);",h,".vertexAttribPointer(",n,",",o,".size,",o,".type,",o,".normalized,",o,".stride,",o,".offset);").else(h,".disableVertexAttribArray(",n,");",h,".vertexAttrib4f(",n,",",o,".x,",o,".y,",o,".z,",o,".w);",o,".buffer=null;"),e(p),m&&e(k,".vertexAttribDivisorANGLE(",n,",",o,".divisor);")}return Object.keys(ma).forEach(function(a){var d=ma[a],g=f.def(i,".",a),k=b.block();k("if(",g,"){",h,".enable(",d,")}else{",h,".disable(",d,")}",j,".",a,"=",g,";"),e(k),c("if(",g,"!==",j,".",a,"){",k,"}")}),Object.keys(na).forEach(function(a){var d,g,k=na[a],m=ia[a],n=b.block();n(h,".",k,"("),x(m)?(k=m.length,d=b.global.def(i,".",a),g=b.global.def(j,".",a),n(l(k,function(a){return d+"["+a+"]"}),");",l(k,function(a){return g+"["+a+"]="+d+"["+a+"];"}).join("")),c("if(",l(k,function(a){return d+"["+a+"]!=="+g+"["+a+"]"}).join("||"),"){",n,"}")):(d=f.def(i,".",a),g=f.def(j,".",a),n(d,");",j,".",a,"=",d,";"),c("if(",d,"!==",g,"){",n,"}")),e(n)}),b.compile()}(),compile:function(a,b,c,d,e){var f=t();return f.stats=f.link(e),Object.keys(b.static).forEach(function(a){ca(f,b,a)}),ya.forEach(function(b){ca(f,a,b)}),c=E(a,b,c,d,f),Y(f,c),aa(f,c),_(f,c),f.compile()}}}function U(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var V=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];return a},W=0,X={DynamicVariable:a,define:function(b,d){return new a(b,c(d+""))},isDynamic:function(b){return"function"==typeof b&&!b._reglType||b instanceof a},unbox:function(b,c){return"function"==typeof b?new a(0,b):b},accessor:c},Y={next:"function"==typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"==typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout},Z="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},$=function(a,b){var c=1;b.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));var d=1,e=1;return b.webgl_draw_buffers&&(d=a.getParameter(34852),e=a.getParameter(36063)),{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:e,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),version:a.getParameter(7938)}},_=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray},aa=function(a){return Object.keys(a).map(function(b){return a[b]})},ba=l(8,function(){return[]}),ca={alloc:n,free:o,allocType:function(a,b){var c=null;switch(a){case 5120:c=new Int8Array(n(b),0,b);break;case 5121:c=new Uint8Array(n(b),0,b);break;case 5122:c=new Int16Array(n(2*b),0,b);break;case 5123:c=new Uint16Array(n(2*b),0,b);break;case 5124:c=new Int32Array(n(4*b),0,b);break;case 5125:c=new Uint32Array(n(4*b),0,b);break;case 5126:c=new Float32Array(n(4*b),0,b);break;default:return null}return c.length!==b?c.subarray(0,b):c},freeType:function(a){o(a.buffer)}},da={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);return b},flatten:function(a,b,c,d){var e=1;if(b.length)for(var f=0;f<b.length;++f)e*=b[f];else e=0;switch(c=d||ca.allocType(c,e),b.length){case 0:break;case 1:for(d=b[0],b=0;b<d;++b)c[b]=a[b];break;case 2:for(d=b[0],b=b[1],f=e=0;f<d;++f)for(var g=a[f],h=0;h<b;++h)c[e++]=g[h];break;case 3:p(a,b[0],b[1],b[2],c,0);break;default:q(a,b,0,c,0)}return c}},ea={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ga={dynamic:35048,stream:35040,static:35044},ha=da.flatten,ia=da.shape,ja=[];ja[5120]=1,ja[5122]=2,ja[5124]=4,ja[5121]=1,ja[5123]=2,ja[5125]=4,ja[5126]=4;var ka={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},la=new Float32Array(1),ma=new Uint32Array(la.buffer),na=[9984,9986,9985,9987],oa=[0,6409,6410,6407,6408],pa={};pa[6409]=pa[6406]=pa[6402]=1,pa[34041]=pa[6410]=2,pa[6407]=pa[35904]=3,pa[6408]=pa[35906]=4;var qa=Object.keys(ea).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),ra=[];ra[5121]=1,ra[5126]=4,ra[36193]=2,ra[5123]=2,ra[5125]=4;var sa=[];sa[32854]=2,sa[32855]=2,sa[36194]=2,sa[34041]=4,sa[33776]=.5,sa[33777]=.5,sa[33778]=1,sa[33779]=1,sa[35986]=.5,sa[35987]=1,sa[34798]=1,sa[35840]=.5,sa[35841]=.25,sa[35842]=.5,sa[35843]=.25,sa[36196]=.5;var ta=[];ta[32854]=2,ta[32855]=2,ta[36194]=2,ta[33189]=2,ta[36168]=1,ta[34041]=4,ta[35907]=4,ta[34836]=16,ta[34842]=8,ta[34843]=6;var ua=function(a,b,c,d,e){function f(a){this.id=j++,this.refCount=1,this.renderbuffer=a,this.format=32854,this.height=this.width=0,e.profile&&(this.stats={size:0})}function g(b){var c=b.renderbuffer;a.bindRenderbuffer(36161,null),a.deleteRenderbuffer(c),b.renderbuffer=null,b.refCount=0,delete k[b.id],d.renderbufferCount--}var h={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(h.srgba=35907),b.ext_color_buffer_half_float&&(h.rgba16f=34842,h.rgb16f=34843),b.webgl_color_buffer_float&&(h.rgba32f=34836);var i=[];Object.keys(h).forEach(function(a){i[h[a]]=a});var j=0,k={};return f.prototype.decRef=function(){0>=--this.refCount&&g(this)},e.profile&&(d.getTotalRenderbufferSize=function(){var a=0;return Object.keys(k).forEach(function(b){a+=k[b].stats.size}),a}),{create:function(b,c){function g(b,c){var d=0,f=0,k=32854;if("object"==typeof b&&b?("shape"in b?(f=b.shape,d=0|f[0],f=0|f[1]):("radius"in b&&(d=f=0|b.radius),"width"in b&&(d=0|b.width),"height"in b&&(f=0|b.height)),"format"in b&&(k=h[b.format])):"number"==typeof b?(d=0|b,f="number"==typeof c?0|c:d):b||(d=f=1),d!==j.width||f!==j.height||k!==j.format)return g.width=j.width=d,g.height=j.height=f,j.format=k,a.bindRenderbuffer(36161,j.renderbuffer),a.renderbufferStorage(36161,k,d,f),e.profile&&(j.stats.size=ta[j.format]*j.width*j.height),g.format=i[j.format],g}var j=new f(a.createRenderbuffer());return k[j.id]=j,d.renderbufferCount++,g(b,c),g.resize=function(b,c){var d=0|b,f=0|c||d;return d===j.width&&f===j.height?g:(g.width=j.width=d,g.height=j.height=f,a.bindRenderbuffer(36161,j.renderbuffer),a.renderbufferStorage(36161,j.format,d,f),e.profile&&(j.stats.size=ta[j.format]*j.width*j.height),g)},g._reglType="renderbuffer",g._renderbuffer=j,e.profile&&(g.stats=j.stats),g.destroy=function(){j.decRef()},g},clear:function(){aa(k).forEach(g)},restore:function(){aa(k).forEach(function(b){b.renderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(36161,b.renderbuffer),a.renderbufferStorage(36161,b.format,b.width,b.height)}),a.bindRenderbuffer(36161,null)}}},va=[];va[6408]=4;var wa=[];wa[5121]=1,wa[5126]=4,wa[36193]=2;var xa=["x","y","z","w"],ya="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),za={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Aa={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ba={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ca={cw:2304,ccw:2305},Da=new P(!1,!1,!1,function(){}),Ea=function(a,b){function c(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function d(a,b,d){var e=h.pop()||new c;e.startQueryIndex=a,e.endQueryIndex=b,e.sum=0,e.stats=d,i.push(e)}var e=b.ext_disjoint_timer_query;if(!e)return null;var f=[],g=[],h=[],i=[],j=[],k=[];return{beginQuery:function(a){var b=f.pop()||e.createQueryEXT();e.beginQueryEXT(35007,b),g.push(b),d(g.length-1,g.length,a)},endQuery:function(){e.endQueryEXT(35007)},pushScopeStats:d,update:function(){var a,b;if(0!==(a=g.length)){k.length=Math.max(k.length,a+1),j.length=Math.max(j.length,a+1),j[0]=0;var c=k[0]=0;for(b=a=0;b<g.length;++b){var d=g[b];e.getQueryObjectEXT(d,34919)?(c+=e.getQueryObjectEXT(d,34918),f.push(d)):g[a++]=d,j[b+1]=c,k[b+1]=a}for(g.length=a,b=a=0;b<i.length;++b){var c=i[b],l=c.startQueryIndex,d=c.endQueryIndex;c.sum+=j[d]-j[l],l=k[l],d=k[d],d===l?(c.stats.gpuTime+=c.sum/1e6,h.push(c)):(c.startQueryIndex=l,c.endQueryIndex=d,i[a++]=c)}i.length=a}},getNumPendingQueries:function(){return g.length},clear:function(){f.push.apply(f,g);for(var a=0;a<f.length;a++)e.deleteQueryEXT(f[a]);g.length=0,f.length=0},restore:function(){g.length=0,f.length=0}}};return function(a){function b(){if(0===S.length)y&&y.update(),ba=null;else{ba=Y.next(b),n();for(var a=S.length-1;0<=a;--a){var c=S[a];c&&c(C,null,0)}q.flush(),y&&y.update()}}function c(){!ba&&0<S.length&&(ba=Y.next(b))}function e(){ba&&(Y.cancel(b),ba=null)}function f(a){a.preventDefault(),e(),W.forEach(function(a){a()})}function g(a){q.getError(),s.restore(),L.restore(),G.restore(),M.restore(),N.restore(),O.restore(),y&&y.restore(),P.procs.refresh(),c(),_.forEach(function(a){a()})}function h(a){function b(a){var b={},c={};return Object.keys(a).forEach(function(d){var e=a[d];X.isDynamic(e)?c[d]=X.unbox(e,d):b[d]=e}),{dynamic:c,static:b}}function c(a){for(;k.length<a;)k.push(null);return k}var d=b(a.context||{}),e=b(a.uniforms||{}),f=b(a.attributes||{}),g=b(function(a){function b(a){if(a in c){var b=c[a];delete c[a],Object.keys(b).forEach(function(d){c[a+"."+d]=b[d]})}}var c=V({},a);return delete c.uniforms,delete c.attributes,delete c.context,"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op),b("blend"),b("depth"),b("cull"),b("stencil"),b("polygonOffset"),b("scissor"),b("sample"),c}(a));a={gpuTime:0,cpuTime:0,count:0};var d=P.compile(g,f,e,d,a),h=d.draw,i=d.batch,j=d.scope,k=[];return V(function(a,b){var d;if("function"==typeof a)return j.call(this,null,a,0);if("function"==typeof b)if("number"==typeof a)for(d=0;d<a;++d)j.call(this,null,b,d);else{if(!Array.isArray(a))return j.call(this,a,b,0);for(d=0;d<a.length;++d)j.call(this,a[d],b,d)}else if("number"==typeof a){if(0<a)return i.call(this,c(0|a),0|a)}else{if(!Array.isArray(a))return h.call(this,a);if(a.length)return i.call(this,a,a.length)}},{stats:a})}function k(a,b){var c=0;P.procs.poll();var d=b.color;d&&(q.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384),"depth"in b&&(q.clearDepth(+b.depth),c|=256),"stencil"in b&&(q.clearStencil(0|b.stencil),c|=1024),q.clear(c)}function l(a){return S.push(a),c(),{cancel:function(){function b(){var a=U(S,b);S[a]=S[S.length-1],0>=--S.length&&e()}var c=U(S,a);S[c]=b}}}function m(){var a=Q.viewport,b=Q.scissor_box;a[0]=a[1]=b[0]=b[1]=0,C.viewportWidth=C.framebufferWidth=C.drawingBufferWidth=a[2]=b[2]=q.drawingBufferWidth,C.viewportHeight=C.framebufferHeight=C.drawingBufferHeight=a[3]=b[3]=q.drawingBufferHeight}function n(){C.tick+=1,C.time=p(),m(),P.procs.poll()}function o(){m(),P.procs.refresh(),y&&y.update()}function p(){return(Z()-z)/1e3}if(!(a=i(a)))return null;var q=a.gl,r=q.getContextAttributes();q.isContextLost();var s=j(q,a);if(!s)return null;var t=d(),w={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},x=s.extensions,y=Ea(0,x),z=Z(),A=q.drawingBufferWidth,B=q.drawingBufferHeight,C={tick:0,time:0,viewportWidth:A,viewportHeight:B,framebufferWidth:A,framebufferHeight:B,drawingBufferWidth:A,drawingBufferHeight:B,pixelRatio:a.pixelRatio},D=$(q,x),G=u(q,w,a),K=v(q,x,G,w),A=H(q,x,D,G,t),L=I(q,t,w,a),M=E(q,x,D,function(){P.procs.poll()},C,w,a),N=ua(q,x,0,w,a),O=F(q,x,D,M,N,w),P=T(q,t,x,D,G,K,M,O,{},A,L,{elements:null,primitive:4,count:-1,offset:0,instances:-1},C,y,a),t=J(q,O,P.procs.poll,C,r,x),Q=P.next,R=q.canvas,S=[],W=[],_=[],aa=[a.onDestroy],ba=null;R&&(R.addEventListener("webglcontextlost",f,!1),R.addEventListener("webglcontextrestored",g,!1));var ca=O.setFBO=h({framebuffer:X.define.call(null,1,"framebuffer")});return o(),r=V(h,{clear:function(a){if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ca(V({framebuffer:a.framebuffer.faces[b]},a),k);else ca(a,k);else k(null,a)},prop:X.define.bind(null,1),context:X.define.bind(null,2),this:X.define.bind(null,3),draw:h({}),buffer:function(a){return G.create(a,34962,!1,!1)},elements:function(a){return K.create(a,!1)},texture:M.create2D,cube:M.createCube,renderbuffer:N.create,framebuffer:O.create,framebufferCube:O.createCube,attributes:r,frame:l,on:function(a,b){var c;switch(a){case"frame":return l(b);case"lost":c=W;break;case"restore":c=_;break;case"destroy":c=aa}return c.push(b),{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1],c.pop();break}}}},limits:D,hasExtension:function(a){return 0<=D.extensions.indexOf(a.toLowerCase())},read:t,destroy:function(){S.length=0,e(),R&&(R.removeEventListener("webglcontextlost",f),R.removeEventListener("webglcontextrestored",g)),L.clear(),O.clear(),N.clear(),M.clear(),K.clear(),G.clear(),y&&y.clear(),aa.forEach(function(a){a()})},_gl:q,_refresh:o,poll:function(){n(),y&&y.update()},now:p,stats:w}),a.onDone(null,r),r}})},{}],507:[function(a,b,c){"use strict";function d(a,b){if("string"!=typeof a)throw new TypeError("expected a string");if(1===b)return a;if(2===b)return a+a;var c=a.length*b;if(e!==a||void 0===e)e=a,f="";else if(f.length>=c)return f.substr(0,c);for(;c>f.length&&b>1;)1&b&&(f+=a),b>>=1,a+=a;return f+=a,f=f.substr(0,c)}var e,f="";b.exports=d},{}],508:[function(b,c,d){!function(b,e){"function"==typeof a&&a.amd?a(e):"object"==typeof d?c.exports=e():b.resolveUrl=e()}(this,function(){function a(){var a=arguments.length;if(0===a)throw new Error("resolveUrl requires at least one argument; got none.");var b=document.createElement("base");if(b.href=arguments[0],1===a)return b.href;var c=document.getElementsByTagName("head")[0];c.insertBefore(b,c.firstChild);for(var d,e=document.createElement("a"),f=1;f<a;f++)e.href=arguments[f],d=e.href,b.href=d;return c.removeChild(b),d}return a})},{}],509:[function(a,b,c){(function(a){b.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],510:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=a[a.length-1],d=b,e=b-2;e>=0;--e){var f=c,g=a[e];c=f+g;var h=c-f,i=g-h;i&&(a[--d]=c,c=i)}for(var j=0,e=d;e<b;++e){var f=a[e],g=c;c=f+g;var h=c-f,i=g-h;i&&(a[j++]=i)}return a[j++]=c,a.length=j,a}b.exports=d},{}],511:[function(a,b,c){"use strict";function d(a,b){
for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m[",c,"][",d,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("");for(var b=[],c=0;c<a.length;++c)b.push(["scale(",h(d(a,c)),",",f(c),a[0][c],")"].join(""));return g(b)}function i(a){return new Function("sum","scale","prod","compress",["function robustDeterminant",a,"(m){return compress(",h(e(a)),")};return robustDeterminant",a].join(""))(k,l,j,m)}var j=a("two-product"),k=a("robust-sum"),l=a("robust-scale"),m=a("robust-compress"),n=6,o=[function(){return[0]},function(a){return[a[0][0]]}];!function(){for(;o.length<n;)o.push(i(o.length));for(var a=[],c=["function robustDeterminant(m){switch(m.length){"],d=0;d<n;++d)a.push("det"+d),c.push("case ",d,":return det",d,"(m);");c.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),a.push("CACHE","gen",c.join(""));var e=Function.apply(void 0,a);b.exports=e.apply(void 0,o.concat([o,i]));for(var d=0;d<o.length;++d)b.exports[d]=o[d]}()},{"robust-compress":510,"robust-scale":517,"robust-sum":520,"two-product":552}],512:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a[0],b[0]),d=1;d<a.length;++d)c=f(c,e(a[d],b[d]));return c}var e=a("two-product"),f=a("robust-sum");b.exports=d},{"robust-sum":520,"two-product":552}],513:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-2,"]"].join("")}return b}function f(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",f(a.slice(0,b)),",",f(a.slice(b)),")"].join("")}function g(a,b){if("m"===a.charAt(0)){if("w"===b.charAt(0)){var c=a.split("[");return["w",b.substr(1),"m",c[0].substr(1)].join("")}return["prod(",a,",",b,")"].join("")}return g(b,a)}function h(a){return!0&a?"-":""}function i(a){if(2===a.length)return[["diff(",g(a[0][0],a[1][1]),",",g(a[1][0],a[0][1]),")"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",f(i(d(a,c))),",",h(c),a[0][c],")"].join(""));return b}function j(a,b){for(var c=[],d=0;d<b-2;++d)c.push(["prod(m",a,"[",d,"],m",a,"[",d,"])"].join(""));return f(c)}function k(a){for(var b=[],c=[],g=e(a),h=0;h<a;++h)g[0][h]="1",g[a-1][h]="w"+h;for(var h=0;h<a;++h)0==(1&h)?b.push.apply(b,i(d(g,h))):c.push.apply(c,i(d(g,h)));for(var k=f(b),l=f(c),m="exactInSphere"+a,n=[],h=0;h<a;++h)n.push("m"+h);for(var o=["function ",m,"(",n.join(),"){"],h=0;h<a;++h){o.push("var w",h,"=",j(h,a),";");for(var t=0;t<a;++t)t!==h&&o.push("var w",h,"m",t,"=scale(w",h,",m",t,"[0]);")}return o.push("var p=",k,",n=",l,",d=diff(p,n);return d[d.length-1];}return ",m),new Function("sum","diff","prod","scale",o.join(""))(q,r,p,s)}function l(){return 0}function m(){return 0}function n(){return 0}function o(a){var b=u[a.length];return b||(b=u[a.length]=k(a.length)),b.apply(void 0,a)}var p=a("two-product"),q=a("robust-sum"),r=a("robust-subtract"),s=a("robust-scale"),t=6,u=[l,m,n];!function(){for(;u.length<=t;)u.push(k(u.length));for(var a=[],c=["slow"],d=0;d<=t;++d)a.push("a"+d),c.push("o"+d);for(var e=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;d<=t;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[o].concat(u));for(var d=0;d<=t;++d)b.exports[d]=u[d]}()},{"robust-scale":517,"robust-subtract":519,"robust-sum":520,"two-product":552}],514:[function(a,b,c){"use strict";function d(a){for(var b="robustLinearSolve"+a+"d",c=["function ",b,"(A,b){return ["],d=0;d<a;++d){c.push("det([");for(var e=0;e<a;++e){e>0&&c.push(","),c.push("[");for(var f=0;f<a;++f)f>0&&c.push(","),f===d?c.push("+b[",e,"]"):c.push("+A[",e,"][",f,"]");c.push("]")}c.push("]),")}c.push("det(A)]}return ",b);var h=new Function("det",c.join(""));return h(a<6?g[a]:g)}function e(){return[0]}function f(a,b){return[[b[0]],[a[0][0]]]}var g=a("robust-determinant"),h=6,i=[e,f];!function(){for(;i.length<h;)i.push(d(i.length));for(var a=[],c=["function dispatchLinearSolve(A,b){switch(A.length){"],e=0;e<h;++e)a.push("s"+e),c.push("case ",e,":return s",e,"(A,b);");c.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),a.push("CACHE","g",c.join(""));var f=Function.apply(void 0,a);b.exports=f.apply(void 0,i.concat([i,d]));for(var e=0;e<h;++e)b.exports[e]=i[e]}()},{"robust-determinant":511}],515:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-1,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",g(h(d(a,c))),",",f(c),a[0][c],")"].join(""));return b}function i(a){for(var b=[],c=[],f=e(a),i=[],j=0;j<a;++j)0==(1&j)?b.push.apply(b,h(d(f,j))):c.push.apply(c,h(d(f,j))),i.push("m"+j);var o=g(b),p=g(c),q="orientation"+a+"Exact",r=["function ",q,"(",i.join(),"){var p=",o,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",q].join("");return new Function("sum","prod","scale","sub",r)(l,k,m,n)}function j(a){var b=r[a.length];return b||(b=r[a.length]=i(a.length)),b.apply(void 0,a)}var k=a("two-product"),l=a("robust-sum"),m=a("robust-scale"),n=a("robust-subtract"),o=5,p=i(3),q=i(4),r=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,c){var d,e=(a[1]-c[1])*(b[0]-c[0]),f=(a[0]-c[0])*(b[1]-c[1]),g=e-f;if(e>0){if(f<=0)return g;d=e+f}else{if(!(e<0))return g;if(f>=0)return g;d=-(e+f)}var h=3.3306690738754716e-16*d;return g>=h||g<=-h?g:p(a,b,c)},function(a,b,c,d){var e=a[0]-d[0],f=b[0]-d[0],g=c[0]-d[0],h=a[1]-d[1],i=b[1]-d[1],j=c[1]-d[1],k=a[2]-d[2],l=b[2]-d[2],m=c[2]-d[2],n=f*j,o=g*i,p=g*h,r=e*j,s=e*i,t=f*h,u=k*(n-o)+l*(p-r)+m*(s-t),v=(Math.abs(n)+Math.abs(o))*Math.abs(k)+(Math.abs(p)+Math.abs(r))*Math.abs(l)+(Math.abs(s)+Math.abs(t))*Math.abs(m),w=7.771561172376103e-16*v;return u>w||-u>w?u:q(a,b,c,d)}];!function(){for(;r.length<=o;)r.push(i(r.length));for(var a=[],c=["slow"],d=0;d<=o;++d)a.push("a"+d),c.push("o"+d);for(var e=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;d<=o;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[j].concat(r));for(var d=0;d<=o;++d)b.exports[d]=r[d]}()},{"robust-scale":517,"robust-subtract":519,"robust-sum":520,"two-product":552}],516:[function(a,b,c){"use strict";function d(a,b){if(1===a.length)return f(b,a[0]);if(1===b.length)return f(a,b[0]);if(0===a.length||0===b.length)return[0];var c=[0];if(a.length<b.length)for(var d=0;d<a.length;++d)c=e(c,f(b,a[d]));else for(var d=0;d<b.length;++d)c=e(c,f(a,b[d]));return c}var e=a("robust-sum"),f=a("robust-scale");b.exports=d},{"robust-scale":517,"robust-sum":520}],517:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if(1===c){var d=e(a[0],b);return d[0]?d:[d[1]]}var g=new Array(2*c),h=[.1,.1],i=[.1,.1],j=0;e(a[0],b,h),h[0]&&(g[j++]=h[0]);for(var k=1;k<c;++k){e(a[k],b,i);var l=h[1];f(l,i[0],h),h[0]&&(g[j++]=h[0]);var m=i[1],n=h[1],o=m+n,p=o-m,q=n-p;h[1]=o,q&&(g[j++]=q)}return h[1]&&(g[j++]=h[1]),0===j&&(g[j++]=0),g.length=j,g}var e=a("two-product"),f=a("two-sum");b.exports=d},{"two-product":552,"two-sum":553}],518:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=0;e<2;++e){var f=a[e],g=b[e],h=Math.min(f,g),i=Math.max(f,g),j=c[e],k=d[e],l=Math.min(j,k);if(Math.max(j,k)<h||i<l)return!1}return!0}function e(a,b,c,e){var g=f(a,c,e),h=f(b,c,e);if(g>0&&h>0||g<0&&h<0)return!1;var i=f(c,a,b),j=f(e,a,b);return!(i>0&&j>0||i<0&&j<0)&&(0!==g||0!==h||0!==i||0!==j||d(a,b,c,e))}b.exports=e;var f=a("robust-orientation")[3]},{"robust-orientation":515}],519:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],-b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=-b[l],q=m(p);o<q?(g=n,(k+=1)<c&&(n=a[k],o=m(n))):(g=p,(l+=1)<e&&(p=-b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,(k+=1)<c&&(n=a[k],o=m(n))):(f=p,(l+=1)<e&&(p=-b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,(k+=1)<c&&(n=a[k],o=m(n))):(f=p,(l+=1)<e&&(p=-b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,(k+=1)<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,(l+=1)<e&&(p=-b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],520:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=b[l],q=m(p);o<q?(g=n,(k+=1)<c&&(n=a[k],o=m(n))):(g=p,(l+=1)<e&&(p=b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,(k+=1)<c&&(n=a[k],o=m(n))):(f=p,(l+=1)<e&&(p=b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,(k+=1)<c&&(n=a[k],o=m(n))):(f=p,(l+=1)<e&&(p=b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,(k+=1)<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,(l+=1)<e&&(p=b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],521:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ShelfPack=e()}(this,function(){function a(a,b,c){c=c||{},this.w=a||64,this.h=b||64,this.autoResize=!!c.autoResize,this.shelves=[],this.stats={},this.count=function(a){this.stats[a]=1+(0|this.stats[a])}}function b(a,b,c){this.x=0,this.y=a,this.w=this.free=b,this.h=c}return a.prototype.pack=function(a,b){a=[].concat(a),b=b||{};for(var c,d,e,f=[],g=0;g<a.length;g++)if(c=a[g].w||a[g].width,d=a[g].h||a[g].height,c&&d){if(!(e=this.packOne(c,d)))continue;b.inPlace&&(a[g].x=e.x,a[g].y=e.y),f.push(e)}if(this.shelves.length>0){for(var h=0,i=0,j=0;j<this.shelves.length;j++){var k=this.shelves[j];i+=k.h,h=Math.max(k.w-k.free,h)}this.resize(h,i)}return f},a.prototype.packOne=function(a,c){for(var d,e,f=0,g={shelf:-1,waste:1/0},h=0;h<this.shelves.length;h++){if(d=this.shelves[h],f+=d.h,c===d.h&&a<=d.free)return this.count(c),d.alloc(a,c);c>d.h||a>d.free||c<d.h&&a<=d.free&&(e=d.h-c)<g.waste&&(g.waste=e,g.shelf=h)}if(-1!==g.shelf)return d=this.shelves[g.shelf],this.count(c),d.alloc(a,c);if(c<=this.h-f&&a<=this.w)return d=new b(f,this.w,c),this.shelves.push(d),this.count(c),d.alloc(a,c);if(this.autoResize){var i,j,k,l;return i=j=this.h,k=l=this.w,(k<=i||a>k)&&(l=2*Math.max(a,k)),(i<k||c>i)&&(j=2*Math.max(c,i)),this.resize(l,j),this.packOne(a,c)}return null},a.prototype.clear=function(){this.shelves=[],this.stats={}},a.prototype.resize=function(a,b){this.w=a,this.h=b;for(var c=0;c<this.shelves.length;c++)this.shelves[c].resize(a);return!0},b.prototype.alloc=function(a,b){if(a>this.free||b>this.h)return null;var c=this.x;return this.x+=a,this.free-=a,{x:c,y:this.y,w:a,h:b,width:a,height:b}},b.prototype.resize=function(a){return this.free+=a-this.w,this.w=a,!0},a})},{}],522:[function(a,b,c){"use strict";b.exports=function(a){return a<0?-1:a>0?1:0}},{}],523:[function(a,b,c){"use strict";function d(a){return f(e(a))}b.exports=d;var e=a("boundary-cells"),f=a("reduce-simplicial-complex")},{"boundary-cells":74,"reduce-simplicial-complex":499}],524:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=0,d=0;d<b;++d)c=0|Math.max(c,a[d].length);return c-1}function e(a,b){for(var c=a.length,d=l.mallocUint8(c),e=0;e<c;++e)d[e]=a[e]<b|0;return d}function f(a,b){for(var c=a.length,d=b*(b+1)/2*c|0,e=l.mallocUint32(2*d),f=0,g=0;g<c;++g)for(var h=a[g],b=h.length,i=0;i<b;++i)for(var j=0;j<i;++j){var n=h[j],o=h[i];e[f++]=0|Math.min(n,o),e[f++]=0|Math.max(n,o)}m(k(e,[f/2|0,2]));for(var p=2,g=2;g<f;g+=2)e[g-2]===e[g]&&e[g-1]===e[g+1]||(e[p++]=e[g],e[p++]=e[g+1]);return k(e,[p/2|0,2])}function g(a,b,c,d){for(var e=a.data,f=a.shape[0],g=l.mallocDouble(f),h=0,i=0;i<f;++i){var j=e[2*i],m=e[2*i+1];if(c[j]!==c[m]){var n=b[j],o=b[m];e[2*h]=j,e[2*h+1]=m,g[h++]=(o-d)/(o-n)}}return a.shape[0]=h,k(g,[h])}function h(a,b){var c=l.mallocInt32(2*b),d=a.shape[0],e=a.data;c[0]=0;for(var f=0,g=0;g<d;++g){var h=e[2*g];if(h!==f){for(c[2*f+1]=g;++f<h;)c[2*f]=g,c[2*f+1]=g;c[2*f]=g}}for(c[2*f+1]=d;++f<b;)c[2*f]=c[2*f+1]=d;return c}function i(a){for(var b=0|a.shape[0],c=a.data,d=new Array(b),e=0;e<b;++e)d[e]=[c[2*e],c[2*e+1]];return d}function j(a,b,c,j){if(c=c||0,void 0===j&&(j=d(a)),0===a.length||j<1)return{cells:[],vertexIds:[],vertexWeights:[]};var k=e(b,+c),m=f(a,j),o=g(m,b,k,+c),p=h(m,0|b.length),q=n(j)(a,m.data,p,k),r=i(m),s=[].slice.call(o.data,0,o.shape[0]);return l.free(k),l.free(m.data),l.free(o.data),l.free(p),{cells:q,vertexIds:r,vertexWeights:s}}b.exports=j;var k=a("ndarray"),l=a("typedarray-pool"),m=a("ndarray-sort"),n=a("./lib/codegen")},{"./lib/codegen":525,ndarray:458,"ndarray-sort":456,"typedarray-pool":554}],525:[function(a,b,c){"use strict";function d(a){var b=0,c=new Array(a+1);c[0]=[[]];for(var d=1;d<=a;++d)for(var e=c[d]=g(d),h=0;h<e.length;++h)b=Math.max(b,e[d].length);for(var i=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",a,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],d=a+1;d>1;--d){d<a+1&&i.push("else "),i.push("if(l===",d,"){");for(var j=[],h=0;h<d;++h)j.push("(S[c["+h+"]]<<"+h+")");i.push("var M=",j.join("+"),";if(M===0||M===",(1<<d)-1,"){continue}switch(M){");for(var e=c[d-1],h=0;h<e.length;++h)i.push("case ",h,":"),function(a){if(!(a.length<=0)){i.push("R.push(");for(var b=0;b<a.length;++b){var c=a[b];b>0&&i.push(","),i.push("[");for(var d=0;d<c.length;++d){var e=c[d];d>0&&i.push(","),i.push("B(C,E,c[",e[0],"],c[",e[1],"])")}i.push("]")}i.push(");")}}(e[h]),i.push("break;");i.push("}}")}return i.push("}return R;};return getContour",a,"d"),new Function("pool",i.join(""))(f)}function e(a){var b=h[a];return b||(b=h[a]=d(a)),b}b.exports=e;var f=a("typedarray-pool"),g=a("marching-simplex-table"),h={}},{"marching-simplex-table":436,"typedarray-pool":554}],526:[function(a,b,c){"use strict";"use restrict";function d(a){for(var b=0,c=Math.max,d=0,e=a.length;d<e;++d)b=c(b,a[d].length);return b-1}function e(a){for(var b=-1,c=Math.max,d=0,e=a.length;d<e;++d)for(var f=a[d],g=0,h=f.length;g<h;++g)b=c(b,f[g]);return b+1}function f(a){for(var b=new Array(a.length),c=0,d=a.length;c<d;++c)b[c]=a[c].slice(0);return b}function g(a,b){var c=a.length,d=a.length-b.length,e=Math.min;if(d)return d;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:var f=a[0]+a[1]-b[0]-b[1];return f||e(a[0],a[1])-e(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(f=g+a[2]-(h+b[2]))return f;var i=e(a[0],a[1]),j=e(b[0],b[1]),f=e(i,a[2])-e(j,b[2]);return f||e(i+a[2],g)-e(j+b[2],h);default:var k=a.slice(0);k.sort();var l=b.slice(0);l.sort();for(var m=0;m<c;++m)if(d=k[m]-l[m])return d;return 0}}function h(a,b){return g(a[0],b[0])}function i(a,b){if(b){for(var c=a.length,d=new Array(c),e=0;e<c;++e)d[e]=[a[e],b[e]];d.sort(h);for(var e=0;e<c;++e)a[e]=d[e][0],b[e]=d[e][1];return a}return a.sort(g),a}function j(a){if(0===a.length)return[];for(var b=1,c=a.length,d=1;d<c;++d){var e=a[d];if(g(e,a[d-1])){if(d===b){b++;continue}a[b++]=e}}return a.length=b,a}function k(a,b){for(var c=0,d=a.length-1,e=-1;c<=d;){var f=c+d>>1,h=g(a[f],b);h<=0?(0===h&&(e=f),c=f+1):h>0&&(d=f-1)}return e}function l(a,b){for(var c=new Array(a.length),d=0,e=c.length;d<e;++d)c[d]=[];for(var f=[],d=0,h=b.length;d<h;++d)for(var i=b[d],j=i.length,l=1,m=1<<j;l<m;++l){f.length=t.popCount(l);for(var n=0,o=0;o<j;++o)l&1<<o&&(f[n++]=i[o]);var p=k(a,f);if(!(p<0))for(;;)if(c[p++].push(d),p>=a.length||0!==g(a[p],f))break}return c}function m(a,b){if(!b)return l(j(o(a,0)),a,0);for(var c=new Array(b),d=0;d<b;++d)c[d]=[];for(var d=0,e=a.length;d<e;++d)for(var f=a[d],g=0,h=f.length;g<h;++g)c[f[g]].push(d);return c}function n(a){for(var b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0|e.length,g=1,h=1<<f;g<h;++g){for(var j=[],k=0;k<f;++k)g>>>k&1&&j.push(e[k]);b.push(j)}return i(b)}function o(a,b){if(b<0)return[];for(var c=[],d=(1<<b+1)-1,e=0;e<a.length;++e)for(var f=a[e],g=d;g<1<<f.length;g=t.nextCombination(g)){for(var h=new Array(b+1),j=0,k=0;k<f.length;++k)g&1<<k&&(h[j++]=f[k]);c.push(h)}return i(c)}function p(a){for(var b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;++f){for(var h=new Array(e.length-1),j=0,k=0;j<g;++j)j!==f&&(h[k++]=e[j]);b.push(h)}return i(b)}function q(a,b){for(var c=new u(b),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=f+1;g<e.length;++g)c.link(e[f],e[g]);for(var h=[],i=c.ranks,d=0;d<i.length;++d)i[d]=-1;for(var d=0;d<a.length;++d){var j=c.find(a[d][0]);i[j]<0?(i[j]=h.length,h.push([a[d].slice(0)])):h[i[j]].push(a[d].slice(0))}return h}function r(a){for(var b=j(i(o(a,0))),c=new u(b.length),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=k(b,[e[f]]),h=f+1;h<e.length;++h)c.link(g,k(b,[e[h]]));for(var l=[],m=c.ranks,d=0;d<m.length;++d)m[d]=-1;for(var d=0;d<a.length;++d){var n=c.find(k(b,[a[d][0]]));m[n]<0?(m[n]=l.length,l.push([a[d].slice(0)])):l[m[n]].push(a[d].slice(0))}return l}function s(a,b){return b?q(a,b):r(a)}var t=a("bit-twiddle"),u=a("union-find");c.dimension=d,c.countVertices=e,c.cloneCells=f,c.compareCells=g,c.normalize=i,c.unique=j,c.findCell=k,c.incidence=l,c.dual=m,c.explode=n,c.skeleton=o,c.boundary=p,c.connectedComponents=s},{"bit-twiddle":71,"union-find":555}],527:[function(a,b,c){arguments[4][71][0].apply(c,arguments)},{dup:71}],528:[function(a,b,c){arguments[4][526][0].apply(c,arguments)},{"bit-twiddle":527,dup:526,"union-find":529}],529:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d,d.prototype.length=function(){return this.roots.length},d.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},d.prototype.find=function(a){for(var b=this.roots;b[a]!==a;){var c=b[a];b[a]=b[c],a=c}return a},d.prototype.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];g<h?f[c]=d:h<g?f[d]=c:(f[d]=c,++e[c])}}},{}],530:[function(a,b,c){"use strict";function d(a,b,c){return Math.abs(f(a,b,c))/Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}function e(a,b,c){function e(a){if(t[a])return 1/0;var c=q[a],e=r[a];return c<0||e<0?1/0:d(b[a],b[c],b[e])}function f(a,b){var c=y[a],d=y[b];y[a]=d,y[b]=c,z[c]=b,z[d]=a}function h(a){return s[y[a]]}function i(a){return 1&a?a-1>>1:(a>>1)-1}function j(a){for(var b=h(a);;){var c=b,d=2*a+1,e=2*(a+1),g=a;if(d<A){var i=h(d);i<c&&(g=d,c=i)}if(e<A){h(e)<c&&(g=e)}if(g===a)return a;f(a,g),a=g}}function k(a){for(var b=h(a);a>0;){var c=i(a);if(c>=0){if(b<h(c)){f(a,c),a=c;continue}}return a}}function l(){if(A>0){var a=y[0];return f(0,A-1),A-=1,j(0),a}return-1}function m(a,b){var c=y[a];return s[c]===b?a:(s[c]=-1/0,k(a),l(),s[c]=b,A+=1,k(A-1))}function n(a,b){if(a[b]<0)return b;var c=b,d=b;do{var e=a[d];if(!t[d]||e<0||e===d)break;if(d=e,e=a[d],!t[d]||e<0||e===d)break;d=e,c=a[c]}while(c!==d);for(var f=b;f!==d;f=a[f])a[f]=d;return d}for(var o=b.length,p=a.length,q=new Array(o),r=new Array(o),s=new Array(o),t=new Array(o),u=0;u<o;++u)q[u]=r[u]=-1,s[u]=1/0,t[u]=!1;for(var u=0;u<p;++u){var v=a[u];if(2!==v.length)throw new Error("Input must be a graph");var w=v[1],x=v[0];-1!==r[x]?r[x]=-2:r[x]=w,-1!==q[w]?q[w]=-2:q[w]=x}for(var y=[],z=new Array(o),u=0;u<o;++u){(s[u]=e(u))<1/0?(z[u]=y.length,y.push(u)):z[u]=-1}for(var A=y.length,u=A>>1;u>=0;--u)j(u);for(;;){var B=l();if(B<0||s[B]>c)break;!function(a){if(!t[a]){t[a]=!0;var b=q[a],c=r[a];q[c]>=0&&(q[c]=b),r[b]>=0&&(r[b]=c),z[b]>=0&&m(z[b],e(b)),z[c]>=0&&m(z[c],e(c))}}(B)}for(var C=[],u=0;u<o;++u)t[u]||(z[u]=C.length,C.push(b[u].slice()));var D=(C.length,[]);return a.forEach(function(a){var b=n(q,a[0]),c=n(r,a[1]);if(b>=0&&c>=0&&b!==c){var d=z[b],e=z[c];d!==e&&D.push([d,e])}}),g.unique(g.normalize(D)),{positions:C,edges:D}}b.exports=e;var f=a("robust-orientation"),g=a("simplicial-complex")},{"robust-orientation":515,"simplicial-complex":528}],531:[function(a,b,c){"use strict";function d(a,b){var c,d;if(b[0][0]<b[1][0])c=b[0],d=b[1];else{if(!(b[0][0]>b[1][0])){var e=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]),h=Math.min(b[0][1],b[1][1]),i=Math.max(b[0][1],b[1][1]);return g<h?g-h:e>i?e-i:g-i}c=b[1],d=b[0]}var j,k;a[0][1]<a[1][1]?(j=a[0],k=a[1]):(j=a[1],k=a[0]);var l=f(d,c,j);return l||((l=f(d,c,k))||k-d)}function e(a,b){var c,e;if(b[0][0]<b[1][0])c=b[0],e=b[1];else{if(!(b[0][0]>b[1][0]))return d(b,a);c=b[1],e=b[0]}var g,h;if(a[0][0]<a[1][0])g=a[0],h=a[1];else{if(!(a[0][0]>a[1][0]))return-d(a,b);g=a[1],h=a[0]}var i=f(c,e,h),j=f(c,e,g);if(i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;if(i=f(h,g,e),j=f(h,g,c),i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;return e[0]-h[0]}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":515}],532:[function(a,b,c){"use strict";function d(a,b,c){this.slabs=a,this.coordinates=b,this.horizontal=c}function e(a,b){return a.y-b}function f(a,b){for(var c=null;a;){var d,e,g=a.key;g[0][0]<g[1][0]?(d=g[0],e=g[1]):(d=g[1],e=g[0]);var h=l(d,e,b);if(h<0)a=a.left;else if(h>0)if(b[0]!==g[1][0])c=a,a=a.right;else{var i=f(a.right,b);if(i)return i;a=a.left}else{if(b[0]!==g[1][0])return a;var i=f(a.right,b);if(i)return i;a=a.left}}return c}function g(a,b,c,d){this.y=a,this.index=b,this.start=c,this.closed=d}function h(a,b,c,d){this.x=a,this.segment=b,this.create=c,this.index=d}function i(a){for(var b=a.length,c=2*b,e=new Array(c),f=0;f<b;++f){var i=a[f],j=i[0][0]<i[1][0];e[2*f]=new h(i[0][0],i,j,f),e[2*f+1]=new h(i[1][0],i,!j,f)}e.sort(function(a,b){var c=a.x-b.x;return c||((c=a.create-b.create)||Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1]))});for(var l=k(m),n=[],o=[],p=[],f=0;f<c;){for(var q=e[f].x,r=[];f<c;){var s=e[f];if(s.x!==q)break;f+=1,s.segment[0][0]===s.x&&s.segment[1][0]===s.x?s.create&&(s.segment[0][1]<s.segment[1][1]?(r.push(new g(s.segment[0][1],s.index,!0,!0)),r.push(new g(s.segment[1][1],s.index,!1,!1))):(r.push(new g(s.segment[1][1],s.index,!0,!1)),r.push(new g(s.segment[0][1],s.index,!1,!0)))):l=s.create?l.insert(s.segment,s.index):l.remove(s.segment)}n.push(l.root),o.push(q),p.push(r)}return new d(n,o,p)}b.exports=i;var j=a("binary-search-bounds"),k=a("functional-red-black-tree"),l=a("robust-orientation"),m=a("./lib/order-segments");d.prototype.castUp=function(a){var b=j.le(this.coordinates,a[0]);if(b<0)return-1;var c=(this.slabs[b],f(this.slabs[b],a)),d=-1;if(c&&(d=c.value),this.coordinates[b]===a[0]){var g=null;if(c&&(g=c.key),b>0){var h=f(this.slabs[b-1],a);h&&(g?m(h.key,g)>0&&(g=h.key,d=h.value):(d=h.value,g=h.key))}var i=this.horizontal[b];if(i.length>0){var k=j.ge(i,a[1],e);if(k<i.length){var n=i[k];if(a[1]===n.y){if(n.closed)return n.index;for(;k<i.length-1&&i[k+1].y===a[1];)if(k+=1,n=i[k],n.closed)return n.index;if(n.y===a[1]&&!n.start){if((k+=1)>=i.length)return d;n=i[k]}}if(n.start)if(g){var o=l(g[0],g[1],[a[0],n.y]);g[0][0]>g[1][0]&&(o=-o),o>0&&(d=n.index)}else d=n.index;else n.y!==a[1]&&(d=n.index)}}}return d}},{"./lib/order-segments":531,"binary-search-bounds":70,"functional-red-black-tree":144,"robust-orientation":515}],533:[function(a,b,c){"use strict";function d(a,b,c,d,f){f<=4*m?e(0,f-1,a,b,c,d):l(0,f-1,a,b,c,d)}function e(a,b,c,d,e,f){for(var g=a+1;g<=b;++g){for(var h=c[g],i=d[2*g],j=d[2*g+1],k=e[g],l=f[g],m=g;m>a;){var n=c[m-1],o=d[2*(m-1)];if((n-h||i-o)>=0)break;c[m]=n,d[2*m]=o,d[2*m+1]=d[2*m-1],e[m]=e[m-1],f[m]=f[m-1],m-=1}c[m]=h,d[2*m]=i,d[2*m+1]=j,e[m]=k,f[m]=l}}function f(a,b,c,d,e,f){var g=c[a],h=d[2*a],i=d[2*a+1],j=e[a],k=f[a];c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b],c[b]=g,d[2*b]=h,d[2*b+1]=i,e[b]=j,f[b]=k}function g(a,b,c,d,e,f){c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b]}function h(a,b,c,d,e,f,g){var h=d[a],i=e[2*a],j=e[2*a+1],k=f[a],l=g[a];d[a]=d[b],e[2*a]=e[2*b],e[2*a+1]=e[2*b+1],f[a]=f[b],g[a]=g[b],d[b]=d[c],e[2*b]=e[2*c],e[2*b+1]=e[2*c+1],f[b]=f[c],g[b]=g[c],d[c]=h,e[2*c]=i,e[2*c+1]=j,f[c]=k,g[c]=l}function i(a,b,c,d,e,f,g,h,i,j,k){h[a]=h[b],i[2*a]=i[2*b],i[2*a+1]=i[2*b+1],j[a]=j[b],k[a]=k[b],h[b]=c,i[2*b]=d,i[2*b+1]=e,j[b]=f,k[b]=g}function j(a,b,c,d,e){return(c[a]-c[b]||d[2*b]-d[2*a]||e[a]-e[b])<0}function k(a,b,c,d,e,f,g,h){return(b-f[a]||g[2*a]-c||e-h[a])<0}function l(a,b,c,d,n,o){var p=(b-a+1)/6|0,q=a+p,r=b-p,s=a+b>>1,t=s-p,u=s+p,v=q,w=t,x=s,y=u,z=r,A=a+1,B=b-1,C=0;j(v,w,c,d,n,o)&&(C=v,v=w,w=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C),j(v,x,c,d,n,o)&&(C=v,v=x,x=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(v,y,c,d,n,o)&&(C=v,v=y,y=C),j(x,y,c,d,n,o)&&(C=x,x=y,y=C),j(w,z,c,d,n,o)&&(C=w,w=z,z=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C);var D=c[w],E=d[2*w],F=d[2*w+1],G=n[w],H=o[w],I=c[y],J=d[2*y],K=d[2*y+1],L=n[y],M=o[y],N=v,O=x,P=z,Q=q,R=s,S=r,T=c[N],U=c[O],V=c[P];c[Q]=T,c[R]=U,c[S]=V;for(var W=0;W<2;++W){var X=d[2*N+W],Y=d[2*O+W],Z=d[2*P+W];d[2*Q+W]=X,d[2*R+W]=Y,d[2*S+W]=Z}var $=n[N],_=n[O],aa=n[P];n[Q]=$,n[R]=_,n[S]=aa;var ba=o[N],ca=o[O],da=o[P];o[Q]=ba,o[R]=ca,o[S]=da,g(t,a,c,d,n,o),g(u,b,c,d,n,o);for(var ea=A;ea<=B;++ea)if(k(ea,D,E,F,G,c,d,n))ea!==A&&f(ea,A,c,d,n,o),++A;else if(!k(ea,I,J,K,L,c,d,n))for(;;){if(k(B,I,J,K,L,c,d,n)){k(B,D,E,F,G,c,d,n)?(h(ea,A,B,c,d,n,o),++A,--B):(f(ea,B,c,d,n,o),--B);break}if(--B<ea)break}i(a,A-1,D,E,F,G,H,c,d,n,o),i(b,B+1,I,J,K,L,M,c,d,n,o),A-2-a<=m?e(a,A-2,c,d,n,o):l(a,A-2,c,d,n,o),b-(B+2)<=m?e(B+2,b,c,d,n,o):l(B+2,b,c,d,n,o),B-A<=m?e(A,B,c,d,n,o):l(A,B,c,d,n,o)}b.exports=d;var m=32},{}],534:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){for(var i=c,j=c;j<d;++j){var k=a[2*j],l=a[2*j+1],m=b[j];e<=k&&k<=g&&f<=l&&l<=h&&(j===i?i+=1:(a[2*j]=a[2*i],a[2*j+1]=a[2*i+1],b[j]=b[i],a[2*i]=k,a[2*i+1]=l,b[i]=m,i+=1))}return i}function e(a,b,c){this.pixelSize=a,this.offset=b,this.count=c}function f(a,b,c,f){function i(e,f,g,h,j,k){var l=.5*g,m=h+1,n=j-h;c[u]=n,t[u++]=k;for(var o=0;o<2;++o)for(var p=0;p<2;++p){var q=e+o*l,r=f+p*l,s=d(a,b,m,j,q,r,q+l,r+l);if(s!==m){if(s-m>=Math.max(.9*n,32)){var v=j+h>>>1;i(q,r,l,m,v,k+1),m=v}i(q,r,l,m,s,k+1),m=s}}}var j=a.length>>>1;if(j<1)return[];b||(b=Array(j)),c||(c=Array(j)),f||(f=[]);for(var k=0;k<j;++k)b[k]=k;if(!f.length||f.length<4||f[0]>=f[2]||f[1]>=f[3]){var l=h(a,2);l[0]===l[2]&&(l[2]+=1),l[1]===l[3]&&(l[3]+=1),f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3]}var m=f[0],n=f[1],o=f[2],p=f[3],q=1/(o-m),r=1/(p-n),s=Math.max(o-m,p-n),t=new Int32Array(j),u=0;i(m,n,s,0,j,0),g(t,a,b,c,j);for(var v=[],w=0,x=j,u=j-1;u>=0;--u){a[2*u]=(a[2*u]-m)*q,a[2*u+1]=(a[2*u+1]-n)*r;var y=t[u];y!==w&&(v.push(new e(s*Math.pow(.5,y),u+1,x-(u+1))),x=u+1,w=y)}return v.push(new e(s*Math.pow(.5,y+1),0,x)),v}var g=a("./lib/sort"),h=a("array-bounds");b.exports=f},{"./lib/sort":533,"array-bounds":48}],535:[function(a,b,c){"use strict";function d(a,b){var c=j(i(a,b),[b[b.length-1]]);return c[c.length-1]}function e(a,b,c,d){var e=d-b,f=-b/e;f<0?f=0:f>1&&(f=1);for(var g=1-f,h=a.length,i=new Array(h),j=0;j<h;++j)i[j]=f*a[j]+g*c[j];return i}function f(a,b){for(var c=[],f=[],g=d(a[a.length-1],b),h=a[a.length-1],i=a[0],j=0;j<a.length;++j,h=i){i=a[j];var k=d(i,b);if(g<0&&k>0||g>0&&k<0){var l=e(h,k,i,g);c.push(l),f.push(l.slice())}k<0?f.push(i.slice()):k>0?c.push(i.slice()):(c.push(i.slice()),f.push(i.slice())),g=k}return{positive:c,negative:f}}function g(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(f<0&&j>0||f>0&&j<0)&&c.push(e(g,j,h,f)),j>=0&&c.push(h.slice()),f=j}return c}function h(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(f<0&&j>0||f>0&&j<0)&&c.push(e(g,j,h,f)),j<=0&&c.push(h.slice()),f=j}return c}var i=a("robust-dot-product"),j=a("robust-sum");b.exports=f,b.exports.positive=g,b.exports.negative=h},{"robust-dot-product":512,"robust-sum":520}],536:[function(b,c,d){!function(){"use strict";function b(a){return e(f(a),arguments)}function c(a,c){return b.apply(null,[a].concat(c||[]))}function e(a,c){var d,e,f,h,i,j,k,l,m,n=1,o=a.length,p="";for(e=0;e<o;e++)if("string"==typeof a[e])p+=a[e];else if(Array.isArray(a[e])){if(h=a[e],h[2])for(d=c[n],f=0;f<h[2].length;f++){if(!d.hasOwnProperty(h[2][f]))throw new Error(b('[sprintf] property "%s" does not exist',h[2][f]));d=d[h[2][f]]}else d=h[1]?c[h[1]]:c[n++];if(g.not_type.test(h[8])&&g.not_primitive.test(h[8])&&d instanceof Function&&(d=d()),g.numeric_arg.test(h[8])&&"number"!=typeof d&&isNaN(d))throw new TypeError(b("[sprintf] expecting number but found %T",d));switch(g.number.test(h[8])&&(l=d>=0),h[8]){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,h[6]?parseInt(h[6]):0);break;case"e":d=h[7]?parseFloat(d).toExponential(h[7]):parseFloat(d).toExponential();break;case"f":d=h[7]?parseFloat(d).toFixed(h[7]):parseFloat(d);break;case"g":d=h[7]?String(Number(d.toPrecision(h[7]))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=h[7]?d.substring(0,h[7]):d;break;case"t":d=String(!!d),d=h[7]?d.substring(0,h[7]):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=h[7]?d.substring(0,h[7]):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=h[7]?d.substring(0,h[7]):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}g.json.test(h[8])?p+=d:(!g.number.test(h[8])||l&&!h[3]?m="":(m=l?"+":"-",d=d.toString().replace(g.sign,"")),j=h[4]?"0"===h[4]?"0":h[4].charAt(1):" ",k=h[6]-(m+d).length,i=h[6]&&k>0?j.repeat(k):"",p+=h[5]?m+d+i:"0"===j?m+i+d:i+m+d)}return p}function f(a){if(h[a])return h[a];for(var b,c=a,d=[],e=0;c;){if(null!==(b=g.text.exec(c)))d.push(b[0]);else if(null!==(b=g.modulo.exec(c)))d.push("%");else{if(null===(b=g.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(b[2]){e|=1;var f=[],i=b[2],j=[]
;if(null===(j=g.key.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(f.push(j[1]);""!==(i=i.substring(j[0].length));)if(null!==(j=g.key_access.exec(i)))f.push(j[1]);else{if(null===(j=g.index_access.exec(i)))throw new SyntaxError("[sprintf] failed to parse named argument key");f.push(j[1])}b[2]=f}else e|=2;if(3===e)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push(b)}c=c.substring(b[0].length)}return h[a]=d}var g={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},h=Object.create(null);void 0!==d&&(d.sprintf=b,d.vsprintf=c),"undefined"!=typeof window&&(window.sprintf=b,window.vsprintf=c,"function"==typeof a&&a.amd&&a(function(){return{sprintf:b,vsprintf:c}}))}()},{}],537:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=new Array(b),d=new Array(b),e=new Array(b),f=new Array(b),g=new Array(b),h=new Array(b),i=0;i<b;++i)c[i]=-1,d[i]=0,e[i]=!1,f[i]=0,g[i]=-1,h[i]=[];for(var j=0,k=[],l=[],i=0;i<b;++i)c[i]<0&&function(b){var i=[b],m=[b];for(c[b]=d[b]=j,e[b]=!0,j+=1;m.length>0;){b=m[m.length-1];var n=a[b];if(f[b]<n.length){for(var o=f[b];o<n.length;++o){var p=n[o];if(c[p]<0){c[p]=d[p]=j,e[p]=!0,j+=1,i.push(p),m.push(p);break}e[p]&&(d[b]=0|Math.min(d[b],d[p])),g[p]>=0&&h[b].push(g[p])}f[b]=o}else{if(d[b]===c[b]){for(var q=[],r=[],s=0,o=i.length-1;o>=0;--o){var t=i[o];if(e[t]=!1,q.push(t),r.push(h[t]),s+=h[t].length,g[t]=k.length,t===b){i.length=o;break}}k.push(q);for(var u=new Array(s),o=0;o<r.length;o++)for(var v=0;v<r[o].length;v++)u[--s]=r[o][v];l.push(u)}m.pop()}}}(i);for(var m,i=0;i<l.length;i++){var n=l[i];if(0!==n.length){n.sort(function(a,b){return a-b}),m=[n[0]];for(var o=1;o<n.length;o++)n[o]!==n[o-1]&&m.push(n[o]);l[i]=m}}return{components:k,adjacencyList:l}}b.exports=d},{}],538:[function(a,b,c){"use strict";function d(a){return new e(a)}function e(a){this.options=n(Object.create(this.options),a),this.trees=new Array(this.options.maxZoom+1)}function f(a,b,c,d,e){return{x:a,y:b,zoom:1/0,id:d,properties:e,parentId:-1,numPoints:c}}function g(a,b){var c=a.geometry.coordinates;return{x:j(c[0]),y:k(c[1]),zoom:1/0,id:b,parentId:-1}}function h(a){return{type:"Feature",properties:i(a),geometry:{type:"Point",coordinates:[l(a.x),m(a.y)]}}}function i(a){var b=a.numPoints,c=b>=1e4?Math.round(b/1e3)+"k":b>=1e3?Math.round(b/100)/10+"k":b;return n(n({},a.properties),{cluster:!0,cluster_id:a.id,point_count:b,point_count_abbreviated:c})}function j(a){return a/360+.5}function k(a){var b=Math.sin(a*Math.PI/180),c=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return c<0?0:c>1?1:c}function l(a){return 360*(a-.5)}function m(a){var b=(180-360*a)*Math.PI/180;return 360*Math.atan(Math.exp(b))/Math.PI-90}function n(a,b){for(var c in b)a[c]=b[c];return a}function o(a){return a.x}function p(a){return a.y}var q=a("kdbush");b.exports=d,e.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(a){return a}},load:function(a){var b=this.options.log;b&&console.time("total time");var c="prepare "+a.length+" points";b&&console.time(c),this.points=a;var d=a.map(g);b&&console.timeEnd(c);for(var e=this.options.maxZoom;e>=this.options.minZoom;e--){var f=+Date.now();this.trees[e+1]=q(d,o,p,this.options.nodeSize,Float32Array),d=this._cluster(d,e),b&&console.log("z%d: %d clusters in %dms",e,d.length,+Date.now()-f)}return this.trees[this.options.minZoom]=q(d,o,p,this.options.nodeSize,Float32Array),b&&console.timeEnd("total time"),this},getClusters:function(a,b){for(var c=this.trees[this._limitZoom(b)],d=c.range(j(a[0]),k(a[3]),j(a[2]),k(a[1])),e=[],f=0;f<d.length;f++){var g=c.points[d[f]];e.push(g.numPoints?h(g):this.points[g.id])}return e},getChildren:function(a,b){for(var c=this.trees[b+1].points[a],d=this.options.radius/(this.options.extent*Math.pow(2,b)),e=this.trees[b+1].within(c.x,c.y,d),f=[],g=0;g<e.length;g++){var i=this.trees[b+1].points[e[g]];i.parentId===a&&f.push(i.numPoints?h(i):this.points[i.id])}return f},getLeaves:function(a,b,c,d){c=c||10,d=d||0;var e=[];return this._appendLeaves(e,a,b,c,d,0),e},getTile:function(a,b,c){var d=this.trees[this._limitZoom(a)],e=Math.pow(2,a),f=this.options.extent,g=this.options.radius,h=g/f,i=(c-h)/e,j=(c+1+h)/e,k={features:[]};return this._addTileFeatures(d.range((b-h)/e,i,(b+1+h)/e,j),d.points,b,c,e,k),0===b&&this._addTileFeatures(d.range(1-h/e,i,1,j),d.points,e,c,e,k),b===e-1&&this._addTileFeatures(d.range(0,i,h/e,j),d.points,-1,c,e,k),k.features.length?k:null},getClusterExpansionZoom:function(a,b){for(;b<this.options.maxZoom;){var c=this.getChildren(a,b);if(b++,1!==c.length)break;a=c[0].properties.cluster_id}return b},_appendLeaves:function(a,b,c,d,e,f){for(var g=this.getChildren(b,c),h=0;h<g.length;h++){var i=g[h].properties;if(i.cluster?f+i.point_count<=e?f+=i.point_count:f=this._appendLeaves(a,i.cluster_id,c+1,d,e,f):f<e?f++:a.push(g[h]),a.length===d)break}return f},_addTileFeatures:function(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var h=b[a[g]];f.features.push({type:1,geometry:[[Math.round(this.options.extent*(h.x*e-c)),Math.round(this.options.extent*(h.y*e-d))]],tags:h.numPoints?i(h):this.points[h.id].properties})}},_limitZoom:function(a){return Math.max(this.options.minZoom,Math.min(a,this.options.maxZoom+1))},_cluster:function(a,b){for(var c=[],d=this.options.radius/(this.options.extent*Math.pow(2,b)),e=0;e<a.length;e++){var g=a[e];if(!(g.zoom<=b)){g.zoom=b;var h=this.trees[b+1],i=h.within(g.x,g.y,d),j=g.numPoints||1,k=g.x*j,l=g.y*j,m=null;this.options.reduce&&(m=this.options.initial(),this._accumulate(m,g));for(var n=0;n<i.length;n++){var o=h.points[i[n]];if(b<o.zoom){var p=o.numPoints||1;o.zoom=b,k+=o.x*p,l+=o.y*p,j+=p,o.parentId=e,this.options.reduce&&this._accumulate(m,o)}}1===j?c.push(g):(g.parentId=e,c.push(f(k/j,l/j,j,e,m)))}}return c},_accumulate:function(a,b){var c=b.numPoints?b.properties:this.options.map(this.points[b.id].properties);this.options.reduce(a,c)}}},{kdbush:288}],539:[function(a,b,c){"use strict";function d(a){return a.split("").map(function(a){return a in e?e[a]:""}).join("")}b.exports=d;var e={" ":" ",0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻",a:"ᵃ",b:"ᵇ",c:"ᶜ",d:"ᵈ",e:"ᵉ",f:"ᶠ",g:"ᵍ",h:"ʰ",i:"ⁱ",j:"ʲ",k:"ᵏ",l:"ˡ",m:"ᵐ",n:"ⁿ",o:"ᵒ",p:"ᵖ",r:"ʳ",s:"ˢ",t:"ᵗ",u:"ᵘ",v:"ᵛ",w:"ʷ",x:"ˣ",y:"ʸ",z:"ᶻ"}},{}],540:[function(a,b,c){"use strict";function d(a,b){var c=a.length,d=["'use strict';"],e="surfaceNets"+a.join("_")+"d"+b;d.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===b&&d.push("getters:[0],");for(var f=[],i=[],j=0;j<c;++j)f.push("d"+j),i.push("d"+j);for(var j=0;j<1<<c;++j)f.push("v"+j),i.push("v"+j);for(var j=0;j<1<<c;++j)f.push("p"+j),i.push("p"+j);f.push("a","b","c"),i.push("a","c"),d.push("vertex:function vertexFunc(",f.join(),"){");for(var k=[],j=0;j<1<<c;++j)k.push("(p"+j+"<<"+j+")");d.push("var m=(",k.join("+"),")|0;if(m===0||m===",(1<<(1<<c))-1,"){return}");var l=[],m=[];1<<(1<<c)<=128?(d.push("switch(m){"),m=d):d.push("switch(m>>>7){");for(var j=0;j<1<<(1<<c);++j){if(1<<(1<<c)>128&&j%128==0){l.length>0&&m.push("}}");var n="vExtra"+l.length;d.push("case ",j>>>7,":",n,"(m&0x7f,",i.join(),");break;"),m=["function ",n,"(m,",i.join(),"){switch(m){"],l.push(m)}m.push("case ",127&j,":");for(var o=new Array(c),p=new Array(c),q=new Array(c),r=new Array(c),s=0,t=0;t<c;++t)o[t]=[],p[t]=[],q[t]=0,r[t]=0;for(var t=0;t<1<<c;++t)for(var u=0;u<c;++u){var v=t^1<<u;if(!(v>t)&&!(j&1<<v)!=!(j&1<<t)){var w=1;j&1<<v?p[u].push("v"+v+"-v"+t):(p[u].push("v"+t+"-v"+v),w=-w),w<0?(o[u].push("-v"+t+"-v"+v),q[u]+=2):(o[u].push("v"+t+"+v"+v),q[u]-=2),s+=1;for(var x=0;x<c;++x)x!==u&&(v&1<<x?r[x]+=1:r[x]-=1)}}for(var y=[],u=0;u<c;++u)if(0===o[u].length)y.push("d"+u+"-0.5");else{var z="";q[u]<0?z=q[u]+"*c":q[u]>0&&(z="+"+q[u]+"*c");var A=o[u].length/s*.5,B=.5+r[u]/s*.5;y.push("d"+u+"-"+B+"-"+A+"*("+o[u].join("+")+z+")/("+p[u].join("+")+")")}m.push("a.push([",y.join(),"]);","break;")}d.push("}},"),l.length>0&&m.push("}}");for(var C=[],j=0;j<1<<c-1;++j)C.push("v"+j);C.push("c0","c1","p0","p1","a","b","c"),d.push("cell:function cellFunc(",C.join(),"){");var D=h(c-1);d.push("if(p0){b.push(",D.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",D.map(function(a){var b=a.slice();return b.reverse(),"["+b.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",e,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",e,";");for(var j=0;j<l.length;++j)d.push(l[j].join(""));return new Function("genContour",d.join(""))(g)}function e(a,b){for(var c=i(a,b),d=c.length,e=new Array(d),f=new Array(d),g=0;g<d;++g)e[g]=[c[g]],f[g]=[g];return{positions:e,cells:f}}function f(a,b){if(a.dimension<=0)return{positions:[],cells:[]};if(1===a.dimension)return e(a,b);var c=a.order.join()+"-"+a.dtype,f=j[c],b=+b||0;return f||(f=j[c]=d(a.order,a.dtype)),f(a,b)}b.exports=f;var g=a("ndarray-extract-contour"),h=a("triangulate-hypercube"),i=a("zero-crossings"),j={}},{"ndarray-extract-contour":447,"triangulate-hypercube":550,"zero-crossings":598}],541:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=2*Math.PI,f=function(a,b,c,d,e,f,g){var h=a.x,i=a.y;return h*=b,i*=c,{x:d*h-e*i+f,y:e*h+d*i+g}},g=function(a,b){var c=4/3*Math.tan(b/4),d=Math.cos(a),e=Math.sin(a),f=Math.cos(a+b),g=Math.sin(a+b);return[{x:d-e*c,y:e+d*c},{x:f+g*c,y:g-f*c},{x:f,y:g}]},h=function(a,b,c,d){var e=a*d-b*c<0?-1:1,f=Math.sqrt(a*a+b*b),g=Math.sqrt(a*a+b*b),h=a*c+b*d,i=h/(f*g);return i>1&&(i=1),i<-1&&(i=-1),e*Math.acos(i)},i=function(a,b,c,d,f,g,i,j,k,l,m,n){var o=Math.pow(f,2),p=Math.pow(g,2),q=Math.pow(m,2),r=Math.pow(n,2),s=o*p-o*r-p*q;s<0&&(s=0),s/=o*r+p*q,s=Math.sqrt(s)*(i===j?-1:1);var t=s*f/g*n,u=s*-g/f*m,v=l*t-k*u+(a+c)/2,w=k*t+l*u+(b+d)/2,x=(m-t)/f,y=(n-u)/g,z=(-m-t)/f,A=(-n-u)/g,B=h(1,0,x,y),C=h(x,y,z,A);return 0===j&&C>0&&(C-=e),1===j&&C<0&&(C+=e),[v,w,B,C]},j=function(a){var b=a.px,c=a.py,h=a.cx,j=a.cy,k=a.rx,l=a.ry,m=a.xAxisRotation,n=void 0===m?0:m,o=a.largeArcFlag,p=void 0===o?0:o,q=a.sweepFlag,r=void 0===q?0:q,s=[];if(0===k||0===l)return[];var t=Math.sin(n*e/360),u=Math.cos(n*e/360),v=u*(b-h)/2+t*(c-j)/2,w=-t*(b-h)/2+u*(c-j)/2;if(0===v&&0===w)return[];k=Math.abs(k),l=Math.abs(l);var x=Math.pow(v,2)/Math.pow(k,2)+Math.pow(w,2)/Math.pow(l,2);x>1&&(k*=Math.sqrt(x),l*=Math.sqrt(x));var y=i(b,c,h,j,k,l,p,r,t,u,v,w),z=d(y,4),A=z[0],B=z[1],C=z[2],D=z[3],E=Math.max(Math.ceil(Math.abs(D)/(e/4)),1);D/=E;for(var F=0;F<E;F++)s.push(g(C,D)),C+=D;return s.map(function(a){var b=f(a[0],k,l,u,t,A,B),c=b.x,d=b.y,e=f(a[1],k,l,u,t,A,B),g=e.x,h=e.y,i=f(a[2],k,l,u,t,A,B);return{x1:c,y1:d,x2:g,y2:h,x:i.x,y:i.y}})};c.default=j,b.exports=c.default},{}],542:[function(a,b,c){"use strict";function d(a){if(Array.isArray(a)&&1===a.length&&"string"==typeof a[0]&&(a=a[0]),"string"==typeof a&&(i(h(a),"String is not an SVG path."),a=e(a)),i(Array.isArray(a),"Argument should be a string or an array of path segments."),a=f(a),a=g(a),!a.length)return[0,0,0,0];for(var b=[1/0,1/0,-1/0,-1/0],c=0,d=a.length;c<d;c++)for(var j=a[c].slice(1),k=0;k<j.length;k+=2)j[k+0]<b[0]&&(b[0]=j[k+0]),j[k+1]<b[1]&&(b[1]=j[k+1]),j[k+0]>b[2]&&(b[2]=j[k+0]),j[k+1]>b[3]&&(b[3]=j[k+1]);return b}var e=a("parse-svg-path"),f=a("abs-svg-path"),g=a("normalize-svg-path"),h=a("is-svg-path"),i=a("assert");b.exports=d},{"abs-svg-path":43,assert:51,"is-svg-path":287,"normalize-svg-path":543,"parse-svg-path":466}],543:[function(a,b,c){"use strict";function d(a){for(var b,c=[],d=0,h=0,i=0,j=0,k=null,l=null,m=0,n=0,o=0,p=a.length;o<p;o++){var q=a[o],r=q[0];switch(r){case"M":i=q[1],j=q[2];break;case"A":var s=g({px:m,py:n,cx:q[6],cy:q[7],rx:q[1],ry:q[2],xAxisRotation:q[3],largeArcFlag:q[4],sweepFlag:q[5]});if(!s.length)continue;for(var t,u=0;u<s.length;u++)t=s[u],q=["C",t.x1,t.y1,t.x2,t.y2,t.x,t.y],u<s.length-1&&c.push(q);break;case"S":var v=m,w=n;"C"!=b&&"S"!=b||(v+=v-d,w+=w-h),q=["C",v,w,q[1],q[2],q[3],q[4]];break;case"T":"Q"==b||"T"==b?(k=2*m-k,l=2*n-l):(k=m,l=n),q=f(m,n,k,l,q[1],q[2]);break;case"Q":k=q[1],l=q[2],q=f(m,n,q[1],q[2],q[3],q[4]);break;case"L":q=e(m,n,q[1],q[2]);break;case"H":q=e(m,n,q[1],n);break;case"V":q=e(m,n,m,q[1]);break;case"Z":q=e(m,n,i,j)}b=r,m=q[q.length-2],n=q[q.length-1],q.length>4?(d=q[q.length-4],h=q[q.length-3]):(d=m,h=n),c.push(q)}return c}function e(a,b,c,d){return["C",a,b,c,d,c,d]}function f(a,b,c,d,e,f){return["C",a/3+2/3*c,b/3+2/3*d,e/3+2/3*c,f/3+2/3*d,e,f]}b.exports=d;var g=a("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":541}],544:[function(a,b,c){(function(c){"use strict";function d(a,b){if(!h(a))throw Error("Argument should be valid svg path string");b||(b={});var d,l;b.shape?(d=b.shape[0],l=b.shape[1]):(d=j.width=b.w||b.width||200,l=j.height=b.h||b.height||200);var m=Math.min(d,l),n=b.stroke||0,o=b.viewbox||b.viewBox||e(a),p=[d/(o[2]-o[0]),l/(o[3]-o[1])],q=Math.min(p[0]||0,p[1]||0)/2;if(k.fillStyle="black",k.fillRect(0,0,d,l),k.fillStyle="white",n&&("number"!=typeof n&&(n=1),k.strokeStyle=n>0?"white":"black",k.lineWidth=Math.abs(n)),k.translate(.5*d,.5*l),k.scale(q,q),c.Path2D){var r=new Path2D(a);k.fill(r),n&&k.stroke(r)}else{var s=f(a);g(k,s),k.fill(),n&&k.stroke()}return k.setTransform(1,0,0,1,0,0),i(k,{cutoff:null!=b.cutoff?b.cutoff:.5,radius:null!=b.radius?b.radius:.5*m})}var e=a("svg-path-bounds"),f=a("parse-svg-path"),g=a("draw-svg-path"),h=a("is-svg-path"),i=a("bitmap-sdf"),j=document.createElement("canvas"),k=j.getContext("2d");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bitmap-sdf":72,"draw-svg-path":132,"is-svg-path":287,"parse-svg-path":466,"svg-path-bounds":542}],545:[function(a,b,c){(function(c){"use strict";function d(a){for(var b=a.cells,c=a.positions,d=new Float32Array(6*b.length),e=0,f=0,g=0;g<b.length;++g)for(var h=b[g],i=0;i<3;++i){var j=c[h[i]];d[e++]=j[0],d[e++]=j[1]+1.4,f=Math.max(j[0],f)}return{data:d,shape:f}}function e(a,b,c){var c=c||{},g=h[a];g||(g=h[a]={" ":{data:new Float32Array(0),shape:.2}});var i=g[b];if(!i)if(b.length<=1||!/\d/.test(b))i=g[b]=d(f(b,{triangles:!0,font:a,textAlign:c.textAlign||"left",textBaseline:"alphabetic"}));else{for(var j=b.split(/(\d|\s)/),k=new Array(j.length),l=0,m=0,n=0;n<j.length;++n)k[n]=e(a,j[n]),l+=k[n].data.length,m+=k[n].shape,n>0&&(m+=.02);for(var o=new Float32Array(l),p=0,q=-.5*m,n=0;n<k.length;++n){for(var r=k[n].data,s=0;s<r.length;s+=2)o[p++]=r[s]+q,o[p++]=r[s+1];q+=k[n].shape+.02}i=g[b]={data:o,shape:m}}return i}b.exports=e;var f=a("vectorize-text"),g=window||c.global||{},h=g.__TEXT_CACHE||{};g.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:488,"vectorize-text":568}],546:[function(b,c,d){!function(b){function d(a,b){if(a=a||"",b=b||{},a instanceof d)return a;if(!(this instanceof d))return new d(a,b);var c=e(a);this._originalInput=a,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=Q(100*this._a)/100,this._format=b.format||c.format,this._gradientType=b.gradientType,this._r<1&&(this._r=Q(this._r)),this._g<1&&(this._g=Q(this._g)),this._b<1&&(this._b=Q(this._b)),this._ok=c.ok,this._tc_id=P++}function e(a){var b={r:0,g:0,b:0},c=1,d=null,e=null,g=null,i=!1,k=!1;return"string"==typeof a&&(a=L(a)),"object"==typeof a&&(K(a.r)&&K(a.g)&&K(a.b)?(b=f(a.r,a.g,a.b),i=!0,k="%"===String(a.r).substr(-1)?"prgb":"rgb"):K(a.h)&&K(a.s)&&K(a.v)?(d=H(a.s),e=H(a.v),b=j(a.h,d,e),i=!0,k="hsv"):K(a.h)&&K(a.s)&&K(a.l)&&(d=H(a.s),g=H(a.l),b=h(a.h,d,g),i=!0,k="hsl"),a.hasOwnProperty("a")&&(c=a.a)),c=A(c),{ok:i,format:a.format||k,r:R(255,S(b.r,0)),g:R(255,S(b.g,0)),b:R(255,S(b.b,0)),a:c}}function f(a,b,c){return{r:255*B(a,255),g:255*B(b,255),b:255*B(c,255)}}function g(a,b,c){a=B(a,255),b=B(b,255),c=B(c,255);var d,e,f=S(a,b,c),g=R(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function h(a,b,c){function d(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=B(a,360),b=B(b,100),c=B(c,100),0===b)e=f=g=c;else{var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function i(a,b,c){a=B(a,255),b=B(b,255),c=B(c,255);var d,e,f=S(a,b,c),g=R(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function j(a,c,d){a=6*B(a,360),c=B(c,100),d=B(d,100);var e=b.floor(a),f=a-e,g=d*(1-c),h=d*(1-f*c),i=d*(1-(1-f)*c),j=e%6;return{r:255*[d,h,g,g,i,d][j],g:255*[i,d,d,h,g,g][j],b:255*[g,g,i,d,d,h][j]}}function k(a,b,c,d){var e=[G(Q(a).toString(16)),G(Q(b).toString(16)),G(Q(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function l(a,b,c,d,e){var f=[G(Q(a).toString(16)),G(Q(b).toString(16)),G(Q(c).toString(16)),G(I(d))];return e&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1)&&f[3].charAt(0)==f[3].charAt(1)?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0)+f[3].charAt(0):f.join("")}function m(a,b,c,d){return[G(I(d)),G(Q(a).toString(16)),G(Q(b).toString(16)),G(Q(c).toString(16))].join("")}function n(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.s-=b/100,c.s=C(c.s),d(c)}function o(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.s+=b/100,c.s=C(c.s),d(c)}function p(a){return d(a).desaturate(100)}function q(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.l+=b/100,c.l=C(c.l),d(c)}function r(a,b){b=0===b?0:b||10;var c=d(a).toRgb();return c.r=S(0,R(255,c.r-Q(-b/100*255))),c.g=S(0,R(255,c.g-Q(-b/100*255))),c.b=S(0,R(255,c.b-Q(-b/100*255))),d(c)}function s(a,b){b=0===b?0:b||10;var c=d(a).toHsl();return c.l-=b/100,c.l=C(c.l),d(c)}function t(a,b){var c=d(a).toHsl(),e=(c.h+b)%360;return c.h=e<0?360+e:e,d(c)}function u(a){var b=d(a).toHsl();return b.h=(b.h+180)%360,d(b)}function v(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+120)%360,s:b.s,l:b.l}),d({h:(c+240)%360,s:b.s,l:b.l})]}function w(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+90)%360,s:b.s,l:b.l}),d({h:(c+180)%360,s:b.s,l:b.l}),d({h:(c+270)%360,s:b.s,l:b.l})]}function x(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+72)%360,s:b.s,l:b.l}),d({h:(c+216)%360,s:b.s,l:b.l})]}function y(a,b,c){b=b||6,c=c||30;var e=d(a).toHsl(),f=360/c,g=[d(a)];for(e.h=(e.h-(f*b>>1)+720)%360;--b;)e.h=(e.h+f)%360,g.push(d(e));return g}function z(a,b){b=b||6;for(var c=d(a).toHsv(),e=c.h,f=c.s,g=c.v,h=[],i=1/b;b--;)h.push(d({h:e,s:f,v:g})),g=(g+i)%1;return h}function A(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function B(a,c){E(a)&&(a="100%");var d=F(a);return a=R(c,S(0,parseFloat(a))),d&&(a=parseInt(a*c,10)/100),b.abs(a-c)<1e-6?1:a%c/parseFloat(c)}function C(a){return R(1,S(0,a))}function D(a){return parseInt(a,16)}function E(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)}function F(a){return"string"==typeof a&&-1!=a.indexOf("%")}function G(a){return 1==a.length?"0"+a:""+a}function H(a){return a<=1&&(a=100*a+"%"),a}function I(a){return b.round(255*parseFloat(a)).toString(16)}function J(a){return D(a)/255}function K(a){return!!W.CSS_UNIT.exec(a)}function L(a){a=a.replace(N,"").replace(O,"").toLowerCase();var b=!1;if(U[a])a=U[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=W.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=W.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=W.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=W.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=W.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=W.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=W.hex8.exec(a))?{r:D(c[1]),g:D(c[2]),b:D(c[3]),a:J(c[4]),format:b?"name":"hex8"}:(c=W.hex6.exec(a))?{r:D(c[1]),g:D(c[2]),b:D(c[3]),format:b?"name":"hex"}:(c=W.hex4.exec(a))?{r:D(c[1]+""+c[1]),g:D(c[2]+""+c[2]),b:D(c[3]+""+c[3]),a:J(c[4]+""+c[4]),format:b?"name":"hex8"}:!!(c=W.hex3.exec(a))&&{r:D(c[1]+""+c[1]),g:D(c[2]+""+c[2]),b:D(c[3]+""+c[3]),format:b?"name":"hex"}}function M(a){var b,c;return a=a||{level:"AA",size:"small"},b=(a.level||"AA").toUpperCase(),c=(a.size||"small").toLowerCase(),"AA"!==b&&"AAA"!==b&&(b="AA"),"small"!==c&&"large"!==c&&(c="small"),{level:b,size:c}}var N=/^\s+/,O=/\s+$/,P=0,Q=b.round,R=b.min,S=b.max,T=b.random;d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},getLuminance:function(){var a,c,d,e,f,g,h=this.toRgb();return a=h.r/255,c=h.g/255,d=h.b/255,e=a<=.03928?a/12.92:b.pow((a+.055)/1.055,2.4),f=c<=.03928?c/12.92:b.pow((c+.055)/1.055,2.4),g=d<=.03928?d/12.92:b.pow((d+.055)/1.055,2.4),.2126*e+.7152*f+.0722*g},setAlpha:function(a){return this._a=A(a),this._roundA=Q(100*this._a)/100,this},toHsv:function(){var a=i(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=i(this._r,this._g,this._b),b=Q(360*a.h),c=Q(100*a.s),d=Q(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=g(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=g(this._r,this._g,this._b),b=Q(360*a.h),c=Q(100*a.s),d=Q(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return k(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(a){return l(this._r,this._g,this._b,this._a,a)},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:Q(this._r),g:Q(this._g),b:Q(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Q(this._r)+", "+Q(this._g)+", "+Q(this._b)+")":"rgba("+Q(this._r)+", "+Q(this._g)+", "+Q(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Q(100*B(this._r,255))+"%",g:Q(100*B(this._g,255))+"%",b:Q(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Q(100*B(this._r,255))+"%, "+Q(100*B(this._g,255))+"%, "+Q(100*B(this._b,255))+"%)":"rgba("+Q(100*B(this._r,255))+"%, "+Q(100*B(this._g,255))+"%, "+Q(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(V[k(this._r,this._g,this._b,!0)]||!1)},toFilter:function(a){var b="#"+m(this._r,this._g,this._b,this._a),c=b,e=this._gradientType?"GradientType = 1, ":"";if(a){var f=d(a);c="#"+m(f._r,f._g,f._b,f._a)}return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0;return b||!d||"hex"!==a&&"hex6"!==a&&"hex3"!==a&&"hex4"!==a&&"hex8"!==a&&"name"!==a?("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),"hex"!==a&&"hex6"!==a||(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex4"===a&&(c=this.toHex8String(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString()):"name"===a&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(q,arguments)},brighten:function(){return this._applyModification(r,arguments)},darken:function(){return this._applyModification(s,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(o,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(t,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},d.fromRatio=function(a,b){if("object"==typeof a){var c={};for(var e in a)a.hasOwnProperty(e)&&(c[e]="a"===e?a[e]:H(a[e]));a=c}return d(a,b)},d.equals=function(a,b){return!(!a||!b)&&d(a).toRgbString()==d(b).toRgbString()},d.random=function(){return d.fromRatio({r:T(),g:T(),b:T()})},d.mix=function(a,b,c){c=0===c?0:c||50;var e=d(a).toRgb(),f=d(b).toRgb(),g=c/100;return d({r:(f.r-e.r)*g+e.r,g:(f.g-e.g)*g+e.g,b:(f.b-e.b)*g+e.b,a:(f.a-e.a)*g+e.a})},d.readability=function(a,c){var e=d(a),f=d(c);return(b.max(e.getLuminance(),f.getLuminance())+.05)/(b.min(e.getLuminance(),f.getLuminance())+.05)},d.isReadable=function(a,b,c){var e,f,g=d.readability(a,b);switch(f=!1,e=M(c),e.level+e.size){case"AAsmall":case"AAAlarge":f=g>=4.5;break;case"AAlarge":f=g>=3;break;case"AAAsmall":f=g>=7}return f},d.mostReadable=function(a,b,c){var e,f,g,h,i=null,j=0;c=c||{},f=c.includeFallbackColors,g=c.level,h=c.size;for(var k=0;k<b.length;k++)(e=d.readability(a,b[k]))>j&&(j=e,i=d(b[k]));return d.isReadable(a,i,{level:g,size:h})||!f?i:(c.includeFallbackColors=!1,d.mostReadable(a,["#fff","#000"],c))};var U=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},V=d.hexNames=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(U),W=function(){var a="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",b="[\\s|\\(]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?",c="[\\s|\\(]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")[,|\\s]+("+a+")\\s*\\)?";return{CSS_UNIT:new RegExp(a),rgb:new RegExp("rgb"+b),rgba:new RegExp("rgba"+c),hsl:new RegExp("hsl"+b),hsla:new RegExp("hsla"+c),hsv:new RegExp("hsv"+b),hsva:new RegExp("hsva"+c),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==c&&c.exports?c.exports=d:"function"==typeof a&&a.amd?a(function(){return d}):window.tinycolor=d}(Math)},{}],547:[function(a,b,c){"use strict";function d(a){if("number"==typeof a)return e(a-e(a));for(var b=e(a),c=0,d=b.length;c<d;c++)b[c]=a[c]-b[c];return b}function e(a){if(a instanceof Float32Array)return a;if("number"==typeof a)return new Float32Array([a])[0];var b=new Float32Array(a);return b.set(a),b}b.exports=e,b.exports.float32=b.exports.float=e,b.exports.fract32=b.exports.fract=d},{}],548:[function(a,b,c){"use strict";function d(a,b){var c=g(getComputedStyle(a).getPropertyValue(b));return c[0]*f(c[1],a)}function e(a,b){var c=document.createElement("div");c.style["font-size"]="128"+a,b.appendChild(c);var e=d(c,"font-size")/128;return b.removeChild(c),e}function f(a,b){switch(b=b||document.body,a=(a||"px").trim().toLowerCase(),b!==window&&b!==document||(b=document.body),a){case"%":return b.clientHeight/100;case"ch":case"ex":return e(a,b);case"em":return d(b,"font-size");case"rem":return d(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return h;case"cm":return h/2.54;case"mm":return h/25.4;case"pt":return h/72;case"pc":return h/6}return 1}var g=a("parse-unit");b.exports=f;var h=96},{"parse-unit":467}],549:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.topojson=b.topojson||{})}(this,function(a){"use strict";function b(a,b){var d=b.id,e=b.bbox,f=null==b.properties?{}:b.properties,g=c(a,b);return null==d&&null==e?{type:"Feature",properties:f,geometry:g}:null==e?{type:"Feature",id:d,properties:f,geometry:g}:{type:"Feature",id:d,bbox:e,properties:f,geometry:g}}function c(a,b){function c(a,b){b.length&&b.pop()
;for(var c=l[a<0?~a:a],d=0,e=c.length;d<e;++d)b.push(j(c[d].slice(),d));a<0&&k(b,e)}function d(a){return j(a.slice())}function e(a){for(var b=[],d=0,e=a.length;d<e;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function h(a){var b,c=a.type;switch(c){case"GeometryCollection":return{type:c,geometries:a.geometries.map(h)};case"Point":b=d(a.coordinates);break;case"MultiPoint":b=a.coordinates.map(d);break;case"LineString":b=e(a.arcs);break;case"MultiLineString":b=a.arcs.map(e);break;case"Polygon":b=g(a.arcs);break;case"MultiPolygon":b=a.arcs.map(g);break;default:return null}return{type:c,coordinates:b}}var j=i(a),l=a.arcs;return h(b)}function d(a,b,c){var d,f,g;if(arguments.length>1)d=e(a,b,c);else for(f=0,d=new Array(g=a.arcs.length);f<g;++f)d[f]=f;return{type:"MultiLineString",arcs:m(a,d)}}function e(a,b,c){function d(a){var b=a<0?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){switch(i=a,a.type){case"GeometryCollection":a.geometries.forEach(h);break;case"LineString":e(a.arcs);break;case"MultiLineString":case"Polygon":f(a.arcs);break;case"MultiPolygon":g(a.arcs)}}var i,j=[],k=[];return h(b),k.forEach(null==c?function(a){j.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&j.push(a[0].i)}),j}function f(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return Math.abs(f)}function g(a,b){function d(a){switch(a.type){case"GeometryCollection":a.geometries.forEach(d);break;case"Polygon":e(a.arcs);break;case"MultiPolygon":a.arcs.forEach(e)}}function e(a){a.forEach(function(b){b.forEach(function(b){(h[b=b<0?~b:b]||(h[b]=[])).push(a)})}),i.push(a)}function g(b){return f(c(a,{type:"Polygon",arcs:[b]}).coordinates[0])}var h={},i=[],j=[];return b.forEach(d),i.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,j.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){h[a<0?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),i.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:j.map(function(b){var c,d=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){h[a<0?~a:a].length<2&&d.push(a)})})}),d=m(a,d),(c=d.length)>1)for(var e,f,i=1,j=g(d[0]);i<c;++i)(e=g(d[i]))>j&&(f=d[0],d[0]=d[i],d[i]=f,j=e);return d})}}var h=function(a){return a},i=function(a){if(null==(b=a.transform))return h;var b,c,d,e=b.scale[0],f=b.scale[1],g=b.translate[0],i=b.translate[1];return function(a,b){return b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+i,a}},j=function(a){function b(a){h[0]=a[0],h[1]=a[1],g(h),h[0]<j&&(j=h[0]),h[0]>l&&(l=h[0]),h[1]<k&&(k=h[1]),h[1]>m&&(m=h[1])}function c(a){switch(a.type){case"GeometryCollection":a.geometries.forEach(c);break;case"Point":b(a.coordinates);break;case"MultiPoint":a.coordinates.forEach(b)}}var d=a.bbox;if(!d){var e,f,g=i(a),h=new Array(2),j=1/0,k=j,l=-j,m=-j;a.arcs.forEach(function(a){for(var b=-1,c=a.length;++b<c;)e=a[b],h[0]=e[0],h[1]=e[1],g(h,b),h[0]<j&&(j=h[0]),h[0]>l&&(l=h[0]),h[1]<k&&(k=h[1]),h[1]>m&&(m=h[1])});for(f in a.objects)c(a.objects[f]);d=a.bbox=[j,k,l,m]}return d},k=function(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c},l=function(a,c){return"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(c){return b(a,c)})}:b(a,c)},m=function(a,b){function c(b){var c,d=a.arcs[b<0?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],b<0?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[a<0?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[c<0?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[a<0?~a:a]||h.push([a])}),h},n=function(a){return c(a,d.apply(this,arguments))},o=function(a){return c(a,g.apply(this,arguments))},p=function(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c},q=function(a){function b(a,b){a.forEach(function(a){a<0&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var i=e[h],j=i.length,k=0;k<j;++k)for(var l=k+1;l<j;++l){var m,n=i[k],o=i[l];(m=f[n])[h=p(m,o)]!==o&&m.splice(h,0,o),(m=f[o])[h=p(m,n)]!==n&&m.splice(h,0,n)}return f},r=function(a,b){function c(a){a[0]=Math.round((a[0]-g)/h),a[1]=Math.round((a[1]-i)/k)}function d(a){switch(a.type){case"GeometryCollection":a.geometries.forEach(d);break;case"Point":c(a.coordinates);break;case"MultiPoint":a.coordinates.forEach(c)}}if(!((b=Math.floor(b))>=2))throw new Error("n must be ≥2");if(a.transform)throw new Error("already quantized");var e,f=j(a),g=f[0],h=(f[2]-g)/(b-1)||1,i=f[1],k=(f[3]-i)/(b-1)||1;a.arcs.forEach(function(a){for(var b,c,d,e=1,f=1,j=a.length,l=a[0],m=l[0]=Math.round((l[0]-g)/h),n=l[1]=Math.round((l[1]-i)/k);e<j;++e)l=a[e],c=Math.round((l[0]-g)/h),d=Math.round((l[1]-i)/k),c===m&&d===n||(b=a[f++],b[0]=c-m,m=c,b[1]=d-n,n=d);f<2&&(b=a[f++],b[0]=0,b[1]=0),a.length=f});for(e in a.objects)d(a.objects[e]);return a.transform={scale:[h,k],translate:[g,i]},a},s=function(a){if(null==(b=a.transform))return h;var b,c,d,e=b.scale[0],f=b.scale[1],g=b.translate[0],i=b.translate[1];return function(a,b){b||(c=d=0);var h=Math.round((a[0]-g)/e),j=Math.round((a[1]-i)/f);return a[0]=h-c,c=h,a[1]=j-d,d=j,a}};a.bbox=j,a.feature=l,a.mesh=n,a.meshArcs=d,a.merge=o,a.mergeArcs=g,a.neighbors=q,a.quantize=r,a.transform=i,a.untransform=s,Object.defineProperty(a,"__esModule",{value:!0})})},{}],550:[function(a,b,c){"use strict";function d(a){if(a<0)return[];if(0===a)return[[0]];for(var b=0|Math.round(g(a+1)),c=[],d=0;d<b;++d){for(var h=e.unrank(a,d),i=[0],j=0,k=0;k<h.length;++k)j+=1<<h[k],i.push(j);f(h)<1&&(i[0]=j,i[a]=0),c.push(i)}return c}b.exports=d;var e=a("permutation-rank"),f=a("permutation-parity"),g=a("gamma")},{gamma:145,"permutation-parity":471,"permutation-rank":472}],551:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a){return Math.min(1,Math.max(-1,a))}function f(a){var b=Math.abs(a[0]),c=Math.abs(a[1]),d=Math.abs(a[2]),e=[0,0,0];b>Math.max(c,d)?e[2]=1:c>Math.max(b,d)?e[0]=1:e[1]=1;for(var f=0,g=0,h=0;h<3;++h)f+=a[h]*a[h],g+=e[h]*a[h];for(var h=0;h<3;++h)e[h]-=g/f*a[h];return m(e,e),e}function g(a,b,c,d,e,f,g,h){this.center=i(c),this.up=i(d),this.right=i(e),this.radius=i([f]),this.angle=i([g,h]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(a,b),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var j=0;j<16;++j)this.computedMatrix[j]=.5;this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.up||[0,1,0],e=a.right||f(c),h=a.radius||1,i=a.theta||0,j=a.phi||0;if(b=[].slice.call(b,0,3),c=[].slice.call(c,0,3),m(c,c),e=[].slice.call(e,0,3),m(e,e),"eye"in a){var k=a.eye,o=[k[0]-b[0],k[1]-b[1],k[2]-b[2]];l(e,o,c),d(e[0],e[1],e[2])<1e-6?e=f(c):m(e,e),h=d(o[0],o[1],o[2]);var p=n(c,o)/h,q=n(e,o)/h;j=Math.acos(p),i=Math.acos(q)}return h=Math.log(h),new g(a.zoomMin,a.zoomMax,b,c,e,h,i,j)}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/invert"),k=a("gl-mat4/rotate"),l=a("gl-vec3/cross"),m=a("gl-vec3/normalize"),n=a("gl-vec3/dot"),o=g.prototype;o.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-1/0,b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},o.getDistanceLimits=function(a){var b=this.radius.bounds[0];return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},o.recalcMatrix=function(a){this.center.curve(a),this.up.curve(a),this.right.curve(a),this.radius.curve(a),this.angle.curve(a);for(var b=this.computedUp,c=this.computedRight,e=0,f=0,g=0;g<3;++g)f+=b[g]*c[g],e+=b[g]*b[g];for(var h=Math.sqrt(e),i=0,g=0;g<3;++g)c[g]-=b[g]*f/e,i+=c[g]*c[g],b[g]/=h;for(var j=Math.sqrt(i),g=0;g<3;++g)c[g]/=j;var k=this.computedToward;l(k,b,c),m(k,k);for(var n=Math.exp(this.computedRadius[0]),o=this.computedAngle[0],p=this.computedAngle[1],q=Math.cos(o),r=Math.sin(o),s=Math.cos(p),t=Math.sin(p),u=this.computedCenter,v=q*s,w=r*s,x=t,y=-q*t,z=-r*t,A=s,B=this.computedEye,C=this.computedMatrix,g=0;g<3;++g){var D=v*c[g]+w*k[g]+x*b[g];C[4*g+1]=y*c[g]+z*k[g]+A*b[g],C[4*g+2]=D,C[4*g+3]=0}var E=C[1],F=C[5],G=C[9],H=C[2],I=C[6],J=C[10],K=F*J-G*I,L=G*H-E*J,M=E*I-F*H,N=d(K,L,M);K/=N,L/=N,M/=N,C[0]=K,C[4]=L,C[8]=M;for(var g=0;g<3;++g)B[g]=u[g]+C[2+4*g]*n;for(var g=0;g<3;++g){for(var i=0,O=0;O<3;++O)i+=C[g+4*O]*B[O];C[12+g]=-i}C[15]=1},o.getMatrix=function(a,b){this.recalcMatrix(a);var c=this.computedMatrix;if(b){for(var d=0;d<16;++d)b[d]=c[d];return b}return c};var p=[0,0,0];o.rotate=function(a,b,c,d){if(this.angle.move(a,b,c),d){this.recalcMatrix(a);var e=this.computedMatrix;p[0]=e[2],p[1]=e[6],p[2]=e[10];for(var f=this.computedUp,g=this.computedRight,h=this.computedToward,i=0;i<3;++i)e[4*i]=f[i],e[4*i+1]=g[i],e[4*i+2]=h[i];k(e,e,d,p);for(var i=0;i<3;++i)f[i]=e[4*i],g[i]=e[4*i+1];this.up.set(a,f[0],f[1],f[2]),this.right.set(a,g[0],g[1],g[2])}},o.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=(Math.exp(this.computedRadius[0]),f[1]),h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);k/=o,l/=o,m/=o;var p=k*b+g*c,q=l*b+h*c,r=m*b+i*c;this.center.move(a,p,q,r);var s=Math.exp(this.computedRadius[0]);s=Math.max(1e-4,s+e),this.radius.set(a,Math.log(s))},o.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},o.setMatrix=function(a,b,c,f){var g=1;"number"==typeof c&&(g=0|c),(g<0||g>3)&&(g=1);var h=(g+2)%3;b||(this.recalcMatrix(a),b=this.computedMatrix);var i=b[g],k=b[g+4],l=b[g+8];if(f){var m=Math.abs(i),n=Math.abs(k),o=Math.abs(l),p=Math.max(m,n,o);m===p?(i=i<0?-1:1,k=l=0):o===p?(l=l<0?-1:1,i=k=0):(k=k<0?-1:1,i=l=0)}else{var q=d(i,k,l);i/=q,k/=q,l/=q}var r=b[h],s=b[h+4],t=b[h+8],u=r*i+s*k+t*l;r-=i*u,s-=k*u,t-=l*u;var v=d(r,s,t);r/=v,s/=v,t/=v;var w=k*t-l*s,x=l*r-i*t,y=i*s-k*r,z=d(w,x,y);w/=z,x/=z,y/=z,this.center.jump(a,S,T,U),this.radius.idle(a),this.up.jump(a,i,k,l),this.right.jump(a,r,s,t);var A,B;if(2===g){var C=b[1],D=b[5],E=b[9],F=C*r+D*s+E*t,G=C*w+D*x+E*y;A=K<0?-Math.PI/2:Math.PI/2,B=Math.atan2(G,F)}else{var H=b[2],I=b[6],J=b[10],K=H*i+I*k+J*l,L=H*r+I*s+J*t,M=H*w+I*x+J*y;A=Math.asin(e(K)),B=Math.atan2(M,L)}this.angle.jump(a,B,A),this.recalcMatrix(a);var N=b[2],O=b[6],P=b[10],Q=this.computedMatrix;j(Q,b);var R=Q[15],S=Q[12]/R,T=Q[13]/R,U=Q[14]/R,V=Math.exp(this.computedRadius[0]);this.center.jump(a,S-N*V,T-O*V,U-P*V)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(a){this.center.idle(a),this.up.idle(a),this.right.idle(a),this.radius.idle(a),this.angle.idle(a)},o.flush=function(a){this.center.flush(a),this.up.flush(a),this.right.flush(a),this.radius.flush(a),this.angle.flush(a)},o.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},o.lookAt=function(a,b,c,f){this.recalcMatrix(a),b=b||this.computedEye,c=c||this.computedCenter,f=f||this.computedUp;var g=f[0],h=f[1],i=f[2],j=d(g,h,i);if(!(j<1e-6)){g/=j,h/=j,i/=j;var k=b[0]-c[0],l=b[1]-c[1],m=b[2]-c[2],n=d(k,l,m);if(!(n<1e-6)){k/=n,l/=n,m/=n;var o=this.computedRight,p=o[0],q=o[1],r=o[2],s=g*p+h*q+i*r;p-=s*g,q-=s*h,r-=s*i;var t=d(p,q,r);if(!(t<.01&&(p=h*m-i*l,q=i*k-g*m,r=g*l-h*k,(t=d(p,q,r))<1e-6))){p/=t,q/=t,r/=t,this.up.set(a,g,h,i),this.right.set(a,p,q,r),this.center.set(a,c[0],c[1],c[2]),this.radius.set(a,Math.log(n));var u=h*r-i*q,v=i*p-g*r,w=g*q-h*p,x=d(u,v,w);u/=x,v/=x,w/=x;var y=g*k+h*l+i*m,z=p*k+q*l+r*m,A=u*k+v*l+w*m,B=Math.asin(e(y)),C=Math.atan2(A,z),D=this.angle._state,E=D[D.length-1],F=D[D.length-2];E%=2*Math.PI;var G=Math.abs(E+2*Math.PI-C),H=Math.abs(E-C),I=Math.abs(E-2*Math.PI-C);G<H&&(E+=2*Math.PI),I<H&&(E-=2*Math.PI),this.angle.jump(this.angle.lastT(),E,F),this.angle.set(a,C,B)}}}}},{"filtered-vector":142,"gl-mat4/invert":186,"gl-mat4/rotate":190,"gl-vec3/cross":260,"gl-vec3/dot":261,"gl-vec3/normalize":264}],552:[function(a,b,c){"use strict";function d(a,b,c){var d=a*b,f=e*a,g=f-a,h=f-g,i=a-h,j=e*b,k=j-b,l=j-k,m=b-l,n=d-h*l,o=n-i*l,p=o-h*m,q=i*m-p;return c?(c[0]=q,c[1]=d,c):[q,d]}b.exports=d;var e=+(Math.pow(2,27)+1)},{}],553:[function(a,b,c){"use strict";function d(a,b,c){var d=a+b,e=d-a,f=d-e,g=b-e,h=a-f;return c?(c[0]=h+g,c[1]=d,c):[h+g,d]}b.exports=d},{}],554:[function(a,b,c){(function(b,d){"use strict";function e(a){if(a){var b=a.length||a.byteLength,c=s.log2(b);w[c].push(a)}}function f(a){e(a.buffer)}function g(a){var a=s.nextPow2(a),b=s.log2(a),c=w[b];return c.length>0?c.pop():new ArrayBuffer(a)}function h(a){return new Uint8Array(g(a),0,a)}function i(a){return new Uint16Array(g(2*a),0,a)}function j(a){return new Uint32Array(g(4*a),0,a)}function k(a){return new Int8Array(g(a),0,a)}function l(a){return new Int16Array(g(2*a),0,a)}function m(a){return new Int32Array(g(4*a),0,a)}function n(a){return new Float32Array(g(4*a),0,a)}function o(a){return new Float64Array(g(8*a),0,a)}function p(a){return u?new Uint8ClampedArray(g(a),0,a):h(a)}function q(a){return new DataView(g(a),0,a)}function r(a){a=s.nextPow2(a);var b=s.log2(a),c=x[b];return c.length>0?c.pop():new d(a)}var s=a("bit-twiddle"),t=a("dup");b.__TYPEDARRAY_POOL||(b.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var u="undefined"!=typeof Uint8ClampedArray,v=b.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=t([32,0])),v.BUFFER||(v.BUFFER=t([32,0]));var w=v.DATA,x=v.BUFFER;c.free=function(a){if(d.isBuffer(a))x[s.log2(a.length)].push(a);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),!a)return;var b=a.length||a.byteLength,c=0|s.log2(b);w[c].push(a)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeInt8=c.freeInt16=c.freeInt32=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=f,c.freeArrayBuffer=e,c.freeBuffer=function(a){x[s.log2(a.length)].push(a)},c.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case"uint8":return h(a);case"uint16":return i(a);case"uint32":return j(a);case"int8":return k(a);case"int16":return l(a);case"int32":return m(a);case"float":case"float32":return n(a);case"double":case"float64":return o(a);case"uint8_clamped":return p(a);case"buffer":return r(a);case"data":case"dataview":return q(a);default:return null}return null},c.mallocArrayBuffer=g,c.mallocUint8=h,c.mallocUint16=i,c.mallocUint32=j,c.mallocInt8=k,c.mallocInt16=l,c.mallocInt32=m,c.mallocFloat32=c.mallocFloat=n,c.mallocFloat64=c.mallocDouble=o,c.mallocUint8Clamped=p,c.mallocDataView=q,c.mallocBuffer=r,c.clearCache=function(){for(var a=0;a<32;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.UINT8C[a].length=0,w[a].length=0,x[a].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":71,buffer:82,dup:134}],555:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d;var e=d.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.find=function(a){for(var b=a,c=this.roots;c[a]!==a;)a=c[a];for(;c[b]!==a;){var d=c[b];c[b]=a,b=d}return a},e.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];g<h?f[c]=d:h<g?f[d]=c:(f[d]=c,++e[c])}}},{}],556:[function(a,b,c){"use strict";function d(a,b){for(var c=1,d=a.length,e=a[0],f=a[0],g=1;g<d;++g)if(f=e,e=a[g],b(e,f)){if(g===c){c++;continue}a[c++]=e}return a.length=c,a}function e(a){for(var b=1,c=a.length,d=a[0],e=a[0],f=1;f<c;++f,e=d)if(e=d,(d=a[f])!==e){if(f===b){b++;continue}a[b++]=d}return a.length=b,a}function f(a,b,c){return 0===a.length?a:b?(c||a.sort(b),d(a,b)):(c||a.sort(),e(a))}b.exports=f},{}],557:[function(a,b,c){function d(a,b,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(d-b)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=d,this.p2x=c,this.p2y=d}b.exports=d,d.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},d.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},d.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},d.prototype.solveCurveX=function(a,b){void 0===b&&(b=1e-6);var c,d,e,f,g;for(e=a,g=0;g<8;g++){if(f=this.sampleCurveX(e)-a,Math.abs(f)<b)return e;var h=this.sampleCurveDerivativeX(e);if(Math.abs(h)<1e-6)break;e-=f/h}if(c=0,d=1,(e=a)<c)return c;if(e>d)return d;for(;c<d;){if(f=this.sampleCurveX(e),Math.abs(f-a)<b)return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e},d.prototype.solve=function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))}},{}],558:[function(a,b,c){"use strict";b.exports=function(a,b,c){Array.isArray(c)||(c=[].slice.call(arguments,2));for(var d=0,e=c.length;d<e;d++){var f=c[d];for(var g in f)if((void 0===b[g]||Array.isArray(b[g])||a[g]!==b[g])&&g in b){var h;if(!0===f[g])h=b[g];else{if(!1===f[g])continue;if("function"==typeof f[g]&&void 0===(h=f[g](b[g],a,b)))continue}a[g]=h}}return a}},{}],559:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=/^[+a-z0-9A-Z_-]{0,63}$/,t=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],this.query=b?x.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var y="//"===h.substr(0,2);!y||n&&v[n]||(h=h.substr(2),this.slashes=!0)}if(!v[n]&&(y||n&&!w[n])){for(var z=-1,A=0;A<r.length;A++){var B=h.indexOf(r[A]);-1!==B&&(-1===z||B<z)&&(z=B)}var C,D;D=-1===z?h.lastIndexOf("@"):h.lastIndexOf("@",z),-1!==D&&(C=h.slice(0,D),h=h.slice(D+1),this.auth=decodeURIComponent(C)),z=-1;for(var A=0;A<q.length;A++){var B=h.indexOf(q[A]);-1!==B&&(-1===z||B<z)&&(z=B)}-1===z&&(z=h.length),this.host=h.slice(0,z),h=h.slice(z),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var F=this.hostname.split(/\./),A=0,G=F.length;A<G;A++){var H=F[A];if(H&&!H.match(s)){for(var I="",J=0,K=H.length;J<K;J++)H.charCodeAt(J)>127?I+="x":I+=H[J];if(!I.match(s)){var L=F.slice(0,A),M=F.slice(A+1),N=H.match(t);N&&(L.push(N[1]),M.unshift(N[2])),M.length&&(h="/"+M.join(".")+h),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=i.toASCII(this.hostname));var O=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+O,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!u[o])for(var A=0,G=p.length;A<G;A++){var Q=p[A];if(-1!==h.indexOf(Q)){var R=encodeURIComponent(Q);R===Q&&(R=escape(Q)),h=h.split(Q).join(R)}}var S=h.indexOf("#");-1!==S&&(this.hash=h.substr(S),h=h.slice(0,S));var T=h.indexOf("?");if(-1!==T?(this.search=h.substr(T),this.query=h.substr(T+1),b&&(this.query=x.parse(this.query)),h=h.slice(0,T)):b&&(this.search="",this.query={}),h&&(this.pathname=h),w[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",U=this.search||"";this.path=O+U}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=x.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||w[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return w[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!w[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||v[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,x=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!w[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===x[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=x.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=x.slice(-1)[0],B=(c.host||a.host||x.length>1)&&("."===A||".."===A)||""===A,C=0,D=x.length;D>=0;D--)A=x[D],"."===A?x.splice(D,1):".."===A?(x.splice(D,1),C++):C&&(x.splice(D,1),C--);if(!t&&!u)for(;C--;C)x.unshift("..");!t||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),B&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(y){c.hostname=c.host=E?"":x.length?x.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&x.length,t&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":560,punycode:489,querystring:493}],560:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],561:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],562:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],563:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){r=" [Function"+(b.name?": "+b.name:"")+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(d<0)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var v;return v=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(v,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0;return a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||void 0===a}function C(a){return Object.prototype.toString.call(a)}function D(a){return a<10?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),h=d[c];c<f;h=d[++c])q(h)||!x(h)?g+=" "+h:g+=" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(!0===b.noDeprecation)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){
var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":562,_process:488,inherits:561}],564:[function(a,b,c){b.exports.VectorTile=a("./lib/vectortile.js"),b.exports.VectorTileFeature=a("./lib/vectortilefeature.js"),b.exports.VectorTileLayer=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":565,"./lib/vectortilefeature.js":566,"./lib/vectortilelayer.js":567}],565:[function(a,b,c){"use strict";function d(a,b){this.layers=a.readFields(e,{},b)}function e(a,b,c){if(3===a){var d=new f(c,c.readVarint()+c.pos);d.length&&(b[d.name]=d)}}var f=a("./vectortilelayer");b.exports=d},{"./vectortilelayer":567}],566:[function(a,b,c){"use strict";function d(a,b,c,d,f){this.properties={},this.extent=c,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=f,a.readFields(e,this,b)}function e(a,b,c){1==a?b.id=c.readVarint():2==a?f(c,b):3==a?b.type=c.readVarint():4==a&&(b._geometry=c.pos)}function f(a,b){for(var c=a.readVarint()+a.pos;a.pos<c;){var d=b._keys[a.readVarint()],e=b._values[a.readVarint()];b.properties[d]=e}}function g(a){var b=a.length;if(b<=1)return[a];for(var c,d,e=[],f=0;f<b;f++){var g=h(a[f]);0!==g&&(void 0===d&&(d=g<0),d===g<0?(c&&e.push(c),c=[a[f]]):c.push(a[f]))}return c&&e.push(c),e}function h(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var i=a("point-geometry");b.exports=d,d.types=["Unknown","Point","LineString","Polygon"],d.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var b,c=a.readVarint()+a.pos,d=1,e=0,f=0,g=0,h=[];a.pos<c;){if(!e){var j=a.readVarint();d=7&j,e=j>>3}if(e--,1===d||2===d)f+=a.readSVarint(),g+=a.readSVarint(),1===d&&(b&&h.push(b),b=[]),b.push(new i(f,g));else{if(7!==d)throw new Error("unknown command "+d);b&&b.push(b[0].clone())}}return b&&h.push(b),h},d.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var b=a.readVarint()+a.pos,c=1,d=0,e=0,f=0,g=1/0,h=-1/0,i=1/0,j=-1/0;a.pos<b;){if(!d){var k=a.readVarint();c=7&k,d=k>>3}if(d--,1===c||2===c)e+=a.readSVarint(),f+=a.readSVarint(),e<g&&(g=e),e>h&&(h=e),f<i&&(i=f),f>j&&(j=f);else if(7!==c)throw new Error("unknown command "+c)}return[g,i,h,j]},d.prototype.toGeoJSON=function(a,b,c){function e(a){for(var b=0;b<a.length;b++){var c=a[b],d=180-360*(c.y+k)/i;a[b]=[360*(c.x+j)/i-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}}var f,h,i=this.extent*Math.pow(2,c),j=this.extent*a,k=this.extent*b,l=this.loadGeometry(),m=d.types[this.type];switch(this.type){case 1:var n=[];for(f=0;f<l.length;f++)n[f]=l[f][0];l=n,e(l);break;case 2:for(f=0;f<l.length;f++)e(l[f]);break;case 3:for(l=g(l),f=0;f<l.length;f++)for(h=0;h<l[f].length;h++)e(l[f][h])}1===l.length?l=l[0]:m="Multi"+m;var o={type:"Feature",geometry:{type:m,coordinates:l},properties:this.properties};return"id"in this&&(o.id=this.id),o}},{"point-geometry":477}],567:[function(a,b,c){"use strict";function d(a,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(e,this,b),this.length=this._features.length}function e(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():5===a?b.extent=c.readVarint():2===a?b._features.push(c.pos):3===a?b._keys.push(c.readString()):4===a&&b._values.push(f(c))}function f(a){for(var b=null,c=a.readVarint()+a.pos;a.pos<c;){var d=a.readVarint()>>3;b=1===d?a.readString():2===d?a.readFloat():3===d?a.readDouble():4===d?a.readVarint64():5===d?a.readVarint():6===d?a.readSVarint():7===d?a.readBoolean():null}return b}var g=a("./vectortilefeature.js");b.exports=d,d.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var b=this._pbf.readVarint()+this._pbf.pos;return new g(this._pbf,b,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":566}],568:[function(a,b,c){"use strict";function d(a,b){return"object"==typeof b&&null!==b||(b={}),e(a,b.canvas||f,b.context||g,b)}b.exports=d;var e=a("./lib/vtext"),f=null,g=null;"undefined"!=typeof document&&(f=document.createElement("canvas"),f.width=8192,f.height=1024,g=f.getContext("2d"))},{"./lib/vtext":569}],569:[function(a,b,c){"use strict";function d(a,b,c){for(var d=b.textAlign||"start",e=b.textBaseline||"alphabetic",f=[1<<30,1<<30],g=[0,0],h=a.length,i=0;i<h;++i)for(var j=a[i],k=0;k<2;++k)f[k]=0|Math.min(f[k],j[k]),g[k]=0|Math.max(g[k],j[k]);var l=0;switch(d){case"center":l=-.5*(f[0]+g[0]);break;case"right":case"end":l=-g[0];break;case"left":case"start":l=-f[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+d+"'")}var m=0;switch(e){case"hanging":case"top":m=-f[1];break;case"middle":m=-.5*(f[1]+g[1]);break;case"alphabetic":case"ideographic":m=-3*c;break;case"bottom":m=-g[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'")}var n=1/c;return"lineHeight"in b?n*=+b.lineHeight:"width"in b?n=b.width/(g[0]-f[0]):"height"in b&&(n=b.height/(g[1]-f[1])),a.map(function(a){return[n*(a[0]+l),n*(a[1]+m)]})}function e(a,b,c,d){var e=0|Math.ceil(b.measureText(c).width+2*d);if(e>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var f=3*d;a.height<f&&(a.height=f),b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.fillStyle="#fff",b.fillText(c,d,2*d);var g=b.getImageData(0,0,e,f);return k(g.data,[f,e,4]).pick(-1,-1,0).transpose(1,0)}function f(a,b){var c=j(a,128);return b?l(c.cells,c.positions,.25):{edges:c.cells,positions:c.positions}}function g(a,b,c,e){var g=f(a,e),h=d(g.positions,b,c),i=g.edges,j="ccw"===b.orientation;if(m(h,i),b.polygons||b.polygon||b.polyline){for(var k=o(i,h),l=new Array(k.length),p=0;p<k.length;++p){for(var q=k[p],r=new Array(q.length),s=0;s<q.length;++s){for(var t=q[s],u=new Array(t.length),v=0;v<t.length;++v)u[v]=h[t[v]].slice();j&&u.reverse(),r[s]=u}l[p]=r}return l}return b.triangles||b.triangulate||b.triangle?{cells:n(h,i,{delaunay:!1,exterior:!1,interior:!0}),positions:h}:{edges:i,positions:h}}function h(a,b,c){try{return g(a,b,c,!0)}catch(a){}try{return g(a,b,c,!1)}catch(a){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function i(a,b,c,d){var f=d.size||64,g=d.font||"normal";return c.font=f+"px "+g,c.textAlign="start",c.textBaseline="alphabetic",c.direction="ltr",h(e(b,c,a,f),d,f)}b.exports=i,b.exports.processPixels=h;var j=a("surface-nets"),k=a("ndarray"),l=a("simplify-planar-graph"),m=a("clean-pslg"),n=a("cdt2d"),o=a("planar-graph-to-polyline")},{cdt2d:84,"clean-pslg":94,ndarray:458,"planar-graph-to-polyline":476,"simplify-planar-graph":530,"surface-nets":540}],570:[function(a,b,c){function d(a){var b=[];for(var c in a.layers)b.push(f(a.layers[c]));var d=new k;return l.tile.write({layers:b},d),d.finish()}function e(a){var b={};for(var c in a)b[c]=new m(a[c].features),b[c].name=c;return d({layers:b})}function f(a){for(var b={name:a.name||"",version:a.version||1,extent:a.extent||4096,keys:[],values:[],features:[]},c={},d={},e=0;e<a.length;e++){var f=a.feature(e);f.geometry=i(f.loadGeometry());var g=[];for(var h in f.properties){var k=c[h];void 0===k&&(b.keys.push(h),k=b.keys.length-1,c[h]=k);var l=j(f.properties[h]),m=d[l.key];void 0===m&&(b.values.push(l),m=b.values.length-1,d[l.key]=m),g.push(k),g.push(m)}f.tags=g,b.features.push(f)}return b}function g(a,b){return(b<<3)+(7&a)}function h(a){return a<<1^a>>31}function i(a){for(var b=[],c=0,d=0,e=a.length,f=0;f<e;f++){var i=a[f];b.push(g(1,1));for(var j=0;j<i.length;j++){1===j&&b.push(g(2,i.length-1));var k=i[j].x-c,l=i[j].y-d;b.push(h(k),h(l)),c+=k,d+=l}}return b}function j(a){var b,c=typeof a;return"string"===c?b={string_value:a}:"boolean"===c?b={bool_value:a}:"number"===c?b=a%1!=0?{double_value:a}:a<0?{sint_value:a}:{uint_value:a}:(a=JSON.stringify(a),b={string_value:a}),b.key=c+":"+a,b}var k=a("pbf"),l=a("./vector-tile-pb"),m=a("./lib/geojson_wrapper");b.exports=d,b.exports.fromVectorTileJs=d,b.exports.fromGeojsonVt=e,b.exports.GeoJSONWrapper=m},{"./lib/geojson_wrapper":571,"./vector-tile-pb":572,pbf:470}],571:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length}function e(a){this.id="number"==typeof a.id?a.id:void 0,this.type=a.type,this.rawGeometry=1===a.type?[a.geometry]:a.geometry,this.properties=a.tags,this.extent=4096}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-1/0,d=1/0,e=-1/0,f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"point-geometry":477,"vector-tile":564}],572:[function(a,b,c){"use strict";function d(a,b){return a.readFields(e,{layers:[]},b)}function e(a,b,c){3===a&&b.layers.push(m(c,c.readVarint()+c.pos))}function f(a,b){var c;if(void 0!==a.layers)for(c=0;c<a.layers.length;c++)b.writeMessage(3,o,a.layers[c])}function g(a,b){return a.readFields(h,{},b)}function h(a,b,c){1===a?b.string_value=c.readString():2===a?b.float_value=c.readFloat():3===a?b.double_value=c.readDouble():4===a?b.int_value=c.readVarint():5===a?b.uint_value=c.readVarint():6===a?b.sint_value=c.readSVarint():7===a&&(b.bool_value=c.readBoolean())}function i(a,b){void 0!==a.string_value&&b.writeStringField(1,a.string_value),void 0!==a.float_value&&b.writeFloatField(2,a.float_value),void 0!==a.double_value&&b.writeDoubleField(3,a.double_value),void 0!==a.int_value&&b.writeVarintField(4,a.int_value),void 0!==a.uint_value&&b.writeVarintField(5,a.uint_value),void 0!==a.sint_value&&b.writeSVarintField(6,a.sint_value),void 0!==a.bool_value&&b.writeBooleanField(7,a.bool_value)}function j(a,b){var c=a.readFields(k,{},b);return void 0===c.type&&(c.type="Unknown"),c}function k(a,b,c){1===a?b.id=c.readVarint():2===a?b.tags=c.readPackedVarint():3===a?b.type=c.readVarint():4===a&&(b.geometry=c.readPackedVarint())}function l(a,b){void 0!==a.id&&b.writeVarintField(1,a.id),void 0!==a.tags&&b.writePackedVarint(2,a.tags),void 0!==a.type&&b.writeVarintField(3,a.type),void 0!==a.geometry&&b.writePackedVarint(4,a.geometry)}function m(a,b){return a.readFields(n,{features:[],keys:[],values:[]},b)}function n(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():2===a?b.features.push(j(c,c.readVarint()+c.pos)):3===a?b.keys.push(c.readString()):4===a?b.values.push(g(c,c.readVarint()+c.pos)):5===a&&(b.extent=c.readVarint())}function o(a,b){void 0!==a.version&&b.writeVarintField(15,a.version),void 0!==a.name&&b.writeStringField(1,a.name);var c;if(void 0!==a.features)for(c=0;c<a.features.length;c++)b.writeMessage(2,l,a.features[c]);if(void 0!==a.keys)for(c=0;c<a.keys.length;c++)b.writeStringField(3,a.keys[c]);if(void 0!==a.values)for(c=0;c<a.values.length;c++)b.writeMessage(4,i,a.values[c]);void 0!==a.extent&&b.writeVarintField(5,a.extent)}var p=c.tile={read:d,write:f};p.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},p.value={read:g,write:i},p.feature={read:j,write:l},p.layer={read:m,write:o}},{}],573:[function(a,b,c){!function(){"use strict";function a(b){b.permitHostObjects___&&b.permitHostObjects___(a)}function c(a){return!(a.substr(0,n.length)==n&&"___"===a.substr(a.length-3))}function d(a){if(a!==Object(a))throw new TypeError("Not an object: "+a);var b=a[o];if(b&&b.key===a)return b;if(m(a)){b={key:a};try{return l(a,o,{value:b,writable:!1,enumerable:!1,configurable:!1}),b}catch(a){return}}}function e(a){return a.prototype=null,Object.freeze(a)}function f(){s||"undefined"==typeof console||(s=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=a);var g=!1;if("function"==typeof WeakMap){var h=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var i=new h,j=Object.freeze({});if(i.set(j,1),1===i.get(j))return void(b.exports=WeakMap);g=!0}}var k=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),l=Object.defineProperty,m=Object.isExtensible,n="weakmap:",o=n+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var p=new ArrayBuffer(25),q=new Uint8Array(p);crypto.getRandomValues(q),o=n+"rand:"+Array.prototype.map.call(q,function(a){return(a%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(a){return k(a).filter(c)}}),"getPropertyNames"in Object){var r=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(a){return r(a).filter(c)}})}!function(){var a=Object.freeze;l(Object,"freeze",{value:function(b){return d(b),a(b)}});var b=Object.seal;l(Object,"seal",{value:function(a){return d(a),b(a)}});var c=Object.preventExtensions;l(Object,"preventExtensions",{value:function(a){return d(a),c(a)}})}();var s=!1,t=0,u=function(){function a(a,b){var c,e=d(a);return e?j in e?e[j]:b:(c=h.indexOf(a),c>=0?i[c]:b)}function b(a){var b=d(a);return b?j in b:h.indexOf(a)>=0}function c(a,b){var c,e=d(a);return e?e[j]=b:(c=h.indexOf(a),c>=0?i[c]=b:(c=h.length,i[c]=b,h[c]=a)),this}function g(a){var b,c,e=d(a);return e?j in e&&delete e[j]:!((b=h.indexOf(a))<0)&&(c=h.length-1,h[b]=void 0,i[b]=i[c],h[b]=h[c],h.length=c,i.length=c,!0)}this instanceof u||f();var h=[],i=[],j=t++;return Object.create(u.prototype,{get___:{value:e(a)},has___:{value:e(b)},set___:{value:e(c)},delete___:{value:e(g)}})};u.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){return this.set___(a,b)},writable:!0,configurable:!0},delete:{value:function(a){return this.delete___(a)},writable:!0,configurable:!0}}),"function"==typeof h?function(){function c(){function b(a,b){return k?j.has(a)?j.get(a):k.get___(a,b):j.get(a,b)}function c(a){return j.has(a)||!!k&&k.has___(a)}function d(a){var b=!!j.delete(a);return k?k.delete___(a)||b:b}this instanceof u||f();var i,j=new h,k=void 0,l=!1;return i=g?function(a,b){return j.set(a,b),j.has(a)||(k||(k=new u),k.set(a,b)),this}:function(a,b){if(l)try{j.set(a,b)}catch(c){k||(k=new u),k.set___(a,b)}else j.set(a,b);return this},Object.create(u.prototype,{get___:{value:e(b)},has___:{value:e(c)},set___:{value:e(i)},delete___:{value:e(d)},permitHostObjects___:{value:e(function(b){if(b!==a)throw new Error("bogus call to permitHostObjects___");l=!0})}})}g&&"undefined"!=typeof Proxy&&(Proxy=void 0),c.prototype=u.prototype,b.exports=c,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=u)}}()},{}],574:[function(a,b,c){function d(){var a={};return function(b){if(("object"!=typeof b||null===b)&&"function"!=typeof b)throw new Error("Weakmap-shim: Key must be object");var c=b.valueOf(a);return c&&c.identity===a?c:e(b,a)}}var e=a("./hidden-store.js");b.exports=d},{"./hidden-store.js":575}],575:[function(a,b,c){function d(a,b){var c={identity:b},d=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(a){return a!==b?d.apply(this,arguments):c},writable:!0}),c}b.exports=d},{}],576:[function(a,b,c){function d(){var a=e();return{get:function(b,c){var d=a(b);return d.hasOwnProperty("value")?d.value:c},set:function(b,c){return a(b).value=c,this},has:function(b){return"value"in a(b)},delete:function(b){return delete a(b).value}}}var e=a("./create-store.js");b.exports=d},{"./create-store.js":574}],577:[function(a,b,c){var d=a("get-canvas-context");b.exports=function(a){return d("webgl",a)}},{"get-canvas-context":156}],578:[function(a,b,c){var d=arguments[3],e=arguments[4],f=arguments[5],g=JSON.stringify;b.exports=function(a,b){function c(a){q[a]=!0;for(var b in e[a][1]){var d=e[a][1][b];q[d]||c(d)}}for(var h,i=Object.keys(f),j=0,k=i.length;j<k;j++){var l=i[j],m=f[l].exports;if(m===a||m&&m.default===a){h=l;break}}if(!h){h=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var n={},j=0,k=i.length;j<k;j++){var l=i[j];n[l]=l}e[h]=[Function(["require","module","exports"],"("+a+")(self)"),n]}var o=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[h]=h,e[o]=[Function(["require"],"var f = require("+g(h)+");(f.default ? f.default : f)(self);"),p];var q={};c(o);var r="("+d+")({"+Object.keys(q).map(function(a){return g(a)+":["+e[a][0]+","+g(e[a][1])+"]"}).join(",")+"},{},["+g(o)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL,t=new Blob([r],{type:"text/javascript"});if(b&&b.bare)return t;var u=s.createObjectURL(t),v=new Worker(u);return v.objectURL=u,v}},{}],579:[function(a,b,c){b.exports.RADIUS=6378137,b.exports.FLATTENING=1/298.257223563,b.exports.POLAR_RADIUS=6356752.3142},{}],580:[function(b,c,d){!function(b,e){"object"==typeof d&&void 0!==c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.WhooTS=b.WhooTS||{})}(this,function(a){function b(a,b,d,e,f,g){return g=g||{},a+"?"+["bbox="+c(d,e,f),"format="+(g.format||"image/png"),"service="+(g.service||"WMS"),"version="+(g.version||"1.1.1"),"request="+(g.request||"GetMap"),"srs="+(g.srs||"EPSG:3857"),"width="+(g.width||256),"height="+(g.height||256),"layers="+b].join("&")}function c(a,b,c){b=Math.pow(2,c)-b-1;var e=d(256*a,256*b,c),f=d(256*(a+1),256*(b+1),c);return e[0]+","+e[1]+","+f[0]+","+f[1]}function d(a,b,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[a*d-2*Math.PI*6378137/2,b*d-2*Math.PI*6378137/2]}a.getURL=b,a.getTileBBox=c,a.getMercCoords=d,Object.defineProperty(a,"__esModule",{value:!0})})},{}],581:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b,c,d){var e,f;if("object"==typeof a)e=a,f=b||{};else{if(!("number"==typeof a&&a>=1888&&a<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof b&&b>=1&&b<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof c&&c>=1&&c<=31))throw new Error("Solar day outside range 1 - 31");e={year:a,month:b,day:c},f=d||{}}var g=o[e.year-o[0]],h=e.year<<9|e.month<<5|e.day;f.year=h>=g?e.year:e.year-1,g=o[f.year-o[0]];var i,j=g>>9&4095,k=g>>5&15,l=31&g,m=new Date(j,k-1,l),p=new Date(e.year,e.month-1,e.day);i=Math.round((p-m)/864e5);var q,r=n[f.year-n[0]];for(q=0;q<13;q++){var s=r&1<<12-q?30:29;if(i<s)break;i-=s}var t=r>>13;return!t||q<t?(f.isIntercalary=!1,f.month=1+q):q===t?(f.isIntercalary=!0,f.month=q):(f.isIntercalary=!1,f.month=q),f.day=1+i,f}function f(a,b,c,d,e){var f,g;if("object"==typeof a)g=a,f=b||{};else{if(!("number"==typeof a&&a>=1888&&a<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof b&&b>=1&&b<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof c&&c>=1&&c<=30))throw new Error("Lunar day outside range 1 - 30");var h;"object"==typeof d?(h=!1,f=d):(h=!!d,f=e||{}),g={year:a,month:b,day:c,isIntercalary:h}}var i;i=g.day-1;var j,k=n[g.year-n[0]],l=k>>13;j=l?g.month>l?g.month:g.isIntercalary?g.month:g.month-1:g.month-1;for(var m=0;m<j;m++){i+=k&1<<12-m?30:29}var p=o[g.year-o[0]],q=p>>9&4095,r=p>>5&15,s=31&p,t=new Date(q,r-1,s+i);return f.year=t.getFullYear(),f.month=1+t.getMonth(),f.day=t.getDate(),f}var g=a("../main"),h=a("object-assign"),i=g.instance();d.prototype=new g.baseCalendar,h(d.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(a,b){if("string"==typeof a){var c=a.match(k);return c?c[0]:""}var d=this._validateYear(a),e=a.month(),f=""+this.toChineseMonth(d,e);return b&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(d,e)&&(f+="i"),f},monthNames:function(a){if("string"==typeof a){var b=a.match(l);return b?b[0]:""}var c=this._validateYear(a),d=a.month(),e=this.toChineseMonth(c,d),f=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][e-1];return this.isIntercalaryMonth(c,d)&&(f="闰"+f),f},monthNamesShort:function(a){if("string"==typeof a){var b=a.match(m);return b?b[0]:""}var c=this._validateYear(a),d=a.month(),e=this.toChineseMonth(c,d),f=["一","二","三","四","五","六","七","八","九","十","十一","十二"][e-1];return this.isIntercalaryMonth(c,d)&&(f="闰"+f),f},parseMonth:function(a,b){a=this._validateYear(a);var c,d=parseInt(b);if(isNaN(d))"闰"===b[0]&&(c=!0,b=b.substring(1)),"月"===b[b.length-1]&&(b=b.substring(0,b.length-1)),d=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(b);else{var e=b[b.length-1];c="i"===e||"I"===e}return this.toMonthIndex(a,d,c)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(a,b){if(a.year&&(a=a.year()),"number"!=typeof a||a<1888||a>2111)throw b.replace(/\{0\}/,this.local.name);return a},toMonthIndex:function(a,b,c){var d=this.intercalaryMonth(a);if(c&&b!==d||b<1||b>12)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return d?!c&&b<=d?b-1:b:b-1},toChineseMonth:function(a,b){a.year&&(a=a.year(),b=a.month());var c=this.intercalaryMonth(a),d=c?12:11;if(b<0||b>d)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?b<c?b+1:b:b+1},intercalaryMonth:function(a){return a=this._validateYear(a),n[a-n[0]]>>13},isIntercalaryMonth:function(a,b){a.year&&(a=a.year(),b=a.month());var c=this.intercalaryMonth(a);return!!c&&c===b},leapYear:function(a){return 0!==this.intercalaryMonth(a)},weekOfYear:function(a,b,c){var d,e=this._validateYear(a,g.local.invalidyear),f=o[e-o[0]],h=f>>9&4095,j=f>>5&15,k=31&f;d=i.newDate(h,j,k),d.add(4-(d.dayOfWeek()||7),"d");var l=this.toJD(a,b,c)-d.toJD();return 1+Math.floor(l/7)},monthsInYear:function(a){return this.leapYear(a)?13:12},daysInMonth:function(a,b){a.year&&(b=a.month(),a=a.year()),a=this._validateYear(a);var c=n[a-n[0]];if(b>(c>>13?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-b?30:29},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,h,c,g.local.invalidDate);a=this._validateYear(d.year()),b=d.month(),c=d.day();var e=this.isIntercalaryMonth(a,b),h=this.toChineseMonth(a,b),j=f(a,h,c,e);return i.toJD(j.year,j.month,j.day)},fromJD:function(a){var b=i.fromJD(a),c=e(b.year(),b.month(),b.day()),d=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,d,c.day)},fromString:function(a){var b=a.match(j),c=this._validateYear(+b[1]),d=+b[2],e=!!b[3],f=this.toMonthIndex(c,d,e),g=+b[4];return this.newDate(c,f,g)},add:function(a,b,c){var e=a.year(),f=a.month(),g=this.isIntercalaryMonth(e,f),h=this.toChineseMonth(e,f),i=Object.getPrototypeOf(d.prototype).add.call(this,a,b,c);if("y"===c){var j=i.year(),k=i.month(),l=this.isIntercalaryMonth(j,h),m=g&&l?this.toMonthIndex(j,h,!0):this.toMonthIndex(j,h,!1);m!==k&&i.month(m)}return i}});var j=/^\s*(-?\d\d\d\d|\d\d)[-\/](\d?\d)([iI]?)[-\/](\d?\d)/m,k=/^\d?\d[iI]?/m,l=/^闰?十?[一二三四五六七八九]?月/m,m=/^闰?十?[一二三四五六七八九]?/m;g.calendars.chinese=d;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],o=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":595,"object-assign":462}],582:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=b.year()+(b.year()<0?1:0);return a%4==3||a%4==-1},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear),13},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(13===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),a<0&&a++,d.day()+30*(d.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-1},fromJD:function(a){var b=Math.floor(a)+.5-this.jdEpoch,c=Math.floor((b-Math.floor((b+366)/1461))/365)+1;c<=0&&c--,b=Math.floor(a)+.5-this.newDate(c,1,1).toJD();var d=Math.floor(b/30)+1,e=b-30*(d-1)+1;return this.newDate(c,d,e)}}),e.calendars.coptic=d},{"../main":595,"object-assign":462}],583:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),!1},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),13},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),400},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/8)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(a,b,c){return(this._validate(a,b,c,e.local.invalidDate).day()+1)%8},weekDay:function(a,b,c){var d=this.dayOfWeek(a,b,c);return d>=2&&d<=6},extraInfo:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return{century:g[Math.floor((d.year()-1)/100)+1]||""}},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year()+(d.year()<0?1:0),b=d.month(),(c=d.day())+(b>1?16:0)+(b>2?32*(b-2):0)+400*(a-1)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a+.5)-Math.floor(this.jdEpoch)-1;var b=Math.floor(a/400)+1;a-=400*(b-1),a+=a>15?16:0;var c=Math.floor(a/32)+1,d=a-32*(c-1)+1;return this.newDate(b<=0?b-1:b,c,d)}});var g={20:"Fruitbat",21:"Anchovy"};e.calendars.discworld=d},{"../main":595,"object-assign":462}],584:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Ethiopian",jdEpoch:1724220.5,
daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=b.year()+(b.year()<0?1:0);return a%4==3||a%4==-1},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear),13},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(13===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),a<0&&a++,d.day()+30*(d.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-1},fromJD:function(a){var b=Math.floor(a)+.5-this.jdEpoch,c=Math.floor((b-Math.floor((b+366)/1461))/365)+1;c<=0&&c--,b=Math.floor(a)+.5-this.newDate(c,1,1).toJD();var d=Math.floor(b/30)+1,e=b-30*(d-1)+1;return this.newDate(c,d,e)}}),e.calendars.ethiopian=d},{"../main":595,"object-assign":462}],585:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b){return a-b*Math.floor(a/b)}var f=a("../main"),g=a("object-assign");d.prototype=new f.baseCalendar,g(d.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear);return this._leapYear(b.year())},_leapYear:function(a){return a=a<0?a+1:a,e(7*a+1,19)<7},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),this._leapYear(a.year?a.year():a)?13:12},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){return a=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear).year(),this.toJD(-1===a?1:a+1,7,1)-this.toJD(a,7,1)},daysInMonth:function(a,b){return a.year&&(b=a.month(),a=a.year()),this._validate(a,b,this.minDay,f.local.invalidMonth),12===b&&this.leapYear(a)?30:8===b&&5===e(this.daysInYear(a),10)?30:9===b&&3===e(this.daysInYear(a),10)?29:this.daysPerMonth[b-1]},weekDay:function(a,b,c){return 6!==this.dayOfWeek(a,b,c)},extraInfo:function(a,b,c){var d=this._validate(a,b,c,f.local.invalidDate);return{yearType:(this.leapYear(d)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(d)%10-3]}},toJD:function(a,b,c){var d=this._validate(a,b,c,f.local.invalidDate);a=d.year(),b=d.month(),c=d.day();var e=a<=0?a+1:a,g=this.jdEpoch+this._delay1(e)+this._delay2(e)+c+1;if(b<7){for(var h=7;h<=this.monthsInYear(a);h++)g+=this.daysInMonth(a,h);for(var h=1;h<b;h++)g+=this.daysInMonth(a,h)}else for(var h=7;h<b;h++)g+=this.daysInMonth(a,h);return g},_delay1:function(a){var b=Math.floor((235*a-234)/19),c=12084+13753*b,d=29*b+Math.floor(c/25920);return e(3*(d+1),7)<3&&d++,d},_delay2:function(a){var b=this._delay1(a-1),c=this._delay1(a);return this._delay1(a+1)-c==356?2:c-b==382?1:0},fromJD:function(a){a=Math.floor(a)+.5;for(var b=Math.floor(98496*(a-this.jdEpoch)/35975351)-1;a>=this.toJD(-1===b?1:b+1,7,1);)b++;for(var c=a<this.toJD(b,1,1)?7:1;a>this.toJD(b,c,this.daysInMonth(b,c));)c++;var d=a-this.toJD(b,c,1)+1;return this.newDate(b,c,d)}}),f.calendars.hebrew=d},{"../main":595,"object-assign":462}],586:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){return(11*this._validate(a,this.minMonth,this.minDay,e.local.invalidYear).year()+14)%30<11},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){return this.leapYear(a)?355:354},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return 5!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),b=d.month(),c=d.day(),a=a<=0?a+1:a,c+Math.ceil(29.5*(b-1))+354*(a-1)+Math.floor((3+11*a)/30)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var b=Math.floor((30*(a-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var c=Math.min(12,Math.ceil((a-29-this.toJD(b,1,1))/29.5)+1),d=a-this.toJD(b,c,1)+1;return this.newDate(b,c,d)}}),e.calendars.islamic=d},{"../main":595,"object-assign":462}],587:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=b.year()<0?b.year()+1:b.year();return a%4==0},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(4-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);return a=d.year(),b=d.month(),c=d.day(),a<0&&a++,b<=2&&(a--,b+=12),Math.floor(365.25*(a+4716))+Math.floor(30.6001*(b+1))+c-1524.5},fromJD:function(a){var b=Math.floor(a+.5),c=b+1524,d=Math.floor((c-122.1)/365.25),e=Math.floor(365.25*d),f=Math.floor((c-e)/30.6001),g=f-Math.floor(f<14?1:13),h=d-Math.floor(g>2?4716:4715),i=c-e-Math.floor(30.6001*f);return h<=0&&h--,this.newDate(h,g,i)}}),e.calendars.julian=d},{"../main":595,"object-assign":462}],588:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b){return a-b*Math.floor(a/b)}function f(a,b){return e(a-1,b)+1}var g=a("../main"),h=a("object-assign");d.prototype=new g.baseCalendar,h(d.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,g.local.invalidYear),!1},formatYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear).year();var b=Math.floor(a/400);return a%=400,a+=a<0?400:0,b+"."+Math.floor(a/20)+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var b=0,c=0;c<a.length;c++){var d=parseInt(a[c],10);if(Math.abs(d)>19||c>0&&d<0)throw"Invalid Mayan year";b=20*b+d}return b},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,g.local.invalidYear),18},weekOfYear:function(a,b,c){return this._validate(a,b,c,g.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,g.local.invalidYear),360},daysInMonth:function(a,b){return this._validate(a,b,this.minDay,g.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,b,c){return this._validate(a,b,c,g.local.invalidDate).day()},weekDay:function(a,b,c){return this._validate(a,b,c,g.local.invalidDate),!0},extraInfo:function(a,b,c){var d=this._validate(a,b,c,g.local.invalidDate),e=d.toJD(),f=this._toHaab(e),h=this._toTzolkin(e);return{haabMonthName:this.local.haabMonths[f[0]-1],haabMonth:f[0],haabDay:f[1],tzolkinDayName:this.local.tzolkinMonths[h[0]-1],tzolkinDay:h[0],tzolkinTrecena:h[1]}},_toHaab:function(a){a-=this.jdEpoch;var b=e(a+8+340,365);return[Math.floor(b/20)+1,e(b,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[f(a+20,20),f(a+4,13)]},toJD:function(a,b,c){var d=this._validate(a,b,c,g.local.invalidDate);return d.day()+20*d.month()+360*d.year()+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var b=Math.floor(a/360);a%=360,a+=a<0?360:0;var c=Math.floor(a/20),d=a%20;return this.newDate(b,c,d)}}),g.calendars.mayan=d},{"../main":595,"object-assign":462}],589:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar;var g=e.instance("gregorian");f(d.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return g.leapYear(b.year()+(b.year()<1?1:0)+1469)},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(1-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidMonth),a=d.year();a<0&&a++;for(var f=d.day(),h=1;h<d.month();h++)f+=this.daysPerMonth[h-1];return f+g.toJD(a+1468,3,13)},fromJD:function(a){a=Math.floor(a+.5);for(var b=Math.floor((a-(this.jdEpoch-1))/366);a>=this.toJD(b+1,1,1);)b++;for(var c=a-Math.floor(this.toJD(b,1,1)+.5)+1,d=1;c>this.daysInMonth(b,d);)c-=this.daysInMonth(b,d),d++;return this.newDate(b,d,c)}}),e.calendars.nanakshahi=d},{"../main":595,"object-assign":462}],590:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(a){return this.daysInYear(a)!==this.daysPerYear},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){if(a=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[a])return this.daysPerYear;for(var b=0,c=this.minMonth;c<=12;c++)b+=this.NEPALI_CALENDAR_DATA[a][c];return b},daysInMonth:function(a,b){return a.year&&(b=a.month(),a=a.year()),this._validate(a,b,this.minDay,e.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[a]?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[a][b]},weekDay:function(a,b,c){return 6!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate);a=d.year(),b=d.month(),c=d.day();var f=e.instance(),g=0,h=b,i=a;this._createMissingCalendarData(a);var j=a-(h>9||9===h&&c>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(9!==b&&(g=c,h--);9!==h;)h<=0&&(h=12,i--),g+=this.NEPALI_CALENDAR_DATA[i][h],h--;return 9===b?(g+=c-this.NEPALI_CALENDAR_DATA[i][0])<0&&(g+=f.daysInYear(j)):g+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],f.newDate(j,1,1).add(g,"d").toJD()},fromJD:function(a){var b=e.instance(),c=b.fromJD(a),d=c.year(),f=c.dayOfYear(),g=d+56;this._createMissingCalendarData(g);for(var h=9,i=this.NEPALI_CALENDAR_DATA[g][0],j=this.NEPALI_CALENDAR_DATA[g][h]-i+1;f>j;)h++,h>12&&(h=1,g++),j+=this.NEPALI_CALENDAR_DATA[g][h];var k=this.NEPALI_CALENDAR_DATA[g][h]-(j-f);return this.newDate(g,h,k)},_createMissingCalendarData:function(a){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var c=a-1;c<a+2;c++)void 0===this.NEPALI_CALENDAR_DATA[c]&&(this.NEPALI_CALENDAR_DATA[c]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),e.calendars.nepali=d},{"../main":595,"object-assign":462}],591:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function e(a,b){return a-b*Math.floor(a/b)}var f=a("../main"),g=a("object-assign");d.prototype=new f.baseCalendar,g(d.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear);return 682*((b.year()-(b.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-(d.dayOfWeek()+1)%7,"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,f.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return 5!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,f.local.invalidDate);a=d.year(),b=d.month(),c=d.day();var g=a-(a>=0?474:473),h=474+e(g,2820);return c+(b<=7?31*(b-1):30*(b-1)+6)+Math.floor((682*h-110)/2816)+365*(h-1)+1029983*Math.floor(g/2820)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var b=a-this.toJD(475,1,1),c=Math.floor(b/1029983),d=e(b,1029983),f=2820;if(1029982!==d){var g=Math.floor(d/366),h=e(d,366);f=Math.floor((2134*g+2816*h+2815)/1028522)+g+1}var i=f+2820*c+474;i=i<=0?i-1:i;var j=a-this.toJD(i,1,1)+1,k=j<=186?Math.ceil(j/31):Math.ceil((j-6)/30),l=a-this.toJD(i,k,1)+1;return this.newDate(i,k,l)}}),f.calendars.persian=d,f.calendars.jalali=d},{"../main":595,"object-assign":462}],592:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign"),g=e.instance();d.prototype=new e.baseCalendar,f(d.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(b.year());return g.leapYear(a)},weekOfYear:function(a,b,c){var d=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(d.year());return g.weekOfYear(a,d.month(),d.day())},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate),a=this._t2gYear(d.year());return g.toJD(a,d.month(),d.day())},fromJD:function(a){var b=g.fromJD(a),c=this._g2tYear(b.year());return this.newDate(c,b.month(),b.day())},_t2gYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&a<=-1?1:0)},_g2tYear:function(a){return a-this.yearsOffset-(a>=1&&a<=this.yearsOffset?1:0)}}),e.calendars.taiwan=d},{"../main":595,"object-assign":462}],593:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign"),g=e.instance();d.prototype=new e.baseCalendar,f(d.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(b.year());return g.leapYear(a)},weekOfYear:function(a,b,c){var d=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(d.year());return g.weekOfYear(a,d.month(),d.day())},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,e.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate),a=this._t2gYear(d.year());return g.toJD(a,d.month(),d.day())},fromJD:function(a){var b=g.fromJD(a),c=this._g2tYear(b.year());return this.newDate(c,b.month(),b.day())},_t2gYear:function(a){return a-this.yearsOffset-(a>=1&&a<=this.yearsOffset?1:0)},_g2tYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&a<=-1?1:0)}}),e.calendars.thai=d},{"../main":595,"object-assign":462}],594:[function(a,b,c){function d(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var e=a("../main"),f=a("object-assign");d.prototype=new e.baseCalendar,f(d.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear);return 355===this.daysInYear(b.year())},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(a){for(var b=0,c=1;c<=12;c++)b+=this.daysInMonth(a,c);return b},daysInMonth:function(a,b){for(var c=this._validate(a,b,this.minDay,e.local.invalidMonth),d=c.toJD()-24e5+.5,f=0,h=0;h<g.length;h++){if(g[h]>d)return g[f]-g[f-1];f++}return 30},weekDay:function(a,b,c){return 5!==this.dayOfWeek(a,b,c)},toJD:function(a,b,c){var d=this._validate(a,b,c,e.local.invalidDate),f=12*(d.year()-1)+d.month()-15292;return d.day()+g[f-1]-1+24e5-.5},fromJD:function(a){for(var b=a-24e5+.5,c=0,d=0;d<g.length&&!(g[d]>b);d++)c++;var e=c+15292,f=Math.floor((e-1)/12),h=f+1,i=e-12*f,j=b-g[c-1]+1;return this.newDate(h,i,j)},isValid:function(a,b,c){var d=e.baseCalendar.prototype.isValid.apply(this,arguments);return d&&(a=null!=a.year?a.year:a,d=a>=1276&&a<=1500),d},_validate:function(a,b,c,d){var f=e.baseCalendar.prototype._validate.apply(this,arguments);if(f.year<1276||f.year>1500)throw d.replace(/\{0\}/,this.local.name);return f}}),e.calendars.ummalqura=d
;var g=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":595,"object-assign":462}],595:[function(a,b,c){function d(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function e(a,b,c,d){if(this._calendar=a,this._year=b,this._month=c,this._day=d,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(j.local.invalidDate||j.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function f(a,b){return a=""+a,"000000".substring(0,b-a.length)+a}function g(){this.shortYearCutoff="+10"}function h(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}var i=a("object-assign");i(d.prototype,{instance:function(a,b){a=(a||"gregorian").toLowerCase(),b=b||"";var c=this._localCals[a+"-"+b];if(!c&&this.calendars[a]&&(c=new this.calendars[a](b),this._localCals[a+"-"+b]=c),!c)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return c},newDate:function(a,b,c,d,e){return d=(null!=a&&a.year?a.calendar():"string"==typeof d?this.instance(d,e):d)||this.instance(),d.newDate(a,b,c)},substituteDigits:function(a){return function(b){return(b+"").replace(/[0-9]/g,function(b){return a[b]})}},substituteChineseDigits:function(a,b){return function(c){for(var d="",e=0;c>0;){var f=c%10;d=(0===f?"":a[f]+b[e])+d,e++,c=Math.floor(c/10)}return 0===d.indexOf(a[1]+b[1])&&(d=d.substr(1)),d||a[0]}}}),i(e.prototype,{newDate:function(a,b,c){return this._calendar.newDate(null==a?this:a,b,c)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,b,c){if(!this._calendar.isValid(a,b,c))throw(j.local.invalidDate||j.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=b,this._day=c,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,b){return this._calendar.add(this,a,b)},set:function(a,b){return this._calendar.set(this,a,b)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(j.local.differentCalendars||j.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var b=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===b?0:b<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+f(Math.abs(this.year()),4)+"-"+f(this.month(),2)+"-"+f(this.day(),2)}}),i(g.prototype,{_validateLevel:0,newDate:function(a,b,c){return null==a?this.today():(a.year&&(this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate),c=a.day(),b=a.month(),a=a.year()),new e(this,a,b,c))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear);return(b.year()<0?"-":"")+f(Math.abs(b.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear),12},monthOfYear:function(a,b){var c=this._validate(a,b,this.minDay,j.local.invalidMonth||j.regionalOptions[""].invalidMonth);return(c.month()+this.monthsInYear(c)-this.firstMonth)%this.monthsInYear(c)+this.minMonth},fromMonthOfYear:function(a,b){var c=(b+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,c,this.minDay,j.local.invalidMonth||j.regionalOptions[""].invalidMonth),c},daysInYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear);return this.leapYear(b)?366:365},dayOfYear:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);return d.toJD()-this.newDate(d.year(),this.fromMonthOfYear(d.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(d))+2)%this.daysInWeek()},extraInfo:function(a,b,c){return this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate),{}},add:function(a,b,c){return this._validate(a,this.minMonth,this.minDay,j.local.invalidDate||j.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,b,c),b,c)},_add:function(a,b,c){if(this._validateLevel++,"d"===c||"w"===c){var d=a.toJD()+b*("w"===c?this.daysInWeek():1),e=a.calendar().fromJD(d);return this._validateLevel--,[e.year(),e.month(),e.day()]}try{var f=a.year()+("y"===c?b:0),g=a.monthOfYear()+("m"===c?b:0),e=a.day();"y"===c?(a.month()!==this.fromMonthOfYear(f,g)&&(g=this.newDate(f,a.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(f)),e=Math.min(e,this.daysInMonth(f,this.fromMonthOfYear(f,g)))):"m"===c&&(!function(a){for(;g<a.minMonth;)f--,g+=a.monthsInYear(f);for(var b=a.monthsInYear(f);g>b-1+a.minMonth;)f++,g-=b,b=a.monthsInYear(f)}(this),e=Math.min(e,this.daysInMonth(f,this.fromMonthOfYear(f,g))));var h=[f,this.fromMonthOfYear(f,g),e];return this._validateLevel--,h}catch(a){throw this._validateLevel--,a}},_correctAdd:function(a,b,c,d){if(!(this.hasYearZero||"y"!==d&&"m"!==d||0!==b[0]&&a.year()>0==b[0]>0)){var e={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[d],f=c<0?-1:1;b=this._add(a,c*e[0]+f*e[1],e[2])}return a.date(b[0],b[1],b[2])},set:function(a,b,c){this._validate(a,this.minMonth,this.minDay,j.local.invalidDate||j.regionalOptions[""].invalidDate);var d="y"===c?b:a.year(),e="m"===c?b:a.month(),f="d"===c?b:a.day();return"y"!==c&&"m"!==c||(f=Math.min(f,this.daysInMonth(d,e))),a.date(d,e,f)},isValid:function(a,b,c){this._validateLevel++;var d=this.hasYearZero||0!==a;if(d){var e=this.newDate(a,b,this.minDay);d=b>=this.minMonth&&b-this.minMonth<this.monthsInYear(e)&&c>=this.minDay&&c-this.minDay<this.daysInMonth(e)}return this._validateLevel--,d},toJSDate:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);return j.instance().fromJD(this.toJD(d)).toJSDate()},fromJSDate:function(a){return this.fromJD(j.instance().fromJSDate(a).toJD())},_validate:function(a,b,c,d){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(j.local.differentCalendars||j.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(1===++this._validateLevel&&!this.isValid(a,b,c))throw d.replace(/\{0\}/,this.local.name);var e=this.newDate(a,b,c);return this._validateLevel--,e}catch(a){throw this._validateLevel--,a}}}),h.prototype=new g,i(h.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var b=this._validate(a,this.minMonth,this.minDay,j.local.invalidYear||j.regionalOptions[""].invalidYear),a=b.year()+(b.year()<0?1:0);return a%4==0&&(a%100!=0||a%400==0)},weekOfYear:function(a,b,c){var d=this.newDate(a,b,c);return d.add(4-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(a,b){var c=this._validate(a,b,this.minDay,j.local.invalidMonth||j.regionalOptions[""].invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(a,b,c){return(this.dayOfWeek(a,b,c)||7)<6},toJD:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate);a=d.year(),b=d.month(),c=d.day(),a<0&&a++,b<3&&(b+=12,a--);var e=Math.floor(a/100),f=2-e+Math.floor(e/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(b+1))+c+f-1524.5},fromJD:function(a){var b=Math.floor(a+.5),c=Math.floor((b-1867216.25)/36524.25);c=b+1+c-Math.floor(c/4);var d=c+1524,e=Math.floor((d-122.1)/365.25),f=Math.floor(365.25*e),g=Math.floor((d-f)/30.6001),h=d-f-Math.floor(30.6001*g),i=g-(g>13.5?13:1),j=e-(i>2.5?4716:4715);return j<=0&&j--,this.newDate(j,i,h)},toJSDate:function(a,b,c){var d=this._validate(a,b,c,j.local.invalidDate||j.regionalOptions[""].invalidDate),e=new Date(d.year(),d.month()-1,d.day());return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.setHours(e.getHours()>12?e.getHours()+2:0),e},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var j=b.exports=new d;j.cdate=e,j.baseCalendar=g,j.calendars.gregorian=h},{"object-assign":462}],596:[function(a,b,c){var d=a("object-assign"),e=a("./main");d(e.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),e.local=e.regionalOptions[""],d(e.cdate.prototype,{formatDate:function(a,b){return"string"!=typeof a&&(b=a,a=""),this._calendar.formatDate(a||"",this,b)}}),d(e.baseCalendar.prototype,{UNIX_EPOCH:e.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:e.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,b,c){if("string"!=typeof a&&(c=b,b=a,a=""),!b)return"";if(b.calendar()!==this)throw e.local.invalidFormat||e.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat,c=c||{};for(var d=c.dayNamesShort||this.local.dayNamesShort,f=c.dayNames||this.local.dayNames,g=c.monthNumbers||this.local.monthNumbers,h=c.monthNamesShort||this.local.monthNamesShort,i=c.monthNames||this.local.monthNames,j=(c.calculateWeek||this.local.calculateWeek,function(b,c){for(var d=1;q+d<a.length&&a.charAt(q+d)===b;)d++;return q+=d-1,Math.floor(d/(c||1))>1}),k=function(a,b,c,d){var e=""+b;if(j(a,d))for(;e.length<c;)e="0"+e;return e},l=this,m=this.local.digits,n=function(a){return c.localNumbers&&m?m(a):a},o="",p=!1,q=0;q<a.length;q++)if(p)"'"!==a.charAt(q)||j("'")?o+=a.charAt(q):p=!1;else switch(a.charAt(q)){case"d":o+=n(k("d",b.day(),2));break;case"D":o+=function(a,b,c,d){return j(a)?d[b]:c[b]}("D",b.dayOfWeek(),d,f);break;case"o":o+=k("o",b.dayOfYear(),3);break;case"w":o+=k("w",b.weekOfYear(),2);break;case"m":o+=function(a){return"function"==typeof g?g.call(l,a,j("m")):n(k("m",a.month(),2))}(b);break;case"M":o+=function(a,b){return b?"function"==typeof i?i.call(l,a):i[a.month()-l.minMonth]:"function"==typeof h?h.call(l,a):h[a.month()-l.minMonth]}(b,j("M"));break;case"y":o+=j("y",2)?b.year():(b.year()%100<10?"0":"")+b.year()%100;break;case"Y":j("Y",2),o+=b.formatYear();break;case"J":o+=b.toJD();break;case"@":o+=(b.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":o+=(b.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":j("'")?o+="'":p=!0;break;default:o+=a.charAt(q)}return o},parseDate:function(a,b,c){if(null==b)throw e.local.invalidArguments||e.regionalOptions[""].invalidArguments;if(""===(b="object"==typeof b?b.toString():b+""))return null;a=a||this.local.dateFormat,c=c||{};var d=c.shortYearCutoff||this.shortYearCutoff;d="string"!=typeof d?d:this.today().year()%100+parseInt(d,10);for(var f=c.dayNamesShort||this.local.dayNamesShort,g=c.dayNames||this.local.dayNames,h=c.parseMonth||this.local.parseMonth,i=c.monthNumbers||this.local.monthNumbers,j=c.monthNamesShort||this.local.monthNamesShort,k=c.monthNames||this.local.monthNames,l=-1,m=-1,n=-1,o=-1,p=-1,q=!1,r=!1,s=function(b,c){for(var d=1;y+d<a.length&&a.charAt(y+d)===b;)d++;return y+=d-1,Math.floor(d/(c||1))>1},t=function(a,c){var d=s(a,c),f=[2,3,d?4:2,d?4:2,10,11,20]["oyYJ@!".indexOf(a)+1],g=new RegExp("^-?\\d{1,"+f+"}"),h=b.substring(x).match(g);if(!h)throw(e.local.missingNumberAt||e.regionalOptions[""].missingNumberAt).replace(/\{0\}/,x);return x+=h[0].length,parseInt(h[0],10)},u=this,v=function(a,c,d,f){for(var g=s(a,f)?d:c,h=0;h<g.length;h++)if(b.substr(x,g[h].length).toLowerCase()===g[h].toLowerCase())return x+=g[h].length,h+u.minMonth;throw(e.local.unknownNameAt||e.regionalOptions[""].unknownNameAt).replace(/\{0\}/,x)},w=function(){if(b.charAt(x)!==a.charAt(y))throw(e.local.unexpectedLiteralAt||e.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,x);x++},x=0,y=0;y<a.length;y++)if(r)"'"!==a.charAt(y)||s("'")?w():r=!1;else switch(a.charAt(y)){case"d":o=t("d");break;case"D":v("D",f,g);break;case"o":p=t("o");break;case"w":t("w");break;case"m":n=function(){if("function"==typeof i){s("m");var a=i.call(u,b.substring(x));return x+=a.length,a}return t("m")}();break;case"M":n=function(){if("function"==typeof k){var a=s("M")?k.call(u,b.substring(x)):j.call(u,b.substring(x));return x+=a.length,a}return v("M",j,k)}();break;case"y":var z=y;q=!s("y",2),y=z,m=t("y",2);break;case"Y":m=t("Y",2);break;case"J":l=t("J")+.5,"."===b.charAt(x)&&(x++,t("J"));break;case"@":l=t("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=t("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":x=b.length;break;case"'":s("'")?w():r=!0;break;default:w()}if(x<b.length)throw e.local.unexpectedText||e.regionalOptions[""].unexpectedText;if(-1===m?m=this.today().year():m<100&&q&&(m+=-1===d?1900:this.today().year()-this.today().year()%100-(m<=d?0:100)),"string"==typeof n&&(n=h.call(this,m,n)),p>-1){n=1,o=p;for(var A=this.daysInMonth(m,n);o>A;A=this.daysInMonth(m,n))n++,o-=A}return l>-1?this.fromJD(l):this.newDate(m,n,o)},determineDate:function(a,b,c,d,e){c&&"object"!=typeof c&&(e=d,d=c,c=null),"string"!=typeof d&&(e=d,d="");var f=this;return b=b?b.newDate():null,a=null==a?b:"string"==typeof a?function(a){try{return f.parseDate(d,a,e)}catch(a){}a=a.toLowerCase();for(var b=(a.match(/^c/)&&c?c.newDate():null)||f.today(),g=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,h=g.exec(a);h;)b.add(parseInt(h[1],10),h[2]||"d"),h=g.exec(a);return b}(a):"number"==typeof a?isNaN(a)||a===1/0||a===-1/0?b:f.today().add(a,"d"):f.newDate(a)}})},{"./main":595,"object-assign":462}],597:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":116}],598:[function(a,b,c){"use strict";function d(a,b){var c=[];return b=+b||0,e(a.hi(a.shape[0]-1),c,b),c}b.exports=d;var e=a("./lib/zc-core")},{"./lib/zc-core":597}],599:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("./common_defaults"),g=a("./attributes");b.exports=function(a,b,c,h,i){function j(c,e){return d.coerce(a,b,g,c,e)}h=h||{},i=i||{};var k=j("visible",!i.itemIsNotPlainObject),l=j("clicktoshow");if(!k&&!l)return b;f(a,b,c,j);for(var m=b.showarrow,n=["x","y"],o=[-10,-30],p={_fullLayout:c},q=0;q<2;q++){var r=n[q],s=e.coerceRef(a,b,p,r,"","paper");if(e.coercePosition(b,p,j,s,r,.5),m){var t="a"+r,u=e.coerceRef(a,b,p,t,"pixel");"pixel"!==u&&u!==s&&(u=b[t]="pixel");var v="pixel"===u?o[q]:.4;e.coercePosition(b,p,j,u,t,v)}j(r+"anchor"),j(r+"shift")}if(d.noneOrAll(a,b,["x","y"]),m&&d.noneOrAll(a,b,["ax","ay"]),l){var w=j("xclick"),x=j("yclick");b._xclick=void 0===w?b.x:e.cleanPosition(w,p,b.xref),b._yclick=void 0===x?b.y:e.cleanPosition(x,p,b.yref)}return b}},{"../../lib":743,"../../plots/cartesian/axes":789,"./attributes":601,"./common_defaults":604}],600:[function(a,b,c){"use strict";b.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],601:[function(a,b,c){"use strict";var d=a("./arrow_paths"),e=a("../../plots/font_attributes"),f=a("../../plots/cartesian/constants");b.exports={_isLinkedToArray:"annotation",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange"},text:{valType:"string",editType:"calcIfAutorange"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange"},font:e({editType:"calcIfAutorange",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange"},showarrow:{valType:"boolean",dflt:!0,editType:"calcIfAutorange"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:d.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange"},ax:{valType:"any",editType:"calcIfAutorange"},ay:{valType:"any",editType:"calcIfAutorange"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",f.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange"},yref:{valType:"enumerated",values:["paper",f.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:e({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}}},{"../../plots/cartesian/constants":794,"../../plots/font_attributes":816,"./arrow_paths":600}],602:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;e.filterVisible(b.annotations).forEach(function(b){var c,d,e,g,h=f.getFromId(a,b.xref),i=f.getFromId(a,b.yref),j=3*b.arrowsize*b.arrowwidth||0,k=3*b.startarrowsize*b.arrowwidth||0;h&&h.autorange&&(c=j+b.xshift,d=j-b.xshift,e=k+b.xshift,g=k-b.xshift,b.axref===b.xref?(f.expand(h,[h.r2c(b.x)],{ppadplus:c,ppadminus:d}),f.expand(h,[h.r2c(b.ax)],{ppadplus:Math.max(b._xpadplus,e),ppadminus:Math.max(b._xpadminus,g)})):(e=b.ax?e+b.ax:e,g=b.ax?g-b.ax:g,f.expand(h,[h.r2c(b.x)],{ppadplus:Math.max(b._xpadplus,c,e),ppadminus:Math.max(b._xpadminus,d,g)}))),i&&i.autorange&&(c=j-b.yshift,d=j+b.yshift,e=k-b.yshift,g=k+b.yshift,b.ayref===b.yref?(f.expand(i,[i.r2c(b.y)],{ppadplus:c,ppadminus:d}),f.expand(i,[i.r2c(b.ay)],{ppadplus:Math.max(b._ypadplus,e),ppadminus:Math.max(b._ypadminus,g)})):(e=b.ay?e+b.ay:e,g=b.ay?g-b.ay:g,f.expand(i,[i.r2c(b.y)],{ppadplus:Math.max(b._ypadplus,c,e),ppadminus:Math.max(b._ypadminus,d,g)})))})}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("./draw").draw;b.exports=function(a){var b=a._fullLayout,c=e.filterVisible(b.annotations);if(c.length&&a._fullData.length){var h={};c.forEach(function(a){h[a.xref]=1,h[a.yref]=1});for(var i in h){var j=f.getFromId(a,i);if(j&&j.autorange)return e.syncOrAsync([g,d],a)}}}},{"../../lib":743,"../../plots/cartesian/axes":789,"./draw":607}],603:[function(a,b,c){"use strict";function d(a,b){var c=f(a,b);return c.on.length>0||c.explicitOff.length>0}function e(a,b){var c,d=f(a,b),e=d.on,g=d.off.concat(d.explicitOff),i={};if(e.length||g.length){for(c=0;c<e.length;c++)i["annotations["+e[c]+"].visible"]=!0;for(c=0;c<g.length;c++)i["annotations["+g[c]+"].visible"]=!1;return h.update(a,{},i)}}function f(a,b){var c,d,e,f,h,i,j,k,l=a._fullLayout.annotations,m=[],n=[],o=[],p=(b||[]).length;for(c=0;c<l.length;c++)if(e=l[c],f=e.clicktoshow){for(d=0;d<p;d++)if(h=b[d],i=h.xaxis,j=h.yaxis,i._id===e.xref&&j._id===e.yref&&i.d2r(h.x)===g(e._xclick,i)&&j.d2r(h.y)===g(e._yclick,j)){k=e.visible?"onout"===f?n:o:m,k.push(c);break}d===p&&e.visible&&"onout"===f&&n.push(c)}return{on:m,off:n,explicitOff:o}}function g(a,b){return"log"===b.type?b.l2r(a):b.d2r(a)}var h=a("../../plotly");b.exports={hasClickToShow:d,onClick:e}},{"../../plotly":784}],604:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../color");b.exports=function(a,b,c,f){f("opacity");var g=f("bgcolor"),h=f("bordercolor"),i=e.opacity(h);f("borderpad");var j=f("borderwidth"),k=f("showarrow");if(f("text",k?" ":c._dfltTitle.annotation),f("textangle"),d.coerceFont(f,"font",c.font),f("width"),f("align"),f("height")&&f("valign"),k){var l,m,n=f("arrowside");-1!==n.indexOf("end")&&(l=f("arrowhead"),m=f("arrowsize")),-1!==n.indexOf("start")&&(f("startarrowhead",l),f("startarrowsize",m)),f("arrowcolor",i?b.bordercolor:e.defaultLine),f("arrowwidth",2*(i&&j||1)),f("standoff"),f("startstandoff")}var o=f("hovertext"),p=c.hoverlabel||{};if(o){var q=f("hoverlabel.bgcolor",p.bgcolor||(e.opacity(g)?e.rgb(g):e.defaultLine)),r=f("hoverlabel.bordercolor",p.bordercolor||e.contrast(q));d.coerceFont(f,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||r})}f("captureevents",!!o)}},{"../../lib":743,"../color":618}],605:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib/to_log_range");b.exports=function(a,b,c,f){function g(a){var c=j[a],g=null;g=h?e(c,b.range):Math.pow(10,c),d(g)||(g=null),f(k+a,g)}b=b||{};var h="log"===c&&"linear"===b.type,i="linear"===c&&"log"===b.type;if(h||i)for(var j,k,l=a._fullLayout.annotations,m=b._id.charAt(0),n=0;n<l.length;n++)j=l[n],k="annotations["+n+"].",j[m+"ref"]===b._id&&g(m),j["a"+m+"ref"]===b._id&&g("a"+m)}},{"../../lib/to_log_range":768,"fast-isnumeric":140}],606:[function(a,b,c){"use strict";var d=a("../../plots/array_container_defaults"),e=a("./annotation_defaults");b.exports=function(a,b){d(a,b,{name:"annotations",handleItemDefaults:e})}},{"../../plots/array_container_defaults":786,"./annotation_defaults":599}],607:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var c=0;c<b.annotations.length;c++)b.annotations[c].visible&&e(a,c);return i.previousPromises(a)}function e(a,b){var c=a._fullLayout,d=c.annotations[b]||{};f(a,d,b,!1,k.getFromId(a,d.xref),k.getFromId(a,d.yref))}function f(a,b,c,d,e,f){function i(c){return c.call(m.font,L).attr({"text-anchor":{left:"start",right:"end"}[b.align]||"middle"}),o.convertToTspans(c,a,k),c}function k(){function c(a,b){return"auto"===b&&(b=a<1/3?"left":a>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[b]}var g=M.selectAll("a");if(1===g.size()&&g.text()===M.text()){E.insert("a",":first-child").attr({"xlink:xlink:href":g.attr("xlink:href"),"xlink:xlink:show":g.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(I.node())}var i=E.select(".annotation-text-math-group"),k=!i.empty(),n=m.bBox((k?i:M).node()),s=n.width,D=n.height,G=b.width||s,L=b.height||D,N=Math.round(G+2*H),O=Math.round(L+2*H);b._w=G,b._h=L;for(var P=!1,Q=["x","y"],R=0;R<Q.length;R++){var S,T,U,V,W,X=Q[R],Y=b[X+"ref"]||X,Z=b["a"+X+"ref"],$={x:e,y:f}[X],_=(z+("x"===X?0:-90))*Math.PI/180,aa=N*Math.cos(_),ba=O*Math.sin(_),ca=Math.abs(aa)+Math.abs(ba),da=b[X+"anchor"],ea=b[X+"shift"]*("x"===X?1:-1),fa=y[X];if($){var ga=$.r2fraction(b[X]);if((a._dragging||!$.autorange)&&(ga<0||ga>1)&&(Z===Y?((ga=$.r2fraction(b["a"+X]))<0||ga>1)&&(P=!0):P=!0,P))continue;S=$._offset+$.r2p(b[X]),V=.5}else"x"===X?(U=b[X],S=v.l+v.w*U):(U=1-b[X],S=v.t+v.h*U),V=b.showarrow?.5:U;if(b.showarrow){fa.head=S;var ha=b["a"+X];W=aa*c(.5,b.xanchor)-ba*c(.5,b.yanchor),Z===Y?(fa.tail=$._offset+$.r2p(ha),T=W):(fa.tail=S+ha,T=W+ha),fa.text=fa.tail+W;var ia=u["x"===X?"width":"height"];if("paper"===Y&&(fa.head=j.constrain(fa.head,1,ia-1)),"pixel"===Z){var ja=-Math.max(fa.tail-3,fa.text),ka=Math.min(fa.tail+3,fa.text)-ia;ja>0?(fa.tail+=ja,fa.text+=ja):ka>0&&(fa.tail-=ka,fa.text-=ka)}fa.tail+=ea,fa.head+=ea}else W=ca*c(V,da),T=W,fa.text=S+W;fa.text+=ea,W+=ea,T+=ea,b["_"+X+"padplus"]=ca/2+T,b["_"+X+"padminus"]=ca/2-T,b["_"+X+"size"]=ca,b["_"+X+"shift"]=W}if(P)return void E.remove();var la=0,ma=0;if("left"!==b.align&&(la=(G-s)*("center"===b.align?.5:1)),"top"!==b.valign&&(ma=(L-D)*("middle"===b.valign?.5:1)),k)i.select("svg").attr({x:H+la-1,y:H+ma}).call(m.setClipUrl,J?x:null);else{var na=H+ma-n.top,oa=H+la-n.left;M.call(o.positionText,oa,na).call(m.setClipUrl,J?x:null)}K.select("rect").call(m.setRect,H,H,G,L),I.call(m.setRect,F/2,F/2,N-F,O-F),E.call(m.setTranslate,Math.round(y.x.text-N/2),Math.round(y.y.text-O/2)),B.attr({transform:"rotate("+z+","+y.x.text+","+y.y.text+")"});var pa=function(c,g){A.selectAll(".annotation-arrow-g").remove();var i=y.x.head,k=y.y.head,n=y.x.tail+c,o=y.y.tail+g,p=y.x.text+c,s=y.y.text+g,u=j.rotationXYMatrix(z,p,s),x=j.apply2DTransform(u),C=j.apply2DTransform2(u),D=+I.attr("width"),F=+I.attr("height"),G=p-.5*D,H=G+D,J=s-.5*F,K=J+F,L=[[G,J,G,K],[G,K,H,K],[H,K,H,J],[H,J,G,J]].map(C);if(!L.reduce(function(a,b){return a^!!j.segmentsIntersect(i,k,i+1e6,k+1e6,b[0],b[1],b[2],b[3])},!1)){L.forEach(function(a){var b=j.segmentsIntersect(n,o,i,k,a[0],a[1],a[2],a[3]);b&&(n=b.x,o=b.y)});var M=b.arrowwidth,N=b.arrowcolor,O=b.arrowside,P=A.append("g").style({opacity:l.opacity(N)}).classed("annotation-arrow-g",!0),Q=P.append("path").attr("d","M"+n+","+o+"L"+i+","+k).style("stroke-width",M+"px").call(l.stroke,l.rgb(N));if(r(Q,O,b),w.annotationPosition&&Q.node().parentNode&&!d){var R=i,S=k;if(b.standoff){var T=Math.sqrt(Math.pow(i-n,2)+Math.pow(k-o,2));R+=b.standoff*(n-i)/T,S+=b.standoff*(o-k)/T}var U,V,W,X=P.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(n-R)+","+(o-S),transform:"translate("+R+","+S+")"}).style("stroke-width",M+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");q.init({element:X.node(),gd:a,prepFn:function(){var a=m.getTranslate(E);V=a.x,W=a.y,U={},e&&e.autorange&&(U[e._name+".autorange"]=!0),f&&f.autorange&&(U[f._name+".autorange"]=!0)},moveFn:function(a,c){var d=x(V,W),g=d[0]+a,h=d[1]+c;E.call(m.setTranslate,g,h),U[t+".x"]=e?e.p2r(e.r2p(b.x)+a):b.x+a/v.w,U[t+".y"]=f?f.p2r(f.r2p(b.y)+c):b.y-c/v.h,b.axref===b.xref&&(U[t+".ax"]=e.p2r(e.r2p(b.ax)+a)),b.ayref===b.yref&&(U[t+".ay"]=f.p2r(f.r2p(b.ay)+c)),P.attr("transform","translate("+a+","+c+")"),B.attr({transform:"rotate("+z+","+g+","+h+")"})},doneFn:function(){h.relayout(a,U);var b=document.querySelector(".js-notes-box-panel");b&&b.redraw(b.selectedObj)}})}}};if(b.showarrow&&pa(0,0),C){var qa,ra;q.init({element:E.node(),gd:a,prepFn:function(){ra=B.attr("transform"),qa={}},moveFn:function(a,c){var g="pointer";if(b.showarrow)b.axref===b.xref?qa[t+".ax"]=e.p2r(e.r2p(b.ax)+a):qa[t+".ax"]=b.ax+a,b.ayref===b.yref?qa[t+".ay"]=f.p2r(f.r2p(b.ay)+c):qa[t+".ay"]=b.ay+c,pa(a,c);else{if(d)return;if(e)qa[t+".x"]=b.x+a/e._m;else{var h=b._xsize/v.w,i=b.x+(b._xshift-b.xshift)/v.w-h/2;qa[t+".x"]=q.align(i+a/v.w,h,0,1,b.xanchor)}if(f)qa[t+".y"]=b.y+c/f._m;else{var j=b._ysize/v.h,k=b.y-(b._yshift+b.yshift)/v.h-j/2;qa[t+".y"]=q.align(k-c/v.h,j,0,1,b.yanchor)}e&&f||(g=q.getCursor(e?.5:qa[t+".x"],f?.5:qa[t+".y"],b.xanchor,b.yanchor))}B.attr({transform:"translate("+a+","+c+")"+ra}),p(E,g)},doneFn:function(){p(E),h.relayout(a,qa);var b=document.querySelector(".js-notes-box-panel");b&&b.redraw(b.selectedObj)}})}}var s,t,u=a._fullLayout,v=a._fullLayout._size,w=a._context.edits;d?(s="annotation-"+d,t=d+".annotations["+c+"]"):(s="annotation",t="annotations["+c+"]"),u._infolayer.selectAll("."+s+'[data-index="'+c+'"]').remove();var x="clip"+u._uid+"_ann"+c;if(!b._input||!1===b.visible)return void g.selectAll("#"+x).remove();var y={x:{},y:{}},z=+b.textangle||0,A=u._infolayer.append("g").classed(s,!0).attr("data-index",String(c)).style("opacity",b.opacity),B=A.append("g").classed("annotation-text-g",!0),C=w[b.showarrow?"annotationTail":"annotationPosition"],D=b.captureevents||w.annotationText||C,E=B.append("g").style("pointer-events",D?"all":null).call(p,"default").on("click",function(){a._dragging=!1;var e={index:c,annotation:b._input,fullAnnotation:b,event:g.event};d&&(e.subplotId=d),a.emit("plotly_clickannotation",e)});b.hovertext&&E.on("mouseover",function(){var c=b.hoverlabel,d=c.font,e=this.getBoundingClientRect(),f=a.getBoundingClientRect();n.loneHover({x0:e.left-f.left,x1:e.right-f.left,y:(e.top+e.bottom)/2-f.top,text:b.hovertext,color:c.bgcolor,borderColor:c.bordercolor,fontFamily:d.family,fontSize:d.size,fontColor:d.color},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:a})}).on("mouseout",function(){n.loneUnhover(u._hoverlayer.node())});var F=b.borderwidth,G=b.borderpad,H=F+G,I=E.append("rect").attr("class","bg").style("stroke-width",F+"px").call(l.stroke,b.bordercolor).call(l.fill,b.bgcolor),J=b.width||b.height,K=u._topclips.selectAll("#"+x).data(J?[0]:[]);K.enter().append("clipPath").classed("annclip",!0).attr("id",x).append("rect"),K.exit().remove();var L=b.font,M=E.append("text").classed("annotation-text",!0).text(b.text);w.annotationText?M.call(o.makeEditable,{delegate:E,gd:a}).call(i).on("edit",function(c){b.text=c,this.call(i);var d={};d[t+".text"]=b.text,e&&e.autorange&&(d[e._name+".autorange"]=!0),f&&f.autorange&&(d[f._name+".autorange"]=!0),h.relayout(a,d)}):M.call(i)}var g=a("d3"),h=a("../../plotly"),i=a("../../plots/plots"),j=a("../../lib"),k=a("../../plots/cartesian/axes"),l=a("../color"),m=a("../drawing"),n=a("../fx"),o=a("../../lib/svg_text_utils"),p=a("../../lib/setcursor"),q=a("../dragelement"),r=a("./draw_arrow_head");b.exports={draw:d,drawOne:e,drawRaw:f}},{"../../lib":743,"../../lib/setcursor":762,"../../lib/svg_text_utils":766,"../../plotly":784,"../../plots/cartesian/axes":789,"../../plots/plots":852,"../color":618,"../dragelement":640,"../drawing":643,"../fx":660,"./draw_arrow_head":608,d3:128}],608:[function(a,b,c){"use strict";var d=a("d3"),e=a("../color"),f=a("./arrow_paths");b.exports=function(a,b,c){function g(){a.style("stroke-dasharray","0px,100px")}function h(b,f,g,h){b.path&&(b.noRotate&&(g=0),d.select(m.parentNode).append("path").attr({class:a.attr("class"),d:b.path,transform:"translate("+f.x+","+f.y+")"+(g?"rotate("+180*g/Math.PI+")":"")+"scale("+h+")"}).style({fill:e.rgb(c.arrowcolor),"stroke-width":0}))}var i,j,k,l,m=a.node(),n=f[c.arrowhead||0],o=f[c.startarrowhead||0],p=(c.arrowwidth||1)*(c.arrowsize||1),q=(c.arrowwidth||1)*(c.startarrowsize||1),r=b.indexOf("start")>=0,s=b.indexOf("end")>=0,t=n.backoff*p+c.standoff,u=o.backoff*q+c.startstandoff;if("line"===m.nodeName){i={x:+a.attr("x1"),y:+a.attr("y1")},j={x:+a.attr("x2"),y:+a.attr("y2")};var v=i.x-j.x,w=i.y-j.y;if(k=Math.atan2(w,v),l=k+Math.PI,t&&u&&t+u>Math.sqrt(v*v+w*w))return void g();if(t){if(t*t>v*v+w*w)return void g();var x=t*Math.cos(k),y=t*Math.sin(k);j.x+=x,j.y+=y,a.attr({x2:j.x,y2:j.y})}if(u){if(u*u>v*v+w*w)return void g();var z=u*Math.cos(k),A=u*Math.sin(k);i.x-=z,i.y-=A,a.attr({x1:i.x,y1:i.y})}}else if("path"===m.nodeName){var B=m.getTotalLength(),C="";if(B<t+u)return void g();var D=m.getPointAtLength(0),E=m.getPointAtLength(.1);k=Math.atan2(D.y-E.y,D.x-E.x),i=m.getPointAtLength(Math.min(u,B)),C="0px,"+u+"px,";var F=m.getPointAtLength(B),G=m.getPointAtLength(B-.1);l=Math.atan2(F.y-G.y,F.x-G.x),j=m.getPointAtLength(Math.max(0,B-t));var H=C?u+t:t;C+=B-H+"px,"+B+"px",a.style("stroke-dasharray",C)}r&&h(o,i,k,q),s&&h(n,j,l,p)}},{"../color":618,"./arrow_paths":600,d3:128}],609:[function(a,b,c){"use strict";var d=a("./draw"),e=a("./click");b.exports={moduleType:"component",name:"annotations",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("annotations"),calcAutorange:a("./calc_autorange"),draw:d.draw,drawOne:d.drawOne,drawRaw:d.drawRaw,hasClickToShow:e.hasClickToShow,onClick:e.onClick,convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":799,"./attributes":601,"./calc_autorange":602,"./click":603,"./convert_coords":605,"./defaults":606,"./draw":607}],610:[function(a,b,c){"use strict";var d=a("../annotations/attributes"),e=a("../../plot_api/edit_types").overrideAll;b.exports=e({_isLinkedToArray:"annotation",visible:d.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:d.xanchor,xshift:d.xshift,yanchor:d.yanchor,yshift:d.yshift,text:d.text,textangle:d.textangle,font:d.font,width:d.width,height:d.height,opacity:d.opacity,align:d.align,valign:d.valign,bgcolor:d.bgcolor,bordercolor:d.bordercolor,borderpad:d.borderpad,borderwidth:d.borderwidth,showarrow:d.showarrow,arrowcolor:d.arrowcolor,arrowhead:d.arrowhead,startarrowhead:d.startarrowhead,arrowside:d.arrowside,arrowsize:d.arrowsize,startarrowsize:d.startarrowsize,arrowwidth:d.arrowwidth,standoff:d.standoff,startstandoff:d.startstandoff,hovertext:d.hovertext,hoverlabel:d.hoverlabel,captureevents:d.captureevents},"calc","from-root")},{"../../plot_api/edit_types":773,"../annotations/attributes":601}],611:[function(a,b,c){"use strict";function d(a,b){var c=b.fullSceneLayout,d=c.domain,g=b.fullLayout._size,h={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};a._xa={},e.extendFlat(a._xa,h),f.setConvert(a._xa),a._xa._offset=g.l+d.x[0]*g.w,a._xa.l2p=function(){return.5*(1+a.pdata[0]/a.pdata[3])*g.w*(d.x[1]-d.x[0])},a._ya={},e.extendFlat(a._ya,h),f.setConvert(a._ya),a._ya._offset=g.t+(1-d.y[1])*g.h,a._ya.l2p=function(){return.5*(1-a.pdata[1]/a.pdata[3])*g.h*(d.y[1]-d.y[0])}}var e=a("../../lib"),f=a("../../plots/cartesian/axes");b.exports=function(a){for(var b=a.fullSceneLayout,c=b.annotations,e=0;e<c.length;e++)d(c[e],a);a.fullLayout._infolayer.selectAll(".annotation-"+a.id).remove()}},{"../../lib":743,"../../plots/cartesian/axes":789}],612:[function(a,b,c){"use strict";function d(a,b,c,d,g){function j(c,d){return e.coerce(a,b,i,c,d)}function k(a){var d=a+"axis",e={_fullLayout:{}};return e._fullLayout[d]=c[d],f.coercePosition(b,e,j,a,a,.5)}return j("visible",!g.itemIsNotPlainObject)?(h(a,b,d.fullLayout,j),k("x"),k("y"),k("z"),e.noneOrAll(a,b,["x","y","z"]),b.xref="x",b.yref="y",b.zref="z",j("xanchor"),j("yanchor"),j("xshift"),j("yshift"),b.showarrow&&(b.axref="pixel",b.ayref="pixel",j("ax",-10),j("ay",-30),e.noneOrAll(a,b,["ax","ay"])),b):b}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("../../plots/array_container_defaults"),h=a("../annotations/common_defaults"),i=a("./attributes");b.exports=function(a,b,c){g(a,b,{name:"annotations",handleItemDefaults:d,fullLayout:c.fullLayout})}},{"../../lib":743,"../../plots/array_container_defaults":786,"../../plots/cartesian/axes":789,"../annotations/common_defaults":604,"./attributes":610}],613:[function(a,b,c){"use strict";var d=a("../annotations/draw").drawRaw,e=a("../../plots/gl3d/project"),f=["x","y","z"];b.exports=function(a){for(var b=a.fullSceneLayout,c=a.dataScale,g=b.annotations,h=0;h<g.length;h++){for(var i=g[h],j=!1,k=0;k<3;k++){var l=f[k],m=i[l],n=b[l+"axis"],o=n.r2fraction(m);if(o<0||o>1){j=!0;break}}j?a.fullLayout._infolayer.select(".annotation-"+a.id+'[data-index="'+h+'"]').remove():(i.pdata=e(a.glplot.cameraParams,[b.xaxis.r2l(i.x)*c[0],b.yaxis.r2l(i.y)*c[1],b.zaxis.r2l(i.z)*c[2]]),d(a.graphDiv,i,h,a.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":841,"../annotations/draw":607}],614:[function(a,b,c){"use strict";function d(a,b){var c=e.subplotsRegistry.gl3d;if(c)for(var d=c.attrRegex,g=Object.keys(a),h=0;h<g.length;h++){var i=g[h];d.test(i)&&(a[i].annotations||[]).length&&(f.pushUnique(b._basePlotModules,c),f.pushUnique(b._subplots.gl3d,i))}}var e=a("../../registry"),f=a("../../lib");b.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),includeBasePlot:d,convert:a("./convert"),draw:a("./draw")}},{"../../lib":743,"../../registry":873,"./attributes":610,"./convert":611,"./defaults":612,"./draw":613}],615:[function(a,b,c){"use strict";b.exports=a("world-calendars/dist/main"),a("world-calendars/dist/plus"),a("world-calendars/dist/calendars/chinese"),a("world-calendars/dist/calendars/coptic"),a("world-calendars/dist/calendars/discworld"),a("world-calendars/dist/calendars/ethiopian"),a("world-calendars/dist/calendars/hebrew"),a("world-calendars/dist/calendars/islamic"),a("world-calendars/dist/calendars/julian"),a("world-calendars/dist/calendars/mayan"),a("world-calendars/dist/calendars/nanakshahi"),a("world-calendars/dist/calendars/nepali"),a("world-calendars/dist/calendars/persian"),a("world-calendars/dist/calendars/taiwan"),a("world-calendars/dist/calendars/thai"),a("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":581,"world-calendars/dist/calendars/coptic":582,"world-calendars/dist/calendars/discworld":583,"world-calendars/dist/calendars/ethiopian":584,"world-calendars/dist/calendars/hebrew":585,"world-calendars/dist/calendars/islamic":586,"world-calendars/dist/calendars/julian":587,"world-calendars/dist/calendars/mayan":588,"world-calendars/dist/calendars/nanakshahi":589,"world-calendars/dist/calendars/nepali":590,"world-calendars/dist/calendars/persian":591,"world-calendars/dist/calendars/taiwan":592,"world-calendars/dist/calendars/thai":593,"world-calendars/dist/calendars/ummalqura":594,"world-calendars/dist/main":595,"world-calendars/dist/plus":596}],616:[function(a,b,c){"use strict";function d(a,b,c){for(var d,f,g,h,i,j=Math.floor((b+.05)/l)+k,m=e(c).fromJD(j),n=0;-1!==(n=a.indexOf("%",n));)d=a.charAt(n+1),"0"===d||"-"===d||"_"===d?(g=3,f=a.charAt(n+2),"_"===d&&(d="-")):(f=d,d="0",g=2),h=t[f],h?(i=h===s?s:m.formatDate(h[d]),a=a.substr(0,n)+i+a.substr(n+g),n+=i.length):n+=g;return a}function e(a){var b=u[a];return b||(b=u[a]=h.instance(a))}function f(a){return i.extendFlat({},m,{description:a})}function g(a){return"Sets the calendar system to use with `"+a+"` date data."}var h=a("./calendars"),i=a("../../lib"),j=a("../../constants/numerical"),k=j.EPOCHJD,l=j.ONEDAY,m={valType:"enumerated",values:Object.keys(h.calendars),editType:"calc",dflt:"gregorian"},n=function(a,b,c,d){var e={};return e[c]=m,i.coerce(a,b,e,c,d)},o=function(a,b,c,d){for(var e=0;e<c.length;e++)n(a,b,c[e]+"calendar",d.calendar)},p={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},q={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},r={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",t={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},u={},v={xcalendar:f(g("x"))},w=i.extendFlat({},v,{ycalendar:f(g("y"))}),x=i.extendFlat({},w,{zcalendar:f(g("z"))}),y=f(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));b.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:w,bar:w,box:w,heatmap:w,contour:w,histogram:w,histogram2d:w,histogram2dcontour:w,scatter3d:x,surface:x,mesh3d:x,scattergl:w,ohlc:v,candlestick:v},layout:{calendar:f(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:y},yaxis:{calendar:y},scene:{xaxis:{calendar:y},yaxis:{calendar:y},zaxis:{calendar:y}},polar:{radialaxis:{calendar:y}}},transforms:{filter:{valuecalendar:f(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:f(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:m,handleDefaults:n,handleTraceDefaults:o,CANONICAL_SUNDAY:q,CANONICAL_TICK:p,DFLTRANGE:r,getCal:e,worldCalFmt:d}},{"../../constants/numerical":721,"../../lib":743,"./calendars":615}],617:[function(a,b,c){"use strict";c.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c.defaultLine="#444",c.lightLine="#eee",c.background="#fff",c.borderLine="#BEC8D9",c.lightFraction=1e3/11},{}],618:[function(a,b,c){"use strict";function d(a){if(f(a)||"string"!=typeof a)return a;var b=a.trim();if("rgb"!==b.substr(0,3))return a;var c=b.match(/^rgba?\s*\(([^()]*)\)$/);if(!c)return a;var d=c[1].trim().split(/\s*[\s,]\s*/),e="a"===b.charAt(3)&&4===d.length;if(!e&&3!==d.length)return a;for(var g=0;g<d.length;g++){if(!d[g].length)return a;if(d[g]=Number(d[g]),!(d[g]>=0))return a;if(3===g)d[g]>1&&(d[g]=1);else if(d[g]>=1)return a}var h=Math.round(255*d[0])+", "+Math.round(255*d[1])+", "+Math.round(255*d[2]);return e?"rgba("+h+", "+d[3]+")":"rgb("+h+")"}var e=a("tinycolor2"),f=a("fast-isnumeric"),g=b.exports={},h=a("./attributes");g.defaults=h.defaults;var i=g.defaultLine=h.defaultLine;g.lightLine=h.lightLine;var j=g.background=h.background;g.tinyRGB=function(a){var b=a.toRgb();return"rgb("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+")"},g.rgb=function(a){return g.tinyRGB(e(a))},g.opacity=function(a){return a?e(a).getAlpha():0},g.addOpacity=function(a,b){var c=e(a).toRgb();return"rgba("+Math.round(c.r)+", "+Math.round(c.g)+", "+Math.round(c.b)+", "+b+")"},g.combine=function(a,b){var c=e(a).toRgb();if(1===c.a)return e(a).toRgbString();var d=e(b||j).toRgb(),f=1===d.a?d:{r:255*(1-d.a)+d.r*d.a,g:255*(1-d.a)+d.g*d.a,b:255*(1-d.a)+d.b*d.a},g={r:f.r*(1-c.a)+c.r*c.a,g:f.g*(1-c.a)+c.g*c.a,b:f.b*(1-c.a)+c.b*c.a};return e(g).toRgbString()},g.contrast=function(a,b,c){var d=e(a);return 1!==d.getAlpha()&&(d=e(g.combine(a,j))),(d.isDark()?b?d.lighten(b):j:c?d.darken(c):i).toString()},g.stroke=function(a,b){var c=e(b);a.style({stroke:g.tinyRGB(c),"stroke-opacity":c.getAlpha()})},g.fill=function(a,b){var c=e(b);a.style({fill:g.tinyRGB(c),"fill-opacity":c.getAlpha()})},g.clean=function(a){if(a&&"object"==typeof a){var b,c,e,f,h=Object.keys(a);for(b=0;b<h.length;b++)if(e=h[b],f=a[e],"color"===e.substr(e.length-5))if(Array.isArray(f))for(c=0;c<f.length;c++)f[c]=d(f[c]);else a[e]=d(f);else if("colorscale"===e.substr(e.length-10)&&Array.isArray(f))for(c=0;c<f.length;c++)Array.isArray(f[c])&&(f[c][1]=d(f[c][1]));else if(Array.isArray(f)){var i=f[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(c=0;c<f.length;c++)g.clean(f[c])}else f&&"object"==typeof f&&g.clean(f)}}},{"./attributes":617,"fast-isnumeric":140,tinycolor2:546}],619:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/layout_attributes"),e=a("../../plots/font_attributes"),f=a("../../lib/extend").extendFlat,g=a("../../plot_api/edit_types").overrideAll;b.exports=g({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{
valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:f({},d.ticks,{dflt:""}),ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:e({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,showexponent:d.showexponent,title:{valType:"string"},titlefont:e({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root")},{"../../lib/extend":732,"../../plot_api/edit_types":773,"../../plots/cartesian/layout_attributes":801,"../../plots/font_attributes":816}],620:[function(a,b,c){"use strict";b.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],621:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/tick_value_defaults"),f=a("../../plots/cartesian/tick_mark_defaults"),g=a("../../plots/cartesian/tick_label_defaults"),h=a("./attributes");b.exports=function(a,b,c){function i(a,b){return d.coerce(k,j,h,a,b)}var j=b.colorbar={},k=a.colorbar||{};i("thickness","fraction"===i("thicknessmode")?30/(c.width-c.margin.l-c.margin.r):30),i("len","fraction"===i("lenmode")?1:c.height-c.margin.t-c.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),d.noneOrAll(k,j,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor"),e(k,j,i,"linear"),g(k,j,i,"linear",{outerTicks:!1,font:c.font,noHover:!0}),f(k,j,i,"linear",{outerTicks:!1,font:c.font,noHover:!0}),i("title",c._dfltTitle.colorbar),d.coerceFont(i,"titlefont",c.font),i("titleside")}},{"../../lib":743,"../../plots/cartesian/tick_label_defaults":809,"../../plots/cartesian/tick_mark_defaults":810,"../../plots/cartesian/tick_value_defaults":811,"./attributes":619}],622:[function(a,b,c){"use strict";var d=a("d3"),e=a("tinycolor2"),f=a("../../plotly"),g=a("../../plots/plots"),h=a("../../registry"),i=a("../../plots/cartesian/axes"),j=a("../dragelement"),k=a("../../lib"),l=a("../../lib/extend").extendFlat,m=a("../../lib/setcursor"),n=a("../drawing"),o=a("../color"),p=a("../titles"),q=a("../../lib/svg_text_utils"),r=a("../../constants/alignment").LINE_SPACING,s=a("../../plots/cartesian/axis_defaults"),t=a("../../plots/cartesian/position_defaults"),u=a("../../plots/cartesian/layout_attributes"),v=a("./attributes"),w=a("./constants").cn;b.exports=function(a,b){function c(){function v(a,b){return k.coerce(ca,da,u,a,b)}function z(){if(-1!==["top","bottom"].indexOf(y.titleside)){var b=ja.select(".cbtitle"),c=b.select("text"),f=[-y.outlinewidth/2,y.outlinewidth/2],g=b.select(".h"+da._id+"title-math-group").node(),h=15.6;if(c.node()&&(h=parseInt(c.node().style.fontSize,10)*r),g?(la=n.bBox(g).height)>h&&(f[1]-=(la-h)/2):c.node()&&!c.classed(w.jsPlaceholder)&&(la=n.bBox(c.node()).height),la){if(la+=5,"top"===y.titleside)da.domain[1]-=la/D.h,f[1]*=-1;else{da.domain[0]+=la/D.h;var j=q.lineCount(c);f[1]+=(1-j)*h}b.attr("transform","translate("+f+")"),da.setScale()}}ja.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(D.h*(1-da.domain[1]))+")"),da._axislayer.attr("transform","translate(0,"+Math.round(-D.t)+")");var l=ja.select(".cbfills").selectAll("rect.cbfill").data(I);l.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),l.exit().remove(),l.each(function(a,b){var c=[0===b?G[0]:(I[b]+I[b-1])/2,b===I.length-1?G[1]:(I[b]+I[b+1])/2].map(da.c2p).map(Math.round);b!==I.length-1&&(c[1]+=c[1]>c[0]?1:-1);var f=K(a).replace("e-",""),g=e(f).toHexString();d.select(this).attr({x:Z,width:Math.max(S,2),y:d.min(c),height:Math.max(d.max(c)-d.min(c),2),fill:g})});var m=ja.select(".cblines").selectAll("path.cbline").data(y.line.color&&y.line.width?H:[]);return m.enter().append("path").classed(w.cbline,!0),m.exit().remove(),m.each(function(a){d.select(this).attr("d","M"+Z+","+(Math.round(da.c2p(a))+y.line.width/2%1)+"h"+S).call(n.lineGroupStyle,y.line.width,J(a),y.line.dash)}),da._axislayer.selectAll("g."+da._id+"tick,path").remove(),da._pos=Z+S+(y.outlinewidth||0)/2-("outside"===y.ticks?1:0),da.side="right",k.syncOrAsync([function(){return i.doTicks(a,da,!0)},function(){if(-1===["top","bottom"].indexOf(y.titleside)){var b=da.titlefont.size,c=da._offset+da._length/2,e=D.l+(da.position||0)*D.w+("right"===da.side?10+b*(da.showticklabels?1:.5):-10-b*(da.showticklabels?.5:0));A("h"+da._id+"title",{avoid:{selection:d.select(a).selectAll("g."+da._id+"tick"),side:y.titleside,offsetLeft:D.l,offsetTop:0,maxShift:C.width},attributes:{x:e,y:c,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function A(b,c){var d,e=x();d=h.traceIs(e,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var f={propContainer:da,propName:d,traceIndex:e.index,placeholder:C._dfltTitle.colorbar,containerGroup:ja.select(".cbtitle")},g="h"===b.charAt(0)?b.substr(1):"h"+b;ja.selectAll("."+g+",."+g+"-math-group").remove(),p.draw(a,b,l(f,c||{}))}function B(){var c=S+y.outlinewidth/2+n.bBox(da._axislayer.node()).width;if(P=ka.select("text"),P.node()&&!P.classed(w.jsPlaceholder)){var d,e=ka.select(".h"+da._id+"title-math-group").node();d=e&&-1!==["top","bottom"].indexOf(y.titleside)?n.bBox(e).width:n.bBox(ka.node()).right-Z-D.l,c=Math.max(c,d)}var f=2*y.xpad+c+y.borderwidth+y.outlinewidth/2,h=aa-ba;ja.select(".cbbg").attr({x:Z-y.xpad-(y.borderwidth+y.outlinewidth)/2,y:ba-X,width:Math.max(f,2),height:Math.max(h+2*X,2)}).call(o.fill,y.bgcolor).call(o.stroke,y.bordercolor).style({"stroke-width":y.borderwidth}),ja.selectAll(".cboutline").attr({x:Z,y:ba+y.ypad+("top"===y.titleside?la:0),width:Math.max(S,2),height:Math.max(h-2*y.ypad-la,2)}).call(o.stroke,y.outlinecolor).style({fill:"None","stroke-width":y.outlinewidth});var i=({center:.5,right:1}[y.xanchor]||0)*f;ja.attr("transform","translate("+(D.l-i)+","+D.t+")"),g.autoMargin(a,b,{x:y.x,y:y.y,l:f*({right:1,center:.5}[y.xanchor]||0),r:f*({left:1,center:.5}[y.xanchor]||0),t:h*({bottom:1,middle:.5}[y.yanchor]||0),b:h*({top:1,middle:.5}[y.yanchor]||0)})}var C=a._fullLayout,D=C._size;if("function"!=typeof y.fillcolor&&"function"!=typeof y.line.color)return void C._infolayer.selectAll("g."+b).remove();var E,F,G=d.extent(("function"==typeof y.fillcolor?y.fillcolor:y.line.color).domain()),H=[],I=[],J="function"==typeof y.line.color?y.line.color:function(){return y.line.color},K="function"==typeof y.fillcolor?y.fillcolor:function(){return y.fillcolor},L=y.levels.end+y.levels.size/100,M=y.levels.size,N=1.001*G[0]-.001*G[1],O=1.001*G[1]-.001*G[0];for(F=0;F<1e5&&(E=y.levels.start+F*M,!(M>0?E>=L:E<=L));F++)E>N&&E<O&&H.push(E);if("function"==typeof y.fillcolor)if(y.filllevels)for(L=y.filllevels.end+y.filllevels.size/100,M=y.filllevels.size,F=0;F<1e5&&(E=y.filllevels.start+F*M,!(M>0?E>=L:E<=L));F++)E>G[0]&&E<G[1]&&I.push(E);else I=H.map(function(a){return a-y.levels.size/2}),I.push(I[I.length-1]+y.levels.size);else y.fillcolor&&"string"==typeof y.fillcolor&&(I=[0]);y.levels.size<0&&(H.reverse(),I.reverse());var P,Q=C.height-C.margin.t-C.margin.b,R=C.width-C.margin.l-C.margin.r,S=Math.round(y.thickness*("fraction"===y.thicknessmode?R:1)),T=S/D.w,U=Math.round(y.len*("fraction"===y.lenmode?Q:1)),V=U/D.h,W=y.xpad/D.w,X=(y.borderwidth+y.outlinewidth)/2,Y=y.ypad/D.h,Z=Math.round(y.x*D.w+y.xpad),$=y.x-T*({middle:.5,right:1}[y.xanchor]||0),_=y.y+V*(({top:-.5,bottom:.5}[y.yanchor]||0)-.5),aa=Math.round(D.h*(1-_)),ba=aa-U,ca={type:"linear",range:G,tickmode:y.tickmode,nticks:y.nticks,tick0:y.tick0,dtick:y.dtick,tickvals:y.tickvals,ticktext:y.ticktext,ticks:y.ticks,ticklen:y.ticklen,tickwidth:y.tickwidth,tickcolor:y.tickcolor,showticklabels:y.showticklabels,tickfont:y.tickfont,tickangle:y.tickangle,tickformat:y.tickformat,exponentformat:y.exponentformat,separatethousands:y.separatethousands,showexponent:y.showexponent,showtickprefix:y.showtickprefix,tickprefix:y.tickprefix,showticksuffix:y.showticksuffix,ticksuffix:y.ticksuffix,title:y.title,titlefont:y.titlefont,showline:!0,anchor:"free",position:1},da={type:"linear",_id:"y"+b},ea={letter:"y",font:C.font,noHover:!0,calendar:C.calendar};if(s(ca,da,v,ea,C),t(ca,da,v,ea),da.position=y.x+W+T,c.axis=da,-1!==["top","bottom"].indexOf(y.titleside)&&(da.titleside=y.titleside,da.titlex=y.x+W,da.titley=_+("top"===y.titleside?V-Y:Y)),y.line.color&&"auto"===y.tickmode){da.tickmode="linear",da.tick0=y.levels.start;var fa=y.levels.size,ga=k.constrain((aa-ba)/50,4,15)+1,ha=(G[1]-G[0])/((y.nticks||ga)*fa);if(ha>1){var ia=Math.pow(10,Math.floor(Math.log(ha)/Math.LN10));fa*=ia*k.roundUp(ha/ia,[2,5,10]),(Math.abs(y.levels.start)/y.levels.size+1e-6)%1<2e-6&&(da.tick0=0)}da.dtick=fa}da.domain=[_+Y,_+V-Y],da.setScale();var ja=C._infolayer.selectAll("g."+b).data([0]);ja.enter().append("g").classed(b,!0).classed(w.colorbar,!0).each(function(){var a=d.select(this);a.append("rect").classed(w.cbbg,!0),a.append("g").classed(w.cbfills,!0),a.append("g").classed(w.cblines,!0),a.append("g").classed(w.cbaxis,!0).classed(w.crisp,!0),a.append("g").classed(w.cbtitleunshift,!0).append("g").classed(w.cbtitle,!0),a.append("rect").classed(w.cboutline,!0),a.select(".cbtitle").datum(0)}),ja.attr("transform","translate("+Math.round(D.l)+","+Math.round(D.t)+")");var ka=ja.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(D.l)+",-"+Math.round(D.t)+")");da._axislayer=ja.select(".cbaxis");var la=0;if(-1!==["top","bottom"].indexOf(y.titleside)){var ma,na=D.l+(y.x+W)*D.w,oa=da.titlefont.size;ma="top"===y.titleside?(1-(_+V-Y))*D.h+D.t+3+.75*oa:(1-(_+Y))*D.h+D.t-3-.25*oa,A(da._id+"title",{attributes:{x:na,y:ma,"text-anchor":"start"}})}var pa=k.syncOrAsync([g.previousPromises,z,g.previousPromises,B],a);if(pa&&pa.then&&(a._promises||[]).push(pa),a._context.edits.colorbarPosition){var qa,ra,sa;j.init({element:ja.node(),gd:a,prepFn:function(){qa=ja.attr("transform"),m(ja)},moveFn:function(a,b){ja.attr("transform",qa+" translate("+a+","+b+")"),ra=j.align($+a/D.w,T,0,1,y.xanchor),sa=j.align(_-b/D.h,V,0,1,y.yanchor);var c=j.getCursor(ra,sa,y.xanchor,y.yanchor);m(ja,c)},doneFn:function(){m(ja),void 0!==ra&&void 0!==sa&&f.restyle(a,{"colorbar.x":ra,"colorbar.y":sa},x().index)}})}return pa}function x(){var c,d,e=b.substr(2);for(c=0;c<a._fullData.length;c++)if(d=a._fullData[c],d.uid===e)return d}var y={};return Object.keys(v).forEach(function(a){y[a]=null}),y.fillcolor=null,y.line={color:null,width:null,dash:null},y.levels={start:null,end:null,size:null},y.filllevels=null,Object.keys(y).forEach(function(a){c[a]=function(b){return arguments.length?(y[a]=k.isPlainObject(y[a])?k.extendFlat(y[a],b):b,c):y[a]}}),c.options=function(a){return Object.keys(a).forEach(function(b){"function"==typeof c[b]&&c[b](a[b])}),c},c._opts=y,c}},{"../../constants/alignment":716,"../../lib":743,"../../lib/extend":732,"../../lib/setcursor":762,"../../lib/svg_text_utils":766,"../../plotly":784,"../../plots/cartesian/axes":789,"../../plots/cartesian/axis_defaults":791,"../../plots/cartesian/layout_attributes":801,"../../plots/cartesian/position_defaults":805,"../../plots/plots":852,"../../registry":873,"../color":618,"../dragelement":640,"../drawing":643,"../titles":709,"./attributes":619,"./constants":620,d3:128,tinycolor2:546}],623:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a){return d.isPlainObject(a.colorbar)}},{"../../lib":743}],624:[function(a,b,c){"use strict";b.exports={zauto:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0}},zmin:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},zmax:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},colorscale:{valType:"colorscale",editType:"calc",impliedEdits:{autocolorscale:!1}},autocolorscale:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0}},reversescale:{valType:"boolean",dflt:!1,editType:"calc"},showscale:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],625:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./scales"),f=a("./flip_scale");b.exports=function(a,b,c,g){var h,i;c?(h=d.nestedProperty(a,c).get(),i=d.nestedProperty(a._input,c).get()):(h=a,i=a._input);var j=g+"auto",k=g+"min",l=g+"max",m=h[j],n=h[k],o=h[l],p=h.colorscale;!1===m&&void 0!==n||(n=d.aggNums(Math.min,null,b)),!1===m&&void 0!==o||(o=d.aggNums(Math.max,null,b)),n===o&&(n-=.5,o+=.5),h[k]=n,h[l]=o,i[k]=n,i[l]=o,i[j]=!1!==m||void 0===n&&void 0===o,h.autocolorscale&&(p=n*o<0?e.RdBu:n>=0?e.Reds:e.Blues,i.colorscale=p,h.reversescale&&(p=f(p)),h.colorscale=p)}},{"../../lib":743,"./flip_scale":630,"./scales":637}],626:[function(a,b,c){"use strict";var d=a("./attributes"),e=a("../../lib/extend").extendFlat;a("./scales.js");b.exports=function(a,b,c){return{color:{valType:"color",arrayOk:!0,editType:b||"style"},colorscale:e({},d.colorscale,{}),cauto:e({},d.zauto,{impliedEdits:{cmin:void 0,cmax:void 0}}),cmax:e({},d.zmax,{editType:b||d.zmax.editType,impliedEdits:{cauto:!1}}),cmin:e({},d.zmin,{editType:b||d.zmin.editType,impliedEdits:{cauto:!1}}),autocolorscale:e({},d.autocolorscale,{dflt:!1===c?c:d.autocolorscale.dflt}),reversescale:e({},d.reversescale,{})}}},{"../../lib/extend":732,"./attributes":624,"./scales.js":637}],627:[function(a,b,c){"use strict";var d=a("./scales");b.exports=d.RdBu},{"./scales":637}],628:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../colorbar/has_colorbar"),g=a("../colorbar/defaults"),h=a("./is_valid_scale"),i=a("./flip_scale");b.exports=function(a,b,c,j,k){var l=k.prefix,m=k.cLetter,n=l.slice(0,l.length-1),o=l?e.nestedProperty(a,n).get()||{}:a,p=l?e.nestedProperty(b,n).get()||{}:b,q=o[m+"min"],r=o[m+"max"],s=o.colorscale;j(l+m+"auto",!(d(q)&&d(r)&&q<r)),j(l+m+"min"),j(l+m+"max");var t;void 0!==s&&(t=!h(s)),j(l+"autocolorscale",t);var u=j(l+"colorscale");if(j(l+"reversescale")&&(p.colorscale=i(u)),"marker.line."!==l){var v;l&&(v=f(o)),j(l+"showscale",v)&&g(o,p,c)}}},{"../../lib":743,"../colorbar/defaults":621,"../colorbar/has_colorbar":623,"./flip_scale":630,"./is_valid_scale":634,"fast-isnumeric":140}],629:[function(a,b,c){"use strict";b.exports=function(a,b,c){for(var d=a.length,e=new Array(d),f=new Array(d),g=0;g<d;g++){var h=a[g];e[g]=b+h[0]*(c-b),f[g]=h[1]}return{domain:e,range:f}}},{}],630:[function(a,b,c){"use strict";b.exports=function(a){for(var b,c=a.length,d=new Array(c),e=c-1,f=0;e>=0;e--,f++)b=a[e],d[f]=[1-b[0],b[1]];return d}},{}],631:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./default_scale"),f=a("./is_valid_scale_array");b.exports=function(a,b){function c(){try{a=d[a]||JSON.parse(a)}catch(c){a=b}}return b||(b=e),a?("string"==typeof a&&(c(),"string"==typeof a&&c()),f(a)?a:b):b}},{"./default_scale":627,"./is_valid_scale_array":635,"./scales":637}],632:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("./is_valid_scale");b.exports=function(a,b){var c=b?e.nestedProperty(a,b).get()||{}:a,g=c.color,h=!1;if(Array.isArray(g))for(var i=0;i<g.length;i++)if(d(g[i])){h=!0;break}return e.isPlainObject(c)&&(h||!0===c.showscale||d(c.cmin)&&d(c.cmax)||f(c.colorscale)||e.isPlainObject(c.colorbar))}},{"../../lib":743,"./is_valid_scale":634,"fast-isnumeric":140}],633:[function(a,b,c){"use strict";c.scales=a("./scales"),c.defaultScale=a("./default_scale"),c.attributes=a("./attributes"),c.handleDefaults=a("./defaults"),c.calc=a("./calc"),c.hasColorscale=a("./has_colorscale"),c.isValidScale=a("./is_valid_scale"),c.getScale=a("./get_scale"),c.flipScale=a("./flip_scale"),c.extractScale=a("./extract_scale"),c.makeColorScaleFunc=a("./make_color_scale_func")},{"./attributes":624,"./calc":625,"./default_scale":627,"./defaults":628,"./extract_scale":629,"./flip_scale":630,"./get_scale":631,"./has_colorscale":632,"./is_valid_scale":634,"./make_color_scale_func":636,"./scales":637}],634:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./is_valid_scale_array");b.exports=function(a){return void 0!==d[a]||e(a)}},{"./is_valid_scale_array":635,"./scales":637}],635:[function(a,b,c){"use strict";var d=a("tinycolor2");b.exports=function(a){var b=0;if(!Array.isArray(a)||a.length<2)return!1;if(!a[0]||!a[a.length-1])return!1;if(0!=+a[0][0]||1!=+a[a.length-1][0])return!1;for(var c=0;c<a.length;c++){var e=a[c];if(2!==e.length||+e[0]<b||!d(e[1]).isValid())return!1;b=+e[0]}return!0}},{tinycolor2:546}],636:[function(a,b,c){"use strict";function d(a){var b={r:a[0],g:a[1],b:a[2],a:a[3]};return f(b).toRgbString()}var e=a("d3"),f=a("tinycolor2"),g=a("fast-isnumeric"),h=a("../color");b.exports=function(a,b){b=b||{};for(var c=a.domain,i=a.range,j=i.length,k=new Array(j),l=0;l<j;l++){var m=f(i[l]).toRgb();k[l]=[m.r,m.g,m.b,m.a]}var n,o=e.scale.linear().domain(c).range(k).clamp(!0),p=b.noNumericCheck,q=b.returnArray;return n=p&&q?o:p?function(a){return d(o(a))}:q?function(a){return g(a)?o(a):f(a).isValid()?a:h.defaultLine}:function(a){return g(a)?d(o(a)):f(a).isValid()?a:h.defaultLine},n.domain=o.domain,n.range=function(){return i},n}},{"../color":618,d3:128,"fast-isnumeric":140,tinycolor2:546}],637:[function(a,b,c){"use strict";b.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],638:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=(a-c)/(d-c),g=f+b/(d-c),h=(f+g)/2;return"left"===e||"bottom"===e?f:"center"===e||"middle"===e?h:"right"===e||"top"===e?g:f<2/3-h?f:g>4/3-h?g:h}},{}],639:[function(a,b,c){"use strict";var d=a("../../lib"),e=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];b.exports=function(a,b,c,f){return a="left"===c?0:"center"===c?1:"right"===c?2:d.constrain(Math.floor(3*a),0,2),b="bottom"===f?0:"middle"===f?1:"top"===f?2:d.constrain(Math.floor(3*b),0,2),e[b][a]}},{"../../lib":743}],640:[function(a,b,c){"use strict";function d(){var a=document.createElement("div");a.className="dragcover";var b=a.style;return b.position="fixed",b.left=0,b.right=0,b.top=0,b.bottom=0,b.zIndex=999999999,b.background="none",document.body.appendChild(a),a}function e(a){a._dragging=!1,a._replotPending&&i.plot(a)}function f(a){return g(a.changedTouches?a.changedTouches[0]:a,document.body)}var g=a("mouse-event-offset"),h=a("has-hover"),i=a("../../plotly"),j=a("../../lib"),k=a("../../plots/cartesian/constants"),l=a("../../constants/interactions"),m=b.exports={};m.align=a("./align"),m.getCursor=a("./cursor");var n=a("./unhover");m.unhover=n.wrapped,m.unhoverRaw=n.raw;var o=j.eventListenerOptionsSupported();m.init=function(a){function b(a,b,c){return Math.abs(a)<c&&(a=0),Math.abs(b)<c&&(b=0),[a,b]}function c(b){w._dragged=!1,w._dragging=!0;var c=f(b);return n=c[0],p=c[1],u=b.target,t=b,v=b.buttons&&2===b.buttons||b.ctrlKey,q=(new Date).getTime(),q-w._mouseDownTime<y?x+=1:(x=1,w._mouseDownTime=q),a.prepFn&&a.prepFn(b,n,p),h&&!v?(s=d(),s.style.cursor=window.getComputedStyle(z).cursor):h||(s=document,r=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(z).cursor),document.addEventListener("mousemove",g),document.addEventListener("mouseup",i),document.addEventListener("touchmove",g),document.addEventListener("touchend",i),j.pauseEvent(b)}function g(b){var c=f(b),d=a.minDrag||k.MINDRAG,e=A(c[0]-n,c[1]-p,d),g=e[0],h=e[1];return(g||h)&&(w._dragged=!0,m.unhover(w)),w._dragged&&a.moveFn&&!v&&a.moveFn(g,h),j.pauseEvent(b)}function i(b){if(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",i),h?j.removeElement(s):r&&(s.documentElement.style.cursor=r,r=null),!w._dragging)return void(w._dragged=!1);if(w._dragging=!1,(new Date).getTime()-w._mouseDownTime>y&&(x=Math.max(x-1,1)),w._dragged)a.doneFn&&a.doneFn(b);else if(a.clickFn&&a.clickFn(x,t),!v){var c;try{c=new MouseEvent("click",b)}catch(a){var d=f(b);c=document.createEvent("MouseEvents"),c.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,d[0],d[1],b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}u.dispatchEvent(c)}return e(w),w._dragged=!1,j.pauseEvent(b)}var n,p,q,r,s,t,u,v,w=a.gd,x=1,y=l.DBLCLICKDELAY,z=a.element;w._mouseDownTime||(w._mouseDownTime=0),z.style.pointerEvents="all",z.onmousedown=c,o?(z._ontouchstart&&z.removeEventListener("touchstart",z._ontouchstart),z._ontouchstart=c,z.addEventListener("touchstart",c,{passive:!1})):z.ontouchstart=c;var A=a.clampFn||b},m.coverSlip=d},{"../../constants/interactions":720,"../../lib":743,"../../plotly":784,"../../plots/cartesian/constants":794,"./align":638,"./cursor":639,"./unhover":641,"has-hover":276,"mouse-event-offset":444}],641:[function(a,b,c){"use strict";var d=a("../../lib/events"),e=a("../../lib/throttle"),f=a("../../lib/get_graph_div"),g=a("../fx/constants"),h=b.exports={};h.wrapped=function(a,b,c){a=f(a),e.clear(a._fullLayout._uid+g.HOVERID),h.raw(a,b,c)},h.raw=function(a,b){var c=a._fullLayout,e=a._hoverdata;b||(b={}),b.target&&!1===d.triggerHandler(a,"plotly_beforehover",b)||(c._hoverlayer.selectAll("g").remove(),c._hoverlayer.selectAll("line").remove(),c._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,b.target&&e&&a.emit("plotly_unhover",{event:b,points:e}))}},{"../../lib/events":731,"../../lib/get_graph_div":738,"../../lib/throttle":767,"../fx/constants":655}],642:[function(a,b,c){"use strict";c.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],643:[function(a,b,c){"use strict";function d(a,b){var c=a%100;return x.symbolFuncs[c](b)+(a>=200?A:"")}function e(a,b,c,e,f,g,h,i){if(m.traceIs(c,"symbols")){var j=w(c);b.attr("d",function(a){var b;b="various"===a.ms||"various"===g.size?3:v.isBubble(c)?j(a.ms):(g.size||6)/2,a.mrc=b;var e=x.symbolNumber(a.mx||g.symbol)||0;return a.om=e%200>=100,d(e,b)})}b.style("opacity",function(a){return(a.mo+1||g.opacity+1)-1});var k,l,o,p=!1;if(a.so?(o=h.outlierwidth,l=h.outliercolor,k=g.outliercolor):(o=(a.mlw+1||h.width+1||(a.trace?a.trace.marker.line.width:0)+1)-1,l="mlc"in a?a.mlcc=f(a.mlc):Array.isArray(h.color)?n.defaultLine:h.color,Array.isArray(g.color)&&(k=n.defaultLine,p=!0),k="mc"in a?a.mcc=e(a.mc):g.color||"rgba(0,0,0,0)"),a.om)b.call(n.stroke,k).style({"stroke-width":(o||1)+"px",fill:"none"});else{b.style("stroke-width",o+"px");var q=g.gradient,r=a.mgt;if(r?p=!0:r=q&&q.type,r&&"none"!==r){var s=a.mgc;s?p=!0:s=q.color;var t="g"+i._fullLayout._uid+"-"+c.uid;p&&(t+="-"+a.i),b.call(x.gradient,i,t,r,k,s)}else b.call(n.fill,k);o&&b.call(n.stroke,l)}}function f(a,b,c,d){var e=j.select(a.node().parentNode),f=-1!==b.indexOf("top")?"top":-1!==b.indexOf("bottom")?"bottom":"middle",g=-1!==b.indexOf("left")?"end":-1!==b.indexOf("right")?"start":"middle",h=d?d/.8+1:0,i=(q.lineCount(a)-1)*t+1,k=D[g]*h,l=.75*c+D[f]*h+(D[f]-1)*i*c/2;a.attr("text-anchor",g),e.attr("transform","translate("+k+","+l+")")}function g(a,b){var c=a.ts||b.textfont.size;return k(c)&&c>0?c:0}function h(a,b,c,d){var e=a[0]-b[0],f=a[1]-b[1],g=c[0]-b[0],h=c[1]-b[1],i=Math.pow(e*e+f*f,E/2),k=Math.pow(g*g+h*h,E/2),l=(k*k*e-i*i*g)*d,m=(k*k*f-i*i*h)*d,n=3*k*(i+k),o=3*i*(i+k);return[[j.round(b[0]+(n&&l/n),2),j.round(b[1]+(n&&m/n),2)],[j.round(b[0]-(o&&l/o),2),j.round(b[1]-(o&&m/o),2)]]}function i(a){var b=a.getAttribute("data-unformatted");if(null!==b)return b+a.getAttribute("data-math")+a.getAttribute("text-anchor")+a.getAttribute("style")}var j=a("d3"),k=a("fast-isnumeric"),l=a("tinycolor2"),m=a("../../registry"),n=a("../color"),o=a("../colorscale"),p=a("../../lib"),q=a("../../lib/svg_text_utils"),r=a("../../constants/xmlns_namespaces"),s=a("../../constants/alignment"),t=s.LINE_SPACING,u=a("../../constants/interactions").DESELECTDIM,v=a("../../traces/scatter/subtypes"),w=a("../../traces/scatter/make_bubble_size_func"),x=b.exports={};x.font=function(a,b,c,d){p.isPlainObject(b)&&(d=b.color,c=b.size,b=b.family),b&&a.style("font-family",b),c+1&&a.style("font-size",c+"px"),d&&a.call(n.fill,d)},x.setPosition=function(a,b,c){a.attr("x",b).attr("y",c)},x.setSize=function(a,b,c){a.attr("width",b).attr("height",c)},x.setRect=function(a,b,c,d,e){a.call(x.setPosition,b,c).call(x.setSize,d,e)},x.translatePoint=function(a,b,c,d){var e=c.c2p(a.x),f=d.c2p(a.y);return!!(k(e)&&k(f)&&b.node())&&("text"===b.node().nodeName?b.attr("x",e).attr("y",f):b.attr("transform","translate("+e+","+f+")"),!0)},x.translatePoints=function(a,b,c){a.each(function(a){var d=j.select(this);x.translatePoint(a,d,b,c)})},x.hideOutsideRangePoint=function(a,b,c,d,e,f){b.attr("display",c.isPtWithinRange(a,e)&&d.isPtWithinRange(a,f)?null:"none")},x.hideOutsideRangePoints=function(a,b){if(b._hasClipOnAxisFalse){var c=b.xaxis,d=b.yaxis;a.each(function(b){var e=b[0].trace,f=e.xcalendar,g=e.ycalendar;a.selectAll(".point,.textpoint").each(function(a){x.hideOutsideRangePoint(a,j.select(this),c,d,f,g)})})}},x.crispRound=function(a,b,c){return b&&k(b)?a._context.staticPlot?b:b<1?1:Math.round(b):c||0},x.singleLineStyle=function(a,b,c,d,e){b.style("fill","none");var f=(((a||[])[0]||{}).trace||{}).line||{},g=c||f.width||0,h=e||f.dash||"";n.stroke(b,d||f.color),x.dashLine(b,h,g)},x.lineGroupStyle=function(a,b,c,d){a.style("fill","none").each(function(a){var e=(((a||[])[0]||{}).trace||{}).line||{},f=b||e.width||0,g=d||e.dash||"";j.select(this).call(n.stroke,c||e.color).call(x.dashLine,g,f)})},x.dashLine=function(a,b,c){c=+c||0,b=x.dashStyle(b,c),a.style({"stroke-dasharray":b,"stroke-width":c+"px"})},x.dashStyle=function(a,b){b=+b||1;var c=Math.max(b,3);return"solid"===a?a="":"dot"===a?a=c+"px,"+c+"px":"dash"===a?a=3*c+"px,"+3*c+"px":"longdash"===a?a=5*c+"px,"+5*c+"px":"dashdot"===a?a=3*c+"px,"+c+"px,"+c+"px,"+c+"px":"longdashdot"===a&&(a=5*c+"px,"+2*c+"px,"+c+"px,"+2*c+"px"),a},x.singleFillStyle=function(a){var b=j.select(a.node()),c=b.data(),d=(((c[0]||[])[0]||{}).trace||{}).fillcolor;d&&a.call(n.fill,d)},x.fillGroupStyle=function(a){a.style("stroke-width",0).each(function(b){var c=j.select(this);try{c.call(n.fill,b[0].trace.fillcolor)}catch(b){p.error(b,a),c.remove()}})};var y=a("./symbol_defs");x.symbolNames=[],x.symbolFuncs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(y).forEach(function(a){var b=y[a];x.symbolList=x.symbolList.concat([b.n,a,b.n+100,a+"-open"]),x.symbolNames[b.n]=a,x.symbolFuncs[b.n]=b.f,b.needLine&&(x.symbolNeedLines[b.n]=!0),b.noDot?x.symbolNoDot[b.n]=!0:x.symbolList=x.symbolList.concat([b.n+200,a+"-dot",b.n+300,a+"-open-dot"]),b.noFill&&(x.symbolNoFill[b.n]=!0)});var z=x.symbolNames.length,A="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";x.symbolNumber=function(a){if("string"==typeof a){var b=0;a.indexOf("-open")>0&&(b=100,a=a.replace("-open","")),a.indexOf("-dot")>0&&(b+=200,a=a.replace("-dot","")),a=x.symbolNames.indexOf(a),a>=0&&(a+=b)}return a%100>=z||a>=400?0:Math.floor(Math.max(a,0))};var B={x1:1,x2:0,y1:0,y2:0},C={x1:0,x2:0,y1:1,y2:0};x.gradient=function(a,b,c,d,e,f){var g=b._fullLayout._defs.select(".gradients").selectAll("#"+c).data([d+e+f],p.identity);g.exit().remove(),g.enter().append("radial"===d?"radialGradient":"linearGradient").each(function(){var a=j.select(this);"horizontal"===d?a.attr(B):"vertical"===d&&a.attr(C),a.attr("id",c);var b=l(e),g=l(f);a.append("stop").attr({offset:"0%","stop-color":n.tinyRGB(g),"stop-opacity":g.getAlpha()}),a.append("stop").attr({offset:"100%","stop-color":n.tinyRGB(b),"stop-opacity":b.getAlpha()})}),a.style({fill:"url(#"+c+")","fill-opacity":null})},x.initGradients=function(a){var b=a._fullLayout._defs.selectAll(".gradients").data([0]);b.enter().append("g").classed("gradients",!0),b.selectAll("linearGradient,radialGradient").remove()},x.singlePointStyle=function(a,b,c,d,f,g){var h=c.marker;e(a,b,c,d,f,h,h.line,g)},x.pointStyle=function(a,b,c){if(a.size()){var d=b.marker,e=x.tryColorscale(d,""),f=x.tryColorscale(d,"line");a.each(function(a){x.singlePointStyle(a,j.select(this),b,e,f,c)})}},x.selectedPointStyle=function(a,b){if(a.size()&&b.selectedpoints){var c=b.selected||{},e=b.unselected||{},f=b.marker||{},g=c.marker||{},h=e.marker||{},i=f.opacity,k=g.opacity,l=h.opacity,o=void 0!==k,p=void 0!==l;a.each(function(a){var b,c=j.select(this),d=a.mo,e=void 0!==d;(e||o||p)&&(a.selected?o&&(b=k):b=p?l:u*(e?d:i)),
void 0!==b&&c.style("opacity",b)});var q=g.color,r=h.color;(q||r)&&a.each(function(a){var b,c=j.select(this);a.selected?q&&(b=q):r&&(b=r),b&&n.fill(c,b)});var s=g.size,t=h.size,v=void 0!==s,w=void 0!==t;m.traceIs(b,"symbols")&&(v||w)&&a.each(function(a){var b,c=j.select(this),e=a.mrc,g=a.mx||f.symbol||0;b=a.selected?v?s/2:e:w?t/2:e,c.attr("d",d(x.symbolNumber(g),b)),a.mrc2=b})}},x.tryColorscale=function(a,b){var c=b?p.nestedProperty(a,b).get():a,d=c.colorscale,e=c.color;return d&&Array.isArray(e)?o.makeColorScaleFunc(o.extractScale(d,c.cmin,c.cmax)):p.identity};var D={start:1,end:-1,middle:0,bottom:1,top:-1};x.textPointStyle=function(a,b,c){a.each(function(a){var d=j.select(this),e=p.extractOption(a,b,"tx","text");if(!e)return void d.remove();var h=a.tp||b.textposition,i=g(a,b);d.call(x.font,a.tf||b.textfont.family,i,a.tc||b.textfont.color).text(e).call(q.convertToTspans,c).call(f,h,i,a.mrc)})},x.selectedTextStyle=function(a,b){if(a.size()&&b.selectedpoints){var c=b.selected||{},d=b.unselected||{};a.each(function(a){var e,h=j.select(this),i=a.tc||b.textfont.color,k=a.tp||b.textposition,l=g(a,b),m=(c.textfont||{}).color,o=(d.textfont||{}).color;a.selected?m&&(e=m):o?e=o:m||(e=n.addOpacity(i,u)),e&&n.fill(h,e),f(h,k,l,a.mrc2||a.mrc)})}};var E=.5;x.smoothopen=function(a,b){if(a.length<3)return"M"+a.join("L");var c,d="M"+a[0],e=[];for(c=1;c<a.length-1;c++)e.push(h(a[c-1],a[c],a[c+1],b));for(d+="Q"+e[0][0]+" "+a[1],c=2;c<a.length-1;c++)d+="C"+e[c-2][1]+" "+e[c-1][0]+" "+a[c];return d+="Q"+e[a.length-3][1]+" "+a[a.length-1]},x.smoothclosed=function(a,b){if(a.length<3)return"M"+a.join("L")+"Z";var c,d="M"+a[0],e=a.length-1,f=[h(a[e],a[0],a[1],b)];for(c=1;c<e;c++)f.push(h(a[c-1],a[c],a[c+1],b));for(f.push(h(a[e-1],a[e],a[0],b)),c=1;c<=e;c++)d+="C"+f[c-1][1]+" "+f[c][0]+" "+a[c];return d+="C"+f[e][1]+" "+f[0][0]+" "+a[0]+"Z"};var F={hv:function(a,b){return"H"+j.round(b[0],2)+"V"+j.round(b[1],2)},vh:function(a,b){return"V"+j.round(b[1],2)+"H"+j.round(b[0],2)},hvh:function(a,b){return"H"+j.round((a[0]+b[0])/2,2)+"V"+j.round(b[1],2)+"H"+j.round(b[0],2)},vhv:function(a,b){return"V"+j.round((a[1]+b[1])/2,2)+"H"+j.round(b[0],2)+"V"+j.round(b[1],2)}},G=function(a,b){return"L"+j.round(b[0],2)+","+j.round(b[1],2)};x.steps=function(a){var b=F[a]||G;return function(a){for(var c="M"+j.round(a[0][0],2)+","+j.round(a[0][1],2),d=1;d<a.length;d++)c+=b(a[d-1],a[d]);return c}},x.makeTester=function(){var a=j.select("body").selectAll("#js-plotly-tester").data([0]);a.enter().append("svg").attr("id","js-plotly-tester").attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var b=a.selectAll(".js-reference-point").data([0]);b.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),x.tester=a,x.testref=b},x.savedBBoxes={};var H=0;x.bBox=function(a,b,c){c||(c=i(a));var d;if(c){if(d=x.savedBBoxes[c])return p.extendFlat({},d)}else if(1===a.childNodes.length){var e=a.childNodes[0];if(c=i(e)){var f=+e.getAttribute("x")||0,g=+e.getAttribute("y")||0,h=e.getAttribute("transform");if(!h){var k=x.bBox(e,!1,c);return f&&(k.left+=f,k.right+=f),g&&(k.top+=g,k.bottom+=g),k}if(c+="~"+f+"~"+g+"~"+h,d=x.savedBBoxes[c])return p.extendFlat({},d)}}var l,m;b?l=a:(m=x.tester.node(),l=a.cloneNode(!0),m.appendChild(l)),j.select(l).attr("transform",null).call(q.positionText,0,0);var n=l.getBoundingClientRect(),o=x.testref.node().getBoundingClientRect();b||m.removeChild(l);var r={height:n.height,width:n.width,left:n.left-o.left,top:n.top-o.top,right:n.right-o.left,bottom:n.bottom-o.top};return H>=1e4&&(x.savedBBoxes={},H=0),c&&(x.savedBBoxes[c]=r),H++,p.extendFlat({},r)},x.setClipUrl=function(a,b){if(!b)return void a.attr("clip-path",null);var c="#"+b,d=j.select("base");d.size()&&d.attr("href")&&(c=window.location.href.split("#")[0]+c),a.attr("clip-path","url("+c+")")},x.getTranslate=function(a){var b=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,c=a.attr?"attr":"getAttribute",d=a[c]("transform")||"",e=d.replace(b,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},x.setTranslate=function(a,b,c){var d=/(\btranslate\(.*?\);?)/,e=a.attr?"attr":"getAttribute",f=a.attr?"attr":"setAttribute",g=a[e]("transform")||"";return b=b||0,c=c||0,g=g.replace(d,"").trim(),g+=" translate("+b+", "+c+")",g=g.trim(),a[f]("transform",g),g},x.getScale=function(a){var b=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,c=a.attr?"attr":"getAttribute",d=a[c]("transform")||"",e=d.replace(b,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},x.setScale=function(a,b,c){var d=/(\bscale\(.*?\);?)/,e=a.attr?"attr":"getAttribute",f=a.attr?"attr":"setAttribute",g=a[e]("transform")||"";return b=b||1,c=c||1,g=g.replace(d,"").trim(),g+=" scale("+b+", "+c+")",g=g.trim(),a[f]("transform",g),g},x.setPointGroupScale=function(a,b,c){var d,e,f;return b=b||1,c=c||1,e=1===b&&1===c?"":" scale("+b+","+c+")",f=/\s*sc.*/,a.each(function(){d=(this.getAttribute("transform")||"").replace(f,""),d+=e,d=d.trim(),this.setAttribute("transform",d)}),e};var I=/translate\([^)]*\)\s*$/;x.setTextPointsScale=function(a,b,c){a.each(function(){var a,d=j.select(this),e=d.select("text");if(e.node()){var f=parseFloat(e.attr("x")||0),g=parseFloat(e.attr("y")||0),h=(d.attr("transform")||"").match(I);a=1===b&&1===c?[]:["translate("+f+","+g+")","scale("+b+","+c+")","translate("+-f+","+-g+")"],h&&a.push(h),d.attr("transform",a.join(" "))}})}},{"../../constants/alignment":716,"../../constants/interactions":720,"../../constants/xmlns_namespaces":723,"../../lib":743,"../../lib/svg_text_utils":766,"../../registry":873,"../../traces/scatter/make_bubble_size_func":1083,"../../traces/scatter/subtypes":1088,"../color":618,"../colorscale":633,"./symbol_defs":644,d3:128,"fast-isnumeric":140,tinycolor2:546}],644:[function(a,b,c){"use strict";var d=a("d3");b.exports={circle:{n:0,f:function(a){var b=d.round(a,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(a){var b=d.round(.4*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H"+b+"V"+c+"H-"+b+"V"+b+"H-"+c+"V-"+b+"H-"+b+"V-"+c+"H"+b+"V-"+b+"H"+c+"Z"}},x:{n:4,f:function(a){var b=d.round(.8*a/Math.sqrt(2),2),c="l"+b+","+b,e="l"+b+",-"+b,f="l-"+b+",-"+b,g="l-"+b+","+b;return"M0,"+b+c+e+f+e+f+g+f+g+c+g+c+"Z"}},"triangle-up":{n:5,f:function(a){var b=d.round(2*a/Math.sqrt(3),2);return"M-"+b+","+d.round(a/2,2)+"H"+b+"L0,-"+d.round(a,2)+"Z"}},"triangle-down":{n:6,f:function(a){var b=d.round(2*a/Math.sqrt(3),2);return"M-"+b+",-"+d.round(a/2,2)+"H"+b+"L0,"+d.round(a,2)+"Z"}},"triangle-left":{n:7,f:function(a){var b=d.round(2*a/Math.sqrt(3),2);return"M"+d.round(a/2,2)+",-"+b+"V"+b+"L-"+d.round(a,2)+",0Z"}},"triangle-right":{n:8,f:function(a){var b=d.round(2*a/Math.sqrt(3),2);return"M-"+d.round(a/2,2)+",-"+b+"V"+b+"L"+d.round(a,2)+",0Z"}},"triangle-ne":{n:9,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+c+",-"+b+"H"+b+"V"+c+"Z"}},"triangle-se":{n:10,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+b+",-"+c+"V"+b+"H-"+c+"Z"}},"triangle-sw":{n:11,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H-"+b+"V-"+c+"Z"}},"triangle-nw":{n:12,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+b+","+c+"V-"+b+"H"+c+"Z"}},pentagon:{n:13,f:function(a){var b=d.round(.951*a,2),c=d.round(.588*a,2),e=d.round(-a,2),f=d.round(-.309*a,2);return"M"+b+","+f+"L"+c+","+d.round(.809*a,2)+"H-"+c+"L-"+b+","+f+"L0,"+e+"Z"}},hexagon:{n:14,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M"+e+",-"+c+"V"+c+"L0,"+b+"L-"+e+","+c+"V-"+c+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M-"+c+","+e+"H"+c+"L"+b+",0L"+c+",-"+e+"H-"+c+"L-"+b+",0Z"}},octagon:{n:16,f:function(a){var b=d.round(.924*a,2),c=d.round(.383*a,2);return"M-"+c+",-"+b+"H"+c+"L"+b+",-"+c+"V"+c+"L"+c+","+b+"H-"+c+"L-"+b+","+c+"V-"+c+"Z"}},star:{n:17,f:function(a){var b=1.4*a,c=d.round(.225*b,2),e=d.round(.951*b,2),f=d.round(.363*b,2),g=d.round(.588*b,2),h=d.round(-b,2),i=d.round(-.309*b,2),j=d.round(.118*b,2),k=d.round(.809*b,2);return"M"+c+","+i+"H"+e+"L"+f+","+j+"L"+g+","+k+"L0,"+d.round(.382*b,2)+"L-"+g+","+k+"L-"+f+","+j+"L-"+e+","+i+"H-"+c+"L0,"+h+"Z"}},hexagram:{n:18,f:function(a){var b=d.round(.66*a,2),c=d.round(.38*a,2),e=d.round(.76*a,2);return"M-"+e+",0l-"+c+",-"+b+"h"+e+"l"+c+",-"+b+"l"+c+","+b+"h"+e+"l-"+c+","+b+"l"+c+","+b+"h-"+e+"l-"+c+","+b+"l-"+c+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M-"+b+","+c+g+b+","+c+g+"0,-"+e+g+"-"+b+","+c+"Z"}},"star-triangle-down":{n:20,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M"+b+",-"+c+g+"-"+b+",-"+c+g+"0,"+e+g+b+",-"+c+"Z"}},"star-square":{n:21,f:function(a){var b=d.round(1.1*a,2),c=d.round(2*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(a){var b=d.round(1.4*a,2),c=d.round(1.9*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(a){var b=d.round(.7*a,2),c=d.round(1.4*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(a){var b=d.round(1.4*a,2),c=d.round(.7*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},hourglass:{n:25,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var b=d.round(a,2),c=d.round(a/Math.sqrt(2),2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var b=d.round(1.3*a,2),c=d.round(.65*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(a){var b=d.round(1.2*a,2),c=d.round(.85*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(a){var b=d.round(a/2,2),c=d.round(a,2);return"M"+b+","+c+"V-"+c+"m-"+c+",0V"+c+"M"+c+","+b+"H-"+c+"m0,-"+c+"H"+c},needLine:!0,noFill:!0},"y-up":{n:37,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(a){var b=d.round(1.4*a,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(a){var b=d.round(a,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0}}},{d3:128}],645:[function(a,b,c){"use strict";b.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],646:[function(a,b,c){"use strict";function d(a,b,c,d){var f=b["error_"+d]||{},i=f.visible&&-1!==["linear","log"].indexOf(c.type),j=[];if(i){for(var k=h(f),l=0;l<a.length;l++){var m=a[l],n=m[d];if(e(c.c2l(n))){var o=k(n,l);if(e(o[0])&&e(o[1])){var p=m[d+"s"]=n-o[0],q=m[d+"h"]=n+o[1];j.push(p,q)}}}g.expand(c,j,{padded:!0})}}var e=a("fast-isnumeric"),f=a("../../registry"),g=a("../../plots/cartesian/axes"),h=a("./compute_error");b.exports=function(a){for(var b=a.calcdata,c=0;c<b.length;c++){var e=b[c],h=e[0].trace;if(f.traceIs(h,"errorBarsOK")){var i=g.getFromId(a,h.xaxis),j=g.getFromId(a,h.yaxis);d(e,h,i,"x"),d(e,h,j,"y")}}}},{"../../plots/cartesian/axes":789,"../../registry":873,"./compute_error":647,"fast-isnumeric":140}],647:[function(a,b,c){"use strict";function d(a,b){return"percent"===a?function(a){return Math.abs(a*b/100)}:"constant"===a?function(){return Math.abs(b)}:"sqrt"===a?function(a){return Math.sqrt(Math.abs(a))}:void 0}b.exports=function(a){var b=a.type,c=a.symmetric;if("data"===b){var e=a.array,f=a.arrayminus;return c||void 0===f?function(a,b){var c=+e[b];return[c,c]}:function(a,b){return[+f[b],+e[b]]}}var g=d(b,a.value),h=d(b,a.valueminus);return c||void 0===a.valueminus?function(a){var b=g(a);return[b,b]}:function(a){return[h(a),g(a)]}}},{}],648:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../registry"),f=a("../../lib"),g=a("./attributes");b.exports=function(a,b,c,h){function i(a,b){return f.coerce(l,k,g,a,b)}var j="error_"+h.axis,k=b[j]={},l=a[j]||{};if(!1!==i("visible",void 0!==l.array||void 0!==l.value||"sqrt"===l.type)){var m=i("type","array"in l?"data":"percent"),n=!0;"sqrt"!==m&&(n=i("symmetric",!(("data"===m?"arrayminus":"valueminus")in l))),"data"===m?(i("array")||(k.array=[]),i("traceref"),n||(i("arrayminus")||(k.arrayminus=[]),i("tracerefminus"))):"percent"!==m&&"constant"!==m||(i("value"),n||i("valueminus"));var o="copy_"+h.inherit+"style";h.inherit&&(b["error_"+h.inherit]||{}).visible&&i(o,!(l.color||d(l.thickness)||d(l.width))),h.inherit&&k[o]||(i("color",c),i("thickness"),i("width",e.traceIs(b,"gl3d")?0:4))}}},{"../../lib":743,"../../registry":873,"./attributes":645,"fast-isnumeric":140}],649:[function(a,b,c){"use strict";var d=b.exports={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.calcFromTrace=function(a,b){for(var c=a.x||[],e=a.y||[],f=c.length||e.length,g=new Array(f),h=0;h<f;h++)g[h]={x:c[h],y:e[h]};return g[0].trace=a,d.calc({calcdata:[g],_fullLayout:b}),g},d.plot=a("./plot"),d.style=a("./style"),d.hoverInfo=function(a,b,c){(b.error_y||{}).visible&&(c.yerr=a.yh-a.y,b.error_y.symmetric||(c.yerrneg=a.y-a.ys)),(b.error_x||{}).visible&&(c.xerr=a.xh-a.x,b.error_x.symmetric||(c.xerrneg=a.x-a.xs))}},{"./attributes":645,"./calc":646,"./defaults":648,"./plot":650,"./style":651}],650:[function(a,b,c){"use strict";function d(a,b,c){var d={x:b.c2p(a.x),y:c.c2p(a.y)};return void 0!==a.yh&&(d.yh=c.c2p(a.yh),d.ys=c.c2p(a.ys),f(d.ys)||(d.noYS=!0,d.ys=c.c2p(a.ys,!0))),void 0!==a.xh&&(d.xh=b.c2p(a.xh),d.xs=b.c2p(a.xs),f(d.xs)||(d.noXS=!0,d.xs=b.c2p(a.xs,!0))),d}var e=a("d3"),f=a("fast-isnumeric"),g=a("../drawing"),h=a("../../traces/scatter/subtypes");b.exports=function(a,b,c){var i,j=b.xaxis,k=b.yaxis,l=c&&c.duration>0;a.each(function(a){var m,n=a[0].trace,o=n.error_x||{},p=n.error_y||{};n.ids&&(m=function(a){return a.id});var q=h.hasMarkers(n)&&n.marker.maxdisplayed>0;p.visible||o.visible||(a=[]);var r=e.select(this).selectAll("g.errorbar").data(a,m);if(r.exit().remove(),a.length){o.visible||r.selectAll("path.xerror").remove(),p.visible||r.selectAll("path.yerror").remove(),r.style("opacity",1);var s=r.enter().append("g").classed("errorbar",!0);l&&s.style("opacity",0).transition().duration(c.duration).style("opacity",1),g.setClipUrl(r,b.layerClipId),r.each(function(a){var b=e.select(this),g=d(a,j,k);if(!q||a.vis){var h;if(p.visible&&f(g.x)&&f(g.yh)&&f(g.ys)){var m=p.width;h="M"+(g.x-m)+","+g.yh+"h"+2*m+"m-"+m+",0V"+g.ys,g.noYS||(h+="m-"+m+",0h"+2*m);var n=b.select("path.yerror");i=!n.size(),i?n=b.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):l&&(n=n.transition().duration(c.duration).ease(c.easing)),n.attr("d",h)}if(o.visible&&f(g.y)&&f(g.xh)&&f(g.xs)){var r=(o.copy_ystyle?p:o).width;h="M"+g.xh+","+(g.y-r)+"v"+2*r+"m0,-"+r+"H"+g.xs,g.noXS||(h+="m0,-"+r+"v"+2*r);var s=b.select("path.xerror");i=!s.size(),i?s=b.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):l&&(s=s.transition().duration(c.duration).ease(c.easing)),s.attr("d",h)}}})}})}},{"../../traces/scatter/subtypes":1088,"../drawing":643,d3:128,"fast-isnumeric":140}],651:[function(a,b,c){"use strict";var d=a("d3"),e=a("../color");b.exports=function(a){a.each(function(a){var b=a[0].trace,c=b.error_y||{},f=b.error_x||{},g=d.select(this);g.selectAll("path.yerror").style("stroke-width",c.thickness+"px").call(e.stroke,c.color),f.copy_ystyle&&(f=c),g.selectAll("path.xerror").style("stroke-width",f.thickness+"px").call(e.stroke,f.color)})}},{"../color":618,d3:128}],652:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes");b.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:d({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":816}],653:[function(a,b,c){"use strict";function d(a,b,c,d){d=d||e.identity,Array.isArray(a)&&(b[0][c]=d(a))}var e=a("../../lib"),f=a("../../registry");b.exports=function(a){for(var b=a.calcdata,c=a._fullLayout,g=0;g<b.length;g++){var h=b[g],i=h[0].trace;if(!f.traceIs(i,"pie")){var j=f.traceIs(i,"2dMap")?d:e.fillArray;j(i.hoverinfo,h,"hi",function(a){return function(b){return e.coerceHoverinfo({hoverinfo:b},{_module:a._module},c)}}(i)),i.hoverlabel&&(j(i.hoverlabel.bgcolor,h,"hbg"),j(i.hoverlabel.bordercolor,h,"hbc"),j(i.hoverlabel.font.size,h,"hts"),j(i.hoverlabel.font.color,h,"htc"),j(i.hoverlabel.font.family,h,"htf"),j(i.hoverlabel.namelength,h,"hnl"))}}}},{"../../lib":743,"../../registry":873}],654:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("./hover").hover;b.exports=function(a,b,c){function f(){a.emit("plotly_click",{points:a._hoverdata,event:b})}var g=d.getComponentMethod("annotations","onClick")(a,a._hoverdata);void 0!==c&&e(a,b,c,!0),a._hoverdata&&b&&b.target&&(g&&g.then?g.then(f):f(),b.stopImmediatePropagation&&b.stopImmediatePropagation())}},{"../../registry":873,"./hover":658}],655:[function(a,b,c){"use strict";b.exports={MAXDIST:20,YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],656:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes"),f=a("./hoverlabel_defaults");b.exports=function(a,b,c,g){function h(c,f){return d.coerce(a,b,e,c,f)}f(a,b,h,g.hoverlabel)}},{"../../lib":743,"./attributes":652,"./hoverlabel_defaults":659}],657:[function(a,b,c){"use strict";function d(a){return h[a]||a}function e(a,b){return Array.isArray(b)?Array.isArray(a)&&Array.isArray(a[b[0]])?a[b[0]][b[1]]:void 0:a[b]}var f=a("../../lib"),g=a("./constants");c.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},c.flat=function(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=b;return c},c.p2c=function(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=a[d].p2c(b);return c},c.getDistanceFunction=function(a,b,d,e){return"closest"===a?e||c.quadrature(b,d):"x"===a?b:d},c.getClosest=function(a,b,c){if(!1!==c.index)c.index>=0&&c.index<a.length?c.distance=0:c.index=!1;else for(var d=0;d<a.length;d++){var e=b(a[d]);e<=c.distance&&(c.index=d,c.distance=e)}return c},c.inbox=function(a,b){return a*b<0||0===a?g.MAXDIST*(.6-.3/Math.max(3,Math.abs(a-b))):1/0},c.quadrature=function(a,b){return function(c){var d=a(c),e=b(c);return Math.sqrt(d*d+e*e)}},c.makeEventData=function(a,b,d){var e="index"in a?a.index:a.pointNumber,f={data:b._input,fullData:b,curveNumber:b.index,pointNumber:e};if(b._indexToPoints){var g=b._indexToPoints[e];1===g.length?f.pointIndex=g[0]:f.pointIndices=g}else f.pointIndex=e;return b._module.eventData?f=b._module.eventData(f,a,b,d,e):("xVal"in a?f.x=a.xVal:"x"in a&&(f.x=a.x),"yVal"in a?f.y=a.yVal:"y"in a&&(f.y=a.y),a.xa&&(f.xaxis=a.xa),a.ya&&(f.yaxis=a.ya),void 0!==a.zLabelVal&&(f.z=a.zLabelVal)),c.appendArrayPointValue(f,b,e),f},c.appendArrayPointValue=function(a,b,c){var g=b._arrayAttrs;if(g)for(var h=0;h<g.length;h++){var i=g[h],j=d(i);if(void 0===a[j]){var k=f.nestedProperty(b,i).get(),l=e(k,c);void 0!==l&&(a[j]=l)}}},c.appendArrayMultiPointValues=function(a,b,c){var g=b._arrayAttrs;if(g)for(var h=0;h<g.length;h++){var i=g[h],j=d(i);if(void 0===a[j]){for(var k=f.nestedProperty(b,i).get(),l=new Array(c.length),m=0;m<c.length;m++)l[m]=e(k,c[m]);a[j]=l}}};var h={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"}},{"../../lib":743,"./constants":655}],658:[function(a,b,c){"use strict";function d(a,b,c,d){function n(a,b){if(!a.length)return null;var c=a.map(function(a,b){var c=a.xa,d=a.ya,e=c.c2p(T),f=d.c2p(U);return{distance:function(a){var b=a.kink,c=(a.x1+a.x0)/2-e,d=(a.y1+a.y0)/2-f;return Math.max(Math.sqrt(c*c+d*d)-b,1-3/b)}(a),index:b}});return c=c.filter(function(a){return a.distance<=b}).sort(function(a,b){return a.distance-b.distance}),c.length?a[c[0].index]:null}function q(a){return a?{xa:a.xa,ya:a.ya,x0:a.x0,x1:a.x1,y0:a.y0,y1:a.y1,distance:a.distance,curveNumber:a.trace.index,color:a.color,pointNumber:a.index}:null}c||(c="xy");var s=Array.isArray(c)?c:[c],y=a._fullLayout,z=y._plots||[],A=z[c];if(A){var B=A.overlays.map(function(a){return a.id});s=s.concat(B)}for(var C=s.length,D=new Array(C),E=new Array(C),F=0;F<C;F++){var G=s[F],H=z[G];if(H)D[F]=v.getFromId(a,H.xaxis._id),E[F]=v.getFromId(a,H.yaxis._id);else{var I=y[G]._subplot;D[F]=I.xaxis,E[F]=I.yaxis}}var J=b.hovermode||y.hovermode;if(-1===["x","y","closest"].indexOf(J)||!a.calcdata||a.querySelector(".zoombox")||a._dragging)return u.unhoverRaw(a,b);var K,L,M,N,O,P,Q,R,S,T,U,V,W,X=-1===y.hoverdistance?1/0:y.hoverdistance,Y=-1===y.spikedistance?1/0:y.spikedistance,Z=[],$=[],_={hLinePoint:null,vLinePoint:null};if(Array.isArray(b))for(J="array",M=0;M<b.length;M++)O=a.calcdata[b[M].curveNumber||0],"skip"!==O[0].trace.hoverinfo&&$.push(O);else{for(N=0;N<a.calcdata.length;N++)O=a.calcdata[N],P=O[0].trace,"skip"!==P.hoverinfo&&-1!==s.indexOf(x.getSubplot(P))&&$.push(O);var aa,ba,ca=!b.target;if(ca)aa="xpx"in b?b.xpx:D[0]._length/2,b.pointerX=aa+D[0]._offset,ba="ypx"in b?b.ypx:E[0]._length/2,b.pointerY=ba+E[0]._offset;else{if(!1===p.triggerHandler(a,"plotly_beforehover",b))return;var da=b.target.getBoundingClientRect();if(aa=b.clientX-da.left,ba=b.clientY-da.top,aa<0||aa>da.width||ba<0||ba>da.height)return u.unhoverRaw(a,b);b.pointerX=b.offsetX,b.pointerY=b.offsetY}if(K="xval"in b?x.flat(s,b.xval):x.p2c(D,aa),L="yval"in b?x.flat(s,b.yval):x.p2c(E,ba),!m(K[0])||!m(L[0]))return o.warn("Fx.hover failed",b,a),u.unhoverRaw(a,b)}var ea=1/0;for(N=0;N<$.length;N++)if((O=$[N])&&O[0]&&O[0].trace&&!0===O[0].trace.visible&&(P=O[0].trace,-1===["carpet","contourcarpet"].indexOf(P._module.name))){if(Q=x.getSubplot(P),R=s.indexOf(Q),S=J,V={cd:O,trace:P,xa:D[R],ya:E[R],index:!1,distance:Math.min(ea,X),color:t.defaultLine,name:P.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},y[Q]&&(V.subplot=y[Q]._subplot),W=Z.length,"array"===S){var fa=b[N];"pointNumber"in fa?(V.index=fa.pointNumber,S="closest"):(S="","xval"in fa&&(T=fa.xval,S="x"),"yval"in fa&&(U=fa.yval,S=S?"closest":"y"))}else T=K[R],U=L[R];if(0!==X)if(P._module&&P._module.hoverPoints){var ga=P._module.hoverPoints(V,T,U,S,y._hoverlayer);if(ga)for(var ha,ia=0;ia<ga.length;ia++)ha=ga[ia],m(ha.x0)&&m(ha.y0)&&Z.push(h(ha,J))}else o.log("Unrecognized trace type in hover:",P);if("closest"===J&&Z.length>W&&(Z.splice(0,W),ea=Z[0].distance),y._has("cartesian")&&0!==Y&&0===Z.length){V.distance=Y,V.index=!1;var ja=P._module.hoverPoints(V,T,U,"closest",y._hoverlayer);if(ja){var ka,la=ja.filter(function(a){return a.xa.showspikes});if(la.length){var ma=la[0];m(ma.x0)&&m(ma.y0)&&(ka=q(ma),(!_.vLinePoint||_.vLinePoint.distance>ka.distance)&&(_.vLinePoint=ka))}var na=ja.filter(function(a){return a.ya.showspikes});if(na.length){var oa=na[0];m(oa.x0)&&m(oa.y0)&&(ka=q(oa),(!_.hLinePoint||_.hLinePoint.distance>ka.distance)&&(_.hLinePoint=ka))}}}}var pa={fullLayout:y,container:y._hoverlayer,outerContainer:y._paperdiv,event:b},qa=a._spikepoints,ra={vLinePoint:_.vLinePoint,hLinePoint:_.hLinePoint};if(a._spikepoints=ra,y._has("cartesian")&&0!==Y&&0!==Z.length){var sa=Z.filter(function(a){return a.ya.showspikes}),ta=n(sa,Y);_.hLinePoint=q(ta);var ua=Z.filter(function(a){return a.xa.showspikes}),va=n(ua,Y);_.vLinePoint=q(va)}if(0===Z.length){var wa=u.unhoverRaw(a,b);return!y._has("cartesian")||null===_.hLinePoint&&null===_.vLinePoint||k(qa)&&i(_,pa),wa}y._has("cartesian")&&k(qa)&&i(_,pa),Z.sort(function(a,b){return a.distance-b.distance});var xa=a._hoverdata,ya=[];for(M=0;M<Z.length;M++){var za=Z[M];ya.push(x.makeEventData(za,za.trace,za.cd))}a._hoverdata=ya;var Aa="y"===J&&$.length>1,Ba=t.combine(y.plot_bgcolor||t.background,y.paper_bgcolor),Ca={hovermode:J,rotateLabels:Aa,bgColor:Ba,container:y._hoverlayer,outerContainer:y._paperdiv,commonLabelOpts:y.hoverlabel,hoverdistance:y.hoverdistance},Da=e(Z,Ca,a);if(f(Z,Aa?"xa":"ya",y),g(Da,Aa),b.target&&b.target.tagName){var Ea=w.getComponentMethod("annotations","hasClickToShow")(a,ya);r(l.select(b.target),Ea?"pointer":"")}b.target&&!d&&j(a,b,xa)&&(xa&&a.emit("plotly_unhover",{event:b,points:xa}),a.emit("plotly_hover",{event:b,points:a._hoverdata,xaxes:D,yaxes:E,xvals:K,yvals:L}))}function e(a,b,c){var d,e,f=b.hovermode,g=b.rotateLabels,h=b.bgColor,i=b.container,j=b.outerContainer,k=b.commonLabelOpts||{},m=b.fontFamily||y.HOVERFONT,n=b.fontSize||y.HOVERFONTSIZE,o=a[0],p=o.xa,r=o.ya,u="y"===f?"yLabel":"xLabel",v=o[u],w=(String(v)||"").split(" ")[0],x=j.node().getBoundingClientRect(),A=x.top,B=x.width,C=x.height,D=o.distance<=b.hoverdistance&&("x"===f||"y"===f);for(d=0;d<a.length;d++){e=a[d].hoverinfo||a[d].trace.hoverinfo;var G=Array.isArray(e)?e:e.split("+");if(-1===G.indexOf("all")&&-1===G.indexOf(f)){D=!1;break}}var H=i.selectAll("g.axistext").data(D?[0]:[]);H.enter().append("g").classed("axistext",!0),H.exit().remove(),H.each(function(){var b=l.select(this),d=b.selectAll("path").data([0]),e=b.selectAll("text").data([0]);d.enter().append("path").style({"stroke-width":"1px"}),d.style({fill:k.bgcolor||t.defaultLine,stroke:k.bordercolor||t.background}),e.enter().append("text").attr("data-notex",1),e.text(v).call(s.font,k.font.family||m,k.font.size||n,k.font.color||t.background).call(q.positionText,0,0).call(q.convertToTspans,c),b.attr("transform","");var g=e.node().getBoundingClientRect();if("x"===f){e.attr("text-anchor","middle").call(q.positionText,0,"top"===p.side?A-g.bottom-E-F:A-g.top+E+F);var h="top"===p.side?"-":"";d.attr("d","M0,0L"+E+","+h+E+"H"+(F+g.width/2)+"v"+h+(2*F+g.height)+"H-"+(F+g.width/2)+"V"+h+E+"H-"+E+"Z"),b.attr("transform","translate("+(p._offset+(o.x0+o.x1)/2)+","+(r._offset+("top"===p.side?0:r._length))+")")}else{e.attr("text-anchor","right"===r.side?"start":"end").call(q.positionText,("right"===r.side?1:-1)*(F+E),A-g.top-g.height/2);var i="right"===r.side?"":"-";d.attr("d","M0,0L"+i+E+","+E+"V"+(F+g.height/2)+"h"+i+(2*F+g.width)+"V-"+(F+g.height/2)+"H"+i+E+"V-"+E+"Z"),b.attr("transform","translate("+(p._offset+("right"===r.side?p._length:0))+","+(r._offset+(o.y0+o.y1)/2)+")")}a=a.filter(function(a){return void 0!==a.zLabelVal||(a[u]||"").split(" ")[0]===w})});var I=i.selectAll("g.hovertext").data(a,function(a){return[a.trace.index,a.index,a.x0,a.y0,a.name,a.attr,a.xa,a.ya||""].join(",")});return I.enter().append("g").classed("hovertext",!0).each(function(){var a=l.select(this);a.append("rect").call(t.fill,t.addOpacity(h,.8)),a.append("text").classed("name",!0),a.append("path").style("stroke-width","1px"),a.append("text").classed("nums",!0).call(s.font,m,n)}),I.exit().remove(),I.each(function(a){var b=l.select(this).attr("transform",""),d="",e="",i=t.opacity(a.color)?a.color:t.defaultLine,j=t.combine(i,h),k=a.borderColor||t.contrast(j);if(void 0!==a.nameOverride&&(a.name=a.nameOverride),a.name){d=q.plainText(a.name||"");var o=Math.round(a.nameLength);o>-1&&d.length>o&&(d=o>3?d.substr(0,o-3)+"...":d.substr(0,o))}void 0!==a.extraText&&(e+=a.extraText),void 0!==a.zLabel?(void 0!==a.xLabel&&(e+="x: "+a.xLabel+"<br>"),void 0!==a.yLabel&&(e+="y: "+a.yLabel+"<br>"),e+=(e?"z: ":"")+a.zLabel):D&&a[f+"Label"]===v?e=a[("x"===f?"y":"x")+"Label"]||"":void 0===a.xLabel?void 0!==a.yLabel&&(e=a.yLabel):e=void 0===a.yLabel?a.xLabel:"("+a.xLabel+", "+a.yLabel+")",a.text&&!Array.isArray(a.text)&&(e+=(e?"<br>":"")+a.text),""===e&&(""===d&&b.remove(),e=d);var p=b.select("text.nums").call(s.font,a.fontFamily||m,a.fontSize||n,a.fontColor||k).text(e).attr("data-notex",1).call(q.positionText,0,0).call(q.convertToTspans,c),r=b.select("text.name"),u=0;d&&d!==e?(r.call(s.font,a.fontFamily||m,a.fontSize||n,j).text(d).attr("data-notex",1).call(q.positionText,0,0).call(q.convertToTspans,c),u=r.node().getBoundingClientRect().width+2*F):(r.remove(),b.select("rect").remove()),b.select("path").style({fill:j,stroke:k});var w,x,y=p.node().getBoundingClientRect(),G=a.xa._offset+(a.x0+a.x1)/2,H=a.ya._offset+(a.y0+a.y1)/2,I=Math.abs(a.x1-a.x0),J=Math.abs(a.y1-a.y0),K=y.width+E+F+u;a.ty0=A-y.top,a.bx=y.width+2*F,a.by=y.height+2*F,a.anchor="start",a.txwidth=y.width,a.tx2width=u,a.offset=0,g?(a.pos=G,w=H+J/2+K<=C,x=H-J/2-K>=0,"top"!==a.idealAlign&&w||!x?w?(H+=J/2,a.anchor="start"):a.anchor="middle":(H-=J/2,a.anchor="end")):(a.pos=H,w=G+I/2+K<=B,x=G-I/2-K>=0,"left"!==a.idealAlign&&w||!x?w?(G+=I/2,a.anchor="start"):a.anchor="middle":(G-=I/2,a.anchor="end")),p.attr("text-anchor",a.anchor),u&&r.attr("text-anchor",a.anchor),b.attr("transform","translate("+G+","+H+")"+(g?"rotate("+z+")":""))}),I}function f(a,b,c){function d(a){var b=a[0],c=a[a.length-1];if(f=b.pmin-b.pos-b.dp+b.size,g=c.pos+c.dp+c.size-b.pmax,f>.01){for(i=a.length-1;i>=0;i--)a[i].dp+=f;e=!1}if(!(g<.01)){if(f<-.01){for(i=a.length-1;i>=0;i--)a[i].dp-=g;e=!1}
if(e){var d=0;for(h=0;h<a.length;h++)j=a[h],j.pos+j.dp+j.size>b.pmax&&d++;for(h=a.length-1;h>=0&&!(d<=0);h--)j=a[h],j.pos>b.pmax-1&&(j.del=!0,d--);for(h=0;h<a.length&&!(d<=0);h++)if(j=a[h],j.pos<b.pmin+1)for(j.del=!0,d--,g=2*j.size,i=a.length-1;i>=0;i--)a[i].dp-=g;for(h=a.length-1;h>=0&&!(d<=0);h--)j=a[h],j.pos+j.dp+j.size>b.pmax&&(j.del=!0,d--)}}}for(var e,f,g,h,i,j,k,l=0,m=a.map(function(a,d){var e=a[b];return[{i:d,dp:0,pos:a.pos,posref:a.posref,size:a.by*("x"===e._id.charAt(0)?B:1)/2,pmin:0,pmax:"x"===e._id.charAt(0)?c.width:c.height}]}).sort(function(a,b){return a[0].posref-b[0].posref});!e&&l<=a.length;){for(l++,e=!0,h=0;h<m.length-1;){var n=m[h],o=m[h+1],p=n[n.length-1],q=o[0];if((f=p.pos+p.dp+p.size-q.pos-q.dp+q.size)>.01&&p.pmin===q.pmin&&p.pmax===q.pmax){for(i=o.length-1;i>=0;i--)o[i].dp+=f;for(n.push.apply(n,o),m.splice(h+1,1),k=0,i=n.length-1;i>=0;i--)k+=n[i].dp;for(g=k/n.length,i=n.length-1;i>=0;i--)n[i].dp-=g;e=!1}else h++}m.forEach(d)}for(h=m.length-1;h>=0;h--){var r=m[h];for(i=r.length-1;i>=0;i--){var s=r[i],t=a[s.i];t.offset=s.dp,t.del=s.del}}}function g(a,b){a.each(function(a){var c=l.select(this);if(a.del)return void c.remove();var d="end"===a.anchor?-1:1,e=c.select("text.nums"),f={start:1,end:-1,middle:0}[a.anchor],g=f*(E+F),h=g+f*(a.txwidth+F),i=0,j=a.offset;"middle"===a.anchor&&(g-=a.tx2width/2,h-=a.tx2width/2),b&&(j*=-D,i=a.offset*C),c.select("path").attr("d","middle"===a.anchor?"M-"+a.bx/2+",-"+a.by/2+"h"+a.bx+"v"+a.by+"h-"+a.bx+"Z":"M0,0L"+(d*E+i)+","+(E+j)+"v"+(a.by/2-E)+"h"+d*a.bx+"v-"+a.by+"H"+(d*E+i)+"V"+(j-E)+"Z"),e.call(q.positionText,g+i,j+a.ty0-a.by/2+F),a.tx2width&&(c.select("text.name").call(q.positionText,h+f*F+i,j+a.ty0-a.by/2+F),c.select("rect").call(s.setRect,h+(f-1)*a.tx2width/2+i,j-a.by/2-1,a.tx2width,a.by+2))})}function h(a,b){function c(b,c,d){var e=h(c,d);e&&(a[b]=e)}var d=a.index,e=a.trace||{},f=a.cd[0],g=a.cd[d]||{},h=Array.isArray(d)?function(a,b){return o.castOption(f,d,a)||o.extractOption({},e,"",b)}:function(a,b){return o.extractOption(g,e,a,b)};if(c("hoverinfo","hi","hoverinfo"),c("color","hbg","hoverlabel.bgcolor"),c("borderColor","hbc","hoverlabel.bordercolor"),c("fontFamily","htf","hoverlabel.font.family"),c("fontSize","hts","hoverlabel.font.size"),c("fontColor","htc","hoverlabel.font.color"),c("nameLength","hnl","hoverlabel.namelength"),a.posref="y"===b?(a.x0+a.x1)/2:(a.y0+a.y1)/2,a.x0=o.constrain(a.x0,0,a.xa._length),a.x1=o.constrain(a.x1,0,a.xa._length),a.y0=o.constrain(a.y0,0,a.ya._length),a.y1=o.constrain(a.y1,0,a.ya._length),void 0!==a.xLabelVal&&(a.xLabel="xLabel"in a?a.xLabel:v.hoverLabelText(a.xa,a.xLabelVal),a.xVal=a.xa.c2d(a.xLabelVal)),void 0!==a.yLabelVal&&(a.yLabel="yLabel"in a?a.yLabel:v.hoverLabelText(a.ya,a.yLabelVal),a.yVal=a.ya.c2d(a.yLabelVal)),void 0!==a.zLabelVal&&void 0===a.zLabel&&(a.zLabel=String(a.zLabelVal)),!(isNaN(a.xerr)||"log"===a.xa.type&&a.xerr<=0)){var i=v.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;void 0!==a.xerrneg?a.xLabel+=" +"+i+" / -"+v.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text:a.xLabel+=" ± "+i,"x"===b&&(a.distance+=1)}if(!(isNaN(a.yerr)||"log"===a.ya.type&&a.yerr<=0)){var j=v.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text;void 0!==a.yerrneg?a.yLabel+=" +"+j+" / -"+v.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text:a.yLabel+=" ± "+j,"y"===b&&(a.distance+=1)}var k=a.hoverinfo||a.trace.hoverinfo;return"all"!==k&&(k=Array.isArray(k)?k:k.split("+"),-1===k.indexOf("x")&&(a.xLabel=void 0),-1===k.indexOf("y")&&(a.yLabel=void 0),-1===k.indexOf("z")&&(a.zLabel=void 0),-1===k.indexOf("text")&&(a.text=void 0),-1===k.indexOf("name")&&(a.name=void 0)),a}function i(a,b){var c,d,e=b.container,f=b.fullLayout,g=b.event,h=!!a.hLinePoint,i=!!a.vLinePoint;if(e.selectAll(".spikeline").remove(),i||h){var j=t.combine(f.plot_bgcolor,f.paper_bgcolor);if(h){var k,l,m=a.hLinePoint;c=m&&m.xa,d=m&&m.ya;"cursor"===d.spikesnap?(k=g.pointerX,l=g.pointerY):(k=c._offset+(m.x0+m.x1)/2,l=d._offset+(m.y0+m.y1)/2);var o,p,q=n.readability(m.color,j)<1.5?t.contrast(j):m.color,r=d.spikemode,u=d.spikethickness,v=d.spikecolor||q,w=d._boundingBox,x=(w.left+w.right)/2<k?w.right:w.left;-1===r.indexOf("toaxis")&&-1===r.indexOf("across")||(-1!==r.indexOf("toaxis")&&(o=x,p=k),-1!==r.indexOf("across")&&(o=d._counterSpan[0],p=d._counterSpan[1]),e.insert("line",":first-child").attr({x1:o,x2:p,y1:l,y2:l,"stroke-width":u,stroke:v,"stroke-dasharray":s.dashStyle(d.spikedash,u)}).classed("spikeline",!0).classed("crisp",!0),e.insert("line",":first-child").attr({x1:o,x2:p,y1:l,y2:l,"stroke-width":u+2,stroke:j}).classed("spikeline",!0).classed("crisp",!0)),-1!==r.indexOf("marker")&&e.insert("circle",":first-child").attr({cx:x+("right"!==d.side?u:-u),cy:l,r:u,fill:v}).classed("spikeline",!0)}if(i){var y,z,A=a.vLinePoint;c=A&&A.xa,d=A&&A.ya;"cursor"===c.spikesnap?(y=g.pointerX,z=g.pointerY):(y=c._offset+(A.x0+A.x1)/2,z=d._offset+(A.y0+A.y1)/2);var B,C,D=n.readability(A.color,j)<1.5?t.contrast(j):A.color,E=c.spikemode,F=c.spikethickness,G=c.spikecolor||D,H=c._boundingBox,I=(H.top+H.bottom)/2<z?H.bottom:H.top;-1===E.indexOf("toaxis")&&-1===E.indexOf("across")||(-1!==E.indexOf("toaxis")&&(B=I,C=z),-1!==E.indexOf("across")&&(B=c._counterSpan[0],C=c._counterSpan[1]),e.insert("line",":first-child").attr({x1:y,x2:y,y1:B,y2:C,"stroke-width":F,stroke:G,"stroke-dasharray":s.dashStyle(c.spikedash,F)}).classed("spikeline",!0).classed("crisp",!0),e.insert("line",":first-child").attr({x1:y,x2:y,y1:B,y2:C,"stroke-width":F+2,stroke:j}).classed("spikeline",!0).classed("crisp",!0)),-1!==E.indexOf("marker")&&e.insert("circle",":first-child").attr({cx:y,cy:I-("top"!==c.side?F:-F),r:F,fill:G}).classed("spikeline",!0)}}}function j(a,b,c){if(!c||c.length!==a._hoverdata.length)return!0;for(var d=c.length-1;d>=0;d--){var e=c[d],f=a._hoverdata[d];if(e.curveNumber!==f.curveNumber||String(e.pointNumber)!==String(f.pointNumber))return!0}return!1}function k(a,b){return!b||(b.vLinePoint!==a._spikepoints.vLinePoint||b.hLinePoint!==a._spikepoints.hLinePoint)}var l=a("d3"),m=a("fast-isnumeric"),n=a("tinycolor2"),o=a("../../lib"),p=a("../../lib/events"),q=a("../../lib/svg_text_utils"),r=a("../../lib/override_cursor"),s=a("../drawing"),t=a("../color"),u=a("../dragelement"),v=a("../../plots/cartesian/axes"),w=a("../../registry"),x=a("./helpers"),y=a("./constants"),z=y.YANGLE,A=Math.PI*z/180,B=1/Math.sin(A),C=Math.cos(A),D=Math.sin(A),E=y.HOVERARROWSIZE,F=y.HOVERTEXTPAD;c.hover=function(a,b,c,e){a=o.getGraphDiv(a),o.throttle(a._fullLayout._uid+y.HOVERID,y.HOVERMINTIME,function(){d(a,b,c,e)})},c.loneHover=function(a,b){var c={color:a.color||t.defaultLine,x0:a.x0||a.x||0,x1:a.x1||a.x||0,y0:a.y0||a.y||0,y1:a.y1||a.y||0,xLabel:a.xLabel,yLabel:a.yLabel,zLabel:a.zLabel,text:a.text,name:a.name,idealAlign:a.idealAlign,borderColor:a.borderColor,fontFamily:a.fontFamily,fontSize:a.fontSize,fontColor:a.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},d=l.select(b.container),f=b.outerContainer?l.select(b.outerContainer):d,h={hovermode:"closest",rotateLabels:!1,bgColor:b.bgColor||t.background,container:d,outerContainer:f,hoverdistance:y.MAXDIST},i=e([c],h,b.gd);return g(i,h.rotateLabels),i.node()}},{"../../lib":743,"../../lib/events":731,"../../lib/override_cursor":754,"../../lib/svg_text_utils":766,"../../plots/cartesian/axes":789,"../../registry":873,"../color":618,"../dragelement":640,"../drawing":643,"./constants":655,"./helpers":657,d3:128,"fast-isnumeric":140,tinycolor2:546}],659:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c,e){e=e||{},c("hoverlabel.bgcolor",e.bgcolor),c("hoverlabel.bordercolor",e.bordercolor),c("hoverlabel.namelength",e.namelength),d.coerceFont(c,"hoverlabel.font",e.font)}},{"../../lib":743}],660:[function(a,b,c){"use strict";function d(a){var b=h.isD3Selection(a)?a:g.select(a);b.selectAll("g.hovertext").remove(),b.selectAll(".spikeline").remove()}function e(a,b,c){return h.castOption(a,b,"hoverlabel."+c)}function f(a,b,c){function d(c){return h.coerceHoverinfo({hoverinfo:c},{_module:a._module},b)}return h.castOption(a,c,"hoverinfo",d)}var g=a("d3"),h=a("../../lib"),i=a("../dragelement"),j=a("./helpers"),k=a("./layout_attributes");b.exports={moduleType:"component",name:"fx",constants:a("./constants"),schema:{layout:k},attributes:a("./attributes"),layoutAttributes:k,supplyLayoutGlobalDefaults:a("./layout_global_defaults"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),getDistanceFunction:j.getDistanceFunction,getClosest:j.getClosest,inbox:j.inbox,quadrature:j.quadrature,appendArrayPointValue:j.appendArrayPointValue,castHoverOption:e,castHoverinfo:f,hover:a("./hover").hover,unhover:i.unhover,loneHover:a("./hover").loneHover,loneUnhover:d,click:a("./click")}},{"../../lib":743,"../dragelement":640,"./attributes":652,"./calc":653,"./click":654,"./constants":655,"./defaults":656,"./helpers":657,"./hover":658,"./layout_attributes":661,"./layout_defaults":662,"./layout_global_defaults":663,d3:128}],661:[function(a,b,c){"use strict";var d=a("./constants"),e=a("../../plots/font_attributes")({editType:"none"});e.family.dflt=d.HOVERFONT,e.size.dflt=d.HOVERFONTSIZE,b.exports={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:e,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"}}},{"../../plots/font_attributes":816,"./constants":655}],662:[function(a,b,c){"use strict";function d(a){for(var b=!0,c=0;c<a.length;c++){if("h"!==a[c].orientation){b=!1;break}}return b}var e=a("../../lib"),f=a("./layout_attributes");b.exports=function(a,b,c){function g(c,d){return e.coerce(a,b,f,c,d)}g("dragmode");var h;b._has("cartesian")?(b._isHoriz=d(c),h=b._isHoriz?"y":"x"):h="closest",g("hovermode",h)&&(g("hoverdistance"),g("spikedistance"));var i=b._has("mapbox"),j=b._has("geo"),k=b._basePlotModules.length;"zoom"===b.dragmode&&((i||j)&&1===k||i&&j&&2===k)&&(b.dragmode="pan")}},{"../../lib":743,"./layout_attributes":661}],663:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./hoverlabel_defaults"),f=a("./layout_attributes");b.exports=function(a,b){function c(c,e){return d.coerce(a,b,f,c,e)}e(a,b,c)}},{"../../lib":743,"./hoverlabel_defaults":659,"./layout_attributes":661}],664:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/constants");b.exports={_isLinkedToArray:"image",visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",d.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",d.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"}},{"../../plots/cartesian/constants":794}],665:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib/to_log_range");b.exports=function(a,b,c,f){b=b||{};var g="log"===c&&"linear"===b.type,h="linear"===c&&"log"===b.type;if(g||h)for(var i,j,k=a._fullLayout.images,l=b._id.charAt(0),m=0;m<k.length;m++)if(i=k[m],j="images["+m+"].",i[l+"ref"]===b._id){var n=i[l],o=i["size"+l],p=null,q=null;if(g){p=e(n,b.range);var r=o/Math.pow(10,p)/2;q=2*Math.log(r+Math.sqrt(1+r*r))/Math.LN10}else p=Math.pow(10,n),q=p*(Math.pow(10,o/2)-Math.pow(10,-o/2));d(p)?d(q)||(q=null):(p=null,q=null),f(j+l,p),f(j+"size"+l,q)}}},{"../../lib/to_log_range":768,"fast-isnumeric":140}],666:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return e.coerce(a,b,h,c,d)}if(!d("visible",!!d("source")))return b;d("layer"),d("xanchor"),d("yanchor"),d("sizex"),d("sizey"),d("sizing"),d("opacity");for(var g={_fullLayout:c},i=["x","y"],j=0;j<2;j++){var k=i[j],l=f.coerceRef(a,b,g,k,"paper");f.coercePosition(b,g,d,l,k,0)}return b}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("../../plots/array_container_defaults"),h=a("./attributes");b.exports=function(a,b){g(a,b,{name:"images",handleItemDefaults:d})}},{"../../lib":743,"../../plots/array_container_defaults":786,"../../plots/cartesian/axes":789,"./attributes":664}],667:[function(a,b,c){"use strict";var d=a("d3"),e=a("../drawing"),f=a("../../plots/cartesian/axes"),g=a("../../constants/xmlns_namespaces");b.exports=function(a){function b(b){var c=d.select(this);if(!this.img||this.img.src!==b.source){c.attr("xmlns",g.svg);var e=new Promise(function(a){function d(){c.remove(),a()}var e=new Image;this.img=e,e.setAttribute("crossOrigin","anonymous"),e.onerror=d,e.onload=function(){var b=document.createElement("canvas");b.width=this.width,b.height=this.height,b.getContext("2d").drawImage(this,0,0);var d=b.toDataURL("image/png");c.attr("xlink:href",d),a()},c.on("error",d),e.src=b.source}.bind(this));a._promises.push(e)}}function c(b){var c=d.select(this),g=f.getFromId(a,b.xref),h=f.getFromId(a,b.yref),i=j._size,k=g?Math.abs(g.l2p(b.sizex)-g.l2p(0)):b.sizex*i.w,l=h?Math.abs(h.l2p(b.sizey)-h.l2p(0)):b.sizey*i.h,m=k*p.x[b.xanchor].offset,n=l*p.y[b.yanchor].offset,o=p.x[b.xanchor].sizing+p.y[b.yanchor].sizing,q=(g?g.r2p(b.x)+g._offset:b.x*i.w+i.l)+m,r=(h?h.r2p(b.y)+h._offset:i.h-b.y*i.h+i.t)+n;switch(b.sizing){case"fill":o+=" slice";break;case"stretch":o="none"}c.attr({x:q,y:r,width:k,height:l,preserveAspectRatio:o,opacity:b.opacity});var s=g?g._id:"",t=h?h._id:"",u=s+t;c.call(e.setClipUrl,u?"clip"+j._uid+u:null)}var h,i,j=a._fullLayout,k=[],l={},m=[];for(i=0;i<j.images.length;i++){var n=j.images[i];if(n.visible)if("below"===n.layer&&"paper"!==n.xref&&"paper"!==n.yref){h=n.xref+n.yref;var o=j._plots[h];if(!o){m.push(n);continue}o.mainplot&&(h=o.mainplot.id),l[h]||(l[h]=[]),l[h].push(n)}else"above"===n.layer?k.push(n):m.push(n)}var p={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}},q=j._imageLowerLayer.selectAll("image").data(m),r=j._imageUpperLayer.selectAll("image").data(k);q.enter().append("image"),r.enter().append("image"),q.exit().remove(),r.exit().remove(),q.each(function(a){b.bind(this)(a),c.bind(this)(a)}),r.each(function(a){b.bind(this)(a),c.bind(this)(a)});var s=Object.keys(j._plots);for(i=0;i<s.length;i++){h=s[i];var t=j._plots[h];if(t.imagelayer){var u=t.imagelayer.selectAll("image").data(l[h]||[]);u.enter().append("image"),u.exit().remove(),u.each(function(a){b.bind(this)(a),c.bind(this)(a)})}}}},{"../../constants/xmlns_namespaces":723,"../../plots/cartesian/axes":789,"../drawing":643,d3:128}],668:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"images",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("images"),draw:a("./draw"),convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":799,"./attributes":664,"./convert_coords":665,"./defaults":666,"./draw":667}],669:[function(a,b,c){"use strict";c.isRightAnchor=function(a){return"right"===a.xanchor||"auto"===a.xanchor&&a.x>=2/3},c.isCenterAnchor=function(a){return"center"===a.xanchor||"auto"===a.xanchor&&a.x>1/3&&a.x<2/3},c.isBottomAnchor=function(a){return"bottom"===a.yanchor||"auto"===a.yanchor&&a.y<=1/3},c.isMiddleAnchor=function(a){return"middle"===a.yanchor||"auto"===a.yanchor&&a.y>1/3&&a.y<2/3}},{}],670:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes");b.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:d({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":816,"../color/attributes":617}],671:[function(a,b,c){"use strict";b.exports={scrollBarWidth:4,scrollBarHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],672:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("./attributes"),g=a("../../plots/layout_attributes"),h=a("./helpers");b.exports=function(a,b,c){function i(a,b){return e.coerce(n,o,f,a,b)}for(var j,k,l,m,n=a.legend||{},o=b.legend={},p=0,q="normal",r=0;r<c.length;r++){var s=c[r];h.legendGetsTrace(s)&&(p++,d.traceIs(s,"pie")&&p++),(d.traceIs(s,"bar")&&"stack"===b.barmode||-1!==["tonextx","tonexty"].indexOf(s.fill))&&(q=h.isGrouped({traceorder:q})?"grouped+reversed":"reversed"),void 0!==s.legendgroup&&""!==s.legendgroup&&(q=h.isReversed({traceorder:q})?"reversed+grouped":"grouped")}if(!1!==e.coerce(a,b,g,"showlegend",p>1)){if(i("bgcolor",b.paper_bgcolor),i("bordercolor"),i("borderwidth"),e.coerceFont(i,"font",b.font),i("orientation"),"h"===o.orientation){var t=a.xaxis;t&&t.rangeslider&&t.rangeslider.visible?(j=0,l="left",k=1.1,m="bottom"):(j=0,l="left",k=-.1,m="top")}i("traceorder",q),h.isGrouped(b.legend)&&i("tracegroupgap"),i("x",j),i("xanchor",l),i("y",k),i("yanchor",m),e.noneOrAll(n,o,["x","y"])}}},{"../../lib":743,"../../plots/layout_attributes":843,"../../registry":873,"./attributes":670,"./helpers":676}],673:[function(a,b,c){"use strict";function d(a,b){function c(c){r.convertToTspans(c,b,function(){f(a,b)})}var d=a.data()[0][0],e=b._fullLayout,g=d.trace,h=n.traceIs(g,"pie"),i=g.index,j=h?d.label:g.name,m=a.selectAll("text.legendtext").data([0]);m.enter().append("text").classed("legendtext",!0),m.attr("text-anchor","start").classed("user-select-none",!0).call(p.font,e.legend.font).text(j),b._context.edits.legendText&&!h?m.call(r.makeEditable,{gd:b}).call(c).on("edit",function(a){this.text(a).call(c);var e=a;this.text()||(a="    ");var f,g,h=d.trace._fullInput||{},j={};if(-1!==["ohlc","candlestick"].indexOf(h.type))f=d.trace.transforms,g=f[f.length-1].direction,j[g+".name"]=a;else if(n.hasTransform(h,"groupby")){var m=n.getTransformIndices(h,"groupby"),o=m[m.length-1],p=l.keyedContainer(h,"transforms["+o+"].styles","target","value.name");""===e?p.remove(d.trace._group):p.set(d.trace._group,a),j=p.constructUpdate()}else j.name=a;return k.restyle(b,j,i)}):m.call(c)}function e(a,b){var c,d=1,e=a.selectAll("rect").data([0]);e.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(q.fill,"rgba(0,0,0,0)"),e.on("mousedown",function(){c=(new Date).getTime(),c-b._legendMouseDownTime<A?d+=1:(d=1,b._legendMouseDownTime=c)}),e.on("mouseup",function(){if(!b._dragged&&!b._editing){var c=b._fullLayout.legend;(new Date).getTime()-b._legendMouseDownTime>A&&(d=Math.max(d-1,1)),1===d?c._clickTimeout=setTimeout(function(){s(a,b,d)},A):2===d&&(c._clickTimeout&&clearTimeout(c._clickTimeout),b._legendMouseDownTime=0,s(a,b,d))}})}function f(a,b){var c=a.data()[0][0];if(!c.trace.showlegend)return void a.remove();var d,e,f=a.select("g[class*=math-group]"),g=f.node(),h=b._fullLayout.legend,i=h.font.size*v;if(g){var j=p.bBox(g);d=j.height,e=j.width,p.setTranslate(f,0,d/4)}else{var k=a.select(".legendtext"),l=r.lineCount(k),m=k.node();d=i*l,e=m?p.bBox(m).width:0;var n=i*(.3+(1-l)/2);r.positionText(k,40,n)}d=Math.max(d,16)+3,c.height=d,c.width=e}function g(a,b,c){var d=a._fullLayout,e=d.legend,f=e.borderwidth,g=y.isGrouped(e),h=0;if(e.width=0,e.height=0,y.isVertical(e))g&&b.each(function(a,b){p.setTranslate(this,0,b*e.tracegroupgap)}),c.each(function(a){var b=a[0],c=b.height,d=b.width;p.setTranslate(this,f,5+f+e.height+c/2),e.height+=c,e.width=Math.max(e.width,d)}),e.width+=45+2*f,e.height+=10+2*f,g&&(e.height+=(e._lgroupsLength-1)*e.tracegroupgap),h=40;else if(g){for(var i=[e.width],k=b.data(),l=0,m=k.length;l<m;l++){var n=k[l].map(function(a){return a[0].width}),o=40+Math.max.apply(null,n);e.width+=e.tracegroupgap+o,i.push(e.width)}b.each(function(a,b){p.setTranslate(this,i[b],0)}),b.each(function(){var a=j.select(this),b=a.selectAll("g.traces"),c=0;b.each(function(a){var b=a[0],d=b.height;p.setTranslate(this,0,5+f+c+d/2),c+=d}),e.height=Math.max(e.height,c)}),e.height+=10+2*f,e.width+=2*f}else{var q,r=0,s=0,t=0,u=0,v=0,w=e.tracegroupgap||5;c.each(function(a){t=Math.max(40+a[0].width,t),v+=40+a[0].width+w}),q=d.width-(d.margin.r+d.margin.l)>f+v-w,c.each(function(a){var b=a[0],c=q?40+a[0].width:t;f+u+w+c>d.width-(d.margin.r+d.margin.l)&&(u=0,r+=s,e.height=e.height+s,s=0),p.setTranslate(this,f+u,5+f+b.height/2+r),e.width+=w+c,e.height=Math.max(e.height,b.height),u+=w+c,s=Math.max(b.height,s)}),e.width+=2*f,e.height+=10+2*f}e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),c.each(function(b){var c=b[0];j.select(this).select(".legendtoggle").call(p.setRect,0,-c.height/2,(a._context.edits.legendText?0:e.width)+h,c.height)})}function h(a){var b=a._fullLayout,c=b.legend,d="left";z.isRightAnchor(c)?d="right":z.isCenterAnchor(c)&&(d="center");var e="top";z.isBottomAnchor(c)?e="bottom":z.isMiddleAnchor(c)&&(e="middle"),m.autoMargin(a,"legend",{x:c.x,y:c.y,l:c.width*({right:1,center:.5}[d]||0),r:c.width*({left:1,center:.5}[d]||0),b:c.height*({top:1,middle:.5}[e]||0),t:c.height*({bottom:1,middle:.5}[e]||0)})}function i(a){var b=a._fullLayout,c=b.legend,d="left";z.isRightAnchor(c)?d="right":z.isCenterAnchor(c)&&(d="center"),m.autoMargin(a,"legend",{x:c.x,y:.5,l:c.width*({right:1,center:.5}[d]||0),r:c.width*({left:1,center:.5}[d]||0),b:0,t:0})}var j=a("d3"),k=a("../../plotly"),l=a("../../lib"),m=a("../../plots/plots"),n=a("../../registry"),o=a("../dragelement"),p=a("../drawing"),q=a("../color"),r=a("../../lib/svg_text_utils"),s=a("./handle_click"),t=a("./constants"),u=a("../../constants/interactions"),v=a("../../constants/alignment").LINE_SPACING,w=a("./get_legend_data"),x=a("./style"),y=a("./helpers"),z=a("./anchor_utils"),A=u.DBLCLICKDELAY;b.exports=function(a){function b(a,b){D.attr("data-scroll",b).call(p.setTranslate,0,b),E.call(p.setRect,N,a,t.scrollBarWidth,t.scrollBarHeight),B.select("rect").attr({y:r.borderwidth-b})}var c=a._fullLayout,f="legend"+c._uid;if(c._infolayer&&a.calcdata){a._legendMouseDownTime||(a._legendMouseDownTime=0);var r=c.legend,u=c.showlegend&&w(a.calcdata,r),v=c.hiddenlabels||[];if(!c.showlegend||!u.length)return c._infolayer.selectAll(".legend").remove(),c._topdefs.select("#"+f).remove(),void m.autoMargin(a,"legend");var y=c._infolayer.selectAll("g.legend").data([0]);y.enter().append("g").attr({class:"legend","pointer-events":"all"});var B=c._topdefs.selectAll("#"+f).data([0]);B.enter().append("clipPath").attr("id",f).append("rect");var C=y.selectAll("rect.bg").data([0]);C.enter().append("rect").attr({class:"bg","shape-rendering":"crispEdges"}),C.call(q.stroke,r.bordercolor),C.call(q.fill,r.bgcolor),C.style("stroke-width",r.borderwidth+"px");var D=y.selectAll("g.scrollbox").data([0]);D.enter().append("g").attr("class","scrollbox");var E=y.selectAll("rect.scrollbar").data([0]);E.enter().append("rect").attr({class:"scrollbar",rx:20,ry:2,width:0,height:0}).call(q.fill,"#808BA4");var F=D.selectAll("g.groups").data(u);F.enter().append("g").attr("class","groups"),F.exit().remove();var G=F.selectAll("g.traces").data(l.identity);G.enter().append("g").attr("class","traces"),G.exit().remove(),G.call(x,a).style("opacity",function(a){var b=a[0].trace;return n.traceIs(b,"pie")?-1!==v.indexOf(a[0].label)?.5:1:"legendonly"===b.visible?.5:1}).each(function(){j.select(this).call(d,a).call(e,a)});var H=0!==y.enter().size();H&&(g(a,F,G),h(a));var I=c.width,J=c.height;g(a,F,G),r.height>J?i(a):h(a);var K=c._size,L=K.l+K.w*r.x,M=K.t+K.h*(1-r.y);z.isRightAnchor(r)?L-=r.width:z.isCenterAnchor(r)&&(L-=r.width/2),z.isBottomAnchor(r)?M-=r.height:z.isMiddleAnchor(r)&&(M-=r.height/2);var N=r.width,O=K.w;N>O?(L=K.l,N=O):(L+N>I&&(L=I-N),L<0&&(L=0),N=Math.min(I-L,r.width));var P=r.height,Q=K.h;P>Q?(M=K.t,P=Q):(M+P>J&&(M=J-P),M<0&&(M=0),P=Math.min(J-M,r.height)),p.setTranslate(y,L,M);var R,S,T=P-t.scrollBarHeight-2*t.scrollBarMargin,U=r.height-P;if(r.height<=P||a._context.staticPlot)C.attr({width:N-r.borderwidth,height:P-r.borderwidth,x:r.borderwidth/2,y:r.borderwidth/2}),p.setTranslate(D,0,0),B.select("rect").attr({width:N-2*r.borderwidth,height:P-2*r.borderwidth,x:r.borderwidth,y:r.borderwidth}),D.call(p.setClipUrl,f);else{R=t.scrollBarMargin,S=D.attr("data-scroll")||0,C.attr({width:N-2*r.borderwidth+t.scrollBarWidth+t.scrollBarMargin,height:P-r.borderwidth,x:r.borderwidth/2,y:r.borderwidth/2}),B.select("rect").attr({width:N-2*r.borderwidth+t.scrollBarWidth+t.scrollBarMargin,height:P-2*r.borderwidth,x:r.borderwidth,y:r.borderwidth-S}),D.call(p.setClipUrl,f),H&&b(R,S),y.on("wheel",null),y.on("wheel",function(){S=l.constrain(D.attr("data-scroll")-j.event.deltaY/T*U,-U,0),R=t.scrollBarMargin-S/U*T,b(R,S),0!==S&&S!==-U&&j.event.preventDefault()}),E.on(".drag",null),D.on(".drag",null);var V=j.behavior.drag().on("drag",function(){R=l.constrain(j.event.y-t.scrollBarHeight/2,t.scrollBarMargin,t.scrollBarMargin+T),S=-(R-t.scrollBarMargin)/T*U,b(R,S)});E.call(V),D.call(V)}if(a._context.edits.legendPosition){var W,X,Y,Z;y.classed("cursor-move",!0),o.init({element:y.node(),gd:a,prepFn:function(){var a=p.getTranslate(y);Y=a.x,Z=a.y},moveFn:function(a,b){var c=Y+a,d=Z+b;p.setTranslate(y,c,d),W=o.align(c,0,K.l,K.l+K.w,r.xanchor),X=o.align(d,0,K.t+K.h,K.t,r.yanchor)},doneFn:function(){void 0!==W&&void 0!==X&&k.relayout(a,{"legend.x":W,"legend.y":X})},clickFn:function(b,d){var e=c._infolayer.selectAll("g.traces").filter(function(){var a=this.getBoundingClientRect();return d.clientX>=a.left&&d.clientX<=a.right&&d.clientY>=a.top&&d.clientY<=a.bottom});e.size()>0&&(1===b?y._clickTimeout=setTimeout(function(){s(e,a,b)},A):2===b&&(y._clickTimeout&&clearTimeout(y._clickTimeout),s(e,a,b)))}})}}}},{"../../constants/alignment":716,"../../constants/interactions":720,"../../lib":743,"../../lib/svg_text_utils":766,"../../plotly":784,"../../plots/plots":852,"../../registry":873,"../color":618,"../dragelement":640,"../drawing":643,"./anchor_utils":669,"./constants":671,"./get_legend_data":674,"./handle_click":675,"./helpers":676,"./style":678,d3:128}],674:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("./helpers");b.exports=function(a,b){function c(a,c){if(""!==a&&e.isGrouped(b))-1===i.indexOf(a)?(i.push(a),j=!0,h[a]=[[c]]):h[a].push([c]);else{var d="~~i"+l;i.push(d),h[d]=[[c]],l++}}var f,g,h={},i=[],j=!1,k={},l=0;for(f=0;f<a.length;f++){var m=a[f],n=m[0],o=n.trace,p=o.legendgroup;if(e.legendGetsTrace(o)&&o.showlegend)if(d.traceIs(o,"pie"))for(k[p]||(k[p]={}),g=0;g<m.length;g++){var q=m[g].label;k[p][q]||(c(p,{label:q,color:m[g].color,i:m[g].i,trace:o}),k[p][q]=!0)}else c(p,n)}if(!i.length)return[];var r,s,t=i.length;if(j&&e.isGrouped(b))for(s=new Array(t),f=0;f<t;f++)r=h[i[f]],s[f]=e.isReversed(b)?r.reverse():r;else{for(s=[new Array(t)],f=0;f<t;f++)r=h[i[f]][0],s[0][e.isReversed(b)?t-f-1:f]=r;t=1}return b._lgroupsLength=t,s}},{"../../registry":873,"./helpers":676}],675:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../lib"),f=a("../../registry"),g=!0;b.exports=function(a,b,c){function h(a,b,c){var d=v.indexOf(a),e=u[b];return e||(e=u[b]=[]),-1===v.indexOf(a)&&(v.push(a),d=v.length-1),e[d]=c,d}function i(a,b){var c=a._fullInput;if(f.hasTransform(c,"groupby")){var d=w[c.index];if(!d){var g=f.getTransformIndices(c,"groupby"),i=g[g.length-1];d=e.keyedContainer(c,"transforms["+i+"].styles","target","value.visible"),w[c.index]=d}var j=d.get(a._group);void 0===j&&(j=!0),!1!==j&&d.set(a._group,b),x[c.index]=h(c.index,"visible",!1!==c.visible)}else{var k=!1!==c.visible&&b;h(c.index,"visible",k)}}if(!b._dragged&&!b._editing){var j,k,l,m,n,o,p=b._fullLayout.hiddenlabels?b._fullLayout.hiddenlabels.slice():[],q=a.data()[0][0],r=b._fullData,s=q.trace,t=s.legendgroup,u={},v=[],w=[],x=[];if(1===c&&g&&b.data&&b._context.showTips?(e.notifier(e._(b,"Double-click on legend to isolate one trace"),"long"),g=!1):g=!1,f.traceIs(s,"pie")){var y=q.label,z=p.indexOf(y);1===c?-1===z?p.push(y):p.splice(z,1):2===c&&(p=[],b.calcdata[0].forEach(function(a){y!==a.label&&p.push(a.label)}),b._fullLayout.hiddenlabels&&b._fullLayout.hiddenlabels.length===p.length&&-1===z&&(p=[])),d.relayout(b,"hiddenlabels",p)}else{var A,B=t&&t.length,C=[];if(B)for(j=0;j<r.length;j++)A=r[j],A.visible&&A.legendgroup===t&&C.push(j);if(1===c){var D;switch(s.visible){case!0:D="legendonly";break;case!1:D=!1;break;case"legendonly":D=!0}if(B)for(j=0;j<r.length;j++)!1!==r[j].visible&&r[j].legendgroup===t&&i(r[j],D);else i(s,D)}else if(2===c){var E,F,G,H=!0;for(j=0;j<r.length;j++)if(!(E=r[j]===s)&&!(F=B&&r[j].legendgroup===t)&&!0===r[j].visible&&!f.traceIs(r[j],"notLegendIsolatable")){H=!1;break}for(j=0;j<r.length;j++)if(!1!==r[j].visible&&!f.traceIs(r[j],"notLegendIsolatable"))switch(s.visible){case"legendonly":i(r[j],!0);break;case!0:G=!!H||"legendonly",E=r[j]===s,F=E||B&&r[j].legendgroup===t,i(r[j],!!F||G)}}for(j=0;j<w.length;j++)if(l=w[j]){var I=l.constructUpdate(),J=Object.keys(I);for(k=0;k<J.length;k++)m=J[k],o=u[m]=u[m]||[],o[x[j]]=I[m]}for(n=Object.keys(u),j=0;j<n.length;j++)for(m=n[j],k=0;k<v.length;k++)u[m].hasOwnProperty(k)||(u[m][k]=void 0);d.restyle(b,u,v)}}}},{"../../lib":743,"../../plotly":784,"../../registry":873}],676:[function(a,b,c){"use strict";var d=a("../../registry");c.legendGetsTrace=function(a){return a.visible&&d.traceIs(a,"showLegend")},c.isGrouped=function(a){return-1!==(a.traceorder||"").indexOf("grouped")},c.isVertical=function(a){return"h"!==a.orientation},c.isReversed=function(a){return-1!==(a.traceorder||"").indexOf("reversed")}},{"../../registry":873}],677:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"legend",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw"),style:a("./style")}},{"./attributes":670,"./defaults":672,"./draw":673,"./style":678}],678:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../registry"),f=a("../../lib"),g=a("../drawing"),h=a("../color"),i=a("../../traces/scatter/subtypes"),j=a("../../traces/pie/style_one");b.exports=function(a,b){function c(a){var b=a[0].trace,c=b.visible&&b.fill&&"none"!==b.fill,e=i.hasLines(b);b&&b._module&&"contourcarpet"===b._module.name&&(e=b.contours.showlines,c="fill"===b.contours.coloring);var f=d.select(this).select(".legendfill").selectAll("path").data(c?[a]:[]);f.enter().append("path").classed("js-fill",!0),f.exit().remove(),f.attr("d","M5,0h30v6h-30z").call(g.fillGroupStyle);var h=d.select(this).select(".legendlines").selectAll("path").data(e?[a]:[]);h.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),h.exit().remove(),h.call(g.lineGroupStyle)}function k(a){function c(a,b,c){var d=f.nestedProperty(l,a).get(),e=Array.isArray(d)&&b?b(d):d;if(c){if(e<c[0])return c[0];if(e>c[1])return c[1]}return e}function e(a){return a[0]}
var h,j,k=a[0],l=k.trace,m=i.hasMarkers(l),n=i.hasText(l),o=i.hasLines(l);if(m||n||o){var p={},q={};m&&(p.mc=c("marker.color",e),p.mo=c("marker.opacity",f.mean,[.2,1]),p.ms=c("marker.size",f.mean,[2,16]),p.mlc=c("marker.line.color",e),p.mlw=c("marker.line.width",f.mean,[0,5]),q.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),o&&(q.line={width:c("line.width",e,[0,10])}),n&&(p.tx="Aa",p.tp=c("textposition",e),p.ts=10,p.tc=c("textfont.color",e),p.tf=c("textfont.family",e)),h=[f.minExtend(k,p)],j=f.minExtend(l,q)}var r=d.select(this).select("g.legendpoints"),s=r.selectAll("path.scatterpts").data(m?h:[]);s.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),s.exit().remove(),s.call(g.pointStyle,j,b),m&&(h[0].mrc=3);var t=r.selectAll("g.pointtext").data(n?h:[]);t.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),t.exit().remove(),t.selectAll("text").call(g.textPointStyle,j,b)}function l(a){var b=a[0].trace,c=b.marker||{},f=c.line||{},g=d.select(this).select("g.legendpoints").selectAll("path.legendbar").data(e.traceIs(b,"bar")?[a]:[]);g.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),g.exit().remove(),g.each(function(a){var b=d.select(this),e=a[0],g=(e.mlw+1||f.width+1)-1;b.style("stroke-width",g+"px").call(h.fill,e.mc||c.color),g&&b.call(h.stroke,e.mlc||f.color)})}function m(a){var b=a[0].trace,c=d.select(this).select("g.legendpoints").selectAll("path.legendbox").data(e.traceIs(b,"box-violin")&&b.visible?[a]:[]);c.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.each(function(){var a=b.line.width,c=d.select(this);c.style("stroke-width",a+"px").call(h.fill,b.fillcolor),a&&c.call(h.stroke,b.line.color)})}function n(a){var b=a[0].trace,c=d.select(this).select("g.legendpoints").selectAll("path.legendpie").data(e.traceIs(b,"pie")&&b.visible?[a]:[]);c.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.size()&&c.call(j,a[0],b)}a.each(function(a){var b=d.select(this),c=b.selectAll("g.layers").data([0]);c.enter().append("g").classed("layers",!0),c.style("opacity",a[0].trace.opacity),c.selectAll("g.legendfill").data([a]).enter().append("g").classed("legendfill",!0),c.selectAll("g.legendlines").data([a]).enter().append("g").classed("legendlines",!0);var e=c.selectAll("g.legendsymbols").data([a]);e.enter().append("g").classed("legendsymbols",!0),e.selectAll("g.legendpoints").data([a]).enter().append("g").classed("legendpoints",!0)}).each(l).each(m).each(n).each(c).each(k)}},{"../../lib":743,"../../registry":873,"../../traces/pie/style_one":1052,"../../traces/scatter/subtypes":1088,"../color":618,"../drawing":643,d3:128}],679:[function(a,b,c){"use strict";function d(a,b){var c,d,e=b.currentTarget,f=e.getAttribute("data-attr"),g=e.getAttribute("data-val")||!0,h=a._fullLayout,i={},j=n.list(a,null,!0),k="on";if("zoom"===f){var m,o="in"===g?.5:2,p=(1+o)/2,q=(1-o)/2;for(d=0;d<j.length;d++)if(c=j[d],!c.fixedrange)if(m=c._name,"auto"===g)i[m+".autorange"]=!0;else if("reset"===g){if(void 0===c._rangeInitial)i[m+".autorange"]=!0;else{var r=c._rangeInitial.slice();i[m+".range[0]"]=r[0],i[m+".range[1]"]=r[1]}void 0!==c._showSpikeInitial&&(i[m+".showspikes"]=c._showSpikeInitial,"on"!==k||c._showSpikeInitial||(k="off"))}else{var s=[c.r2l(c.range[0]),c.r2l(c.range[1])],t=[p*s[0]+q*s[1],p*s[1]+q*s[0]];i[m+".range[0]"]=c.l2r(t[0]),i[m+".range[1]"]=c.l2r(t[1])}h._cartesianSpikesEnabled=k}else{if("hovermode"!==f||"x"!==g&&"y"!==g){if("hovermode"===f&&"closest"===g){for(d=0;d<j.length;d++)c=j[d],"on"!==k||c.showspikes||(k="off");h._cartesianSpikesEnabled=k}}else g=h._isHoriz?"y":"x",e.setAttribute("data-val",g);i[f]=g}l.relayout(a,i)}function e(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout._subplots.gl3d,g={},h=d.split("."),i=0;i<f.length;i++)g[f[i]+"."+h[1]]=e;l.relayout(a,g)}function f(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=a._fullLayout,f=e._subplots.gl3d,g={},h=0;h<f.length;h++){var i=f[h],j=i+".camera",k=e[i]._scene;"resetDefault"===d?g[j]=null:"resetLastSave"===d&&(g[j]=o.extendDeep({},k.cameraInitial))}l.relayout(a,g)}function g(a,b){var c=b.currentTarget,d=c._previousVal||!1,e=a.layout,f=a._fullLayout,g=f._subplots.gl3d,h=["xaxis","yaxis","zaxis"],i=["showspikes","spikesides","spikethickness","spikecolor"],j={},k={},m={};if(d)m=o.extendDeep(e,d),c._previousVal=null;else{m={"allaxes.showspikes":!1};for(var n=0;n<g.length;n++){var p=g[n],q=f[p],r=j[p]={};r.hovermode=q.hovermode,m[p+".hovermode"]=!1;for(var s=0;s<3;s++){var t=h[s];k=r[t]={};for(var u=0;u<i.length;u++){var v=i[u];k[v]=q[t][v]}}}c._previousVal=o.extendDeep({},j)}l.relayout(a,m)}function h(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout,g=f._subplots.geo,h=0;h<g.length;h++){var i=g[h],j=f[i];if("zoom"===d){var m=j.projection.scale,n="in"===e?2*m:.5*m;l.relayout(a,i+".projection.scale",n)}else"reset"===d&&k(a,"geo")}}function i(a){var b,c=a._fullLayout;b=c._has("cartesian")?c._isHoriz?"y":"x":"closest";var d=!a._fullLayout.hovermode&&b;l.relayout(a,"hovermode",d)}function j(a){for(var b,c,d=a._fullLayout,e=n.list(a,null,!0),f={},g=0;g<e.length;g++)b=e[g],c=b._name,f[c+".showspikes"]="on"===d._cartesianSpikesEnabled||b._showSpikeInitial;return f}function k(a,b){for(var c=a._fullLayout,d=c._subplots[b],e={},f=0;f<d.length;f++)for(var g=d[f],h=c[g]._subplot,i=h.viewInitial,j=Object.keys(i),k=0;k<j.length;k++){var m=j[k];e[g+"."+m]=i[m]}l.relayout(a,e)}var l=a("../../plotly"),m=a("../../plots/plots"),n=a("../../plots/cartesian/axis_ids"),o=a("../../lib"),p=a("../../snapshot/download"),q=a("../../../build/ploticon"),r=o._,s=b.exports={};s.toImage={name:"toImage",title:function(a){return r(a,"Download plot as a png")},icon:q.camera,click:function(a){var b="png";o.notifier(r(a,"Taking snapshot - this may take a few seconds"),"long"),o.isIE()&&(o.notifier(r(a,"IE only supports svg.  Changing format to svg."),"long"),b="svg"),p(a,{format:b}).then(function(b){o.notifier(r(a,"Snapshot succeeded")+" - "+b,"long")}).catch(function(){o.notifier(r(a,"Sorry, there was a problem downloading your snapshot!"),"long")})}},s.sendDataToCloud={name:"sendDataToCloud",title:function(a){return r(a,"Edit in Chart Studio")},icon:q.disk,click:function(a){m.sendDataToCloud(a)}},s.zoom2d={name:"zoom2d",title:function(a){return r(a,"Zoom")},attr:"dragmode",val:"zoom",icon:q.zoombox,click:d},s.pan2d={name:"pan2d",title:function(a){return r(a,"Pan")},attr:"dragmode",val:"pan",icon:q.pan,click:d},s.select2d={name:"select2d",title:function(a){return r(a,"Box Select")},attr:"dragmode",val:"select",icon:q.selectbox,click:d},s.lasso2d={name:"lasso2d",title:function(a){return r(a,"Lasso Select")},attr:"dragmode",val:"lasso",icon:q.lasso,click:d},s.zoomIn2d={name:"zoomIn2d",title:function(a){return r(a,"Zoom in")},attr:"zoom",val:"in",icon:q.zoom_plus,click:d},s.zoomOut2d={name:"zoomOut2d",title:function(a){return r(a,"Zoom out")},attr:"zoom",val:"out",icon:q.zoom_minus,click:d},s.autoScale2d={name:"autoScale2d",title:function(a){return r(a,"Autoscale")},attr:"zoom",val:"auto",icon:q.autoscale,click:d},s.resetScale2d={name:"resetScale2d",title:function(a){return r(a,"Reset axes")},attr:"zoom",val:"reset",icon:q.home,click:d},s.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(a){return r(a,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:q.tooltip_basic,gravity:"ne",click:d},s.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(a){return r(a,"Compare data on hover")},attr:"hovermode",val:function(a){return a._fullLayout._isHoriz?"y":"x"},icon:q.tooltip_compare,gravity:"ne",click:d},s.zoom3d={name:"zoom3d",title:function(a){return r(a,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:q.zoombox,click:e},s.pan3d={name:"pan3d",title:function(a){return r(a,"Pan")},attr:"scene.dragmode",val:"pan",icon:q.pan,click:e},s.orbitRotation={name:"orbitRotation",title:function(a){return r(a,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:q["3d_rotate"],click:e},s.tableRotation={name:"tableRotation",title:function(a){return r(a,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:q["z-axis"],click:e},s.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(a){return r(a,"Reset camera to default")},attr:"resetDefault",icon:q.home,click:f},s.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(a){return r(a,"Reset camera to last save")},attr:"resetLastSave",icon:q.movie,click:f},s.hoverClosest3d={name:"hoverClosest3d",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:g},s.zoomInGeo={name:"zoomInGeo",title:function(a){return r(a,"Zoom in")},attr:"zoom",val:"in",icon:q.zoom_plus,click:h},s.zoomOutGeo={name:"zoomOutGeo",title:function(a){return r(a,"Zoom out")},attr:"zoom",val:"out",icon:q.zoom_minus,click:h},s.resetGeo={name:"resetGeo",title:function(a){return r(a,"Reset")},attr:"reset",val:null,icon:q.autoscale,click:h},s.hoverClosestGeo={name:"hoverClosestGeo",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:i},s.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:i},s.hoverClosestPie={name:"hoverClosestPie",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:q.tooltip_basic,gravity:"ne",click:i},s.toggleHover={name:"toggleHover",title:function(a){return r(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:q.tooltip_basic,gravity:"ne",click:function(a,b){i(a),g(a,b)}},s.resetViews={name:"resetViews",title:function(a){return r(a,"Reset views")},icon:q.home,click:function(a,b){var c=b.currentTarget;c.setAttribute("data-attr","zoom"),c.setAttribute("data-val","reset"),d(a,b),c.setAttribute("data-attr","resetLastSave"),f(a,b),k(a,"geo"),k(a,"mapbox")}},s.toggleSpikelines={name:"toggleSpikelines",title:function(a){return r(a,"Toggle Spike Lines")},icon:q.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(a){var b=a._fullLayout;b._cartesianSpikesEnabled="on"===b._cartesianSpikesEnabled?"off":"on";var c=j(a);l.relayout(a,c)}},s.resetViewMapbox={name:"resetViewMapbox",title:function(a){return r(a,"Reset view")},attr:"reset",icon:q.home,click:function(a){k(a,"mapbox")}}},{"../../../build/ploticon":2,"../../lib":743,"../../plotly":784,"../../plots/cartesian/axis_ids":792,"../../plots/plots":852,"../../snapshot/download":875}],680:[function(a,b,c){"use strict";c.manage=a("./manage")},{"./manage":681}],681:[function(a,b,c){"use strict";function d(a,b,c){function d(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];-1===b.indexOf(e)&&c.push(m[e])}s.push(c)}var h=a._fullLayout,i=a._fullData,j=h._has("cartesian"),k=h._has("gl3d"),l=h._has("geo"),n=h._has("pie"),o=h._has("gl2d"),p=h._has("ternary"),q=h._has("mapbox"),r=h._has("polar"),s=[];if(d(["toImage","sendDataToCloud"]),(j||o||n||p)+l+k>1)return d(["resetViews","toggleHover"]),g(s,c);k&&(d(["zoom3d","pan3d","orbitRotation","tableRotation"]),d(["resetCameraDefault3d","resetCameraLastSave3d"]),d(["hoverClosest3d"]));var t=e(h),u=[];return((j||o)&&!t||p)&&(u=["zoom2d","pan2d"]),(q||l)&&(u=["pan2d"]),r&&(u=["zoom2d"]),f(i)&&(u.push("select2d"),u.push("lasso2d")),u.length&&d(u),!j&&!o||t||p||d(["zoomIn2d","zoomOut2d","autoScale2d","resetScale2d"]),j&&n?d(["toggleHover"]):o?d(["hoverClosestGl2d"]):j?d(["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]):n?d(["hoverClosestPie"]):q?d(["resetViewMapbox","toggleHover"]):l&&(d(["zoomInGeo","zoomOutGeo","resetGeo"]),d(["hoverClosestGeo"])),g(s,c)}function e(a){for(var b=i.list({_fullLayout:a},null,!0),c=0;c<b.length;c++)if(!b[c].fixedrange)return!1;return!0}function f(a){for(var b=!1,c=0;c<a.length&&!b;c++){var d=a[c];d._module&&d._module.selectPoints&&(k.traceIs(d,"scatter-like")?(j.hasMarkers(d)||j.hasText(d))&&(b=!0):k.traceIs(d,"box-violin")?"all"!==d.boxpoints&&"all"!==d.points||(b=!0):b=!0)}return b}function g(a,b){if(b.length)if(Array.isArray(b[0]))for(var c=0;c<b.length;c++)a.push(b[c]);else a.push(b);return a}function h(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.length;d++){var e=c[d];if("string"==typeof e){if(void 0===m[e])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));a[b][d]=m[e]}}return a}var i=a("../../plots/cartesian/axis_ids"),j=a("../../traces/scatter/subtypes"),k=a("../../registry"),l=a("./modebar"),m=a("./buttons");b.exports=function(a){var b=a._fullLayout,c=a._context,e=b._modeBar;if(!c.displayModeBar)return void(e&&(e.destroy(),delete b._modeBar));if(!Array.isArray(c.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(c.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var f,g=c.modeBarButtons;f=Array.isArray(g)&&g.length?h(g):d(a,c.modeBarButtonsToRemove,c.modeBarButtonsToAdd),e?e.update(a,f):b._modeBar=l(a,f)}},{"../../plots/cartesian/axis_ids":792,"../../registry":873,"../../traces/scatter/subtypes":1088,"./buttons":679,"./modebar":682}],682:[function(a,b,c){"use strict";function d(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}function e(a,b){var c=a._fullLayout,e=new d({graphInfo:a,container:c._paperdiv.node(),buttons:b});return c._privateplot&&f.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),e}var f=a("d3"),g=a("../../lib"),h=a("../../../build/ploticon"),i=d.prototype;i.update=function(a,b){this.graphInfo=a;var c=this.graphInfo._context;"hover"===c.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var d=!this.hasButtons(b),e=this.hasLogo!==c.displaylogo;(d||e)&&(this.removeAllButtons(),this.updateButtons(b),c.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},i.updateButtons=function(a){var b=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(a){var c=b.createGroup();a.forEach(function(a){var d=a.name;if(!d)throw new Error("must provide button 'name' in button config");if(-1!==b.buttonsNames.indexOf(d))throw new Error("button name '"+d+"' is taken");b.buttonsNames.push(d);var e=b.createButton(a);b.buttonElements.push(e),c.appendChild(e)}),b.element.appendChild(c)})},i.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},i.createButton=function(a){var b=this,c=document.createElement("a");c.setAttribute("rel","tooltip"),c.className="modebar-btn";var d=a.title;void 0===d?d=a.name:"function"==typeof d&&(d=d(this.graphInfo)),(d||0===d)&&c.setAttribute("data-title",d),void 0!==a.attr&&c.setAttribute("data-attr",a.attr);var e=a.val;if(void 0!==e&&("function"==typeof e&&(e=e(this.graphInfo)),c.setAttribute("data-val",e)),"function"!=typeof a.click)throw new Error("must provide button 'click' function in button config");return c.addEventListener("click",function(c){a.click(b.graphInfo,c),b.updateActiveButton(c.currentTarget)}),c.setAttribute("data-toggle",a.toggle||!1),a.toggle&&f.select(c).classed("active",!0),c.appendChild(this.createIcon(a.icon||h.question,a.name)),c.setAttribute("data-gravity",a.gravity||"n"),c},i.createIcon=function(a,b){var c=a.ascent-a.descent,d="http://www.w3.org/2000/svg",e=document.createElementNS(d,"svg"),f=document.createElementNS(d,"path");e.setAttribute("height","1em"),e.setAttribute("width",a.width/c+"em"),e.setAttribute("viewBox",[0,0,a.width,c].join(" "));var g="toggleSpikelines"===b?"matrix(1.5 0 0 -1.5 0 "+a.ascent+")":"matrix(1 0 0 -1 0 "+a.ascent+")";return f.setAttribute("d",a.path),f.setAttribute("transform",g),e.appendChild(f),e},i.updateActiveButton=function(a){var b=this.graphInfo._fullLayout,c=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var d=a.getAttribute("data-val")||!0,e=a.getAttribute("data-attr"),h="true"===a.getAttribute("data-toggle"),i=f.select(a);if(h)e===c&&i.classed("active",!i.classed("active"));else{var j=null===e?e:g.nestedProperty(b,e).get();i.classed("active",j===d)}})},i.hasButtons=function(a){var b=this.buttons;if(!b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;d++)if(a[c][d].name!==b[c][d].name)return!1}return!0},i.getLogo=function(){var a=this.createGroup(),b=document.createElement("a");return b.href="https://plot.ly/",b.target="_blank",b.setAttribute("data-title",g._(this.graphInfo,"Produced with Plotly")),b.className="modebar-btn plotlyjsicon modebar-btn--logo",b.appendChild(this.createIcon(h.plotlylogo)),a.appendChild(b),a},i.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},i.destroy=function(){g.removeElement(this.container.querySelector(".modebar"))},b.exports=e},{"../../../build/ploticon":2,"../../lib":743,d3:128}],683:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat,g=a("./button_attributes");g=f(g,{_isLinkedToArray:"button"}),b.exports={visible:{valType:"boolean",editType:"plot"},buttons:g,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:d({editType:"plot"}),bgcolor:{valType:"color",dflt:e.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../lib/extend":732,"../../plots/font_attributes":816,"../color/attributes":617,"./button_attributes":684}],684:[function(a,b,c){"use strict";b.exports={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"}},{}],685:[function(a,b,c){"use strict";b.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],686:[function(a,b,c){"use strict";function d(a,b,c){function d(a,b){return f.coerce(e,g,i,a,b)}for(var e,g,h=a.buttons||[],j=b.buttons=[],k=0;k<h.length;k++)if(e=h[k],g={},f.isPlainObject(e)){var l=d("step");"all"!==l&&(!c||"gregorian"===c||"month"!==l&&"year"!==l?d("stepmode"):g.stepmode="backward",d("count")),d("label"),g._index=k,j.push(g)}return j}function e(a,b,c){for(var d=c.filter(function(c){return b[c].anchor===a._id}),e=0,f=0;f<d.length;f++){var g=b[d[f]].domain;g&&(e=Math.max(g[1],e))}return[a.domain[0],e+j.yPad]}var f=a("../../lib"),g=a("../color"),h=a("./attributes"),i=a("./button_attributes"),j=a("./constants");b.exports=function(a,b,c,i,k){function l(a,b){return f.coerce(m,n,h,a,b)}var m=a.rangeselector||{},n=b.rangeselector={};if(l("visible",d(m,n,k).length>0)){var o=e(b,c,i);l("x",o[0]),l("y",o[1]),f.noneOrAll(a,b,["x","y"]),l("xanchor"),l("yanchor"),f.coerceFont(l,"font",c.font);var p=l("bgcolor");l("activecolor",g.contrast(p,j.lightAmount,j.darkAmount)),l("bordercolor"),l("borderwidth")}}},{"../../lib":743,"../color":618,"./attributes":683,"./button_attributes":684,"./constants":685}],687:[function(a,b,c){"use strict";function d(a){for(var b=r.list(a,"x",!0),c=[],d=0;d<b.length;d++){var e=b[d];e.rangeselector&&e.rangeselector.visible&&c.push(e)}return c}function e(a){return a._id}function f(a,b,c){if("all"===b.step)return!0===a.autorange;var d=Object.keys(c);return a.range[0]===c[d[0]]&&a.range[1]===c[d[1]]}function g(a,b,c){var d=a.selectAll("rect").data([0]);d.enter().append("rect").classed("selector-rect",!0),d.attr("shape-rendering","crispEdges"),d.attr({rx:u.rx,ry:u.ry}),d.call(o.stroke,b.bordercolor).call(o.fill,h(b,c)).style("stroke-width",b.borderwidth+"px")}function h(a,b){return b.isActive||b.isHovered?a.activecolor:a.bgcolor}function i(a,b,c,d){function e(a){q.convertToTspans(a,d)}var f=a.selectAll("text").data([0]);f.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),f.attr("text-anchor","middle"),f.call(p.font,b.font).text(j(c)).call(e)}function j(a){return a.label?a.label:"all"===a.step?"all":a.count+a.step.charAt(0)}function k(a,b,c,d){c.width=0,c.height=0;var e=c.borderwidth;b.each(function(){var a=l.select(this),b=a.select(".selector-text"),d=c.font.size*t,e=Math.max(d*q.lineCount(b),16)+3;c.height=Math.max(c.height,e)}),b.each(function(){var a=l.select(this),b=a.select(".selector-rect"),d=a.select(".selector-text"),f=d.node()&&p.bBox(d.node()).width,g=c.font.size*t,h=q.lineCount(d),i=Math.max(f+10,u.minButtonWidth);a.attr("transform","translate("+(e+c.width)+","+e+")"),b.attr({x:0,y:0,width:i,height:c.height}),q.positionText(d,i/2,c.height/2-(h-1)*g/2+3),c.width+=i+5}),b.selectAll("rect").attr("height",c.height);var f=a._fullLayout._size;c.lx=f.l+f.w*c.x,c.ly=f.t+f.h*(1-c.y);var g="left";s.isRightAnchor(c)&&(c.lx-=c.width,g="right"),s.isCenterAnchor(c)&&(c.lx-=c.width/2,g="center");var h="top";s.isBottomAnchor(c)&&(c.ly-=c.height,h="bottom"),s.isMiddleAnchor(c)&&(c.ly-=c.height/2,h="middle"),c.width=Math.ceil(c.width),c.height=Math.ceil(c.height),c.lx=Math.round(c.lx),c.ly=Math.round(c.ly),n.autoMargin(a,d+"-range-selector",{x:c.x,y:c.y,l:c.width*({right:1,center:.5}[g]||0),r:c.width*({left:1,center:.5}[g]||0),b:c.height*({top:1,middle:.5}[h]||0),t:c.height*({bottom:1,middle:.5}[h]||0)})}var l=a("d3"),m=a("../../plotly"),n=a("../../plots/plots"),o=a("../color"),p=a("../drawing"),q=a("../../lib/svg_text_utils"),r=a("../../plots/cartesian/axis_ids"),s=a("../legend/anchor_utils"),t=a("../../constants/alignment").LINE_SPACING,u=a("./constants"),v=a("./get_update_object");b.exports=function(a){var b=a._fullLayout,c=b._infolayer.selectAll(".rangeselector").data(d(a),e);c.enter().append("g").classed("rangeselector",!0),c.exit().remove(),c.style({cursor:"pointer","pointer-events":"all"}),c.each(function(b){var c=l.select(this),d=b,e=d.rangeselector,h=c.selectAll("g.button").data(e.buttons);h.enter().append("g").classed("button",!0),h.exit().remove(),h.each(function(b){var c=l.select(this),h=v(d,b);b.isActive=f(d,b,h),c.call(g,e,b),c.call(i,e,b,a),c.on("click",function(){a._dragged||m.relayout(a,h)}),c.on("mouseover",function(){b.isHovered=!0,c.call(g,e,b)}),c.on("mouseout",function(){b.isHovered=!1,c.call(g,e,b)})}),k(a,h,e,d._name),c.attr("transform","translate("+e.lx+","+e.ly+")")})}},{"../../constants/alignment":716,"../../lib/svg_text_utils":766,"../../plotly":784,"../../plots/cartesian/axis_ids":792,"../../plots/plots":852,"../color":618,"../drawing":643,"../legend/anchor_utils":669,"./constants":685,"./get_update_object":688,d3:128}],688:[function(a,b,c){"use strict";function d(a,b){var c,d=a.range,f=new Date(a.r2l(d[1])),g=b.step,h=b.count;switch(b.stepmode){case"backward":c=a.l2r(+e.time[g].utc.offset(f,-h));break;case"todate":var i=e.time[g].utc.offset(f,-h);c=a.l2r(+e.time[g].utc.ceil(i))}return[c,d[1]]}var e=a("d3");b.exports=function(a,b){var c=a._name,e={};if("all"===b.step)e[c+".autorange"]=!0;else{var f=d(a,b);e[c+".range[0]"]=f[0],e[c+".range[1]"]=f[1]}return e}},{d3:128}],689:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":683,"./defaults":686,"./draw":687}],690:[function(a,b,c){"use strict";var d=a("../color/attributes");b.exports={bgcolor:{valType:"color",dflt:d.background,editType:"calc"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"calc"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"calc"},autorange:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":617}],691:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("./constants");b.exports=function(a){for(var b=d.list(a,"x",!0),c=0;c<b.length;c++){var f=b[c],g=f[e.name];g&&g.visible&&g.autorange&&f._min.length&&f._max.length&&(g._input.autorange=!0,g._input.range=g.range=d.getAutoRange(f))}}},{"../../plots/cartesian/axes":789,"./constants":692}],692:[function(a,b,c){"use strict";b.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskColor:"rgba(0,0,0,0.4)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],693:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c){function f(a,b){return d.coerce(g,i,e,a,b)}if(a[c].rangeslider){d.isPlainObject(a[c].rangeslider)||(a[c].rangeslider={});var g=a[c].rangeslider,h=b[c],i=h.rangeslider={};if(f("visible")){if(f("bgcolor",b.plot_bgcolor),f("bordercolor"),f("borderwidth"),f("thickness"),f("autorange",!h.isValidRange(g.range)),f("range"),i.range){var j=i.range,k=h.range;j[0]=h.l2r(Math.min(h.r2l(j[0]),h.r2l(k[0]))),j[1]=h.l2r(Math.max(h.r2l(j[1]),h.r2l(k[1])))}h.cleanRange("rangeslider.range"),i._input=g}}}},{"../../lib":743,"./attributes":690}],694:[function(a,b,c){"use strict";function d(a){var b=w.list({_fullLayout:a},"x",!0),c=z.name,d=[];if(a._has("gl2d"))return d;for(var e=0;e<b.length;e++){var f=b[e];f[c]&&f[c].visible&&d.push(f)}return d}function e(a,b,c,d){var e=a.select("rect."+z.slideBoxClassName).node(),g=a.select("rect."+z.grabAreaMinClassName).node(),h=a.select("rect."+z.grabAreaMaxClassName).node();a.on("mousedown",function(){function i(i){var j,k,s,t=+i.clientX-m;switch(l){case e:s="ew-resize",j=o+t,k=q+t;break;case g:s="col-resize",j=o+t,k=q;break;case h:s="col-resize",j=o,k=q+t;break;default:s="ew-resize",j=n,k=n+t}if(k<j){var u=k;k=j,j=u}d._pixelMin=j,d._pixelMax=k,y(p.select(r),s),f(a,b,c,d)}function j(){r.removeEventListener("mousemove",i),r.removeEventListener("mouseup",j),s.removeElement(r)}var k=p.event,l=k.target,m=k.clientX,n=m-a.node().getBoundingClientRect().left,o=d.d2p(c._rl[0]),q=d.d2p(c._rl[1]),r=x.coverSlip();r.addEventListener("mousemove",i),r.addEventListener("mouseup",j)})}function f(a,b,c,d){function e(a){return c.l2r(s.constrain(a,d._rl[0],d._rl[1]))}var f=e(d.p2d(d._pixelMin)),g=e(d.p2d(d._pixelMax));window.requestAnimationFrame(function(){q.relayout(b,c._name+".range",[f,g])})}function g(a,b,c,d){function e(a){return s.constrain(a,0,d._width)}function f(a){return s.constrain(a,-g,d._width+g)}var g=z.handleWidth/2,h=e(d.d2p(c._rl[0])),i=e(d.d2p(c._rl[1]));a.select("rect."+z.slideBoxClassName).attr("x",h).attr("width",i-h),a.select("rect."+z.maskMinClassName).attr("width",h),a.select("rect."+z.maskMaxClassName).attr("x",i).attr("width",d._width-i);var j=Math.round(f(h-g))-.5,k=Math.round(f(i-g))+.5;a.select("g."+z.grabberMinClassName).attr("transform","translate("+j+",0.5)"),a.select("g."+z.grabberMaxClassName).attr("transform","translate("+k+",0.5)")}function h(a,b,c,d){var e=a.selectAll("rect."+z.bgClassName).data([0]);e.enter().append("rect").classed(z.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var f=d.borderwidth%2==0?d.borderwidth:d.borderwidth-1,g=-d._offsetShift,h=t.crispRound(b,d.borderwidth);e.attr({width:d._width+f,height:d._height+f,transform:"translate("+g+","+g+")",fill:d.bgcolor,stroke:d.bordercolor,"stroke-width":h})}function i(a,b,c,d){var e=b._fullLayout,f=e._topdefs.selectAll("#"+d._clipId).data([0]);f.enter().append("clipPath").attr("id",d._clipId).append("rect").attr({x:0,y:0}),f.select("rect").attr({width:d._width,height:d._height})}function j(a,b,c,d){var e=w.getSubplots(b,c),f=b.calcdata,g=a.selectAll("g."+z.rangePlotClassName).data(e,s.identity);g.enter().append("g").attr("class",function(a){return z.rangePlotClassName+" "+a}).call(t.setClipUrl,d._clipId),g.order(),g.exit().remove();var h;g.each(function(a,e){var g=p.select(this),i=0===e,j=w.getFromId(b,a,"y"),l=j._name,m={data:[],layout:{xaxis:{type:c.type,domain:[0,1],range:d.range.slice(),calendar:c.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:b._context};m.layout[l]={type:j.type,domain:[0,1],range:j.range.slice(),calendar:j.calendar},r.supplyDefaults(m);var n=m._fullLayout.xaxis,o=m._fullLayout[l],q={id:a,plotgroup:g,xaxis:n,yaxis:o};i?h=q:(q.mainplot="xy",q.mainplotinfo=h),v.rangePlot(b,q,k(f,a))})}function k(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f.xaxis+f.yaxis===b&&c.push(e)}return c}function l(a,b,c,d){var e=a.selectAll("rect."+z.maskMinClassName).data([0]);e.enter().append("rect").classed(z.maskMinClassName,!0).attr({x:0,y:0}).attr("shape-rendering","crispEdges"),e.attr("height",d._height).call(u.fill,z.maskColor);var f=a.selectAll("rect."+z.maskMaxClassName).data([0]);f.enter().append("rect").classed(z.maskMaxClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),f.attr("height",d._height).call(u.fill,z.maskColor)}function m(a,b,c,d){if(!b._context.staticPlot){var e=a.selectAll("rect."+z.slideBoxClassName).data([0]);e.enter().append("rect").classed(z.slideBoxClassName,!0).attr("y",0).attr("cursor",z.slideBoxCursor).attr("shape-rendering","crispEdges"),e.attr({height:d._height,fill:z.slideBoxFill})}}function n(a,b,c,d){var e=a.selectAll("g."+z.grabberMinClassName).data([0]);e.enter().append("g").classed(z.grabberMinClassName,!0);var f=a.selectAll("g."+z.grabberMaxClassName).data([0]);f.enter().append("g").classed(z.grabberMaxClassName,!0);var g={x:0,width:z.handleWidth,rx:z.handleRadius,fill:u.background,stroke:u.defaultLine,"stroke-width":z.handleStrokeWidth,"shape-rendering":"crispEdges"},h={y:Math.round(d._height/4),height:Math.round(d._height/2)},i=e.selectAll("rect."+z.handleMinClassName).data([0]);i.enter().append("rect").classed(z.handleMinClassName,!0).attr(g),i.attr(h);var j=f.selectAll("rect."+z.handleMaxClassName).data([0]);if(j.enter().append("rect").classed(z.handleMaxClassName,!0).attr(g),j.attr(h),!b._context.staticPlot){var k={width:z.grabAreaWidth,x:0,y:0,fill:z.grabAreaFill,cursor:z.grabAreaCursor},l=e.selectAll("rect."+z.grabAreaMinClassName).data([0]);l.enter().append("rect").classed(z.grabAreaMinClassName,!0).attr(k),l.attr("height",d._height);var m=f.selectAll("rect."+z.grabAreaMaxClassName).data([0]);m.enter().append("rect").classed(z.grabAreaMaxClassName,!0).attr(k),m.attr("height",d._height)}}function o(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d]
;-1!==e.indexOf(z.name)&&r.autoMargin(a,e)}}var p=a("d3"),q=a("../../plotly"),r=a("../../plots/plots"),s=a("../../lib"),t=a("../drawing"),u=a("../color"),v=a("../../plots/cartesian"),w=a("../../plots/cartesian/axes"),x=a("../dragelement"),y=a("../../lib/setcursor"),z=a("./constants");b.exports=function(a){function b(a){return a._name}var c=a._fullLayout,f=d(c),k=c._infolayer.selectAll("g."+z.containerClassName).data(f,b);k.enter().append("g").classed(z.containerClassName,!0).attr("pointer-events","all"),k.exit().each(function(a){var b=p.select(this),d=a[z.name];b.remove(),c._topdefs.select("#"+d._clipId).remove()}),k.exit().size()&&o(a),0!==f.length&&k.each(function(b){var d=p.select(this),f=b[z.name],k=c[w.id2name(b.anchor)],o=c.margin,q=c._size,s=b.domain,t=k.domain,u=(b._boundingBox||{}).height||0;f._id=z.name+b._id,f._clipId=f._id+"-"+c._uid,f._width=q.w*(s[1]-s[0]),f._height=(c.height-o.b-o.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2);var v=Math.round(o.l+q.w*s[0]),x=Math.round(o.t+q.h*(1-t[0])+u+f._offsetShift+z.extraPad);d.attr("transform","translate("+v+","+x+")");var y=b.r2l(f.range[0]),A=b.r2l(f.range[1]),B=A-y;f.p2d=function(a){return a/f._width*B+y},f.d2p=function(a){return(a-y)/B*f._width},f._rl=[y,A],d.call(h,a,b,f).call(i,a,b,f).call(j,a,b,f).call(l,a,b,f).call(m,a,b,f).call(n,a,b,f),e(d,a,b,f),g(d,a,b,f),r.autoMargin(a,f._id,{x:s[0],y:t[0],l:0,r:0,t:0,b:f._height+o.b+u,pad:z.extraPad+2*f._offsetShift})})}},{"../../lib":743,"../../lib/setcursor":762,"../../plotly":784,"../../plots/cartesian":800,"../../plots/cartesian/axes":789,"../../plots/plots":852,"../color":618,"../dragelement":640,"../drawing":643,"./constants":692,d3:128}],695:[function(a,b,c){"use strict";b.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),calcAutorange:a("./calc_autorange"),draw:a("./draw")}},{"./attributes":690,"./calc_autorange":691,"./defaults":693,"./draw":694}],696:[function(a,b,c){"use strict";var d=a("../annotations/attributes"),e=a("../../traces/scatter/attributes").line,f=a("../drawing/attributes").dash,g=a("../../lib/extend").extendFlat;b.exports={_isLinkedToArray:"shape",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:g({},d.xref,{}),x0:{valType:"any",editType:"calcIfAutorange"},x1:{valType:"any",editType:"calcIfAutorange"},yref:g({},d.yref,{}),y0:{valType:"any",editType:"calcIfAutorange"},y1:{valType:"any",editType:"calcIfAutorange"},path:{valType:"string",editType:"calcIfAutorange"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:g({},e.color,{editType:"arraydraw"}),width:g({},e.width,{editType:"calcIfAutorange"}),dash:g({},f,{editType:"arraydraw"}),editType:"calcIfAutorange"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"}},{"../../lib/extend":732,"../../traces/scatter/attributes":1066,"../annotations/attributes":601,"../drawing/attributes":642}],697:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f="category"===a.type?a.r2c:a.d2c;if(void 0!==b)return[f(b),f(c)];if(d){var i,j,k,l,m,n=1/0,o=-1/0,p=d.match(g.segmentRE);for("date"===a.type&&(f=h.decodeDate(f)),i=0;i<p.length;i++)j=p[i],void 0!==(k=e[j.charAt(0)].drawn)&&(!(l=p[i].substr(1).match(g.paramRE))||l.length<k||(m=f(l[k]),m<n&&(n=m),m>o&&(o=m)));return o>=n?[n,o]:void 0}}var e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("./constants"),h=a("./helpers");b.exports=function(a){var b=a._fullLayout,c=e.filterVisible(b.shapes);if(c.length&&a._fullData.length)for(var h=0;h<c.length;h++){var i,j,k=c[h],l=k.line.width/2;"paper"!==k.xref&&(i=f.getFromId(a,k.xref),(j=d(i,k.x0,k.x1,k.path,g.paramIsX))&&f.expand(i,j,{ppad:l})),"paper"!==k.yref&&(i=f.getFromId(a,k.yref),(j=d(i,k.y0,k.y1,k.path,g.paramIsY))&&f.expand(i,j,{ppad:l}))}}},{"../../lib":743,"../../plots/cartesian/axes":789,"./constants":698,"./helpers":701}],698:[function(a,b,c){"use strict";b.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],699:[function(a,b,c){"use strict";var d=a("../../plots/array_container_defaults"),e=a("./shape_defaults");b.exports=function(a,b){d(a,b,{name:"shapes",handleItemDefaults:e})}},{"../../plots/array_container_defaults":786,"./shape_defaults":703}],700:[function(a,b,c){"use strict";function d(a){var b=a._fullLayout;b._shapeUpperLayer.selectAll("path").remove(),b._shapeLowerLayer.selectAll("path").remove(),b._shapeSubplotLayers.selectAll("path").remove();for(var c=0;c<b.shapes.length;c++)b.shapes[c].visible&&e(a,c)}function e(a,b){function c(c){var d={"data-index":b,"fill-rule":"evenodd",d:g(a,e)},h=e.line.width?e.line.color:"rgba(0,0,0,0)",i=c.append("path").attr(d).style("opacity",e.opacity).call(m.stroke,h).call(m.fill,e.fillcolor).call(n.dashLine,e.line.dash,e.line.width),j=(e.xref+e.yref).replace(/paper/g,"");i.call(n.setClipUrl,j?"clip"+a._fullLayout._uid+j:null),a._context.edits.shapePosition&&f(a,i,e,b)}a._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+b+'"]').remove();var d=(a.layout.shapes||[])[b],e=a._fullLayout.shapes[b];if(d&&!1!==e.visible)if("below"!==e.layer)c(a._fullLayout._shapeUpperLayer);else if("paper"===e.xref||"paper"===e.yref)c(a._fullLayout._shapeLowerLayer);else{var h=a._fullLayout._plots[e.xref+e.yref];if(h){var i=h.mainplotinfo||h;c(i.shapelayer)}else c(a._fullLayout._shapeLowerLayer)}}function f(a,b,c,d){function e(a){var c=X.right-X.left,d=X.bottom-X.top,e=a.clientX-X.left,f=a.clientY-X.top,g=c>U&&d>V&&!a.shiftKey?o.getCursor(e/c,1-f/d):"move";p(b,g),T=g.split("-")[0]}function f(b){N=l.getFromId(a,c.xref),O=l.getFromId(a,c.yref),P=r.getDataToPixel(a,N),Q=r.getDataToPixel(a,O,!0),R=r.getPixelToData(a,N),S=r.getPixelToData(a,O,!0);var f="shapes["+d+"]";"path"===c.type?(L=c.path,M=f+".path"):(q=P(c.x0),s=Q(c.y0),t=P(c.x1),u=Q(c.y1),v=f+".x0",w=f+".y0",x=f+".x1",y=f+".y1"),q<t?(B=q,F=f+".x0",J="x0",C=t,G=f+".x1",K="x1"):(B=t,F=f+".x1",J="x1",C=q,G=f+".x0",K="x0"),s<u?(z=s,D=f+".y0",H="y0",A=u,E=f+".y1",I="y1"):(z=u,D=f+".y1",H="y1",A=s,E=f+".y0",I="y0"),n={},e(b),W.moveFn="move"===T?k:m}function h(){p(b),j.relayout(a,n)}function k(d,e){if("path"===c.type){var f=function(a){return R(P(a)+d)};N&&"date"===N.type&&(f=r.encodeDate(f));var h=function(a){return S(Q(a)+e)};O&&"date"===O.type&&(h=r.encodeDate(h)),c.path=i(L,f,h),n[M]=c.path}else n[v]=c.x0=R(q+d),n[w]=c.y0=S(s+e),n[x]=c.x1=R(t+d),n[y]=c.y1=S(u+e);b.attr("d",g(a,c))}function m(d,e){if("path"===c.type){var f=function(a){return R(P(a)+d)};N&&"date"===N.type&&(f=r.encodeDate(f));var h=function(a){return S(Q(a)+e)};O&&"date"===O.type&&(h=r.encodeDate(h)),c.path=i(L,f,h),n[M]=c.path}else{var j=~T.indexOf("n")?z+e:z,k=~T.indexOf("s")?A+e:A,l=~T.indexOf("w")?B+d:B,m=~T.indexOf("e")?C+d:C;k-j>V&&(n[D]=c[H]=S(j),n[E]=c[I]=S(k)),m-l>U&&(n[F]=c[J]=R(l),n[G]=c[K]=R(m))}b.attr("d",g(a,c))}var n,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U=10,V=10,W={element:b.node(),gd:a,prepFn:f,doneFn:h},X=W.element.getBoundingClientRect();o.init(W),b.node().onmousemove=e}function g(a,b){var c,d,e,f,g=b.type,i=l.getFromId(a,b.xref),j=l.getFromId(a,b.yref),k=a._fullLayout._size;if(i?(c=r.shapePositionToRange(i),d=function(a){return i._offset+i.r2p(c(a,!0))}):d=function(a){return k.l+k.w*a},j?(e=r.shapePositionToRange(j),f=function(a){return j._offset+j.r2p(e(a,!0))}):f=function(a){return k.t+k.h*(1-a)},"path"===g)return i&&"date"===i.type&&(d=r.decodeDate(d)),j&&"date"===j.type&&(f=r.decodeDate(f)),h(b.path,d,f);var m=d(b.x0),n=d(b.x1),o=f(b.y0),p=f(b.y1);if("line"===g)return"M"+m+","+o+"L"+n+","+p;if("rect"===g)return"M"+m+","+o+"H"+n+"V"+p+"H"+m+"Z";var q=(m+n)/2,s=(o+p)/2,t=Math.abs(q-m),u=Math.abs(s-o),v="A"+t+","+u,w=q+t+","+s;return"M"+w+v+" 0 1,1 "+q+","+(s-u)+v+" 0 0,1 "+w+"Z"}function h(a,b,c){return a.replace(q.segmentRE,function(a){var d=0,e=a.charAt(0),f=q.paramIsX[e],g=q.paramIsY[e],h=q.numParams[e],i=a.substr(1).replace(q.paramRE,function(a){return f[d]?a=b(a):g[d]&&(a=c(a)),d++,d>h&&(a="X"),a});return d>h&&(i=i.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+a)),e+i})}function i(a,b,c){return a.replace(q.segmentRE,function(a){var d=0,e=a.charAt(0),f=q.paramIsX[e],g=q.paramIsY[e],h=q.numParams[e];return e+a.substr(1).replace(q.paramRE,function(a){return d>=h?a:(f[d]?a=b(a):g[d]&&(a=c(a)),d++,a)})})}var j=a("../../plotly"),k=a("../../lib"),l=a("../../plots/cartesian/axes"),m=a("../color"),n=a("../drawing"),o=a("../dragelement"),p=a("../../lib/setcursor"),q=a("./constants"),r=a("./helpers");b.exports={draw:d,drawOne:e}},{"../../lib":743,"../../lib/setcursor":762,"../../plotly":784,"../../plots/cartesian/axes":789,"../color":618,"../dragelement":640,"../drawing":643,"./constants":698,"./helpers":701}],701:[function(a,b,c){"use strict";c.rangeToShapePosition=function(a){return"log"===a.type?a.r2d:function(a){return a}},c.shapePositionToRange=function(a){return"log"===a.type?a.d2r:function(a){return a}},c.decodeDate=function(a){return function(b){return b.replace&&(b=b.replace("_"," ")),a(b)}},c.encodeDate=function(a){return function(b){return a(b).replace(" ","_")}},c.getDataToPixel=function(a,b,d){var e,f=a._fullLayout._size;if(b){var g=c.shapePositionToRange(b);e=function(a){return b._offset+b.r2p(g(a,!0))},"date"===b.type&&(e=c.decodeDate(e))}else e=d?function(a){return f.t+f.h*(1-a)}:function(a){return f.l+f.w*a};return e},c.getPixelToData=function(a,b,d){var e,f=a._fullLayout._size;if(b){var g=c.rangeToShapePosition(b);e=function(a){return g(b.p2r(a-b._offset))}}else e=d?function(a){return 1-(a-f.t)/f.h}:function(a){return(a-f.l)/f.w};return e}},{}],702:[function(a,b,c){"use strict";var d=a("./draw");b.exports={moduleType:"component",name:"shapes",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("shapes"),calcAutorange:a("./calc_autorange"),draw:d.draw,drawOne:d.drawOne}},{"../../plots/cartesian/include_components":799,"./attributes":696,"./calc_autorange":697,"./defaults":699,"./draw":700}],703:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("./attributes"),g=a("./helpers");b.exports=function(a,b,c,h,i){function j(c,e){return d.coerce(a,b,f,c,e)}if(h=h||{},i=i||{},!j("visible",!i.itemIsNotPlainObject))return b;j("layer"),j("opacity"),j("fillcolor"),j("line.color"),j("line.width"),j("line.dash");for(var k=a.path?"path":"rect",l=j("type",k),m=["x","y"],n=0;n<2;n++){var o=m[n],p={_fullLayout:c},q=e.coerceRef(a,b,p,o,"","paper");if("path"!==l){var r,s,t;"paper"!==q?(r=e.getFromId(p,q),t=g.rangeToShapePosition(r),s=g.shapePositionToRange(r)):s=t=d.identity;var u=o+"0",v=o+"1",w=a[u],x=a[v];a[u]=s(a[u],!0),a[v]=s(a[v],!0),e.coercePosition(b,p,j,q,u,.25),e.coercePosition(b,p,j,q,v,.75),b[u]=t(b[u]),b[v]=t(b[v]),a[u]=w,a[v]=x}}return"path"===l?j("path"):d.noneOrAll(a,b,["x0","x1","y0","y1"]),b}},{"../../lib":743,"../../plots/cartesian/axes":789,"./attributes":696,"./helpers":701}],704:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../../plots/pad_attributes"),f=a("../../lib/extend").extendDeepAll,g=a("../../plot_api/edit_types").overrideAll,h=a("../../plots/animation_attributes"),i=a("./constants"),j={_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}};b.exports=g({_isLinkedToArray:"slider",visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:j,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:f({},e,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:d({})},font:d({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}},"arraydraw","from-root")},{"../../lib/extend":732,"../../plot_api/edit_types":773,"../../plots/animation_attributes":785,"../../plots/font_attributes":816,"../../plots/pad_attributes":851,"./constants":705}],705:[function(a,b,c){"use strict";b.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],706:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return f.coerce(a,b,h,c,d)}d("visible",e(a,b).length>0)&&(d("active"),d("x"),d("y"),f.noneOrAll(a,b,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),f.coerceFont(d,"font",c.font),d("currentvalue.visible")&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),f.coerceFont(d,"currentvalue.font",b.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen"))}function e(a,b){function c(a,b){return f.coerce(d,e,k,a,b)}for(var d,e,g=a.steps||[],h=b.steps=[],i=0;i<g.length;i++)d=g[i],e={},c("method"),f.isPlainObject(d)&&("skip"===e.method||Array.isArray(d.args))&&(c("args"),c("label","step-"+i),c("value",e.label),c("execute"),h.push(e));return h}var f=a("../../lib"),g=a("../../plots/array_container_defaults"),h=a("./attributes"),i=a("./constants"),j=i.name,k=h.steps;b.exports=function(a,b){g(a,b,{name:j,handleItemDefaults:d})}},{"../../lib":743,"../../plots/array_container_defaults":786,"./attributes":704,"./constants":705}],707:[function(a,b,c){"use strict";function d(a,b){for(var c=a[C.name],d=[],e=0;e<c.length;e++){var f=c[e];f.visible&&f.steps.length&&(f.gd=b,d.push(f))}return d}function e(a){return a._index}function f(a,b){var c=z.tester.selectAll("g."+C.labelGroupClass).data(b.steps);c.enter().append("g").classed(C.labelGroupClass,!0);var d=0,e=0;c.each(function(a){var c=w.select(this),f=j(c,{step:a},b),g=f.node();if(g){var h=z.bBox(g);e=Math.max(e,h.height),d=Math.max(d,h.width)}}),c.remove(),b.inputAreaWidth=Math.max(C.railWidth,C.gripHeight);var f=a._fullLayout._size;b.lx=f.l+f.w*b.x,b.ly=f.t+f.h*(1-b.y),"fraction"===b.lenmode?b.outerLength=Math.round(f.w*b.len):b.outerLength=b.len,b.lenPad=Math.round(.5*C.gripWidth),b.inputAreaStart=0,b.inputAreaLength=Math.round(b.outerLength-b.pad.l-b.pad.r);var g=b.inputAreaLength-2*C.stepInset,i=g/(b.steps.length-1),k=d+C.labelPadding;if(b.labelStride=Math.max(1,Math.ceil(k/i)),b.labelHeight=e,b.currentValueMaxWidth=0,b.currentValueHeight=0,b.currentValueTotalHeight=0,b.currentValueMaxLines=1,b.currentvalue.visible){var l=z.tester.append("g");c.each(function(a){var c=h(l,b,a.label),d=c.node()&&z.bBox(c.node())||{width:0,height:0},e=A.lineCount(c);b.currentValueMaxWidth=Math.max(b.currentValueMaxWidth,Math.ceil(d.width)),b.currentValueHeight=Math.max(b.currentValueHeight,Math.ceil(d.height)),b.currentValueMaxLines=Math.max(b.currentValueMaxLines,e)}),b.currentValueTotalHeight=b.currentValueHeight+b.currentvalue.offset,l.remove()}b.height=b.currentValueTotalHeight+C.tickOffset+b.ticklen+C.labelOffset+b.labelHeight+b.pad.t+b.pad.b;var m="left";B.isRightAnchor(b)&&(b.lx-=b.outerLength,m="right"),B.isCenterAnchor(b)&&(b.lx-=b.outerLength/2,m="center");var n="top";B.isBottomAnchor(b)&&(b.ly-=b.height,n="bottom"),B.isMiddleAnchor(b)&&(b.ly-=b.height/2,n="middle"),b.outerLength=Math.ceil(b.outerLength),b.height=Math.ceil(b.height),b.lx=Math.round(b.lx),b.ly=Math.round(b.ly),x.autoMargin(a,C.autoMarginIdRoot+b._index,{x:b.x,y:b.y,l:b.outerLength*({right:1,center:.5}[m]||0),r:b.outerLength*({left:1,center:.5}[m]||0),b:b.height*({top:1,middle:.5}[n]||0),t:b.height*({bottom:1,middle:.5}[n]||0)})}function g(a,b,c){c.active>=c.steps.length&&(c.active=0),b.call(h,c).call(u,c).call(k,c).call(o,c).call(t,a,c).call(i,a,c),z.setTranslate(b,c.lx+c.pad.l,c.ly+c.pad.t),b.call(q,c,c.active/(c.steps.length-1),!1),b.call(h,c)}function h(a,b,c){if(b.currentvalue.visible){var d,e,f=a.selectAll("text").data([0]);switch(b.currentvalue.xanchor){case"right":d=b.inputAreaLength-C.currentValueInset-b.currentValueMaxWidth,e="left";break;case"center":d=.5*b.inputAreaLength,e="middle";break;default:d=C.currentValueInset,e="left"}f.enter().append("text").classed(C.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":e,"data-notex":1});var g=b.currentvalue.prefix?b.currentvalue.prefix:"";if("string"==typeof c)g+=c;else{g+=b.steps[b.active].label}b.currentvalue.suffix&&(g+=b.currentvalue.suffix),f.call(z.font,b.currentvalue.font).text(g).call(A.convertToTspans,b.gd);var h=A.lineCount(f),i=(b.currentValueMaxLines+1-h)*b.currentvalue.font.size*D;return A.positionText(f,d,i),f}}function i(a,b,c){var d=a.selectAll("rect."+C.gripRectClass).data([0]);d.enter().append("rect").classed(C.gripRectClass,!0).call(n,b,a,c).style("pointer-events","all"),d.attr({width:C.gripWidth,height:C.gripHeight,rx:C.gripRadius,ry:C.gripRadius}).call(y.stroke,c.bordercolor).call(y.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px")}function j(a,b,c){var d=a.selectAll("text").data([0]);return d.enter().append("text").classed(C.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1}),d.call(z.font,c.font).text(b.step.label).call(A.convertToTspans,c.gd),d}function k(a,b){var c=a.selectAll("g."+C.labelsClass).data([0]);c.enter().append("g").classed(C.labelsClass,!0);var d=c.selectAll("g."+C.labelGroupClass).data(b.labelSteps);d.enter().append("g").classed(C.labelGroupClass,!0),d.exit().remove(),d.each(function(a){var c=w.select(this);c.call(j,a,b),z.setTranslate(c,r(b,a.fraction),C.tickOffset+b.ticklen+b.font.size*D+C.labelOffset+b.currentValueTotalHeight)})}function l(a,b,c,d,e){var f=Math.round(d*(c.steps.length-1));f!==c.active&&m(a,b,c,f,!0,e)}function m(a,b,c,d,e,f){var g=c.active;c._input.active=c.active=d;var i=c.steps[c.active];b.call(q,c,c.active/(c.steps.length-1),f),b.call(h,c),a.emit("plotly_sliderchange",{slider:c,step:c.steps[c.active],interaction:e,previousActive:g}),i&&i.method&&e&&(b._nextMethod?(b._nextMethod.step=i,b._nextMethod.doCallback=e,b._nextMethod.doTransition=f):(b._nextMethod={step:i,doCallback:e,doTransition:f},b._nextMethodRaf=window.requestAnimationFrame(function(){var c=b._nextMethod.step;c.method&&(c.execute&&x.executeAPICommand(a,c.method,c.args),b._nextMethod=null,b._nextMethodRaf=null)})))}function n(a,b,c){function d(){return c.data()[0]}var e=c.node(),f=w.select(b);a.on("mousedown",function(){var a=d();b.emit("plotly_sliderstart",{slider:a});var g=c.select("."+C.gripRectClass);w.event.stopPropagation(),w.event.preventDefault(),g.call(y.fill,a.activebgcolor);var h=s(a,w.mouse(e)[0]);l(b,c,a,h,!0),a._dragging=!0,f.on("mousemove",function(){var a=d(),f=s(a,w.mouse(e)[0]);l(b,c,a,f,!1)}),f.on("mouseup",function(){var a=d();a._dragging=!1,g.call(y.fill,a.bgcolor),f.on("mouseup",null),f.on("mousemove",null),b.emit("plotly_sliderend",{slider:a,step:a.steps[a.active]})})})}function o(a,b){var c=a.selectAll("rect."+C.tickRectClass).data(b.steps);c.enter().append("rect").classed(C.tickRectClass,!0),c.exit().remove(),c.attr({width:b.tickwidth+"px","shape-rendering":"crispEdges"}),c.each(function(a,c){var d=c%b.labelStride==0,e=w.select(this);e.attr({height:d?b.ticklen:b.minorticklen}).call(y.fill,b.tickcolor),z.setTranslate(e,r(b,c/(b.steps.length-1))-.5*b.tickwidth,(d?C.tickOffset:C.minorTickOffset)+b.currentValueTotalHeight)})}function p(a){a.labelSteps=[];for(var b=a.steps.length,c=0;c<b;c+=a.labelStride)a.labelSteps.push({fraction:c/(b-1),step:a.steps[c]})}function q(a,b,c,d){var e=a.select("rect."+C.gripRectClass),f=r(b,c);if(!b._invokingCommand){var g=e;d&&b.transition.duration>0&&(g=g.transition().duration(b.transition.duration).ease(b.transition.easing)),g.attr("transform","translate("+(f-.5*C.gripWidth)+","+b.currentValueTotalHeight+")")}}function r(a,b){return a.inputAreaStart+C.stepInset+(a.inputAreaLength-2*C.stepInset)*Math.min(1,Math.max(0,b))}function s(a,b){return Math.min(1,Math.max(0,(b-C.stepInset-a.inputAreaStart)/(a.inputAreaLength-2*C.stepInset-2*a.inputAreaStart)))}function t(a,b,c){var d=a.selectAll("rect."+C.railTouchRectClass).data([0]);d.enter().append("rect").classed(C.railTouchRectClass,!0).call(n,b,a,c).style("pointer-events","all"),d.attr({width:c.inputAreaLength,height:Math.max(c.inputAreaWidth,C.tickOffset+c.ticklen+c.labelHeight)}).call(y.fill,c.bgcolor).attr("opacity",0),z.setTranslate(d,0,c.currentValueTotalHeight)}function u(a,b){var c=a.selectAll("rect."+C.railRectClass).data([0]);c.enter().append("rect").classed(C.railRectClass,!0);var d=b.inputAreaLength-2*C.railInset;c.attr({width:d,height:C.railWidth,rx:C.railRadius,ry:C.railRadius,"shape-rendering":"crispEdges"}).call(y.stroke,b.bordercolor).call(y.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px"),z.setTranslate(c,C.railInset,.5*(b.inputAreaWidth-C.railWidth)+b.currentValueTotalHeight)}function v(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];-1!==e.indexOf(C.autoMarginIdRoot)&&x.autoMargin(a,e)}}var w=a("d3"),x=a("../../plots/plots"),y=a("../color"),z=a("../drawing"),A=a("../../lib/svg_text_utils"),B=a("../legend/anchor_utils"),C=a("./constants"),D=a("../../constants/alignment").LINE_SPACING;b.exports=function(a){var b=a._fullLayout,c=d(b,a),h=b._infolayer.selectAll("g."+C.containerClassName).data(c.length>0?[0]:[]);if(h.enter().append("g").classed(C.containerClassName,!0).style("cursor","ew-resize"),h.exit().remove(),h.exit().size()&&v(a),0!==c.length){var i=h.selectAll("g."+C.groupClassName).data(c,e);i.enter().append("g").classed(C.groupClassName,!0),i.exit().each(function(b){w.select(this).remove(),b._commandObserver.remove(),delete b._commandObserver,x.autoMargin(a,C.autoMarginIdRoot+b._index)});for(var j=0;j<c.length;j++){var k=c[j];f(a,k)}i.each(function(b){if(!(b.steps.length<2)){var c=w.select(this);p(b),x.manageCommandObserver(a,b,b.steps,function(b){var d=c.data()[0];d.active!==b.index&&(d._dragging||m(a,c,d,b.index,!1,!0))}),g(a,w.select(this),b)}})}}},{"../../constants/alignment":716,"../../lib/svg_text_utils":766,"../../plots/plots":852,"../color":618,"../drawing":643,"../legend/anchor_utils":669,"./constants":705,d3:128}],708:[function(a,b,c){"use strict";var d=a("./constants");b.exports={moduleType:"component",name:d.name,layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":704,"./constants":705,"./defaults":706,"./draw":707}],709:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../plotly"),g=a("../../plots/plots"),h=a("../../lib"),i=a("../drawing"),j=a("../color"),k=a("../../lib/svg_text_utils"),l=a("../../constants/interactions"),m=b.exports={},n=/ [XY][0-9]* /;m.draw=function(a,b,c){function m(a){h.syncOrAsync([o,p],a)}function o(b){var c;return x?(c="",x.rotate&&(c+="rotate("+[x.rotate,w.x,w.y]+")"),x.offset&&(c+="translate(0, "+x.offset+")")):c=null,b.attr("transform",c),b.style({"font-family":B,"font-size":d.round(C,2)+"px",fill:j.rgb(D),opacity:E*j.opacity(D),"font-weight":g.fontWeight}).attr(w).call(k.convertToTspans,a),g.previousPromises(a)}function p(a){var b=d.select(a.node().parentNode);if(v&&v.selection&&v.side&&G){b.attr("transform",null);var c=0,f={left:"right",right:"left",top:"bottom",bottom:"top"}[v.side],g=-1!==["left","top"].indexOf(v.side)?-1:1,j=e(v.pad)?v.pad:2,k=i.bBox(b.node()),l={left:0,top:0,right:z.width,bottom:z.height},m=v.maxShift||(l[v.side]-k[v.side])*("left"===v.side||"top"===v.side?-1:1);if(m<0)c=m;else{var n=v.offsetLeft||0,o=v.offsetTop||0;k.left-=n,k.right-=n,k.top-=o,k.bottom-=o,v.selection.each(function(){var a=i.bBox(this);h.bBoxIntersect(k,a,j)&&(c=Math.max(c,g*(a[v.side]-k[f])+j))}),c=Math.min(m,c)}if(c>0||m<0){var p={left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[v.side];b.attr("transform","translate("+p+")")}}}var q,r=c.propContainer,s=c.propName,t=c.placeholder,u=c.traceIndex,v=c.avoid||{},w=c.attributes,x=c.transform,y=c.containerGroup,z=a._fullLayout,A=r.titlefont||{},B=A.family,C=A.size,D=A.color,E=1,F=!1,G=(r.title||"").trim();"title"===s?q="titleText":-1!==s.indexOf("axis")?q="axisTitleText":s.indexOf(!0)&&(q="colorbarTitleText");var H=a._context.edits[q];""===G?E=0:G.replace(n," % ")===t.replace(n," % ")&&(E=.2,F=!0,H||(G=""));var I=G||H;y||(y=z._infolayer.selectAll(".g-"+b).data([0]),y.enter().append("g").classed("g-"+b,!0));var J=y.selectAll("text").data(I?[0]:[]);return J.enter().append("text"),J.text(G).attr("class",b),J.exit().remove(),I?(J.call(m),H&&(G?J.on(".opacity",null):function(){E=0,F=!0,J.text(t).on("mouseover.opacity",function(){d.select(this).transition().duration(l.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){d.select(this).transition().duration(l.HIDE_PLACEHOLDER).style("opacity",0)})}(),J.call(k.makeEditable,{gd:a}).on("edit",function(b){void 0!==u?f.restyle(a,s,b,u):f.relayout(a,s,b)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(m)}).on("input",function(a){this.text(a||" ").call(k.positionText,w.x,w.y)})),J.classed("js-placeholder",F),y):y}},{"../../constants/interactions":720,"../../lib":743,"../../lib/svg_text_utils":766,"../../plotly":784,"../../plots/plots":852,"../color":618,"../drawing":643,d3:128,"fast-isnumeric":140}],710:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat,g=a("../../plot_api/edit_types").overrideAll,h=a("../../plots/pad_attributes"),i={_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}};b.exports=g({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:f({},h,{}),font:d({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:e.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}},"arraydraw","from-root")},{"../../lib/extend":732,"../../plot_api/edit_types":773,"../../plots/font_attributes":816,"../../plots/pad_attributes":851,"../color/attributes":617}],711:[function(a,b,c){"use strict";b.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],712:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d){return f.coerce(a,b,h,c,d)}d("visible",e(a,b).length>0)&&(d("active"),d("direction"),d("type"),d("showactive"),d("x"),d("y"),f.noneOrAll(a,b,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),f.coerceFont(d,"font",c.font),d("bgcolor",c.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function e(a,b){function c(a,b){return f.coerce(d,e,k,a,b)}for(var d,e,g=a.buttons||[],h=b.buttons=[],i=0;i<g.length;i++)d=g[i],e={},c("method"),f.isPlainObject(d)&&("skip"===e.method||Array.isArray(d.args))&&(c("args"),c("label"),c("execute"),e._index=i,h.push(e));return h}var f=a("../../lib"),g=a("../../plots/array_container_defaults"),h=a("./attributes"),i=a("./constants"),j=i.name,k=h.buttons;b.exports=function(a,b){g(a,b,{name:j,handleItemDefaults:d})}},{"../../lib":743,"../../plots/array_container_defaults":786,"./attributes":710,"./constants":711}],713:[function(a,b,c){"use strict";function d(a){for(var b=a[D.name],c=[],d=0;d<b.length;d++){var e=b[d];e.visible&&c.push(e)}return c}function e(a){return a._index}function f(a){return-1==+a.attr(D.menuIndexAttrName)}function g(a,b){return+a.attr(D.menuIndexAttrName)===b._index}function h(a,b,c,d,e,f,g,h){b._input.active=b.active=g,"buttons"===b.type?j(a,d,null,null,b):"dropdown"===b.type&&(e.attr(D.menuIndexAttrName,"-1"),i(a,d,e,f,b),h||j(a,d,e,f,b))}function i(a,b,c,d,e){var f=b.selectAll("g."+D.headerClassName).data([0]);f.enter().append("g").classed(D.headerClassName,!0).style("pointer-events","all");var h=e.active,i=e.buttons[h]||D.blankHeaderOpts,k={y:e.pad.t,yPad:0,x:e.pad.l,xPad:0,index:0},l={width:e.headerWidth,height:e.headerHeight};f.call(m,e,i,a).call(t,e,k,l);var n=b.selectAll("text."+D.headerArrowClassName).data([0]);n.enter().append("text").classed(D.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(z.font,e.font).text(D.arrowSymbol[e.direction]),n.attr({x:e.headerWidth-D.arrowOffsetX+e.pad.l,
y:e.headerHeight/2+D.textOffsetY+e.pad.t}),f.on("click",function(){c.call(u),c.attr(D.menuIndexAttrName,g(c,e)?-1:String(e._index)),j(a,b,c,d,e)}),f.on("mouseover",function(){f.call(q)}),f.on("mouseout",function(){f.call(r,e)}),z.setTranslate(b,e.lx,e.ly)}function j(a,b,c,d,e){c||(c=b,c.attr("pointer-events","all"));var g=f(c)&&"buttons"!==e.type?[]:e.buttons,i="dropdown"===e.type?D.dropdownButtonClassName:D.buttonClassName,j=c.selectAll("g."+i).data(g),n=j.enter().append("g").classed(i,!0),o=j.exit();"dropdown"===e.type?(n.attr("opacity","0").transition().attr("opacity","1"),o.transition().attr("opacity","0").remove()):o.remove();var s=0,u=0,v=-1!==["up","down"].indexOf(e.direction);"dropdown"===e.type&&(v?u=e.headerHeight+D.gapButtonHeader:s=e.headerWidth+D.gapButtonHeader),"dropdown"===e.type&&"up"===e.direction&&(u=-D.gapButtonHeader+D.gapButton-e.openHeight),"dropdown"===e.type&&"left"===e.direction&&(s=-D.gapButtonHeader+D.gapButton-e.openWidth);var y={x:e.lx+s+e.pad.l,y:e.ly+u+e.pad.t,yPad:D.gapButton,xPad:D.gapButton,index:0},z={l:y.x+e.borderwidth,t:y.y+e.borderwidth};j.each(function(f,g){var i=w.select(this);i.call(m,e,f,a).call(t,e,y),i.on("click",function(){w.event.defaultPrevented||(h(a,e,f,b,c,d,g),f.execute&&x.executeAPICommand(a,f.method,f.args),a.emit("plotly_buttonclicked",{menu:e,button:f,active:e.active}))}),i.on("mouseover",function(){i.call(q)}),i.on("mouseout",function(){i.call(r,e),j.call(p,e)})}),j.call(p,e),v?(z.w=Math.max(e.openWidth,e.headerWidth),z.h=y.y-z.t):(z.w=y.x-z.l,z.h=Math.max(e.openHeight,e.headerHeight)),z.direction=e.direction,d&&(j.size()?k(a,b,c,d,e,z):l(d))}function k(a,b,c,d,e,f){var g,h,i,j=e.direction,k="up"===j||"down"===j,l=e.active;if(k)for(h=0,i=0;i<l;i++)h+=e.heights[i]+D.gapButton;else for(g=0,i=0;i<l;i++)g+=e.widths[i]+D.gapButton;d.enable(f,g,h),d.hbar&&d.hbar.attr("opacity","0").transition().attr("opacity","1"),d.vbar&&d.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(a){var b=!!a.hbar,c=!!a.vbar;b&&a.hbar.transition().attr("opacity","0").each("end",function(){b=!1,c||a.disable()}),c&&a.vbar.transition().attr("opacity","0").each("end",function(){c=!1,b||a.disable()})}function m(a,b,c,d){a.call(n,b).call(o,b,c,d)}function n(a,b){var c=a.selectAll("rect").data([0]);c.enter().append("rect").classed(D.itemRectClassName,!0).attr({rx:D.rx,ry:D.ry,"shape-rendering":"crispEdges"}),c.call(y.stroke,b.bordercolor).call(y.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px")}function o(a,b,c,d){var e=a.selectAll("text").data([0]);e.enter().append("text").classed(D.itemTextClassName,!0).classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1}),e.call(z.font,b.font).text(c.label).call(A.convertToTspans,d)}function p(a,b){var c=b.active;a.each(function(a,d){var e=w.select(this);d===c&&b.showactive&&e.select("rect."+D.itemRectClassName).call(y.fill,D.activeColor)})}function q(a){a.select("rect."+D.itemRectClassName).call(y.fill,D.hoverColor)}function r(a,b){a.select("rect."+D.itemRectClassName).call(y.fill,b.bgcolor)}function s(a,b){b.width1=0,b.height1=0,b.heights=[],b.widths=[],b.totalWidth=0,b.totalHeight=0,b.openWidth=0,b.openHeight=0,b.lx=0,b.ly=0;var c=z.tester.selectAll("g."+D.dropdownButtonClassName).data(b.buttons);c.enter().append("g").classed(D.dropdownButtonClassName,!0);var d=-1!==["up","down"].indexOf(b.direction);c.each(function(c,e){var f=w.select(this);f.call(m,b,c,a);var g=f.select("."+D.itemTextClassName),h=g.node()&&z.bBox(g.node()).width,i=Math.max(h+D.textPadX,D.minWidth),j=b.font.size*C,k=A.lineCount(g),l=Math.max(j*k,D.minHeight)+D.textOffsetY;l=Math.ceil(l),i=Math.ceil(i),b.widths[e]=i,b.heights[e]=l,b.height1=Math.max(b.height1,l),b.width1=Math.max(b.width1,i),d?(b.totalWidth=Math.max(b.totalWidth,i),b.openWidth=b.totalWidth,b.totalHeight+=l+D.gapButton,b.openHeight+=l+D.gapButton):(b.totalWidth+=i+D.gapButton,b.openWidth+=i+D.gapButton,b.totalHeight=Math.max(b.totalHeight,l),b.openHeight=b.totalHeight)}),d?b.totalHeight-=D.gapButton:b.totalWidth-=D.gapButton,b.headerWidth=b.width1+D.arrowPadX,b.headerHeight=b.height1,"dropdown"===b.type&&(d?(b.width1+=D.arrowPadX,b.totalHeight=b.height1):b.totalWidth=b.width1,b.totalWidth+=D.arrowPadX),c.remove();var e=b.totalWidth+b.pad.l+b.pad.r,f=b.totalHeight+b.pad.t+b.pad.b,g=a._fullLayout._size;b.lx=g.l+g.w*b.x,b.ly=g.t+g.h*(1-b.y);var h="left";B.isRightAnchor(b)&&(b.lx-=e,h="right"),B.isCenterAnchor(b)&&(b.lx-=e/2,h="center");var i="top";B.isBottomAnchor(b)&&(b.ly-=f,i="bottom"),B.isMiddleAnchor(b)&&(b.ly-=f/2,i="middle"),b.totalWidth=Math.ceil(b.totalWidth),b.totalHeight=Math.ceil(b.totalHeight),b.lx=Math.round(b.lx),b.ly=Math.round(b.ly),x.autoMargin(a,D.autoMarginIdRoot+b._index,{x:b.x,y:b.y,l:e*({right:1,center:.5}[h]||0),r:e*({left:1,center:.5}[h]||0),b:f*({top:1,middle:.5}[i]||0),t:f*({bottom:1,middle:.5}[i]||0)})}function t(a,b,c,d){d=d||{};var e=a.select("."+D.itemRectClassName),f=a.select("."+D.itemTextClassName),g=b.borderwidth,h=c.index;z.setTranslate(a,g+c.x,g+c.y);var i=-1!==["up","down"].indexOf(b.direction),j=d.height||(i?b.heights[h]:b.height1);e.attr({x:0,y:0,width:d.width||(i?b.width1:b.widths[h]),height:j});var k=b.font.size*C,l=A.lineCount(f),m=(l-1)*k/2;A.positionText(f,D.textOffsetX,j/2-m+D.textOffsetY),i?c.y+=b.heights[h]+c.yPad:c.x+=b.widths[h]+c.xPad,c.index++}function u(a){a.selectAll("g."+D.dropdownButtonClassName).remove()}function v(a){for(var b=a._fullLayout._pushmargin||{},c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];-1!==e.indexOf(D.autoMarginIdRoot)&&x.autoMargin(a,e)}}var w=a("d3"),x=a("../../plots/plots"),y=a("../color"),z=a("../drawing"),A=a("../../lib/svg_text_utils"),B=a("../legend/anchor_utils"),C=a("../../constants/alignment").LINE_SPACING,D=a("./constants"),E=a("./scrollbox");b.exports=function(a){var b=a._fullLayout,c=d(b),f=b._menulayer.selectAll("g."+D.containerClassName).data(c.length>0?[0]:[]);if(f.enter().append("g").classed(D.containerClassName,!0).style("cursor","pointer"),f.exit().remove(),f.exit().size()&&v(a),0!==c.length){var k=f.selectAll("g."+D.headerGroupClassName).data(c,e);k.enter().append("g").classed(D.headerGroupClassName,!0);var l=f.selectAll("g."+D.dropdownButtonGroupClassName).data([0]);l.enter().append("g").classed(D.dropdownButtonGroupClassName,!0).style("pointer-events","all");for(var m=0;m<c.length;m++){var n=c[m];s(a,n)}var o="updatemenus"+b._uid,p=new E(a,l,o);k.enter().size()&&(l.node().parentNode.appendChild(l.node()),l.call(u).attr(D.menuIndexAttrName,"-1")),k.exit().each(function(b){w.select(this).remove(),l.call(u).attr(D.menuIndexAttrName,"-1"),x.autoMargin(a,D.autoMarginIdRoot+b._index)}),k.each(function(b){var c=w.select(this),d="dropdown"===b.type?l:null;x.manageCommandObserver(a,b,b.buttons,function(e){h(a,b,b.buttons[e.index],c,d,p,e.index,!0)}),"dropdown"===b.type?(i(a,c,l,p,b),g(l,b)&&j(a,c,l,p,b)):j(a,c,null,null,b)})}}},{"../../constants/alignment":716,"../../lib/svg_text_utils":766,"../../plots/plots":852,"../color":618,"../drawing":643,"../legend/anchor_utils":669,"./constants":711,"./scrollbox":715,d3:128}],714:[function(a,b,c){arguments[4][708][0].apply(c,arguments)},{"./attributes":710,"./constants":711,"./defaults":712,"./draw":713,dup:708}],715:[function(a,b,c){"use strict";function d(a,b,c){this.gd=a,this.container=b,this.id=c,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.exports=d;var e=a("d3"),f=a("../color"),g=a("../drawing"),h=a("../../lib");d.barWidth=2,d.barLength=20,d.barRadius=2,d.barPad=1,d.barColor="#808BA4",d.prototype.enable=function(a,b,c){var h=this.gd._fullLayout,i=h.width,j=h.height;this.position=a;var k,l,m,n,o=this.position.l,p=this.position.w,q=this.position.t,r=this.position.h,s=this.position.direction,t="down"===s,u="left"===s,v="right"===s,w="up"===s,x=p,y=r;t||u||v||w||(this.position.direction="down",t=!0),t||w?(k=o,l=k+x,t?(m=q,n=Math.min(m+y,j),y=n-m):(n=q+y,m=Math.max(n-y,0),y=n-m)):(m=q,n=m+y,u?(l=o+x,k=Math.max(l-x,0),x=l-k):(k=o,l=Math.min(k+x,i),x=l-k)),this._box={l:k,t:m,w:x,h:y};var z=p>x,A=d.barLength+2*d.barPad,B=d.barWidth+2*d.barPad,C=o,D=q+r;D+B>j&&(D=j-B);var E=this.container.selectAll("rect.scrollbar-horizontal").data(z?[0]:[]);E.exit().on(".drag",null).remove(),E.enter().append("rect").classed("scrollbar-horizontal",!0).call(f.fill,d.barColor),z?(this.hbar=E.attr({rx:d.barRadius,ry:d.barRadius,x:C,y:D,width:A,height:B}),this._hbarXMin=C+A/2,this._hbarTranslateMax=x-A):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=r>y,G=d.barWidth+2*d.barPad,H=d.barLength+2*d.barPad,I=o+p,J=q;I+G>i&&(I=i-G);var K=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);K.exit().on(".drag",null).remove(),K.enter().append("rect").classed("scrollbar-vertical",!0).call(f.fill,d.barColor),F?(this.vbar=K.attr({rx:d.barRadius,ry:d.barRadius,x:I,y:J,width:G,height:H}),this._vbarYMin=J+H/2,this._vbarTranslateMax=y-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var L=this.id,M=k-.5,N=F?l+G+.5:l+.5,O=m-.5,P=z?n+B+.5:n+.5,Q=h._topdefs.selectAll("#"+L).data(z||F?[0]:[]);if(Q.exit().remove(),Q.enter().append("clipPath").attr("id",L).append("rect"),z||F?(this._clipRect=Q.select("rect").attr({x:Math.floor(M),y:Math.floor(O),width:Math.ceil(N)-Math.floor(M),height:Math.ceil(P)-Math.floor(O)}),this.container.call(g.setClipUrl,L),this.bg.attr({x:o,y:q,width:p,height:r})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(g.setClipUrl,null),delete this._clipRect),z||F){var R=e.behavior.drag().on("dragstart",function(){e.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(R);var S=e.behavior.drag().on("dragstart",function(){e.event.sourceEvent.preventDefault(),e.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));z&&this.hbar.on(".drag",null).call(S),F&&this.vbar.on(".drag",null).call(S)}this.setTranslate(b,c)},d.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(g.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},d.prototype._onBoxDrag=function(){var a=this.translateX,b=this.translateY;this.hbar&&(a-=e.event.dx),this.vbar&&(b-=e.event.dy),this.setTranslate(a,b)},d.prototype._onBoxWheel=function(){var a=this.translateX,b=this.translateY;this.hbar&&(a+=e.event.deltaY),this.vbar&&(b+=e.event.deltaY),this.setTranslate(a,b)},d.prototype._onBarDrag=function(){var a=this.translateX,b=this.translateY;if(this.hbar){var c=a+this._hbarXMin,d=c+this._hbarTranslateMax;a=(h.constrain(e.event.x,c,d)-c)/(d-c)*(this.position.w-this._box.w)}if(this.vbar){var f=b+this._vbarYMin,g=f+this._vbarTranslateMax;b=(h.constrain(e.event.y,f,g)-f)/(g-f)*(this.position.h-this._box.h)}this.setTranslate(a,b)},d.prototype.setTranslate=function(a,b){var c=this.position.w-this._box.w,d=this.position.h-this._box.h;if(a=h.constrain(a||0,0,c),b=h.constrain(b||0,0,d),this.translateX=a,this.translateY=b,this.container.call(g.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-b),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+b-.5)}),this.hbar){var e=a/c;this.hbar.call(g.setTranslate,a+e*this._hbarTranslateMax,b)}if(this.vbar){var f=b/d;this.vbar.call(g.setTranslate,a,b+f*this._vbarTranslateMax)}}},{"../../lib":743,"../color":618,"../drawing":643,d3:128}],716:[function(a,b,c){"use strict";b.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],717:[function(a,b,c){"use strict";b.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],718:[function(a,b,c){"use strict";b.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],719:[function(a,b,c){"use strict";b.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],720:[function(a,b,c){"use strict";b.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],721:[function(a,b,c){"use strict";b.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"−"}},{}],722:[function(a,b,c){"use strict";b.exports={entityToUnicode:{mu:"μ","#956":"μ",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:" ","#160":" ",times:"×","#215":"×",plusmn:"±","#177":"±",deg:"°","#176":"°"}}},{}],723:[function(a,b,c){"use strict";c.xmlns="http://www.w3.org/2000/xmlns/",c.svg="http://www.w3.org/2000/svg",c.xlink="http://www.w3.org/1999/xlink",c.svgAttrs={xmlns:c.svg,"xmlns:xlink":c.xlink}},{}],724:[function(a,b,c){"use strict";var d=a("./plotly");c.version="1.33.0",a("es6-promise").polyfill(),a("../build/plotcss"),a("./fonts/mathjax_config"),c.plot=d.plot,c.newPlot=d.newPlot,c.restyle=d.restyle,c.relayout=d.relayout,c.redraw=d.redraw,c.update=d.update,c.extendTraces=d.extendTraces,c.prependTraces=d.prependTraces,c.addTraces=d.addTraces,c.deleteTraces=d.deleteTraces,c.moveTraces=d.moveTraces,c.purge=d.purge,c.setPlotConfig=a("./plot_api/set_plot_config"),c.register=a("./plot_api/register"),c.toImage=a("./plot_api/to_image"),c.downloadImage=a("./snapshot/download"),c.validate=a("./plot_api/validate"),c.addFrames=d.addFrames,c.deleteFrames=d.deleteFrames,c.animate=d.animate,c.register(a("./traces/scatter")),c.register([a("./components/fx"),a("./components/legend"),a("./components/annotations"),a("./components/annotations3d"),a("./components/shapes"),a("./components/images"),a("./components/updatemenus"),a("./components/sliders"),a("./components/rangeslider"),a("./components/rangeselector")]),c.register([a("./locale-en"),a("./locale-en-us")]),c.Icons=a("../build/ploticon"),c.Plots=d.Plots,c.Fx=a("./components/fx"),c.Snapshot=a("./snapshot"),c.PlotSchema=a("./plot_api/plot_schema"),c.Queue=a("./lib/queue"),c.d3=a("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":609,"./components/annotations3d":614,"./components/fx":660,"./components/images":668,"./components/legend":677,"./components/rangeselector":689,"./components/rangeslider":695,"./components/shapes":702,"./components/sliders":708,"./components/updatemenus":714,"./fonts/mathjax_config":725,"./lib/queue":757,"./locale-en":771,"./locale-en-us":770,"./plot_api/plot_schema":778,"./plot_api/register":779,"./plot_api/set_plot_config":780,"./plot_api/to_image":782,"./plot_api/validate":783,"./plotly":784,"./snapshot":878,"./snapshot/download":875,"./traces/scatter":1078,d3:128,"es6-promise":137}],725:[function(a,b,c){"use strict";"undefined"!=typeof MathJax?(c.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):c.MathJax=!1},{}],726:[function(a,b,c){"use strict";var d=Math.PI;c.deg2rad=function(a){return a/180*d},c.rad2deg=function(a){return a/d*180},c.wrap360=function(a){var b=a%360;return b<0?b+360:b},c.wrap180=function(a){return Math.abs(a)>180&&(a-=360*Math.round(a/360)),a}},{}],727:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../constants/numerical").BADNUM,f=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;b.exports=function(a){return"string"==typeof a&&(a=a.replace(f,"")),d(a)?Number(a):e}},{"../constants/numerical":721,"fast-isnumeric":140}],728:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("tinycolor2"),f=a("../plots/attributes"),g=a("../components/colorscale/get_scale"),h=(Object.keys(a("../components/colorscale/scales")),a("./nested_property")),i=a("./regex").counter,j=a("../constants/interactions").DESELECTDIM,k=a("./angles").wrap180;c.valObjectMeta={data_array:{coerceFunction:function(a,b,c){Array.isArray(a)?b.set(a):void 0!==c&&b.set(c)}},enumerated:{coerceFunction:function(a,b,c,d){d.coerceNumber&&(a=+a),-1===d.values.indexOf(a)?b.set(c):b.set(a)},validateFunction:function(a,b){b.coerceNumber&&(a=+a);for(var c=b.values,d=0;d<c.length;d++){var e=String(c[d]);if("/"===e.charAt(0)&&"/"===e.charAt(e.length-1)){if(new RegExp(e.substr(1,e.length-2)).test(a))return!0}else if(a===c[d])return!0}return!1}},boolean:{coerceFunction:function(a,b,c){!0===a||!1===a?b.set(a):b.set(c)}},number:{coerceFunction:function(a,b,c,e){!d(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>e.max?b.set(c):b.set(+a)}},integer:{coerceFunction:function(a,b,c,e){a%1||!d(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>e.max?b.set(c):b.set(+a)}},string:{coerceFunction:function(a,b,c,d){if("string"!=typeof a){var e="number"==typeof a;!0!==d.strict&&e?b.set(String(a)):b.set(c)}else d.noBlank&&!a?b.set(c):b.set(a)}},color:{coerceFunction:function(a,b,c){e(a).isValid()?b.set(a):b.set(c)}},colorlist:{coerceFunction:function(a,b,c){function d(a){return e(a).isValid()}Array.isArray(a)&&a.length&&a.every(d)?b.set(a):b.set(c)}},colorscale:{coerceFunction:function(a,b,c){b.set(g(a,c))}},angle:{coerceFunction:function(a,b,c){"auto"===a?b.set("auto"):d(a)?b.set(k(+a)):b.set(c)}},subplotid:{coerceFunction:function(a,b,c){if("string"==typeof a&&i(c).test(a))return void b.set(a);b.set(c)},validateFunction:function(a,b){var c=b.dflt;return a===c||"string"==typeof a&&!!i(c).test(a)}},flaglist:{coerceFunction:function(a,b,c,d){if("string"!=typeof a)return void b.set(c);if(-1!==(d.extras||[]).indexOf(a))return void b.set(a);for(var e=a.split("+"),f=0;f<e.length;){var g=e[f];-1===d.flags.indexOf(g)||e.indexOf(g)<f?e.splice(f,1):f++}e.length?b.set(e.join("+")):b.set(c)}},any:{coerceFunction:function(a,b,c){void 0===a?b.set(c):b.set(a)}},info_array:{coerceFunction:function(a,b,d,e){if(!Array.isArray(a))return void b.set(d);var f=e.items,g=[];d=Array.isArray(d)?d:[];for(var h=0;h<f.length;h++)c.coerce(a,g,f,"["+h+"]",d[h]);b.set(g)},validateFunction:function(a,b){if(!Array.isArray(a))return!1;var d=b.items;if(!b.freeLength&&a.length!==d.length)return!1;for(var e=0;e<a.length;e++){if(!c.validate(a[e],b.items[e]))return!1}return!0}}},c.coerce=function(a,b,d,e,f){var g=h(d,e).get(),i=h(a,e),j=h(b,e),k=i.get();return void 0===f&&(f=g.dflt),g.arrayOk&&Array.isArray(k)?(j.set(k),k):(c.valObjectMeta[g.valType].coerceFunction(k,j,f,g),j.get())},c.coerce2=function(a,b,d,e,f){var g=h(a,e),i=c.coerce(a,b,d,e,f),j=g.get();return void 0!==j&&null!==j&&i},c.coerceFont=function(a,b,c){var d={};return c=c||{},d.family=a(b+".family",c.family),d.size=a(b+".size",c.size),d.color=a(b+".color",c.color),d},c.coerceHoverinfo=function(a,b,d){var e,g=b._module.attributes,h=g.hoverinfo?{hoverinfo:g.hoverinfo}:f,i=h.hoverinfo;if(1===d._dataLength){var j="all"===i.dflt?i.flags.slice():i.dflt.split("+");j.splice(j.indexOf("name"),1),e=j.join("+")}return c.coerce(a,b,h,"hoverinfo",e)},c.coerceSelectionMarkerOpacity=function(a,b){if(a.marker){var c,d,e=a.marker.opacity;Array.isArray(e)||a.selected||a.unselected||(c=e,d=j*e),b("selected.marker.opacity",c),b("unselected.marker.opacity",d)}},c.validate=function(a,b){var d=c.valObjectMeta[b.valType];if(b.arrayOk&&Array.isArray(a))return!0;if(d.validateFunction)return d.validateFunction(a,b);var e={},f=e,g={set:function(a){f=a}};return d.coerceFunction(a,g,e,b),f!==e}},{"../components/colorscale/get_scale":631,"../components/colorscale/scales":637,"../constants/interactions":720,"../plots/attributes":787,"./angles":726,"./nested_property":751,"./regex":758,"fast-isnumeric":140,tinycolor2:546}],729:[function(a,b,c){"use strict";function d(a){return a&&x.componentsRegistry.calendars&&"string"==typeof a&&"gregorian"!==a}function e(a,b){return String(a+Math.pow(10,b)).substr(1)}function f(a,b,c,d,f){if((b||c||d||f)&&(a+=" "+e(b,2)+":"+e(c,2),(d||f)&&(a+=":"+e(d,2),f))){for(var g=4;f%10==0;)g-=1,f/=10;a+="."+e(f,g)}return a}function g(a,b,c,e){a=a.replace(H,function(a){var c=Math.min(+a.charAt(1)||6,6);return(b/1e3%1+2).toFixed(c).substr(2).replace(/0+$/,"")||"0"});var f=new Date(Math.floor(b+.05));if(d(e))try{a=x.getComponentMethod("calendars","worldCalFmt")(a,b,e)}catch(a){return"Invalid"}return c(a)(f)}function h(a,b){var c=p(a+.05,s),d=e(Math.floor(c/t),2)+":"+e(p(Math.floor(c/u),60),2);if("M"!==b){n(b)||(b=0);var f=Math.min(p(a/v,60),I[b]),g=(100+f).toFixed(b).substr(1);b>0&&(g=g.replace(/0+$/,"").replace(/[\.]$/,"")),d+=":"+g}return d}function i(a){return a.formatDate("yyyy")}function j(a){return a.formatDate("M yyyy")}function k(a){return a.formatDate("M d")}function l(a){return a.formatDate("M d, yyyy")}var m=a("d3"),n=a("fast-isnumeric"),o=a("./loggers"),p=a("./mod"),q=a("../constants/numerical"),r=q.BADNUM,s=q.ONEDAY,t=q.ONEHOUR,u=q.ONEMIN,v=q.ONESEC,w=q.EPOCHJD,x=a("../registry"),y=m.time.format.utc,z=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,B=(new Date).getFullYear()-70;c.dateTick0=function(a,b){return d(a)?b?x.getComponentMethod("calendars","CANONICAL_SUNDAY")[a]:x.getComponentMethod("calendars","CANONICAL_TICK")[a]:b?"2000-01-02":"2000-01-01"},c.dfltRange=function(a){return d(a)?x.getComponentMethod("calendars","DFLTRANGE")[a]:["2000-01-01","2001-01-01"]},c.isJSDate=function(a){return"object"==typeof a&&null!==a&&"function"==typeof a.getTime};var C,D;c.dateTime2ms=function(a,b){if(c.isJSDate(a))return a=Number(a)-a.getTimezoneOffset()*u,a>=C&&a<=D?a:r;if("string"!=typeof a&&"number"!=typeof a)return r;a=String(a);var e=d(b),f=a.charAt(0);!e||"G"!==f&&"g"!==f||(a=a.substr(1),b="");var g=e&&"chinese"===b.substr(0,7),h=a.match(g?A:z);if(!h)return r;var i=h[1],j=h[3]||"1",k=Number(h[5]||1),l=Number(h[7]||0),m=Number(h[9]||0),n=Number(h[11]||0);if(e){if(2===i.length)return r;i=Number(i);var o;try{var p=x.getComponentMethod("calendars","getCal")(b);if(g){var q="i"===j.charAt(j.length-1);j=parseInt(j,10),o=p.newDate(i,p.toMonthIndex(i,j,q),k)}else o=p.newDate(i,Number(j),k)}catch(a){return r}return o?(o.toJD()-w)*s+l*t+m*u+n*v:r}i=2===i.length?(Number(i)+2e3-B)%100+B:Number(i),j-=1;var y=new Date(Date.UTC(2e3,j,k,l,m));return y.setUTCFullYear(i),y.getUTCMonth()!==j?r:y.getUTCDate()!==k?r:y.getTime()+n*v},C=c.MIN_MS=c.dateTime2ms("-9999"),D=c.MAX_MS=c.dateTime2ms("9999-12-31 23:59:59.9999"),c.isDateTime=function(a,b){return c.dateTime2ms(a,b)!==r};var E=90*s,F=3*t,G=5*u;c.ms2DateTime=function(a,b,c){if("number"!=typeof a||!(a>=C&&a<=D))return r;b||(b=0);var e,g,h,i,j,k,l=Math.floor(10*p(a+.05,1)),m=Math.round(a-l/10);if(d(c)){var n=Math.floor(m/s)+w,o=Math.floor(p(a,s));try{e=x.getComponentMethod("calendars","getCal")(c).fromJD(n).formatDate("yyyy-mm-dd")}catch(a){e=y("G%Y-%m-%d")(new Date(m))}if("-"===e.charAt(0))for(;e.length<11;)e="-0"+e.substr(1);else for(;e.length<10;)e="0"+e;g=b<E?Math.floor(o/t):0,h=b<E?Math.floor(o%t/u):0,i=b<F?Math.floor(o%u/v):0,j=b<G?o%v*10+l:0}else k=new Date(m),e=y("%Y-%m-%d")(k),g=b<E?k.getUTCHours():0,h=b<E?k.getUTCMinutes():0,i=b<F?k.getUTCSeconds():0,j=b<G?10*k.getUTCMilliseconds()+l:0;return f(e,g,h,i,j)},c.ms2DateTimeLocal=function(a){if(!(a>=C+s&&a<=D-s))return r;var b=Math.floor(10*p(a+.05,1)),c=new Date(Math.round(a-b/10));return f(m.time.format("%Y-%m-%d")(c),c.getHours(),c.getMinutes(),c.getSeconds(),10*c.getUTCMilliseconds()+b)},c.cleanDate=function(a,b,e){if(c.isJSDate(a)||"number"==typeof a){if(d(e))return o.error("JS Dates and milliseconds are incompatible with world calendars",a),b;if(!(a=c.ms2DateTimeLocal(+a))&&void 0!==b)return b}else if(!c.isDateTime(a,e))return o.error("unrecognized date",a),b;return a};var H=/%\d?f/g,I=[59,59.9,59.99,59.999,59.9999];c.formatDate=function(a,b,c,e,f){var m,n;if(f=d(f)&&f,b)return g(b,a,e,f);if(f)try{var o=Math.floor((a+.05)/s)+w,p=x.getComponentMethod("calendars","getCal")(f).fromJD(o);"y"===c?n=i(p):"m"===c?n=j(p):"d"===c?(m=i(p),n=k(p)):(m=l(p),n=h(a,c))}catch(a){return"Invalid"}else{var q=new Date(Math.floor(a+.05));"y"===c?n=e("%Y")(q):"m"===c?n=e("%b %Y")(q):"d"===c?(m=e("%Y")(q),n=e("%b %-d")(q)):(m=e("%b %-d, %Y")(q),n=h(a,c))}return n+(m?"\n"+m:"")};var J=3*s;c.incrementMonth=function(a,b,c){c=d(c)&&c;var e=p(a,s);if(a=Math.round(a-e),c)try{var f=Math.round(a/s)+w,g=x.getComponentMethod("calendars","getCal")(c),h=g.fromJD(f);return b%12?g.add(h,b,"m"):g.add(h,b/12,"y"),(h.toJD()-w)*s+e}catch(b){o.error("invalid ms "+a+" in calendar "+c)}var i=new Date(a+J);return i.setUTCMonth(i.getUTCMonth()+b)+e-J},c.findExactDates=function(a,b){for(var c,e,f=0,g=0,h=0,i=0,j=d(b)&&x.getComponentMethod("calendars","getCal")(b),k=0;k<a.length;k++)if(e=a[k],n(e)){if(!(e%s))if(j)try{c=j.fromJD(e/s+w),1===c.day()?1===c.month()?f++:g++:h++}catch(a){}else c=new Date(e),1===c.getUTCDate()?0===c.getUTCMonth()?f++:g++:h++}else i++;g+=f,h+=g;var l=a.length-i;return{exactYears:f/l,exactMonths:g/l,exactDays:h/l}}},{"../constants/numerical":721,"../registry":873,"./loggers":748,"./mod":750,d3:128,"fast-isnumeric":140}],730:[function(a,b,c){"use strict";b.exports=function(a,b){return Array.isArray(a)||(a=[]),a.length=b,a}},{}],731:[function(a,b,c){"use strict";var d=a("events").EventEmitter,e={init:function(a){if(a._ev instanceof d)return a;var b=new d,c=new d;return a._ev=b,a._internalEv=c,a.on=b.on.bind(b),a.once=b.once.bind(b),a.removeListener=b.removeListener.bind(b),a.removeAllListeners=b.removeAllListeners.bind(b),a._internalOn=c.on.bind(c),a._internalOnce=c.once.bind(c),a._removeInternalListener=c.removeListener.bind(c),a._removeAllInternalListeners=c.removeAllListeners.bind(c),a.emit=function(d,e){"undefined"!=typeof jQuery&&jQuery(a).trigger(d,e),b.emit(d,e),c.emit(d,e)},a},triggerHandler:function(a,b,c){var d,e;"undefined"!=typeof jQuery&&(d=jQuery(a).triggerHandler(b,c));var f=a._ev;if(!f)return d;var g=f._events[b];if(!g)return d;"function"==typeof g&&(g=[g]);for(var h=g.pop(),i=0;i<g.length;i++)g[i](c);return e=h(c),void 0!==d?d:e},purge:function(a){return delete a._ev,delete a.on,delete a.once,delete a.removeListener,delete a.removeAllListeners,delete a.emit,delete a._ev,delete a._internalEv,delete a._internalOn,delete a._internalOnce,delete a._removeInternalListener,delete a._removeAllInternalListeners,a}};b.exports=e},{events:138}],732:[function(a,b,c){"use strict";function d(a,b){var c,d;for(c=0;c<a.length;c++){if(null!==(d=a[c])&&"object"==typeof d)return!1;void 0!==d&&(b[c]=d)}return!0}function e(a,b,c,h){var i,j,k,l,m,n,o=a[0],p=a.length;if(2===p&&g(o)&&g(a[1])&&0===o.length){if(d(a[1],o))return o;o.splice(0,o.length)}for(var q=1;q<p;q++){i=a[q];for(j in i)k=o[j],l=i[j],h&&g(l)?o[j]=l:b&&l&&(f(l)||(m=g(l)))?(m?(m=!1,n=k&&g(k)?k:[]):n=k&&f(k)?k:{},o[j]=e([n,l],b,c,h)):(void 0!==l||c)&&(o[j]=l)}return o}var f=a("./is_plain_object.js"),g=Array.isArray;c.extendFlat=function(){return e(arguments,!1,!1,!1)},c.extendDeep=function(){return e(arguments,!0,!1,!1)},c.extendDeepAll=function(){return e(arguments,!0,!0,!1)},c.extendDeepNoArrays=function(){return e(arguments,!0,!1,!0)}},{"./is_plain_object.js":745}],733:[function(a,b,c){"use strict";b.exports=function(a){for(var b={},c=[],d=0,e=0;e<a.length;e++){var f=a[e];1!==b[f]&&(b[f]=1,c[d++]=f)}return c}},{}],734:[function(a,b,c){"use strict";function d(a){return!0===a.visible}function e(a){return!0===a[0].trace.visible}function f(a){return Array.isArray(a)&&Array.isArray(a[0])&&a[0][0]&&a[0][0].trace}b.exports=function(a){for(var b=f(a)?e:d,c=[],g=0;g<a.length;g++){var h=a[g];b(h)&&c.push(h)}return c}},{}],735:[function(a,b,c){"use strict";function d(a,b){return(0,i[a])(b)}function e(a){for(var b=0;b<h.length;b++){var c=h[b];if(new RegExp(f[c]).test(a.trim().toLowerCase()))return c}return g.log("Unrecognized country name: "+a+"."),!1}var f=a("country-regex"),g=a("../lib"),h=Object.keys(f),i={"ISO-3":g.identity,"USA-states":g.identity,"country names":e};c.locationToFeature=function(a,b,c){if(!b||"string"!=typeof b)return!1;var e=d(a,b);if(e){for(var f=0;f<c.length;f++){var h=c[f];if(h.id===e)return h}g.log(["Location with id",e,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},{"../lib":743,"country-regex":113}],736:[function(a,b,c){"use strict";var d=a("../constants/numerical").BADNUM;c.calcTraceToLineCoords=function(a){for(var b=a[0].trace,c=b.connectgaps,e=[],f=[],g=0;g<a.length;g++){var h=a[g],i=h.lonlat;i[0]!==d?f.push(i):!c&&f.length>0&&(e.push(f),f=[])}return f.length>0&&e.push(f),e},c.makeLine=function(a){return 1===a.length?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}},c.makePolygon=function(a){if(1===a.length)return{type:"Polygon",coordinates:a};for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=[a[c]];return{type:"MultiPolygon",coordinates:b}},c.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":721}],737:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=c-a,j=e-a,k=g-e,l=d-b,m=f-b,n=h-f,o=i*n-k*l;if(0===o)return null;var p=(j*n-k*m)/o,q=(j*l-i*m)/o;return q<0||q>1||p<0||p>1?null:{x:a+i*p,y:b+l*p}}function e(a,b,c,d,e){var f=d*a+e*b;if(f<0)return d*d+e*e;if(f>c){var g=d-a,h=e-b;return g*g+h*h}var i=d*b-e*a;return i*i/c}var f=a("./mod");c.segmentsIntersect=d,c.segmentDistance=function(a,b,c,f,g,h,i,j){if(d(a,b,c,f,g,h,i,j))return 0;var k=c-a,l=f-b,m=i-g,n=j-h,o=k*k+l*l,p=m*m+n*n,q=Math.min(e(k,l,o,g-a,h-b),e(k,l,o,i-a,j-b),e(m,n,p,a-g,b-h),e(m,n,p,c-g,f-h));return Math.sqrt(q)};var g,h,i;c.getTextLocation=function(a,b,c,d){if(a===h&&d===i||(g={},h=a,i=d),g[c])return g[c];var e=a.getPointAtLength(f(c-d/2,b)),j=a.getPointAtLength(f(c+d/2,b)),k=Math.atan((j.y-e.y)/(j.x-e.x)),l=a.getPointAtLength(f(c,b)),m=(4*l.x+e.x+j.x)/6,n=(4*l.y+e.y+j.y)/6,o={x:m,y:n,theta:k};return g[c]=o,o},c.clearLocationCache=function(){h=null},c.getVisibleSegment=function(a,b,c){function d(b){var c=a.getPointAtLength(b);0===b?e=c:b===l&&(f=c);var d=c.x<g?g-c.x:c.x>h?c.x-h:0,k=c.y<i?i-c.y:c.y>j?c.y-j:0;return Math.sqrt(d*d+k*k)}for(var e,f,g=b.left,h=b.right,i=b.top,j=b.bottom,k=0,l=a.getTotalLength(),m=l,n=d(k);n;){if((k+=n+c)>m)return;n=d(k)}for(n=d(m);n;){if(m-=n+c,k>m)return;n=d(m)}return{min:k,max:m,len:m-k,total:l,isClosed:0===k&&m===l&&Math.abs(e.x-f.x)<.1&&Math.abs(e.y-f.y)<.1}},c.findPointOnPath=function(a,b,c,d){d=d||{};for(var e,f,g,h=d.pathLength||a.getTotalLength(),i=d.tolerance||.001,j=d.iterationLimit||30,k=a.getPointAtLength(0)[c]>a.getPointAtLength(h)[c]?-1:1,l=0,m=0,n=h;l<j;){if(e=(m+n)/2,f=a.getPointAtLength(e),g=f[c]-b,Math.abs(g)<i)return f;k*g>0?n=e:m=e,l++}return f}},{"./mod":750}],738:[function(a,b,c){"use strict";b.exports=function(a){var b;if("string"==typeof a){if(null===(b=document.getElementById(a)))throw new Error("No DOM element with id '"+a+"' exists on the page.");return b}if(null===a||void 0===a)throw new Error("DOM element provided is null or undefined");return a}},{}],739:[function(a,b,c){"use strict";function d(a,b){var c=a;return c[3]*=b,c}function e(a){if(h(a))return l;var b=i(a);return b.length?b:l}function f(a){return h(a)?a:m}function g(a,b,c){var g,h,k,n,o,p=a.color,q=Array.isArray(p),r=Array.isArray(b),s=[];if(g=void 0!==a.colorscale?j.makeColorScaleFunc(j.extractScale(a.colorscale,a.cmin,a.cmax)):e,h=q?function(a,b){
return void 0===a[b]?l:i(g(a[b]))}:e,k=r?function(a,b){return void 0===a[b]?m:f(a[b])}:f,q||r)for(var t=0;t<c;t++)n=h(p,t),o=k(b,t),s[t]=d(n,o);else s=d(i(p),b);return s}var h=a("fast-isnumeric"),i=a("color-normalize"),j=a("../components/colorscale"),k=a("../components/color/attributes").defaultLine,l=i(k),m=1;b.exports=g},{"../components/color/attributes":617,"../components/colorscale":633,"color-normalize":99,"fast-isnumeric":140}],740:[function(a,b,c){"use strict";function d(a){return[a]}var e=a("./identity");b.exports={keyFun:function(a){return a.key},repeat:d,descend:e,wrap:d,unwrap:function(a){return a[0]}}},{"./identity":742}],741:[function(a,b,c){"use strict";function d(a){for(var b=0;(b=a.indexOf("<sup>",b))>=0;){var c=a.indexOf("</sup>",b);if(c<b)break;a=a.slice(0,b)+i(a.slice(b+5,c))+a.slice(c+6)}return a}function e(a){return a.replace(/\<br\>/g,"\n")}function f(a){return a.replace(/\<.*\>/g,"")}function g(a){for(var b=j.entityToUnicode,c=0;(c=a.indexOf("&",c))>=0;){var d=a.indexOf(";",c);if(d<c)c+=1;else{var e=b[a.slice(c+1,d)];a=e?a.slice(0,c)+e+a.slice(d+1):a.slice(0,c)+a.slice(d+1)}}return a}function h(a){return""+g(f(d(e(a))))}var i=a("superscript-text"),j=a("../constants/string_mappings");b.exports=h},{"../constants/string_mappings":722,"superscript-text":539}],742:[function(a,b,c){"use strict";b.exports=function(a){return a}},{}],743:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../constants/numerical"),g=f.FP_SAFE,h=f.BADNUM,i=b.exports={};i.nestedProperty=a("./nested_property"),i.keyedContainer=a("./keyed_container"),i.relativeAttr=a("./relative_attr"),i.isPlainObject=a("./is_plain_object"),i.isArray=a("./is_array"),i.mod=a("./mod"),i.toLogRange=a("./to_log_range"),i.relinkPrivateKeys=a("./relink_private"),i.ensureArray=a("./ensure_array");var j=a("./coerce");i.valObjectMeta=j.valObjectMeta,i.coerce=j.coerce,i.coerce2=j.coerce2,i.coerceFont=j.coerceFont,i.coerceHoverinfo=j.coerceHoverinfo,i.coerceSelectionMarkerOpacity=j.coerceSelectionMarkerOpacity,i.validate=j.validate;var k=a("./dates");i.dateTime2ms=k.dateTime2ms,i.isDateTime=k.isDateTime,i.ms2DateTime=k.ms2DateTime,i.ms2DateTimeLocal=k.ms2DateTimeLocal,i.cleanDate=k.cleanDate,i.isJSDate=k.isJSDate,i.formatDate=k.formatDate,i.incrementMonth=k.incrementMonth,i.dateTick0=k.dateTick0,i.dfltRange=k.dfltRange,i.findExactDates=k.findExactDates,i.MIN_MS=k.MIN_MS,i.MAX_MS=k.MAX_MS;var l=a("./search");i.findBin=l.findBin,i.sorterAsc=l.sorterAsc,i.sorterDes=l.sorterDes,i.distinctVals=l.distinctVals,i.roundUp=l.roundUp;var m=a("./stats");i.aggNums=m.aggNums,i.len=m.len,i.mean=m.mean,i.variance=m.variance,i.stdev=m.stdev,i.interp=m.interp;var n=a("./matrix");i.init2dArray=n.init2dArray,i.transposeRagged=n.transposeRagged,i.dot=n.dot,i.translationMatrix=n.translationMatrix,i.rotationMatrix=n.rotationMatrix,i.rotationXYMatrix=n.rotationXYMatrix,i.apply2DTransform=n.apply2DTransform,i.apply2DTransform2=n.apply2DTransform2;var o=a("./angles");i.deg2rad=o.deg2rad,i.rad2deg=o.rad2deg,i.wrap360=o.wrap360,i.wrap180=o.wrap180;var p=a("./geometry2d");i.segmentsIntersect=p.segmentsIntersect,i.segmentDistance=p.segmentDistance,i.getTextLocation=p.getTextLocation,i.clearLocationCache=p.clearLocationCache,i.getVisibleSegment=p.getVisibleSegment,i.findPointOnPath=p.findPointOnPath;var q=a("./extend");i.extendFlat=q.extendFlat,i.extendDeep=q.extendDeep,i.extendDeepAll=q.extendDeepAll,i.extendDeepNoArrays=q.extendDeepNoArrays;var r=a("./loggers");i.log=r.log,i.warn=r.warn,i.error=r.error;var s=a("./regex");i.counterRegex=s.counter;var t=a("./throttle");i.throttle=t.throttle,i.throttleDone=t.done,i.clearThrottle=t.clear,i.getGraphDiv=a("./get_graph_div"),i._=a("./localize"),i.notifier=a("./notifier"),i.filterUnique=a("./filter_unique"),i.filterVisible=a("./filter_visible"),i.pushUnique=a("./push_unique"),i.cleanNumber=a("./clean_number"),i.ensureNumber=function(a){return e(a)?(a=Number(a),a<-g||a>g?h:e(a)?Number(a):h):h},i.noop=a("./noop"),i.identity=a("./identity"),i.swapAttrs=function(a,b,c,d){c||(c="x"),d||(d="y");for(var e=0;e<b.length;e++){var f=b[e],g=i.nestedProperty(a,f.replace("?",c)),h=i.nestedProperty(a,f.replace("?",d)),j=g.get();g.set(h.get()),h.set(j)}},i.pauseEvent=function(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1},i.raiseToTop=function(a){a.parentNode.appendChild(a)},i.cancelTransition=function(a){return a.transition().duration(0)},i.constrain=function(a,b,c){return b>c?Math.max(c,Math.min(b,a)):Math.max(b,Math.min(c,a))},i.bBoxIntersect=function(a,b,c){return c=c||0,a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c},i.simpleMap=function(a,b,c,d){for(var e=a.length,f=new Array(e),g=0;g<e;g++)f[g]=b(a[g],c,d);return f},i.randstr=function a(b,c,d){if(d||(d=16),void 0===c&&(c=24),c<=0)return"0";var e,f,g,h=Math.log(Math.pow(2,c))/Math.log(d),i="";for(e=2;h===1/0;e*=2)h=Math.log(Math.pow(2,c/e))/Math.log(d)*e;var j=h-Math.floor(h);for(e=0;e<Math.floor(h);e++)g=Math.floor(Math.random()*d).toString(d),i=g+i;j&&(f=Math.pow(d,j),g=Math.floor(Math.random()*f).toString(d),i=g+i);var k=parseInt(i,d);return b&&b.indexOf(i)>-1||k!==1/0&&k>=Math.pow(2,c)?a(b,c,d):i},i.OptionControl=function(a,b){a||(a={}),b||(b="opt");var c={};return c.optionList=[],c._newoption=function(d){d[b]=a,c[d.name]=d,c.optionList.push(d)},c["_"+b]=a,c},i.smooth=function(a,b){if((b=Math.round(b)||0)<2)return a;var c,d,e,f,g=a.length,h=2*g,i=2*b-1,j=new Array(i),k=new Array(g);for(c=0;c<i;c++)j[c]=(1-Math.cos(Math.PI*(c+1)/b))/(2*b);for(c=0;c<g;c++){for(f=0,d=0;d<i;d++)e=c+d+1-b,e<-g?e-=h*Math.round(e/h):e>=h&&(e-=h*Math.floor(e/h)),e<0?e=-1-e:e>=g&&(e=h-1-e),f+=a[e]*j[d];k[c]=f}return k},i.syncOrAsync=function(a,b,c){function d(){return i.syncOrAsync(a,b,c)}for(var e,f;a.length;)if(f=a.splice(0,1)[0],(e=f(b))&&e.then)return e.then(d).then(void 0,i.promiseError);return c&&c(b)},i.stripTrailingSlash=function(a){return"/"===a.substr(-1)?a.substr(0,a.length-1):a},i.noneOrAll=function(a,b,c){if(a){var d,e,f=!1,g=!0;for(d=0;d<c.length;d++)e=a[c[d]],void 0!==e&&null!==e?f=!0:g=!1;if(f&&!g)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]]}},i.mergeArray=function(a,b,c){if(Array.isArray(a))for(var d=Math.min(a.length,b.length),e=0;e<d;e++)b[e][c]=a[e]},i.fillArray=function(a,b,c,d){if(d=d||i.identity,Array.isArray(a))for(var e=0;e<b.length;e++)b[e][c]=d(a[e])},i.castOption=function(a,b,c,d){d=d||i.identity;var e=i.nestedProperty(a,c).get();return Array.isArray(e)?d(Array.isArray(b)&&Array.isArray(e[b[0]])?e[b[0]][b[1]]:e[b]):e},i.extractOption=function(a,b,c,d){if(c in a)return a[c];var e=i.nestedProperty(b,d).get();return Array.isArray(e)?void 0:e},i.tagSelected=function(a,b,c){var d,f=b.selectedpoints,g=b._indexToPoints;if(g){d={};for(var h in g)for(var i=g[h],j=0;j<i.length;j++)d[i[j]]=h}for(var k=0;k<f.length;k++){var l=f[k];if(function(a){return e(a)&&a>=0&&a%1==0}(l)){var m=d?d[l]:l,n=c?c[m]:m;(function(b){return void 0!==b&&b<a.length})(n)&&(a[n].selected=1)}}},i.getTargetArray=function(a,b){var c=b.target;if("string"==typeof c&&c){var d=i.nestedProperty(a,c).get();return!!Array.isArray(d)&&d}return!!Array.isArray(c)&&c},i.minExtend=function(a,b){var c={};"object"!=typeof b&&(b={});var d,e,f,g=Object.keys(a);for(d=0;d<g.length;d++)e=g[d],f=a[e],"_"!==e.charAt(0)&&"function"!=typeof f&&("module"===e?c[e]=f:Array.isArray(f)?c[e]=f.slice(0,3):c[e]=f&&"object"==typeof f?i.minExtend(a[e],b[e]):f);for(g=Object.keys(b),d=0;d<g.length;d++)e=g[d],"object"==typeof(f=b[e])&&e in c&&"object"==typeof c[e]||(c[e]=f);return c},i.titleCase=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},i.containsAny=function(a,b){for(var c=0;c<b.length;c++)if(-1!==a.indexOf(b[c]))return!0;return!1},i.isPlotDiv=function(a){var b=d.select(a);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")},i.removeElement=function(a){var b=a&&a.parentNode;b&&b.removeChild(a)},i.addStyleRule=function(a,b){if(!i.styleSheet){var c=document.createElement("style");c.appendChild(document.createTextNode("")),document.head.appendChild(c),i.styleSheet=c.sheet}var d=i.styleSheet;d.insertRule?d.insertRule(a+"{"+b+"}",0):d.addRule?d.addRule(a,b,0):i.warn("addStyleRule failed")},i.isIE=function(){return void 0!==window.navigator.msSaveBlob},i.isD3Selection=function(a){return a&&"function"==typeof a.classed},i.objectFromPath=function(a,b){for(var c,d=a.split("."),e=c={},f=0;f<d.length;f++){var g=d[f],h=null,i=d[f].match(/(.*)\[([0-9]+)\]/);i?(g=i[1],h=i[2],c=c[g]=[],f===d.length-1?c[h]=b:c[h]={},c=c[h]):(f===d.length-1?c[g]=b:c[g]={},c=c[g])}return e};var u=/^([^\[\.]+)\.(.+)?/,v=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(a){var b,c,d,e,f,g,h;if("object"==typeof a&&!Array.isArray(a))for(c in a)a.hasOwnProperty(c)&&((b=c.match(u))?(e=a[c],d=b[1],delete a[c],a[d]=i.extendDeepNoArrays(a[d]||{},i.objectFromPath(c,i.expandObjectPaths(e))[d])):(b=c.match(v))?(e=a[c],d=b[1],f=parseInt(b[2]),delete a[c],a[d]=a[d]||[],"."===b[3]?(h=b[4],g=a[d][f]=a[d][f]||{},i.extendDeepNoArrays(g,i.objectFromPath(h,i.expandObjectPaths(e)))):a[d][f]=i.expandObjectPaths(e)):a[c]=i.expandObjectPaths(a[c]));return a},i.numSeparate=function(a,b,c){if(c||(c=!1),"string"!=typeof b||0===b.length)throw new Error("Separator string required for formatting!");"number"==typeof a&&(a=String(a));var d=/(\d+)(\d{3})/,e=b.charAt(0),f=b.charAt(1),g=a.split("."),h=g[0],i=g.length>1?e+g[1]:"";if(f&&(g.length>1||h.length>4||c))for(;d.test(h);)h=h.replace(d,"$1"+f+"$2");return h+i};var w=/%{([^\s%{}]*)}/g,x=/^\w*$/;i.templateString=function(a,b){var c={};return a.replace(w,function(a,d){return x.test(d)?b[d]||"":(c[d]=c[d]||i.nestedProperty(b,d).get,c[d]()||"")})};i.subplotSort=function(a,b){for(var c=Math.min(a.length,b.length)+1,d=0,e=0,f=0;f<c;f++){var g=a.charCodeAt(f)||0,h=b.charCodeAt(f)||0,i=g>=48&&g<=57,j=h>=48&&h<=57;if(i&&(d=10*d+g-48),j&&(e=10*e+h-48),!i||!j){if(d!==e)return d-e;if(g!==h)return g-h}}return e-d},i.eventListenerOptionsSupported=function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,b),window.removeEventListener("test",null,b)}catch(b){a=!1}return a}},{"../constants/numerical":721,"./angles":726,"./clean_number":727,"./coerce":728,"./dates":729,"./ensure_array":730,"./extend":732,"./filter_unique":733,"./filter_visible":734,"./geometry2d":737,"./get_graph_div":738,"./identity":742,"./is_array":744,"./is_plain_object":745,"./keyed_container":746,"./localize":747,"./loggers":748,"./matrix":749,"./mod":750,"./nested_property":751,"./noop":752,"./notifier":753,"./push_unique":756,"./regex":758,"./relative_attr":759,"./relink_private":760,"./search":761,"./stats":764,"./throttle":767,"./to_log_range":768,d3:128,"fast-isnumeric":140}],744:[function(a,b,c){"use strict";var d="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}};b.exports=function(a){return Array.isArray(a)||d.isView(a)}},{}],745:[function(a,b,c){"use strict";b.exports=function(a){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(a):"[object Object]"===Object.prototype.toString.call(a)&&Object.getPrototypeOf(a)===Object.prototype}},{}],746:[function(a,b,c){"use strict";var d=a("./nested_property"),e=/^\w*$/;b.exports=function(a,b,c,f){c=c||"name",f=f||"value";var g,h,i={};h=b&&b.length?d(a,b).get():a,b=b||"",h=h||[];var j={};for(g=0;g<h.length;g++)j[h[g][c]]=g;var k=e.test(f),l={set:function(a,b){var e=null===b?4:0,g=j[a];void 0===g?(e|=3,g=h.length,j[a]=g):b!==(k?h[g][f]:d(h[g],f).get())&&(e|=2);var m=h[g]=h[g]||{};return m[c]=a,k?m[f]=b:d(m,f).set(b),null!==b&&(e&=-5),i[g]=i[g]|e,l},get:function(a){var b=j[a];return void 0===b?void 0:k?h[b][f]:d(h[b],f).get()},rename:function(a,b){var d=j[a];return void 0===d?l:(i[d]=1|i[d],j[b]=d,delete j[a],h[d][c]=b,l)},remove:function(a){var b=j[a];if(void 0===b)return l;var e=h[b];if(Object.keys(e).length>2)return i[b]=2|i[b],l.set(a,null);if(k){for(g=b;g<h.length;g++)i[g]=3|i[g];for(g=b;g<h.length;g++)j[h[g][c]]--;h.splice(b,1),delete j[a]}else d(e,f).set(null),i[b]=6|i[b];return l},constructUpdate:function(){for(var a,e,g={},j=Object.keys(i),l=0;l<j.length;l++)e=j[l],a=b+"["+e+"]",h[e]?(1&i[e]&&(g[a+"."+c]=h[e][c]),2&i[e]&&(g[a+"."+f]=k?4&i[e]?null:h[e][f]:4&i[e]?null:d(h[e],f).get())):g[a]=null;return g}};return l}},{"./nested_property":751}],747:[function(a,b,c){"use strict";var d=a("../registry");b.exports=function(a,b){for(var c=a._context.locale,e=0;e<2;e++){for(var f=a._context.locales,g=0;g<2;g++){var h=(f[c]||{}).dictionary;if(h){var i=h[b];if(i)return i}f=d.localeRegistry}var j=c.split("-")[0];if(j===c)break;c=j}return b}},{"../registry":873}],748:[function(a,b,c){"use strict";function d(a,b){if(a.apply)a.apply(a,b);else for(var c=0;c<b.length;c++)a(b[c])}var e=a("../plot_api/plot_config"),f=b.exports={};f.log=function(){if(e.logging>1){for(var a=["LOG:"],b=0;b<arguments.length;b++)a.push(arguments[b]);d(console.trace||console.log,a)}},f.warn=function(){if(e.logging>0){for(var a=["WARN:"],b=0;b<arguments.length;b++)a.push(arguments[b]);d(console.trace||console.log,a)}},f.error=function(){if(e.logging>0){for(var a=["ERROR:"],b=0;b<arguments.length;b++)a.push(arguments[b]);d(console.error,a)}}},{"../plot_api/plot_config":777}],749:[function(a,b,c){"use strict";c.init2dArray=function(a,b){for(var c=new Array(a),d=0;d<a;d++)c[d]=new Array(b);return c},c.transposeRagged=function(a){var b,c,d=0,e=a.length;for(b=0;b<e;b++)d=Math.max(d,a[b].length);var f=new Array(d);for(b=0;b<d;b++)for(f[b]=new Array(e),c=0;c<e;c++)f[b][c]=a[c][b];return f},c.dot=function(a,b){if(!a.length||!b.length||a.length!==b.length)return null;var d,e,f=a.length;if(a[0].length)for(d=new Array(f),e=0;e<f;e++)d[e]=c.dot(a[e],b);else if(b[0].length){var g=c.transposeRagged(b);for(d=new Array(g.length),e=0;e<g.length;e++)d[e]=c.dot(a,g[e])}else for(d=0,e=0;e<f;e++)d+=a[e]*b[e];return d},c.translationMatrix=function(a,b){return[[1,0,a],[0,1,b],[0,0,1]]},c.rotationMatrix=function(a){var b=a*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},c.rotationXYMatrix=function(a,b,d){return c.dot(c.dot(c.translationMatrix(b,d),c.rotationMatrix(a)),c.translationMatrix(-b,-d))},c.apply2DTransform=function(a){return function(){var b=arguments;3===b.length&&(b=b[0]);var d=1===arguments.length?b[0]:[b[0],b[1]];return c.dot(a,[d[0],d[1],1]).slice(0,2)}},c.apply2DTransform2=function(a){var b=c.apply2DTransform(a);return function(a){return b(a.slice(0,2)).concat(b(a.slice(2,4)))}}},{}],750:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a%b;return c<0?c+b:c}},{}],751:[function(a,b,c){"use strict";function d(a,b){return function(){var c,e,f,g,h,i=a;for(g=0;g<b.length-1;g++){if(-1===(c=b[g])){for(e=!0,f=[],h=0;h<i.length;h++)f[h]=d(i[h],b.slice(g+1))(),f[h]!==f[0]&&(e=!1);return e?f[0]:f}if("number"==typeof c&&!n(i))return;if("object"!=typeof(i=i[c])||null===i)return}if("object"==typeof i&&null!==i&&null!==(f=i[b[g]]))return f}}function e(a,b){if(!k(a)||o(a)&&"]"===b.charAt(b.length-1)||b.match(r)&&void 0!==a)return!1;if(!n(a))return!0;if(b.match(q))return!0;var c=p(b);return c&&""===c.index}function f(a,b,c){return function(d){var f,k,l=a,m="",o=[[a,m]],p=e(d,c);for(k=0;k<b.length-1;k++){if("number"==typeof(f=b[k])&&!n(l))throw"array index but container is not an array";if(-1===f){if(p=!h(l,b.slice(k+1),d,c))break;return}if(!i(l,f,b[k+1],p))break;if("object"!=typeof(l=l[f])||null===l)throw"container is not an object";m=g(m,f),o.push([l,m])}p?(k===b.length-1&&delete l[b[k]],j(o)):l[b[k]]=d}}function g(a,b){var c=b;return m(b)?c="["+b+"]":a&&(c="."+b),a+c}function h(a,b,c,d){var g,h=n(c),j=!0,k=c,l=d.replace("-1",0),m=!h&&e(c,l),o=b[0];for(g=0;g<a.length;g++)l=d.replace("-1",g),h&&(k=c[g%c.length],m=e(k,l)),m&&(j=!1),i(a,g,o,m)&&f(a[g],b,d.replace("-1",g))(k);return j}function i(a,b,c,d){if(void 0===a[b]){if(d)return!1;a[b]="number"==typeof c?[]:{}}return!0}function j(a){var b,c,d,f,h,i;for(b=a.length-1;b>=0;b--){if(d=a[b][0],f=a[b][1],i=!1,n(d))for(c=d.length-1;c>=0;c--)e(d[c],g(f,c))?i?d[c]=void 0:d.pop():i=!0;else if("object"==typeof d&&null!==d)for(h=Object.keys(d),i=!1,c=h.length-1;c>=0;c--)e(d[h[c]],g(f,h[c]))?delete d[h[c]]:i=!0;if(i)return}}function k(a){return void 0===a||null===a||"object"==typeof a&&(n(a)?!a.length:!Object.keys(a).length)}function l(a,b,c){return{set:function(){throw"bad container"},get:function(){},astr:b,parts:c,obj:a}}var m=a("fast-isnumeric"),n=a("./is_array"),o=a("./is_plain_object"),p=a("../plot_api/container_array_match");b.exports=function(a,b){if(m(b))b=String(b);else if("string"!=typeof b||"[-1]"===b.substr(b.length-4))throw"bad property string";for(var c,e,g,h=0,i=b.split(".");h<i.length;){if(c=String(i[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(c[1])i[h]=c[1];else{if(0!==h)throw"bad property string";i.splice(0,1)}for(e=c[2].substr(1,c[2].length-2).split("]["),g=0;g<e.length;g++)h++,i.splice(h,0,Number(e[g]))}h++}return"object"!=typeof a?l(a,b,i):{set:f(a,i,b),get:d(a,i),astr:b,parts:i,obj:a}};var q=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,r=/(^|\.)args\[/},{"../plot_api/container_array_match":772,"./is_array":744,"./is_plain_object":745,"fast-isnumeric":140}],752:[function(a,b,c){"use strict";b.exports=function(){}},{}],753:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=[];b.exports=function(a,b){function c(a){a.duration(700).style("opacity",0).each("end",function(a){var b=f.indexOf(a);-1!==b&&f.splice(b,1),d.select(this).remove()})}if(-1===f.indexOf(a)){f.push(a);var g=1e3;e(b)?g=b:"long"===b&&(g=3e3);var h=d.select("body").selectAll(".plotly-notifier").data([0]);h.enter().append("div").classed("plotly-notifier",!0);h.selectAll(".notifier-note").data(f).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var b=d.select(this);b.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){b.transition().call(c)});for(var e=b.append("p"),f=a.split(/<br\s*\/?>/g),h=0;h<f.length;h++)h&&e.append("br"),e.append("span").text(f[h]);b.transition().duration(700).style("opacity",1).transition().delay(g).call(c)})}}},{d3:128,"fast-isnumeric":140}],754:[function(a,b,c){"use strict";var d=a("./setcursor"),e="data-savedcursor";b.exports=function(a,b){var c=a.attr(e);if(b){if(!c){for(var f=(a.attr("class")||"").split(" "),g=0;g<f.length;g++){var h=f[g];0===h.indexOf("cursor-")&&a.attr(e,h.substr(7)).classed(h,!1)}a.attr(e)||a.attr(e,"!!")}d(a,b)}else c&&(a.attr(e,null),"!!"===c?d(a):d(a,c))}},{"./setcursor":762}],755:[function(a,b,c){"use strict";var d=a("./matrix").dot,e=a("../constants/numerical").BADNUM,f=b.exports={};f.tester=function(a){function b(a,b){var c=a[0],d=a[1];return!(c===e||c<h||c>i||d===e||d<j||d>k)&&(!b||!l(a))}function c(a,b){var c=a[0],d=a[1];if(c===e||c<h||c>i||d===e||d<j||d>k)return!1;var f,l,m,n,o,p=g.length,q=g[0][0],r=g[0][1],s=0;for(f=1;f<p;f++)if(l=q,m=r,q=g[f][0],r=g[f][1],n=Math.min(l,q),!(c<n||c>Math.max(l,q)||d>Math.max(m,r)))if(d<Math.min(m,r))c!==n&&s++;else{if(o=q===l?d:m+(c-l)*(r-m)/(q-l),d===o)return 1!==f||!b;d<=o&&c!==n&&s++}return s%2==1}if(Array.isArray(a[0][0]))return f.multitester(a);var d,g=a.slice(),h=g[0][0],i=h,j=g[0][1],k=j;for(g.push(g[0]),d=1;d<g.length;d++)h=Math.min(h,g[d][0]),i=Math.max(i,g[d][0]),j=Math.min(j,g[d][1]),k=Math.max(k,g[d][1]);var l,m=!1;5===g.length&&(g[0][0]===g[1][0]?g[2][0]===g[3][0]&&g[0][1]===g[3][1]&&g[1][1]===g[2][1]&&(m=!0,l=function(a){return a[0]===g[0][0]}):g[0][1]===g[1][1]&&g[2][1]===g[3][1]&&g[0][0]===g[3][0]&&g[1][0]===g[2][0]&&(m=!0,l=function(a){return a[1]===g[0][1]}));var n=!0,o=g[0];for(d=1;d<g.length;d++)if(o[0]!==g[d][0]||o[1]!==g[d][1]){n=!1;break}return{xmin:h,xmax:i,ymin:j,ymax:k,pts:g,contains:m?b:c,isRect:m,degenerate:n}},f.multitester=function(a){function b(a,b){for(var d=!1,e=0;e<c.length;e++)c[e].contains(a,b)&&(d=!1===c[e].subtract);return d}for(var c=[],d=a[0][0][0],e=d,g=a[0][0][1],h=g,i=0;i<a.length;i++){var j=f.tester(a[i]);j.subtract=a[i].subtract,c.push(j),d=Math.min(d,j.xmin),e=Math.max(e,j.xmax),g=Math.min(g,j.ymin),h=Math.max(h,j.ymax)}return{xmin:d,xmax:e,ymin:g,ymax:h,pts:[],contains:b,isRect:!1,degenerate:!1}};var g=f.isSegmentBent=function(a,b,c,e){var f,g,h,i=a[b],j=[a[c][0]-i[0],a[c][1]-i[1]],k=d(j,j),l=Math.sqrt(k),m=[-j[1]/l,j[0]/l];for(f=b+1;f<c;f++)if(g=[a[f][0]-i[0],a[f][1]-i[1]],(h=d(g,j))<0||h>k||Math.abs(d(g,m))>e)return!0;return!1};f.filter=function(a,b){function c(c){a.push(c);var h=d.length,i=e;d.splice(f+1);for(var j=i+1;j<a.length;j++)(j===a.length-1||g(a,i,j+1,b))&&(d.push(a[j]),d.length<h-2&&(e=j,f=d.length-1),i=j)}var d=[a[0]],e=0,f=0;if(a.length>1){c(a.pop())}return{addPt:c,raw:a,filtered:d}}},{"../constants/numerical":721,"./matrix":749}],756:[function(a,b,c){"use strict";b.exports=function(a,b){if(b instanceof RegExp){var c,d=b.toString();for(c=0;c<a.length;c++)if(a[c]instanceof RegExp&&a[c].toString()===d)return a;a.push(b)}else b&&-1===a.indexOf(b)&&a.push(b);return a}},{}],757:[function(a,b,c){"use strict";function d(a,b){for(var c,d=[],f=0;f<b.length;f++)c=b[f],d[f]=c===a?c:"object"==typeof c?Array.isArray(c)?e.extendDeep([],c):e.extendDeepAll({},c):c;return d}var e=a("../lib"),f=a("../plot_api/plot_config"),g={};g.add=function(a,b,c,d,e){var g,h;if(a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},h=a.undoQueue.index,a.autoplay)return void(a.undoQueue.inSequence||(a.autoplay=!1));!a.undoQueue.sequence||a.undoQueue.beginSequence?(g={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},a.undoQueue.queue.splice(h,a.undoQueue.queue.length-h,g),a.undoQueue.index+=1):g=a.undoQueue.queue[h-1],a.undoQueue.beginSequence=!1,g&&(g.undo.calls.unshift(b),g.undo.args.unshift(c),g.redo.calls.push(d),g.redo.args.push(e)),a.undoQueue.queue.length>f.queueLength&&(a.undoQueue.queue.shift(),a.undoQueue.index--)},g.startSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!0,a.undoQueue.beginSequence=!0},g.stopSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!1,a.undoQueue.beginSequence=!1},g.undo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.undo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.undo.calls.length;c++)g.plotDo(a,b.undo.calls[c],b.undo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1}},g.redo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.redo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.redo.calls.length;c++)g.plotDo(a,b.redo.calls[c],b.redo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},g.plotDo=function(a,b,c){a.autoplay=!0,c=d(a,c),b.apply(null,c)},b.exports=g},{"../lib":743,"../plot_api/plot_config":777}],758:[function(a,b,c){"use strict";c.counter=function(a,b,c){return new RegExp("^"+a+"([2-9]|[1-9][0-9]+)?"+(b||"")+(c?"":"$"))}},{}],759:[function(a,b,c){"use strict";var d=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;b.exports=function(a,b){for(;b;){var c=a.match(d);if(c)a=c[1];else{if(!a.match(e))throw new Error("bad relativeAttr call:"+[a,b]);a=""}if("^"!==b.charAt(0))break;b=b.slice(1)}return a&&"["!==b.charAt(0)?a+"."+b:a+b}},{}],760:[function(a,b,c){"use strict";var d=a("./is_array"),e=a("./is_plain_object");b.exports=function a(b,c){for(var f=Object.keys(c||{}),g=0;g<f.length;g++){var h=f[g],i=c[h],j=b[h];if("_"===h.charAt(0)||"function"==typeof i){if(h in b)continue;b[h]=i}else if(d(i)&&d(j)&&e(i[0]))for(var k=0;k<i.length;k++)e(i[k])&&e(j[k])&&a(j[k],i[k]);else e(i)&&e(j)&&(a(j,i),Object.keys(j).length||delete b[h])}}},{"./is_array":744,"./is_plain_object":745}],761:[function(a,b,c){"use strict";function d(a,b){return a<b}function e(a,b){return a<=b}function f(a,b){return a>b}function g(a,b){return a>=b}var h=a("fast-isnumeric"),i=a("./loggers");c.findBin=function(a,b,c){if(h(b.start))return c?Math.ceil((a-b.start)/b.size-1e-9)-1:Math.floor((a-b.start)/b.size+1e-9);var j,k,l=0,m=b.length,n=0,o=m>1?(b[m-1]-b[0])/(m-1):1;for(k=o>=0?c?d:e:c?g:f,a+=1e-9*o*(c?-1:1)*(o>=0?1:-1);l<m&&n++<100;)j=Math.floor((l+m)/2),k(b[j],a)?l=j+1:m=j;return n>90&&i.log("Long binary search..."),l-1},c.sorterAsc=function(a,b){return a-b},c.sorterDes=function(a,b){return b-a},c.distinctVals=function(a){var b=a.slice();b.sort(c.sorterAsc);for(var d=b.length-1,e=b[d]-b[0]||1,f=e/(d||1)/1e4,g=[b[0]],h=0;h<d;h++)b[h+1]>b[h]+f&&(e=Math.min(e,b[h+1]-b[h]),g.push(b[h+1]));return{vals:g,minDiff:e}},c.roundUp=function(a,b,c){for(var d,e=0,f=b.length-1,g=0,h=c?0:1,i=c?1:0,j=c?Math.ceil:Math.floor;e<f&&g++<100;)d=j((e+f)/2),b[d]<=a?e=d+h:f=d-i;return b[e]}},{"./loggers":748,"fast-isnumeric":140}],762:[function(a,b,c){"use strict";b.exports=function(a,b){(a.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&a.classed(b,!1)}),b&&a.classed("cursor-"+b,!0)}},{}],763:[function(a,b,c){"use strict";var d=a("../components/color"),e=function(){};b.exports=function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=e);a.destroy=function(){a.container.parentNode.removeChild(a.container)};var c=document.createElement("div");return c.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",c.style.cursor="pointer",c.style.fontSize="24px",c.style.color=d.defaults[0],a.container.appendChild(c),a.container.style.background="#FFFFFF",a.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../components/color":618}],764:[function(a,b,c){"use strict";var d=a("fast-isnumeric");c.aggNums=function(a,b,e,f){var g,h;if(f||(f=e.length),d(b)||(b=!1),Array.isArray(e[0])){for(h=new Array(f),g=0;g<f;g++)h[g]=c.aggNums(a,b,e[g]);e=h}for(g=0;g<f;g++)d(b)?d(e[g])&&(b=a(+b,+e[g])):b=e[g];return b},c.len=function(a){return c.aggNums(function(a){return a+1},0,a)},c.mean=function(a,b){return b||(b=c.len(a)),c.aggNums(function(a,b){return a+b},0,a)/b},c.variance=function(a,b,e){return b||(b=c.len(a)),d(e)||(e=c.mean(a,b)),c.aggNums(function(a,b){return a+Math.pow(b-e,2)},0,a)/b},c.stdev=function(a,b,d){return Math.sqrt(c.variance(a,b,d))},c.interp=function(a,b){if(!d(b))throw"n should be a finite number";if((b=b*a.length-.5)<0)return a[0];if(b>a.length-1)return a[a.length-1];var c=b%1;return c*a[Math.ceil(b)]+(1-c)*a[Math.floor(b)]}},{"fast-isnumeric":140}],765:[function(a,b,c){"use strict";function d(a){return a?e(a):[0,0,0,1]}var e=a("color-normalize");b.exports=d},{"color-normalize":99}],766:[function(a,b,c){"use strict";function d(a,b){return a.node().getBoundingClientRect()[b]}function e(a){return a.replace(r,"\\lt ").replace(s,"\\gt ")}function f(a,b,c){var d="math-output-"+m.randstr([],64),f=l.select("body").append("div").attr({id:d}).style({visibility:"hidden",position:"absolute"}).style({"font-size":b.fontSize+"px"}).text(e(a));MathJax.Hub.Queue(["Typeset",MathJax.Hub,f.node()],function(){var b=l.select("body").select("#MathJax_SVG_glyphs");if(f.select(".MathJax_SVG").empty()||!f.select("svg").node())m.log("There was an error in the tex syntax.",a),c();else{var d=f.select("svg").node().getBoundingClientRect();c(f.select(".MathJax_SVG"),b,d)}f.remove()})}function g(a,b){if(!a)return null;var c=a.match(b);return c&&(c[3]||c[4])}function h(a,b){if(!a)return"";for(var c=0;c<b.length;c++){var d=b[c];a=a.replace(d.regExp,d.sub)}return a}function i(a){return h(a,z)}function j(a,b){function c(){k++;var b=document.createElementNS(n.svg,"tspan");l.select(b).attr({class:"line",dy:k*p+"em"}),a.appendChild(b),f=b;var c=j;if(j=[{node:b}],c.length>1)for(var e=1;e<c.length;e++)d(c[e])}function d(a){var b,c=a.type,d={};if("a"===c){b="a";var g=a.target,h=a.href,i=a.popup;h&&(d={"xlink:xlink:show":"_blank"===g||"_"!==g.charAt(0)?"new":"replace",target:g,"xlink:xlink:href":h},i&&(d.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+i+'");return false;'))}else b="tspan";a.style&&(d.style=a.style);var k=document.createElementNS(n.svg,b);if("sup"===c||"sub"===c){e(f,w),f.appendChild(k);var m=document.createElementNS(n.svg,"tspan");e(m,w),l.select(m).attr("dy",v[c]),d.dy=u[c],f.appendChild(k),f.appendChild(m)}else f.appendChild(k);l.select(k).attr(d),f=a.node=k,j.push(a)}function e(a,b){a.appendChild(document.createTextNode(b))}b=i(b).replace(A," ");var f,h=!1,j=[],k=-1;D.test(b)?c():(f=a,j=[{node:a}]);for(var o=b.split(B),q=0;q<o.length;q++){var r=o[q],s=r.match(C),y=s&&s[2].toLowerCase(),z=t[y];if("br"===y)c();else if(void 0===z)e(f,r);else if(s[1])!function(a){if(1===j.length)return void m.log("Ignoring unexpected end tag </"+a+">.",b);var c=j.pop();a!==c.type&&m.log("Start tag <"+c.type+"> doesnt match end tag <"+a+">. Pretending it did match.",b),f=j[j.length-1].node}(y);else{var J=s[4],K={type:y},L=g(J,E);if(L?(L=L.replace(I,"$1 fill:"),z&&(L+=";"+z)):z&&(L=z),L&&(K.style=L),"a"===y){h=!0;var M=g(J,F);if(M){var N=document.createElement("a");N.href=M,-1!==x.indexOf(N.protocol)&&(K.href=encodeURI(M),K.target=g(J,G)||"_blank",K.popup=g(J,H))}}d(K)}}return h}function k(a,b,c){var d,e,f,g=c.horizontalAlign,h=c.verticalAlign||"top",i=a.node().getBoundingClientRect(),j=b.node().getBoundingClientRect();return e="bottom"===h?function(){return i.bottom-d.height}:"middle"===h?function(){return i.top+(i.height-d.height)/2}:function(){return i.top},f="right"===g?function(){return i.right-d.width}:"center"===g?function(){return i.left+(i.width-d.width)/2}:function(){return i.left},function(){return d=this.node().getBoundingClientRect(),this.style({top:e()-j.top+"px",left:f()-j.left+"px","z-index":1e3}),this}}var l=a("d3"),m=a("../lib"),n=a("../constants/xmlns_namespaces"),o=a("../constants/string_mappings"),p=a("../constants/alignment").LINE_SPACING,q=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;c.convertToTspans=function(a,b,e){function g(){k.empty()||(m=a.attr("class")+"-math",k.select("svg."+m).remove()),a.text("").style("white-space","pre"),j(a.node(),h)&&a.style("pointer-events","all"),c.positionText(a),e&&e.call(a)}var h=a.text(),i=!a.attr("data-notex")&&"undefined"!=typeof MathJax&&h.match(q),k=l.select(a.node().parentNode);if(!k.empty()){var m=a.attr("class")?a.attr("class").split(" ")[0]:"text";return m+="-math",k.selectAll("svg."+m).remove(),k.selectAll("g."+m+"-group").remove(),a.style("display",null).attr({"data-unformatted":h,"data-math":"N"}),i?(b&&b._promises||[]).push(new Promise(function(b){a.style("display","none");var c=parseInt(a.node().style.fontSize,10);f(i[2],{fontSize:c},function(f,i,j){k.selectAll("svg."+m).remove(),k.selectAll("g."+m+"-group").remove();var l=f&&f.select("svg");if(!l||!l.node())return g(),void b();var n=k.append("g").classed(m+"-group",!0).attr({"pointer-events":"none","data-unformatted":h,"data-math":"Y"});n.node().appendChild(l.node()),i&&i.node()&&l.node().insertBefore(i.node().cloneNode(!0),l.node().firstChild),l.attr({class:m,height:j.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var o=a.node().style.fill||"black";l.select("g").attr({fill:o,stroke:o});var p=d(l,"width"),q=d(l,"height"),r=+a.attr("x")-p*{start:0,middle:.5,end:1}[a.attr("text-anchor")||"start"],s=c||d(a,"height"),t=-s/4;"y"===m[0]?(n.attr({transform:"rotate("+[-90,+a.attr("x"),+a.attr("y")]+") translate("+[-p/2,t-q/2]+")"}),l.attr({x:+a.attr("x"),y:+a.attr("y")})):"l"===m[0]?l.attr({x:a.attr("x"),y:t-q/2}):"a"===m[0]?l.attr({x:0,y:t}):l.attr({x:r,y:+a.attr("y")+t-q/2}),e&&e.call(a,n),b(n)})})):g(),a}};var r=/(<|&lt;|&#60;)/g,s=/(>|&gt;|&#62;)/g,t={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"
},w="​",x=["http:","https:","mailto:","",void 0,":"],y=new RegExp("</?("+Object.keys(t).join("|")+")( [^>]*)?/?>","g"),z=Object.keys(o.entityToUnicode).map(function(a){return{regExp:new RegExp("&"+a+";","g"),sub:o.entityToUnicode[a]}}),A=/(\r\n?|\n)/g,B=/(<[^<>]*>)/,C=/<(\/?)([^ >]*)(\s+(.*))?>/i,D=/<br(\s+.*)?>/i,E=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,F=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,G=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,H=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,I=/(^|;)\s*color:/;c.plainText=function(a){return(a||"").replace(y," ")},c.lineCount=function(a){return a.selectAll("tspan.line").size()||1},c.positionText=function(a,b,c){return a.each(function(){function a(a,b){return void 0===b?null===(b=d.attr(a))&&(d.attr(a,0),b=0):d.attr(a,b),b}var d=l.select(this),e=a("x",b),f=a("y",c);"text"===this.nodeName&&d.selectAll("tspan.line").attr({x:e,y:f})})},c.makeEditable=function(a,b){function c(){e(),a.style({opacity:0});var b,c=i.attr("class");(b=c?"."+c.split(" ")[0]+"-math-group":"[class*=-math-group]")&&l.select(a.node().parentNode).select(b).style({opacity:0})}function d(a){var b=a.node(),c=document.createRange();c.selectNodeContents(b);var d=window.getSelection();d.removeAllRanges(),d.addRange(c),b.focus()}function e(){var c=l.select(f),e=c.select(".svg-container"),g=e.append("div"),i=a.node().style,j=parseFloat(i.fontSize||12);g.classed("plugin-editable editable",!0).style({position:"absolute","font-family":i.fontFamily||"Arial","font-size":j,color:b.fill||i.fill||"black",opacity:1,"background-color":b.background||"transparent",outline:"#ffffff33 1px solid",margin:[-j/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(b.text||a.attr("data-unformatted")).call(k(a,e,b)).on("blur",function(){f._editing=!1,a.text(this.textContent).style({opacity:1});var b,c=l.select(this).attr("class");(b=c?"."+c.split(" ")[0]+"-math-group":"[class*=-math-group]")&&l.select(a.node().parentNode).select(b).style({opacity:0});var d=this.textContent;l.select(this).transition().duration(0).remove(),l.select(document).on("mouseup",null),h.edit.call(a,d)}).on("focus",function(){var a=this;f._editing=!0,l.select(document).on("mouseup",function(){if(l.event.target===a)return!1;document.activeElement===g.node()&&g.node().blur()})}).on("keyup",function(){27===l.event.which?(f._editing=!1,a.style({opacity:1}),l.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),h.cancel.call(a,this.textContent)):(h.input.call(a,this.textContent),l.select(this).call(k(a,e,b)))}).on("keydown",function(){13===l.event.which&&this.blur()}).call(d)}var f=b.gd,g=b.delegate,h=l.dispatch("edit","input","cancel"),i=g||a;if(a.style({"pointer-events":g?"none":"all"}),1!==a.size())throw new Error("boo");return b.immediate?c():i.on("click",c),l.rebind(a,h,"on")}},{"../constants/alignment":716,"../constants/string_mappings":722,"../constants/xmlns_namespaces":723,"../lib":743,d3:128}],767:[function(a,b,c){"use strict";function d(a){a&&null!==a.timer&&(clearTimeout(a.timer),a.timer=null)}var e={};c.throttle=function(a,b,c){function f(){c(),g.ts=Date.now(),g.onDone&&(g.onDone(),g.onDone=null)}var g=e[a],h=Date.now();if(!g){for(var i in e)e[i].ts<h-6e4&&delete e[i];g=e[a]={ts:0,timer:null}}if(d(g),h>g.ts+b)return void f();g.timer=setTimeout(function(){f(),g.timer=null},b)},c.done=function(a){var b=e[a];return b&&b.timer?new Promise(function(a){var c=b.onDone;b.onDone=function(){c&&c(),a(),b.onDone=null}}):Promise.resolve()},c.clear=function(a){if(a)d(e[a]),delete e[a];else for(var b in e)c.clear(b)}},{}],768:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a,b){if(a>0)return Math.log(a)/Math.LN10;var c=Math.log(Math.min(b[0],b[1]))/Math.LN10;return d(c)||(c=Math.log(Math.max(b[0],b[1]))/Math.LN10-6),c}},{"fast-isnumeric":140}],769:[function(a,b,c){"use strict";var d=b.exports={},e=a("../plots/geo/constants").locationmodeToLayer,f=a("topojson-client").feature;d.getTopojsonName=function(a){return[a.scope.replace(/ /g,"-"),"_",a.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(a,b){return a+b+".json"},d.getTopojsonFeatures=function(a,b){var c=e[a.locationmode],d=b.objects[c];return f(b,d).features}},{"../plots/geo/constants":818,"topojson-client":549}],770:[function(a,b,c){"use strict";b.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],771:[function(a,b,c){"use strict";b.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""]}}},{}],772:[function(a,b,c){"use strict";var d=a("../registry");b.exports=function(a){for(var b,c,e=d.layoutArrayContainers,f=d.layoutArrayRegexes,g=a.split("[")[0],h=0;h<f.length;h++)if((c=a.match(f[h]))&&0===c.index){b=c[0];break}if(b||(b=e[e.indexOf(g)]),!b)return!1;var i=a.substr(b.length);return i?!!(c=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:b,index:Number(c[1]),property:c[3]||""}:{array:b,index:"",property:""}}},{"../registry":873}],773:[function(a,b,c){"use strict";function d(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!1;return b}function e(a,b,c){var d=h({},a);for(var e in d){var g=d[e];i(g)&&(d[e]=f(g,b,c,e))}return"from-root"===c&&(d.editType=b),d}function f(a,b,c,d){if(a.valType){var g=h({},a);if(g.editType=b,Array.isArray(a.items)){g.items=new Array(a.items.length);for(var i=0;i<a.items.length;i++)g.items[i]=f(a.items[i],b,"from-root")}return g}return e(a,b,"_"===d.charAt(0)?"nested":"from-root")}var g=a("../lib"),h=g.extendFlat,i=g.isPlainObject,j={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]},k={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","layoutstyle","modebar","camera","arraydraw"]},l=j.flags.slice().concat(["clearCalc","fullReplot"]),m=k.flags.slice().concat("layoutReplot");b.exports={traces:j,layout:k,traceFlags:function(){return d(l)},layoutFlags:function(){return d(m)},update:function(a,b){var c=b.editType;if(c&&"none"!==c)for(var d=c.split("+"),e=0;e<d.length;e++)a[d[e]]=!0},overrideAll:e}},{"../lib":743}],774:[function(a,b,c){"use strict";function d(a,b){var c=a[b],d=b.charAt(0);c&&"paper"!==c&&(a[b]=n(c,d))}function e(a){var b="middle",c="center";return-1!==a.indexOf("top")?b="top":-1!==a.indexOf("bottom")&&(b="bottom"),-1!==a.indexOf("left")?c="left":-1!==a.indexOf("right")&&(c="right"),b+" "+c}function f(a,b){return b in a&&"object"==typeof a[b]&&0===Object.keys(a[b]).length}function g(a){var b=a.search(q);if(b>0)return a.substr(0,b)}var h=a("fast-isnumeric"),i=a("gl-mat4/fromQuat"),j=a("../registry"),k=a("../lib"),l=a("../plots/plots"),m=a("../plots/cartesian/axis_ids"),n=m.cleanId,o=m.getFromTrace,p=a("../components/color");c.clearPromiseQueue=function(a){Array.isArray(a._promises)&&a._promises.length>0&&k.log("Clearing previous rejected promises from queue."),a._promises=[]},c.cleanLayout=function(a){var b,c;a||(a={}),a.xaxis1&&(a.xaxis||(a.xaxis=a.xaxis1),delete a.xaxis1),a.yaxis1&&(a.yaxis||(a.yaxis=a.yaxis1),delete a.yaxis1),a.scene1&&(a.scene||(a.scene=a.scene1),delete a.scene1);var e=(l.subplotsRegistry.cartesian||{}).attrRegex,g=(l.subplotsRegistry.gl3d||{}).attrRegex,h=Object.keys(a);for(b=0;b<h.length;b++){var j=h[b];if(e&&e.test(j)){var m=a[j];m.anchor&&"free"!==m.anchor&&(m.anchor=n(m.anchor)),m.overlaying&&(m.overlaying=n(m.overlaying)),m.type||(m.isdate?m.type="date":m.islog?m.type="log":!1===m.isdate&&!1===m.islog&&(m.type="linear")),"withzero"!==m.autorange&&"tozero"!==m.autorange||(m.autorange=!0,m.rangemode="tozero"),delete m.islog,delete m.isdate,delete m.categories,f(m,"domain")&&delete m.domain,void 0!==m.autotick&&(void 0===m.tickmode&&(m.tickmode=m.autotick?"auto":"linear"),delete m.autotick)}else if(g&&g.test(j)){var o=a[j],q=o.cameraposition;if(Array.isArray(q)&&4===q[0].length){var r=q[0],s=q[1],t=q[2],u=i([],r),v=[];for(c=0;c<3;++c)v[c]=s[c]+t*u[2+4*c];o.camera={eye:{x:v[0],y:v[1],z:v[2]},center:{x:s[0],y:s[1],z:s[2]},up:{x:u[1],y:u[5],z:u[9]}},delete o.cameraposition}}}var w=Array.isArray(a.annotations)?a.annotations.length:0;for(b=0;b<w;b++){var x=a.annotations[b];k.isPlainObject(x)&&(x.ref&&("paper"===x.ref?(x.xref="paper",x.yref="paper"):"data"===x.ref&&(x.xref="x",x.yref="y"),delete x.ref),d(x,"xref"),d(x,"yref"))}var y=Array.isArray(a.shapes)?a.shapes.length:0;for(b=0;b<y;b++){var z=a.shapes[b];k.isPlainObject(z)&&(d(z,"xref"),d(z,"yref"))}var A=a.legend;return A&&(A.x>3?(A.x=1.02,A.xanchor="left"):A.x<-2&&(A.x=-.02,A.xanchor="right"),A.y>3?(A.y=1.02,A.yanchor="bottom"):A.y<-2&&(A.y=-.02,A.yanchor="top")),"rotate"===a.dragmode&&(a.dragmode="orbit"),p.clean(a),a},c.cleanData=function(a,b){for(var d=[],g=(a.concat(Array.isArray(b)?b:[]).filter(function(a){return"uid"in a}).map(function(a){return a.uid})),h=0;h<a.length;h++){var i,m=a[h];if(!("uid"in m)||-1!==d.indexOf(m.uid)){var o;for(i=0;i<100&&(o=k.randstr(g),-1!==d.indexOf(o));i++);m.uid=k.randstr(g),g.push(m.uid)}if(d.push(m.uid),"histogramy"===m.type&&"xbins"in m&&!("ybins"in m)&&(m.ybins=m.xbins,delete m.xbins),m.error_y&&"opacity"in m.error_y){var q=p.defaults,r=m.error_y.color||(j.traceIs(m,"bar")?p.defaultLine:q[h%q.length]);m.error_y.color=p.addOpacity(p.rgb(r),p.opacity(r)*m.error_y.opacity),delete m.error_y.opacity}if("bardir"in m&&("h"!==m.bardir||!j.traceIs(m,"bar")&&"histogram"!==m.type.substr(0,9)||(m.orientation="h",c.swapXYData(m)),delete m.bardir),"histogramy"===m.type&&c.swapXYData(m),"histogramx"!==m.type&&"histogramy"!==m.type||(m.type="histogram"),"scl"in m&&(m.colorscale=m.scl,delete m.scl),"reversescl"in m&&(m.reversescale=m.reversescl,delete m.reversescl),m.xaxis&&(m.xaxis=n(m.xaxis,"x")),m.yaxis&&(m.yaxis=n(m.yaxis,"y")),j.traceIs(m,"gl3d")&&m.scene&&(m.scene=l.subplotsRegistry.gl3d.cleanId(m.scene)),j.traceIs(m,"pie")||j.traceIs(m,"bar")||(Array.isArray(m.textposition)?m.textposition=m.textposition.map(e):m.textposition&&(m.textposition=e(m.textposition))),j.traceIs(m,"2dMap")&&("YIGnBu"===m.colorscale&&(m.colorscale="YlGnBu"),"YIOrRd"===m.colorscale&&(m.colorscale="YlOrRd")),j.traceIs(m,"markerColorscale")&&m.marker){var s=m.marker;"YIGnBu"===s.colorscale&&(s.colorscale="YlGnBu"),"YIOrRd"===s.colorscale&&(s.colorscale="YlOrRd")}if("surface"===m.type&&k.isPlainObject(m.contours)){var t=["x","y","z"];for(i=0;i<t.length;i++){var u=m.contours[t[i]];k.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}}if(Array.isArray(m.transforms)){var v=m.transforms;for(i=0;i<v.length;i++){var w=v[i];if(k.isPlainObject(w))switch(w.type){case"filter":w.filtersrc&&(w.target=w.filtersrc,delete w.filtersrc),w.calendar&&(w.valuecalendar||(w.valuecalendar=w.calendar),delete w.calendar);break;case"groupby":if(w.styles=w.styles||w.style,w.styles&&!Array.isArray(w.styles)){var x=w.styles,y=Object.keys(x);w.styles=[];for(var z=0;z<y.length;z++)w.styles.push({target:y[z],value:x[y[z]]})}}}}f(m,"line")&&delete m.line,"marker"in m&&(f(m.marker,"line")&&delete m.marker.line,f(m,"marker")&&delete m.marker),p.clean(m)}},c.swapXYData=function(a){var b;if(k.swapAttrs(a,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(a.z)&&Array.isArray(a.z[0])&&(a.transpose?delete a.transpose:a.transpose=!0),a.error_x&&a.error_y){var c=a.error_y,d="copy_ystyle"in c?c.copy_ystyle:!(c.color||c.thickness||c.width);k.swapAttrs(a,["error_?.copy_ystyle"]),d&&k.swapAttrs(a,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof a.hoverinfo){var e=a.hoverinfo.split("+");for(b=0;b<e.length;b++)"x"===e[b]?e[b]="y":"y"===e[b]&&(e[b]="x");a.hoverinfo=e.join("+")}},c.coerceTraceIndices=function(a,b){return h(b)?[b]:Array.isArray(b)&&b.length?b:a.data.map(function(a,b){return b})},c.manageArrayContainers=function(a,b,c){var d=a.obj,e=a.parts,f=e.length,g=e[f-1],i=h(g);if(i&&null===b){var j=e.slice(0,f-1).join(".");k.nestedProperty(d,j).get().splice(g,1)}else i&&void 0===a.get()?(void 0===a.get()&&(c[a.astr]=null),a.set(b)):a.set(b)};var q=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;c.hasParent=function(a,b){for(var c=g(b);c;){if(c in a)return!0;c=g(c)}return!1};var r=["x","y","z"];c.clearAxisTypes=function(a,b,c){for(var d=0;d<b.length;d++)for(var e=a._fullData[d],f=0;f<3;f++){var g=o(a,e,r[f]);if(g&&"log"!==g.type){var h=g._name,i=g._id.substr(1);if("scene"===i.substr(0,5)){if(void 0!==c[i])continue;h=i+"."+h}var j=h+".type";void 0===c[h]&&void 0===c[j]&&k.nestedProperty(a.layout,j).set(null)}}}},{"../components/color":618,"../lib":743,"../plots/cartesian/axis_ids":792,"../plots/plots":852,"../registry":873,"fast-isnumeric":140,"gl-mat4/fromQuat":183}],775:[function(a,b,c){"use strict";var d=a("../lib/nested_property"),e=a("../lib/is_plain_object"),f=a("../lib/noop"),g=a("../lib/loggers"),h=a("../lib/search").sorterAsc,i=a("../registry");c.containerArrayMatch=a("./container_array_match");var j=c.isAddVal=function(a){return"add"===a||e(a)},k=c.isRemoveVal=function(a){return null===a||"remove"===a};c.applyContainerArrayChanges=function(a,b,c,e){var l=b.astr,m=i.getComponentMethod(l,"supplyLayoutDefaults"),n=i.getComponentMethod(l,"draw"),o=i.getComponentMethod(l,"drawOne"),p=e.replot||e.recalc||m===f||n===f,q=a.layout,r=a._fullLayout;if(c[""]){Object.keys(c).length>1&&g.warn("Full array edits are incompatible with other edits",l);var s=c[""][""];if(k(s))b.set(null);else{if(!Array.isArray(s))return g.warn("Unrecognized full array edit value",l,s),!0;b.set(s)}return!p&&(m(q,r),n(a),!0)}var t,u,v,w,x,y,z,A=Object.keys(c).map(Number).sort(h),B=b.get(),C=B||[],D=d(r,l).get(),E=[],F=-1,G=C.length;for(t=0;t<A.length;t++)if(v=A[t],w=c[v],x=Object.keys(w),y=w[""],z=j(y),v<0||v>C.length-(z?0:1))g.warn("index out of range",l,v);else if(void 0!==y)x.length>1&&g.warn("Insertion & removal are incompatible with edits to the same index.",l,v),k(y)?E.push(v):z?("add"===y&&(y={}),C.splice(v,0,y),D&&D.splice(v,0,{})):g.warn("Unrecognized full object edit value",l,v,y),-1===F&&(F=v);else for(u=0;u<x.length;u++)d(C[v],x[u]).set(w[x[u]]);for(t=E.length-1;t>=0;t--)C.splice(E[t],1),D&&D.splice(E[t],1);if(C.length?B||b.set(C):b.set(null),p)return!1;if(m(q,r),o!==f){var H;if(-1===F)H=A;else{for(G=Math.max(C.length,G),H=[],t=0;t<A.length&&!((v=A[t])>=F);t++)H.push(v);for(t=F;t<G;t++)H.push(t)}for(t=0;t<H.length;t++)o(a,H[t])}else n(a);return!0}},{"../lib/is_plain_object":745,"../lib/loggers":748,"../lib/nested_property":751,"../lib/noop":752,"../lib/search":761,"../registry":873,"./container_array_match":772}],776:[function(a,b,c){"use strict";function d(a,b){try{a._fullLayout._paper.style("background",b)}catch(a){w.error(a)}}function e(a,b){d(a,F.combine(b,"white"))}function f(a,b){a._context||(a._context=w.extendDeep({},v.defaultConfig));var c,f,g,h=a._context;if(b){for(f=Object.keys(b),c=0;c<f.length;c++)"editable"!==(g=f[c])&&"edits"!==g&&g in h&&("setBackground"===g&&"opaque"===b[g]?h[g]=e:h[g]=b[g]);b.plot3dPixelRatio&&!h.plotGlPixelRatio&&(h.plotGlPixelRatio=h.plot3dPixelRatio);var i=b.editable;if(void 0!==i)for(h.editable=i,f=Object.keys(h.edits),c=0;c<f.length;c++)h.edits[f[c]]=i;if(b.edits)for(f=Object.keys(b.edits),c=0;c<f.length;c++)(g=f[c])in h.edits&&(h.edits[g]=b.edits[g])}h.staticPlot&&(h.editable=!1,h.edits={},h.autosizable=!1,h.scrollZoom=!1,h.doubleClick=!1,h.showTips=!1,h.showLink=!1,h.displayModeBar=!1),"hover"!==h.displayModeBar||u||(h.displayModeBar=!0),"transparent"!==h.setBackground&&"function"==typeof h.setBackground||(h.setBackground=d)}function g(a,b,c){var d=s.select(a).selectAll(".plot-container").data([0]);d.enter().insert("div",":first-child").classed("plot-container plotly",!0);var e=d.selectAll(".svg-container").data([0]);e.enter().append("div").classed("svg-container",!0).style("position","relative"),e.html(""),b&&(a.data=b),c&&(a.layout=c),C.manager.fillLayout(a),e.style({width:a._fullLayout.width+"px",height:a._fullLayout.height+"px"}),a.framework=C.manager.framework(a),a.framework({data:a.data,layout:a.layout},e.node()),a.framework.setUndoPoint();var f=a.framework.svg(),g=1,h=a._fullLayout.title;""!==h&&h||(g=0);var i=function(){this.call(I.convertToTspans,a)},j=f.select(".title-group text").call(i);if(a._context.edits.titleText){var k=w._(a,"Click to enter Plot title");h&&h!==k||(g=.2,j.attr({"data-unformatted":k}).text(k).style({opacity:g}).on("mouseover.opacity",function(){s.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){s.select(this).transition().duration(1e3).style("opacity",0)}));var l=function(){this.call(I.makeEditable,{gd:a}).on("edit",function(b){a.framework({layout:{title:b}}),this.text(b).call(i),this.call(l)}).on("cancel",function(){var a=this.attr("data-unformatted");this.text(a).call(i)})};j.call(l)}return a._context.setBackground(a,a._fullLayout.paper_bgcolor),B.addLinks(a),Promise.resolve()}function h(a,b){var c,d,e=b+1,f=[];for(c=0;c<a.length;c++)d=a[c],d<0?f.push(e+d):f.push(d);return f}function i(a,b,c){var d,e;for(d=0;d<b.length;d++){if((e=b[d])!==parseInt(e,10))throw new Error("all values in "+c+" must be integers");if(e>=a.data.length||e<-a.data.length)throw new Error(c+" must be valid indices for gd.data.");if(b.indexOf(e,d+1)>-1||e>=0&&b.indexOf(-a.data.length+e)>-1||e<0&&b.indexOf(a.data.length+e)>-1)throw new Error("each index in "+c+" must be unique.")}}function j(a,b,c){if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if(void 0===b)throw new Error("currentIndices is a required argument.");if(Array.isArray(b)||(b=[b]),i(a,b,"currentIndices"),void 0===c||Array.isArray(c)||(c=[c]),void 0!==c&&i(a,c,"newIndices"),void 0!==c&&b.length!==c.length)throw new Error("current and new indices must be of equal length.")}function k(a,b,c){var d,e;if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if(void 0===b)throw new Error("traces must be defined.");for(Array.isArray(b)||(b=[b]),d=0;d<b.length;d++)if("object"!=typeof(e=b[d])||Array.isArray(e)||null===e)throw new Error("all values in traces array must be non-array objects");if(void 0===c||Array.isArray(c)||(c=[c]),void 0!==c&&c.length!==b.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function l(a,b,c,d){var e=w.isPlainObject(d);if(!Array.isArray(a.data))throw new Error("gd.data must be an array");if(!w.isPlainObject(b))throw new Error("update must be a key:value object");if(void 0===c)throw new Error("indices must be an integer or array of integers");i(a,c,"indices");for(var f in b){if(!Array.isArray(b[f])||b[f].length!==c.length)throw new Error("attribute "+f+" must be an array of length equal to indices array length");if(e&&(!(f in d)||!Array.isArray(d[f])||d[f].length!==b[f].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function m(a,b,c,d){var e,f,g,i,j,k=w.isPlainObject(d),l=[];Array.isArray(c)||(c=[c]),c=h(c,a.data.length-1);for(var m in b)for(var n=0;n<c.length;n++){if(e=a.data[c[n]],g=w.nestedProperty(e,m),f=g.get(),i=b[m][n],!Array.isArray(i))throw new Error("attribute: "+m+" index: "+n+" must be an array");if(!Array.isArray(f))throw new Error("cannot extend missing or non-array attribute: "+m);j=k?d[m][n]:d,t(j)||(j=-1),l.push({prop:g,target:f,insert:i,maxp:Math.floor(j)})}return l}function n(a,b,c,d,e,f){l(a,b,c,d);for(var g,h,i,j=m(a,b,c,d),k=[],n={},o={},p=0;p<j.length;p++)h=j[p].prop,i=j[p].maxp,g=e(j[p].target,j[p].insert),i>=0&&i<g.length&&(k=f(g,i)),i=j[p].target.length,h.set(g),Array.isArray(n[h.astr])||(n[h.astr]=[]),Array.isArray(o[h.astr])||(o[h.astr]=[]),n[h.astr].push(k),o[h.astr].push(i);return{update:n,maxPoints:o}}function o(a){return void 0===a?null:a}function p(a,b,c){function d(){return c.map(function(){})}function e(a){var b=v.Axes.id2name(a);-1===j.indexOf(b)&&j.push(b)}function f(a){return"LAYOUT"+a+".autorange"}function g(a){return"LAYOUT"+a+".range"}function h(e,f,g){if(Array.isArray(e))return void e.forEach(function(a){h(a,f,g)});if(!(e in b||K.hasParent(b,e))){var i;i="LAYOUT"===e.substr(0,6)?w.nestedProperty(a.layout,e.replace("LAYOUT","")):w.nestedProperty(m[c[g]],e),e in q||(q[e]=d()),void 0===q[e][g]&&(q[e][g]=o(i.get())),void 0!==f&&i.set(f)}}var i,j,k=a._fullLayout,l=a._fullData,m=a.data,n=M.traceFlags(),p={},q={},r={};for(var s in b){if(K.hasParent(b,s))throw new Error("cannot set "+s+"and a parent attribute simultaneously");var t,u,x,y,C,D,E=b[s];if(p[s]=E,"LAYOUT"!==s.substr(0,6)){for(q[s]=d(),i=0;i<c.length;i++)if(t=m[c[i]],u=l[c[i]],x=w.nestedProperty(t,s),y=x.get(),void 0!==(C=Array.isArray(E)?E[i%E.length]:E)){if((D=A.getTraceValObject(u,x.parts))&&D.impliedEdits&&null!==C)for(var F in D.impliedEdits)h(w.relativeAttr(s,F),D.impliedEdits[F],i);else if("colorbar.thicknessmode"===s&&x.get()!==C&&-1!==["fraction","pixels"].indexOf(C)&&u.colorbar){var G=-1!==["top","bottom"].indexOf(u.colorbar.orient)?k.height-k.margin.t-k.margin.b:k.width-k.margin.l-k.margin.r;h("colorbar.thickness",u.colorbar.thickness*("fraction"===C?1/G:G),i)}else if("colorbar.lenmode"===s&&x.get()!==C&&-1!==["fraction","pixels"].indexOf(C)&&u.colorbar){var H=-1!==["top","bottom"].indexOf(u.colorbar.orient)?k.width-k.margin.l-k.margin.r:k.height-k.margin.t-k.margin.b;h("colorbar.len",u.colorbar.len*("fraction"===C?1/H:H),i)}else"colorbar.tick0"!==s&&"colorbar.dtick"!==s||h("colorbar.tickmode","linear",i);if("type"===s&&"pie"===C!=("pie"===y)){var I="x",J="y";"bar"!==C&&"bar"!==y||"h"!==t.orientation||(I="y",J="x"),w.swapAttrs(t,["?","?src"],"labels",I),w.swapAttrs(t,["d?","?0"],"label",I),w.swapAttrs(t,["?","?src"],"values",J),"pie"===y?(w.nestedProperty(t,"marker.color").set(w.nestedProperty(t,"marker.colors").get()),k._pielayer.selectAll("g.trace").remove()):z.traceIs(t,"cartesian")&&(w.nestedProperty(t,"marker.colors").set(w.nestedProperty(t,"marker.color").get()),r[t.xaxis||"x"]=!0,r[t.yaxis||"y"]=!0)}q[s][i]=o(y);var L=["swapxy","swapxyaxes","orientation","orientationaxes"];if(-1!==L.indexOf(s)){if("orientation"===s){x.set(C);var N=t.x&&!t.y?"h":"v";if((x.get()||N)===u.orientation)continue}else"orientationaxes"===s&&(t.orientation={v:"h",h:"v"}[u.orientation]);K.swapXYData(t),n.calc=n.clearAxisTypes=!0}else-1!==B.dataArrayContainers.indexOf(x.parts[0])?(K.manageArrayContainers(x,C,q),n.calc=!0):(D?D.arrayOk&&(Array.isArray(C)||Array.isArray(y))?n.calc=!0:M.update(n,D):n.calc=!0,x.set(C))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(s)&&v.Axes.swap(a,c),"orientationaxes"===s){var O=w.nestedProperty(a.layout,"hovermode");"x"===O.get()?O.set("y"):"y"===O.get()&&O.set("x")}if(-1!==["orientation","type"].indexOf(s)){for(j=[],i=0;i<c.length;i++){var P=m[c[i]];z.traceIs(P,"cartesian")&&(e(P.xaxis||"x"),e(P.yaxis||"y"),"type"===s&&h(["autobinx","autobiny"],!0,i))}h(j.map(f),!0,0),h(j.map(g),[0,1],0)}}else x=w.nestedProperty(a.layout,s.replace("LAYOUT","")),q[s]=[o(x.get())],x.set(Array.isArray(E)?E[0]:E),n.calc=!0}var Q=!1,R=v.Axes.list(a);for(i=0;i<R.length;i++)if(R[i].autorange){Q=!0;break}var S=Object.keys(r);a:for(i=0;i<S.length;i++){for(var T=S[i],U=T.charAt(0),V=U+"axis",W=0;W<m.length;W++)if(z.traceIs(m[W],"cartesian")&&(m[W][V]||U)===T)continue a;h("LAYOUT"+v.Axes.id2name(T),null,0)}return(n.calc||n.calcIfAutorange&&Q)&&(n.clearCalc=!0),(n.calc||n.plot||n.calcIfAutorange)&&(n.fullReplot=!0),{flags:n,undoit:q,redoit:p,traces:c,eventData:w.extendDeepNoArrays([],[p,c])}}function q(a,b){function c(a,d){if(Array.isArray(a))return void a.forEach(function(a){c(a,d)});if(!(a in b||K.hasParent(b,a))){var e=w.nestedProperty(i,a);a in u||(u[a]=o(e.get())),void 0!==d&&e.set(d)}}function d(b,c){if(!w.isPlainObject(b))return!1;var d=b[c+"ref"]||c,e=v.Axes.getFromId(a,d);return e||d.charAt(0)!==c||(e=v.Axes.getFromId(a,c)),(e||{}).autorange}function e(a){var b=R.name2id(a.split(".")[0]);return x[b]=1,b}var f,g,h,i=a.layout,j=a._fullLayout,k=Object.keys(b),l=v.Axes.list(a),m={};for(g=0;g<k.length;g++)if(0===k[g].indexOf("allaxes")){for(h=0;h<l.length;h++){var n=l[h]._id.substr(1),p=-1!==n.indexOf("scene")?n+".":"",q=k[g].replace("allaxes",p+l[h]._name);b[q]||(b[q]=b[k[g]])}delete b[k[g]]}var r,s=M.layoutFlags(),t={},u={},x={};for(var y in b){if(K.hasParent(b,y))throw new Error("cannot set "+y+"and a parent attribute simultaneously");var C=w.nestedProperty(i,y),D=b[y],E=C.parts.length,F="string"==typeof C.parts[E-1]?E-1:E-2,G=C.parts[F],H=C.parts[F-1]+"."+G,I=C.parts.slice(0,F).join("."),L=w.nestedProperty(a.layout,I).get(),O=w.nestedProperty(j,I).get(),P=C.get();if(void 0!==D){t[y]=D,u[y]="reverse"===G?D:o(P);var Q=A.getLayoutValObject(j,C.parts);if(Q&&Q.impliedEdits&&null!==D)for(var S in Q.impliedEdits)c(w.relativeAttr(y,S),Q.impliedEdits[S]);if(-1!==["width","height"].indexOf(y)&&null===D)j[y]=a._initialAutoSize[y];else if(H.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))e(H),w.nestedProperty(j,I+"._inputRange").set(null);else if(H.match(/^[xyz]axis[0-9]*\.autorange$/)){e(H),w.nestedProperty(j,I+"._inputRange").set(null);var T=w.nestedProperty(j,I).get();T._inputDomain&&(T._input.domain=T._inputDomain.slice())}else H.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&w.nestedProperty(j,I+"._inputDomain").set(null);if("type"===G){var U=L,V="linear"===O.type&&"log"===D,W="log"===O.type&&"linear"===D;if(V||W){if(U&&U.range)if(O.autorange)V&&(U.range=U.range[1]>U.range[0]?[1,2]:[2,1]);else{var X=U.range[0],Y=U.range[1];V?(X<=0&&Y<=0&&c(I+".autorange",!0),X<=0?X=Y/1e6:Y<=0&&(Y=X/1e6),c(I+".range[0]",Math.log(X)/Math.LN10),c(I+".range[1]",Math.log(Y)/Math.LN10)):(c(I+".range[0]",Math.pow(10,X)),c(I+".range[1]",Math.pow(10,Y)))}else c(I+".autorange",!0);Array.isArray(j._subplots.polar)&&j._subplots.polar.length&&j[C.parts[0]]&&"radialaxis"===C.parts[1]&&delete j[C.parts[0]]._subplot.viewInitial["radialaxis.range"],z.getComponentMethod("annotations","convertCoords")(a,O,D,c),z.getComponentMethod("images","convertCoords")(a,O,D,c)}else c(I+".autorange",!0),c(I+".range",null);w.nestedProperty(j,I+"._inputRange").set(null)}else if(G.match(N.AX_NAME_PATTERN)){var Z=w.nestedProperty(j,y).get(),$=(D||{}).type;$&&"-"!==$||($="linear"),z.getComponentMethod("annotations","convertCoords")(a,Z,$,c),z.getComponentMethod("images","convertCoords")(a,Z,$,c)}var _=J.containerArrayMatch(y);if(_){f=_.array,g=_.index;var aa=_.property,ba=w.nestedProperty(i,f),ca=(ba||[])[g]||{},da=ca,ea=Q||{editType:"calc"},fa=-1!==ea.editType.indexOf("calcIfAutorange");""===g?(fa?s.calc=!0:M.update(s,ea),fa=!1):""===aa&&(da=D,J.isAddVal(D)?u[y]=null:J.isRemoveVal(D)?(u[y]=ca,da=ca):w.warn("unrecognized full object value",b)),fa&&(d(da,"x")||d(da,"y"))?s.calc=!0:M.update(s,ea),m[f]||(m[f]={});var ga=m[f][g];ga||(ga=m[f][g]={}),ga[aa]=D,delete b[y]}else"reverse"===G?(L.range?L.range.reverse():(c(I+".autorange",!0),L.range=[1,0]),O.autorange?s.calc=!0:s.plot=!0):((!j._has("gl2d")&&!j._has("regl")||"dragmode"!==y||"lasso"!==D&&"select"!==D||"lasso"===P||"select"===P)&&Q?M.update(s,Q):s.calc=!0,C.set(D))}}for(f in m){J.applyContainerArrayChanges(a,w.nestedProperty(i,f),m[f],s)||(s.plot=!0)}var ha=j._axisConstraintGroups||[];for(r in x)for(g=0;g<ha.length;g++){var ia=ha[g];if(ia[r]){s.calc=!0;for(var ja in ia)x[ja]||(R.getFromId(a,ja)._constraintShrinkable=!0)}}var ka=j.width,la=j.height;return a.layout.autosize&&B.plotAutoSize(a,a.layout,j),(b.height||b.width||j.width!==ka||j.height!==la)&&(s.calc=!0),(s.plot||s.calc)&&(s.layoutReplot=!0),{flags:s,undoit:u,redoit:t,eventData:w.extendDeep({},t)}}function r(a){var b=s.select(a),c=a._fullLayout;if(c._container=b.selectAll(".plot-container").data([0]),c._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),c._paperdiv=c._container.selectAll(".svg-container").data([0]),c._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),c._glcontainer=c._paperdiv.selectAll(".gl-container").data([{}]),c._glcontainer.enter().append("div").classed("gl-container",!0),c._glcanvas=null,c._paperdiv.selectAll(".main-svg").remove(),c._paper=c._paperdiv.insert("svg",":first-child").classed("main-svg",!0),c._toppaper=c._paperdiv.append("svg").classed("main-svg",!0),!c._uid){var d=[];s.selectAll("defs").each(function(){this.id&&d.push(this.id.split("-")[1])}),c._uid=w.randstr(d)}c._paperdiv.selectAll(".main-svg").attr(H.svgAttrs),c._defs=c._paper.append("defs").attr("id","defs-"+c._uid),c._clips=c._defs.append("g").classed("clips",!0),c._topdefs=c._toppaper.append("defs").attr("id","topdefs-"+c._uid),c._topclips=c._topdefs.append("g").classed("clips",!0),c._bgLayer=c._paper.append("g").classed("bglayer",!0),c._draggers=c._paper.append("g").classed("draglayer",!0);var e=c._paper.append("g").classed("layer-below",!0);c._imageLowerLayer=e.append("g").classed("imagelayer",!0),c._shapeLowerLayer=e.append("g").classed("shapelayer",!0),c._cartesianlayer=c._paper.append("g").classed("cartesianlayer",!0),c._polarlayer=c._paper.append("g").classed("polarlayer",!0),c._ternarylayer=c._paper.append("g").classed("ternarylayer",!0),c._geolayer=c._paper.append("g").classed("geolayer",!0),c._pielayer=c._paper.append("g").classed("pielayer",!0),c._glimages=c._paper.append("g").classed("glimages",!0);var f=c._toppaper.append("g").classed("layer-above",!0);c._imageUpperLayer=f.append("g").classed("imagelayer",!0),c._shapeUpperLayer=f.append("g").classed("shapelayer",!0),c._infolayer=c._toppaper.append("g").classed("infolayer",!0),c._menulayer=c._toppaper.append("g").classed("menulayer",!0),c._zoomlayer=c._toppaper.append("g").classed("zoomlayer",!0),c._hoverlayer=c._toppaper.append("g").classed("hoverlayer",!0),a.emit("plotly_framework")}var s=a("d3"),t=a("fast-isnumeric"),u=a("has-hover"),v=a("../plotly"),w=a("../lib"),x=a("../lib/events"),y=a("../lib/queue"),z=a("../registry"),A=a("./plot_schema"),B=a("../plots/plots"),C=a("../plots/polar/legacy"),D=a("../plots/cartesian/graph_interact"),E=a("../components/drawing"),F=a("../components/color"),G=a("../components/errorbars"),H=a("../constants/xmlns_namespaces"),I=a("../lib/svg_text_utils"),J=a("./manage_arrays"),K=a("./helpers"),L=a("./subroutines"),M=a("./edit_types"),N=a("../plots/cartesian/constants"),O=a("../plots/cartesian/constraints"),P=O.enforce,Q=O.clean,R=a("../plots/cartesian/axis_ids");v.plot=function(a,b,c,d){function e(){if(p)return v.addFrames(a,p)}function h(){for(var b=u._basePlotModules,c=0;c<b.length;c++)b[c].drawFramework&&b[c].drawFramework(a);return!u._glcanvas&&u._has("gl")&&(u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(a){return a.key}),u._glcanvas.enter().append("canvas").attr("class",function(a){return"gl-canvas gl-canvas-"+a.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"}).attr("width",u.width).attr("height",u.height)),w.syncOrAsync([L.layoutStyles],a)}function i(){var b,c,d,e=a.calcdata;for(z.getComponentMethod("legend","draw")(a),z.getComponentMethod("rangeselector","draw")(a),z.getComponentMethod("sliders","draw")(a),z.getComponentMethod("updatemenus","draw")(a),b=0;b<e.length;b++)c=e[b],d=c[0].trace,!0===d.visible&&d._module.colorbar?d._module.colorbar(a,c):B.autoMargin(a,"cb"+d.uid)
;return B.doAutoMargin(a),B.previousPromises(a)}function j(){if(JSON.stringify(u._size)!==C)return w.syncOrAsync([i,L.layoutStyles],a)}function k(){if(!y)return void P(a);var b,c,d,e=u._subplots.cartesian,f=u._modules,g=[];for(d=0;d<f.length;d++)w.pushUnique(g,f[d].setPositions);if(g.length)for(c=0;c<e.length;c++)for(b=u._plots[e[c]],d=0;d<g.length;d++)g[d](a,b);return G.calc(a),w.syncOrAsync([z.getComponentMethod("shapes","calcAutorange"),z.getComponentMethod("annotations","calcAutorange"),l,z.getComponentMethod("rangeslider","calcAutorange")],a)}function l(){if(!a._transitioning){for(var b=v.Axes.list(a,"",!0),c=0;c<b.length;c++){var d=b[c];Q(a,d),v.Axes.doAutoRange(d)}P(a),t&&v.Axes.saveRangeInitial(a)}}function m(){return v.Axes.doTicks(a,"redraw")}function n(){var b,c=a.calcdata,d=u._infolayer.selectAll("g.rangeslider-container");for(b=0;b<c.length;b++){var e=c[b][0].trace,f=!0===e.visible,g=e.uid;if(!f||!z.traceIs(e,"2dMap")){var h=".hm"+g+",.contour"+g+",#clip"+g;u._paper.selectAll(h).remove(),d.selectAll(h).remove()}f&&e._module.colorbar||u._infolayer.selectAll(".cb"+g).remove()}var i=u._basePlotModules;for(b=0;b<i.length;b++)i[b].plot(a);var j=u._paper.selectAll(".layer-subplot");return u._shapeSubplotLayers=j.selectAll(".shapelayer"),B.style(a),z.getComponentMethod("shapes","draw")(a),z.getComponentMethod("annotations","draw")(a),B.addLinks(a),u._replotting=!1,B.previousPromises(a)}function o(){z.getComponentMethod("shapes","draw")(a),z.getComponentMethod("images","draw")(a),z.getComponentMethod("annotations","draw")(a),z.getComponentMethod("legend","draw")(a),z.getComponentMethod("rangeslider","draw")(a),z.getComponentMethod("rangeselector","draw")(a),z.getComponentMethod("sliders","draw")(a),z.getComponentMethod("updatemenus","draw")(a)}var p;if(a=w.getGraphDiv(a),x.init(a),w.isPlainObject(b)){var q=b;b=q.data,c=q.layout,d=q.config,p=q.frames}if(!1===x.triggerHandler(a,"plotly_beforeplot",[b,c,d]))return Promise.reject();b||c||w.isPlotDiv(a)||w.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",a),f(a,d),c||(c={}),s.select(a).classed("js-plotly-plot",!0),E.makeTester(),Array.isArray(a._promises)||(a._promises=[]);var t=0===(a.data||[]).length&&Array.isArray(b);if(Array.isArray(b)&&(K.cleanData(b,a.data),t?a.data=b:a.data.push.apply(a.data,b),a.empty=!1),a.layout&&!t||(a.layout=K.cleanLayout(c)),a._dragging&&!a._transitioning)return a._replotPending=!0,Promise.reject();a._replotPending=!1,B.supplyDefaults(a);var u=a._fullLayout;if(!u._has("polar")&&b&&b[0]&&b[0].r)return w.log("Legacy polar charts are deprecated!"),g(a,b,c);u._replotting=!0,t&&r(a),a.framework!==r&&(a.framework=r,r(a)),E.initGradients(a),t&&v.Axes.saveShowSpikeInitial(a);var y=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;y&&B.doCalcdata(a);for(var A=0;A<a.calcdata.length;A++)a.calcdata[A][0].trace=a._fullData[A];var C=JSON.stringify(u._size),F=[B.previousPromises,e,h,i,j,k,L.layoutStyles,m,n,o,D,B.rehover,B.previousPromises],H=w.syncOrAsync(F,a);return H&&H.then||(H=Promise.resolve()),H.then(function(){return a.emit("plotly_afterplot"),a})},v.redraw=function(a){if(a=w.getGraphDiv(a),!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a);return K.cleanData(a.data,a.data),K.cleanLayout(a.layout),a.calcdata=void 0,v.plot(a).then(function(){return a.emit("plotly_redraw"),a})},v.newPlot=function(a,b,c,d){return a=w.getGraphDiv(a),B.cleanPlot([],{},a._fullData||{},a._fullLayout||{}),B.purge(a),v.plot(a,b,c,d)},v.extendTraces=function a(b,c,d,e){b=w.getGraphDiv(b);var f=n(b,c,d,e,function(a,b){return a.concat(b)},function(a,b){return a.splice(0,a.length-b)}),g=v.redraw(b),h=[b,f.update,d,f.maxPoints];return y.add(b,v.prependTraces,h,a,arguments),g},v.prependTraces=function a(b,c,d,e){b=w.getGraphDiv(b);var f=n(b,c,d,e,function(a,b){return b.concat(a)},function(a,b){return a.splice(b,a.length)}),g=v.redraw(b),h=[b,f.update,d,f.maxPoints];return y.add(b,v.extendTraces,h,a,arguments),g},v.addTraces=function a(b,c,d){b=w.getGraphDiv(b);var e,f,g=[],h=v.deleteTraces,i=a,l=[b,g],m=[b,c];for(k(b,c,d),Array.isArray(c)||(c=[c]),c=c.map(function(a){return w.extendFlat({},a)}),K.cleanData(c,b.data),e=0;e<c.length;e++)b.data.push(c[e]);for(e=0;e<c.length;e++)g.push(-c.length+e);if(void 0===d)return f=v.redraw(b),y.add(b,h,l,i,m),f;Array.isArray(d)||(d=[d]);try{j(b,g,d)}catch(a){throw b.data.splice(b.data.length-c.length,c.length),a}return y.startSequence(b),y.add(b,h,l,i,m),f=v.moveTraces(b,g,d),y.stopSequence(b),f},v.deleteTraces=function a(b,c){b=w.getGraphDiv(b);var d,e,f=[],g=v.addTraces,j=a,k=[b,f,c],l=[b,c];if(void 0===c)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(c)||(c=[c]),i(b,c,"indices"),c=h(c,b.data.length-1),c.sort(w.sorterDes),d=0;d<c.length;d+=1)e=b.data.splice(c[d],1)[0],f.push(e);var m=v.redraw(b);return y.add(b,g,k,j,l),m},v.moveTraces=function a(b,c,d){b=w.getGraphDiv(b);var e,f=[],g=[],i=a,k=a,l=[b,d,c],m=[b,c,d];if(j(b,c,d),c=Array.isArray(c)?c:[c],void 0===d)for(d=[],e=0;e<c.length;e++)d.push(-c.length+e);for(d=Array.isArray(d)?d:[d],c=h(c,b.data.length-1),d=h(d,b.data.length-1),e=0;e<b.data.length;e++)-1===c.indexOf(e)&&f.push(b.data[e]);for(e=0;e<c.length;e++)g.push({newIndex:d[e],trace:b.data[c[e]]});for(g.sort(function(a,b){return a.newIndex-b.newIndex}),e=0;e<g.length;e+=1)f.splice(g[e].newIndex,0,g[e].trace);b.data=f;var n=v.redraw(b);return y.add(b,i,l,k,m),n},v.restyle=function a(b,c,d,e){b=w.getGraphDiv(b),K.clearPromiseQueue(b);var f={};if("string"==typeof c)f[c]=d;else{if(!w.isPlainObject(c))return w.warn("Restyle fail.",c,d,e),Promise.reject();f=w.extendFlat({},c),void 0===e&&(e=d)}Object.keys(f).length&&(b.changed=!0);var g=K.coerceTraceIndices(b,e),h=p(b,f,g),i=h.flags;i.clearCalc&&(b.calcdata=void 0),i.clearAxisTypes&&K.clearAxisTypes(b,g,{});var j=[];i.fullReplot?j.push(v.plot):(j.push(B.previousPromises),B.supplyDefaults(b),i.style&&j.push(L.doTraceStyle),i.colorbars&&j.push(L.doColorBars)),j.push(B.rehover),y.add(b,a,[b,h.undoit,h.traces],a,[b,h.redoit,h.traces]);var k=w.syncOrAsync(j,b);return k&&k.then||(k=Promise.resolve()),k.then(function(){return b.emit("plotly_restyle",h.eventData),b})},v.relayout=function a(b,c,d){if(b=w.getGraphDiv(b),K.clearPromiseQueue(b),b.framework&&b.framework.isPolar)return Promise.resolve(b);var e={};if("string"==typeof c)e[c]=d;else{if(!w.isPlainObject(c))return w.warn("Relayout fail.",c,d),Promise.reject();e=w.extendFlat({},c)}Object.keys(e).length&&(b.changed=!0);var f=q(b,e),g=f.flags;g.calc&&(b.calcdata=void 0);var h=[B.previousPromises];g.layoutReplot?h.push(L.layoutReplot):Object.keys(e).length&&(B.supplyDefaults(b),g.legend&&h.push(L.doLegend),g.layoutstyle&&h.push(L.layoutStyles),g.ticks&&h.push(L.doTicksRelayout),g.modebar&&h.push(L.doModeBar),g.camera&&h.push(L.doCamera)),h.push(B.rehover),y.add(b,a,[b,f.undoit],a,[b,f.redoit]);var i=w.syncOrAsync(h,b);return i&&i.then||(i=Promise.resolve(b)),i.then(function(){return b.emit("plotly_relayout",f.eventData),b})},v.update=function a(b,c,d,e){if(b=w.getGraphDiv(b),K.clearPromiseQueue(b),b.framework&&b.framework.isPolar)return Promise.resolve(b);w.isPlainObject(c)||(c={}),w.isPlainObject(d)||(d={}),Object.keys(c).length&&(b.changed=!0),Object.keys(d).length&&(b.changed=!0);var f=K.coerceTraceIndices(b,e),g=p(b,w.extendFlat({},c),f),h=g.flags,i=q(b,w.extendFlat({},d)),j=i.flags;(h.clearCalc||j.calc)&&(b.calcdata=void 0),h.clearAxisTypes&&K.clearAxisTypes(b,f,d);var k=[];if(h.fullReplot&&j.layoutReplot){var l=b.data,m=b.layout;b.data=void 0,b.layout=void 0,k.push(function(){return v.plot(b,l,m)})}else h.fullReplot?k.push(v.plot):j.layoutReplot?k.push(L.layoutReplot):(k.push(B.previousPromises),B.supplyDefaults(b),h.style&&k.push(L.doTraceStyle),h.colorbars&&k.push(L.doColorBars),j.legend&&k.push(L.doLegend),j.layoutstyle&&k.push(L.layoutStyles),j.ticks&&k.push(L.doTicksRelayout),j.modebar&&k.push(L.doModeBar),j.camera&&k.push(L.doCamera));k.push(B.rehover),y.add(b,a,[b,g.undoit,i.undoit,g.traces],a,[b,g.redoit,i.redoit,g.traces]);var n=w.syncOrAsync(k,b);return n&&n.then||(n=Promise.resolve(b)),n.then(function(){return b.emit("plotly_update",{data:g.eventData,layout:i.eventData}),b})},v.animate=function(a,b,c){function d(a){return Array.isArray(h)?a>=h.length?h[0]:h[a]:h}function e(a){return Array.isArray(i)?a>=i.length?i[0]:i[a]:i}function f(a,b){var c=0;return function(){if(a&&++c===b)return a()}}if(a=w.getGraphDiv(a),!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var g=a._transitionData;g._frameQueue||(g._frameQueue=[]),c=B.supplyAnimationDefaults(c);var h=c.transition,i=c.frame;return void 0===g._frameWaitingCnt&&(g._frameWaitingCnt=0),new Promise(function(i,j){function k(){a.emit("plotly_animated"),window.cancelAnimationFrame(g._animationRaf),g._animationRaf=null}function l(){g._currentFrame&&g._currentFrame.onComplete&&g._currentFrame.onComplete();var b=g._currentFrame=g._frameQueue.shift();if(b){var c=b.name?b.name.toString():null;a._fullLayout._currentFrame=c,g._lastFrameAt=Date.now(),g._timeToNext=b.frameOpts.duration,B.transition(a,b.frame.data,b.frame.layout,K.coerceTraceIndices(a,b.frame.traces),b.frameOpts,b.transitionOpts).then(function(){b.onComplete&&b.onComplete()}),a.emit("plotly_animatingframe",{name:c,frame:b.frame,animation:{frame:b.frameOpts,transition:b.transitionOpts}})}else k()}function m(){a.emit("plotly_animating"),g._lastFrameAt=-1/0,g._timeToNext=0,g._runningTransitions=0,g._currentFrame=null;var b=function(){g._animationRaf=window.requestAnimationFrame(b),Date.now()-g._lastFrameAt>g._timeToNext&&l()};b()}function n(a){return Array.isArray(h)?q>=h.length?a.transitionOpts=h[q]:a.transitionOpts=h[0]:a.transitionOpts=h,q++,a}var o,p,q=0,r=[],s=void 0===b||null===b,t=Array.isArray(b);if(s||t||!w.isPlainObject(b)){if(s||-1!==["string","number"].indexOf(typeof b))for(o=0;o<g._frames.length;o++)(p=g._frames[o])&&(s||String(p.group)===String(b))&&r.push({type:"byname",name:String(p.name),data:n({name:p.name})});else if(t)for(o=0;o<b.length;o++){var u=b[o];-1!==["number","string"].indexOf(typeof u)?(u=String(u),r.push({type:"byname",name:u,data:n({name:u})})):w.isPlainObject(u)&&r.push({type:"object",data:n(w.extendFlat({},u))})}}else r.push({type:"object",data:n(w.extendFlat({},b))});for(o=0;o<r.length;o++)if(p=r[o],"byname"===p.type&&!g._frameHash[p.data.name])return w.warn('animate failure: frame not found: "'+p.data.name+'"'),void j();-1!==["next","immediate"].indexOf(c.mode)&&function(){if(0!==g._frameQueue.length){for(;g._frameQueue.length;){var b=g._frameQueue.pop();b.onInterrupt&&b.onInterrupt()}a.emit("plotly_animationinterrupted",[])}}(),"reverse"===c.direction&&r.reverse();var v=a._fullLayout._currentFrame;if(v&&c.fromcurrent){var x=-1;for(o=0;o<r.length;o++)if(p=r[o],"byname"===p.type&&p.name===v){x=o;break}if(x>0&&x<r.length-1){var y=[];for(o=0;o<r.length;o++)p=r[o],("byname"!==r[o].type||o>x)&&y.push(p);r=y}}r.length>0?function(b){if(0!==b.length){for(var h=0;h<b.length;h++){var k;k="byname"===b[h].type?B.computeFrame(a,b[h].name):b[h].data;var l=e(h),n=d(h);n.duration=Math.min(n.duration,l.duration);var o={frame:k,name:b[h].name,frameOpts:l,transitionOpts:n};h===b.length-1&&(o.onComplete=f(i,2),o.onInterrupt=j),g._frameQueue.push(o)}"immediate"===c.mode&&(g._lastFrameAt=-1/0),g._animationRaf||m()}}(r):(a.emit("plotly_animated"),i())})},v.addFrames=function(a,b,c){a=w.getGraphDiv(a);var d=0;if(null===b||void 0===b)return Promise.resolve();if(!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var e,f,g,h,i=a._transitionData._frames,j=a._transitionData._frameHash;if(!Array.isArray(b))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+b);var k=i.length+2*b.length,l=[];for(e=b.length-1;e>=0;e--)if(w.isPlainObject(b[e])){var m=(j[b[e].name]||{}).name,n=b[e].name;m&&n&&"number"==typeof n&&j[m]&&(d++,w.warn('addFrames: overwriting frame "'+j[m].name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),d>5&&w.warn("addFrames: This API call has yielded too many warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),l.push({frame:B.supplyFrameDefaults(b[e]),index:c&&void 0!==c[e]&&null!==c[e]?c[e]:k+e})}l.sort(function(a,b){return a.index>b.index?-1:a.index<b.index?1:0});var o=[],p=[],q=i.length;for(e=l.length-1;e>=0;e--){if(f=l[e].frame,"number"==typeof f.name&&w.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!f.name)for(;j[f.name="frame "+a._transitionData._counter++];);if(j[f.name]){for(g=0;g<i.length&&(i[g]||{}).name!==f.name;g++);o.push({type:"replace",index:g,value:f}),p.unshift({type:"replace",index:g,value:i[g]})}else h=Math.max(0,Math.min(l[e].index,q)),o.push({type:"insert",index:h,value:f}),p.unshift({type:"delete",index:h}),q++}var r=B.modifyFrames,s=B.modifyFrames,t=[a,p],u=[a,o];return y&&y.add(a,r,t,s,u),B.modifyFrames(a,o)},v.deleteFrames=function(a,b){if(a=w.getGraphDiv(a),!w.isPlotDiv(a))throw new Error("This element is not a Plotly plot: "+a);var c,d,e=a._transitionData._frames,f=[],g=[];if(!b)for(b=[],c=0;c<e.length;c++)b.push(c);for(b=b.slice(0),b.sort(),c=b.length-1;c>=0;c--)d=b[c],f.push({type:"delete",index:d}),g.unshift({type:"insert",index:d,value:e[d]});var h=B.modifyFrames,i=B.modifyFrames,j=[a,g],k=[a,f];return y&&y.add(a,h,j,i,k),B.modifyFrames(a,f)},v.purge=function(a){a=w.getGraphDiv(a);var b=a._fullLayout||{},c=a._fullData||[];return B.cleanPlot([],{},c,b),B.purge(a),x.purge(a),b._container&&b._container.remove(),delete a._context,a}},{"../components/color":618,"../components/drawing":643,"../components/errorbars":649,"../constants/xmlns_namespaces":723,"../lib":743,"../lib/events":731,"../lib/queue":757,"../lib/svg_text_utils":766,"../plotly":784,"../plots/cartesian/axis_ids":792,"../plots/cartesian/constants":794,"../plots/cartesian/constraints":796,"../plots/cartesian/graph_interact":798,"../plots/plots":852,"../plots/polar/legacy":860,"../registry":873,"./edit_types":773,"./helpers":774,"./manage_arrays":775,"./plot_schema":778,"./subroutines":781,d3:128,"fast-isnumeric":140,"has-hover":276}],777:[function(a,b,c){"use strict";b.exports={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],778:[function(a,b,c){"use strict";function d(a,b){var c,d,e,f,g=a._basePlotModules;if(g){var h;for(c=0;c<g.length;c++){if(e=g[c],e.attrRegex&&e.attrRegex.test(b)){if(e.layoutAttrOverrides)return e.layoutAttrOverrides;!h&&e.layoutAttributes&&(h=e.layoutAttributes)}var i=e.baseLayoutAttrOverrides;if(i&&b in i)return i[b]}if(h)return h}var j=a._modules;if(j)for(c=0;c<j.length;c++)if((f=j[c].layoutAttributes)&&b in f)return f[b];for(d in q.componentsRegistry)if(e=q.componentsRegistry[d],!e.schema&&b===e.name)return e.layoutAttributes;return b in t?t[b]:"radialaxis"===b||"angularaxis"===b?x[b]:x.layout[b]||!1}function e(a,b,c){if(!a)return!1;if(a._isLinkedToArray)if(f(b[c]))c++;else if(c<b.length)return!1;for(;c<b.length;c++){var d=a[b[c]];if(!r.isPlainObject(d))break;if(a=d,c===b.length-1)break;if(a._isLinkedToArray){if(c++,!f(b[c]))return!1}else if("info_array"===a.valType){c++;var e=b[c];if(!f(e)||e>=a.items.length)return!1;a=a.items[e]}}return a}function f(a){return a===Math.round(a)&&a>=0}function g(a){var b,c;"area"===a?(b={attributes:w},c={}):(b=q.modules[a]._module,c=b.basePlotModule);var d={};d.type=null,A(d,s),A(d,b.attributes),c.attributes&&A(d,c.attributes),d.type=a;var e={meta:b.meta||{},attributes:k(d)};if(b.layoutAttributes){var f={};A(f,b.layoutAttributes),e.layoutAttributes=k(f)}return e}function h(){var a,b,c={};A(c,t);for(a in q.subplotsRegistry)if(b=q.subplotsRegistry[a],b.layoutAttributes)if("cartesian"===b.name)o(c,b,"xaxis"),o(c,b,"yaxis");else{var d="subplot"===b.attr?b.name:b.attr;o(c,b,d)}c=n(c);for(a in q.componentsRegistry){b=q.componentsRegistry[a];var e=b.schema;if(e&&(e.subplots||e.layout)){var f=e.subplots;if(f&&f.xaxis&&!f.yaxis)for(var g in f.xaxis)delete c.yaxis[g]}else b.layoutAttributes&&p(c,b.layoutAttributes,b.name)}return{layoutAttributes:k(c)}}function i(a){var b=q.transformsRegistry[a],c=A({},b.attributes);return Object.keys(q.componentsRegistry).forEach(function(b){var d=q.componentsRegistry[b];d.schema&&d.schema.transforms&&d.schema.transforms[a]&&Object.keys(d.schema.transforms[a]).forEach(function(b){p(c,d.schema.transforms[a][b],b)})}),{attributes:k(c)}}function j(){var a={frames:r.extendDeepAll({},u)};return k(a),a.frames}function k(a){return l(a),m(a),a}function l(a){function b(a){return{valType:"string",editType:"none"}}function d(a,d,e){c.isValObject(a)?"data_array"===a.valType?(a.role="data",e[d+"src"]=b(d)):!0===a.arrayOk&&(e[d+"src"]=b(d)):r.isPlainObject(a)&&(a.role="object")}c.crawl(a,d)}function m(a){function b(a,b,c){if(a){var d=a[C];d&&(delete a[C],c[b]={items:{}},c[b].items[d]=a,c[b].role="object")}}c.crawl(a,b)}function n(a){return z(a,{radialaxis:x.radialaxis,angularaxis:x.angularaxis}),z(a,x.layout),a}function o(a,b,c){var d=r.nestedProperty(a,c),e=A({},b.layoutAttributes);e[B]=!0,d.set(e)}function p(a,b,c){var d=r.nestedProperty(a,c);d.set(A(d.get()||{},b))}var q=a("../registry"),r=a("../lib"),s=a("../plots/attributes"),t=a("../plots/layout_attributes"),u=a("../plots/frame_attributes"),v=a("../plots/animation_attributes"),w=a("../plots/polar/legacy/area_attributes"),x=a("../plots/polar/legacy/axis_attributes"),y=a("./edit_types"),z=r.extendFlat,A=r.extendDeepAll,B="_isSubplotObj",C="_isLinkedToArray",D=[B,C,"_arrayAttrRegexps","_deprecated"];c.IS_SUBPLOT_OBJ=B,c.IS_LINKED_TO_ARRAY=C,c.DEPRECATED="_deprecated",c.UNDERSCORE_ATTRS=D,c.get=function(){var a={};q.allTypes.concat("area").forEach(function(b){a[b]=g(b)});var b={};return Object.keys(q.transformsRegistry).forEach(function(a){b[a]=i(a)}),{defs:{valObjects:r.valObjectMeta,metaKeys:D.concat(["description","role","editType","impliedEdits"]),editType:{traces:y.traces,layout:y.layout},impliedEdits:{}},traces:a,layout:h(),transforms:b,frames:j(),animation:k(v)}},c.crawl=function(a,b,d,e){var f=d||0;e=e||"",Object.keys(a).forEach(function(d){var g=a[d];if(-1===D.indexOf(d)){var h=(e?e+".":"")+d;b(g,d,a,f,h),c.isValObject(g)||r.isPlainObject(g)&&"impliedEdits"!==d&&c.crawl(g,b,f+1,h)}})},c.isValObject=function(a){return a&&void 0!==a.valType},c.findArrayAttributes=function(a){function b(b,c,g,h){if(f=f.slice(0,h).concat([c]),b&&("data_array"===b.valType||!0===b.arrayOk)&&!("colorbar"===f[h-1]&&("ticktext"===c||"tickvals"===c))){var i=d(f),j=r.nestedProperty(a,i).get();Array.isArray(j)&&e.push(i)}}function d(a){return a.join(".")}var e=[],f=[];if(c.crawl(s,b),a._module&&a._module.attributes&&c.crawl(a._module.attributes,b),a.transforms)for(var g=a.transforms,h=0;h<g.length;h++){var i=g[h],j=i._module;j&&(f=["transforms["+h+"]"],c.crawl(j.attributes,b,1))}return a._fullInput&&a._fullInput._module&&a._fullInput._module.attributes&&(c.crawl(a._fullInput._module.attributes,b),e=r.filterUnique(e)),e},c.getTraceValObject=function(a,b){var c,d,g=b[0],h=1;if("transforms"===g){if(!Array.isArray(a.transforms))return!1;var i=b[1];if(!f(i)||i>=a.transforms.length)return!1;c=(q.transformsRegistry[a.transforms[i].type]||{}).attributes,d=c&&c[b[2]],h=3}else if("area"===a.type)d=w[g];else{var j=a._module;if(j||(j=(q.modules[a.type||s.type.dflt]||{})._module),!j)return!1;if(c=j.attributes,!(d=c&&c[g])){var k=j.basePlotModule;k&&k.attributes&&(d=k.attributes[g])}d||(d=s[g])}return e(d,b,h)},c.getLayoutValObject=function(a,b){return e(d(a,b[0]),b,1)}},{"../lib":743,"../plots/animation_attributes":785,"../plots/attributes":787,"../plots/frame_attributes":817,"../plots/layout_attributes":843,"../plots/polar/legacy/area_attributes":858,"../plots/polar/legacy/axis_attributes":859,"../registry":873,"./edit_types":773}],779:[function(a,b,c){"use strict";function d(a){g.register(a,a.name,a.categories,a.meta),g.subplotsRegistry[a.basePlotModule.name]||g.registerSubplot(a.basePlotModule)}function e(a){if("string"!=typeof a.name)throw new Error("Transform module *name* must be a string.");var b="Transform module "+a.name,c="function"==typeof a.transform,d="function"==typeof a.calcTransform;if(!c&&!d)throw new Error(b+" is missing a *transform* or *calcTransform* method.");c&&d&&h.log([b+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),h.isPlainObject(a.attributes)||h.log(b+" registered without an *attributes* object."),"function"!=typeof a.supplyDefaults&&h.log(b+" registered without a *supplyDefaults* method."),g.registerTransform(a)}function f(a){if("string"!=typeof a.name)throw new Error("Component module *name* must be a string.");g.registerComponent(a)}var g=a("../registry"),h=a("../lib");b.exports=function(a){if(!a)throw new Error("No argument passed to Plotly.register.");a&&!Array.isArray(a)&&(a=[a]);for(var b=0;b<a.length;b++){var c=a[b];if(!c)throw new Error("Invalid module was attempted to be registered!");switch(c.moduleType){case"trace":d(c);break;case"transform":e(c);break;case"component":f(c);break;case"locale":g.registerLocale(c);break;default:throw new Error("Invalid module was attempted to be registered!")}}}},{"../lib":743,"../registry":873}],780:[function(a,b,c){"use strict";var d=a("../plotly"),e=a("../lib");b.exports=function(a){return e.extendFlat(d.defaultConfig,a)}},{"../lib":743,"../plotly":784}],781:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(!(e[0]>=a[1]||e[1]<=a[0])&&(f[0]<b[1]&&f[1]>b[0]))return!0}return!1}function e(a,b){return(a.ticks||a.showline)&&(b===a._mainSubplot||"all"===a.mirror||"allticks"===a.mirror)}function f(a,b,c){if(!c.showline||!c._lw)return!1;if("all"===c.mirror||"allticks"===c.mirror)return!0;var d=c._anchorAxis;if(!d)return!1;var e=s.FROM_BL[b];return c.side===b?d.domain[e]===a.domain[e]:c.mirror&&d.domain[1-e]===a.domain[1-e]}function g(a,b,c,d){if(f(a,b,c))return c._lw;for(var e=0;e<d.length;e++){var g=d[e];if(g._mainAxis===c._mainAxis&&f(a,b,g))return g._lw}return 0}var h=a("d3"),i=a("../plotly"),j=a("../registry"),k=a("../plots/plots"),l=a("../lib"),m=a("../components/color"),n=a("../components/drawing"),o=a("../components/titles"),p=a("../components/modebar"),q=a("../plots/cartesian/graph_interact"),r=a("../plots/cartesian/constants"),s=a("../constants/alignment");c.layoutStyles=function(a){return l.syncOrAsync([k.doAutoMargin,c.lsInner],a)},c.lsInner=function(a){function b(a,b,c){var d=a._lw/2;return"x"===a._id.charAt(0)?b?"top"===c?b._offset-l-d:b._offset+b._length+l+d:k.t+k.h*(1-(a.position||0))+d%1:b?"right"===c?b._offset+b._length+l+d:b._offset-l-d:k.l+k.w*(a.position||0)+d%1}var f,j=a._fullLayout,k=j._size,l=k.p,o=i.Axes.list(a),q=j._has("cartesian");for(f=0;f<o.length;f++){var t=o[f];t.setScale();var u=t._anchorAxis;t._linepositions={},t._lw=n.crispRound(a,t.linewidth,1),t._mainLinePosition=b(t,u,t.side),t._mainMirrorPosition=t.mirror&&u?b(t,u,s.OPPOSITE_SIDE[t.side]):null}j._paperdiv.style({width:j.width+"px",height:j.height+"px"}).selectAll(".main-svg").call(n.setSize,j.width,j.height),a._context.setBackground(a,j.paper_bgcolor);var v=j._paper.selectAll("g.subplot"),w=[],x=[];v.each(function(a){var b=j._plots[a];if(b.mainplot)return b.bg&&b.bg.remove(),void(b.bg=void 0);var c=b.xaxis.domain,e=b.yaxis.domain,f=[];d(c,e,x)?f=[0]:(w.push(a),x.push([c,e]));var g=b.plotgroup.selectAll(".bg").data(f);g.enter().append("rect").classed("bg",!0),g.exit().remove(),g.each(function(){b.bg=g;var a=b.plotgroup.node();a.insertBefore(this,a.childNodes[0])})});var y=j._bgLayer.selectAll(".bg").data(w);return y.enter().append("rect").classed("bg",!0),y.exit().remove(),y.each(function(a){j._plots[a].bg=h.select(this)}),v.each(function(a){function c(a){return"M"+y+","+a+"H"+z}function d(a){return"M"+s._offset+","+a+"h"+s._length}function h(a){return"M"+a+","+F+"V"+E}function i(a){return"M"+a+","+t._offset+"v"+t._length}function k(b,c,d){if(!b.showline||a!==b._mainSubplot)return"";if(!b._anchorAxis)return d(b._mainLinePosition);var e=c(b._mainLinePosition);return b.mirror&&(e+=c(b._mainMirrorPosition)),e}var p=j._plots[a],s=p.xaxis,t=p.yaxis;p.bg&&q&&p.bg.call(n.setRect,s._offset-l,t._offset-l,s._length+2*l,t._length+2*l).call(m.fill,j.plot_bgcolor).style("stroke-width",0),p.clipId="clip"+j._uid+a+"plot";var u=j._clips.selectAll("#"+p.clipId).data([0]);u.enter().append("clipPath").attr({class:"plotclip",id:p.clipId}).append("rect"),u.selectAll("rect").attr({width:s._length,height:t._length}),n.setTranslate(p.plot,s._offset,t._offset);var v,w;for(p._hasClipOnAxisFalse?(v=null,w=p.clipId):(v=p.clipId,w=null),n.setClipUrl(p.plot,v),f=0;f<r.traceLayerClasses.length;f++){var x=r.traceLayerClasses[f];"scatterlayer"!==x&&p.plot.selectAll("g."+x).call(n.setClipUrl,w)}if(p.layerClipId=w,q){var y,z,A,B,C,D,E,F,G,H,I,J,K;if(e(s,a)){C=g(s,"left",t,o),y=s._offset-(C?l+C:0),D=g(s,"right",t,o),z=s._offset+s._length+(D?l+D:0),A=b(s,t,"bottom"),B=b(s,t,"top"),K=!s._anchorAxis||a!==s._mainSubplot,K&&s.ticks&&"allticks"===s.mirror&&(s._linepositions[a]=[A,B]);var L=k(s,c,d);K&&s.showline&&("all"===s.mirror||"allticks"===s.mirror)&&(L+=c(A)+c(B)),p.xlines.attr("d",L||"M0,0").style("stroke-width",s._lw+"px").call(m.stroke,s.showline?s.linecolor:"rgba(0,0,0,0)")}if(e(t,a)){I=g(t,"bottom",s,o),E=t._offset+t._length+(I?l:0),J=g(t,"top",s,o),F=t._offset-(J?l:0),G=b(t,s,"left"),H=b(t,s,"right"),K=!t._anchorAxis||a!==s._mainSubplot,K&&t.ticks&&"allticks"===t.mirror&&(t._linepositions[a]=[G,H]);var M=k(t,h,i);K&&t.showline&&("all"===t.mirror||"allticks"===t.mirror)&&(M+=h(G)+h(H)),p.ylines.attr("d",M||"M0,0").style("stroke-width",t._lw+"px").call(m.stroke,t.showline?t.linecolor:"rgba(0,0,0,0)")}}}),i.Axes.makeClipPaths(a),c.drawMainTitle(a),p.manage(a),a._promises.length&&Promise.all(a._promises)},c.drawMainTitle=function(a){var b=a._fullLayout;o.draw(a,"gtitle",{propContainer:b,propName:"title",placeholder:b._dfltTitle.plot,attributes:{x:b.width/2,y:b._size.t/2,"text-anchor":"middle"}})},c.doTraceStyle=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b],d=((c[0]||{}).trace||{})._module||{},e=d.arraysToCalcdata;e&&e(c,c[0].trace)}return k.style(a),j.getComponentMethod("legend","draw")(a),k.previousPromises(a)},c.doColorBars=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b][0];if((c.t||{}).cb){var d=c.trace,e=c.t.cb;j.traceIs(d,"contour")&&e.line({width:!1!==d.contours.showlines?d.line.width:0,dash:d.line.dash,color:"line"===d.contours.coloring?e._opts.line.color:d.line.color}),j.traceIs(d,"markerColorscale")?e.options(d.marker.colorbar)():e.options(d.colorbar)()}}return k.previousPromises(a)},c.layoutReplot=function(a){var b=a.layout;return a.layout=void 0,i.plot(a,"",b)},c.doLegend=function(a){return j.getComponentMethod("legend","draw")(a),k.previousPromises(a)},c.doTicksRelayout=function(a){return i.Axes.doTicks(a,"redraw"),c.drawMainTitle(a),k.previousPromises(a)},c.doModeBar=function(a){var b=a._fullLayout;p.manage(a),q(a);for(var c=0;c<b._basePlotModules.length;c++){var d=b._basePlotModules[c].updateFx;d&&d(b)}return k.previousPromises(a)},c.doCamera=function(a){for(var b=a._fullLayout,c=b._subplots.gl3d,d=0;d<c.length;d++){var e=b[c[d]];e._scene.setCamera(e.camera)}}},{"../components/color":618,"../components/drawing":643,"../components/modebar":680,"../components/titles":709,"../constants/alignment":716,"../lib":743,"../plotly":784,"../plots/cartesian/constants":794,"../plots/cartesian/graph_interact":798,"../plots/plots":852,"../registry":873,d3:128}],782:[function(a,b,c){"use strict";function d(a,b){function c(a){return!(a in b)||f.validate(b[a],j[a])}function d(a,c){return f.coerce(b,r,j,a,c)}function l(){return new Promise(function(a){setTimeout(a,g.getDelay(y._fullLayout))})}function m(){return new Promise(function(a,b){var c=h(y,s,v),d=y._fullLayout.width,g=y._fullLayout.height;if(e.purge(y),document.body.removeChild(y),"svg"===s)return a(x?c:"data:image/svg+xml,"+encodeURIComponent(c));var j=document.createElement("canvas");j.id=f.randstr(),i({format:s,width:d,height:g,scale:v,canvas:j,svg:c,promise:!0}).then(a).catch(b)})}function n(a){return x?a.replace(k,""):a}b=b||{};var o,p,q;if(f.isPlainObject(a)?(o=a.data||[],p=a.layout||{},q=a.config||{}):(a=f.getGraphDiv(a),o=f.extendDeep([],a.data),p=f.extendDeep({},a.layout),q=a._context),!c("width")||!c("height"))throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var r={},s=d("format"),t=d("width"),u=d("height"),v=d("scale"),w=d("setBackground"),x=d("imageDataOnly"),y=document.createElement("div");y.style.position="absolute",y.style.left="-5000px",document.body.appendChild(y);var z=f.extendFlat({},p);t&&(z.width=t),u&&(z.height=u);var A=f.extendFlat({},q,{staticPlot:!0,setBackground:w}),B=g.getRedrawFunc(y);return new Promise(function(a,b){e.plot(y,o,z,A).then(B).then(l).then(m).then(function(b){a(n(b))}).catch(function(a){b(a)})})}var e=a("../plotly"),f=a("../lib"),g=a("../snapshot/helpers"),h=a("../snapshot/tosvg"),i=a("../snapshot/svgtoimg"),j={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},k=/^data:image\/\w+;base64,/;b.exports=d},{"../lib":743,"../plotly":784,"../snapshot/helpers":877,"../snapshot/svgtoimg":879,"../snapshot/tosvg":881}],783:[function(a,b,c){"use strict";function d(a,b,c,e,f,j){j=j||[];for(var k=Object.keys(a),m=0;m<k.length;m++){var n=k[m];if("transforms"!==n){var o=j.slice();o.push(n);var r=a[n],s=b[n],t=i(c,n),u="info_array"===(t||{}).valType,v="colorscale"===(t||{}).valType;if(h(c,n))if(p(r)&&p(s))d(r,s,t,e,f,o);else if(t.items&&!u&&q(r)){var w,x,y=t.items,z=y[Object.keys(y)[0]],A=[];for(w=0;w<s.length;w++){var B=s[w]._index||w;x=o.slice(),x.push(B),p(r[B])&&p(s[w])&&(A.push(B),d(r[B],s[w],z,e,f,x))}for(w=0;w<r.length;w++)x=o.slice(),x.push(w),p(r[w])?-1===A.indexOf(w)&&e.push(g("unused",f,x)):e.push(g("object",f,x,r[w]))}else!p(r)&&p(s)?e.push(g("object",f,o,r)):q(r)||!q(s)||u||v?n in b?l.validate(r,t)?"enumerated"===t.valType&&(t.coerceNumber&&r!==+s||r!==s)&&e.push(g("dynamic",f,o,r,s)):e.push(g("value",f,o,r)):e.push(g("unused",f,o,r)):e.push(g("array",f,o,r));else e.push(g("schema",f,o))}}return e}function e(a,b){for(var c=0;c<b.length;c++){var d=b[c].type,e=a.traces[d].layoutAttributes;e&&l.extendFlat(a.layout.layoutAttributes,e)}return a.layout.layoutAttributes}function f(a){return q(a)?"In data trace "+a[1]+", ":"In "+a+", "}function g(a,b,c,d,e){c=c||"";var f,g;q(b)?(f=b[0],g=b[1]):(f=b,g=null);var h=k(c),i=r[a](b,h,d,e);return l.log(i),{code:a,container:f,trace:g,path:c,astr:h,msg:i}}function h(a,b){
var c=j(b),d=c.keyMinusId,e=c.id;return!!(d in a&&a[d]._isSubplotObj&&e)||b in a}function i(a,b){return a[j(b).keyMinusId]}function j(a){var b=a.match(s);return{keyMinusId:b&&b[1],id:b&&b[2]}}function k(a){if(!q(a))return String(a);for(var b="",c=0;c<a.length;c++){var d=a[c];"number"==typeof d?b=b.substr(0,b.length-1)+"["+d+"]":b+=d,c<a.length-1&&(b+=".")}return b}var l=a("../lib"),m=a("../plots/plots"),n=a("./plot_schema"),o=a("./plot_config"),p=l.isPlainObject,q=Array.isArray;b.exports=function(a,b){var c,f,h=n.get(),i=[],j={_context:l.extendFlat({},o)};q(a)?(j.data=l.extendDeep([],a),c=a):(j.data=[],c=[],i.push(g("array","data"))),p(b)?(j.layout=l.extendDeep({},b),f=b):(j.layout={},f={},arguments.length>1&&i.push(g("object","layout"))),m.supplyDefaults(j);for(var k=j._fullData,r=c.length,s=0;s<r;s++){var t=c[s],u=["data",s];if(p(t)){var v=k[s],w=v.type,x=h.traces[w].attributes;x.type={valType:"enumerated",values:[w]},!1===v.visible&&!1!==t.visible&&i.push(g("invisible",u)),d(t,v,x,i,u);var y=t.transforms,z=v.transforms;if(y){q(y)||i.push(g("array",u,["transforms"])),u.push("transforms");for(var A=0;A<y.length;A++){var B=["transforms",A],C=y[A].type;if(p(y[A])){var D=h.transforms[C]?h.transforms[C].attributes:{};D.type={valType:"enumerated",values:Object.keys(h.transforms)},d(y[A],z[A],D,i,u,B)}else i.push(g("object",u,B))}}}else i.push(g("object",u))}return d(f,j._fullLayout,e(h,k),i,"layout"),0===i.length?void 0:i};var r={object:function(a,b){return("layout"===a&&""===b?"The layout argument":"data"===a[0]&&""===b?"Trace "+a[1]+" in the data argument":f(a)+"key "+b)+" must be linked to an object container"},array:function(a,b){return("data"===a?"The data argument":f(a)+"key "+b)+" must be linked to an array container"},schema:function(a,b){return f(a)+"key "+b+" is not part of the schema"},unused:function(a,b,c){var d=p(c)?"container":"key";return f(a)+d+" "+b+" did not get coerced"},dynamic:function(a,b,c,d){return[f(a)+"key",b,"(set to '"+c+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(a){return"Trace "+a[1]+" got defaulted to be not visible"},value:function(a,b,c){return[f(a)+"key "+b,"is set to an invalid value ("+c+")"].join(" ")}},s=l.counterRegex("([a-z]+)")},{"../lib":743,"../plots/plots":852,"./plot_config":777,"./plot_schema":778}],784:[function(a,b,c){"use strict";c.defaultConfig=a("./plot_api/plot_config"),c.Plots=a("./plots/plots"),c.Axes=a("./plots/cartesian/axes"),c.ModeBar=a("./components/modebar"),a("./plot_api/plot_api")},{"./components/modebar":680,"./plot_api/plot_api":776,"./plot_api/plot_config":777,"./plots/cartesian/axes":789,"./plots/plots":852}],785:[function(a,b,c){"use strict";b.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],786:[function(a,b,c){"use strict";var d=a("../lib");b.exports=function(a,b,c){var e,f=c.name,g=b[f],h=d.isArray(a[f])?a[f]:[],i=b[f]=[];for(e=0;e<h.length;e++){var j=h[e],k={},l={};d.isPlainObject(j)||(l.itemIsNotPlainObject=!0,j={}),c.handleItemDefaults(j,k,b,c,l),k._input=j,k._index=e,i.push(k)}if(d.isArray(g)){var m=Math.min(g.length,i.length);for(e=0;e<m;e++)d.relinkPrivateKeys(i[e],g[e])}}},{"../lib":743}],787:[function(a,b,c){"use strict";var d=a("../components/fx/attributes");b.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:d.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"}}},{"../components/fx/attributes":652}],788:[function(a,b,c){"use strict";b.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],789:[function(a,b,c){"use strict";function d(a){return+a}function e(a){return String(a)}function f(a,b,c,d,e){function f(b){return(1+100*(b-a)/c.dtick)%100<2}for(var g=0,h=0,i=0,j=0,k=0;k<b.length;k++)b[k]%1==0?i++:z(b[k])||j++,f(b[k])&&g++,f(b[k]+c.dtick/2)&&h++;var l=b.length-j;if(i===l&&"date"!==c.type)c.dtick<1?a=d-.5*c.dtick:(a-=.5)+c.dtick<d&&(a+=c.dtick);else if(h<.1*l&&(g>.3*l||f(d)||f(e))){var m=c.dtick/2;a+=a+m<d?m:-m}return a}function g(a,b,c,d,e){var f=B.findExactDates(b,e);if(f.exactDays>.8){var g=Number(c.substr(1));f.exactYears>.8&&g%12==0?a=R.tickIncrement(a,"M6","reverse")+1.5*K:f.exactMonths>.8?a=R.tickIncrement(a,"M1","reverse")+15.5*K:a-=K/2;var h=R.tickIncrement(a,c);if(h<=d)return h}return a}function h(a){var b,c,d=a.tickvals,e=a.ticktext,f=new Array(d.length),g=B.simpleMap(a.range,a.r2l),h=1.0001*g[0]-1e-4*g[1],i=1.0001*g[1]-1e-4*g[0],j=Math.min(h,i),l=Math.max(h,i),m=0;Array.isArray(e)||(e=[]);var n="category"===a.type?a.d2l_noadd:a.d2l;for("log"===a.type&&"L"!==String(a.dtick).charAt(0)&&(a.dtick="L"+Math.pow(10,Math.floor(Math.min(a.range[0],a.range[1]))-1)),c=0;c<d.length;c++)(b=n(d[c]))>j&&b<l&&(void 0===e[c]?f[m]=R.tickText(a,b):f[m]=k(a,b,String(e[c])),m++);return m<d.length&&f.splice(m,d.length-m),f}function i(a,b,c){return b*B.roundUp(a/b,c)}function j(a){var b=a.dtick;if(a._tickexponent=0,z(b)||"string"==typeof b||(b=1),"category"===a.type&&(a._tickround=null),"date"===a.type){var c=a.r2l(a.tick0),d=a.l2r(c).replace(/(^-|i)/g,""),e=d.length;if("M"===String(b).charAt(0))e>10||"01-01"!==d.substr(5)?a._tickround="d":a._tickround=+b.substr(1)%12==0?"y":"m";else if(b>=K&&e<=10||b>=15*K)a._tickround="d";else if(b>=M&&e<=16||b>=L)a._tickround="M";else if(b>=N&&e<=19||b>=M)a._tickround="S";else{var f=a.l2r(c+b).replace(/^-/,"").length;a._tickround=Math.max(e,f)-20}}else if(z(b)||"L"===b.charAt(0)){var g=a.range.map(a.r2d||Number);z(b)||(b=Number(b.substr(1))),a._tickround=2-Math.floor(Math.log(b)/Math.LN10+.01);var h=Math.max(Math.abs(g[0]),Math.abs(g[1])),i=Math.floor(Math.log(h)/Math.LN10+.01);Math.abs(i)>3&&(r(a.exponentformat)&&!s(i)?a._tickexponent=3*Math.round((i-1)/3):a._tickexponent=i)}else a._tickround=null}function k(a,b,c){var d=a.tickfont||{};return{x:b,dx:0,dy:0,text:c||"",fontSize:d.size,font:d.family,fontColor:d.color}}function l(a,b,c,d){var e=a._tickround,f=c&&a.hoverformat||R.getTickFormat(a);d&&(e=z(e)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[e]);var g,h=B.formatDate(b.x,f,e,a._dateFormat,a.calendar),i=h.indexOf("\n");-1!==i&&(g=h.substr(i+1),h=h.substr(0,i)),d&&("00:00:00"===h||"00:00"===h?(h=g,g=""):8===h.length&&(h=h.replace(/:00$/,""))),g&&(c?"d"===e?h+=", "+g:h=g+(h?", "+h:""):a._inCalcTicks&&g===a._prevDateHead||(h+="<br>"+g,a._prevDateHead=g)),b.text=h}function m(a,b,c,d,e){var f=a.dtick,g=b.x,h=a.tickformat;if("never"===e&&(e=""),!d||"string"==typeof f&&"L"===f.charAt(0)||(f="L3"),h||"string"==typeof f&&"L"===f.charAt(0))b.text=t(Math.pow(10,g),a,e,d);else if(z(f)||"D"===f.charAt(0)&&B.mod(g+.01,1)<.1){var i=Math.round(g);-1!==["e","E","power"].indexOf(a.exponentformat)||r(a.exponentformat)&&s(i)?(b.text=0===i?1:1===i?"10":i>1?"10<sup>"+i+"</sup>":"10<sup>"+O+-i+"</sup>",b.fontSize*=1.25):(b.text=t(Math.pow(10,g),a,"","fakehover"),"D1"===f&&"y"===a._id.charAt(0)&&(b.dy-=b.fontSize/6))}else{if("D"!==f.charAt(0))throw"unrecognized dtick "+String(f);b.text=String(Math.round(Math.pow(10,B.mod(g,1)))),b.fontSize*=.75}if("D1"===a.dtick){var j=String(b.text).charAt(0);"0"!==j&&"1"!==j||("y"===a._id.charAt(0)?b.dx-=b.fontSize/4:(b.dy+=b.fontSize/2,b.dx+=(a.range[1]>a.range[0]?1:-1)*b.fontSize*(g<0?.5:.25)))}}function n(a,b){var c=a._categories[Math.round(b.x)];void 0===c&&(c=""),b.text=String(c)}function o(a,b,c,d,e){"never"===e?e="":"all"===a.showexponent&&Math.abs(b.x/a.dtick)<1e-6&&(e="hide"),b.text=t(b.x,a,e,d)}function p(a,b,c,d,e){if("radians"!==a.thetaunit||c)b.text=t(b.x,a,e,d);else{var f=b.x/180;if(0===f)b.text="0";else{var g=q(f);if(g[1]>=100)b.text=t(B.deg2rad(b.x),a,e,d);else{var h=b.x<0;1===g[1]?1===g[0]?b.text="π":b.text=g[0]+"π":b.text=["<sup>",g[0],"</sup>","⁄","<sub>",g[1],"</sub>","π"].join(""),h&&(b.text=O+b.text)}}}}function q(a){function b(a,b){return Math.abs(a-b)<=1e-6}function c(a,d){return b(d,0)?a:c(d,a%d)}var d=function(a){for(var c=1;!b(Math.round(a*c)/c,a);)c*=10;return c}(a),e=a*d,f=Math.abs(c(e,d));return[Math.round(e/f),Math.round(d/f)]}function r(a){return"SI"===a||"B"===a}function s(a){return a>14||a<-15}function t(a,b,c,d){var e=a<0,f=b._tickround,g=c||b.exponentformat||"B",h=b._tickexponent,i=R.getTickFormat(b),k=b.separatethousands;if(d){var l={exponentformat:b.exponentformat,dtick:"none"===b.showexponent?b.dtick:z(a)?Math.abs(a)||1:1,range:"none"===b.showexponent?b.range.map(b.r2d):[0,a||1]};j(l),f=(Number(l._tickround)||0)+4,h=l._tickexponent,b.hoverformat&&(i=b.hoverformat)}if(i)return b._numFormat(i)(a).replace(/-/g,O);var m=Math.pow(10,-f)/2;if("none"===g&&(h=0),(a=Math.abs(a))<m)a="0",e=!1;else{if(a+=m,h&&(a*=Math.pow(10,-h),f+=h),0===f)a=String(Math.floor(a));else if(f<0){a=String(Math.round(a)),a=a.substr(0,a.length+f);for(var n=f;n<0;n++)a+="0"}else{a=String(a);var o=a.indexOf(".")+1;o&&(a=a.substr(0,o+f).replace(/\.?0+$/,""))}a=B.numSeparate(a,b._separators,k)}if(h&&"hide"!==g){r(g)&&s(h)&&(g="power");var p;p=h<0?O+-h:"power"!==g?"+"+h:String(h),"e"===g?a+="e"+p:"E"===g?a+="E"+p:"power"===g?a+="×10<sup>"+p+"</sup>":"B"===g&&9===h?a+="B":r(g)&&(a+=aa[h/3+5])}return e?O+a:a}function u(a,b){var c,d,e=[];for(c=0;c<b.length;c++){var f=[],g=a._fullData[b[c]].xaxis,h=a._fullData[b[c]].yaxis;if(g&&h){for(d=0;d<e.length;d++)-1===e[d].x.indexOf(g)&&-1===e[d].y.indexOf(h)||f.push(d);if(f.length){var i,j=e[f[0]];if(f.length>1)for(d=1;d<f.length;d++)i=e[f[d]],v(j.x,i.x),v(j.y,i.y);v(j.x,[g]),v(j.y,[h])}else e.push({x:[g],y:[h]})}}return e}function v(a,b){for(var c=0;c<b.length;c++)-1===a.indexOf(b[c])&&a.push(b[c])}function w(a,b,c){var d,e,f=[],g=[],h=a.layout;for(d=0;d<b.length;d++)f.push(R.getFromId(a,b[d]));for(d=0;d<c.length;d++)g.push(R.getFromId(a,c[d]));var i=Object.keys(f[0]),j=["anchor","domain","overlaying","position","side","tickangle"],k=["linear","log"];for(d=0;d<i.length;d++){var l=i[d],m=f[0][l],n=g[0][l],o=!0,p=!1,q=!1;if("_"!==l.charAt(0)&&"function"!=typeof m&&-1===j.indexOf(l)){for(e=1;e<f.length&&o;e++){var r=f[e][l];"type"===l&&-1!==k.indexOf(m)&&-1!==k.indexOf(r)&&m!==r?p=!0:r!==m&&(o=!1)}for(e=1;e<g.length&&o;e++){var s=g[e][l];"type"===l&&-1!==k.indexOf(n)&&-1!==k.indexOf(s)&&n!==s?q=!0:g[e][l]!==n&&(o=!1)}o&&(p&&(h[f[0]._name].type="linear"),q&&(h[g[0]._name].type="linear"),x(h,l,f,g,a._fullLayout._dfltTitle))}}for(d=0;d<a._fullLayout.annotations.length;d++){var t=a._fullLayout.annotations[d];-1!==b.indexOf(t.xref)&&-1!==c.indexOf(t.yref)&&B.swapAttrs(h.annotations[d],["?"])}}function x(a,b,c,d,e){var f,g=B.nestedProperty,h=g(a[c[0]._name],b).get(),i=g(a[d[0]._name],b).get();for("title"===b&&(h===e.x&&(h=e.y),i===e.y&&(i=e.x)),f=0;f<c.length;f++)g(a,c[f]._name+"."+b).set(i);for(f=0;f<d.length;f++)g(a,d[f]._name+"."+b).set(h)}var y=a("d3"),z=a("fast-isnumeric"),A=a("../../registry"),B=a("../../lib"),C=a("../../lib/svg_text_utils"),D=a("../../components/titles"),E=a("../../components/color"),F=a("../../components/drawing"),G=a("../../constants/numerical"),H=G.FP_SAFE,I=G.ONEAVGYEAR,J=G.ONEAVGMONTH,K=G.ONEDAY,L=G.ONEHOUR,M=G.ONEMIN,N=G.ONESEC,O=G.MINUS_SIGN,P=G.BADNUM,Q=a("../../constants/alignment").MID_SHIFT,R=b.exports={};R.setConvert=a("./set_convert");var S=a("./axis_autotype"),T=a("./axis_ids");R.id2name=T.id2name,R.cleanId=T.cleanId,R.list=T.list,R.listIds=T.listIds,R.getFromId=T.getFromId,R.getFromTrace=T.getFromTrace,R.coerceRef=function(a,b,c,d,e,f){var g=d.charAt(d.length-1),h=c._fullLayout._subplots[g+"axis"],i=d+"ref",j={};return e||(e=h[0]||f),f||(f=e),j[i]={valType:"enumerated",values:h.concat(f?[f]:[]),dflt:e},B.coerce(a,b,j,i)},R.coercePosition=function(a,b,c,d,e,f){var g,h;if("paper"===d||"pixel"===d)g=B.ensureNumber,h=c(e,f);else{var i=R.getFromId(b,d);f=i.fraction2r(f),h=c(e,f),g=i.cleanPos}a[e]=g(h)},R.cleanPosition=function(a,b,c){return("paper"===c||"pixel"===c?B.ensureNumber:R.getFromId(b,c).cleanPos)(a)};var U=R.getDataConversions=function(a,b,c,f){var g,h="x"===c||"y"===c||"z"===c?c:f;if(Array.isArray(h)){if(g={type:S(f),_categories:[]},R.setConvert(g),"category"===g.type)for(var i=0;i<f.length;i++)g.d2c(f[i])}else g=R.getFromTrace(a,b,h);return g?{d2c:g.d2c,c2d:g.c2d}:"ids"===h?{d2c:e,c2d:e}:{d2c:d,c2d:d}};R.getDataToCoordFunc=function(a,b,c,d){return U(a,b,c,d).d2c},R.counterLetter=function(a){var b=a.charAt(0);return"x"===b?"y":"y"===b?"x":void 0},R.minDtick=function(a,b,c,d){-1===["log","category"].indexOf(a.type)&&d?void 0===a._minDtick?(a._minDtick=b,a._forceTick0=c):a._minDtick&&((a._minDtick/b+1e-6)%1<2e-6&&((c-a._forceTick0)/b%1+1.000001)%1<2e-6?(a._minDtick=b,a._forceTick0=c):((b/a._minDtick+1e-6)%1>2e-6||((c-a._forceTick0)/a._minDtick%1+1.000001)%1>2e-6)&&(a._minDtick=0)):a._minDtick=0},R.getAutoRange=function(a){var b,c=[],d=a._min[0].val,e=a._max[0].val;for(b=1;b<a._min.length&&d===e;b++)d=Math.min(d,a._min[b].val);for(b=1;b<a._max.length&&d===e;b++)e=Math.max(e,a._max[b].val);var f,g,h,i,j,k,l,m=0,n=!1;if(a.range){var o=B.simpleMap(a.range,a.r2l);n=o[1]<o[0]}for("reversed"===a.autorange&&(n=!0,a.autorange=!0),b=0;b<a._min.length;b++)for(g=a._min[b],f=0;f<a._max.length;f++)h=a._max[f],l=h.val-g.val,k=a._length-g.pad-h.pad,l>0&&k>0&&l/k>m&&(i=g,j=h,m=l/k);if(d===e){var p=d-1,q=d+1;c="tozero"===a.rangemode?d<0?[p,0]:[0,q]:"nonnegative"===a.rangemode?[Math.max(0,p),Math.max(0,q)]:[p,q]}else m&&("linear"!==a.type&&"-"!==a.type||("tozero"===a.rangemode?(i.val>=0&&(i={val:0,pad:0}),j.val<=0&&(j={val:0,pad:0})):"nonnegative"===a.rangemode&&(i.val-m*i.pad<0&&(i={val:0,pad:0}),j.val<0&&(j={val:1,pad:0})),m=(j.val-i.val)/(a._length-i.pad-j.pad)),c=[i.val-m*i.pad,j.val+m*j.pad]);return c[0]===c[1]&&("tozero"===a.rangemode?c=c[0]<0?[c[0],0]:c[0]>0?[0,c[0]]:[0,1]:(c=[c[0]-1,c[0]+1],"nonnegative"===a.rangemode&&(c[0]=Math.max(0,c[0])))),n&&c.reverse(),B.simpleMap(c,a.l2r||Number)},R.doAutoRange=function(a){a._length||a.setScale();var b=a._min&&a._max&&a._min.length&&a._max.length;if(a.autorange&&b){a.range=R.getAutoRange(a),a._r=a.range.slice(),a._rl=B.simpleMap(a._r,a.r2l);var c=a._input;c.range=a.range.slice(),c.autorange=a.autorange}},R.saveRangeInitial=function(a,b){for(var c=R.list(a,"",!0),d=!1,e=0;e<c.length;e++){var f=c[e],g=void 0===f._rangeInitial,h=g||!(f.range[0]===f._rangeInitial[0]&&f.range[1]===f._rangeInitial[1]);(g&&!1===f.autorange||b&&h)&&(f._rangeInitial=f.range.slice(),d=!0)}return d},R.saveShowSpikeInitial=function(a,b){for(var c=R.list(a,"",!0),d=!1,e="on",f=0;f<c.length;f++){var g=c[f],h=void 0===g._showSpikeInitial,i=h||!(g.showspikes===g._showspikes);(h||b&&i)&&(g._showSpikeInitial=g.showspikes,d=!0),"on"!==e||g.showspikes||(e="off")}return a._fullLayout._cartesianSpikesEnabled=e,d},R.expand=function(a,b,c){function d(a){if(Array.isArray(a))return function(b){return Math.max(Number(a[b]||0),0)};var b=Math.max(Number(a||0),0);return function(){return b}}function e(c){function d(a){return z(a)&&Math.abs(a)<H}if(i=b[c],z(i)){if(l=t(c)+r,m=u(c)+r,o=i-w(c),p=i+v(c),"log"===a.type&&o<p/10&&(o=p/10),j=a.c2l(o),k=a.c2l(p),s&&(j=Math.min(0,j),k=Math.max(0,k)),d(j)){for(n=!0,g=0;g<a._min.length&&n;g++)h=a._min[g],h.val<=j&&h.pad>=m?n=!1:h.val>=j&&h.pad<=m&&(a._min.splice(g,1),g--);n&&a._min.push({val:j,pad:s&&0===j?0:m})}if(d(k)){for(n=!0,g=0;g<a._max.length&&n;g++)h=a._max[g],h.val>=k&&h.pad>=l?n=!1:h.val<=k&&h.pad<=l&&(a._max.splice(g,1),g--);n&&a._max.push({val:k,pad:s&&0===k?0:l})}}}if((a.autorange||!!B.nestedProperty(a,"rangeslider.autorange").get())&&b){a._min||(a._min=[]),a._max||(a._max=[]),c||(c={}),a._m||a.setScale();var f,g,h,i,j,k,l,m,n,o,p,q=b.length,r=c.padded?.05*a._length:0,s=c.tozero&&("linear"===a.type||"-"===a.type);r&&"domain"===a.constrain&&a._inputDomain&&(r*=(a._inputDomain[1]-a._inputDomain[0])/(a.domain[1]-a.domain[0]));var t=d((a._m>0?c.ppadplus:c.ppadminus)||c.ppad||0),u=d((a._m>0?c.ppadminus:c.ppadplus)||c.ppad||0),v=d(c.vpadplus||c.vpad),w=d(c.vpadminus||c.vpad);for(f=0;f<6;f++)e(f);for(f=q-1;f>5;f--)e(f)}},R.autoBin=function(a,b,c,d,e){var h=B.aggNums(Math.min,null,a),i=B.aggNums(Math.max,null,a);if(e||(e=b.calendar),"category"===b.type)return{start:h-.5,end:i+.5,size:1,_count:i-h+1};var j;if(c)j=(i-h)/c;else{var k=B.distinctVals(a),l=Math.pow(10,Math.floor(Math.log(k.minDiff)/Math.LN10)),m=l*B.roundUp(k.minDiff/l,[.9,1.9,4.9,9.9],!0);j=Math.max(m,2*B.stdev(a)/Math.pow(a.length,d?.25:.4)),z(j)||(j=1)}var n;n="log"===b.type?{type:"linear",range:[h,i]}:{type:b.type,range:B.simpleMap([h,i],b.c2r,0,e),calendar:e},R.setConvert(n),R.autoTicks(n,j);var o,p,q=R.tickIncrement(R.tickFirst(n),n.dtick,"reverse",e);if("number"==typeof n.dtick)q=f(q,a,n,h,i),p=1+Math.floor((i-q)/n.dtick),o=q+p*n.dtick;else for("M"===n.dtick.charAt(0)&&(q=g(q,a,n.dtick,h,e)),o=q,p=0;o<=i;)o=R.tickIncrement(o,n.dtick,!1,e),p++;return{start:b.c2r(q,0,e),end:b.c2r(o,0,e),size:n.dtick,_count:p}},R.calcTicks=function(a){var b=B.simpleMap(a.range,a.r2l);if("auto"===a.tickmode||!a.dtick){var c,d=a.nticks;d||("category"===a.type?(c=a.tickfont?1.2*(a.tickfont.size||12):15,d=a._length/c):(c="y"===a._id.charAt(0)?40:80,d=B.constrain(a._length/c,4,9)+1),"radialaxis"===a._name&&(d*=2)),"array"===a.tickmode&&(d*=100),R.autoTicks(a,Math.abs(b[1]-b[0])/d),a._minDtick>0&&a.dtick<2*a._minDtick&&(a.dtick=a._minDtick,a.tick0=a.l2r(a._forceTick0))}if(a.tick0||(a.tick0="date"===a.type?"2000-01-01":0),j(a),"array"===a.tickmode)return h(a);a._tmin=R.tickFirst(a);var e=b[1]<b[0],f=[],g=1.0001*b[1]-1e-4*b[0];"category"===a.type&&(g=e?Math.max(-.5,g):Math.min(a._categories.length-.5,g));for(var i=null,k=Math.max(1e3,a._length||0),l=a._tmin;(e?l>=g:l<=g)&&!(f.length>k||l===i);l=R.tickIncrement(l,a.dtick,e,a.calendar))i=l,f.push(l);"angular"===a._id&&360===Math.abs(b[1]-b[0])&&f.pop(),a._tmax=f[f.length-1],a._prevDateHead="",a._inCalcTicks=!0;for(var m=new Array(f.length),n=0;n<f.length;n++)m[n]=R.tickText(a,f[n]);return a._inCalcTicks=!1,m};var V=[2,5,10],W=[1,2,3,6,12],X=[1,2,5,10,15,30],Y=[1,2,3,7,14],Z=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],$=[-.301,0,.301,.699,1],_=[15,30,45,90,180];R.autoTicks=function(a,b){function c(a){return Math.pow(a,Math.floor(Math.log(b)/Math.LN10))}var d;if("date"===a.type){a.tick0=B.dateTick0(a.calendar);var e=2*b;e>I?(b/=I,d=c(10),a.dtick="M"+12*i(b,d,V)):e>J?(b/=J,a.dtick="M"+i(b,1,W)):e>K?(a.dtick=i(b,K,Y),a.tick0=B.dateTick0(a.calendar,!0)):e>L?a.dtick=i(b,L,W):e>M?a.dtick=i(b,M,X):e>N?a.dtick=i(b,N,X):(d=c(10),a.dtick=i(b,d,V))}else if("log"===a.type){a.tick0=0;var f=B.simpleMap(a.range,a.r2l);if(b>.7)a.dtick=Math.ceil(b);else if(Math.abs(f[1]-f[0])<1){var g=1.5*Math.abs((f[1]-f[0])/b);b=Math.abs(Math.pow(10,f[1])-Math.pow(10,f[0]))/g,d=c(10),a.dtick="L"+i(b,d,V)}else a.dtick=b>.3?"D2":"D1"}else"category"===a.type?(a.tick0=0,a.dtick=Math.ceil(Math.max(b,1))):"angular"===a._id?(a.tick0=0,d=1,a.dtick=i(b,d,_)):(a.tick0=0,d=c(10),a.dtick=i(b,d,V));if(0===a.dtick&&(a.dtick=1),!z(a.dtick)&&"string"!=typeof a.dtick){var h=a.dtick;throw a.dtick=1,"ax.dtick error: "+String(h)}},R.tickIncrement=function(a,b,c,d){var e=c?-1:1;if(z(b))return a+e*b;var f=b.charAt(0),g=e*Number(b.substr(1));if("M"===f)return B.incrementMonth(a,g,d);if("L"===f)return Math.log(Math.pow(10,a)+g)/Math.LN10;if("D"===f){var h="D2"===b?$:Z,i=a+.01*e,j=B.roundUp(B.mod(i,1),h,c);return Math.floor(i)+Math.log(y.round(Math.pow(10,j),1))/Math.LN10}throw"unrecognized dtick "+String(b)},R.tickFirst=function(a){var b=a.r2l||Number,c=B.simpleMap(a.range,b),d=c[1]<c[0],e=d?Math.floor:Math.ceil,f=1.0001*c[0]-1e-4*c[1],g=a.dtick,h=b(a.tick0);if(z(g)){var i=e((f-h)/g)*g+h;return"category"===a.type&&(i=B.constrain(i,0,a._categories.length-1)),i}var j=g.charAt(0),k=Number(g.substr(1));if("M"===j){for(var l,m,n,o=0,p=h;o<10;){if(((l=R.tickIncrement(p,g,d,a.calendar))-f)*(p-f)<=0)return d?Math.min(p,l):Math.max(p,l);m=(f-(p+l)/2)/(l-p),n=j+(Math.abs(Math.round(m))||1)*k,p=R.tickIncrement(p,n,m<0?!d:d,a.calendar),o++}return B.error("tickFirst did not converge",a),p}if("L"===j)return Math.log(e((Math.pow(10,f)-h)/k)*k+h)/Math.LN10;if("D"===j){var q="D2"===g?$:Z,r=B.roundUp(B.mod(f,1),q,d);return Math.floor(f)+Math.log(y.round(Math.pow(10,r),1))/Math.LN10}throw"unrecognized dtick "+String(g)},R.tickText=function(a,b,c){function d(d){var e;return void 0===d||(c?"none"===d:(e={first:a._tmin,last:a._tmax}[d],"all"!==d&&b!==e))}var e,f,g=k(a,b),h="array"===a.tickmode,i=c||h,j="category"===a.type?a.d2l_noadd:a.d2l;if(h&&Array.isArray(a.ticktext)){var q=B.simpleMap(a.range,a.r2l),r=Math.abs(q[1]-q[0])/1e4;for(f=0;f<a.ticktext.length&&!(Math.abs(b-j(a.tickvals[f]))<r);f++);if(f<a.ticktext.length)return g.text=String(a.ticktext[f]),g}return e=c?"never":"none"!==a.exponentformat&&d(a.showexponent)?"hide":"","date"===a.type?l(a,g,c,i):"log"===a.type?m(a,g,c,i,e):"category"===a.type?n(a,g):"angular"===a._id?p(a,g,c,i,e):o(a,g,c,i,e),a.tickprefix&&!d(a.showtickprefix)&&(g.text=a.tickprefix+g.text),a.ticksuffix&&!d(a.showticksuffix)&&(g.text+=a.ticksuffix),g},R.hoverLabelText=function(a,b,c){if(c!==P&&c!==b)return R.hoverLabelText(a,b)+" - "+R.hoverLabelText(a,c);var d="log"===a.type&&b<=0,e=R.tickText(a,a.c2l(d?-b:b),"hover").text;return d?0===b?"0":O+e:e};var aa=["f","p","n","μ","m","","k","M","G","T"];R.getTickFormat=function(a){function b(a){return"string"!=typeof a?a:Number(a.replace("M",""))*J}function c(a,b){var c=["L","D"];if(typeof a==typeof b){if("number"==typeof a)return a-b;var d=c.indexOf(a.charAt(0)),e=c.indexOf(b.charAt(0));return d===e?Number(a.replace(/(L|D)/g,""))-Number(b.replace(/(L|D)/g,"")):d-e}return"number"==typeof a?1:-1}var d,e;if(a.tickformatstops&&a.tickformatstops.length>0)switch(a.type){case"date":case"linear":for(d=0;d<a.tickformatstops.length;d++)if(function(a,b,c){var d=c||function(a){return a},e=b[0],f=b[1];return(!e&&"number"!=typeof e||d(e)<=d(a))&&(!f&&"number"!=typeof f||d(f)>=d(a))}(a.dtick,a.tickformatstops[d].dtickrange,b)){e=a.tickformatstops[d];break}break;case"log":for(d=0;d<a.tickformatstops.length;d++)if(function(a,b){var d=null===b[0],e=null===b[1],f=c(a,b[0])>=0,g=c(a,b[1])<=0;return(d||f)&&(e||g)}(a.dtick,a.tickformatstops[d].dtickrange)){e=a.tickformatstops[d];break}}return e?e.value:a.tickformat},R.getSubplots=function(a,b){var c=a._fullLayout._subplots,d=c.cartesian.concat(c.gl2d||[]),e=b?R.findSubplotsWithAxis(d,b):d;return e.sort(function(a,b){var c=a.substr(1).split("y"),d=b.substr(1).split("y");return c[0]===d[0]?+c[1]-+d[1]:+c[0]-+d[0]}),e},R.findSubplotsWithAxis=function(a,b){for(var c=new RegExp("x"===b._id.charAt(0)?"^"+b._id+"y":b._id+"$"),d=[],e=0;e<a.length;e++){var f=a[e];c.test(f)&&d.push(f)}return d},R.makeClipPaths=function(a){var b,c,d=a._fullLayout,e={_offset:0,_length:d.width,_id:""},f={_offset:0,_length:d.height,_id:""},g=R.list(a,"x",!0),h=R.list(a,"y",!0),i=[];for(b=0;b<g.length;b++)for(i.push({x:g[b],y:f}),c=0;c<h.length;c++)0===b&&i.push({x:e,y:h[c]}),i.push({x:g[b],y:h[c]});var j=d._clips.selectAll(".axesclip").data(i,function(a){return a.x._id+a.y._id});j.enter().append("clipPath").classed("axesclip",!0).attr("id",function(a){return"clip"+d._uid+a.x._id+a.y._id}).append("rect"),j.exit().remove(),j.each(function(a){y.select(this).select("rect").attr({x:a.x._offset||0,y:a.y._offset||0,width:a.x._length||1,height:a.y._length||1})})},R.doTicks=function(a,b,c){function d(a){var b=j.l2p(a.x);return b>1&&b<j._length-1}function e(a,b){var c=a.selectAll("path."+v).data("inside"===j.ticks?P:t,u);b&&j.ticks?(c.enter().append("path").classed(v,1).classed("ticks",1).classed("crisp",1).call(E.stroke,j.tickcolor).style("stroke-width",L+"px").attr("d",b),c.attr("transform",n),c.exit().remove()):c.remove()}function f(c,d){function e(a,b){a.each(function(a){var c=s(b,a),d=y.select(this),e=d.select(".text-math-group"),f=n(a)+(z(b)&&0!=+b?" rotate("+b+","+m(a)+","+(o(a)-a.fontSize/2)+")":"");if(e.empty())d.select("text").attr({transform:f,"text-anchor":c});else{var g=F.bBox(e.node()).width*{end:-.5,start:.5}[c];e.attr("transform",f+(g?"translate("+g+",0)":""))}})}function f(){return E.length&&Promise.all(E)}function h(){if(e(l,j.tickangle),"x"===r&&!z(j.tickangle)&&("log"!==j.type||"D"!==String(j.dtick).charAt(0))){var a=[];for(l.each(function(b){var c=y.select(this),d=c.select(".text-math-group"),e=j.l2p(b.x);d.empty()&&(d=c.select("text"));var f=F.bBox(d.node());a.push({top:0,bottom:10,height:10,left:e-f.width/2,right:e+f.width/2+2,width:f.width+2})}),q=0;q<a.length-1;q++)if(B.bBoxIntersect(a[q],a[q+1])){D=30;break}if(D){Math.abs((t[t.length-1].x-t[0].x)*j._m)/(t.length-1)<2.5*A&&(D=90),e(l,D)}j._lastangle=D}return g(),b+" done"}function i(){function b(a,b){a[0]=Math.min(a[0],b[0]),a[1]=Math.max(a[1],b[1])}if(j.showticklabels){var d=a.getBoundingClientRect(),e=c.node().getBoundingClientRect();j._boundingBox={width:e.width,height:e.height,left:e.left-d.left,right:e.right-d.left,top:e.top-d.top,bottom:e.bottom-d.top}}else{var f,g=k._size;"x"===r?(f="free"===j.anchor?g.t+g.h*(1-j.position):g.t+g.h*(1-j._anchorAxis.domain[{bottom:0,top:1}[j.side]]),j._boundingBox={top:f,bottom:f,left:j._offset,right:j._offset+j._length,width:j._length,height:0}):(f="free"===j.anchor?g.l+g.w*j.position:g.l+g.w*j._anchorAxis.domain[{left:0,right:1}[j.side]],j._boundingBox={left:f,right:f,bottom:j._offset+j._length,top:j._offset,height:j._length,width:0})}if(p){var h=j._counterSpan=[1/0,-1/0];for(q=0;q<p.length;q++){var i=k._plots[p[q]],l=i["x"===r?"yaxis":"xaxis"];b(h,[l._offset,l._offset+l._length])}"free"===j.anchor&&b(h,"x"===r?[j._boundingBox.bottom,j._boundingBox.top]:[j._boundingBox.right,j._boundingBox.left])}}var l=c.selectAll("g."+v).data(t,u);if(!z(d))return l.remove(),void g();if(!j.showticklabels)return l.remove(),g(),void i();var m,o,s,w,x;"x"===r?(x="bottom"===N?1:-1,m=function(a){return a.dx+I*x},w=d+(H+G)*x,o=function(a){return a.dy+w+a.fontSize*("bottom"===N?1:-.2)},s=function(a){return z(a)&&0!==a&&180!==a?a*x<0?"end":"start":"middle"}):"y"===r?(x="right"===N?1:-1,o=function(a){return a.dy+a.fontSize*Q-I*x},m=function(a){return a.dx+d+(H+G+(90===Math.abs(j.tickangle)?a.fontSize/2:0))*x},s=function(a){return z(a)&&90===Math.abs(a)?"middle":"right"===N?"start":"end"}):"angular"===b&&(j._labelShift=I,j._labelStandoff=H,j._pad=G,m=j._labelx,o=j._labely,s=j._labelanchor);var A=0,D=0,E=[];l.enter().append("g").classed(v,1).append("text").attr("text-anchor","middle").each(function(b){var c=y.select(this),d=a._promises.length;c.call(C.positionText,m(b),o(b)).call(F.font,b.font,b.fontSize,b.fontColor).text(b.text).call(C.convertToTspans,a),d=a._promises[d],d?E.push(a._promises.pop().then(function(){e(c,j.tickangle)})):e(c,j.tickangle)}),l.exit().remove(),l.each(function(a){A=Math.max(A,a.fontSize)}),"angular"===b&&l.each(function(a){y.select(this).select("text").call(C.positionText,m(a),o(a))}),e(l,j._lastangle||j.tickangle);var J=B.syncOrAsync([f,h,i]);return J&&J.then&&a._promises.push(J),J}function g(){if(!c){var d,e,f,g,h=T.getFromId(a,b),i=y.select(a).selectAll("g."+b+"tick"),j={selection:i,side:h.side},l=b.charAt(0),m=a._fullLayout._size,n=h.titlefont.size;if(i.size()){var o=F.getTranslate(i.node().parentNode);j.offsetLeft=o.x,j.offsetTop=o.y}var p=10+1.5*n+(h.linewidth?h.linewidth-1:0);"x"===l?(e="free"===h.anchor?{_offset:m.t+(1-(h.position||0))*m.h,_length:0}:T.getFromId(a,h.anchor),f=h._offset+h._length/2,g="top"===h.side?-p-n*(h.showticklabels?1:0):e._length+p+n*(h.showticklabels?1.5:.5),g+=e._offset,h.rangeslider&&h.rangeslider.visible&&h._boundingBox&&(g+=(k.height-k.margin.b-k.margin.t)*h.rangeslider.thickness+h._boundingBox.height),j.side||(j.side="bottom")):(e="free"===h.anchor?{_offset:m.l+(h.position||0)*m.w,_length:0}:T.getFromId(a,h.anchor),g=h._offset+h._length/2,f="right"===h.side?e._length+p+n*(h.showticklabels?1:.5):-p-n*(h.showticklabels?.5:0),f+=e._offset,d={rotate:"-90",offset:0},j.side||(j.side="left")),D.draw(a,b+"title",{propContainer:h,propName:h._name+".title",placeholder:k._dfltTitle[l],avoid:j,transform:d,attributes:{x:f,y:g,"text-anchor":"middle"}})}}function h(a,b){return!0===a.visible&&a.xaxis+a.yaxis===b&&(!(!A.traceIs(a,"bar")||a.orientation!=={x:"h",y:"v"}[r])||a.fill&&a.fill.charAt(a.fill.length-1)===r)}function i(c,e,f){var g=c.gridlayer.selectAll("."+b),i=c.zerolinelayer,k=c["hidegrid"+r]?[]:P,l=j._gridpath||("x"===r?"M0,"+e._offset+"v":"M"+e._offset+",0h")+e._length,m=g.selectAll("path."+w).data(!1===j.showgrid?[]:k,u);if(m.enter().append("path").classed(w,1).classed("crisp",1).attr("d",l).each(function(a){j.zeroline&&("linear"===j.type||"-"===j.type)&&Math.abs(a.x)<j.dtick/100&&y.select(this).remove()}),m.attr("transform",n).call(E.stroke,j.gridcolor||"#ddd").style("stroke-width",J+"px"),"function"==typeof l&&m.attr("d",l),m.exit().remove(),i){for(var o=!1,p=0;p<a._fullData.length;p++)if(h(a._fullData[p],f)){o=!0;break}var q=B.simpleMap(j.range,j.r2l),s=q[0]*q[1]<=0&&j.zeroline&&("linear"===j.type||"-"===j.type)&&k.length&&(o||d({x:0})||!j.showline),t=i.selectAll("path."+x).data(s?[{x:0,id:b}]:[]);t.enter().append("path").classed(x,1).classed("zl",1).classed("crisp",1).attr("d",l).each(function(){i.selectAll("path").sort(function(a,b){return T.idSort(a.id,b.id)})}),t.attr("transform",n).call(E.stroke,j.zerolinecolor||E.defaultLine).style("stroke-width",K+"px"),t.exit().remove()}}var j,k=a._fullLayout,l=!1;if("object"==typeof b)j=b,b=j._id,l=!0;else if(j=R.getFromId(a,b),"redraw"===b&&k._paper.selectAll("g.subplot").each(function(a){var b=k._plots[a],c=b.xaxis,d=b.yaxis;b.xaxislayer.selectAll("."+c._id+"tick").remove(),b.yaxislayer.selectAll("."+d._id+"tick").remove(),b.gridlayer.selectAll("path").remove(),b.zerolinelayer.selectAll("path").remove(),k._infolayer.select(".g-"+c._id+"title").remove(),k._infolayer.select(".g-"+d._id+"title").remove()}),!b||"redraw"===b)return B.syncOrAsync(R.list(a,"",!0).map(function(c){return function(){if(c._id){var d=R.doTicks(a,c._id);return"redraw"===b&&(c._r=c.range.slice(),c._rl=B.simpleMap(c._r,c.r2l)),d}}}));j.tickformat||(-1===["none","e","E","power","SI","B"].indexOf(j.exponentformat)&&(j.exponentformat="e"),-1===["all","first","last","none"].indexOf(j.showexponent)&&(j.showexponent="all")),j.setScale();var m,n,o,p,q,r=b.charAt(0),s=R.counterLetter(b),t=R.calcTicks(j),u=function(a){return[a.text,a.x,j.mirror,a.font,a.fontSize,a.fontColor].join("_")},v=b+"tick",w=b+"grid",x=b+"zl",G=(j.linewidth||1)/2,H="outside"===j.ticks?j.ticklen:0,I=0,J=F.crispRound(a,j.gridwidth,1),K=F.crispRound(a,j.zerolinewidth,J),L=F.crispRound(a,j.tickwidth,1);if(j._counterangle&&"outside"===j.ticks){var M=j._counterangle*Math.PI/180;H=j.ticklen*Math.cos(M)+1,I=j.ticklen*Math.sin(M)}if(j.showticklabels&&("outside"===j.ticks||j.showline)&&(H+=.2*j.tickfont.size),
"x"===r)m=["bottom","top"],n=j._transfn||function(a){return"translate("+(j._offset+j.l2p(a.x))+",0)"},o=function(a,b){if(j._counterangle){var c=j._counterangle*Math.PI/180;return"M0,"+a+"l"+Math.sin(c)*b+","+Math.cos(c)*b}return"M0,"+a+"v"+b};else if("y"===r)m=["left","right"],n=j._transfn||function(a){return"translate(0,"+(j._offset+j.l2p(a.x))+")"},o=function(a,b){if(j._counterangle){var c=j._counterangle*Math.PI/180;return"M"+a+",0l"+Math.cos(c)*b+","+-Math.sin(c)*b}return"M"+a+",0h"+b};else{if("angular"!==b)return void B.warn("Unrecognized doTicks axis:",b);m=["left","right"],n=j._transfn,o=function(a,b){return"M"+a+",0h"+b}}var N=j.side||m[0],O=[-1,1,N===m[1]?1:-1];if("inside"!==j.ticks==("x"===r)&&(O=O.map(function(a){return-a})),j.visible){j._tickFilter&&(t=t.filter(j._tickFilter));var P=t.filter(d);if("angular"===j._id&&(P=t),l){if(e(j._axislayer,o(j._pos+G*O[2],O[2]*j.ticklen)),j._counteraxis){i({gridlayer:j._gridlayer,zerolinelayer:j._zerolinelayer},j._counteraxis)}return f(j._axislayer,j._pos)}if(k._has("cartesian")){p=R.getSubplots(a,j);var S={};p.map(function(a){var b=k._plots[a],c=b[s+"axis"],d=c._mainAxis._id;S[d]||(S[d]=1,i(b,c,a))});var U=j._mainSubplot,V=k._plots[U],W=[];if(j.ticks){var X=O[2],Y=o(j._mainLinePosition+G*X,X*j.ticklen);j._anchorAxis&&j.mirror&&!0!==j.mirror&&(Y+=o(j._mainMirrorPosition-G*X,-X*j.ticklen)),e(V[r+"axislayer"],Y),W=Object.keys(j._linepositions)}W.map(function(a){function b(a){var b=O[a];return o(f[a]+G*b,b*j.ticklen)}var c=k._plots[a],d=c[r+"axislayer"],f=j._linepositions[a]||[];e(d,b(0)+b(1))});return f(V[r+"axislayer"],j._mainLinePosition)}}},R.swap=function(a,b){for(var c=u(a,b),d=0;d<c.length;d++)w(a,c[d].x,c[d].y)}},{"../../components/color":618,"../../components/drawing":643,"../../components/titles":709,"../../constants/alignment":716,"../../constants/numerical":721,"../../lib":743,"../../lib/svg_text_utils":766,"../../registry":873,"./axis_autotype":790,"./axis_ids":792,"./set_convert":808,d3:128,"fast-isnumeric":140}],790:[function(a,b,c){"use strict";function d(a){if(!a)return!1;for(var b=0;b<a.length;b++)if(g(a[b]))return!0;return!1}function e(a,b){for(var c,d=0,e=0,f=Math.max(1,(a.length-1)/1e3),i=0;i<a.length;i+=f)c=a[Math.round(i)],h.isDateTime(c,b)&&(d+=1),g(c)&&(e+=1);return d>2*e}function f(a){for(var b,c=Math.max(1,(a.length-1)/1e3),d=0,e=0,f=0;f<a.length;f+=c)b=a[Math.round(f)],h.cleanNumber(b)!==i?d++:"string"==typeof b&&""!==b&&"None"!==b&&e++;return e>2*d}var g=a("fast-isnumeric"),h=a("../../lib"),i=a("../../constants/numerical").BADNUM;b.exports=function(a,b){return e(a,b)?"date":f(a)?"category":d(a)?"linear":"-"}},{"../../constants/numerical":721,"../../lib":743,"fast-isnumeric":140}],791:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("./layout_attributes"),g=a("./tick_value_defaults"),h=a("./tick_mark_defaults"),i=a("./tick_label_defaults"),j=a("./category_order_defaults"),k=a("./line_grid_defaults"),l=a("./set_convert"),m=a("./ordered_categories");b.exports=function(a,b,c,n,o){var p=n.letter,q=n.font||{},r=c("visible",!n.cheateronly),s=b.type;if("date"===s){d.getComponentMethod("calendars","handleDefaults")(a,b,"calendar",n.calendar)}if(l(b,o),c("autorange",!b.isValidRange(a.range))&&c("rangemode"),c("range"),b.cleanRange(),j(a,b,c),b._initialCategories="category"===s?m(p,b.categoryorder,b.categoryarray,n.data):[],!r)return b;var t=c("color"),u=t===a.color?t:q.color;return c("title",o._dfltTitle[p]),e.coerceFont(c,"titlefont",{family:q.family,size:Math.round(1.2*q.size),color:u}),g(a,b,c,s),i(a,b,c,s,n),h(a,b,c,n),k(a,b,c,{dfltColor:t,bgColor:n.bgColor,showGrid:n.showGrid,attributes:f}),(b.showline||b.ticks)&&c("mirror"),b}},{"../../lib":743,"../../registry":873,"./category_order_defaults":793,"./layout_attributes":801,"./line_grid_defaults":803,"./ordered_categories":804,"./set_convert":808,"./tick_label_defaults":809,"./tick_mark_defaults":810,"./tick_value_defaults":811}],792:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("./constants");c.id2name=function(a){if("string"==typeof a&&a.match(e.AX_ID_PATTERN)){var b=a.substr(1);return"1"===b&&(b=""),a.charAt(0)+"axis"+b}},c.name2id=function(a){if(a.match(e.AX_NAME_PATTERN)){var b=a.substr(5);return"1"===b&&(b=""),a.charAt(0)+b}},c.cleanId=function(a,b){if(a.match(e.AX_ID_PATTERN)&&(!b||a.charAt(0)===b)){var c=a.substr(1).replace(/^0+/,"");return"1"===c&&(c=""),a.charAt(0)+c}},c.list=function(a,b,d){var e=a._fullLayout;if(!e)return[];var f,g=c.listIds(a,b),h=new Array(g.length);for(f=0;f<g.length;f++){var i=g[f];h[f]=e[i.charAt(0)+"axis"+i.substr(1)]}if(!d){var j=e._subplots.gl3d||[];for(f=0;f<j.length;f++){var k=e[j[f]];b?h.push(k[b+"axis"]):h.push(k.xaxis,k.yaxis,k.zaxis)}}return h},c.listIds=function(a,b){var c=a._fullLayout;if(!c)return[];var d=c._subplots;return b?d[b+"axis"]:d.xaxis.concat(d.yaxis)},c.getFromId=function(a,b,d){var e=a._fullLayout;return"x"===d?b=b.replace(/y[0-9]*/,""):"y"===d&&(b=b.replace(/x[0-9]*/,"")),e[c.id2name(b)]},c.getFromTrace=function(a,b,e){var f=a._fullLayout,g=null;if(d.traceIs(b,"gl3d")){var h=b.scene;"scene"===h.substr(0,5)&&(g=f[h][e+"axis"])}else g=c.getFromId(a,b[e+"axis"]||e);return g},c.idSort=function(a,b){var c=a.charAt(0),d=b.charAt(0);return c!==d?c>d?1:-1:+(a.substr(1)||1)-+(b.substr(1)||1)}},{"../../registry":873,"./constants":794}],793:[function(a,b,c){"use strict";b.exports=function(a,b,c){if("category"===b.type){var d,e=a.categoryarray,f=Array.isArray(e)&&e.length>0;f&&(d="array");var g=c("categoryorder",d);"array"===g&&c("categoryarray"),f||"array"!==g||(b.categoryorder="trace")}}},{}],794:[function(a,b,c){"use strict";var d=a("../../lib").counterRegex;b.exports={idRegex:{x:d("x"),y:d("y")},attrRegex:d("[xy]axis"),xAxisMatch:d("xaxis"),yAxisMatch:d("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib":743}],795:[function(a,b,c){"use strict";function d(a,b,c,d){var e,f,h,i,j=d[g(b)].type,k=[];for(f=0;f<c.length;f++)(h=c[f])!==b&&(i=d[g(h)],i.type!==j||i.fixedrange||k.push(h));for(e=0;e<a.length;e++)if(a[e][b]){var l=a[e],m=[];for(f=0;f<k.length;f++)h=k[f],l[h]||m.push(h);return{linkableAxes:m,thisGroup:l}}return{linkableAxes:k,thisGroup:null}}function e(a,b,c,d,e){var f,g,h,i,j;null===b?(b={},b[c]=1,j=a.length,a.push(b)):j=a.indexOf(b);var k=Object.keys(b);for(f=0;f<a.length;f++)if(h=a[f],f!==j&&h[d]){var l=h[d];for(g=0;g<k.length;g++)i=k[g],h[i]=l*e*b[i];return void a.splice(j,1)}if(1!==e)for(g=0;g<k.length;g++)b[k[g]]*=e;b[d]=1}var f=a("../../lib"),g=a("./axis_ids").id2name;b.exports=function(a,b,c,g,h){var i=h._axisConstraintGroups,j=b._id,k=j.charAt(0);if(!b.fixedrange&&(c("constrain"),f.coerce(a,b,{constraintoward:{valType:"enumerated",values:"x"===k?["left","center","right"]:["bottom","middle","top"],dflt:"x"===k?"center":"middle"}},"constraintoward"),a.scaleanchor)){var l=d(i,j,g,h),m=f.coerce(a,b,{scaleanchor:{valType:"enumerated",values:l.linkableAxes}},"scaleanchor");if(m){var n=c("scaleratio");n||(n=b.scaleratio=1),e(i,l.thisGroup,j,m,n)}else-1!==g.indexOf(a.scaleanchor)&&f.warn("ignored "+b._name+'.scaleanchor: "'+a.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}}},{"../../lib":743,"./axis_ids":792}],796:[function(a,b,c){"use strict";function d(a,b){var c=a._inputDomain,d=h[a.constraintoward],e=c[0]+(c[1]-c[0])*d;a.domain=a._input.domain=[e+(c[0]-e)/b,e+(c[1]-e)/b]}var e=a("./axis_ids").id2name,f=a("./scale_zoom"),g=a("../../constants/numerical").ALMOST_EQUAL,h=a("../../constants/alignment").FROM_BL;c.enforce=function(a){var b,c,h,i,j,k,l,m=a._fullLayout,n=m._axisConstraintGroups||[];for(b=0;b<n.length;b++){var o=n[b],p=Object.keys(o),q=1/0,r=0,s=1/0,t={},u={},v=!1;for(c=0;c<p.length;c++)h=p[c],u[h]=i=m[e(h)],i._inputDomain?i.domain=i._inputDomain.slice():i._inputDomain=i.domain.slice(),i._inputRange||(i._inputRange=i.range.slice()),i.setScale(),t[h]=j=Math.abs(i._m)/o[h],q=Math.min(q,j),"domain"!==i.constrain&&i._constraintShrinkable||(s=Math.min(s,j)),delete i._constraintShrinkable,r=Math.max(r,j),"domain"===i.constrain&&(v=!0);if(!(q>g*r)||v)for(c=0;c<p.length;c++)if(h=p[c],j=t[h],i=u[h],k=i.constrain,j!==s||"domain"===k)if(l=j/s,"range"===k)f(i,l);else{var w=i._inputDomain,x=(i.domain[1]-i.domain[0])/(w[1]-w[0]),y=(i.r2l(i.range[1])-i.r2l(i.range[0]))/(i.r2l(i._inputRange[1])-i.r2l(i._inputRange[0]));if((l/=x)*y<1){i.domain=i._input.domain=w.slice(),f(i,l);continue}if(y<1&&(i.range=i._input.range=i._inputRange.slice(),l*=y),i.autorange&&i._min.length&&i._max.length){var z=i.r2l(i.range[0]),A=i.r2l(i.range[1]),B=(z+A)/2,C=B,D=B,E=Math.abs(A-B),F=B-E*l*1.0001,G=B+E*l*1.0001;d(i,l),i.setScale();var H,I,J=Math.abs(i._m);for(I=0;I<i._min.length;I++)(H=i._min[I].val-i._min[I].pad/J)>F&&H<C&&(C=H);for(I=0;I<i._max.length;I++)(H=i._max[I].val+i._max[I].pad/J)<G&&H>D&&(D=H);var K=(D-C)/(2*E);l/=K,C=i.l2r(C),D=i.l2r(D),i.range=i._input.range=z<A?[C,D]:[D,C]}d(i,l)}}},c.clean=function(a,b){if(b._inputDomain){for(var c=!1,d=b._id,e=a._fullLayout._axisConstraintGroups,f=0;f<e.length;f++)if(e[f][d]){c=!0;break}c&&"domain"===b.constrain||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},{"../../constants/alignment":716,"../../constants/numerical":721,"./axis_ids":792,"./scale_zoom":806}],797:[function(a,b,c){"use strict";function d(a,b,c,d,e,q,F,I){function T(){ca=[b.xaxis],da=[b.yaxis];var c=ca[0],d=da[0];ga=c._length,ha=d._length;var e=oa._axisConstraintGroups,f=[c._id],h=[d._id];ba=[b].concat(F&&I?b.overlays:[]);for(var i=1;i<ba.length;i++){var j=ba[i].xaxis,k=ba[i].yaxis;-1===ca.indexOf(j)&&(ca.push(j),f.push(j._id)),-1===da.indexOf(k)&&(da.push(k),h.push(k._id))}ia=g(ca,I),ja=g(da,F),ka=l(ja+ia,oa.dragmode),ea=c._offset,fa=d._offset;var m=x(e,f,h);la=m.xy,ma=[];for(var n in m.x)ma.push(N(a,n));na=[];for(var o in m.y)na.push(N(a,o))}function U(b,c,d){var e=sa.getBoundingClientRect();ua=c-e.left,va=d-e.top,wa={l:ua,r:ua,w:0,t:va,b:va,h:0},xa=a._hmpixcount?a._hmlumcount/a._hmpixcount:A(a._fullLayout.plot_bgcolor).getLuminance(),ya="M0,0H"+ga+"V"+ha+"H0V0",za=!1,Aa="xy",Ba=m(pa,xa,ea,fa,ya),Ca=n(pa,ea,fa),o(pa)}function V(b,c){function d(){Aa="",wa.r=wa.l,wa.t=wa.b,Ca.attr("d","M0,0Z")}if(a._transitioningWithDuration)return!1;var e=Math.max(0,Math.min(ga,b+ua)),f=Math.max(0,Math.min(ha,c+va)),g=Math.abs(e-ua),h=Math.abs(f-va);wa.l=Math.min(ua,e),wa.r=Math.max(ua,e),wa.t=Math.min(va,f),wa.b=Math.max(va,f),la?g>S||h>S?(Aa="xy",g/ga>h/ha?(h=g*ha/ga,va>f?wa.t=va-h:wa.b=va+h):(g=h*ga/ha,ua>e?wa.l=ua-g:wa.r=ua+g),Ca.attr("d",w(wa))):d():!ja||h<Math.min(Math.max(.6*g,R),S)?g<R?d():(wa.t=0,wa.b=ha,Aa="x",Ca.attr("d",u(wa,va))):!ia||g<Math.min(.6*h,S)?(wa.l=0,wa.r=ga,Aa="y",Ca.attr("d",v(wa,ua))):(Aa="xy",Ca.attr("d",w(wa))),wa.w=wa.r-wa.l,wa.h=wa.b-wa.t,p(Ba,Ca,wa,ya,za,xa),za=!0}function W(){if(Math.min(wa.h,wa.w)<2*R)return r(a);"xy"!==Aa&&"x"!==Aa||i(ca,wa.l/ga,wa.r/ga,Da,ma),"xy"!==Aa&&"y"!==Aa||i(da,(ha-wa.b)/ha,(ha-wa.t)/ha,Da,na),r(a),_(),s(a)}function X(b){function c(a,b,c){function d(b){return a.l2r(f+(b-f)*c)}if(!a.fixedrange){var e=D.simpleMap(a.range,a.r2l),f=e[0]+(e[1]-e[0])*b;a.range=e.map(d)}}if(a._context.scrollZoom||oa._enablescrollzoom){if(a._transitioningWithDuration)return D.pauseEvent(b);var d=a.querySelector(".plotly");if(T(),!(d.scrollHeight-d.clientHeight>10||d.scrollWidth-d.clientWidth>10)){clearTimeout(Fa);var e=-b.deltaY;if(isFinite(e)||(e=b.wheelDelta/10),!isFinite(e))return void D.log("Did not find wheel motion attributes: ",b);var f,g=Math.exp(-Math.min(Math.max(e,-20),20)/200),h=Ha.draglayer.select(".nsewdrag").node().getBoundingClientRect(),i=(b.clientX-h.left)/h.width,j=(h.bottom-b.clientY)/h.height;if(I||la){for(I||(i=.5),f=0;f<ca.length;f++)c(ca[f],i,g);Ea[2]*=g,Ea[0]+=Ea[2]*i*(1/g-1)}if(F||la){for(F||(j=.5),f=0;f<da.length;f++)c(da[f],j,g);Ea[3]*=g,Ea[1]+=Ea[3]*(1-j)*(1/g-1)}return aa(Ea),Z(F,I),Fa=setTimeout(function(){Ea=[0,0,ga,ha];_()},Ga),D.pauseEvent(b)}}}function Y(b,c){function d(a,b,c){for(var d,e,f=1-b,g=0;g<a.length;g++){var h=a[g];if(!h.fixedrange){d=h,e=h._rl[f]+(h._rl[b]-h._rl[f])/k(c/h._length);var i=h.l2r(e);!1!==i&&void 0!==i&&(h.range[b]=i)}}return d._length*(d._rl[b]-e)/(d._rl[b]-d._rl[f])}if(!a._transitioningWithDuration){if(T(),"ew"===ia||"ns"===ja)return ia&&j(ca,b),ja&&j(da,c),aa([ia?-b:0,ja?-c:0,ga,ha]),void Z(ja,ia);if(la&&ia&&ja){var e="w"===ia==("n"===ja)?1:-1,f=(b/ga+e*c/ha)/2;b=f*ga,c=e*f*ha}"w"===ia?b=d(ca,0,b):"e"===ia?b=d(ca,1,-b):ia||(b=0),"n"===ja?c=d(da,1,c):"s"===ja?c=d(da,0,-c):ja||(c=0);var g="w"===ia?b:0,h="n"===ja?c:0;if(la){var i;if(!ia&&1===ja.length){for(i=0;i<ca.length;i++)ca[i].range=ca[i]._r.slice(),P(ca[i],1-c/ha);b=c*ga/ha,g=b/2}if(!ja&&1===ia.length){for(i=0;i<da.length;i++)da[i].range=da[i]._r.slice(),P(da[i],1-b/ga);c=b*ha/ga,h=c/2}}aa([g,h,ga-b,ha-c]),Z(ja,ia)}}function Z(b,c){function d(a){for(f=0;f<a.length;f++)a[f].fixedrange||g.push(a[f]._id)}function e(d,e,h){for(f=0;f<d.length;f++){var i=d[f];if((c&&-1!==g.indexOf(i.xref)||b&&-1!==g.indexOf(i.yref))&&(e(a,f),h))return}}var f,g=[];for((c||la)&&(d(ca),d(ma)),(b||la)&&(d(da),d(na)),Da={},f=0;f<g.length;f++){var h=g[f];M(a,h,!0);var i=N(a,h);Da[i._name+".range[0]"]=i.range[0],Da[i._name+".range[1]"]=i.range[1]}e(oa.annotations||[],C.getComponentMethod("annotations","drawOne")),e(oa.shapes||[],C.getComponentMethod("shapes","drawOne")),e(oa.images||[],C.getComponentMethod("images","draw"),!0)}function $(){if(!a._transitioningWithDuration){var b,c,d,e=a._context.doubleClick,f=(ia?ca:[]).concat(ja?da:[]),g={};if("reset+autosize"===e)for(e="autosize",c=0;c<f.length;c++)if(b=f[c],b._rangeInitial&&(b.range[0]!==b._rangeInitial[0]||b.range[1]!==b._rangeInitial[1])||!b._rangeInitial&&!b.autorange){e="reset";break}if("autosize"===e)for(c=0;c<f.length;c++)b=f[c],b.fixedrange||(g[b._name+".autorange"]=!0);else if("reset"===e)for((ia||la)&&(f=f.concat(ma)),ja&&!la&&(f=f.concat(na)),la&&(ia?ja||(f=f.concat(da)):f=f.concat(ca)),c=0;c<f.length;c++)b=f[c],b._rangeInitial?(d=b._rangeInitial,g[b._name+".range[0]"]=d[0],g[b._name+".range[1]"]=d[1]):g[b._name+".autorange"]=!0;a.emit("plotly_doubleclick",null),B.relayout(a,g)}}function _(){aa([0,0,ga,ha]),D.syncOrAsync([L.previousPromises,function(){B.relayout(a,Da)}],a)}function aa(a){function b(a){return a.fixedrange?0:n&&-1!==ma.indexOf(a)?l:o&&-1!==(la?ma:na).indexOf(a)?m:0}function c(a,b){return b?(a.range=a._r.slice(),P(a,b),d(a,b)):0}function d(a,b){return a._length*(1-b)*K[a.constraintoward||"middle"]}var e,f,g,h,i,j=oa._plots,k=Object.keys(j),l=a[2]/ca[0]._length,m=a[3]/da[0]._length,n=I||la,o=F||la;for(oa._glcanvas&&oa._glcanvas.size()&&oa._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0})}),e=0;e<k.length;e++){var p=j[k[e]],q=p.xaxis,r=p.yaxis,s=n&&!q.fixedrange&&-1!==ca.indexOf(q),t=o&&!r.fixedrange&&-1!==da.indexOf(r);if(p._scene&&p._scene.update){var u=D.simpleMap(q.range,q.r2l),v=D.simpleMap(r.range,r.r2l);p._scene.update({range:[u[0],v[0],u[1],v[1]]})}if(s?(f=l,h=I?a[0]:d(q,f)):(f=b(q),h=c(q,f)),t?(g=m,i=F?a[1]:d(r,g)):(g=b(r),i=c(r,g)),f||g){f||(f=1),g||(g=1);var w=q._offset-h/f,x=r._offset-i/g;oa._defs.select("#"+p.clipId+"> rect").call(G.setTranslate,h,i).call(G.setScale,f,g);var y=p.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");p.plot.call(G.setTranslate,w,x).call(G.setScale,1/f,1/g),y.selectAll(".point").call(G.setPointGroupScale,f,g),y.selectAll(".textpoint").call(G.setTextPointsScale,f,g),y.call(G.hideOutsideRangePoints,p)}}}var ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa=a._fullLayout,pa=a._fullLayout._zoomlayer,qa=F+I==="nsew",ra=1===(F+I).length;T();var sa=f(b,F+I+"drag",ka,c,d,e,q);if(!ja&&!ia&&!t(oa.dragmode))return sa.onmousedown=null,sa.style.pointerEvents=qa?"all":"none",sa;var ta={element:sa,gd:a,plotinfo:b,prepFn:function(b,c,d){var e=a._fullLayout.dragmode;qa?b.shiftKey?"pan"===e?e="zoom":t(e)||(e="pan"):b.ctrlKey&&(e="pan"):e="pan",ta.minDrag="lasso"===e?1:void 0,"zoom"===e?(ta.moveFn=V,ta.doneFn=W,ta.minDrag=1,U(b,c,d)):"pan"===e?(ta.moveFn=Y,ta.doneFn=_,o(pa)):t(e)&&(ta.xaxes=ca,ta.yaxes=da,O(b,c,d,ta,e))},clickFn:function(c,d){if(r(a),2!==c||ra||$(),qa)H.click(a,d,b.id);else if(1===c&&ra){var e=F?da[0]:ca[0],f="s"===F||"w"===I?0:1,g=e._name+".range["+f+"]",i=h(e,f),j="left",k="middle";if(e.fixedrange)return;F?(k="n"===F?"top":"bottom","right"===e.side&&(j="right")):"e"===I&&(j="right"),a._context.showAxisRangeEntryBoxes&&z.select(sa).call(E.makeEditable,{gd:a,immediate:!0,background:oa.paper_bgcolor,text:String(i),fill:e.tickfont?e.tickfont.color:"#444",horizontalAlign:j,verticalAlign:k}).on("edit",function(b){var c=e.d2r(b);void 0!==c&&B.relayout(a,g,c)})}}};J.init(ta);var ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da={},Ea=[0,0,ga,ha],Fa=null,Ga=Q.REDRAWDELAY,Ha=b.mainplot?oa._plots[b.mainplot]:b;return F.length*I.length!=1&&y(sa,X),sa}function e(a,b,c,d){var e=a.draglayer.selectAll("."+c).data([0]);return e.enter().append(b).classed("drag",!0).classed(c,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",a.id),e.call(I,d),e.node()}function f(a,b,c,d,f,g,h){var i=e(a,"rect",b,c);return z.select(i).call(G.setRect,d,f,g,h),i}function g(a,b){for(var c=0;c<a.length;c++)if(!a[c].fixedrange)return b;return""}function h(a,b){var c,d=a.range[b],e=Math.abs(d-a.range[1-b]);return"date"===a.type?d:"log"===a.type?(c=Math.ceil(Math.max(0,-Math.log(e)/Math.LN10))+3,z.format("."+c+"g")(Math.pow(10,d))):(c=Math.floor(Math.log(Math.abs(d))/Math.LN10)-Math.floor(Math.log(e)/Math.LN10)+4,z.format("."+String(c)+"g")(d))}function i(a,b,c,d,e){var f,g,h,j;for(f=0;f<a.length;f++)g=a[f],g.fixedrange||(h=g._rl[0],j=g._rl[1]-h,g.range=[g.l2r(h+j*b),g.l2r(h+j*c)],d[g._name+".range[0]"]=g.range[0],d[g._name+".range[1]"]=g.range[1]);if(e&&e.length){var k=(b+(1-c))/2;i(e,k,1-k,d)}}function j(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.fixedrange||(d.range=[d.l2r(d._rl[0]-b/d._m),d.l2r(d._rl[1]-b/d._m)])}}function k(a){return 1-(a>=0?Math.min(a,.9):1/(1/Math.max(a,-.3)+3.222))}function l(a,b){return a?"nsew"===a?"pan"===b?"move":"crosshair":a.toLowerCase()+"-resize":"pointer"}function m(a,b,c,d,e){return a.append("path").attr("class","zoombox").style({fill:b>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+c+", "+d+")").attr("d",e+"Z")}function n(a,b,c){return a.append("path").attr("class","zoombox-corners").style({fill:F.background,stroke:F.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+b+", "+c+")").attr("d","M0,0Z")}function o(a){a.selectAll(".select-outline").remove()}function p(a,b,c,d,e,f){a.attr("d",d+"M"+c.l+","+c.t+"v"+c.h+"h"+c.w+"v-"+c.h+"h-"+c.w+"Z"),q(a,b,e,f)}function q(a,b,c,d){c||(a.transition().style("fill",d>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),b.transition().style("opacity",1).duration(200))}function r(a){z.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function s(a){U&&a.data&&a._context.showTips&&(D.notifier(D._(a,"Double-click to zoom back out"),"long"),U=!1)}function t(a){return"lasso"===a||"select"===a}function u(a,b){return"M"+(a.l-.5)+","+(b-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(a.r+.5)+","+(b-S-.5)+"h3v"+(2*S+1)+"h-3Z"}function v(a,b){return"M"+(b-S-.5)+","+(a.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(b-S-.5)+","+(a.b+.5)+"v3h"+(2*S+1)+"v-3Z"}function w(a){var b=Math.floor(Math.min(a.b-a.t,a.r-a.l,S)/2);return"M"+(a.l-3.5)+","+(a.t-.5+b)+"h3v"+-b+"h"+b+"v-3h-"+(b+3)+"ZM"+(a.r+3.5)+","+(a.t-.5+b)+"h-3v"+-b+"h"+-b+"v-3h"+(b+3)+"ZM"+(a.r+3.5)+","+(a.b+.5-b)+"h-3v"+b+"h"+-b+"v3h"+(b+3)+"ZM"+(a.l-3.5)+","+(a.b+.5-b)+"h3v"+b+"h"+b+"v3h-"+(b+3)+"Z"}function x(a,b,c){var d,e,f,g,h,i,j=!1,k={},l={};for(d=0;d<a.length;d++){for(g=a[d],e=0;e<b.length;e++)if(g[b[e]]){for(h in g)-1===("x"===h.charAt(0)?b:c).indexOf(h)&&(k[h]=1);for(f=0;f<c.length;f++)g[c[f]]&&(j=!0)}for(e=0;e<c.length;e++)if(g[c[e]])for(i in g)-1===("x"===i.charAt(0)?b:c).indexOf(i)&&(l[i]=1)}return j&&(D.extendFlat(k,l),l={}),{x:k,y:l,xy:j}}function y(a,b){if(T){var c=void 0!==a.onwheel?"wheel":"mousewheel";a._onwheel&&a.removeEventListener(c,a._onwheel),a._onwheel=b,a.addEventListener(c,b,{passive:!1})}else void 0!==a.onwheel?a.onwheel=b:void 0!==a.onmousewheel&&(a.onmousewheel=b)}var z=a("d3"),A=a("tinycolor2"),B=a("../../plotly"),C=a("../../registry"),D=a("../../lib"),E=a("../../lib/svg_text_utils"),F=a("../../components/color"),G=a("../../components/drawing"),H=a("../../components/fx"),I=a("../../lib/setcursor"),J=a("../../components/dragelement"),K=a("../../constants/alignment").FROM_TL,L=a("../plots"),M=a("./axes").doTicks,N=a("./axis_ids").getFromId,O=a("./select"),P=a("./scale_zoom"),Q=a("./constants"),R=Q.MINDRAG,S=Q.MINZOOM,T=D.eventListenerOptionsSupported(),U=!0;b.exports={makeDragBox:d,makeDragger:e,makeRectDragger:f,makeZoombox:m,makeCorners:n,updateZoombox:p,xyCorners:w,transitionZoombox:q,removeZoombox:r,clearSelect:o,showDoubleClickNotifier:s,attachWheelEventHandler:y}},{"../../components/color":618,"../../components/dragelement":640,"../../components/drawing":643,"../../components/fx":660,"../../constants/alignment":716,"../../lib":743,"../../lib/setcursor":762,"../../lib/svg_text_utils":766,"../../plotly":784,"../../registry":873,"../plots":852,"./axes":789,"./axis_ids":792,"./constants":794,"./scale_zoom":806,"./select":807,d3:128,tinycolor2:546}],798:[function(a,b,c){"use strict";var d=a("../../components/fx"),e=a("../../components/dragelement"),f=a("./constants"),g=a("./dragbox").makeDragBox;b.exports=function(a){var b=a._fullLayout;if((b._has("cartesian")||b._has("gl2d"))&&!a._context.staticPlot){Object.keys(b._plots||{}).sort(function(a,c){if((b._plots[a].mainplot&&!0)===(b._plots[c].mainplot&&!0)){var d=a.split("y"),e=c.split("y");return d[0]===e[0]?Number(d[1]||1)-Number(e[1]||1):Number(d[0]||1)-Number(e[0]||1)}return b._plots[a].mainplot?1:-1}).forEach(function(c){var h=b._plots[c],i=h.xaxis,j=h.yaxis,k=f.DRAGGERSIZE;if(!h.mainplot){var l=g(a,h,i._offset,j._offset,i._length,j._length,"ns","ew");l.onmousemove=function(b){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===c&&d.hover(a,b,c)},d.hover(a,b,c),a._fullLayout._lasthover=l,a._fullLayout._hoversubplot=c},l.onmouseout=function(b){a._dragging||(a._fullLayout._hoversubplot=null,e.unhover(a,b))},a._context.showAxisDragHandles&&(g(a,h,i._offset-k,j._offset-k,k,k,"n","w"),g(a,h,i._offset+i._length,j._offset-k,k,k,"n","e"),g(a,h,i._offset-k,j._offset+j._length,k,k,"s","w"),g(a,h,i._offset+i._length,j._offset+j._length,k,k,"s","e"))}if(a._context.showAxisDragHandles){if(c===i._mainSubplot){var m=i._mainLinePosition;"top"===i.side&&(m-=k),g(a,h,i._offset+.1*i._length,m,.8*i._length,k,"","ew"),g(a,h,i._offset,m,.1*i._length,k,"","w"),g(a,h,i._offset+.9*i._length,m,.1*i._length,k,"","e")}if(c===j._mainSubplot){var n=j._mainLinePosition;"right"!==j.side&&(n-=k),g(a,h,n,j._offset+.1*j._length,k,.8*j._length,"ns",""),g(a,h,n,j._offset+.9*j._length,k,.1*j._length,"s",""),g(a,h,n,j._offset,k,.1*j._length,"n","")}}});var c=b._hoverlayer.node();c.onmousemove=function(c){c.target=b._lasthover,d.hover(a,c,b._hoversubplot)},c.onclick=function(c){c.target=b._lasthover,d.click(a,c)},c.onmousedown=function(a){b._lasthover.onmousedown(a)}}}},{"../../components/dragelement":640,"../../components/fx":660,"./constants":794,"./dragbox":797}],799:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib");b.exports=function(a){return function(b,c){var f=b[a];if(Array.isArray(f))for(var g=d.subplotsRegistry.cartesian,h=g.idRegex,i=c._subplots,j=i.xaxis,k=i.yaxis,l=i.cartesian,m=c._has("cartesian")||c._has("gl2d"),n=0;n<f.length;n++){var o=f[n];if(e.isPlainObject(o)){var p=o.xref,q=o.yref,r=h.x.test(p),s=h.y.test(q);if(r||s){m||e.pushUnique(c._basePlotModules,g);var t=!1;r&&-1===j.indexOf(p)&&(j.push(p),t=!0),s&&-1===k.indexOf(q)&&(k.push(q),t=!0),t&&r&&s&&l.push(p+q)}}}}}},{"../../lib":743,"../../registry":873}],800:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=a._fullLayout,g=f._modules;b.plot&&b.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var h=0;h<g.length;h++){var i=g[h];if("cartesian"===i.basePlotModule.name){var j=l(c,i);i.plot&&i.plot(a,b,j,d,e)}}}function e(a){for(var b=a._fullLayout,c=Object.keys(b._plots),d=[],e=[],f=0;f<c.length;f++){var g=c[f],h=b._plots[g],i=h.xaxis,j=h.yaxis,k=i._mainAxis,l=j._mainAxis,m=k._id+l._id;m!==g&&-1!==c.indexOf(m)?(h.mainplot=m,h.mainplotinfo=b._plots[m],e.push(g)):d.push(g)}return d=d.concat(e)}function f(a){var b=a.plotgroup,c=a.id,d=n.layerValue2layerClass[a.xaxis.layer],e=n.layerValue2layerClass[a.yaxis.layer];if(a.mainplot){var f=a.mainplotinfo,g=f.plotgroup,i=c+"-x",j=c+"-y";a.gridlayer=f.gridlayer,a.zerolinelayer=f.zerolinelayer,h(f.overlinesBelow,"path",i),h(f.overlinesBelow,"path",j),h(f.overaxesBelow,"g",i),h(f.overaxesBelow,"g",j),a.plot=h(f.overplot,"g",c),h(f.overlinesAbove,"path",i),h(f.overlinesAbove,"path",j),h(f.overaxesAbove,"g",i),h(f.overaxesAbove,"g",j),a.xlines=g.select(".overlines-"+d).select("."+i),a.ylines=g.select(".overlines-"+e).select("."+j),a.xaxislayer=g.select(".overaxes-"+d).select("."+i),a.yaxislayer=g.select(".overaxes-"+e).select("."+j)}else{var k=h(b,"g","layer-subplot");a.shapelayer=h(k,"g","shapelayer"),a.imagelayer=h(k,"g","imagelayer"),a.gridlayer=h(b,"g","gridlayer"),a.zerolinelayer=h(b,"g","zerolinelayer"),h(b,"path","xlines-below"),h(b,"path","ylines-below"),a.overlinesBelow=h(b,"g","overlines-below"),h(b,"g","xaxislayer-below"),h(b,"g","yaxislayer-below"),a.overaxesBelow=h(b,"g","overaxes-below"),a.plot=h(b,"g","plot"),a.overplot=h(b,"g","overplot"),h(b,"path","xlines-above"),h(b,"path","ylines-above"),a.overlinesAbove=h(b,"g","overlines-above"),h(b,"g","xaxislayer-above"),h(b,"g","yaxislayer-above"),a.overaxesAbove=h(b,"g","overaxes-above"),a.xlines=b.select(".xlines-"+d),a.ylines=b.select(".ylines-"+e),a.xaxislayer=b.select(".xaxislayer-"+d),a.yaxislayer=b.select(".yaxislayer-"+e)}h(a.gridlayer,"g",a.xaxis._id,a.xaxis._id),h(a.gridlayer,"g",a.yaxis._id,a.yaxis._id),a.gridlayer.selectAll("g").sort(m.idSort);for(var l=0;l<n.traceLayerClasses.length;l++)h(a.plot,"g",n.traceLayerClasses[l]);a.xlines.style("fill","none").classed("crisp",!0),a.ylines.style("fill","none").classed("crisp",!0)}function g(a,b){if(a){var c={};a.each(function(a){var d=i.select(this),e="clip"+b._uid+a+"plot";d.remove(),b._draggers.selectAll("g."+a).remove(),b._defs.select("#"+e).remove(),c[a]=!0});for(var d=b._plots,e=Object.keys(d),f=0;f<e.length;f++)for(var g=d[e[f]],h=g.overlays||[],j=0;j<h.length;j++){var k=h[j];c[k.id]&&k.plot.selectAll(".trace").remove()}}}function h(a,b,c,d){var e=a.selectAll("."+c).data([d||0]);return e.enter().append(b).classed(c,!0),e}var i=a("d3"),j=a("../../lib"),k=a("../plots"),l=a("../get_data").getModuleCalcData,m=a("./axis_ids"),n=a("./constants"),o=a("../../constants/xmlns_namespaces");c.name="cartesian",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.idRegex=n.idRegex,c.attrRegex=n.attrRegex,c.attributes=a("./attributes"),c.layoutAttributes=a("./layout_attributes"),c.supplyLayoutDefaults=a("./layout_defaults"),c.transitionAxes=a("./transition_axes"),c.finalizeSubplots=function(a,b){var c,d,e,f=b._subplots,g=f.xaxis,h=f.yaxis,i=f.cartesian,k=i.concat(f.gl2d||[]),l={},o={};for(c=0;c<k.length;c++){var p=k[c].split("y");l[p[0]]=1,o["y"+p[1]]=1}for(c=0;c<g.length;c++)d=g[c],l[d]||(e=(a[m.id2name(d)]||{}).anchor,n.idRegex.y.test(e)||(e="y"),i.push(d+e),k.push(d+e),o[e]||(o[e]=1,j.pushUnique(h,e)));for(c=0;c<h.length;c++)e=h[c],o[e]||(d=(a[m.id2name(e)]||{}).anchor,n.idRegex.x.test(d)||(d="x"),i.push(d+e),k.push(d+e),l[d]||(l[d]=1,j.pushUnique(g,d)));if(!k.length){var q=Object.keys(a);for(d="",e="",c=0;c<q.length;c++){var r=q[c];if(n.attrRegex.test(r)){"x"===r.charAt(0)?(!d||+r.substr(5)<+d.substr(5))&&(d=r):(!e||+r.substr(5)<+e.substr(5))&&(e=r)}}d=d?m.name2id(d):"x",e=e?m.name2id(e):"y",g.push(d),h.push(e),i.push(d+e)}},c.plot=function(a,b,c,e){var f,g=a._fullLayout,h=g._subplots.cartesian,i=a.calcdata;if(!Array.isArray(b))for(b=[],f=0;f<i.length;f++)b.push(f);for(g._glcanvas&&g._glcanvas.size()&&g._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0})}),f=0;f<h.length;f++){for(var j,k=h[f],l=g._plots[k],m=[],n=0;n<i.length;n++){var o=i[n],p=o[0].trace;p.xaxis+p.yaxis===k&&((-1!==b.indexOf(p.index)||p.carpet)&&(j&&j[0].trace.xaxis+j[0].trace.yaxis===k&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===m.indexOf(j)&&m.push(j),m.push(o)),j=o)}d(a,l,m,c,e)}},c.clean=function(a,b,c,d){var e,f,h,i,j,k,l,m,n=d._modules||[],o=b._modules||[];for(j=0;j<n.length;j++){"scatter"===n[j].name&&(e=!0);break}for(j=0;j<o.length;j++)if("scatter"===o[j].name){f=!0;break}for(j=0;j<n.length;j++){"scattergl"===n[j].name&&(h=!0);break}for(j=0;j<o.length;j++)if("scattergl"===o[j].name){i=!0;break}if(e&&!f){for(k=d._plots,l=Object.keys(k||{}),j=0;j<l.length;j++)m=k[l[j]],m.plot&&m.plot.select("g.scatterlayer").selectAll("g.trace").remove();d._infolayer.selectAll("g.rangeslider-container").select("g.scatterlayer").selectAll("g.trace").remove()}if(h&&!i)for(k=d._plots,l=Object.keys(k||{}),j=0;j<l.length;j++)m=k[l[j]],m._scene&&m._scene.destroy();var p=d._subplots||{},q=b._subplots||{xaxis:[],yaxis:[]};if(p.xaxis&&p.yaxis){var r=p.xaxis.concat(p.yaxis),s=q.xaxis.concat(q.yaxis);for(j=0;j<r.length;j++)-1===s.indexOf(r[j])&&d._infolayer.selectAll(".g-"+r[j]+"title").remove()}var t=d._has&&d._has("cartesian"),u=b._has&&b._has("cartesian");t&&!u&&(g(d._cartesianlayer.selectAll(".subplot"),d),d._defs.selectAll(".axesclip").remove())},c.drawFramework=function(a){var b=a._fullLayout,c=e(a),d=b._cartesianlayer.selectAll(".subplot").data(c,j.identity);d.enter().append("g").attr("class",function(a){return"subplot "+a}),d.order(),d.exit().call(g,b),d.each(function(a){var c=b._plots[a];if(c.plotgroup=i.select(this),c.overlays=[],f(c),c.mainplot){b._plots[c.mainplot].overlays.push(c)}c.draglayer=h(b._draggers,"g",a)})},c.rangePlot=function(a,b,c){f(b),d(a,b,c),k.style(a)},c.toSVG=function(a){function b(){var a=this,b=a.toDataURL("image/png");c.append("svg:image").attr({xmlns:o.svg,"xlink:href":b,preserveAspectRatio:"none",x:0,y:0,width:a.width,height:a.height})}var c=a._fullLayout._glimages,d=i.select(a).selectAll(".svg-container");d.filter(function(a,b){return b===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(b)}},{"../../constants/xmlns_namespaces":723,"../../lib":743,"../get_data":826,"../plots":852,"./attributes":788,"./axis_ids":792,"./constants":794,"./layout_attributes":801,"./layout_defaults":802,"./transition_axes":812,d3:128}],801:[function(a,b,c){"use strict";var d=a("../font_attributes"),e=a("../../components/color/attributes"),f=a("../../components/drawing/attributes").dash,g=a("../../lib/extend").extendFlat,h=a("./constants");b.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:e.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:d({editType:"ticks"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",
values:[h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"calc"},scaleratio:{valType:"number",min:0,dflt:1,editType:"calc"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"calc"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"calc"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:e.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:g({},f,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:d({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"},hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"layoutstyle"},linecolor:{valType:"color",dflt:e.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:e.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:e.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"calc"},{valType:"number",min:0,max:1,editType:"calc"}],dflt:[0,1],editType:"calc"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"}}}},{"../../components/color/attributes":617,"../../components/drawing/attributes":642,"../../lib/extend":732,"../font_attributes":816,"./constants":794}],802:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../components/color"),g=a("../layout_attributes"),h=a("./layout_attributes"),i=a("./type_defaults"),j=a("./axis_defaults"),k=a("./constraint_defaults"),l=a("./position_defaults"),m=a("./axis_ids");b.exports=function(a,b,c){function n(a,b){return e.coerce(H,I,h,a,b)}function o(a,b){return e.coerce2(H,I,h,a,b)}function p(a){return"x"===a?A:z}var q,r={},s={},t={},u={};for(q=0;q<c.length;q++){var v=c[q];if(d.traceIs(v,"cartesian")||d.traceIs(v,"gl2d")){var w=m.id2name(v.xaxis),x=m.id2name(v.yaxis);if(d.traceIs(v,"carpet")&&("carpet"!==v.type||v._cheater)||w&&(s[w]=1),"carpet"===v.type&&v._cheater&&w&&(r[w]=1),d.traceIs(v,"2dMap")&&(t[w]=!0,t[x]=!0),d.traceIs(v,"oriented")){u["h"===v.orientation?x:w]=!0}}}var y=b._subplots,z=y.xaxis,A=y.yaxis,B=e.simpleMap(z,m.id2name),C=e.simpleMap(A,m.id2name),D=B.concat(C),E=f.background;z.length&&A.length&&(E=e.coerce(a,b,g,"plot_bgcolor"));var F,G,H,I,J=f.combine(E,b.paper_bgcolor),K={x:p("x"),y:p("y")};for(q=0;q<D.length;q++){F=D[q],e.isPlainObject(a[F])||(a[F]={}),H=a[F],I=b[F]={},i(H,I,n,c,F),G=F.charAt(0);var L=function(b,c){for(var d="x"===b?B:C,e=[],f=0;f<d.length;f++){var g=d[f];g===c||(a[g]||{}).overlaying||e.push(m.name2id(g))}return e}(G,F),M={letter:G,font:b.font,outerTicks:t[F],showGrid:!u[F],data:c,bgColor:J,calendar:b.calendar,cheateronly:"x"===G&&r[F]&&!s[F]};j(H,I,n,M,b);var N=o("spikecolor"),O=o("spikethickness"),P=o("spikedash"),Q=o("spikemode"),R=o("spikesnap");n("showspikes",!!(N||O||P||Q||R))||(delete I.spikecolor,delete I.spikethickness,delete I.spikedash,delete I.spikemode,delete I.spikesnap);var S={letter:G,counterAxes:K[G],overlayableAxes:L};l(H,I,n,S),I._input=H}var T=d.getComponentMethod("rangeslider","handleDefaults"),U=d.getComponentMethod("rangeselector","handleDefaults");for(q=0;q<B.length;q++)F=B[q],H=a[F],I=b[F],T(a,b,F),"date"===I.type&&U(H,I,b,C,I.calendar),n("fixedrange");for(q=0;q<C.length;q++){F=C[q],H=a[F],I=b[F];var V=b[m.id2name(I.anchor)];n("fixedrange",V&&V.rangeslider&&V.rangeslider.visible)}b._axisConstraintGroups=[];var W=K.x.concat(K.y);for(q=0;q<D.length;q++)F=D[q],G=F.charAt(0),H=a[F],I=b[F],k(H,I,n,W,b)}},{"../../components/color":618,"../../lib":743,"../../registry":873,"../layout_attributes":843,"./axis_defaults":791,"./axis_ids":792,"./constraint_defaults":795,"./layout_attributes":801,"./position_defaults":805,"./type_defaults":813}],803:[function(a,b,c){"use strict";var d=a("tinycolor2").mix,e=a("../../components/color/attributes").lightFraction,f=a("../../lib");b.exports=function(a,b,c,g){function h(c,d){return f.coerce2(a,b,g.attributes,c,d)}g=g||{};var i=g.dfltColor,j=h("linecolor",i),k=h("linewidth");c("showline",g.showLine||!!j||!!k)||(delete b.linecolor,delete b.linewidth);var l=d(i,g.bgColor,g.blend||e).toRgbString(),m=h("gridcolor",l),n=h("gridwidth");if(c("showgrid",g.showGrid||!!m||!!n)||(delete b.gridcolor,delete b.gridwidth),!g.noZeroLine){var o=h("zerolinecolor",i),p=h("zerolinewidth");c("zeroline",g.showGrid||!!o||!!p)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},{"../../components/color/attributes":617,"../../lib":743,tinycolor2:546}],804:[function(a,b,c){"use strict";function d(a,b,c){var d,f,g,h,i,j=[],k=c.map(function(b){return b[a]}),l=e.bisector(b).left;for(d=0;d<k.length;d++)for(g=k[d],f=0;f<g.length;f++)null!==(h=g[f])&&void 0!==h&&((i=l(j,h))<j.length&&j[i]===h||j.splice(i,0,h));return j}var e=a("d3");b.exports=function(a,b,c,f){switch(b){case"array":return Array.isArray(c)?c.slice():[];case"category ascending":return d(a,e.ascending,f);case"category descending":return d(a,e.descending,f);case"trace":default:return[]}}},{d3:128}],805:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib");b.exports=function(a,b,c,f){var g=f.counterAxes||[],h=f.overlayableAxes||[],i=f.letter;"free"===e.coerce(a,b,{anchor:{valType:"enumerated",values:["free"].concat(g),dflt:d(a.position)?"free":g[0]||"free"}},"anchor")&&c("position"),e.coerce(a,b,{side:{valType:"enumerated",values:"x"===i?["bottom","top"]:["left","right"],dflt:"x"===i?"bottom":"left"}},"side");var j=!1;if(h.length&&(j=e.coerce(a,b,{overlaying:{valType:"enumerated",values:[!1].concat(h),dflt:!1}},"overlaying")),!j){var k=c("domain");k[0]>k[1]-.01&&(b.domain=[0,1]),e.noneOrAll(a.domain,b.domain,[0,1])}return c("layer"),b}},{"../../lib":743,"fast-isnumeric":140}],806:[function(a,b,c){"use strict";var d=a("../../constants/alignment").FROM_BL;b.exports=function(a,b,c){void 0===c&&(c=d[a.constraintoward||"center"]);var e=[a.r2l(a.range[0]),a.r2l(a.range[1])],f=e[0]+(e[1]-e[0])*c;a.range=a._input.range=[a.l2r(f+(e[0]-f)*b),a.l2r(f+(e[1]-f)*b)]}},{"../../constants/alignment":716}],807:[function(a,b,c){"use strict";function d(a){return a._id}function e(a,b,c){var d,e,f;if(c){var g=c.points||[];for(d=0;d<b.length;d++)f=b[d].cd[0].trace,f.selectedpoints=[],f._input.selectedpoints=[];for(d=0;d<g.length;d++){var h=g[d],i=h.data,j=h.fullData;h.pointIndices?([].push.apply(i.selectedpoints,h.pointIndices),[].push.apply(j.selectedpoints,h.pointIndices)):(i.selectedpoints.push(h.pointIndex),j.selectedpoints.push(h.pointIndex))}}else for(d=0;d<b.length;d++)f=b[d].cd[0].trace,delete f.selectedpoints,delete f._input.selectedpoints,b[d].cd[0].t&&b[d].cd[0].t.scene&&b[d].cd[0].t.scene.clearSelect();for(d=0;d<b.length;d++)e=b[d],e.style&&e.style(a,e.cd)}function f(a,b,c){var d;return c?(d=h.difference({regions:a,inverted:!1},{regions:[b],inverted:!1}),d.regions):(d=h.union({regions:a,inverted:!1},{regions:[b],inverted:!1}),d.regions)}function g(a,b){if(Array.isArray(a))for(var c=b.cd,d=b.cd[0].trace,e=0;e<a.length;e++)a[e]=l(a[e],d,c);return a}var h=a("polybooljs"),i=a("../../lib/polygon"),j=a("../../lib/throttle"),k=a("../../components/color"),l=a("../../components/fx/helpers").makeEventData,m=a("../../components/fx"),n=a("./axes"),o=a("./constants"),p=i.filter,q=i.tester,r=i.multitester,s=o.MINSELECT;b.exports=function(a,b,c,h,i){function l(a){var b="y"===a._id.charAt(0)?1:0;return function(c){return a.p2d(c[b])}}function t(a,b){return a-b}var u,v,w,x,y=h.gd,z=y._fullLayout,A=z._zoomlayer,B=h.element.getBoundingClientRect(),C=h.plotinfo,D=C.xaxis._offset,E=C.yaxis._offset,F=b-B.left,G=c-B.top,H=F,I=G,J="M"+F+","+G,K=h.xaxes[0]._length,L=h.yaxes[0]._length,M=h.xaxes.map(d),N=h.yaxes.map(d),O=h.xaxes.concat(h.yaxes),P=a.altKey;(a.shiftKey||a.altKey)&&C.selection&&C.selection.polygons&&!h.polygons?(h.polygons=C.selection.polygons,h.mergedPolygons=C.selection.mergedPolygons):(!a.shiftKey&&!a.altKey||(a.shiftKey||a.altKey)&&!C.selection)&&(C.selection={},C.selection.polygons=h.polygons=[],C.selection.mergedPolygons=h.mergedPolygons=[]),"lasso"===i&&(u=p([[F,G]],o.BENDPX));var Q=A.selectAll("path.select-outline-"+C.id).data([1,2]);Q.enter().append("path").attr("class",function(a){return"select-outline select-outline-"+a+" select-outline-"+C.id}).attr("transform","translate("+D+", "+E+")").attr("d",J+"Z");var R,S,T,U,V,W=A.append("path").attr("class","zoombox-corners").style({fill:k.background,stroke:k.defaultLine,"stroke-width":1}).attr("transform","translate("+D+", "+E+")").attr("d","M0,0Z"),X=[],Y=z._uid+o.SELECTID,Z=[];for(R=0;R<y.calcdata.length;R++)if(S=y.calcdata[R],T=S[0].trace,!0===T.visible&&T._module&&T._module.selectPoints)if(h.subplot)T.subplot!==h.subplot&&T.geo!==h.subplot||X.push({selectPoints:T._module.selectPoints,style:T._module.style,cd:S,xaxis:h.xaxes[0],yaxis:h.yaxes[0]});else{if(-1===M.indexOf(T.xaxis))continue;if(-1===N.indexOf(T.yaxis))continue;X.push({selectPoints:T._module.selectPoints,style:T._module.style,cd:S,xaxis:n.getFromId(y,T.xaxis),yaxis:n.getFromId(y,T.yaxis)})}var $;$=C.fillRangeItems?C.fillRangeItems:"select"===i?function(a,b){var c=a.range={};for(R=0;R<O.length;R++){var d=O[R],e=d._id.charAt(0);c[d._id]=[d.p2d(b[e+"min"]),d.p2d(b[e+"max"])].sort(t)}}:function(a,b,c){var d=a.lassoPoints={};for(R=0;R<O.length;R++){var e=O[R];d[e._id]=c.filtered.map(l(e))}},h.moveFn=function(a,b){H=Math.max(0,Math.min(K,a+F)),I=Math.max(0,Math.min(L,b+G));var c=Math.abs(H-F),d=Math.abs(I-G);"select"===i?d<Math.min(.6*c,s)?(x=[[F,0],[F,L],[H,L],[H,0]],x.xmin=Math.min(F,H),x.xmax=Math.max(F,H),x.ymin=Math.min(0,L),x.ymax=Math.max(0,L),W.attr("d","M"+x.xmin+","+(G-s)+"h-4v"+2*s+"h4ZM"+(x.xmax-1)+","+(G-s)+"h4v"+2*s+"h-4Z")):c<Math.min(.6*d,s)?(x=[[0,G],[0,I],[K,I],[K,G]],x.xmin=Math.min(0,K),x.xmax=Math.max(0,K),x.ymin=Math.min(G,I),x.ymax=Math.max(G,I),W.attr("d","M"+(F-s)+","+x.ymin+"v-4h"+2*s+"v4ZM"+(F-s)+","+(x.ymax-1)+"v4h"+2*s+"v-4Z")):(x=[[F,G],[F,I],[H,I],[H,G]],x.xmin=Math.min(F,H),x.xmax=Math.max(F,H),x.ymin=Math.min(G,I),x.ymax=Math.max(G,I),W.attr("d","M0,0Z")):"lasso"===i&&(u.addPt([H,I]),x=u.filtered),h.polygons&&h.polygons.length?(w=f(h.mergedPolygons,x,P),x.subtract=P,v=r(h.polygons.concat([x]))):(w=[x],v=q(x));var k=[];for(R=0;R<w.length;R++){var l=w[R];k.push(l.join("L")+"L"+l[0])}Q.attr("d","M"+k.join("M")+"Z"),j.throttle(Y,o.SELECTDELAY,function(){Z=[];var a,b,c=[];for(R=0;R<X.length;R++)if(U=X[R],b=U.selectPoints(U,v),c.push(b),a=g(b,U),Z.length)for(var d=0;d<a.length;d++)Z.push(a[d]);else Z=a;V={points:Z},e(y,X,V),$(V,x,u),h.gd.emit("plotly_selecting",V)})},h.clickFn=function(a,b){W.remove(),j.done(Y).then(function(){if(j.clear(Y),2===a){for(Q.remove(),R=0;R<X.length;R++)U=X[R],U.selectPoints(U,!1);e(y,X),y.emit("plotly_deselect",null)}else y.emit("plotly_selected",void 0);m.click(y,b)})},h.doneFn=function(){W.remove(),j.done(Y).then(function(){j.clear(Y),h.gd.emit("plotly_selected",V),x&&h.polygons&&(x.subtract=P,h.polygons.push(x),h.mergedPolygons.length=0,[].push.apply(h.mergedPolygons,w))})}}},{"../../components/color":618,"../../components/fx":660,"../../components/fx/helpers":657,"../../lib/polygon":755,"../../lib/throttle":767,"./axes":789,"./constants":794,polybooljs:479}],808:[function(a,b,c){"use strict";function d(a){return Math.pow(10,a)}var e=a("d3"),f=a("fast-isnumeric"),g=a("../../lib"),h=g.cleanNumber,i=g.ms2DateTime,j=g.dateTime2ms,k=g.ensureNumber,l=a("../../constants/numerical"),m=l.FP_SAFE,n=l.BADNUM,o=a("./constants"),p=a("./axis_ids");b.exports=function(a,b){function c(b,c){if(b>0)return Math.log(b)/Math.LN10;if(b<=0&&c&&a.range&&2===a.range.length){var d=a.range[0],e=a.range[1];return.5*(d+e-3*x*Math.abs(d-e))}return n}function l(b,c,d){var e=j(b,d||a.calendar);if(e===n){if(!f(b))return n;e=j(new Date(+b))}return e}function q(b,c,d){return i(b,c,d||a.calendar)}function r(b){return a._categories[Math.round(b)]}function s(b){if(null!==b&&void 0!==b){if(void 0===a._categoriesMap&&(a._categoriesMap={}),void 0!==a._categoriesMap[b])return a._categoriesMap[b];a._categories.push(b);var c=a._categories.length-1;return a._categoriesMap[b]=c,c}return n}function t(b){if(a._categoriesMap){var c=a._categoriesMap[b];if(void 0!==c)return c}if(f(b))return+b}function u(b){return f(b)?e.round(a._b+a._m*b,2):n}function v(b){return(b-a._b)/a._m}b=b||{};var w=(a._id||"x").charAt(0),x=10;a.c2l="log"===a.type?c:k,a.l2c="log"===a.type?d:k,a.l2p=u,a.p2l=v,a.c2p="log"===a.type?function(a,b){return u(c(a,b))}:u,a.p2c="log"===a.type?function(a){return d(v(a))}:v,-1!==["linear","-"].indexOf(a.type)?(a.d2r=a.r2d=a.d2c=a.r2c=a.d2l=a.r2l=h,a.c2d=a.c2r=a.l2d=a.l2r=k,a.d2p=a.r2p=function(b){return a.l2p(h(b))},a.p2d=a.p2r=v,a.cleanPos=k):"log"===a.type?(a.d2r=a.d2l=function(a,b){return c(h(a),b)},a.r2d=a.r2c=function(a){return d(h(a))},a.d2c=a.r2l=h,a.c2d=a.l2r=k,a.c2r=c,a.l2d=d,a.d2p=function(b,c){return a.l2p(a.d2r(b,c))},a.p2d=function(a){return d(v(a))},a.r2p=function(b){return a.l2p(h(b))},a.p2r=v,a.cleanPos=k):"date"===a.type?(a.d2r=a.r2d=g.identity,a.d2c=a.r2c=a.d2l=a.r2l=l,a.c2d=a.c2r=a.l2d=a.l2r=q,a.d2p=a.r2p=function(b,c,d){return a.l2p(l(b,0,d))},a.p2d=a.p2r=function(a,b,c){return q(v(a),b,c)},a.cleanPos=function(b){return g.cleanDate(b,n,a.calendar)}):"category"===a.type&&(a.d2c=a.d2l=s,a.r2d=a.c2d=a.l2d=r,a.d2r=a.d2l_noadd=t,a.r2c=function(b){var c=t(b);return void 0!==c?c:a.fraction2r(.5)},a.l2r=a.c2r=k,a.r2l=t,a.d2p=function(b){return a.l2p(a.r2c(b))},a.p2d=function(a){return r(v(a))},a.r2p=a.d2p,a.p2r=v,a.cleanPos=function(a){return"string"==typeof a&&""!==a?a:k(a)}),a.fraction2r=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return a.l2r(c+b*(d-c))},a.r2fraction=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return(a.r2l(b)-c)/(d-c)},a.cleanRange=function(b,c){c||(c={}),b||(b="range");var d,e,h=g.nestedProperty(a,b).get();if(e="date"===a.type?g.dfltRange(a.calendar):"y"===w?o.DFLTRANGEY:c.dfltRange||o.DFLTRANGEX,e=e.slice(),!h||2!==h.length)return void g.nestedProperty(a,b).set(e);for("date"===a.type&&(h[0]=g.cleanDate(h[0],n,a.calendar),h[1]=g.cleanDate(h[1],n,a.calendar)),d=0;d<2;d++)if("date"===a.type){if(!g.isDateTime(h[d],a.calendar)){a[b]=e;break}if(a.r2l(h[0])===a.r2l(h[1])){var i=g.constrain(a.r2l(h[0]),g.MIN_MS+1e3,g.MAX_MS-1e3);h[0]=a.l2r(i-1e3),h[1]=a.l2r(i+1e3);break}}else{if(!f(h[d])){if(!f(h[1-d])){a[b]=e;break}h[d]=h[1-d]*(d?10:.1)}if(h[d]<-m?h[d]=-m:h[d]>m&&(h[d]=m),h[0]===h[1]){var j=Math.max(1,Math.abs(1e-6*h[0]));h[0]-=j,h[1]+=j}}},a.setScale=function(c){var d=b._size;if(a._categories||(a._categories=[]),a._categoriesMap||(a._categoriesMap={}),a.overlaying){var e=p.getFromId({_fullLayout:b},a.overlaying);a.domain=e.domain}var f=c&&a._r?"_r":"range",g=a.calendar;a.cleanRange(f);var h=a.r2l(a[f][0],g),i=a.r2l(a[f][1],g);if("y"===w?(a._offset=d.t+(1-a.domain[1])*d.h,a._length=d.h*(a.domain[1]-a.domain[0]),a._m=a._length/(h-i),a._b=-a._m*i):(a._offset=d.l+a.domain[0]*d.w,a._length=d.w*(a.domain[1]-a.domain[0]),a._m=a._length/(i-h),a._b=-a._m*h),!isFinite(a._m)||!isFinite(a._b))throw b._replotting=!1,new Error("Something went wrong with axis scaling")},a.makeCalcdata=function(b,c){var d,e,f,g="date"===a.type&&b[c+"calendar"];if(c in b)for(d=b[c],e=new Array(d.length),f=0;f<d.length;f++)e[f]=a.d2c(d[f],0,g);else{var h=c+"0"in b?a.d2c(b[c+"0"],0,g):0,i=b["d"+c]?Number(b["d"+c]):1;for(d=b[{x:"y",y:"x"}[c]],e=new Array(d.length),f=0;f<d.length;f++)e[f]=h+f*i}return e},a.isValidRange=function(b){return Array.isArray(b)&&2===b.length&&f(a.r2l(b[0]))&&f(a.r2l(b[1]))},a.isPtWithinRange=function(b,c){var d=a.c2l(b[w],null,c);return d>=a.r2l(a.range[0])&&d<=a.r2l(a.range[1])},a._min=[],a._max=[];var y=b._d3locale;"date"===a.type&&(a._dateFormat=y?y.timeFormat.utc:e.time.format.utc),a._separators=b.separators,a._numFormat=y?y.numberFormat:e.format,delete a._minDtick,delete a._forceTick0}},{"../../constants/numerical":721,"../../lib":743,"./axis_ids":792,"./constants":794,d3:128,"fast-isnumeric":140}],809:[function(a,b,c){"use strict";function d(a){var b=["showexponent","showtickprefix","showticksuffix"],c=b.filter(function(b){return void 0!==a[b]}),d=function(b){return a[b]===a[c[0]]};if(c.every(d)||1===c.length)return a[c[0]]}function e(a,b){function c(a,b){return f.coerce(h,i,g.tickformatstops,a,b)}var d=a.tickformatstops,e=b.tickformatstops=[];if(Array.isArray(d))for(var h,i,j=0;j<d.length;j++)h=d[j],i={},c("dtickrange"),c("value"),e.push(i)}var f=a("../../lib"),g=a("./layout_attributes");b.exports=function(a,b,c,g,h){var i=d(a);if(c("tickprefix")&&c("showtickprefix",i),c("ticksuffix",h.tickSuffixDflt)&&c("showticksuffix",i),c("showticklabels")){var j=h.font||{},k=b.color===a.color?b.color:j.color;if(f.coerceFont(c,"tickfont",{family:j.family,size:j.size,color:k}),c("tickangle"),"category"!==g){var l=c("tickformat");e(a,b),l||"date"===g||(c("showexponent",i),c("exponentformat"),c("separatethousands"))}}"category"===g||h.noHover||c("hoverformat")}},{"../../lib":743,"./layout_attributes":801}],810:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes");b.exports=function(a,b,c,f){var g=d.coerce2(a,b,e,"ticklen"),h=d.coerce2(a,b,e,"tickwidth"),i=d.coerce2(a,b,e,"tickcolor",b.color);c("ticks",f.outerTicks||g||h||i?"outside":"")||(delete b.ticklen,delete b.tickwidth,delete b.tickcolor)}},{"../../lib":743,"./layout_attributes":801}],811:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../constants/numerical").ONEDAY;b.exports=function(a,b,c,g){var h="auto";"array"!==a.tickmode||"log"!==g&&"date"!==g||(a.tickmode="auto"),Array.isArray(a.tickvals)?h="array":a.dtick&&(h="linear");var i=c("tickmode",h);if("auto"===i)c("nticks");else if("linear"===i){var j="date"===g?f:1,k=c("dtick",j);if(d(k))b.dtick=k>0?Number(k):j;else if("string"!=typeof k)b.dtick=j;else{var l=k.charAt(0),m=k.substr(1);m=d(m)?Number(m):0,(m<=0||!("date"===g&&"M"===l&&m===Math.round(m)||"log"===g&&"L"===l||"log"===g&&"D"===l&&(1===m||2===m)))&&(b.dtick=j)}var n="date"===g?e.dateTick0(b.calendar):0,o=c("tick0",n);"date"===g?b.tick0=e.cleanDate(o,n):d(o)&&"D1"!==k&&"D2"!==k?b.tick0=Number(o):b.tick0=n}else{var p=c("tickvals");void 0===p?b.tickmode="auto":c("ticktext")}}},{"../../constants/numerical":721,"../../lib":743,"fast-isnumeric":140}],812:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("../../registry"),g=a("../../components/drawing"),h=a("./axes"),i=a("./constants").attrRegex;b.exports=function(a,b,c,j){function k(b,c){function d(b,c,d){for(e=0;e<b.length;e++){var f=b[e];if(-1===g.indexOf(f.xref)&&-1===g.indexOf(f.yref)||c(a,e),d)return}}var e,g=[];for(g=[b._id,c._id],e=0;e<g.length;e++)h.doTicks(a,g[e],!0);d(q.annotations||[],f.getComponentMethod("annotations","drawOne")),d(q.shapes||[],f.getComponentMethod("shapes","drawOne")),d(q.images||[],f.getComponentMethod("images","draw"),!0)}function l(a){var b=a.xaxis,c=a.yaxis;q._defs.select("#"+a.clipId+"> rect").call(g.setTranslate,0,0).call(g.setScale,1,1),a.plot.call(g.setTranslate,b._offset,c._offset).call(g.setScale,1,1);var d=a.plot.selectAll(".scatterlayer .trace");d.selectAll(".point").call(g.setPointGroupScale,1,1),d.selectAll(".textpoint").call(g.setTextPointsScale,1,1),d.call(g.hideOutsideRangePoints,a)}function m(b,c){var d,e,f,h=s[b.xaxis._id],i=s[b.yaxis._id],j=[];if(h){d=a._fullLayout[h.axisName],e=d._r,f=h.to,j[0]=(e[0]*(1-c)+c*f[0]-e[0])/(e[1]-e[0])*b.xaxis._length;var l=e[1]-e[0],m=f[1]-f[0];d.range[0]=e[0]*(1-c)+c*f[0],d.range[1]=e[1]*(1-c)+c*f[1],j[2]=b.xaxis._length*(1-c+c*m/l)}else j[0]=0,j[2]=b.xaxis._length;if(i){d=a._fullLayout[i.axisName],e=d._r,f=i.to,j[1]=(e[1]*(1-c)+c*f[1]-e[1])/(e[0]-e[1])*b.yaxis._length;var n=e[1]-e[0],o=f[1]-f[0];d.range[0]=e[0]*(1-c)+c*f[0],d.range[1]=e[1]*(1-c)+c*f[1],j[3]=b.yaxis._length*(1-c+c*o/n)}else j[1]=0,j[3]=b.yaxis._length;k(b.xaxis,b.yaxis);var p=b.xaxis,r=b.yaxis,t=!!h,u=!!i,v=t?p._length/j[2]:1,w=u?r._length/j[3]:1,x=t?j[0]:0,y=u?j[1]:0,z=t?j[0]/j[2]*p._length:0,A=u?j[1]/j[3]*r._length:0,B=p._offset-z,C=r._offset-A;q._defs.select("#"+b.clipId+"> rect").call(g.setTranslate,x,y).call(g.setScale,1/v,1/w),b.plot.call(g.setTranslate,B,C).call(g.setScale,v,w).selectAll(".points").selectAll(".point").call(g.setPointGroupScale,1/v,1/w),b.plot.selectAll(".points").selectAll(".textpoint").call(g.setTextPointsScale,1/v,1/w)}function n(){for(var b={},c=0;c<t.length;c++){var d=a._fullLayout[s[t[c]].axisName],f=s[t[c]].to;b[d._name+".range[0]"]=f[0],b[d._name+".range[1]"]=f[1],d.range=f.slice()}return v&&v(),e.relayout(a,b).then(function(){for(var a=0;a<u.length;a++)l(u[a])})}function o(){for(var b={},c=0;c<t.length;c++){var d=a._fullLayout[t[c]+"axis"];b[d._name+".range[0]"]=d.range[0],b[d._name+".range[1]"]=d.range[1],d.range=d._r.slice()}return e.relayout(a,b).then(function(){for(var a=0;a<u.length;a++)l(u[a])})}function p(){x=Date.now();for(var a=Math.min(1,(x-w)/c.duration),b=z(a),d=0;d<u.length;d++)m(u[d],b);x-w>c.duration?(n(),y=window.cancelAnimationFrame(p)):y=window.requestAnimationFrame(p)}var q=a._fullLayout,r=[],s=function(a){var b,c,d,e,f={};for(b in a)if(c=b.split("."),c[0].match(i)){var g=b.charAt(0),h=c[0];if(d=q[h],e={},Array.isArray(a[b])?e.to=a[b].slice(0):Array.isArray(a[b].range)&&(e.to=a[b].range.slice(0)),!e.to)continue;e.axisName=h,e.length=d._length,r.push(g),f[g]=e}return f}(b),t=Object.keys(s),u=function(a,b,c){var d,e,f,g=a._plots,h=[];for(d in g){var i=g[d];if(-1===h.indexOf(i)){var j=i.xaxis._id,k=i.yaxis._id,l=i.xaxis.range,m=i.yaxis.range;i.xaxis._r=i.xaxis.range.slice(),i.yaxis._r=i.yaxis.range.slice(),e=c[j]?c[j].to:l,f=c[k]?c[k].to:m,l[0]===e[0]&&l[1]===e[1]&&m[0]===f[0]&&m[1]===f[1]||-1===b.indexOf(j)&&-1===b.indexOf(k)||h.push(i)}}return h}(q,t,s);if(!u.length)return function(){function b(b,c,d){for(var e=0;e<b.length;e++)if(c(a,e),d)return}b(q.annotations||[],f.getComponentMethod("annotations","drawOne")),b(q.shapes||[],f.getComponentMethod("shapes","drawOne")),b(q.images||[],f.getComponentMethod("images","draw"),!0)}(),!1;var v;j&&(v=j());var w,x,y,z=d.ease(c.easing);return a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(y),y=null,o()}),w=Date.now(),y=window.requestAnimationFrame(p),Promise.resolve()}},{"../../components/drawing":643,"../../plotly":784,"../../registry":873,"./axes":789,"./constants":794,d3:128}],813:[function(a,b,c){"use strict";function d(a,b){if("-"===a.type){var c=a._id,d=c.charAt(0);-1!==c.indexOf("scene")&&(c=d);var j=e(b,c,d);if(j){if("histogram"===j.type&&d==={v:"y",h:"x"}[j.orientation||"v"])return void(a.type="linear");var k=d+"calendar",l=j[k];if(g(j,d)){for(var m,n=f(j),o=[],p=0;p<b.length;p++)m=b[p],h.traceIs(m,"box-violin")&&(m[d+"axis"]||d)===c&&(void 0!==m[n]?o.push(m[n][0]):void 0!==m.name?o.push(m.name):o.push("text"),m[k]!==l&&(l=void 0));a.type=i(o,l)}else a.type=i(j[d]||[j[d+"0"]],l)}}}function e(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if((e[c+"axis"]||c)===b){if(g(e,c))return e;if((e[c]||[]).length||e[c+"0"])return e}}}function f(a){return{v:"x",h:"y"}[a.orientation||"v"]}function g(a,b){var c=f(a),d=h.traceIs(a,"box-violin"),e=h.traceIs(a._fullInput||{},"candlestick");return d&&!e&&b===c&&void 0===a[c]&&void 0===a[c+"0"]}var h=a("../../registry"),i=a("./axis_autotype"),j=a("./axis_ids").name2id;b.exports=function(a,b,c,e,f){f&&(b._name=f,b._id=j(f)),"-"===c("type")&&(d(b,e),"-"===b.type?b.type="linear":a.type=b.type)}},{"../../registry":873,"./axis_autotype":790,"./axis_ids":792}],814:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f,g=!1;if("data"===b.type)d=a._fullData[null!==b.traces?b.traces[0]:0];else{if("layout"!==b.type)return!1;d=a._fullLayout}return e=j.nestedProperty(d,b.prop).get(),f=c[b.type]=c[b.type]||{},f.hasOwnProperty(b.prop)&&f[b.prop]!==e&&(g=!0),f[b.prop]=e,{changed:g,value:e}}function e(a,b){return Array.isArray(b[0])&&1===b[0].length&&-1!==["string","number"].indexOf(typeof b[0][0])?[{type:"layout",prop:"_currentFrame",value:b[0][0].toString()}]:[]}function f(a,b){var c=[],d=b[0],e={};if("string"==typeof d)e[d]=b[1];else{if(!j.isPlainObject(d))return c;e=d}return h(e,function(a,b,d){c.push({type:"layout",prop:a,value:d})},"",0),c}function g(a,b){var c,d,e,f,g=[];if(d=b[0],e=b[1],c=b[2],f={},"string"==typeof d)f[d]=e;else{if(!j.isPlainObject(d))return g;f=d,void 0===c&&(c=e)}return void 0===c&&(c=null),h(f,function(b,d,e){var f;if(Array.isArray(e)){var h=Math.min(e.length,a.data.length);c&&(h=Math.min(h,c.length)),f=[];for(var i=0;i<h;i++)f[i]=c?c[i]:i}else f=c?c.slice(0):null;if(null===f)Array.isArray(e)&&(e=e[0]);else if(Array.isArray(f)){if(!Array.isArray(e)){var j=e;e=[];for(var k=0;k<f.length;k++)e[k]=j}e.length=Math.min(f.length,e.length)}g.push({type:"data",prop:b,traces:f,value:e})},"",0),g}function h(a,b,c,d){Object.keys(a).forEach(function(e){var f=a[e];if("_"!==e[0]){var g=c+(d>0?".":"")+e;j.isPlainObject(f)?h(f,b,g,d+1):b(g,e,f)}})}var i=a("../plotly"),j=a("../lib");c.manageCommandObserver=function(a,b,e,f){var g={},h=!0;b&&b._commandObserver&&(g=b._commandObserver),g.cache||(g.cache={}),g.lookupTable={};var i=c.hasSimpleAPICommandBindings(a,e,g.lookupTable);if(b&&b._commandObserver){if(i)return g;if(b._commandObserver.remove)return b._commandObserver.remove(),b._commandObserver=null,g}if(i){d(a,i,g.cache),g.check=function(){if(h){var b=d(a,i,g.cache);return b.changed&&f&&void 0!==g.lookupTable[b.value]&&(g.disable(),Promise.resolve(f({value:b.value,type:i.type,prop:i.prop,traces:i.traces,index:g.lookupTable[b.value]})).then(g.enable,g.enable)),b.changed}};for(var k=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<k.length;l++)a._internalOn(k[l],g.check);g.remove=function(){for(var b=0;b<k.length;b++)a._removeInternalListener(k[b],g.check)}}else j.log("Unable to automatically bind plot updates to API command"),g.lookupTable={},g.remove=function(){};return g.disable=function(){h=!1},g.enable=function(){h=!0},b&&(b._commandObserver=g),g},c.hasSimpleAPICommandBindings=function(a,b,d){var e,f,g=b.length;for(e=0;e<g;e++){var h,i=b[e],j=i.method,k=i.args;if(Array.isArray(k)||(k=[]),!j)return!1;var l=c.computeAPICommandBindings(a,j,k);if(1!==l.length)return!1;if(f){if(h=l[0],h.type!==f.type)return!1;if(h.prop!==f.prop)return!1;if(Array.isArray(f.traces)){if(!Array.isArray(h.traces))return!1;h.traces.sort();for(var m=0;m<f.traces.length;m++)if(f.traces[m]!==h.traces[m])return!1}else if(h.prop!==f.prop)return!1}else f=l[0],Array.isArray(f.traces)&&f.traces.sort();h=l[0];var n=h.value;if(Array.isArray(n)){if(1!==n.length)return!1;n=n[0]}d&&(d[n]=e)}return f},c.executeAPICommand=function(a,b,c){if("skip"===b)return Promise.resolve();var d=i[b],e=[a];Array.isArray(c)||(c=[]);for(var f=0;f<c.length;f++)e.push(c[f]);return d.apply(null,e).catch(function(a){return j.warn("API call to Plotly."+b+" rejected.",a),Promise.reject(a)})},c.computeAPICommandBindings=function(a,b,c){var d;switch(Array.isArray(c)||(c=[]),b){case"restyle":d=g(a,c);break;case"relayout":d=f(a,c);break;case"update":d=g(a,[c[0],c[2]]).concat(f(a,[c[1]]));break;case"animate":d=e(a,c);break;default:d=[]}return d}},{"../lib":743,"../plotly":784}],815:[function(a,b,c){"use strict";var d=a("../lib/extend").extendFlat;b.exports=function(a,b){a=a||{},b=b||{};var c={valType:"info_array",editType:a.editType,items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]};a.name&&a.name,a.trace,b.description&&b.description;return{x:d({},c,{}),y:d({},c,{}),editType:a.editType}}},{"../lib/extend":732}],816:[function(a,b,c){"use strict";b.exports=function(a){var b=a.editType,c=a.colorEditType;void 0===c&&(c=b);var d={family:{valType:"string",noBlank:!0,strict:!0,editType:b},size:{valType:"number",min:1,editType:b},color:{valType:"color",editType:c},editType:b};return a.arrayOk&&(d.family.arrayOk=!0,d.size.arrayOk=!0,d.color.arrayOk=!0),d}},{}],817:[function(a,b,c){"use strict";b.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],818:[function(a,b,c){"use strict";c.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},c.axesNames=["lonaxis","lataxis"],c.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},c.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},c.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],
lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},c.clipPad=.001,c.precision=.1,c.landColor="#F0DC82",c.waterColor="#3399FF",c.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},c.sphereSVG={type:"Sphere"},c.fillLayers={ocean:1,land:1,lakes:1},c.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},c.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],c.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],c.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],819:[function(a,b,c){"use strict";function d(a){this.id=a.id,this.graphDiv=a.graphDiv,this.container=a.container,this.topojsonURL=a.topojsonURL,this.isStatic=a.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}function e(a){for(var b=a.projection,c=b.type,d=h.geo[s.projNames[c]](),e=a._isClipped?s.lonaxisSpan[c]/2:null,f=["center","rotate","parallels","clipExtent"],g=function(a){return a?d:[]},i=0;i<f.length;i++){var j=f[i];"function"!=typeof d[j]&&(d[j]=g)}return d.isLonLatOverEdges=function(a){if(null===d(a))return!0;if(e){var b=d.rotate();return h.geo.distance(a,[-b[0],-b[1]])>e*Math.PI/180}return!1},d.getPath=function(){return h.geo.path().projection(d)},d.getBounds=function(a){return d.getPath().bounds(a)},d.fitExtent=function(a,b){var c=a[1][0]-a[0][0],e=a[1][1]-a[0][1],f=d.clipExtent&&d.clipExtent();d.scale(150).translate([0,0]),f&&d.clipExtent(null);var g=d.getBounds(b),h=Math.min(c/(g[1][0]-g[0][0]),e/(g[1][1]-g[0][1])),i=+a[0][0]+(c-h*(g[1][0]+g[0][0]))/2,j=+a[0][1]+(e-h*(g[1][1]+g[0][1]))/2;return f&&d.clipExtent(f),d.scale(150*h).translate([i,j])},d.precision(s.precision),e&&d.clipAngle(e-s.clipPad),d}function f(a,b){var c=b[a],d=c.dtick,e=s.scopeDefaults[b.scope],f=e.lonaxisRange,g=e.lataxisRange,i="lonaxis"===a?[d]:[0,d];return h.geo.graticule().extent([[f[0],g[0]],[f[1],g[1]]]).step(i)}function g(a,b){var c=s.clipPad,d=a[0]+c,e=a[1]-c,f=b[0]+c,g=b[1]-c;d>0&&e<0&&(e+=360);var h=(e-d)/4;return{type:"Polygon",coordinates:[[[d,f],[d,g],[d+h,g],[d+2*h,g],[d+3*h,g],[e,g],[e,f],[e-h,f],[e-2*h,f],[e-3*h,f],[d,f]]]}}var h=a("d3"),i=a("../../plotly"),j=a("../../lib"),k=a("../../components/color"),l=a("../../components/drawing"),m=a("../../components/fx"),n=a("../plots"),o=a("../cartesian/axes"),p=a("../../components/dragelement"),q=a("../cartesian/select"),r=a("./zoom"),s=a("./constants"),t=a("../../lib/topojson_utils"),u=a("topojson-client").feature;a("./projections")(h);var v=d.prototype;b.exports=function(a){return new d(a)},v.plot=function(a,b,c){var d=this,e=b[this.id],f=t.getTopojsonName(e);null===d.topojson||f!==d.topojsonName?(d.topojsonName=f,void 0===PlotlyGeoAssets.topojson[d.topojsonName]?c.push(d.fetchTopojson().then(function(c){PlotlyGeoAssets.topojson[d.topojsonName]=c,d.topojson=c,d.update(a,b)})):(d.topojson=PlotlyGeoAssets.topojson[d.topojsonName],d.update(a,b))):d.update(a,b)},v.fetchTopojson=function(){var a=t.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(b,c){h.json(a,function(d,e){if(d)return c(404===d.status?new Error(["plotly.js could not find topojson file at",a,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",a].join(" ")));b(e)})})},v.update=function(a,b){var c=b[this.id];if(!this.updateProjection(b,c)){this.hasChoropleth=!1;for(var d=0;d<a.length;d++)if("choropleth"===a[d][0].trace.type){this.hasChoropleth=!0;break}this.viewInitial||this.saveViewInitial(c),this.updateBaseLayers(b,c),this.updateDims(b,c),this.updateFx(b,c),n.generalUpdatePerTraceModule(this.graphDiv,this,a,c);var e=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=e.selectAll(".point"),this.dataPoints.text=e.selectAll("text"),this.dataPaths.line=e.selectAll(".js-line");var f=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=f.selectAll("path"),this.render()}},v.updateProjection=function(a,b){var c=a._size,d=b.domain,f=b.projection,h=f.rotation||{},k=b.center||{},l=this.projection=e(b);l.center([k.lon-h.lon,k.lat-h.lat]).rotate([-h.lon,-h.lat,h.roll]).parallels(f.parallels);var m=[[c.l+c.w*d.x[0],c.t+c.h*(1-d.y[1])],[c.l+c.w*d.x[1],c.t+c.h*(1-d.y[0])]],n=b.lonaxis,o=b.lataxis,p=g(n.range,o.range);l.fitExtent(m,p);var q=this.bounds=l.getBounds(p),r=this.fitScale=l.scale(),s=l.translate();if(!isFinite(q[0][0])||!isFinite(q[0][1])||!isFinite(q[1][0])||!isFinite(q[1][1])||isNaN(s[0])||isNaN(s[0])){for(var t=this.graphDiv,u=["projection.rotation","center","lonaxis.range","lataxis.range"],v="Invalid geo settings, relayout'ing to default view.",w={},x=0;x<u.length;x++)w[this.id+"."+u[x]]=null;return this.viewInitial=null,j.warn(v),t._promises.push(i.relayout(t,w)),v}var y=this.midPt=[(q[0][0]+q[1][0])/2,(q[0][1]+q[1][1])/2];if(l.scale(f.scale*r).translate([s[0]+(y[0]-s[0]),s[1]+(y[1]-s[1])]).clipExtent(q),b._isAlbersUsa){var z=l([k.lon,k.lat]),A=l.translate();l.translate([A[0]-(z[0]-A[0]),A[1]-(z[1]-A[1])])}},v.updateBaseLayers=function(a,b){function c(a){return"lonaxis"===a||"lataxis"===a}function d(a){return Boolean(s.lineLayers[a])}function e(a){return Boolean(s.fillLayers[a])}var g=this,i=g.topojson,j=g.layers,m=g.basePaths,n=this.hasChoropleth?s.layersForChoropleth:s.layers,o=n.filter(function(a){return d(a)||e(a)?b["show"+a]:!c(a)||b[a].showgrid}),p=g.framework.selectAll(".layer").data(o,String);p.exit().each(function(a){delete j[a],delete m[a],h.select(this).remove()}),p.enter().append("g").attr("class",function(a){return"layer "+a}).each(function(a){var b=j[a]=h.select(this);"bg"===a?g.bgRect=b.append("rect").style("pointer-events","all"):c(a)?m[a]=b.append("path").style("fill","none"):"backplot"===a?b.append("g").classed("choroplethlayer",!0):"frontplot"===a?b.append("g").classed("scatterlayer",!0):d(a)?m[a]=b.append("path").style("fill","none").style("stroke-miterlimit",2):e(a)&&(m[a]=b.append("path").style("stroke","none"))}),p.order(),p.each(function(a){var g=m[a],h=s.layerNameToAdjective[a];"frame"===a?g.datum(s.sphereSVG):d(a)||e(a)?g.datum(u(i,i.objects[a])):c(a)&&g.datum(f(a,b)).call(k.stroke,b[a].gridcolor).call(l.dashLine,"",b[a].gridwidth),d(a)?g.call(k.stroke,b[h+"color"]).call(l.dashLine,"",b[h+"width"]):e(a)&&g.call(k.fill,b[h+"color"])})},v.updateDims=function(a,b){var c=this.bounds,d=(b.framewidth||0)/2,e=c[0][0]-d,f=c[0][1]-d,g=c[1][0]-e+d,h=c[1][1]-f+d;l.setRect(this.clipRect,e,f,g,h),this.bgRect.call(l.setRect,e,f,g,h).call(k.fill,b.bgcolor),this.xaxis._offset=e,this.xaxis._length=g,this.yaxis._offset=f,this.yaxis._length=h},v.updateFx=function(a,b){function c(){var a=e.viewInitial,b={};for(var c in a)b[e.id+"."+c]=a[c];i.relayout(f,b),f.emit("plotly_doubleclick",null)}function d(a){return e.projection.invert([a[0]+e.xaxis._offset,a[1]+e.yaxis._offset])}var e=this,f=e.graphDiv,g=e.bgRect,j=a.dragmode;if(!e.isStatic){if("pan"===j)g.node().onmousedown=null,g.call(r(e,b)),g.on("dblclick.zoom",c);else if("select"===j||"lasso"===j){g.on(".zoom",null);var k;"select"===j?k=function(a,b){(a.range={})[e.id]=[d([b.xmin,b.ymin]),d([b.xmax,b.ymax])]}:"lasso"===j&&(k=function(a,b,c){(a.lassoPoints={})[e.id]=c.filtered.map(d)});var l={element:e.bgRect.node(),gd:f,plotinfo:{xaxis:e.xaxis,yaxis:e.yaxis,fillRangeItems:k},xaxes:[e.xaxis],yaxes:[e.yaxis],subplot:e.id,clickFn:function(b){2===b&&a._zoomlayer.selectAll(".select-outline").remove()}};l.prepFn=function(a,b,c){q(a,b,c,l,j)},p.init(l)}g.on("mousemove",function(){var a=e.projection.invert(h.mouse(this));if(!a||isNaN(a[0])||isNaN(a[1]))return p.unhover(f,h.event);e.xaxis.p2c=function(){return a[0]},e.yaxis.p2c=function(){return a[1]},m.hover(f,h.event,e.id)}),g.on("mouseout",function(){p.unhover(f,h.event)}),g.on("click",function(){m.click(f,h.event)})}},v.makeFramework=function(){var a=this,b=a.graphDiv._fullLayout,c="clip"+b._uid+a.id;a.clipDef=b._clips.append("clipPath").attr("id",c),a.clipRect=a.clipDef.append("rect"),a.framework=h.select(a.container).append("g").attr("class","geo "+a.id).call(l.setClipUrl,c),a.project=function(b){var c=a.projection(b);return c?[c[0]-a.xaxis._offset,c[1]-a.yaxis._offset]:[null,null]},a.xaxis={_id:"x",c2p:function(b){return a.project(b)[0]}},a.yaxis={_id:"y",c2p:function(b){return a.project(b)[1]}},a.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(a.mockAxis,b)},v.saveViewInitial=function(a){var b=a.center||{},c=a.projection,d=c.rotation||{};a._isScoped?this.viewInitial={"center.lon":b.lon,"center.lat":b.lat,"projection.scale":c.scale}:a._isClipped?this.viewInitial={"projection.scale":c.scale,"projection.rotation.lon":d.lon,"projection.rotation.lat":d.lat}:this.viewInitial={"center.lon":b.lon,"center.lat":b.lat,"projection.scale":c.scale,"projection.rotation.lon":d.lon}},v.render=function(){function a(a){var b=d(a.lonlat);return b?"translate("+b[0]+","+b[1]+")":null}function b(a){return d.isLonLatOverEdges(a.lonlat)?"none":null}var c,d=this.projection,e=d.getPath();for(c in this.basePaths)this.basePaths[c].attr("d",e);for(c in this.dataPaths)this.dataPaths[c].attr("d",function(a){return e(a.geojson)});for(c in this.dataPoints)this.dataPoints[c].attr("display",b).attr("transform",a)}},{"../../components/color":618,"../../components/dragelement":640,"../../components/drawing":643,"../../components/fx":660,"../../lib":743,"../../lib/topojson_utils":769,"../../plotly":784,"../cartesian/axes":789,"../cartesian/select":807,"../plots":852,"./constants":818,"./projections":824,"./zoom":825,d3:128,"topojson-client":549}],820:[function(a,b,c){"use strict";var d=a("./geo"),e=a("../../plots/get_data").getSubplotCalcData,f=a("../../lib").counterRegex,g="geo";c.name=g,c.attr=g,c.idRoot=g,c.idRegex=c.attrRegex=f(g),c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){var b=a._fullLayout,c=a.calcdata,f=b._subplots[g];void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var h=0;h<f.length;h++){var i=f[h],j=e(c,g,i),k=b[i],l=k._subplot;l||(l=d({id:i,graphDiv:a,container:b._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),b[i]._subplot=l),l.plot(j,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=d._subplots[g]||[],f=0;f<e.length;f++){var h=e[f],i=d[h]._subplot;!b[h]&&i&&(i.framework.remove(),i.clipDef.remove())}},c.updateFx=function(a){for(var b=a._subplots[g],c=0;c<b.length;c++){var d=a[b[c]];d._subplot.updateFx(a,d)}}},{"../../lib":743,"../../plots/get_data":826,"./geo":819,"./layout/attributes":821,"./layout/defaults":822,"./layout/layout_attributes":823}],821:[function(a,b,c){"use strict";b.exports={geo:{valType:"subplotid",dflt:"geo",editType:"calc"}}},{}],822:[function(a,b,c){"use strict";function d(a,b,c){var d,e=c("resolution"),g=c("scope"),i=f.scopeDefaults[g],j=c("projection.type",i.projType),k=b._isAlbersUsa="albers usa"===j;k&&(g=b.scope="usa");var l=b._isScoped="world"!==g,m=b._isConic=-1!==j.indexOf("conic");b._isClipped=!!f.lonaxisSpan[j];for(var n=0;n<h.length;n++){var o,p=h[n],q=[30,10][n];if(l)o=i[p+"Range"];else{var r=f[p+"Span"],s=(r[j]||r["*"])/2,t=c("projection.rotation."+p.substr(0,3),i.projRotate[n]);o=[t-s,t+s]}c(p+".tick0",c(p+".range",o)[0]),c(p+".dtick",q),d=c(p+".showgrid"),d&&(c(p+".gridcolor"),c(p+".gridwidth"))}var u=b.lonaxis.range,v=b.lataxis.range,w=u[0],x=u[1];w>0&&x<0&&(x+=360);var y,z=(w+x)/2;if(!k){var A=l?i.projRotate:[z,0,0];y=c("projection.rotation.lon",A[0]),c("projection.rotation.lat",A[1]),c("projection.rotation.roll",A[2]),d=c("showcoastlines",!l),d&&(c("coastlinecolor"),c("coastlinewidth")),d=c("showocean"),d&&c("oceancolor")}var B,C;if(k?(B=-96.6,C=38.7):(B=l?z:y,C=(v[0]+v[1])/2),c("center.lon",B),c("center.lat",C),m){c("projection.parallels",i.projParallels||[0,60])}c("projection.scale"),d=c("showland"),d&&c("landcolor"),d=c("showlakes"),d&&c("lakecolor"),d=c("showrivers"),d&&(c("rivercolor"),c("riverwidth")),d=c("showcountries",l&&"usa"!==g),d&&(c("countrycolor"),c("countrywidth")),("usa"===g||"north america"===g&&50===e)&&(c("showsubunits",!0),c("subunitcolor"),c("subunitwidth")),l||(d=c("showframe",!0))&&(c("framecolor"),c("framewidth")),c("bgcolor")}var e=a("../../subplot_defaults"),f=a("../constants"),g=a("./layout_attributes"),h=f.axesNames;b.exports=function(a,b,c){e(a,b,c,{type:"geo",attributes:g,handleDefaults:d,partition:"y"})}},{"../../subplot_defaults":865,"../constants":818,"./layout_attributes":823}],823:[function(a,b,c){"use strict";var d=a("../../../components/color/attributes"),e=a("../../domain_attributes"),f=a("../constants"),g=a("../../../plot_api/edit_types").overrideAll,h={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};b.exports=g({domain:e({name:"geo"},{}),resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(f.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(f.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:f.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:f.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:f.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:f.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:h,lataxis:h},"plot","from-root")},{"../../../components/color/attributes":617,"../../../plot_api/edit_types":773,"../../domain_attributes":815,"../constants":818}],824:[function(a,b,c){"use strict";function d(a){function b(a,b){return{type:"Feature",id:a.id,properties:a.properties,geometry:c(a.geometry,b)}}function c(b,d){if(!b)return null;if("GeometryCollection"===b.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(a){return c(a,d)})};if(!B.hasOwnProperty(b.type))return null;var e=B[b.type];return a.geo.stream(b,d(e)),e.result()}function d(){}function e(a){if((b=a.length)<4)return!1;for(var b,c=0,d=a[b-1][1]*a[0][0]-a[b-1][0]*a[0][1];++c<b;)d+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return d<=0}function f(a,b){for(var c=b[0],d=b[1],e=!1,f=0,g=a.length,h=g-1;f<g;h=f++){var i=a[f],j=i[0],k=i[1],l=a[h],m=l[0],n=l[1];k>d^n>d&&c<(m-j)*(d-k)/(n-k)+j&&(e=!e)}return e}function g(a){return a?a/Math.sin(a):1}function h(a){return a>1?F:a<-1?-F:Math.asin(a)}function i(a){return a>1?0:a<-1?E:Math.acos(a)}function j(a,b){var c=(2+F)*Math.sin(b);b/=2;for(var d=0,e=1/0;d<10&&Math.abs(e)>C;d++){var f=Math.cos(b);b-=e=(b+Math.sin(b)*(f+2)-c)/(2*f*(1+f))}return[2/Math.sqrt(E*(4+E))*a*(1+Math.cos(b)),2*Math.sqrt(E/(4+E))*Math.sin(b)]}function k(a,b){function c(c,d){var e=K(c/b,d);return e[0]*=a,e}return arguments.length<2&&(b=a),1===b?K:b===1/0?m:(c.invert=function(c,d){var e=K.invert(c/a,d);return e[0]*=b,e},c)}function l(){var a=2,b=J(k),c=b(a);return c.coefficient=function(c){return arguments.length?b(a=+c):a},c}function m(a,b){return[a*Math.cos(b)/Math.cos(b/=2),2*Math.sin(b)]}function n(a,b){return[3*a/(2*E)*Math.sqrt(E*E/3-b*b),b]}function o(a,b){return[a,1.25*Math.log(Math.tan(E/4+.4*b))]}function p(a){return function(b){var c,d=a*Math.sin(b),e=30;do{b-=c=(b+Math.sin(b)-d)/(1+Math.cos(b))}while(Math.abs(c)>C&&--e>0);return b/2}}function q(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(d*(.003971*c-.001529*d)-.013791)),b*(1.007226+c*(.015085+d*(.028874*c-.044475-.005916*d)))]}function r(a,b){var c,d=Math.min(18,36*Math.abs(b)/E),e=Math.floor(d),f=d-e,g=(c=M[e])[0],h=c[1],i=(c=M[++e])[0],j=c[1],k=(c=M[Math.min(19,++e)])[0],l=c[1];return[a*(i+f*(k-g)/2+f*f*(k-2*i+g)/2),(b>0?F:-F)*(j+f*(l-h)/2+f*f*(l-2*j+h)/2)]}function s(a,b){return[a*Math.cos(b),b]}function t(a,b){var c=Math.cos(b),d=g(i(c*Math.cos(a/=2)));return[2*c*Math.sin(a)*d,Math.sin(b)*d]}function u(a,b){var c=t(a,b);return[(c[0]+a/F)/2,(c[1]+b)/2]}a.geo.project=function(a,b){var d=b.stream;if(!d)throw new Error("not yet supported");return(a&&v.hasOwnProperty(a.type)?v[a.type]:c)(a,d)};var v={Feature:b,FeatureCollection:function(a,c){return{type:"FeatureCollection",features:a.features.map(function(a){return b(a,c)})}}},w=[],x=[],y={point:function(a,b){w.push([a,b])},result:function(){var a=w.length?w.length<2?{type:"Point",coordinates:w[0]}:{type:"MultiPoint",coordinates:w}:null;return w=[],a}},z={lineStart:d,point:function(a,b){w.push([a,b])},lineEnd:function(){w.length&&(x.push(w),w=[])},result:function(){var a=x.length?x.length<2?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}:null;return x=[],a}},A={polygonStart:d,lineStart:d,point:function(a,b){w.push([a,b])},lineEnd:function(){var a=w.length;if(a){do{w.push(w[0].slice())}while(++a<4);x.push(w),w=[]}},polygonEnd:d,result:function(){if(!x.length)return null;var a=[],b=[];return x.forEach(function(c){e(c)?a.push([c]):b.push(c)}),b.forEach(function(b){var c=b[0];a.some(function(a){if(f(a[0],c))return a.push(b),!0})||a.push([b])}),x=[],a.length?a.length>1?{type:"MultiPolygon",coordinates:a}:{type:"Polygon",coordinates:a[0]}:null}},B={Point:y,MultiPoint:y,LineString:z,MultiLineString:z,Polygon:A,MultiPolygon:A,Sphere:A},C=1e-6,D=C*C,E=Math.PI,F=E/2,G=(Math.sqrt(E),E/180),H=180/E,I=a.geo.projection,J=a.geo.projectionMutator;a.geo.interrupt=function(b){function c(a,c){for(var d=c<0?-1:1,e=i[+(c<0)],f=0,g=e.length-1;f<g&&a>e[f][2][0];++f);var h=b(a-e[f][1][0],c);return h[0]+=b(e[f][1][0],d*c>d*e[f][0][1]?e[f][0][1]:c)[0],h}function d(){h=i.map(function(a){return a.map(function(a){var c,d=b(a[0][0],a[0][1])[0],e=b(a[2][0],a[2][1])[0],f=b(a[1][0],a[0][1])[1],g=b(a[1][0],a[1][1])[1];return f>g&&(c=f,f=g,g=c),[[d,f],[e,g]]})})}function e(){for(var b=1e-6,c=[],d=0,e=i[0].length;d<e;++d){var g=i[0][d],h=180*g[0][0]/E,j=180*g[0][1]/E,k=180*g[1][1]/E,l=180*g[2][0]/E,m=180*g[2][1]/E;c.push(f([[h+b,j+b],[h+b,k-b],[l-b,k-b],[l-b,m+b]],30))}for(var d=i[1].length-1;d>=0;--d){var g=i[1][d],h=180*g[0][0]/E,j=180*g[0][1]/E,k=180*g[1][1]/E,l=180*g[2][0]/E,m=180*g[2][1]/E;c.push(f([[l-b,m-b],[l-b,k+b],[h+b,k+b],[h+b,j-b]],30))}return{type:"Polygon",coordinates:[a.merge(c)]}}function f(a,b){for(var c,d,e,f=-1,g=a.length,h=a[0],i=[];++f<g;){c=a[f],d=(c[0]-h[0])/b,e=(c[1]-h[1])/b;for(var j=0;j<b;++j)i.push([h[0]+j*d,h[1]+j*e]);h=c}return i.push(c),i}function g(a,b){return Math.abs(a[0]-b[0])<C&&Math.abs(a[1]-b[1])<C}var h,i=[[[[-E,0],[0,F],[E,0]]],[[[-E,0],[0,-F],[E,0]]]];b.invert&&(c.invert=function(a,d){for(var e=h[+(d<0)],f=i[+(d<0)],j=0,k=e.length;j<k;++j){var l=e[j];if(l[0][0]<=a&&a<l[1][0]&&l[0][1]<=d&&d<l[1][1]){var m=b.invert(a-b(f[j][1][0],0)[0],d);return m[0]+=f[j][1][0],g(c(m[0],m[1]),[a,d])?m:null}}});var j=a.geo.projection(c),k=j.stream;return j.stream=function(b){var c=j.rotate(),d=k(b),f=(j.rotate([0,0]),k(b));return j.rotate(c),d.sphere=function(){a.geo.stream(e(),f)},d},j.lobes=function(a){return arguments.length?(i=a.map(function(a){return a.map(function(a){return[[a[0][0]*E/180,a[0][1]*E/180],[a[1][0]*E/180,a[1][1]*E/180],[a[2][0]*E/180,a[2][1]*E/180]]})}),d(),j):i.map(function(a){return a.map(function(a){return[[180*a[0][0]/E,180*a[0][1]/E],[180*a[1][0]/E,180*a[1][1]/E],[180*a[2][0]/E,180*a[2][1]/E]]})})},j},j.invert=function(a,b){var c=.5*b*Math.sqrt((4+E)/E),d=h(c),e=Math.cos(d);return[a/(2/Math.sqrt(E*(4+E))*(1+e)),h((d+c*(e+2))/(2+F))]},(a.geo.eckert4=function(){return I(j)}).raw=j;var K=a.geo.azimuthalEqualArea.raw;m.invert=function(a,b){var c=2*h(b/2);return[a*Math.cos(c/2)/Math.cos(c),c]},(a.geo.hammer=l).raw=k,n.invert=function(a,b){return[2/3*E*a/Math.sqrt(E*E/3-b*b),b]},(a.geo.kavrayskiy7=function(){return I(n)}).raw=n,o.invert=function(a,b){return[a,2.5*Math.atan(Math.exp(.8*b))-.625*E]},(a.geo.miller=function(){return I(o)}).raw=o;var L=(p(E),function(a,b,c){function d(c,d){return[a*c*Math.cos(d=e(d)),b*Math.sin(d)]}var e=p(c);return d.invert=function(d,e){var f=h(e/b);return[d/(a*Math.cos(f)),h((2*f+Math.sin(2*f))/c)]},d}(Math.SQRT2/F,Math.SQRT2,E));(a.geo.mollweide=function(){return I(L)}).raw=L,q.invert=function(a,b){var c,d=b,e=25;do{var f=d*d,g=f*f;d-=c=(d*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))-b)/(1.007226+f*(.045255+g*(.259866*f-.311325-.005916*11*g)))}while(Math.abs(c)>C&&--e>0);return[a/(.8707+(f=d*d)*(f*(f*f*f*(.003971-.001529*f)-.013791)-.131979)),d]},(a.geo.naturalEarth=function(){return I(q)}).raw=q;var M=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];M.forEach(function(a){a[1]*=1.0144}),r.invert=function(a,b){var c=b/F,d=90*c,e=Math.min(18,Math.abs(d/5)),f=Math.max(0,Math.floor(e));do{var g=M[f][1],h=M[f+1][1],i=M[Math.min(19,f+2)][1],j=i-g,k=i-2*h+g,l=2*(Math.abs(c)-h)/j,m=k/j,n=l*(1-m*l*(1-2*m*l));if(n>=0||1===f){d=(b>=0?5:-5)*(n+e);var o,p=50;do{e=Math.min(18,Math.abs(d)/5),f=Math.floor(e),n=e-f,g=M[f][1],h=M[f+1][1],i=M[Math.min(19,f+2)][1],d-=(o=(b>=0?F:-F)*(h+n*(i-g)/2+n*n*(i-2*h+g)/2)-b)*H}while(Math.abs(o)>D&&--p>0);break}}while(--f>=0);var q=M[f][0],r=M[f+1][0],s=M[Math.min(19,f+2)][0];return[a/(r+n*(s-q)/2+n*n*(s-2*r+q)/2),d*G]},(a.geo.robinson=function(){return I(r)}).raw=r,s.invert=function(a,b){return[a/Math.cos(b),b]},(a.geo.sinusoidal=function(){return I(s)}).raw=s,t.invert=function(a,b){if(!(a*a+4*b*b>E*E+C)){var c=a,d=b,e=25;do{var f,g=Math.sin(c),h=Math.sin(c/2),j=Math.cos(c/2),k=Math.sin(d),l=Math.cos(d),m=Math.sin(2*d),n=k*k,o=l*l,p=h*h,q=1-o*j*j,r=q?i(l*j)*Math.sqrt(f=1/q):f=0,s=2*r*l*h-a,t=r*k-b,u=f*(o*p+r*l*j*n),v=f*(.5*g*m-2*r*k*h),w=.25*f*(m*h-r*k*o*g),x=f*(n*j+r*p*l),y=v*w-x*u;if(!y)break;var z=(t*v-s*x)/y,A=(s*w-t*u)/y;c-=z,d-=A}while((Math.abs(z)>C||Math.abs(A)>C)&&--e>0);return[c,d]}},(a.geo.aitoff=function(){return I(t)}).raw=t,u.invert=function(a,b){var c=a,d=b,e=25;do{var f,g=Math.cos(d),h=Math.sin(d),j=Math.sin(2*d),k=h*h,l=g*g,m=Math.sin(c),n=Math.cos(c/2),o=Math.sin(c/2),p=o*o,q=1-l*n*n,r=q?i(g*n)*Math.sqrt(f=1/q):f=0,s=.5*(2*r*g*o+c/F)-a,t=.5*(r*h+d)-b,u=.5*f*(l*p+r*g*n*k)+.5/F,v=f*(m*j/4-r*h*o),w=.125*f*(j*o-r*h*l*m),x=.5*f*(k*n+r*p*g)+.5,y=v*w-x*u,z=(t*v-s*x)/y,A=(s*w-t*u)/y;c-=z,d-=A}while((Math.abs(z)>C||Math.abs(A)>C)&&--e>0);return[c,d]},(a.geo.winkel3=function(){return I(u)}).raw=u}b.exports=d},{}],825:[function(a,b,c){"use strict";function d(a,b){var c=a.projection;return(b._isScoped?g:b._isClipped?i:h)(a,c)}function e(a,b){return w.behavior.zoom().translate(b.translate()).scale(b.scale())}function f(a,b,c){function d(a,b){var c=x.nestedProperty(h,a);c.get()!==b&&(c.set(b),x.nestedProperty(g,a).set(b),i[e+"."+a]=b)}var e=a.id,f=a.graphDiv,g=f.layout[e],h=f._fullLayout[e],i={};c(d),d("projection.scale",b.scale()/a.fitScale),f.emit("plotly_relayout",i)}function g(a,b){function c(){w.select(this).style(A)}function d(){b.scale(w.event.scale).translate(w.event.translate),a.render()}function g(c){var d=b.invert(a.midPt);c("center.lon",d[0]),c("center.lat",d[1])}function h(){w.select(this).style(B),f(a,b,g)}var i=e(a,b);return i.on("zoomstart",c).on("zoom",d).on("zoomend",h),i}function h(a,b){function c(a){return b.invert(a)}function d(a){var d=b(c(a));return Math.abs(d[0]-a[0])>t||Math.abs(d[1]-a[1])>t}function g(){w.select(this).style(A),k=w.mouse(this),l=b.rotate(),m=b.translate(),n=l,o=c(k)}function h(){if(p=w.mouse(this),d(k))return s.scale(b.scale()),void s.translate(b.translate());b.scale(w.event.scale),b.translate([m[0],w.event.translate[1]]),o?c(p)&&(r=c(p),q=[n[0]+(r[0]-o[0]),l[1],l[2]],b.rotate(q),n=q):(k=p,o=c(k)),a.render()}function i(){w.select(this).style(B),f(a,b,j)}function j(c){var d=b.rotate(),e=b.invert(a.midPt);c("projection.rotation.lon",-d[0]),c("center.lon",e[0]),c("center.lat",e[1])}var k,l,m,n,o,p,q,r,s=e(a,b),t=2;return s.on("zoomstart",g).on("zoom",h).on("zoomend",i),s}function i(a,b){function c(a){s++||a({type:"zoomstart"})}function d(a){a({type:"zoom"})}function g(a){--s||a({type:"zoomend"})}function h(a){var c=b.rotate();a("projection.rotation.lon",-c[0]),a("projection.rotation.lat",-c[1])}var i,o={r:b.rotate(),k:b.scale()},p=e(a,b),q=v(p,"zoomstart","zoom","zoomend"),s=0,t=p.on;return p.on("zoomstart",function(){w.select(this).style(A);var a=w.mouse(this),e=b.rotate(),f=e,g=b.translate(),h=k(e);i=j(b,a),t.call(p,"zoom",function(){var c=w.mouse(this);if(b.scale(o.k=w.event.scale),i){if(j(b,c)){b.rotate(e).translate(g);var k=j(b,c),p=m(i,k),s=r(l(h,p)),t=o.r=n(s,i,f);isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])||(t=f),b.rotate(t),f=t}}else a=c,i=j(b,a);d(q.of(this,arguments))}),c(q.of(this,arguments))}).on("zoomend",function(){w.select(this).style(B),t.call(p,"zoom",null),g(q.of(this,arguments)),f(a,b,h)}).on("zoom.redraw",function(){a.render()}),w.rebind(p,q,"on")}function j(a,b){var c=a.invert(b);return c&&isFinite(c[0])&&isFinite(c[1])&&s(c)}function k(a){var b=.5*a[0]*y,c=.5*a[1]*y,d=.5*a[2]*y,e=Math.sin(b),f=Math.cos(b),g=Math.sin(c),h=Math.cos(c),i=Math.sin(d),j=Math.cos(d);return[f*h*j+e*g*i,e*h*j-f*g*i,f*g*j+e*h*i,f*h*i-e*g*j]}function l(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return[c*g-d*h-e*i-f*j,c*h+d*g+e*j-f*i,c*i-d*j+e*g+f*h,c*j+d*i-e*h+f*g]}function m(a,b){if(a&&b){var c=u(a,b),d=Math.sqrt(t(c,c)),e=.5*Math.acos(Math.max(-1,Math.min(1,t(a,b)))),f=Math.sin(e)/d;return d&&[Math.cos(e),c[2]*f,-c[1]*f,c[0]*f]}}function n(a,b,c){var d=q(b,2,a[0]);d=q(d,1,a[1]),d=q(d,0,a[2]-c[2]);var e,f,g=b[0],h=b[1],i=b[2],j=d[0],k=d[1],l=d[2],m=Math.atan2(h,g)*z,n=Math.sqrt(g*g+h*h);Math.abs(k)>n?(f=(k>0?90:-90)-m,e=0):(f=Math.asin(k/n)*z-m,e=Math.sqrt(n*n-k*k));var p=180-f-2*m,r=(Math.atan2(l,j)-Math.atan2(i,e))*z,s=(Math.atan2(l,j)-Math.atan2(i,-e))*z;return o(c[0],c[1],f,r)<=o(c[0],c[1],p,s)?[f,r,c[2]]:[p,s,c[2]]}function o(a,b,c,d){var e=p(c-a),f=p(d-b);return Math.sqrt(e*e+f*f)}function p(a){return(a%360+540)%360-180}function q(a,b,c){var d=c*y,e=a.slice(),f=0===b?1:0,g=2===b?1:2,h=Math.cos(d),i=Math.sin(d);return e[f]=a[f]*h-a[g]*i,e[g]=a[g]*h+a[f]*i,e}function r(a){return[Math.atan2(2*(a[0]*a[1]+a[2]*a[3]),1-2*(a[1]*a[1]+a[2]*a[2]))*z,Math.asin(Math.max(-1,Math.min(1,2*(a[0]*a[2]-a[3]*a[1]))))*z,Math.atan2(2*(a[0]*a[3]+a[1]*a[2]),1-2*(a[2]*a[2]+a[3]*a[3]))*z]}function s(a){var b=a[0]*y,c=a[1]*y,d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function t(a,b){for(var c=0,d=0,e=a.length;d<e;++d)c+=a[d]*b[d];return c}function u(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function v(a){for(var b=0,c=arguments.length,d=[];++b<c;)d.push(arguments[b]);var e=w.dispatch.apply(null,d);return e.of=function(b,c){return function(d){var f;try{f=d.sourceEvent=w.event,d.target=a,w.event=d,e[d.type].apply(b,c)}finally{w.event=f}}},e}var w=a("d3"),x=a("../../lib"),y=Math.PI/180,z=180/Math.PI,A={cursor:"pointer"},B={cursor:"auto"};b.exports=d},{"../../lib":743,d3:128}],826:[function(a,b,c){"use strict";var d=a("../registry"),e=a("./cartesian/constants").SUBPLOT_PATTERN;c.getSubplotCalcData=function(a,b,c){var e=d.subplotsRegistry[b];if(!e)return[];for(var f=e.attr,g=[],h=0;h<a.length;h++){var i=a[h];i[0].trace[f]===c&&g.push(i)}return g},c.getModuleCalcData=function(a,b){var c=[],e="string"==typeof b?d.getModule(b):b;if(!e)return c;for(var f=0;f<a.length;f++){var g=a[f],h=g[0].trace;h._module===e&&!0===h.visible&&c.push(g)}return c},c.getSubplotData=function(a,b,c){if(!d.subplotsRegistry[b])return[];var f,g,h,i=d.subplotsRegistry[b].attr,j=[];if("gl2d"===b){var k=c.match(e);g="x"+k[1],h="y"+k[2]}for(var l=0;l<a.length;l++)f=a[l],"gl2d"===b&&d.traceIs(f,"gl2d")?f[i[0]]===g&&f[i[1]]===h&&j.push(f):f[i]===c&&j.push(f);return j}},{"../registry":873,"./cartesian/constants":794}],827:[function(a,b,c){"use strict";function d(a,b){this.element=a,this.plot=b,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function e(a){function b(){a.xaxis.autorange=!1,a.yaxis.autorange=!1}function c(){for(var b=a.graphDiv._fullLayout._axisConstraintGroups,c=a.xaxis._id,d=a.yaxis._id,e=0;e<b.length;e++)if(-1!==b[e][c]){if(-1!==b[e][d])return!0;break}return!1}function e(d,e,f){function g(b,c,d){var e=Math.min(c,d),f=Math.max(c,d);e!==f?(m[b]=e,m[b+2]=f,l.dataBox=m,a.setRanges(m)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}var h,j,m=a.calcDataBox(),n=k.viewBox,o=l.lastPos[0],p=l.lastPos[1],q=i.MINDRAG*k.pixelRatio,r=i.MINZOOM*k.pixelRatio;switch(e*=k.pixelRatio,f*=k.pixelRatio,f=n[3]-n[1]-f,a.fullLayout.dragmode){case"zoom":if(d){var s=e/(n[2]-n[0])*(m[2]-m[0])+m[0],t=f/(n[3]-n[1])*(m[3]-m[1])+m[1];l.boxInited||(l.boxStart[0]=s,l.boxStart[1]=t,l.dragStart[0]=e,l.dragStart[1]=f),l.boxEnd[0]=s,l.boxEnd[1]=t,l.boxInited=!0,l.boxEnabled||l.boxStart[0]===l.boxEnd[0]&&l.boxStart[1]===l.boxEnd[1]||(l.boxEnabled=!0);var u=Math.abs(l.dragStart[0]-e)<r,v=Math.abs(l.dragStart[1]-f)<r;if(!c()||u&&v)u&&(l.boxEnd[0]=l.boxStart[0]),v&&(l.boxEnd[1]=l.boxStart[1]);else{h=l.boxEnd[0]-l.boxStart[0],j=l.boxEnd[1]-l.boxStart[1];var w=(m[3]-m[1])/(m[2]-m[0]);Math.abs(h*w)>Math.abs(j)?(l.boxEnd[1]=l.boxStart[1]+Math.abs(h)*w*(j>=0?1:-1),l.boxEnd[1]<m[1]?(l.boxEnd[1]=m[1],l.boxEnd[0]=l.boxStart[0]+(m[1]-l.boxStart[1])/Math.abs(w)):l.boxEnd[1]>m[3]&&(l.boxEnd[1]=m[3],l.boxEnd[0]=l.boxStart[0]+(m[3]-l.boxStart[1])/Math.abs(w))):(l.boxEnd[0]=l.boxStart[0]+Math.abs(j)/w*(h>=0?1:-1),l.boxEnd[0]<m[0]?(l.boxEnd[0]=m[0],l.boxEnd[1]=l.boxStart[1]+(m[0]-l.boxStart[0])*Math.abs(w)):l.boxEnd[0]>m[2]&&(l.boxEnd[0]=m[2],l.boxEnd[1]=l.boxStart[1]+(m[2]-l.boxStart[0])*Math.abs(w)))}}else l.boxEnabled?(h=l.boxStart[0]!==l.boxEnd[0],j=l.boxStart[1]!==l.boxEnd[1],h||j?(h&&(g(0,l.boxStart[0],l.boxEnd[0]),a.xaxis.autorange=!1),j&&(g(1,l.boxStart[1],l.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),l.boxEnabled=!1,l.boxInited=!1):l.boxInited&&(l.boxInited=!1);break;case"pan":l.boxEnabled=!1,l.boxInited=!1,
d?(l.panning||(l.dragStart[0]=e,l.dragStart[1]=f),Math.abs(l.dragStart[0]-e)<q&&(e=l.dragStart[0]),Math.abs(l.dragStart[1]-f)<q&&(f=l.dragStart[1]),h=(o-e)*(m[2]-m[0])/(k.viewBox[2]-k.viewBox[0]),j=(p-f)*(m[3]-m[1])/(k.viewBox[3]-k.viewBox[1]),m[0]+=h,m[2]+=h,m[1]+=j,m[3]+=j,a.setRanges(m),l.panning=!0,l.lastInputTime=Date.now(),b(),a.cameraChanged(),a.handleAnnotations()):l.panning&&(l.panning=!1,a.relayoutCallback())}l.lastPos[0]=e,l.lastPos[1]=f}var j=a.mouseContainer,k=a.glplot,l=new d(j,k);return l.mouseListener=f(j,e),j.addEventListener("touchstart",function(a){var b=h(a.changedTouches[0],j);e(0,b[0],b[1]),e(1,b[0],b[1])}),j.addEventListener("touchmove",function(a){a.preventDefault();var b=h(a.changedTouches[0],j);e(1,b[0],b[1])}),j.addEventListener("touchend",function(){e(0,l.lastPos[0],l.lastPos[1])}),l.wheelListener=g(j,function(c,d){if(!a.scrollZoom)return!1;var e=a.calcDataBox(),f=k.viewBox,g=l.lastPos[0],h=l.lastPos[1],i=Math.exp(5*d/(f[3]-f[1])),j=g/(f[2]-f[0])*(e[2]-e[0])+e[0],m=h/(f[3]-f[1])*(e[3]-e[1])+e[1];return e[0]=(e[0]-j)*i+j,e[2]=(e[2]-j)*i+j,e[1]=(e[1]-m)*i+m,e[3]=(e[3]-m)*i+m,a.setRanges(e),l.lastInputTime=Date.now(),b(),a.cameraChanged(),a.handleAnnotations(),a.relayoutCallback(),!0}),l}var f=a("mouse-change"),g=a("mouse-wheel"),h=a("mouse-event-offset"),i=a("../cartesian/constants");b.exports=e},{"../cartesian/constants":794,"mouse-change":443,"mouse-event-offset":444,"mouse-wheel":446}],828:[function(a,b,c){"use strict";function d(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=!1,this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}function e(a){return new d(a)}var f=a("../cartesian/axes"),g=a("../../lib/html2unicode"),h=a("../../lib/str2rgbarray"),i=d.prototype,j=["xaxis","yaxis"];i.merge=function(a){this.titleEnable=!1,this.backgroundColor=h(a.plot_bgcolor);var b,c,d,e,f,i,k,l,m,n,o;for(n=0;n<2;++n){b=j[n];var p=b.charAt(0);for(c=a[this.scene[b]._name],d=c.title===this.scene.fullLayout._dfltTitle[p]?"":c.title,o=0;o<=2;o+=2)this.labelEnable[n+o]=!1,this.labels[n+o]=g(d),this.labelColor[n+o]=h(c.titlefont.color),this.labelFont[n+o]=c.titlefont.family,this.labelSize[n+o]=c.titlefont.size,this.labelPad[n+o]=this.getLabelPad(b,c),this.tickEnable[n+o]=!1,this.tickColor[n+o]=h((c.tickfont||{}).color),this.tickAngle[n+o]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[n+o]=this.getTickPad(c),this.tickMarkLength[n+o]=0,this.tickMarkWidth[n+o]=c.tickwidth||0,this.tickMarkColor[n+o]=h(c.tickcolor),this.borderLineEnable[n+o]=!1,this.borderLineColor[n+o]=h(c.linecolor),this.borderLineWidth[n+o]=c.linewidth||0;k=this.hasSharedAxis(c),f=this.hasAxisInDfltPos(b,c)&&!k,i=this.hasAxisInAltrPos(b,c)&&!k,e=c.mirror||!1,l=k?-1!==String(e).indexOf("all"):!!e,m=k?"allticks"===e:-1!==String(e).indexOf("ticks"),f?this.labelEnable[n]=!0:i&&(this.labelEnable[n+2]=!0),f?this.tickEnable[n]=c.showticklabels:i&&(this.tickEnable[n+2]=c.showticklabels),(f||l)&&(this.borderLineEnable[n]=c.showline),(i||l)&&(this.borderLineEnable[n+2]=c.showline),(f||m)&&(this.tickMarkLength[n]=this.getTickMarkLength(c)),(i||m)&&(this.tickMarkLength[n+2]=this.getTickMarkLength(c)),this.gridLineEnable[n]=c.showgrid,this.gridLineColor[n]=h(c.gridcolor),this.gridLineWidth[n]=c.gridwidth,this.zeroLineEnable[n]=c.zeroline,this.zeroLineColor[n]=h(c.zerolinecolor),this.zeroLineWidth[n]=c.zerolinewidth}},i.hasSharedAxis=function(a){var b=this.scene,c=b.fullLayout._subplots.gl2d;return 0!==f.findSubplotsWithAxis(c,a).indexOf(b.id)},i.hasAxisInDfltPos=function(a,b){var c=b.side;return"xaxis"===a?"bottom"===c:"yaxis"===a?"left"===c:void 0},i.hasAxisInAltrPos=function(a,b){var c=b.side;return"xaxis"===a?"top"===c:"yaxis"===a?"right"===c:void 0},i.getLabelPad=function(a,b){var c=b.titlefont.size,d=b.showticklabels;return"xaxis"===a?"top"===b.side?c*(1.5+(d?1:0))-10:c*(1.5+(d?.5:0))-10:"yaxis"===a?"right"===b.side?10+c*(1.5+(d?1:.5)):10+c*(1.5+(d?.5:0)):void 0},i.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15},i.getTickMarkLength=function(a){if(!a.ticks)return 0;var b=a.ticklen;return"inside"===a.ticks?-b:b},b.exports=e},{"../../lib/html2unicode":741,"../../lib/str2rgbarray":765,"../cartesian/axes":789}],829:[function(a,b,c){"use strict";var d=a("../../plot_api/edit_types").overrideAll,e=a("./scene2d"),f=a("../layout_attributes"),g=a("../../constants/xmlns_namespaces"),h=a("../cartesian/constants"),i=a("../cartesian"),j=a("../../components/fx/layout_attributes"),k=a("../get_data").getSubplotData;c.name="gl2d",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.idRegex=h.idRegex,c.attrRegex=h.attrRegex,c.attributes=a("../cartesian/attributes"),c.supplyLayoutDefaults=function(a,b,c){b._has("cartesian")||i.supplyLayoutDefaults(a,b,c)},c.layoutAttrOverrides=d(i.layoutAttributes,"plot","from-root"),c.baseLayoutAttrOverrides=d({plot_bgcolor:f.plot_bgcolor,hoverlabel:j.hoverlabel},"plot","nested"),c.plot=function(a){for(var b=a._fullLayout,c=a._fullData,d=b._subplots.gl2d,f=0;f<d.length;f++){var g=d[f],h=b._plots[g],i=k(c,"gl2d",g),j=h._scene2d;void 0===j&&(j=new e({id:g,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),h._scene2d=j),j.plot(i,a.calcdata,b,a.layout)}},c.clean=function(a,b,c,d){for(var e=d._subplots.gl2d||[],f=0;f<e.length;f++){var g=e[f],h=d._plots[g];if(h._scene2d){0===k(a,"gl2d",g).length&&(h._scene2d.destroy(),delete d._plots[g])}}i.clean.apply(this,arguments)},c.drawFramework=function(a){a._context.staticPlot||i.drawFramework(a)},c.toSVG=function(a){for(var b=a._fullLayout,c=b._subplots.gl2d,d=0;d<c.length;d++){var e=b._plots[c[d]],f=e._scene2d,h=f.toImage("png");b._glimages.append("svg:image").attr({xmlns:g.svg,"xlink:href":h,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),f.destroy()}},c.updateFx=function(a){for(var b=a._subplots.gl2d,c=0;c<b.length;c++){a._plots[b[c]]._scene2d.updateFx(a.dragmode)}}},{"../../components/fx/layout_attributes":661,"../../constants/xmlns_namespaces":723,"../../plot_api/edit_types":773,"../cartesian":800,"../cartesian/attributes":788,"../cartesian/constants":794,"../get_data":826,"../layout_attributes":843,"./scene2d":830}],830:[function(a,b,c){"use strict";function d(a,b){this.container=a.container,this.graphDiv=a.graphDiv,this.pixelRatio=a.plotGlPixelRatio||window.devicePixelRatio,this.id=a.id,this.staticPlot=!!a.staticPlot,this.scrollZoom=this.graphDiv._context.scrollZoom,this.fullData=null,this.updateRefs(b),this.makeFramework(),this.glplotOptions=o(this),this.glplotOptions.merge(b),this.glplot=k(this.glplotOptions),this.camera=p(this),this.traces={},this.spikes=l(this.glplot),this.selectBox=m(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.bounds=[1/0,1/0,-1/0,-1/0],this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function e(a,b){for(var c=0;c<2;++c){var d=a[c],e=b[c];if(d.length!==e.length)return!0;for(var f=0;f<d.length;++f)if(d[f].x!==e[f].x)return!0}return!1}var f,g,h=a("../../registry"),i=a("../../plots/cartesian/axes"),j=a("../../components/fx"),k=a("gl-plot2d"),l=a("gl-spikes2d"),m=a("gl-select-box"),n=a("webgl-context"),o=a("./convert"),p=a("./camera"),q=a("../../lib/html2unicode"),r=a("../../lib/show_no_webgl_msg"),s=a("../cartesian/constraints"),t=s.enforce,u=s.clean,v=["xaxis","yaxis"],w=a("../cartesian/constants").SUBPLOT_PATTERN;b.exports=d;var x=d.prototype;x.makeFramework=function(){if(this.staticPlot){if(!(g||(f=document.createElement("canvas"),g=n({canvas:f,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=f,this.gl=g}else{var a=this.container.querySelector(".gl-canvas-focus"),b=n({canvas:a,preserveDrawingBuffer:!0,premultipliedAlpha:!0});b||r(this),this.canvas=a,this.gl=b}var c=this.canvas;c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style["pointer-events"]="none",this.updateSize(c),c.className+=" user-select-none";var d=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");d.style.position="absolute",d.style.top=d.style.left="0px",d.style.width=d.style.height="100%",d.style["z-index"]=20,d.style["pointer-events"]="none";var e=this.mouseContainer=document.createElement("div");e.style.position="absolute",e.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var h=this.container;h.appendChild(d),h.appendChild(e);var i=this;e.addEventListener("mouseout",function(){i.isMouseOver=!1,i.unhover()}),e.addEventListener("mouseover",function(){i.isMouseOver=!0})},x.toImage=function(a){a||(a="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(f),this.updateSize(this.canvas);var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.clearColor(1,1,1,0),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var g=0,h=d-1;g<h;++g,--h)for(var i=0;i<c;++i)for(var j=0;j<4;++j){var k=e[4*(c*g+i)+j];e[4*(c*g+i)+j]=e[4*(c*h+i)+j],e[4*(c*h+i)+j]=k}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(f),o},x.updateSize=function(a){a||(a=this.canvas);var b=this.pixelRatio,c=this.fullLayout,d=c.width,e=c.height,f=0|Math.ceil(b*d),g=0|Math.ceil(b*e);return a.width===f&&a.height===g||(a.width=f,a.height=g),this.redraw&&this.redraw(),a},x.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var a=[i.calcTicks(this.xaxis),i.calcTicks(this.yaxis)],b=0;b<2;++b)for(var c=0;c<a[b].length;++c)a[b][c].text=q(a[b][c].text+"");return a},x.updateRefs=function(a){this.fullLayout=a;var b=this.id.match(w),c="xaxis"+b[1],d="yaxis"+b[2];this.xaxis=this.fullLayout[c],this.yaxis=this.fullLayout[d]},x.relayoutCallback=function(){var a=this.graphDiv,b=this.xaxis,c=this.yaxis,d=a.layout;d.xaxis.autorange=b.autorange,d.xaxis.range=b.range.slice(0),d.yaxis.autorange=c.autorange,d.yaxis.range=c.range.slice(0);var e={lastInputTime:this.camera.lastInputTime};e[b._name]=b.range.slice(0),e[c._name]=c.range.slice(0),a.emit("plotly_relayout",e)},x.cameraChanged=function(){var a=this.camera;this.glplot.setDataBox(this.calcDataBox());var b=this.computeTickMarks();e(b,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=b,this.glplotOptions.dataBox=a.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},x.handleAnnotations=function(){for(var a=this.graphDiv,b=this.fullLayout.annotations,c=0;c<b.length;c++){var d=b[c];d.xref===this.xaxis._id&&d.yref===this.yaxis._id&&h.getComponentMethod("annotations","drawOne")(a,c)}},x.destroy=function(){if(this.glplot){var a=this.traces;a&&Object.keys(a).map(function(b){a[b].dispose(),delete a[b]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},x.plot=function(a,b,c){var d=this.glplot;this.updateRefs(c),this.updateTraces(a,b),this.updateFx(c.dragmode);var e=c.width,f=c.height;this.updateSize(this.canvas);var g=this.glplotOptions;g.merge(c),g.screenBox=[0,0,e,f];var h={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};u(h,this.xaxis),u(h,this.yaxis);var j=c._size,k=this.xaxis.domain,l=this.yaxis.domain;g.viewBox=[j.l+k[0]*j.w,j.b+l[0]*j.h,e-j.r-(1-k[1])*j.w,f-j.t-(1-l[1])*j.h],this.mouseContainer.style.width=j.w*(k[1]-k[0])+"px",this.mouseContainer.style.height=j.h*(l[1]-l[0])+"px",this.mouseContainer.height=j.h*(l[1]-l[0]),this.mouseContainer.style.left=j.l+k[0]*j.w+"px",this.mouseContainer.style.top=j.t+(1-l[1])*j.h+"px";var m=this.bounds;m[0]=m[1]=1/0,m[2]=m[3]=-1/0;var n,o,p=Object.keys(this.traces);for(o=0;o<p.length;++o)for(var q=this.traces[p[o]],r=0;r<2;++r)m[r]=Math.min(m[r],q.bounds[r]),m[r+2]=Math.max(m[r+2],q.bounds[r+2]);for(o=0;o<2;++o)m[o]>m[o+2]&&(m[o]=-1,m[o+2]=1),n=this[v[o]],n._length=g.viewBox[o+2]-g.viewBox[o],i.doAutoRange(n),n.setScale();t(h),g.ticks=this.computeTickMarks(),g.dataBox=this.calcDataBox(),g.merge(c),d.update(g),this.glplot.draw()},x.calcDataBox=function(){var a=this.xaxis,b=this.yaxis,c=a.range,d=b.range,e=a.r2l,f=b.r2l;return[e(c[0]),f(d[0]),e(c[1]),f(d[1])]},x.setRanges=function(a){var b=this.xaxis,c=this.yaxis,d=b.l2r,e=c.l2r;b.range=[d(a[0]),d(a[2])],c.range=[e(a[1]),e(a[3])]},x.updateTraces=function(a,b){var c,d,e,f=Object.keys(this.traces);this.fullData=a;a:for(c=0;c<f.length;c++){var g=f[c],h=this.traces[g];for(d=0;d<a.length;d++)if(e=a[d],e.uid===g&&e.type===h.type)continue a;h.dispose(),delete this.traces[g]}for(c=0;c<a.length;c++){e=a[c];var i=b[c],j=this.traces[e.uid];j?j.update(e,i):(j=e._module.plot(this,e,i),this.traces[e.uid]=j)}this.glplot.objects.sort(function(a,b){return a._trace.index-b._trace.index})},x.updateFx=function(a){"lasso"===a||"select"===a?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===a?"move":"zoom"===a?"crosshair":null},x.emitPointAction=function(a,b){for(var c,d=a.trace.uid,e=a.pointIndex,f=0;f<this.fullData.length;f++)this.fullData[f].uid===d&&(c=this.fullData[f]);var g={x:a.traceCoord[0],y:a.traceCoord[1],curveNumber:c.index,pointNumber:e,data:c._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};j.appendArrayPointValue(g,c,e),this.graphDiv.emit(b,{points:[g]})},x.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var a=this.glplot,b=this.camera,c=b.mouseListener,d=1===this.lastButtonState&&0===c.buttons,e=this.fullLayout;this.lastButtonState=c.buttons,this.cameraChanged();var f,g=c.x*a.pixelRatio,h=this.canvas.height-a.pixelRatio*c.y;if(b.boxEnabled&&"zoom"===e.dragmode){this.selectBox.enabled=!0;for(var i=this.selectBox.selectBox=[Math.min(b.boxStart[0],b.boxEnd[0]),Math.min(b.boxStart[1],b.boxEnd[1]),Math.max(b.boxStart[0],b.boxEnd[0]),Math.max(b.boxStart[1],b.boxEnd[1])],k=0;k<2;k++)b.boxStart[k]===b.boxEnd[k]&&(i[k]=a.dataBox[k],i[k+2]=a.dataBox[k+2]);a.setDirty()}else if(!b.panning&&this.isMouseOver){this.selectBox.enabled=!1;var l=e._size,m=this.xaxis.domain,n=this.yaxis.domain;f=a.pick(g/a.pixelRatio+l.l+m[0]*l.w,h/a.pixelRatio-(l.t+(1-n[1])*l.h));var o=f&&f.object._trace.handlePick(f);if(o&&d&&this.emitPointAction(o,"plotly_click"),f&&"skip"!==f.object._trace.hoverinfo&&e.hovermode&&o&&(!this.lastPickResult||this.lastPickResult.traceUid!==o.trace.uid||this.lastPickResult.dataCoord[0]!==o.dataCoord[0]||this.lastPickResult.dataCoord[1]!==o.dataCoord[1])){var p=o;this.lastPickResult={traceUid:o.trace?o.trace.uid:null,dataCoord:o.dataCoord.slice()},this.spikes.update({center:f.dataCoord}),p.screenCoord=[((a.viewBox[2]-a.viewBox[0])*(f.dataCoord[0]-a.dataBox[0])/(a.dataBox[2]-a.dataBox[0])+a.viewBox[0])/a.pixelRatio,(this.canvas.height-(a.viewBox[3]-a.viewBox[1])*(f.dataCoord[1]-a.dataBox[1])/(a.dataBox[3]-a.dataBox[1])-a.viewBox[1])/a.pixelRatio],this.emitPointAction(o,"plotly_hover");var q=this.fullData[p.trace.index]||{},r=p.pointIndex,s=j.castHoverinfo(q,e,r);if(s&&"all"!==s){var t=s.split("+");-1===t.indexOf("x")&&(p.traceCoord[0]=void 0),-1===t.indexOf("y")&&(p.traceCoord[1]=void 0),-1===t.indexOf("z")&&(p.traceCoord[2]=void 0),-1===t.indexOf("text")&&(p.textLabel=void 0),-1===t.indexOf("name")&&(p.name=void 0)}j.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:j.castHoverOption(q,r,"bgcolor")||p.color,borderColor:j.castHoverOption(q,r,"bordercolor"),fontFamily:j.castHoverOption(q,r,"font.family"),fontSize:j.castHoverOption(q,r,"font.size"),fontColor:j.castHoverOption(q,r,"font.color")},{container:this.svgContainer,gd:this.graphDiv})}}f||this.unhover(),a.draw()}},x.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),j.loneUnhover(this.svgContainer))},x.hoverFormatter=function(a,b){if(void 0!==b){var c=this[a];return i.tickText(c,c.c2l(b),"hover").text}}},{"../../components/fx":660,"../../lib/html2unicode":741,"../../lib/show_no_webgl_msg":763,"../../plots/cartesian/axes":789,"../../registry":873,"../cartesian/constants":794,"../cartesian/constraints":796,"./camera":827,"./convert":828,"gl-plot2d":224,"gl-select-box":241,"gl-spikes2d":250,"webgl-context":577}],831:[function(a,b,c){"use strict";function d(a,b){function c(b,c,d,f){var g=o.keyBindingMode;if(!1!==g){var h="rotate"===g,i="pan"===g,k="zoom"===g,m=!!f.control,n=!!f.alt,s=!!f.shift,t=!!(1&b),u=!!(2&b),v=!!(4&b),w=1/a.clientHeight,x=w*(c-p),y=w*(d-q),z=o.flipX?1:-1,A=o.flipY?1:-1,B=e(),C=Math.PI*o.rotateSpeed;if((h&&t&&!m&&!n&&!s||t&&!m&&!n&&s)&&j.rotate(B,z*C*x,-A*C*y,0),(i&&t&&!m&&!n&&!s||u||t&&m&&!n&&!s)&&j.pan(B,-o.translateSpeed*x*l,o.translateSpeed*y*l,0),k&&t&&!m&&!n&&!s||v||t&&!m&&n&&!s){var D=-o.zoomSpeed*y/window.innerHeight*(B-j.lastT())*100;j.pan(B,0,0,l*(Math.exp(D)-1))}return p=c,q=d,r=f,!0}}a=a||document.body,b=b||{};var d=[.01,1/0];"distanceLimits"in b&&(d[0]=b.distanceLimits[0],d[1]=b.distanceLimits[1]),"zoomMin"in b&&(d[0]=b.zoomMin),"zoomMax"in b&&(d[1]=b.zoomMax);var j=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:d}),k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,m=a.clientWidth,n=a.clientHeight,o={keyBindingMode:"rotate",view:j,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:j.modes,tick:function(){var b=e(),c=this.delay,d=b-2*c;j.idle(b-c),j.recalcMatrix(d),j.flush(b-(100+2*c));for(var f=!0,g=j.computedMatrix,h=0;h<16;++h)f=f&&k[h]===g[h],k[h]=g[h];var i=a.clientWidth===m&&a.clientHeight===n;return m=a.clientWidth,n=a.clientHeight,f?!i:(l=Math.exp(j.computedRadius[0]),!0)},lookAt:function(a,b,c){j.lookAt(j.lastT(),a,b,c)},rotate:function(a,b,c){j.rotate(j.lastT(),a,b,c)},pan:function(a,b,c){j.pan(j.lastT(),a,b,c)},translate:function(a,b,c){j.translate(j.lastT(),a,b,c)}};Object.defineProperties(o,{matrix:{get:function(){return j.computedMatrix},set:function(a){return j.setMatrix(j.lastT(),a),j.computedMatrix},enumerable:!0},mode:{get:function(){return j.getMode()},set:function(a){var b=j.computedUp.slice(),c=j.computedEye.slice(),d=j.computedCenter.slice();if(j.setMode(a),"turntable"===a){var f=e();j._active.lookAt(f,c,d,b),j._active.lookAt(f+500,c,d,[0,0,1]),j._active.flush(f)}return j.getMode()},enumerable:!0},center:{get:function(){return j.computedCenter},set:function(a){return j.lookAt(j.lastT(),null,a),j.computedCenter},enumerable:!0},eye:{get:function(){return j.computedEye},set:function(a){return j.lookAt(j.lastT(),a),j.computedEye},enumerable:!0},up:{get:function(){return j.computedUp},set:function(a){return j.lookAt(j.lastT(),null,null,a),j.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(a){return j.setDistance(j.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return j.getDistanceLimits(d)},set:function(a){return j.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var p=0,q=0,r={shift:!1,control:!1,alt:!1,meta:!1};return o.mouseListener=g(a,c),a.addEventListener("touchstart",function(b){var d=i(b.changedTouches[0],a);c(0,d[0],d[1],r),c(1,d[0],d[1],r)}),a.addEventListener("touchmove",function(b){var d=i(b.changedTouches[0],a);c(1,d[0],d[1],r)}),a.addEventListener("touchend",function(){c(0,p,q,r)}),o.wheelListener=h(a,function(a,b){if(!1!==o.keyBindingMode){var c=o.flipX?1:-1,d=o.flipY?1:-1,f=e();if(Math.abs(a)>Math.abs(b))j.rotate(f,0,0,-a*c*Math.PI*o.rotateSpeed/window.innerWidth);else{var g=-o.zoomSpeed*d*b/window.innerHeight*(f-j.lastT())/20;j.pan(f,0,0,l*(Math.exp(g)-1))}}},!0),o}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel"),i=a("mouse-event-offset")},{"3d-view":40,"mouse-change":443,"mouse-event-offset":444,"mouse-wheel":446,"right-now":509}],832:[function(a,b,c){"use strict";var d=a("../../plot_api/edit_types").overrideAll,e=a("../../components/fx/layout_attributes"),f=a("./scene"),g=a("../get_data").getSubplotData,h=a("../../lib"),i=a("../../constants/xmlns_namespaces");c.name="gl3d",c.attr="scene",c.idRoot="scene",c.idRegex=c.attrRegex=h.counterRegex("scene"),c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.baseLayoutAttrOverrides=d({hoverlabel:e.hoverlabel},"plot","nested"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){for(var b=a._fullLayout,c=a._fullData,d=b._subplots.gl3d,e=0;e<d.length;e++){var i=d[e],j=g(c,"gl3d",i),k=b[i],l=k._scene;l||(l=new f({id:i,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),k._scene=l),l.cameraInitial||(l.cameraInitial=h.extendDeep({},k.camera)),l.plot(j,b,a.layout)}},c.clean=function(a,b,c,d){for(var e=d._subplots.gl3d||[],f=0;f<e.length;f++){var g=e[f];!b[g]&&d[g]._scene&&(d[g]._scene.destroy(),d._infolayer&&d._infolayer.selectAll(".annotation-"+g).remove())}},c.toSVG=function(a){for(var b=a._fullLayout,c=b._subplots.gl3d,d=b._size,e=0;e<c.length;e++){var f=b[c[e]],g=f.domain,h=f._scene,j=h.toImage("png");b._glimages.append("svg:image").attr({xmlns:i.svg,"xlink:href":j,x:d.l+d.w*g.x[0],y:d.t+d.h*(1-g.y[1]),width:d.w*(g.x[1]-g.x[0]),height:d.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),h.destroy()}},c.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var b=a.substr(5);return"1"===b&&(b=""),"scene"+b}},c.updateFx=function(a){for(var b=a._subplots.gl3d,c=0;c<b.length;c++){a[b[c]]._scene.updateFx(a.dragmode,a.hovermode)}}},{"../../components/fx/layout_attributes":661,"../../constants/xmlns_namespaces":723,"../../lib":743,"../../plot_api/edit_types":773,"../get_data":826,"./layout/attributes":833,"./layout/defaults":837,"./layout/layout_attributes":838,"./scene":842}],833:[function(a,b,c){"use strict";b.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],834:[function(a,b,c){"use strict";var d=a("../../../components/color"),e=a("../../cartesian/layout_attributes"),f=a("../../../lib/extend").extendFlat,g=a("../../../plot_api/edit_types").overrideAll;b.exports=g({visible:e.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:d.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:e.color,categoryorder:e.categoryorder,categoryarray:e.categoryarray,title:e.title,titlefont:e.titlefont,type:e.type,autorange:e.autorange,rangemode:e.rangemode,range:e.range,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,mirror:e.mirror,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,tickfont:e.tickfont,tickangle:e.tickangle,tickprefix:e.tickprefix,showtickprefix:e.showtickprefix,ticksuffix:e.ticksuffix,showticksuffix:e.showticksuffix,showexponent:e.showexponent,exponentformat:e.exponentformat,separatethousands:e.separatethousands,tickformat:e.tickformat,tickformatstops:e.tickformatstops,hoverformat:e.hoverformat,showline:e.showline,linecolor:e.linecolor,linewidth:e.linewidth,showgrid:e.showgrid,gridcolor:f({},e.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:e.gridwidth,zeroline:e.zeroline,zerolinecolor:e.zerolinecolor,zerolinewidth:e.zerolinewidth},"plot","from-root")},{"../../../components/color":618,"../../../lib/extend":732,"../../../plot_api/edit_types":773,"../../cartesian/layout_attributes":801}],835:[function(a,b,c){"use strict";var d=a("tinycolor2").mix,e=a("../../../lib"),f=a("./axis_attributes"),g=a("../../cartesian/type_defaults"),h=a("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"];b.exports=function(a,b,c){function j(a,b){return e.coerce(k,l,f,a,b)}for(var k,l,m=0;m<i.length;m++){var n=i[m];k=a[n]||{},l=b[n]={_id:n[0]+c.scene,_name:n},g(k,l,j,c.data),h(k,l,j,{font:c.font,letter:n[0],data:c.data,showGrid:!0,bgColor:c.bgColor,calendar:c.calendar},c.fullLayout),j("gridcolor",d(l.color,c.bgColor,13600/187).toRgbString()),j("title",n[0]),l.setScale=e.noop,j("showspikes")&&(j("spikesides"),j("spikethickness"),j("spikecolor",l.color)),j("showaxeslabels"),j("showbackground")&&j("backgroundcolor")}}},{"../../../lib":743,"../../cartesian/axis_defaults":791,"../../cartesian/type_defaults":813,"./axis_attributes":834,tinycolor2:546}],836:[function(a,b,c){"use strict";function d(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}function e(a){var b=new d;return b.merge(a),b}var f=a("../../../lib/html2unicode"),g=a("../../../lib/str2rgbarray"),h=["xaxis","yaxis","zaxis"];d.prototype.merge=function(a){for(var b=this,c=0;c<3;++c){var d=a[h[c]];d.visible?(b.labels[c]=f(d.title),"titlefont"in d&&(d.titlefont.color&&(b.labelColor[c]=g(d.titlefont.color)),d.titlefont.family&&(b.labelFont[c]=d.titlefont.family),d.titlefont.size&&(b.labelSize[c]=d.titlefont.size)),"showline"in d&&(b.lineEnable[c]=d.showline),"linecolor"in d&&(b.lineColor[c]=g(d.linecolor)),"linewidth"in d&&(b.lineWidth[c]=d.linewidth),"showgrid"in d&&(b.gridEnable[c]=d.showgrid),"gridcolor"in d&&(b.gridColor[c]=g(d.gridcolor)),"gridwidth"in d&&(b.gridWidth[c]=d.gridwidth),"log"===d.type?b.zeroEnable[c]=!1:"zeroline"in d&&(b.zeroEnable[c]=d.zeroline),"zerolinecolor"in d&&(b.zeroLineColor[c]=g(d.zerolinecolor)),"zerolinewidth"in d&&(b.zeroLineWidth[c]=d.zerolinewidth),"ticks"in d&&d.ticks?b.lineTickEnable[c]=!0:b.lineTickEnable[c]=!1,"ticklen"in d&&(b.lineTickLength[c]=b._defaultLineTickLength[c]=d.ticklen),"tickcolor"in d&&(b.lineTickColor[c]=g(d.tickcolor)),"tickwidth"in d&&(b.lineTickWidth[c]=d.tickwidth),"tickangle"in d&&(b.tickAngle[c]="auto"===d.tickangle?0:Math.PI*-d.tickangle/180),"showticklabels"in d&&(b.tickEnable[c]=d.showticklabels),"tickfont"in d&&(d.tickfont.color&&(b.tickColor[c]=g(d.tickfont.color)),d.tickfont.family&&(b.tickFont[c]=d.tickfont.family),d.tickfont.size&&(b.tickSize[c]=d.tickfont.size)),"mirror"in d?-1!==["ticks","all","allticks"].indexOf(d.mirror)?(b.lineTickMirror[c]=!0,b.lineMirror[c]=!0):!0===d.mirror?(b.lineTickMirror[c]=!1,b.lineMirror[c]=!0):(b.lineTickMirror[c]=!1,b.lineMirror[c]=!1):b.lineMirror[c]=!1,"showbackground"in d&&!1!==d.showbackground?(b.backgroundEnable[c]=!0,b.backgroundColor[c]=g(d.backgroundcolor)):b.backgroundEnable[c]=!1):(b.tickEnable[c]=!1,b.labelEnable[c]=!1,b.lineEnable[c]=!1,b.lineTickEnable[c]=!1,b.gridEnable[c]=!1,b.zeroEnable[c]=!1,b.backgroundEnable[c]=!1)}},b.exports=e},{"../../../lib/html2unicode":741,"../../../lib/str2rgbarray":765}],837:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=c("bgcolor"),h=f.combine(e,d.paper_bgcolor),j=["up","center","eye"],k=0;k<j.length;k++)c("camera."+j[k]+".x"),c("camera."+j[k]+".y"),c("camera."+j[k]+".z");var l=!!c("aspectratio.x")&&!!c("aspectratio.y")&&!!c("aspectratio.z"),m=l?"manual":"auto",n=c("aspectmode",m);l||(a.aspectratio=b.aspectratio={x:1,y:1,z:1},"manual"===n&&(b.aspectmode="auto"),a.aspectmode=b.aspectmode),i(a,b,{font:d.font,scene:d.id,data:d.fullData,bgColor:h,calendar:d.calendar,fullLayout:d.fullLayout}),g.getComponentMethod("annotations3d","handleDefaults")(a,b,d),c("dragmode",d.getDfltFromLayout("dragmode")),c("hovermode",d.getDfltFromLayout("hovermode"))}var e=a("../../../lib"),f=a("../../../components/color"),g=a("../../../registry"),h=a("../../subplot_defaults"),i=a("./axis_defaults"),j=a("./layout_attributes");b.exports=function(a,b,c){function f(b){if(!g){return e.validate(a[b],j[b])?a[b]:void 0}}var g=b._basePlotModules.length>1;h(a,b,c,{type:"gl3d",attributes:j,handleDefaults:d,fullLayout:b,font:b.font,fullData:c,getDfltFromLayout:f,paper_bgcolor:b.paper_bgcolor,calendar:b.calendar})}},{"../../../components/color":618,"../../../lib":743,"../../../registry":873,"../../subplot_defaults":865,"./axis_defaults":835,"./layout_attributes":838}],838:[function(a,b,c){"use strict";function d(a,b,c){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:b,editType:"camera"},z:{valType:"number",dflt:c,editType:"camera"},editType:"camera"}}var e=a("./axis_attributes"),f=a("../../domain_attributes"),g=a("../../../lib/extend").extendFlat,h=a("../../../lib").counterRegex;b.exports={_arrayAttrRegexps:[h("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:g(d(0,0,1),{}),center:g(d(0,0,0),{}),eye:g(d(1.25,1.25,1.25),{}),editType:"camera"},domain:f({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,
editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:e,yaxis:e,zaxis:e,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],dflt:"turntable",editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":743,"../../../lib/extend":732,"../../domain_attributes":815,"./axis_attributes":834}],839:[function(a,b,c){"use strict";function d(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function e(a){var b=new d;return b.merge(a),b}var f=a("../../../lib/str2rgbarray"),g=["xaxis","yaxis","zaxis"];d.prototype.merge=function(a){for(var b=0;b<3;++b){var c=a[g[b]];c.visible?(this.enabled[b]=c.showspikes,this.colors[b]=f(c.spikecolor),this.drawSides[b]=c.spikesides,this.lineWidth[b]=c.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},b.exports=e},{"../../../lib/str2rgbarray":765}],840:[function(a,b,c){"use strict";function d(a){for(var b=new Array(3),c=0;c<3;++c){for(var d=a[c],e=new Array(d.length),f=0;f<d.length;++f)e[f]=d[f].x;b[c]=e}return b}function e(a){for(var b=a.axesOptions,c=a.glplot.axesPixels,e=a.fullSceneLayout,k=[[],[],[]],l=0;l<3;++l){var m=e[i[l]];if(m._length=(c[l].hi-c[l].lo)*c[l].pixelsPerDataUnit/a.dataScale[l],Math.abs(m._length)===1/0)k[l]=[];else{m.range[0]=c[l].lo/a.dataScale[l],m.range[1]=c[l].hi/a.dataScale[l],m._m=1/(a.dataScale[l]*c[l].pixelsPerDataUnit),m.range[0]===m.range[1]&&(m.range[0]-=1,m.range[1]+=1);var n=m.tickmode;if("auto"===m.tickmode){m.tickmode="linear";var o=m.nticks||g.constrain(m._length/40,4,9);f.autoTicks(m,Math.abs(m.range[1]-m.range[0])/o)}for(var p=f.calcTicks(m),q=0;q<p.length;++q)p[q].x=p[q].x*a.dataScale[l],p[q].text=h(p[q].text);k[l]=p,m.tickmode=n}}b.ticks=k;for(var l=0;l<3;++l){j[l]=.5*(a.glplot.bounds[0][l]+a.glplot.bounds[1][l]);for(var q=0;q<2;++q)b.bounds[q][l]=a.glplot.bounds[q][l]}a.contourLevels=d(k)}b.exports=e;var f=a("../../cartesian/axes"),g=a("../../../lib"),h=a("../../../lib/html2unicode"),i=["xaxis","yaxis","zaxis"],j=[0,0,0]},{"../../../lib":743,"../../../lib/html2unicode":741,"../../cartesian/axes":789}],841:[function(a,b,c){"use strict";function d(a,b){var c,d,e=[0,0,0,0];for(c=0;c<4;++c)for(d=0;d<4;++d)e[d]+=a[4*c+d]*b[c];return e}function e(a,b){return d(a.projection,d(a.view,d(a.model,[b[0],b[1],b[2],1])))}b.exports=e},{}],842:[function(a,b,c){"use strict";function d(a){function b(b,c){var d=a.fullSceneLayout[b];return q.tickText(d,d.d2l(c),"hover").text}var c,d=a.svgContainer,e=a.container.getBoundingClientRect(),f=e.width,g=e.height;d.setAttributeNS(null,"viewBox","0 0 "+f+" "+g),d.setAttributeNS(null,"width",f),d.setAttributeNS(null,"height",g),y(a),a.glplot.axes.update(a.axesOptions);for(var h=Object.keys(a.traces),i=null,j=a.glplot.selection,k=0;k<h.length;++k)c=a.traces[h[k]],"skip"!==c.data.hoverinfo&&c.handlePick(j)&&(i=c),c.setContourLevels&&c.setContourLevels();var l;if(null!==i){var m=v(a.glplot.cameraParams,j.dataCoordinate);c=i.data;var n=j.index,o=r.castHoverinfo(c,a.fullLayout,n),p=b("xaxis",j.traceCoordinate[0]),s=b("yaxis",j.traceCoordinate[1]),t=b("zaxis",j.traceCoordinate[2]);if("all"!==o){var u=o.split("+");-1===u.indexOf("x")&&(p=void 0),-1===u.indexOf("y")&&(s=void 0),-1===u.indexOf("z")&&(t=void 0),-1===u.indexOf("text")&&(j.textLabel=void 0),-1===u.indexOf("name")&&(i.name=void 0)}a.fullSceneLayout.hovermode&&r.loneHover({x:(.5+.5*m[0]/m[3])*f,y:(.5-.5*m[1]/m[3])*g,xLabel:p,yLabel:s,zLabel:t,text:j.textLabel,name:i.name,color:r.castHoverOption(c,n,"bgcolor")||i.color,borderColor:r.castHoverOption(c,n,"bordercolor"),fontFamily:r.castHoverOption(c,n,"font.family"),fontSize:r.castHoverOption(c,n,"font.size"),fontColor:r.castHoverOption(c,n,"font.color")},{container:d,gd:a.graphDiv});var w={x:j.traceCoordinate[0],y:j.traceCoordinate[1],z:j.traceCoordinate[2],data:c._input,fullData:c,curveNumber:c.index,pointNumber:n};r.appendArrayPointValue(w,c,n);var x={points:[w]};j.buttons&&j.distance<5?a.graphDiv.emit("plotly_click",x):a.graphDiv.emit("plotly_hover",x),l=x}else r.loneUnhover(d),a.graphDiv.emit("plotly_unhover",l);a.drawAnnotations(a)}function e(a,b,c,e){var f={canvas:c,gl:e,container:a.container,axes:a.axesOptions,spikes:a.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(a.staticMode){if(!(l||(k=document.createElement("canvas"),l=n({canvas:k,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");f.pixelRatio=a.pixelRatio,f.gl=l,f.canvas=k}try{a.glplot=m(f)}catch(b){t(a)}var g=function(a){if(!1!==a.fullSceneLayout.dragmode){var b={};b[a.id+".camera"]=j(a.camera),a.saveCamera(a.graphDiv.layout),a.graphDiv.emit("plotly_relayout",b)}};if(a.glplot.canvas.addEventListener("mouseup",g.bind(null,a)),a.glplot.canvas.addEventListener("wheel",g.bind(null,a)),a.staticMode||a.glplot.canvas.addEventListener("webglcontextlost",function(a){p.warn("Lost WebGL context."),a.preventDefault()}),!a.camera){var h=a.fullSceneLayout.camera;a.camera=u(a.container,{center:[h.center.x,h.center.y,h.center.z],eye:[h.eye.x,h.eye.y,h.eye.z],up:[h.up.x,h.up.y,h.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return a.glplot.camera=a.camera,a.glplot.oncontextloss=function(){a.recoverContext()},a.glplot.onrender=d.bind(null,a),a.traces={},!0}function f(a,b){var c=document.createElement("div"),d=a.container;this.graphDiv=a.graphDiv;var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute",f.style.top=f.style.left="0px",f.style.width=f.style.height="100%",f.style["z-index"]=20,f.style["pointer-events"]="none",c.appendChild(f),this.svgContainer=f,c.id=a.id,c.style.position="absolute",c.style.top=c.style.left="0px",c.style.width=c.style.height="100%",d.appendChild(c),this.fullLayout=b,this.id=a.id||"scene",this.fullSceneLayout=b[this.id],this.plotArgs=[[],{},{}],this.axesOptions=w(b[this.id]),this.spikeOptions=x(b[this.id]),this.container=c,this.staticMode=!!a.staticPlot,this.pixelRatio=a.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),e(this,b)}function g(a,b,c,d,e){for(var f,g=0;g<b.length;++g)if(Array.isArray(b[g]))for(var h=0;h<b[g].length;++h)f=a.d2l(b[g][h],0,e),!isNaN(f)&&isFinite(f)&&(d[0][c]=Math.min(d[0][c],f),d[1][c]=Math.max(d[1][c],f));else f=a.d2l(b[g],0,e),!isNaN(f)&&isFinite(f)&&(d[0][c]=Math.min(d[0][c],f),d[1][c]=Math.max(d[1][c],f))}function h(a,b,c){var d=a.fullSceneLayout;g(d.xaxis,b.x,0,c,b.xcalendar),g(d.yaxis,b.y,1,c,b.ycalendar),g(d.zaxis,b.z,2,c,b.zcalendar)}function i(a){return[[a.eye.x,a.eye.y,a.eye.z],[a.center.x,a.center.y,a.center.z],[a.up.x,a.up.y,a.up.z]]}function j(a){return{up:{x:a.up[0],y:a.up[1],z:a.up[2]},center:{x:a.center[0],y:a.center[1],z:a.center[2]},eye:{x:a.eye[0],y:a.eye[1],z:a.eye[2]}}}var k,l,m=a("gl-plot3d"),n=a("webgl-context"),o=a("../../registry"),p=a("../../lib"),q=a("../../plots/cartesian/axes"),r=a("../../components/fx"),s=a("../../lib/str2rgbarray"),t=a("../../lib/show_no_webgl_msg"),u=a("./camera"),v=a("./project"),w=a("./layout/convert"),x=a("./layout/spikes"),y=a("./layout/tick_marks"),z=f.prototype;z.recoverContext=function(){function a(){return c.isContextLost()?void requestAnimationFrame(a):e(b,b.fullLayout,d,c)?void b.plot.apply(b,b.plotArgs):void p.error("Catastrophic and unrecoverable WebGL error. Context lost.")}var b=this,c=this.glplot.gl,d=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(a)};var A=["xaxis","yaxis","zaxis"];z.plot=function(a,b,c){if(this.plotArgs=[a,b,c],!this.glplot.contextLost){var d,e,f,g,i,j,k=b[this.id],l=c[this.id];k.bgcolor?this.glplot.clearColor=s(k.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullLayout=b,this.fullSceneLayout=k,this.glplotLayout=k,this.axesOptions.merge(k),this.spikeOptions.merge(k),this.setCamera(k.camera),this.updateFx(k.dragmode,k.hovermode),this.glplot.update({}),this.setConvert(i),a?Array.isArray(a)||(a=[a]):a=[];var m=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(f=0;f<a.length;++f)d=a[f],!0===d.visible&&h(this,d,m);var n=[1,1,1];for(g=0;g<3;++g)m[0][g]>m[1][g]?n[g]=1:m[1][g]===m[0][g]?n[g]=1:n[g]=1/(m[1][g]-m[0][g]);for(this.dataScale=n,this.convertAnnotations(this),f=0;f<a.length;++f)d=a[f],!0===d.visible&&(e=this.traces[d.uid],e?e.update(d):(e=d._module.plot(this,d),this.traces[d.uid]=e),e.name=d.name);var o=Object.keys(this.traces);a:for(f=0;f<o.length;++f){for(g=0;g<a.length;++g)if(a[g].uid===o[f]&&!0===a[g].visible)continue a;e=this.traces[o[f]],e.dispose(),delete this.traces[o[f]]}this.glplot.objects.sort(function(a,b){return a._trace.data.index-b._trace.data.index});var p=[[0,0,0],[0,0,0]],q=[],r={};for(f=0;f<3;++f){if(i=k[A[f]],j=i.type,j in r?(r[j].acc*=n[f],r[j].count+=1):r[j]={acc:n[f],count:1},i.autorange){p[0][f]=1/0,p[1][f]=-1/0;var t=this.glplot.objects,u=this.fullSceneLayout.annotations||[],v=i._name.charAt(0);for(g=0;g<t.length;g++){var w=t[g].bounds;p[0][f]=Math.min(p[0][f],w[0][f]/n[f]),p[1][f]=Math.max(p[1][f],w[1][f]/n[f])}for(g=0;g<u.length;g++){var x=u[g];if(x.visible){var y=i.r2l(x[v]);p[0][f]=Math.min(p[0][f],y),p[1][f]=Math.max(p[1][f],y)}}if("rangemode"in i&&"tozero"===i.rangemode&&(p[0][f]=Math.min(p[0][f],0),p[1][f]=Math.max(p[1][f],0)),p[0][f]>p[1][f])p[0][f]=-1,p[1][f]=1;else{var z=p[1][f]-p[0][f];p[0][f]-=z/32,p[1][f]+=z/32}}else{var B=i.range;p[0][f]=i.r2l(B[0]),p[1][f]=i.r2l(B[1])}p[0][f]===p[1][f]&&(p[0][f]-=1,p[1][f]+=1),q[f]=p[1][f]-p[0][f],this.glplot.bounds[0][f]=p[0][f]*n[f],this.glplot.bounds[1][f]=p[1][f]*n[f]}var C=[1,1,1];for(f=0;f<3;++f){i=k[A[f]],j=i.type;var D=r[j];C[f]=Math.pow(D.acc,1/D.count)/n[f]}var E;if("auto"===k.aspectmode)E=Math.max.apply(null,C)/Math.min.apply(null,C)<=4?C:[1,1,1];else if("cube"===k.aspectmode)E=[1,1,1];else if("data"===k.aspectmode)E=C;else{if("manual"!==k.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var F=k.aspectratio;E=[F.x,F.y,F.z]}k.aspectratio.x=l.aspectratio.x=E[0],k.aspectratio.y=l.aspectratio.y=E[1],k.aspectratio.z=l.aspectratio.z=E[2],this.glplot.aspect=E;var G=k.domain||null,H=b._size||null;if(G&&H){var I=this.container.style;I.position="absolute",I.left=H.l+G.x[0]*H.w+"px",I.top=H.t+(1-G.y[1])*H.h+"px",I.width=H.w*(G.x[1]-G.x[0])+"px",I.height=H.h*(G.y[1]-G.y[0])+"px"}this.glplot.redraw()}},z.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=this.glplot.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},z.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),j(this.glplot.camera)},z.setCamera=function(a){this.glplot.camera.lookAt.apply(this,i(a))},z.saveCamera=function(a){var b=this.getCamera(),c=p.nestedProperty(a,this.id+".camera"),d=c.get(),e=!1;if(void 0===d)e=!0;else for(var f=0;f<3;f++)for(var g=0;g<3;g++)if(!function(a,b,c,d){var e=["up","center","eye"],f=["x","y","z"];return b[e[c]]&&a[e[c]][f[d]]===b[e[c]][f[d]]}(b,d,f,g)){e=!0;break}return e&&c.set(b),e},z.updateFx=function(a,b){var c=this.camera;c&&("orbit"===a?(c.mode="orbit",c.keyBindingMode="rotate"):"turntable"===a?(c.up=[0,0,1],c.mode="turntable",c.keyBindingMode="rotate"):c.keyBindingMode=a),this.fullSceneLayout.hovermode=b},z.toImage=function(a){a||(a="png"),this.staticMode&&this.container.appendChild(k),this.glplot.redraw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var f=0,g=d-1;f<g;++f,--g)for(var h=0;h<c;++h)for(var i=0;i<4;++i){var j=e[4*(c*f+h)+i];e[4*(c*f+h)+i]=e[4*(c*g+h)+i],e[4*(c*g+h)+i]=j}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(k),o},z.setConvert=function(){for(var a=0;a<3;a++){var b=this.fullSceneLayout[A[a]];q.setConvert(b,this.fullLayout),b.setScale=p.noop}},b.exports=f},{"../../components/fx":660,"../../lib":743,"../../lib/show_no_webgl_msg":763,"../../lib/str2rgbarray":765,"../../plots/cartesian/axes":789,"../../registry":873,"./camera":831,"./layout/convert":836,"./layout/spikes":839,"./layout/tick_marks":840,"./project":841,"gl-plot3d":226,"webgl-context":577}],843:[function(a,b,c){"use strict";var d=a("./font_attributes"),e=a("../components/color/attributes"),f=d({editType:"calc"});f.family.dflt='"Open Sans", verdana, arial, sans-serif',f.size.dflt=12,f.color.dflt=e.defaultLine,b.exports={font:f,title:{valType:"string",editType:"layoutstyle"},titlefont:d({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"none"},height:{valType:"number",min:10,dflt:450,editType:"none"},margin:{l:{valType:"number",min:0,dflt:80,editType:"calc"},r:{valType:"number",min:0,dflt:80,editType:"calc"},t:{valType:"number",min:0,dflt:100,editType:"calc"},b:{valType:"number",min:0,dflt:80,editType:"calc"},pad:{valType:"number",min:0,dflt:0,editType:"calc"},autoexpand:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},paper_bgcolor:{valType:"color",dflt:e.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:e.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:e.defaults,editType:"calc"}}},{"../components/color/attributes":617,"./font_attributes":816}],844:[function(a,b,c){"use strict";b.exports={styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),mapOnErrorMsg:"Mapbox error."}},{}],845:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){var c=a.split(" "),e=c[0],f=c[1],g=Array.isArray(b)?d.mean(b):b,h=.5+g/100,i=1.5+g/100,j=["",""],k=[0,0];switch(e){case"top":j[0]="top",k[1]=-i;break;case"bottom":j[0]="bottom",k[1]=i}switch(f){case"left":j[1]="right",k[0]=-h;break;case"right":j[1]="left",k[0]=h}var l;return l=j[0]&&j[1]?j.join("-"):j[0]?j[0]:j[1]?j[1]:"center",{anchor:l,offset:k}}},{"../../lib":743}],846:[function(a,b,c){"use strict";function d(a,b){var c=a._fullLayout,d=a._context;if(""===d.mapboxAccessToken)return"";for(var e=d.mapboxAccessToken,f=0;f<b.length;f++){var g=c[b[f]];if(g.accesstoken){e=g.accesstoken;break}}if(!e)throw new Error(j.noAccessTokenErrorMsg);return e}var e=a("mapbox-gl"),f=a("../../lib"),g=a("../../plots/get_data").getSubplotCalcData,h=a("../../constants/xmlns_namespaces"),i=a("./mapbox"),j=a("./constants");c.name="mapbox",c.attr="subplot",c.idRoot="mapbox",c.idRegex=c.attrRegex=f.counterRegex("mapbox"),c.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},c.layoutAttributes=a("./layout_attributes"),c.supplyLayoutDefaults=a("./layout_defaults"),c.plot=function(a){var b=a._fullLayout,c=a.calcdata,h=b._subplots.mapbox,j=d(a,h);e.accessToken=j;for(var k=0;k<h.length;k++){var l=h[k],m=g(c,"mapbox",l),n=b[l],o=n._subplot;n.accesstoken=j,o||(o=i({gd:a,container:b._glcontainer.node(),id:l,fullLayout:b,staticPlot:a._context.staticPlot}),b[l]._subplot=o),o.viewInitial||(o.viewInitial={center:f.extendFlat({},n.center),zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),o.plot(m,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=d._subplots.mapbox||[],f=0;f<e.length;f++){var g=e[f];!b[g]&&d[g]._subplot&&d[g]._subplot.destroy()}},c.toSVG=function(a){for(var b=a._fullLayout,c=b._subplots.mapbox,d=b._size,e=0;e<c.length;e++){var f=b[c[e]],g=f.domain,i=f._subplot,j=i.toImage("png");b._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":j,x:d.l+d.w*g.x[0],y:d.t+d.h*(1-g.y[1]),width:d.w*(g.x[1]-g.x[0]),height:d.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),i.destroy()}},c.updateFx=function(a){for(var b=a._subplots.mapbox,c=0;c<b.length;c++){a[b[c]]._subplot.updateFx(a)}}},{"../../constants/xmlns_namespaces":723,"../../lib":743,"../../plots/get_data":826,"./constants":844,"./layout_attributes":848,"./layout_defaults":849,"./mapbox":850,"mapbox-gl":334}],847:[function(a,b,c){"use strict";function d(a,b){this.mapbox=a,this.map=a.map,this.uid=a.uid+"-layer"+b,this.idSource=this.uid+"-source",this.idLayer=this.uid+"-layer",this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}function e(a){var b=a.source;return h.isPlainObject(b)||"string"==typeof b&&b.length>0}function f(a){var b={},c={};switch(a.type){case"circle":h.extendFlat(c,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case"line":h.extendFlat(c,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity});break;case"fill":h.extendFlat(c,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case"symbol":var d=a.symbol,e=i(d.textposition,d.iconsize);h.extendFlat(b,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":e.anchor,"text-offset":e.offset}),h.extendFlat(c,{"icon-color":a.color,"text-color":d.textfont.color,"text-opacity":a.opacity})}return{layout:b,paint:c}}function g(a){var b,c=a.sourcetype,d=a.source,e={type:c},f="string"==typeof d;return"geojson"===c?b="data":"vector"===c&&(b=f?"url":"tiles"),e[b]=d,e}var h=a("../../lib"),i=a("./convert_text_opts"),j=d.prototype;j.update=function(a){this.visible?this.needsNewSource(a)?(this.updateLayer(a),this.updateSource(a)):this.needsNewLayer(a)&&this.updateLayer(a):(this.updateSource(a),this.updateLayer(a)),this.updateStyle(a),this.visible=e(a)},j.needsNewSource=function(a){return this.sourceType!==a.sourcetype||this.source!==a.source||this.layerType!==a.type},j.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==a.below},j.updateSource=function(a){var b=this.map;if(b.getSource(this.idSource)&&b.removeSource(this.idSource),this.sourceType=a.sourcetype,this.source=a.source,e(a)){var c=g(a);b.addSource(this.idSource,c)}},j.updateLayer=function(a){var b=this.map;if(b.getLayer(this.idLayer)&&b.removeLayer(this.idLayer),this.layerType=a.type,e(a)){b.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type},a.below);var c={visibility:"visible"};this.mapbox.setOptions(this.idLayer,"setLayoutProperty",c)}},j.updateStyle=function(a){var b=f(a);e(a)&&(this.mapbox.setOptions(this.idLayer,"setLayoutProperty",b.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",b.paint))},j.dispose=function(){var a=this.map;a.removeLayer(this.idLayer),a.removeSource(this.idSource)},b.exports=function(a,b,c){var e=new d(a,b);return e.update(c),e}},{"../../lib":743,"./convert_text_opts":845}],848:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color").defaultLine,f=a("../domain_attributes"),g=a("../font_attributes"),h=a("../../traces/scatter/attributes").textposition,i=a("../../plot_api/edit_types").overrideAll,j=g({});j.family.dflt="Open Sans Regular, Arial Unicode MS Regular",b.exports=i({_arrayAttrRegexps:[d.counterRegex("mapbox",".layers",!0)],domain:f({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],dflt:"basic"},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:{_isLinkedToArray:"layer",sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:e},opacity:{valType:"number",min:0,max:1,dflt:1},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2}},fill:{outlinecolor:{valType:"color",dflt:e}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},textfont:j,textposition:d.extendFlat({},h,{arrayOk:!1})}}},"plot","from-root")},{"../../components/color":618,"../../lib":743,"../../plot_api/edit_types":773,"../../traces/scatter/attributes":1066,"../domain_attributes":815,"../font_attributes":816}],849:[function(a,b,c){"use strict";function d(a,b,c){c("accesstoken"),c("style"),c("center.lon"),c("center.lat"),c("zoom"),c("bearing"),c("pitch"),e(a,b),b._input=a}function e(a,b){function c(a,b){return f.coerce(d,e,h.layers,a,b)}for(var d,e,g=a.layers||[],i=b.layers=[],j=0;j<g.length;j++)if(d=g[j],e={},f.isPlainObject(d)){var k=c("sourcetype");c("source"),"vector"===k&&c("sourcelayer");var l=c("type");c("below"),c("color"),c("opacity"),"circle"===l&&c("circle.radius"),"line"===l&&c("line.width"),"fill"===l&&c("fill.outlinecolor"),"symbol"===l&&(c("symbol.icon"),c("symbol.iconsize"),c("symbol.text"),f.coerceFont(c,"symbol.textfont"),c("symbol.textposition")),e._index=j,i.push(e)}}var f=a("../../lib"),g=a("../subplot_defaults"),h=a("./layout_attributes");b.exports=function(a,b,c){g(a,b,c,{type:"mapbox",attributes:h,handleDefaults:d,partition:"y"})}},{"../../lib":743,"../subplot_defaults":865,"./layout_attributes":848}],850:[function(a,b,c){"use strict";function d(a){this.id=a.id,this.gd=a.gd,this.container=a.container,this.isStatic=a.staticPlot;var b=a.fullLayout;this.uid=b._uid+"-"+this.id,this.opts=b[this.id],this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(b),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[]}function e(a){var b=n.style.values,c=n.style.dflt,d={};return j.isPlainObject(a)?(d.id=a.id,d.style=a):"string"==typeof a?(d.id=a,d.style=-1!==b.indexOf(a)?f(a):a):(d.id=c,d.style=f(c)),d}function f(a){return m.styleUrlPrefix+a+"-"+m.styleUrlSuffix}function g(a){return[a.lon,a.lat]}var h=a("mapbox-gl"),i=a("../../components/fx"),j=a("../../lib"),k=a("../../components/dragelement"),l=a("../cartesian/select"),m=a("./constants"),n=a("./layout_attributes"),o=a("./layers"),p=d.prototype;b.exports=function(a){return new d(a)},p.plot=function(a,b,c){var d=this,e=d.opts=b[this.id];d.map&&e.accesstoken!==d.accessToken&&(d.map.remove(),d.map=null,d.styleObj=null,d.traceHash=[],d.layerList={});var f;f=d.map?new Promise(function(c,e){d.updateMap(a,b,c,e)}):new Promise(function(c,e){d.createMap(a,b,c,e)}),c.push(f)},p.createMap=function(a,b,c,d){function f(){i.loneUnhover(b._toppaper)}var k=this,l=k.gd,n=k.opts,o=k.styleObj=e(n.style);k.accessToken=n.accesstoken;var p=k.map=new h.Map({container:k.div,style:o.style,center:g(n.center),zoom:n.zoom,bearing:n.bearing,pitch:n.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1}),q=m.controlContainerClassName,r=k.div.getElementsByClassName(q)[0];k.div.removeChild(r),p._canvas.canvas.style.left="0px",p._canvas.canvas.style.top="0px",k.rejectOnError(d),p.once("load",function(){k.updateData(a),k.updateLayout(b),k.resolveOnRender(c)}),k.isStatic||(p.on("moveend",function(a){if(k.map){var b=k.getView();if(n._input.center=n.center=b.center,n._input.zoom=n.zoom=b.zoom,n._input.bearing=n.bearing=b.bearing,n._input.pitch=n.pitch=b.pitch,a.originalEvent){var c={};c[k.id]=j.extendFlat({},b),l.emit("plotly_relayout",c)}}}),p.on("mousemove",function(a){var b=k.div.getBoundingClientRect();a.clientX=a.point.x+b.left,a.clientY=a.point.y+b.top,a.target.getBoundingClientRect=function(){return b},k.xaxis.p2c=function(){return a.lngLat.lng},k.yaxis.p2c=function(){return a.lngLat.lat},i.hover(l,a,k.id)}),p.on("click",function(a){i.click(l,a.originalEvent)}),p.on("dragstart",f),p.on("zoomstart",f),p.on("dblclick",function(){var a=k.viewInitial;p.setCenter(g(a.center)),p.setZoom(a.zoom),p.setBearing(a.bearing),p.setPitch(a.pitch);var b=k.getView();n._input.center=n.center=b.center,n._input.zoom=n.zoom=b.zoom,n._input.bearing=n.bearing=b.bearing,n._input.pitch=n.pitch=b.pitch,l.emit("plotly_doubleclick",null)}))},p.updateMap=function(a,b,c,d){var f=this,g=f.map;f.rejectOnError(d);var h=e(f.opts.style);f.styleObj.id!==h.id?(f.styleObj=h,g.setStyle(h.style),g.style.once("load",function(){f.traceHash={},f.updateData(a),f.updateLayout(b),f.resolveOnRender(c)})):(f.updateData(a),f.updateLayout(b),f.resolveOnRender(c))},p.updateData=function(a){var b,c,d,e,f=this.traceHash;for(d=0;d<a.length;d++){var g=a[d];c=g[0].trace,b=f[c.uid],b?b.update(g):c._module&&(f[c.uid]=c._module.plot(this,g))}var h=Object.keys(f);a:for(d=0;d<h.length;d++){var i=h[d];for(e=0;e<a.length;e++)if(c=a[e][0].trace,i===c.uid)continue a;b=f[i],b.dispose(),delete f[i]}},p.updateLayout=function(a){var b=this.map,c=this.opts;b.setCenter(g(c.center)),b.setZoom(c.zoom),b.setBearing(c.bearing),b.setPitch(c.pitch),this.updateLayers(),this.updateFramework(a),this.updateFx(a),this.map.resize()},p.resolveOnRender=function(a){var b=this.map;b.on("render",function c(){b.loaded()&&(b.off("render",c),a())})},p.rejectOnError=function(a){function b(){a(new Error(m.mapOnErrorMsg))}var c=this.map;c.once("error",b),c.once("style.error",b),c.once("source.error",b),c.once("tile.error",b),c.once("layer.error",b)},p.createFramework=function(a){var b=this,c=b.div=document.createElement("div");c.id=b.uid,c.style.position="absolute",b.container.appendChild(c),b.xaxis={_id:"x",c2p:function(a){return b.project(a).x}},b.yaxis={_id:"y",c2p:function(a){return b.project(a).y}},b.updateFramework(a)},p.updateFx=function(a){function b(a){var b=c.map.unproject(a);return[b.lng,b.lat]}var c=this,d=c.map,e=c.gd;if(!c.isStatic){var f,g=a.dragmode;if(f="select"===g?function(a,d){(a.range={})[c.id]=[b([d.xmin,d.ymin]),b([d.xmax,d.ymax])]}:function(a,d,e){(a.lassoPoints={})[c.id]=e.filtered.map(b)},"select"===g||"lasso"===g){d.dragPan.disable();var h={element:c.div,gd:e,plotinfo:{xaxis:c.xaxis,yaxis:c.yaxis,fillRangeItems:f},xaxes:[c.xaxis],yaxes:[c.yaxis],subplot:c.id};h.prepFn=function(a,b,c){l(a,b,c,h,g)},k.init(h)}else d.dragPan.enable(),c.div.onmousedown=null}},p.updateFramework=function(a){var b=a[this.id].domain,c=a._size,d=this.div.style;d.width=c.w*(b.x[1]-b.x[0])+"px",d.height=c.h*(b.y[1]-b.y[0])+"px",d.left=c.l+b.x[0]*c.w+"px",d.top=c.t+(1-b.y[1])*c.h+"px",this.xaxis._offset=c.l+b.x[0]*c.w,this.xaxis._length=c.w*(b.x[1]-b.x[0]),this.yaxis._offset=c.t+(1-b.y[1])*c.h,this.yaxis._length=c.h*(b.y[1]-b.y[0])},p.updateLayers=function(){var a,b=this.opts,c=b.layers,d=this.layerList;if(c.length!==d.length){for(a=0;a<d.length;a++)d[a].dispose();for(d=this.layerList=[],a=0;a<c.length;a++)d.push(o(this,a,c[a]))}else for(a=0;a<c.length;a++)d[a].update(c[a])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},p.toImage=function(){return this.map.getCanvas().toDataURL()},p.initSource=function(a){var b={type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[]}}};return this.map.addSource(a,b)},p.setSourceData=function(a,b){this.map.getSource(a).setData(b)},p.setOptions=function(a,b,c){for(var d=this.map,e=Object.keys(c),f=0;f<e.length;f++){var g=e[f];d[b](a,g,c[g])}},p.project=function(a){return this.map.project(new h.LngLat(a[0],a[1]))},p.getView=function(){var a=this.map,b=a.getCenter();return{center:{lon:b.lng,lat:b.lat},zoom:a.getZoom(),bearing:a.getBearing(),pitch:a.getPitch()}}},{"../../components/dragelement":640,"../../components/fx":660,"../../lib":743,"../cartesian/select":807,"./constants":844,"./layers":847,"./layout_attributes":848,"mapbox-gl":334}],851:[function(a,b,c){"use strict";b.exports={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"}},{}],852:[function(a,b,c){"use strict";function d(a,b){b.text("");var c=b.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(a._context.linkText+" "+String.fromCharCode(187));if(a._context.sendData)c.on("click",function(){v.sendDataToCloud(a)});else{var d=window.location.pathname.split("/"),e=window.location.search;c.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+d[2].split(".")[0]+"/"+d[1]+e})}}function e(){var a,b,c={};if(!C){C=[];var d=p.subplotsRegistry;for(var e in d){var f=d[e],g=f.attr;if(g&&(C.push(e),Array.isArray(g)))for(b=0;b<g.length;b++)r.pushUnique(C,g[b])}}for(a=0;a<C.length;a++)c[C[a]]=[];return c}function f(a,b){var c,d,e=a.trace,f=e._arrayAttrs,g={};for(c=0;c<f.length;c++)d=f[c],g[d]=r.nestedProperty(e,d).get().slice();for(a.trace=b,c=0;c<f.length;c++)d=f[c],r.nestedProperty(a.trace,d).set(g[d])}function g(a){function b(a){for(var b=!0,c=0;c<D.length;c++){var f=D[c];e[f]||(a[f]?e[f]=a[f]:b=!1)}b&&(d=!0)}for(var c=a._context.locale,d=!1,e={},f=0;f<2;f++){for(var g=a._context.locales,h=0;h<2;h++){var i=(g[c]||{}).format;if(i&&(b(i),d))break;g=p.localeRegistry}var j=c.split("-")[0];if(d||j===c)break;c=j}return d||b(p.localeRegistry.en.format),e}function h(a,b){return a.decimal=b.charAt(0),a.thousands=b.charAt(1),l.locale(a)}function i(a,b,c,d){for(var e=a.transforms,f=[a],g=0;g<e.length;g++){var h=e[g],i=z[h.type];i&&i.transform&&(f=i.transform(f,{transform:h,fullTrace:a,fullData:b,layout:c,fullLayout:d,transformIndex:g}))}return f}function j(a){var b,c={left:0,right:0,bottom:0,top:0};if(a)for(b in a)a.hasOwnProperty(b)&&(c.left+=a[b].left||0,c.right+=a[b].right||0,c.bottom+=a[b].bottom||0,c.top+=a[b].top||0);return c}function k(a){for(var b=0;b<a.length;b++){a[b]._categories=a[b]._initialCategories.slice(),a[b]._categoriesMap={};for(var c=0;c<a[b]._categories.length;c++)a[b]._categoriesMap[a[b]._categories[c]]=c}}var l=a("d3"),m=a("fast-isnumeric"),n=a("../plotly"),o=a("../plot_api/plot_schema"),p=a("../registry"),q=a("../plots/cartesian/axis_ids"),r=a("../lib"),s=r._,t=a("../components/color"),u=a("../constants/numerical").BADNUM,v=b.exports={},w=a("./animation_attributes"),x=a("./frame_attributes"),y=r.relinkPrivateKeys;r.extendFlat(v,p),v.attributes=a("./attributes"),v.attributes.type.values=v.allTypes,v.fontAttrs=a("./font_attributes"),v.layoutAttributes=a("./layout_attributes"),v.fontWeight="normal";var z=v.transformsRegistry,A=a("../components/errorbars"),B=a("./command");v.executeAPICommand=B.executeAPICommand,v.computeAPICommandBindings=B.computeAPICommandBindings,v.manageCommandObserver=B.manageCommandObserver,v.hasSimpleAPICommandBindings=B.hasSimpleAPICommandBindings,v.redrawText=function(a){if(a=r.getGraphDiv(a),!(a.data&&a.data[0]&&a.data[0].r))return new Promise(function(b){setTimeout(function(){p.getComponentMethod("annotations","draw")(a),p.getComponentMethod("legend","draw")(a),(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()}),b(v.previousPromises(a))},300)})},v.resize=function(a){return a=r.getGraphDiv(a),new Promise(function(b,c){a&&!function(a){var b=window.getComputedStyle(a).display;return!b||"none"===b}(a)||c(new Error("Resize must be passed a displayed plot div element.")),
a._redrawTimer&&clearTimeout(a._redrawTimer),a._redrawTimer=setTimeout(function(){if(a.layout.width&&a.layout.height)return void b(a);delete a.layout.width,delete a.layout.height;var c=a.changed;a.autoplay=!0,n.relayout(a,{autosize:!0}).then(function(){a.changed=c,b(a)})},100)})},v.previousPromises=function(a){if((a._promises||[]).length)return Promise.all(a._promises).then(function(){a._promises=[]})},v.addLinks=function(a){if(a._context.showLink||a._context.showSources){var b=a._fullLayout,c=b._paper.selectAll("text.js-plot-link-container").data([0]);c.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var a=l.select(this);a.append("tspan").classed("js-link-to-tool",!0),a.append("tspan").classed("js-link-spacer",!0),a.append("tspan").classed("js-sourcelinks",!0)});var e=c.node(),f={y:b._paper.attr("height")-9};document.body.contains(e)&&e.getComputedTextLength()>=b.width-20?(f["text-anchor"]="start",f.x=5):(f["text-anchor"]="end",f.x=b._paper.attr("width")-7),c.attr(f);var g=c.select(".js-link-to-tool"),h=c.select(".js-link-spacer"),i=c.select(".js-sourcelinks");a._context.showSources&&a._context.showSources(a),a._context.showLink&&d(a,g),h.text(g.text()&&i.text()?" - ":"")}},v.sendDataToCloud=function(a){a.emit("plotly_beforeexport");var b=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",c=l.select(a).append("div").attr("id","hiddenform").style("display","none"),d=c.append("form").attr({action:b+"/external",method:"post",target:"_blank"});return d.append("input").attr({type:"text",name:"data"}).node().value=v.graphJson(a,!1,"keepdata"),d.node().submit(),c.remove(),a.emit("plotly_afterexport"),!1},v.supplyDefaults=function(a){var b,c=a._fullLayout||{},d=a._fullLayout={},i=a.layout||{},j=a._fullData||[],k=a._fullData=[],l=a.data||[];a._transitionData||v.createTransitionData(a),d._dfltTitle={plot:s(a,"Click to enter Plot title"),x:s(a,"Click to enter X axis title"),y:s(a,"Click to enter Y axis title"),colorbar:s(a,"Click to enter Colorscale title"),annotation:s(a,"new text")},d._traceWord=s(a,"trace");var m=g(a);if(c._initialAutoSizeIsDone){var n=c.width,o=c.height;v.supplyLayoutGlobalDefaults(i,d,m),i.width||(d.width=n),i.height||(d.height=o)}else{v.supplyLayoutGlobalDefaults(i,d,m);var p=!i.width||!i.height,r=d.autosize,t=a._context&&a._context.autosizable;p&&(r||t)?v.plotAutoSize(a,i,d):p&&v.sanitizeMargins(a),!r&&p&&(i.width=d.width,i.height=d.height)}d._d3locale=h(m,d.separators),d._initialAutoSizeIsDone=!0,d._dataLength=l.length,d._modules=[],d._basePlotModules=[],d._subplots=e(),d._globalTransforms=(a._context||{}).globalTransforms,v.supplyDataDefaults(l,k,i,d),d._has=v._hasPlotType.bind(d);var u=d._modules;for(b=0;b<u.length;b++){var w=u[b];w.cleanData&&w.cleanData(k)}if(j.length===l.length)for(b=0;b<k.length;b++)y(k[b],j[b]);v.supplyLayoutModuleDefaults(i,d,k,a._transitionData),d._hasCartesian=d._has("cartesian"),d._hasGeo=d._has("geo"),d._hasGL3D=d._has("gl3d"),d._hasGL2D=d._has("gl2d"),d._hasTernary=d._has("ternary"),d._hasPie=d._has("pie"),v.cleanPlot(k,d,j,c),v.linkSubplots(k,d,j,c),y(d,c),v.doAutoMargin(a);var x=q.list(a);for(b=0;b<x.length;b++){x[b].setScale()}if((a.calcdata||[]).length===k.length)for(b=0;b<k.length;b++){var z=k[b],A=a.calcdata[b][0];A&&A.trace&&(A.trace._hasCalcTransform?f(A,z):A.trace=z)}};var C,D=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];v.createTransitionData=function(a){a._transitionData||(a._transitionData={}),a._transitionData._frames||(a._transitionData._frames=[]),a._transitionData._frameHash||(a._transitionData._frameHash={}),a._transitionData._counter||(a._transitionData._counter=0),a._transitionData._interruptCallbacks||(a._transitionData._interruptCallbacks=[])},v._hasPlotType=function(a){var b,c=this._basePlotModules||[];for(b=0;b<c.length;b++){if(c[b].name===a)return!0}var d=this._modules||[];for(b=0;b<d.length;b++){var e=d[b];if(e.categories&&e.categories.indexOf(a)>=0)return!0}return!1},v.cleanPlot=function(a,b,c,d){var e,f,g=d._basePlotModules||[];for(e=0;e<g.length;e++){var h=g[e];h.clean&&h.clean(a,b,c,d)}var i=!!d._paper,j=!!d._infolayer,k=d._has&&d._has("gl"),l=b._has&&b._has("gl");k&&!l&&void 0!==d._glcontainer&&(d._glcontainer.selectAll(".gl-canvas").remove(),d._glcanvas=null);a:for(e=0;e<c.length;e++){var m=c[e],n=m.uid;for(f=0;f<a.length;f++){var o=a[f];if(n===o.uid)continue a}var p=".hm"+n+",.contour"+n+",.carpet"+n+",#clip"+n+",.trace"+n;i&&d._paper.selectAll(p).remove(),j&&(d._infolayer.selectAll(".cb"+n).remove(),d._infolayer.selectAll("g.rangeslider-container").selectAll(p).remove())}d._zoomlayer&&d._zoomlayer.selectAll(".select-outline").remove()},v.linkSubplots=function(a,b,c,d){var e,f,g,h,i=d._plots||{},j=b._plots={},k=b._subplots,l={_fullData:a,_fullLayout:b},m=k.cartesian.concat(k.gl2d||[]);for(var n in k)k[n].sort(r.subplotSort);for(e=0;e<m.length;e++){g=m[e];var o,p=i[g],s=q.getFromId(l,g,"x"),t=q.getFromId(l,g,"y");for(p?(o=j[g]=p,o.xaxis.layer!==s.layer&&(o.xlines.attr("d",null),o.xaxislayer.selectAll("*").remove()),o.yaxis.layer!==t.layer&&(o.ylines.attr("d",null),o.yaxislayer.selectAll("*").remove())):(o=j[g]={},o.id=g),o.xaxis=s,o.yaxis=t,o._hasClipOnAxisFalse=!1,f=0;f<a.length;f++){var u=a[f];if(u.xaxis===o.xaxis._id&&u.yaxis===o.yaxis._id&&!1===u.cliponaxis){o._hasClipOnAxisFalse=!0;break}}}var v=q.list(l,null,!0);for(e=0;e<v.length;e++){h=v[e];var w=null;h.overlaying&&(w=q.getFromId(l,h.overlaying))&&w.overlaying&&(h.overlaying=!1,w=null),h._mainAxis=w||h,w&&(h.domain=w.domain.slice()),h._anchorAxis="free"===h.anchor?null:q.getFromId(l,h.anchor)}for(e=0;e<v.length;e++){h=v[e];var x="x"===h._id.charAt(0),y=h._mainAxis._anchorAxis,z="",A="",B="";if(y&&(B=y._mainAxis._id,z=x?h._id+B:B+h._id),!z||-1===m.indexOf(z))for(z="",f=0;f<m.length;f++){g=m[f];var C=g.indexOf("y"),D=x?g.substr(0,C):g.substr(C),E=x?g.substr(C):g.substr(0,C);if(D===h._id){A||(A=g);var F=q.getFromId(l,E);if(B&&F.overlaying===B){z=g;break}}}h._mainSubplot=z||A}},v.clearExpandedTraceDefaultColors=function(a){function b(a,b,e,f){d[f]=b,d.length=f+1,"color"===a.valType&&void 0===a.dflt&&c.push(d.join("."))}var c,d,e;for(d=[],c=a._module._colorAttrs,c||(a._module._colorAttrs=c=[],o.crawl(a._module.attributes,b)),e=0;e<c.length;e++){r.nestedProperty(a,"_input."+c[e]).get()||r.nestedProperty(a,c[e]).set(null)}},v.supplyDataDefaults=function(a,b,c,d){function e(a){b.push(a);var c=a._module;c&&(!0===a.visible&&r.pushUnique(j,c),r.pushUnique(k,a._module.basePlotModule),l++,!1!==a._input.visible&&m++)}var f,g,h,j=d._modules,k=d._basePlotModules,l=0,m=0;d._transformModules=[];var n={},o=[];for(f=0;f<a.length;f++){if(h=a[f],g=v.supplyTraceDefaults(h,m,d,f),g.index=f,g._input=h,g._expandedIndex=l,g.transforms&&g.transforms.length)for(var q=i(g,b,c,d),s=0;s<q.length;s++){var t=q[s],u=v.supplyTraceDefaults(t,l,d,f);y(u,t),t.uid=u.uid=g.uid+s,u.index=f,u._input=h,u._fullInput=g,u._expandedIndex=l,u._expandedInput=t,e(u)}else g._fullInput=g,g._expandedInput=g,e(g);p.traceIs(g,"carpetAxis")&&(n[g.carpet]=g),p.traceIs(g,"carpetDependent")&&o.push(f)}for(f=0;f<o.length;f++)if(g=b[o[f]],g.visible){var w=n[g.carpet];g._carpet=w,w&&w.visible?(g.xaxis=w.xaxis,g.yaxis=w.yaxis):g.visible=!1}},v.supplyAnimationDefaults=function(a){function b(b,c){return r.coerce(a||{},d,w,b,c)}a=a||{};var c,d={};if(b("mode"),b("direction"),b("fromcurrent"),Array.isArray(a.frame))for(d.frame=[],c=0;c<a.frame.length;c++)d.frame[c]=v.supplyAnimationFrameDefaults(a.frame[c]||{});else d.frame=v.supplyAnimationFrameDefaults(a.frame||{});if(Array.isArray(a.transition))for(d.transition=[],c=0;c<a.transition.length;c++)d.transition[c]=v.supplyAnimationTransitionDefaults(a.transition[c]||{});else d.transition=v.supplyAnimationTransitionDefaults(a.transition||{});return d},v.supplyAnimationFrameDefaults=function(a){function b(b,d){return r.coerce(a||{},c,w.frame,b,d)}var c={};return b("duration"),b("redraw"),c},v.supplyAnimationTransitionDefaults=function(a){function b(b,d){return r.coerce(a||{},c,w.transition,b,d)}var c={};return b("duration"),b("easing"),c},v.supplyFrameDefaults=function(a){function b(b,d){return r.coerce(a,c,x,b,d)}var c={};return b("group"),b("name"),b("traces"),b("baseframe"),b("data"),b("layout"),c},v.supplyTraceDefaults=function(a,b,c,d){function e(b,c){return r.coerce(a,h,v.attributes,b,c)}var f,g=c.colorway||t.defaults,h={},i=g[b%g.length],j=e("visible");e("type"),e("uid"),e("name",c._traceWord+" "+d);var k=v.getModule(h);if(h._module=k,k){var l=k.basePlotModule,m=l.attr;if(m){var n=c._subplots,o=l.attributes,q="";if("gl2d"!==l.name||j){if(Array.isArray(m))for(f=0;f<m.length;f++){var s=m[f],u=r.coerce(a,h,o,s);n[s]&&r.pushUnique(n[s],u),q+=u}else q=r.coerce(a,h,o,m);n[l.name]&&r.pushUnique(n[l.name],q)}}}return j&&(e("customdata"),e("ids"),v.traceIs(h,"showLegend")&&(e("showlegend"),e("legendgroup")),p.getComponentMethod("fx","supplyDefaults")(a,h,i,c),k&&(k.supplyDefaults(a,h,i,c),r.coerceHoverinfo(a,h,c)),v.traceIs(h,"noOpacity")||e("opacity"),v.traceIs(h,"notLegendIsolatable")&&(h.visible=!!h.visible),k&&k.selectPoints&&e("selectedpoints"),v.supplyTransformDefaults(a,h,c)),h},v.supplyTransformDefaults=function(a,b,c){var d=c._globalTransforms||[],e=c._transformModules||[];if(Array.isArray(a.transforms)||0!==d.length)for(var f=a.transforms||[],g=d.concat(f),h=b.transforms=[],i=0;i<g.length;i++){var j,k=g[i],l=k.type,m=z[l],n=!(k._module&&k._module===m),o=m&&"function"==typeof m.transform;m||r.warn("Unrecognized transform type "+l+"."),m&&m.supplyDefaults&&(n||o)?(j=m.supplyDefaults(k,b,c,a),j.type=l,j._module=m,r.pushUnique(e,m)):j=r.extendFlat({},k),h.push(j)}},v.supplyLayoutGlobalDefaults=function(a,b,c){function d(c,d){return r.coerce(a,b,v.layoutAttributes,c,d)}var e=r.coerceFont(d,"font");d("title",b._dfltTitle.plot),r.coerceFont(d,"titlefont",{family:e.family,size:Math.round(1.4*e.size),color:e.color}),d("autosize",!(a.width&&a.height)),d("width"),d("height"),d("margin.l"),d("margin.r"),d("margin.t"),d("margin.b"),d("margin.pad"),d("margin.autoexpand"),a.width&&a.height&&v.sanitizeMargins(b),d("paper_bgcolor"),d("separators",c.decimal+c.thousands),d("hidesources"),d("colorway"),p.getComponentMethod("calendars","handleDefaults")(a,b,"calendar"),p.getComponentMethod("fx","supplyLayoutGlobalDefaults")(a,b,d)},v.plotAutoSize=function(a,b,c){var d,e,f=a._context||{},g=f.frameMargins,h=r.isPlotDiv(a);if(h&&a.emit("plotly_autosize"),f.fillFrame)d=window.innerWidth,e=window.innerHeight,document.body.style.overflow="hidden";else if(m(g)&&g>0){var i=j(a._boundingBoxMargins),k=i.left+i.right,l=i.bottom+i.top,n=1-2*g,o=c._container&&c._container.node?c._container.node().getBoundingClientRect():{width:c.width,height:c.height};d=Math.round(n*(o.width-k)),e=Math.round(n*(o.height-l))}else{var p=h?window.getComputedStyle(a):{};d=parseFloat(p.width)||c.width,e=parseFloat(p.height)||c.height}var q=v.layoutAttributes.width.min,s=v.layoutAttributes.height.min;d<q&&(d=q),e<s&&(e=s);var t=!b.width&&Math.abs(c.width-d)>1,u=!b.height&&Math.abs(c.height-e)>1;(u||t)&&(t&&(c.width=d),u&&(c.height=e)),a._initialAutoSize||(a._initialAutoSize={width:d,height:e}),v.sanitizeMargins(c)},v.supplyLayoutModuleDefaults=function(a,b,c,d){var e,f,g,h=p.componentsRegistry,i=b._basePlotModules,j=p.subplotsRegistry.cartesian;for(e in h)g=h[e],g.includeBasePlot&&g.includeBasePlot(a,b);for(i.length||i.push(j),b._has("cartesian")&&j.finalizeSubplots(a,b),f=0;f<i.length;f++)g=i[f],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c);var k=b._modules;for(f=0;f<k.length;f++)g=k[f],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c);var l=b._transformModules;for(f=0;f<l.length;f++)g=l[f],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c,d);for(e in h)g=h[e],g.supplyLayoutDefaults&&g.supplyLayoutDefaults(a,b,c)},v.purge=function(a){var b=a._fullLayout||{};void 0!==b._glcontainer&&(b._glcontainer.selectAll(".gl-canvas").remove(),b._glcontainer.remove(),b._glcanvas=null),void 0!==b._geocontainer&&b._geocontainer.remove(),b._modeBar&&b._modeBar.destroy(),a._transitionData&&(a._transitionData._interruptCallbacks&&(a._transitionData._interruptCallbacks.length=0),a._transitionData._animationRaf&&window.cancelAnimationFrame(a._transitionData._animationRaf)),r.clearThrottle(),delete a.data,delete a.layout,delete a._fullData,delete a._fullLayout,delete a.calcdata,delete a.framework,delete a.empty,delete a.fid,delete a.undoqueue,delete a.undonum,delete a.autoplay,delete a.changed,delete a._promises,delete a._redrawTimer,delete a.firstscatter,delete a._hmlumcount,delete a._hmpixcount,delete a._transitionData,delete a._transitioning,delete a._initialAutoSize,delete a._transitioningWithDuration,delete a._dragging,delete a._dragged,delete a._hoverdata,delete a._snapshotInProgress,delete a._editing,delete a._replotPending,delete a._mouseDownTime,delete a._legendMouseDownTime,a.removeAllListeners&&a.removeAllListeners()},v.style=function(a){var b,c=a._fullLayout._modules,d=[];for(b=0;b<c.length;b++){var e=c[b];e.style&&r.pushUnique(d,e.style)}for(b=0;b<d.length;b++)d[b](a)},v.sanitizeMargins=function(a){if(a&&a.margin){var b,c=a.width,d=a.height,e=a.margin,f=c-(e.l+e.r),g=d-(e.t+e.b);f<0&&(b=(c-1)/(e.l+e.r),e.l=Math.floor(b*e.l),e.r=Math.floor(b*e.r)),g<0&&(b=(d-1)/(e.t+e.b),e.t=Math.floor(b*e.t),e.b=Math.floor(b*e.b))}},v.autoMargin=function(a,b,c){var d=a._fullLayout;if(d._pushmargin||(d._pushmargin={}),!1!==d.margin.autoexpand){if(c){var e=void 0===c.pad?12:c.pad;c.l+c.r>.5*d.width&&(c.l=c.r=0),c.b+c.t>.5*d.height&&(c.b=c.t=0),d._pushmargin[b]={l:{val:c.x,size:c.l+e},r:{val:c.x,size:c.r+e},b:{val:c.y,size:c.b+e},t:{val:c.y,size:c.t+e}}}else delete d._pushmargin[b];d._replotting||v.doAutoMargin(a)}},v.doAutoMargin=function(a){var b=a._fullLayout;b._size||(b._size={}),b._pushmargin||(b._pushmargin={});var c=b._size,d=JSON.stringify(c),e=Math.max(b.margin.l||0,0),f=Math.max(b.margin.r||0,0),g=Math.max(b.margin.t||0,0),h=Math.max(b.margin.b||0,0),i=b._pushmargin;if(!1!==b.margin.autoexpand){i.base={l:{val:0,size:e},r:{val:1,size:f},t:{val:1,size:g},b:{val:0,size:h}};for(var j in i){var k=i[j].l||{},l=i[j].b||{},o=k.val,p=k.size,q=l.val,r=l.size;for(var s in i){if(m(p)&&i[s].r){var t=i[s].r.val,u=i[s].r.size;if(t>o){var v=(p*t+(u-b.width)*o)/(t-o),w=(u*(1-o)+(p-b.width)*(1-t))/(t-o);v>=0&&w>=0&&v+w>e+f&&(e=v,f=w)}}if(m(r)&&i[s].t){var x=i[s].t.val,y=i[s].t.size;if(x>q){var z=(r*x+(y-b.height)*q)/(x-q),A=(y*(1-q)+(r-b.height)*(1-x))/(x-q);z>=0&&A>=0&&z+A>h+g&&(h=z,g=A)}}}}}if(c.l=Math.round(e),c.r=Math.round(f),c.t=Math.round(g),c.b=Math.round(h),c.p=Math.round(b.margin.pad),c.w=Math.round(b.width)-c.l-c.r,c.h=Math.round(b.height)-c.t-c.b,!b._replotting&&"{}"!==d&&d!==JSON.stringify(b._size))return n.plot(a)},v.graphJson=function(a,b,c,d,e){function f(a){if("function"==typeof a)return null;if(r.isPlainObject(a)){var b,d,e={};for(b in a)if("function"!=typeof a[b]&&-1===["_","["].indexOf(b.charAt(0))){if("keepdata"===c){if("src"===b.substr(b.length-3))continue}else if("keepstream"===c){if("string"==typeof(d=a[b+"src"])&&d.indexOf(":")>0&&!r.isPlainObject(a.stream))continue}else if("keepall"!==c&&"string"==typeof(d=a[b+"src"])&&d.indexOf(":")>0)continue;e[b]=f(a[b])}return e}return Array.isArray(a)?a.map(f):r.isJSDate(a)?r.ms2DateTimeLocal(+a):a}(e&&b&&!a._fullData||e&&!b&&!a._fullLayout)&&v.supplyDefaults(a);var g=e?a._fullData:a.data,h=e?a._fullLayout:a.layout,i=(a._transitionData||{})._frames,j={data:(g||[]).map(function(a){var c=f(a);return b&&delete c.fit,c})};return b||(j.layout=f(h)),a.framework&&a.framework.isPolar&&(j=a.framework.getConfig()),i&&(j.frames=f(i)),"object"===d?j:JSON.stringify(j)},v.modifyFrames=function(a,b){var c,d,e,f=a._transitionData._frames,g=a._transitionData._frameHash;for(c=0;c<b.length;c++)switch(d=b[c],d.type){case"replace":e=d.value;var h=(f[d.index]||{}).name,i=e.name;f[d.index]=g[i]=e,i!==h&&(delete g[h],g[i]=e);break;case"insert":e=d.value,g[e.name]=e,f.splice(d.index,0,e);break;case"delete":e=f[d.index],delete g[e.name],f.splice(d.index,1)}return Promise.resolve()},v.computeFrame=function(a,b){var c,d,e,f,g=a._transitionData._frameHash;if(!b)throw new Error("computeFrame must be given a string frame name");var h=g[b.toString()];if(!h)return!1;for(var i=[h],j=[h.name];h.baseframe&&(h=g[h.baseframe.toString()])&&-1===j.indexOf(h.name);)i.push(h),j.push(h.name);for(var k={};h=i.pop();)if(h.layout&&(k.layout=v.extendLayout(k.layout,h.layout)),h.data){if(k.data||(k.data=[]),!(d=h.traces))for(d=[],c=0;c<h.data.length;c++)d[c]=c;for(k.traces||(k.traces=[]),c=0;c<h.data.length;c++)void 0!==(e=d[c])&&null!==e&&(f=k.traces.indexOf(e),-1===f&&(f=k.data.length,k.traces[f]=e),k.data[f]=v.extendTrace(k.data[f],h.data[c]))}return k},v.recomputeFrameHash=function(a){for(var b=a._transitionData._frameHash={},c=a._transitionData._frames,d=0;d<c.length;d++){var e=c[d];e&&e.name&&(b[e.name]=e)}},v.extendObjectWithContainers=function(a,b,c){var d,e,f,g,h,i,j,k,l=r.extendDeepNoArrays({},b||{}),m=r.expandObjectPaths(l),n={};if(c&&c.length)for(f=0;f<c.length;f++)d=r.nestedProperty(m,c[f]),e=d.get(),void 0===e?r.nestedProperty(n,c[f]).set(null):(d.set(null),r.nestedProperty(n,c[f]).set(e));if(a=r.extendDeepNoArrays(a||{},m),c&&c.length)for(f=0;f<c.length;f++)if(h=r.nestedProperty(n,c[f]),j=h.get()){for(i=r.nestedProperty(a,c[f]),k=i.get(),Array.isArray(k)||(k=[],i.set(k)),g=0;g<j.length;g++){var o=j[g];k[g]=null===o?null:v.extendObjectWithContainers(k[g],o)}i.set(k)}return a},v.dataArrayContainers=["transforms"],v.layoutArrayContainers=p.layoutArrayContainers,v.extendTrace=function(a,b){return v.extendObjectWithContainers(a,b,v.dataArrayContainers)},v.extendLayout=function(a,b){return v.extendObjectWithContainers(a,b,v.layoutArrayContainers)},v.transition=function(a,b,c,d,e,f){function g(){var d;for(d=0;d<q.length;d++){var e=q[d],f=a._fullData[e],g=f._module;g&&(g.animatable&&s.push(e),a.data[q[d]]=v.extendTrace(a.data[q[d]],b[d]))}var h=r.expandObjectPaths(r.extendDeepNoArrays({},c)),i=/^[xy]axis[0-9]*$/;for(var j in h)i.test(j)&&delete h[j].range;return v.extendLayout(a.layout,h),delete a.calcdata,v.supplyDefaults(a),v.doCalcdata(a),A.calc(a),Promise.resolve()}function h(a){var b=Promise.resolve();if(!a)return b;for(;a.length;)b=b.then(a.shift());return b}function i(a){if(a)for(;a.length;)a.shift()}function j(){return a.emit("plotly_transitioning",[]),new Promise(function(b){function d(){return i++,function(){j++,t||j!==i||k(b)}}a._transitioning=!0,f.duration>0&&(a._transitioningWithDuration=!0),a._transitionData._interruptCallbacks.push(function(){t=!0}),e.redraw&&a._transitionData._interruptCallbacks.push(function(){return n.redraw(a)}),a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var g,h,i=0,j=0,l=a._fullLayout._basePlotModules,m=!1;if(c)for(h=0;h<l.length;h++)if(l[h].transitionAxes){var o=r.expandObjectPaths(c);m=l[h].transitionAxes(a,o,f,d)||m}for(m?(g=r.extendFlat({},f),g.duration=0):g=f,h=0;h<l.length;h++)l[h].plot(a,s,g,d);setTimeout(d())})}function k(b){if(a._transitionData)return i(a._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(e.redraw)return n.redraw(a)}).then(function(){a._transitioning=!1,a._transitioningWithDuration=!1,a.emit("plotly_transitioned",[])}).then(b)}function l(){if(a._transitionData)return a._transitioning=!1,h(a._transitionData._interruptCallbacks)}var m,o,p=Array.isArray(b)?b.length:0,q=d.slice(0,p),s=[],t=!1;for(m=0;m<q.length;m++){o=q[m];var u=a._fullData[o],w=u._module;if(w&&!w.animatable){var x={};for(var y in b[m])x[y]=[b[m][y]]}}var z=[v.previousPromises,l,g,v.rehover,j],B=r.syncOrAsync(z,a);return B&&B.then||(B=Promise.resolve()),B.then(function(){return a})},v.doCalcdata=function(a,b){var c,d,e,f,g=q.list(a),h=a._fullData,i=a._fullLayout,j=new Array(h.length),l=(a.calcdata||[]).slice(0);for(a.calcdata=j,a.firstscatter=!0,i._numBoxes=0,i._numViolins=0,i._violinScaleGroupStats={},a._hmpixcount=0,a._hmlumcount=0,i._piecolormap={},i._piecolorway=null,i._piedefaultcolorcount=0,e=0;e<h.length;e++)Array.isArray(b)&&-1===b.indexOf(e)&&(j[e]=l[e]);for(e=0;e<h.length;e++)c=h[e],c._arrayAttrs=o.findArrayAttributes(c);var m=i._subplots.polar||[];for(e=0;e<m.length;e++)g.push(i[m[e]].radialaxis,i[m[e]].angularaxis);k(g);var n=!1;for(e=0;e<h.length;e++)if(c=h[e],!0===c.visible&&c.transforms)for(d=c._module,d&&d.calc&&d.calc(a,c),f=0;f<c.transforms.length;f++){var r=c.transforms[f];d=z[r.type],d&&d.calcTransform&&(c._hasCalcTransform=!0,n=!0,d.calcTransform(a,c,r))}if(n){for(e=0;e<g.length;e++)g[e]._min=[],g[e]._max=[],g[e]._categories=[],g[e]._categoriesMap={};k(g)}for(e=0;e<h.length;e++){var s=[];if(c=h[e],!0===c.visible){d=c._module;var t=c.transforms||[];for(f=t.length-1;f>=0;f--)if(t[f].enabled){c._indexToPoints=t[f]._indexToPoints;break}d&&d.calc&&(s=d.calc(a,c))}Array.isArray(s)&&s[0]||(s=[{x:u,y:u}]),s[0].t||(s[0].t={}),s[0].trace=c,j[e]=s}p.getComponentMethod("fx","calc")(a)},v.rehover=function(a){a._fullLayout._rehover&&a._fullLayout._rehover()},v.generalUpdatePerTraceModule=function(a,b,c,d){var e,f=b.traceHash,g={};for(e=0;e<c.length;e++){var h=c[e],i=h[0].trace;i.visible&&(g[i.type]=g[i.type]||[],g[i.type].push(h))}for(var j in f)if(!g[j]){var k=f[j][0],l=k[0].trace;l.visible=!1,g[j]=[k]}for(var m in g){var n=g[m];n[0][0].trace._module.plot(a,b,r.filterVisible(n),d)}b.traceHash=g}},{"../components/color":618,"../components/errorbars":649,"../constants/numerical":721,"../lib":743,"../plot_api/plot_schema":778,"../plotly":784,"../plots/cartesian/axis_ids":792,"../registry":873,"./animation_attributes":785,"./attributes":787,"./command":814,"./font_attributes":816,"./frame_attributes":817,"./layout_attributes":843,d3:128,"fast-isnumeric":140}],853:[function(a,b,c){"use strict";b.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-axis","radial-axis","angular-line","radial-line"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],854:[function(a,b,c){"use strict";var d=a("../../lib");c.setConvertAngular=function(a){function b(){return a.period?Math.max(a.period,a._categories.length):a._categories.length}function c(a){return h*a+i}function e(a){return(a-i)/h}var f,g,h={clockwise:-1,counterclockwise:1}[a.direction],i=d.deg2rad(a.rotation);"linear"===a.type?(f=function(a,b){return"degrees"===b?d.deg2rad(a):a},g=function(a,b){return"degrees"===b?d.rad2deg(a):a}):"category"===a.type&&(f=function(a){var c=b();return 2*a*Math.PI/c},g=function(a){return a*b()/Math.PI/2}),a.unTransformRad=e,a._c2rad=f,a.c2rad=function(a,b){return c(f(a,b))},a.rad2c=function(a,b){return g(e(a),b)},a.c2deg=function(b,c){return d.rad2deg(a.c2rad(b,c))},a.deg2c=function(b,c){return a.rad2c(d.deg2rad(b),c)}}},{"../../lib":743}],855:[function(a,b,c){"use strict";function d(a){for(var b=a._fullLayout,c=a.calcdata,d=b._subplots[k],e=0;e<d.length;e++){var g=d[e],i=f(c,k,g),j=b[g]._subplot;j||(j=h(a,g),b[g]._subplot=j),j.plot(i,b,a._promises)}}function e(a,b,c,d){for(var e=d._subplots[k]||[],f=0;f<e.length;f++){var g=e[f],h=d[g]._subplot;if(!b[g]&&h){h.framework.remove(),h.layers["radial-axis-title"].remove();for(var i in h.clipPaths)h.clipPaths[i].remove()}}}var f=a("../get_data").getSubplotCalcData,g=a("../../lib").counterRegex,h=a("./polar"),i=a("./constants"),j=i.attr,k=i.name,l=g(k),m={};m[j]={valType:"subplotid",dflt:k,editType:"calc"},b.exports={attr:j,name:k,idRoot:k,idRegex:l,attrRegex:l,attributes:m,layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),plot:d,clean:e,toSVG:a("../cartesian").toSVG}},{"../../lib":743,"../cartesian":800,"../get_data":826,"./constants":853,"./layout_attributes":856,"./layout_defaults":857,"./polar":864}],856:[function(a,b,c){"use strict";var d=a("../../components/color/attributes"),e=a("../cartesian/layout_attributes"),f=a("../domain_attributes"),g=a("../../lib").extendFlat,h=a("../../plot_api/edit_types").overrideAll,i=h({color:e.color,showline:g({},e.showline,{dflt:!0}),linecolor:e.linecolor,linewidth:e.linewidth,showgrid:g({},e.showgrid,{dflt:!0}),gridcolor:e.gridcolor,gridwidth:e.gridwidth},"plot","from-root"),j=h({tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,showexponent:e.showexponent,exponentformat:e.exponentformat,separatethousands:e.separatethousands,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,tickformatstops:e.tickformatstops,layer:e.layer},"plot","from-root"),k={visible:g({},e.visible,{dflt:!0}),type:e.type,autorange:e.autorange,rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:e.range,categoryorder:e.categoryorder,categoryarray:e.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:g({},e.title,{editType:"plot",dflt:""}),titlefont:h(e.titlefont,"plot","from-root"),hoverformat:e.hoverformat,editType:"calc"};g(k,i,j);var l={visible:g({},e.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc"},categoryorder:e.categoryorder,categoryarray:e.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:e.hoverformat,editType:"calc"};g(l,i,j),b.exports={domain:f({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:d.background},radialaxis:k,angularaxis:l,editType:"calc"}},{"../../components/color/attributes":617,"../../lib":743,"../../plot_api/edit_types":773,"../cartesian/layout_attributes":801,"../domain_attributes":815}],857:[function(a,b,c){"use strict";function d(a,b,c,d){function h(a,b){return c(v+"."+a,b)}var o=c("bgcolor");d.bgColor=g.combine(o,d.paper_bgcolor);for(var v,w=c("sector"),x=i(d.fullData,t.name,d.id),y=d.layoutOut,z=0;z<u.length;z++){v=u[z],f.isPlainObject(a[v])||(a[v]={});var A=a[v],B=b[v]={};B._id=B._name=v;var C=t.axisName2dataArray[v],D=e(A,B,h,x,C);m(A,B,h),B._initialCategories="category"===D?p(C,B.categoryorder,B.categoryarray,x):[];var E=h("visible");q(B,y);var F,G;switch(E&&(F=h("color"),G=F===A.color?F:d.font.color),B._m=1,v){case"radialaxis":var H=h("autorange",!B.isValidRange(A.range));H&&h("rangemode"),"reversed"===H&&(B._m=-1),h("range"),B.cleanRange("range",{dfltRange:[0,1]}),E&&(h("side"),h("angle",w[0]),h("title"),f.coerceFont(h,"titlefont",{family:d.font.family,size:Math.round(1.2*d.font.size),color:G}));break;case"angularaxis":if("date"===D){f.log("Polar plots do not support date angular axes yet.");for(var I=0;I<x.length;I++)x[I].visible=!1;D=A.type=B.type="linear"}h("linear"===D?"thetaunit":"period");h("rotation",{counterclockwise:0,clockwise:90}[h("direction")]),r(B)}if(E){j(A,B,h,B.type),l(A,B,h,B.type,{noHover:!1,tickSuffixDflt:"degrees"===B.thetaunit?"°":void 0}),k(A,B,h,{outerTicks:!0});h("showticklabels")&&(f.coerceFont(h,"tickfont",{family:d.font.family,size:d.font.size,color:G}),h("tickangle"),h("tickformat")),n(A,B,h,{dfltColor:F,bgColor:d.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[v]}),h("layer")}h("hoverformat"),B._input=A}}function e(a,b,c,d,e){if("-"===c("type")){for(var f,g=0;g<d.length;g++)if(d[g].visible){f=d[g];break}f&&(b.type=o(f[e],"gregorian")),"-"===b.type?b.type="linear":a.type=b.type}return b.type}var f=a("../../lib"),g=a("../../components/color"),h=a("../subplot_defaults"),i=a("../get_data").getSubplotData,j=a("../cartesian/tick_value_defaults"),k=a("../cartesian/tick_mark_defaults"),l=a("../cartesian/tick_label_defaults"),m=a("../cartesian/category_order_defaults"),n=a("../cartesian/line_grid_defaults"),o=a("../cartesian/axis_autotype"),p=a("../cartesian/ordered_categories"),q=a("../cartesian/set_convert"),r=a("./helpers").setConvertAngular,s=a("./layout_attributes"),t=a("./constants"),u=t.axisNames;b.exports=function(a,b,c){h(a,b,c,{type:t.name,attributes:s,handleDefaults:d,font:b.font,paper_bgcolor:b.paper_bgcolor,fullData:c,layoutOut:b})}},{"../../components/color":618,"../../lib":743,"../cartesian/axis_autotype":790,"../cartesian/category_order_defaults":793,"../cartesian/line_grid_defaults":803,"../cartesian/ordered_categories":804,"../cartesian/set_convert":808,"../cartesian/tick_label_defaults":809,"../cartesian/tick_mark_defaults":810,"../cartesian/tick_value_defaults":811,"../get_data":826,"../subplot_defaults":865,"./constants":853,"./helpers":854,"./layout_attributes":856}],858:[function(a,b,c){"use strict";var d=a("../../../traces/scatter/attributes"),e=d.marker;b.exports={r:d.r,t:d.t,marker:{color:e.color,size:e.size,symbol:e.symbol,opacity:e.opacity,editType:"calc"}}},{"../../../traces/scatter/attributes":1066}],859:[function(a,b,c){"use strict";function d(a,b){return f({},b,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}})}var e=a("../../cartesian/layout_attributes"),f=a("../../../lib/extend").extendFlat,g=a("../../../plot_api/edit_types").overrideAll,h=f({},e.domain,{});b.exports=g({radialaxis:d("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:h,orientation:{valType:"number"}}),angularaxis:d("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:h}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":732,"../../../plot_api/edit_types":773,"../../cartesian/layout_attributes":801}],860:[function(a,b,c){"use strict";(b.exports=a("./micropolar")).manager=a("./micropolar_manager")},{"./micropolar":861,"./micropolar_manager":862}],861:[function(a,b,c){var d=a("d3"),e=a("../../../lib"),f=e.extendDeepAll,g=a("../../../constants/alignment").MID_SHIFT,h=b.exports={version:"0.2.2"};h.Axis=function(){function a(a){c=a||c;var k=j.data,m=j.layout;return("string"==typeof c||c.nodeName)&&(c=d.select(c)),c.datum(k).each(function(a,c){function j(a,b){return i(a)%360+m.orientation}var k=a.slice();l={data:h.util.cloneJson(k),layout:h.util.cloneJson(m)};var n=0;k.forEach(function(a,b){a.color||(a.color=m.defaultColorRange[n],n=(n+1)%m.defaultColorRange.length),a.strokeColor||(a.strokeColor="LinePlot"===a.geometry?a.color:d.rgb(a.color).darker().toString()),l.data[b].color=a.color,l.data[b].strokeColor=a.strokeColor,l.data[b].strokeDash=a.strokeDash,l.data[b].strokeSize=a.strokeSize});var o=k.filter(function(a,b){var c=a.visible;return void 0===c||!0===c}),p=!1,q=o.map(function(a,b){return p=p||void 0!==a.groupId,a});if(p){var r=d.nest().key(function(a,b){return void 0!==a.groupId?a.groupId:"unstacked"}).entries(q),s=[],t=r.map(function(a,b){if("unstacked"===a.key)return a.values;var c=a.values[0].r.map(function(a,b){return 0});return a.values.forEach(function(a,b,d){a.yStack=[c],s.push(c),c=h.util.sumArrays(a.r,c)}),a.values});o=d.merge(t)}
o.forEach(function(a,b){a.t=Array.isArray(a.t[0])?a.t:[a.t],a.r=Array.isArray(a.r[0])?a.r:[a.r]});var u=Math.min(m.width-m.margin.left-m.margin.right,m.height-m.margin.top-m.margin.bottom)/2;u=Math.max(10,u);var v,w=[m.margin.left+u,m.margin.top+u];if(p){v=[0,d.max(h.util.sumArrays(h.util.arrayLast(o).r[0],h.util.arrayLast(s)))]}else v=d.extent(h.util.flattenArray(o.map(function(a,b){return a.r})));m.radialAxis.domain!=h.DATAEXTENT&&(v[0]=0),e=d.scale.linear().domain(m.radialAxis.domain!=h.DATAEXTENT&&m.radialAxis.domain?m.radialAxis.domain:v).range([0,u]),l.layout.radialAxis.domain=e.domain();var x,y=h.util.flattenArray(o.map(function(a,b){return a.t})),z="string"==typeof y[0];z&&(y=h.util.deduplicate(y),x=y.slice(),y=d.range(y.length),o=o.map(function(a,b){var c=a;return a.t=[y],p&&(c.yStack=a.yStack),c}));var A=o.filter(function(a,b){return"LinePlot"===a.geometry||"DotPlot"===a.geometry}).length===o.length,B=null===m.needsEndSpacing?z||!A:m.needsEndSpacing,C=m.angularAxis.domain&&m.angularAxis.domain!=h.DATAEXTENT&&!z&&m.angularAxis.domain[0]>=0,D=C?m.angularAxis.domain:d.extent(y),E=Math.abs(y[1]-y[0]);A&&!z&&(E=0);var F=D.slice();B&&z&&(F[1]+=E);var G=m.angularAxis.ticksCount||4;G>8&&(G=G/(G/8)+G%8),m.angularAxis.ticksStep&&(G=(F[1]-F[0])/G);var H=m.angularAxis.ticksStep||(F[1]-F[0])/(G*(m.minorTicks+1));x&&(H=Math.max(Math.round(H),1)),F[2]||(F[2]=H);var I=d.range.apply(this,F);if(I=I.map(function(a,b){return parseFloat(a.toPrecision(12))}),i=d.scale.linear().domain(F.slice(0,2)).range("clockwise"===m.direction?[0,360]:[360,0]),l.layout.angularAxis.domain=i.domain(),l.layout.angularAxis.endPadding=B?E:0,void 0===(b=d.select(this).select("svg.chart-root"))||b.empty()){var J=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),K=this.appendChild(this.ownerDocument.importNode(J.documentElement,!0));b=d.select(K)}b.select(".guides-group").style({"pointer-events":"none"}),b.select(".angular.axis-group").style({"pointer-events":"none"}),b.select(".radial.axis-group").style({"pointer-events":"none"});var L,M=b.select(".chart-group"),N={fill:"none",stroke:m.tickColor},O={"font-size":m.font.size,"font-family":m.font.family,fill:m.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(a,b){return" "+a+" 0 "+m.font.outlineColor}).join(",")};if(m.showLegend){L=b.select(".legend-group").attr({transform:"translate("+[u,m.margin.top]+")"}).style({display:"block"});var P=o.map(function(a,b){var c=h.util.cloneJson(a);return c.symbol="DotPlot"===a.geometry?a.dotType||"circle":"LinePlot"!=a.geometry?"square":"line",c.visibleInLegend=void 0===a.visibleInLegend||a.visibleInLegend,c.color="LinePlot"===a.geometry?a.strokeColor:a.color,c});h.Legend().config({data:o.map(function(a,b){return a.name||"Element"+b}),legendConfig:f({},h.Legend.defaultConfig().legendConfig,{container:L,elements:P,reverseOrder:m.legend.reverseOrder})})();var Q=L.node().getBBox();u=Math.min(m.width-Q.width-m.margin.left-m.margin.right,m.height-m.margin.top-m.margin.bottom)/2,u=Math.max(10,u),w=[m.margin.left+u,m.margin.top+u],e.range([0,u]),l.layout.radialAxis.domain=e.domain(),L.attr("transform","translate("+[w[0]+u,w[1]-u]+")")}else L=b.select(".legend-group").style({display:"none"});b.attr({width:m.width,height:m.height}).style({opacity:m.opacity}),M.attr("transform","translate("+w+")").style({cursor:"crosshair"});var R=[(m.width-(m.margin.left+m.margin.right+2*u+(Q?Q.width:0)))/2,(m.height-(m.margin.top+m.margin.bottom+2*u))/2];if(R[0]=Math.max(0,R[0]),R[1]=Math.max(0,R[1]),b.select(".outer-group").attr("transform","translate("+R+")"),m.title){var S=b.select("g.title-group text").style(O).text(m.title),T=S.node().getBBox();S.attr({x:w[0]-T.width/2,y:w[1]-u-20})}var U=b.select(".radial.axis-group");if(m.radialAxis.gridLinesVisible){var V=U.selectAll("circle.grid-circle").data(e.ticks(5));V.enter().append("circle").attr({class:"grid-circle"}).style(N),V.attr("r",e),V.exit().remove()}U.select("circle.outside-circle").attr({r:u}).style(N);var W=b.select("circle.background-circle").attr({r:u}).style({fill:m.backgroundColor,stroke:m.stroke});if(m.radialAxis.visible){var X=d.svg.axis().scale(e).ticks(5).tickSize(5);U.call(X).attr({transform:"rotate("+m.radialAxis.orientation+")"}),U.selectAll(".domain").style(N),U.selectAll("g>text").text(function(a,b){return this.textContent+m.radialAxis.ticksSuffix}).style(O).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(a,b){return"horizontal"===m.radialAxis.tickOrientation?"rotate("+-m.radialAxis.orientation+") translate("+[0,O["font-size"]]+")":"translate("+[0,O["font-size"]]+")"}}),U.selectAll("g>line").style({stroke:"black"})}var Y=b.select(".angular.axis-group").selectAll("g.angular-tick").data(I),Z=Y.enter().append("g").classed("angular-tick",!0);Y.attr({transform:function(a,b){return"rotate("+j(a,b)+")"}}).style({display:m.angularAxis.visible?"block":"none"}),Y.exit().remove(),Z.append("line").classed("grid-line",!0).classed("major",function(a,b){return b%(m.minorTicks+1)==0}).classed("minor",function(a,b){return!(b%(m.minorTicks+1)==0)}).style(N),Z.selectAll(".minor").style({stroke:m.minorTickColor}),Y.select("line.grid-line").attr({x1:m.tickLength?u-m.tickLength:0,x2:u}).style({display:m.angularAxis.gridLinesVisible?"block":"none"}),Z.append("text").classed("axis-text",!0).style(O);var $=Y.select("text.axis-text").attr({x:u+m.labelOffset,dy:g+"em",transform:function(a,b){var c=j(a,b),d=u+m.labelOffset,e=m.angularAxis.tickOrientation;return"horizontal"==e?"rotate("+-c+" "+d+" 0)":"radial"==e?c<270&&c>90?"rotate(180 "+d+" 0)":null:"rotate("+(c<=180&&c>0?-90:90)+" "+d+" 0)"}}).style({"text-anchor":"middle",display:m.angularAxis.labelsVisible?"block":"none"}).text(function(a,b){return b%(m.minorTicks+1)!=0?"":x?x[a]+m.angularAxis.ticksSuffix:a+m.angularAxis.ticksSuffix}).style(O);m.angularAxis.rewriteTicks&&$.text(function(a,b){return b%(m.minorTicks+1)!=0?"":m.angularAxis.rewriteTicks(this.textContent,b)});var _=d.max(M.selectAll(".angular-tick text")[0].map(function(a,b){return a.getCTM().e+a.getBBox().width}));L.attr({transform:"translate("+[u+_,m.margin.top]+")"});var aa=b.select("g.geometry-group").selectAll("g").size()>0,ba=b.select("g.geometry-group").selectAll("g.geometry").data(o);if(ba.enter().append("g").attr({class:function(a,b){return"geometry geometry"+b}}),ba.exit().remove(),o[0]||aa){var ca=[];o.forEach(function(a,b){var c={};c.radialScale=e,c.angularScale=i,c.container=ba.filter(function(a,c){return c==b}),c.geometry=a.geometry,c.orientation=m.orientation,c.direction=m.direction,c.index=b,ca.push({data:a,geometryConfig:c})});var da=d.nest().key(function(a,b){return void 0!==a.data.groupId||"unstacked"}).entries(ca),ea=[];da.forEach(function(a,b){"unstacked"===a.key?ea=ea.concat(a.values.map(function(a,b){return[a]})):ea.push(a.values)}),ea.forEach(function(a,b){var c;c=Array.isArray(a)?a[0].geometryConfig.geometry:a.geometryConfig.geometry;var d=a.map(function(a,b){return f(h[c].defaultConfig(),a)});h[c]().config(d)()})}var fa,ga,ha=b.select(".guides-group"),ia=b.select(".tooltips-group"),ja=h.tooltipPanel().config({container:ia,fontSize:8})(),ka=h.tooltipPanel().config({container:ia,fontSize:8})(),la=h.tooltipPanel().config({container:ia,hasTick:!0})();if(!z){var ma=ha.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});M.on("mousemove.angular-guide",function(a,b){var c=h.util.getMousePos(W).angle;ma.attr({x2:-u,transform:"rotate("+c+")"}).style({opacity:.5});var d=(c+180+360-m.orientation)%360;fa=i.invert(d);var e=h.util.convertToCartesian(u+12,c+180);ja.text(h.util.round(fa)).move([e[0]+w[0],e[1]+w[1]])}).on("mouseout.angular-guide",function(a,b){ha.select("line").style({opacity:0})})}var na=ha.select("circle").style({stroke:"grey",fill:"none"});M.on("mousemove.radial-guide",function(a,b){var c=h.util.getMousePos(W).radius;na.attr({r:c}).style({opacity:.5}),ga=e.invert(h.util.getMousePos(W).radius);var d=h.util.convertToCartesian(c,m.radialAxis.orientation);ka.text(h.util.round(ga)).move([d[0]+w[0],d[1]+w[1]])}).on("mouseout.radial-guide",function(a,b){na.style({opacity:0}),la.hide(),ja.hide(),ka.hide()}),b.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(a,c){var e=d.select(this),f=this.style.fill,g="black",i=this.style.opacity||1;if(e.attr({"data-opacity":i}),f&&"none"!==f){e.attr({"data-fill":f}),g=d.hsl(f).darker().toString(),e.style({fill:g,opacity:1});var j={t:h.util.round(a[0]),r:h.util.round(a[1])};z&&(j.t=x[a[0]]);var k="t: "+j.t+", r: "+j.r,l=this.getBoundingClientRect(),m=b.node().getBoundingClientRect(),n=[l.left+l.width/2-R[0]-m.left,l.top+l.height/2-R[1]-m.top];la.config({color:g}).text(k),la.move(n)}else f=this.style.stroke||"black",e.attr({"data-stroke":f}),g=d.hsl(f).darker().toString(),e.style({stroke:g,opacity:1})}).on("mousemove.tooltip",function(a,b){if(0!=d.event.which)return!1;d.select(this).attr("data-fill")&&la.show()}).on("mouseout.tooltip",function(a,b){la.hide();var c=d.select(this),e=c.attr("data-fill");e?c.style({fill:e,opacity:c.attr("data-opacity")}):c.style({stroke:c.attr("data-stroke"),opacity:c.attr("data-opacity")})})}),n}var b,c,e,i,j={data:[],layout:{}},k={},l={},m=d.dispatch("hover"),n={};return n.render=function(b){return a(b),this},n.config=function(a){if(!arguments.length)return j;var b=h.util.cloneJson(a);return b.data.forEach(function(a,b){j.data[b]||(j.data[b]={}),f(j.data[b],h.Axis.defaultConfig().data[0]),f(j.data[b],a)}),f(j.layout,h.Axis.defaultConfig().layout),f(j.layout,b.layout),this},n.getLiveConfig=function(){return l},n.getinputConfig=function(){return k},n.radialScale=function(a){return e},n.angularScale=function(a){return i},n.svg=function(){return b},d.rebind(n,m,"on"),n},h.Axis.defaultConfig=function(a,b){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:d.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},h.util={},h.DATAEXTENT="dataExtent",h.AREA="AreaChart",h.LINE="LinePlot",h.DOT="DotPlot",h.BAR="BarChart",h.util._override=function(a,b){for(var c in a)c in b&&(b[c]=a[c])},h.util._extend=function(a,b){for(var c in a)b[c]=a[c]},h.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},h.util.dataFromEquation2=function(a,b){var c=b||6;return d.range(0,360+c,c).map(function(b,c){var d=b*Math.PI/180;return[b,a(d)]})},h.util.dataFromEquation=function(a,b,c){var e=b||6,f=[],g=[];d.range(0,360+e,e).forEach(function(b,c){var d=b*Math.PI/180,e=a(d);f.push(b),g.push(e)});var h={t:f,r:g};return c&&(h.name=c),h},h.util.ensureArray=function(a,b){if(void 0===a)return null;var c=[].concat(a);return d.range(b).map(function(a,b){return c[b]||c[0]})},h.util.fillArrays=function(a,b,c){return b.forEach(function(b,d){a[b]=h.util.ensureArray(a[b],c)}),a},h.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))},h.util.validateKeys=function(a,b){"string"==typeof b&&(b=b.split("."));var c=b.shift();return a[c]&&(!b.length||objHasKeys(a[c],b))},h.util.sumArrays=function(a,b){return d.zip(a,b).map(function(a,b){return d.sum(a)})},h.util.arrayLast=function(a){return a[a.length-1]},h.util.arrayEqual=function(a,b){for(var c=Math.max(a.length,b.length,1);c-- >=0&&a[c]===b[c];);return-2===c},h.util.flattenArray=function(a){for(var b=[];!h.util.arrayEqual(b,a);)b=a,a=[].concat.apply([],a);return a},h.util.deduplicate=function(a){return a.filter(function(a,b,c){return c.indexOf(a)==b})},h.util.convertToCartesian=function(a,b){var c=b*Math.PI/180;return[a*Math.cos(c),a*Math.sin(c)]},h.util.round=function(a,b){var c=b||2,d=Math.pow(10,c);return Math.round(a*d)/d},h.util.getMousePos=function(a){var b=d.mouse(a.node()),c=b[0],e=b[1],f={};return f.x=c,f.y=e,f.pos=b,f.angle=180*(Math.atan2(e,c)+Math.PI)/Math.PI,f.radius=Math.sqrt(c*c+e*e),f},h.util.duplicatesCount=function(a){for(var b,c={},d={},e=0,f=a.length;e<f;e++)b=a[e],b in c?(c[b]++,d[b]=c[b]):c[b]=1;return d},h.util.duplicates=function(a){return Object.keys(h.util.duplicatesCount(a))},h.util.translator=function(a,b,c,d){if(d){var e=c.slice();c=b,b=e}var f=b.reduce(function(a,b){if(void 0!==a)return a[b]},a);void 0!==f&&(b.reduce(function(a,c,d){if(void 0!==a)return d===b.length-1&&delete a[c],a[c]},a),c.reduce(function(a,b,d){return void 0===a[b]&&(a[b]={}),d===c.length-1&&(a[b]=f),a[b]},a))},h.PolyChart=function(){function a(){var a=b[0].geometryConfig,c=a.container;"string"==typeof c&&(c=d.select(c)),c.datum(b).each(function(b,c){function f(b,c){return{r:a.radialScale(b[1]),t:(a.angularScale(b[0])+a.orientation)*Math.PI/180}}function g(a){return{x:a.r*Math.cos(a.t),y:a.r*Math.sin(a.t)}}var h=!!b[0].data.yStack,i=b.map(function(a,b){return h?d.zip(a.data.t[0],a.data.r[0],a.data.yStack[0]):d.zip(a.data.t[0],a.data.r[0])}),j=a.angularScale,k=a.radialScale.domain()[0],l={};l.bar=function(c,e,f){var g=b[f].data,h=a.radialScale(c[1])-a.radialScale(0),i=a.radialScale(c[2]||0),k=g.barWidth;d.select(this).attr({class:"mark bar",d:"M"+[[h+i,-k/2],[h+i,k/2],[i,k/2],[i,-k/2]].join("L")+"Z",transform:function(b,c){return"rotate("+(a.orientation+j(b[0]))+")"}})},l.dot=function(a,c,e){var h=a[2]?[a[0],a[1]+a[2]]:a,i=d.svg.symbol().size(b[e].data.dotSize).type(b[e].data.dotType)(a,c);d.select(this).attr({class:"mark dot",d:i,transform:function(a,b){var c=g(f(h));return"translate("+[c.x,c.y]+")"}})};var m=d.svg.line.radial().interpolate(b[0].data.lineInterpolation).radius(function(b){return a.radialScale(b[1])}).angle(function(b){return a.angularScale(b[0])*Math.PI/180});l.line=function(c,e,f){var g=c[2]?i[f].map(function(a,b){return[a[0],a[1]+a[2]]}):i[f];if(d.select(this).each(l.dot).style({opacity:function(a,c){return+b[f].data.dotVisible},fill:q.stroke(c,e,f)}).attr({class:"mark dot"}),!(e>0)){var h=d.select(this.parentNode).selectAll("path.line").data([0]);h.enter().insert("path"),h.attr({class:"line",d:m(g),transform:function(b,c){return"rotate("+(a.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(a,b){return q.fill(c,e,f)},"fill-opacity":0,stroke:function(a,b){return q.stroke(c,e,f)},"stroke-width":function(a,b){return q["stroke-width"](c,e,f)},"stroke-dasharray":function(a,b){return q["stroke-dasharray"](c,e,f)},opacity:function(a,b){return q.opacity(c,e,f)},display:function(a,b){return q.display(c,e,f)}})}};var n=a.angularScale.range(),o=Math.abs(n[1]-n[0])/i[0].length*Math.PI/180,p=d.svg.arc().startAngle(function(a){return-o/2}).endAngle(function(a){return o/2}).innerRadius(function(b){return a.radialScale(k+(b[2]||0))}).outerRadius(function(b){return a.radialScale(k+(b[2]||0))+a.radialScale(b[1])});l.arc=function(b,c,e){d.select(this).attr({class:"mark arc",d:p,transform:function(b,c){return"rotate("+(a.orientation+j(b[0])+90)+")"}})};var q={fill:function(a,c,d){return b[d].data.color},stroke:function(a,c,d){return b[d].data.strokeColor},"stroke-width":function(a,c,d){return b[d].data.strokeSize+"px"},"stroke-dasharray":function(a,c,d){return e[b[d].data.strokeDash]},opacity:function(a,c,d){return b[d].data.opacity},display:function(a,c,d){return void 0===b[d].data.visible||b[d].data.visible?"block":"none"}},r=d.select(this).selectAll("g.layer").data(i);r.enter().append("g").attr({class:"layer"});var s=r.selectAll("path.mark").data(function(a,b){return a});s.enter().append("path").attr({class:"mark"}),s.style(q).each(l[a.geometryType]),s.exit().remove(),r.exit().remove()})}var b=[h.PolyChart.defaultConfig()],c=d.dispatch("hover"),e={solid:"none",dash:[5,2],dot:[2,5]};return a.config=function(a){return arguments.length?(a.forEach(function(a,c){b[c]||(b[c]={}),f(b[c],h.PolyChart.defaultConfig()),f(b[c],a)}),this):b},a.getColorScale=function(){},d.rebind(a,c,"on"),a},h.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:d.scale.category20()}}},h.BarChart=function(){return h.PolyChart()},h.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},h.AreaChart=function(){return h.PolyChart()},h.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},h.DotPlot=function(){return h.PolyChart()},h.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},h.LinePlot=function(){return h.PolyChart()},h.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},h.Legend=function(){function a(){var c=b.legendConfig,e=b.data.map(function(a,b){return[].concat(a).map(function(a,d){var e=f({},c.elements[b]);return e.name=a,e.color=[].concat(c.elements[b].color)[d],e})}),g=d.merge(e);g=g.filter(function(a,b){return c.elements[b]&&(c.elements[b].visibleInLegend||void 0===c.elements[b].visibleInLegend)}),c.reverseOrder&&(g=g.reverse());var h=c.container;("string"==typeof h||h.nodeName)&&(h=d.select(h));var i=g.map(function(a,b){return a.color}),j=c.fontSize,k=null==c.isContinuous?"number"==typeof g[0]:c.isContinuous,l=k?c.height:j*g.length,m=h.classed("legend-group",!0),n=m.selectAll("svg").data([0]),o=n.enter().append("svg").attr({width:300,height:l+j,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});o.append("g").classed("legend-axis",!0),o.append("g").classed("legend-marks",!0);var p=d.range(g.length),q=d.scale[k?"linear":"ordinal"]().domain(p).range(i),r=d.scale[k?"linear":"ordinal"]().domain(p)[k?"range":"rangePoints"]([0,l]),s=function(a,b){var c=3*b;return"line"===a?"M"+[[-b/2,-b/12],[b/2,-b/12],[b/2,b/12],[-b/2,b/12]]+"Z":-1!=d.svg.symbolTypes.indexOf(a)?d.svg.symbol().type(a).size(c)():d.svg.symbol().type("square").size(c)()};if(k){var t=n.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(i);t.enter().append("stop"),t.attr({offset:function(a,b){return b/(i.length-1)*100+"%"}}).style({"stop-color":function(a,b){return a}}),n.append("rect").classed("legend-mark",!0).attr({height:c.height,width:c.colorBandWidth,fill:"url(#grad1)"})}else{var u=n.select(".legend-marks").selectAll("path.legend-mark").data(g);u.enter().append("path").classed("legend-mark",!0),u.attr({transform:function(a,b){return"translate("+[j/2,r(b)+j/2]+")"},d:function(a,b){var c=a.symbol;return s(c,j)},fill:function(a,b){return q(b)}}),u.exit().remove()}var v=d.svg.axis().scale(r).orient("right"),w=n.select("g.legend-axis").attr({transform:"translate("+[k?c.colorBandWidth:j,j/2]+")"}).call(v);return w.selectAll(".domain").style({fill:"none",stroke:"none"}),w.selectAll("line").style({fill:"none",stroke:k?c.textColor:"none"}),w.selectAll("text").style({fill:c.textColor,"font-size":c.fontSize}).text(function(a,b){return g[b].name}),a}var b=h.Legend.defaultConfig(),c=d.dispatch("hover");return a.config=function(a){return arguments.length?(f(b,a),this):b},d.rebind(a,c,"on"),a},h.Legend.defaultConfig=function(a,b){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},h.tooltipPanel=function(){var a,b,c,e={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},g="tooltip-"+h.tooltipPanel.uid++,i=function(){a=e.container.selectAll("g."+g).data([0]);var d=a.enter().append("g").classed(g,!0).style({"pointer-events":"none",display:"none"});return c=d.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),b=d.append("text").attr({dx:e.padding+10,dy:.3*+e.fontSize}),i};return i.text=function(f){var g=d.hsl(e.color).l,h=g>=.5?"#aaa":"white",j=g>=.5?"black":"white",k=f||"";b.style({fill:j,"font-size":e.fontSize+"px"}).text(k);var l=e.padding;a.style({display:"block"});var m=b.node().getBBox(),n={fill:e.color,stroke:h,"stroke-width":"2px"},o=m.width+2*l+10,p=m.height+2*l;return c.attr({d:"M"+[[10,-p/2],[10,-p/4],[e.hasTick?0:10,0],[10,p/4],[10,p/2],[o,p/2],[o,-p/2]].join("L")+"Z"}).style(n),a.attr({transform:"translate("+[10,-p/2+2*l]+")"}),i},i.move=function(b){if(a)return a.attr({transform:"translate("+[b[0],b[1]]+")"}).style({display:"block"}),i},i.hide=function(){if(a)return a.style({display:"none"}),i},i.show=function(){if(a)return a.style({display:"block"}),i},i.config=function(a){return f(e,a),i},i},h.tooltipPanel.uid=1,h.adapter={},h.adapter.plotly=function(){var a={};return a.convert=function(a,b){var c={};if(a.data&&(c.data=a.data.map(function(a,c){var d=f({},a);return[[d,["marker","color"],["color"]],[d,["marker","opacity"],["opacity"]],[d,["marker","line","color"],["strokeColor"]],[d,["marker","line","dash"],["strokeDash"]],[d,["marker","line","width"],["strokeSize"]],[d,["marker","symbol"],["dotType"]],[d,["marker","size"],["dotSize"]],[d,["marker","barWidth"],["barWidth"]],[d,["line","interpolation"],["lineInterpolation"]],[d,["showlegend"],["visibleInLegend"]]].forEach(function(a,c){h.util.translator.apply(null,a.concat(b))}),b||delete d.marker,b&&delete d.groupId,b?("LinePlot"===d.geometry?(d.type="scatter",!0===d.dotVisible?(delete d.dotVisible,d.mode="lines+markers"):d.mode="lines"):"DotPlot"===d.geometry?(d.type="scatter",d.mode="markers"):"AreaChart"===d.geometry?d.type="area":"BarChart"===d.geometry&&(d.type="bar"),delete d.geometry):("scatter"===d.type?"lines"===d.mode?d.geometry="LinePlot":"markers"===d.mode?d.geometry="DotPlot":"lines+markers"===d.mode&&(d.geometry="LinePlot",d.dotVisible=!0):"area"===d.type?d.geometry="AreaChart":"bar"===d.type&&(d.geometry="BarChart"),delete d.mode,delete d.type),d}),!b&&a.layout&&"stack"===a.layout.barmode)){var e=h.util.duplicates(c.data.map(function(a,b){return a.geometry}));c.data.forEach(function(a,b){var d=e.indexOf(a.geometry);-1!=d&&(c.data[b].groupId=d)})}if(a.layout){var g=f({},a.layout);if([[g,["plot_bgcolor"],["backgroundColor"]],[g,["showlegend"],["showLegend"]],[g,["radialaxis"],["radialAxis"]],[g,["angularaxis"],["angularAxis"]],[g.angularaxis,["showline"],["gridLinesVisible"]],[g.angularaxis,["showticklabels"],["labelsVisible"]],[g.angularaxis,["nticks"],["ticksCount"]],[g.angularaxis,["tickorientation"],["tickOrientation"]],[g.angularaxis,["ticksuffix"],["ticksSuffix"]],[g.angularaxis,["range"],["domain"]],[g.angularaxis,["endpadding"],["endPadding"]],[g.radialaxis,["showline"],["gridLinesVisible"]],[g.radialaxis,["tickorientation"],["tickOrientation"]],[g.radialaxis,["ticksuffix"],["ticksSuffix"]],[g.radialaxis,["range"],["domain"]],[g.angularAxis,["showline"],["gridLinesVisible"]],[g.angularAxis,["showticklabels"],["labelsVisible"]],[g.angularAxis,["nticks"],["ticksCount"]],[g.angularAxis,["tickorientation"],["tickOrientation"]],[g.angularAxis,["ticksuffix"],["ticksSuffix"]],[g.angularAxis,["range"],["domain"]],[g.angularAxis,["endpadding"],["endPadding"]],[g.radialAxis,["showline"],["gridLinesVisible"]],[g.radialAxis,["tickorientation"],["tickOrientation"]],[g.radialAxis,["ticksuffix"],["ticksSuffix"]],[g.radialAxis,["range"],["domain"]],[g.font,["outlinecolor"],["outlineColor"]],[g.legend,["traceorder"],["reverseOrder"]],[g,["labeloffset"],["labelOffset"]],[g,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(a,c){h.util.translator.apply(null,a.concat(b))}),b?(void 0!==g.tickLength&&(g.angularaxis.ticklen=g.tickLength,delete g.tickLength),g.tickColor&&(g.angularaxis.tickcolor=g.tickColor,delete g.tickColor)):(g.angularAxis&&void 0!==g.angularAxis.ticklen&&(g.tickLength=g.angularAxis.ticklen),g.angularAxis&&void 0!==g.angularAxis.tickcolor&&(g.tickColor=g.angularAxis.tickcolor)),g.legend&&"boolean"!=typeof g.legend.reverseOrder&&(g.legend.reverseOrder="normal"!=g.legend.reverseOrder),g.legend&&"boolean"==typeof g.legend.traceorder&&(g.legend.traceorder=g.legend.traceorder?"reversed":"normal",delete g.legend.reverseOrder),g.margin&&void 0!==g.margin.t){var i=["t","r","b","l","pad"],j=["top","right","bottom","left","pad"],k={};d.entries(g.margin).forEach(function(a,b){k[j[i.indexOf(a.key)]]=a.value}),g.margin=k}b&&(delete g.needsEndSpacing,delete g.minorTickColor,delete g.minorTicks,delete g.angularaxis.ticksCount,delete g.angularaxis.ticksCount,delete g.angularaxis.ticksStep,delete g.angularaxis.rewriteTicks,delete g.angularaxis.nticks,delete g.radialaxis.ticksCount,delete g.radialaxis.ticksCount,delete g.radialaxis.ticksStep,delete g.radialaxis.rewriteTicks,delete g.radialaxis.nticks),c.layout=g}return c},a}},{"../../../constants/alignment":716,"../../../lib":743,d3:128}],862:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../../lib"),f=a("../../../components/color"),g=a("./micropolar"),h=a("./undo_manager"),i=e.extendDeepAll,j=b.exports={};j.framework=function(a){function b(b,e){return e&&(l=e),d.select(d.select(l).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),c=c?i(c,b):b,f||(f=g.Axis()),k=g.adapter.plotly().convert(c),f.config(k).render(l),a.data=c.data,a.layout=c.layout,j.fillLayout(a),c}var c,e,f,k,l,m=new h;return b.isPolar=!0,b.svg=function(){return f.svg()},b.getConfig=function(){return c},b.getLiveConfig=function(){return g.adapter.plotly().convert(f.getLiveConfig(),!0)},b.getLiveScales=function(){return{t:f.angularScale(),r:f.radialScale()}},b.setUndoPoint=function(){var a=this,b=g.util.cloneJson(c);!function(b,c){m.add({undo:function(){c&&a(c)},redo:function(){a(b)}})}(b,e),e=g.util.cloneJson(b)},b.undo=function(){m.undo()},b.redo=function(){m.redo()},b},j.fillLayout=function(a){var b=d.select(a).selectAll(".plot-container"),c=b.selectAll(".svg-container"),e=a.framework&&a.framework.svg&&a.framework.svg(),g={width:800,height:600,paper_bgcolor:f.background,_container:b,_paperdiv:c,_paper:e};a._fullLayout=i(g,a.layout)}},{"../../../components/color":618,"../../../lib":743,"./micropolar":861,"./undo_manager":863,d3:128}],863:[function(a,b,c){"use strict";b.exports=function(){function a(a,b){return a?(e=!0,a[b](),e=!1,this):this}var b,c=[],d=-1,e=!1;return{add:function(a){return e?this:(c.splice(d+1,c.length-d),c.push(a),d=c.length-1,this)},setCallback:function(a){b=a},undo:function(){var e=c[d];return e?(a(e,"undo"),d-=1,b&&b(e.undo),this):this},redo:function(){var e=c[d+1];return e?(a(e,"redo"),d+=1,b&&b(e.redo),this):this},clear:function(){c=[],d=-1},hasUndo:function(){return-1!==d},hasRedo:function(){return d<c.length-1},getCommands:function(){return c},getPreviousCommand:function(){return c[d-1]},getIndex:function(){return d}}}},{}],864:[function(a,b,c){"use strict";function d(a,b){this.id=b,this.gd=a,this._hasClipOnAxisFalse=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var c=a._fullLayout,d="clip"+c._uid+b;this.clipIds.circle=d+"-circle",this.clipPaths.circle=c._clips.append("clipPath").attr("id",this.clipIds.circle),this.clipPaths.circle.append("path"),this.framework=c._polarlayer.append("g").attr("class",b),this.radialTickLayout=null,this.angularTickLayout=null}function e(a,b,c){z.setConvert(a,c),a._min=b._min,a._max=b._max,a.setScale()}function f(a){var b=a.ticks+String(a.ticklen)+String(a.showticklabels);return"side"in a&&(b+=a.side),b}function g(a){var b,c,d,e,f=a[0],g=a[1],h=g-f,i=K(f),j=i+h,k=Math.cos(I(i)),l=Math.sin(I(i)),m=Math.cos(I(j)),n=Math.sin(I(j));return e=i<=90&&j>=90||i>90&&j>=450?1:l<=0&&n<=0?0:Math.max(l,n),b=i<=180&&j>=180||i>180&&j>=540?-1:k>=0&&m>=0?0:Math.min(k,m),c=i<=270&&j>=270||i>270&&j>=630?-1:l>=0&&n>=0?0:Math.min(l,n),d=j>=360?1:k<=0&&m<=0?0:Math.max(k,m),[b,c,d,e]}function h(a,b){if(k(b))return x.symbolFuncs[0](a);var c=a*Math.cos(I(b[0])),d=-a*Math.sin(I(b[0])),e=a*Math.cos(I(b[1])),f=-a*Math.sin(I(b[1]));return"M"+[c,d]+"A"+[a,a]+" "+(Math.abs(b[1]-b[0])<=180?[0,0,0]:[0,1,0])+" "+[e,f]}function i(a,b){return h(a,b)+(k(b)?"":"L0,0Z")}function j(a,b,c){function d(a,b){return[a*Math.cos(b),-a*Math.sin(b)]}function e(a,b,c){return"A"+[a,a]+" "+[0,i,c]+" "+d(a,b)}var f,g,h,i=Math.abs(c[1]-c[0])<=180?0:1;return k(c)?(f=0,h=2*Math.PI,g=Math.PI,"M"+d(a,f)+e(a,g,0)+e(a,h,0)+"ZM"+d(b,f)+e(b,g,1)+e(b,h,1)+"Z"):(f=I(c[0]),h=I(c[1]),"M"+d(a,f)+"L"+d(b,f)+e(b,h,0)+"L"+d(a,h)+e(a,f,1)+"Z")}function k(a){return 360===Math.abs(a[1]-a[0])}function l(a,b,c){return b?(a.attr("display",null),a.attr(c)):a&&a.attr("display","none"),a}function m(a,b){return"translate("+a+","+b+")"}function n(a){return"rotate("+a+")"}function o(a){return Math.abs(a)<1e-10?0:a>0?1:-1}function p(a){return o(Math.cos(a))}function q(a){return o(Math.sin(a))}var r=a("d3"),s=a("tinycolor2"),t=a("../../plotly"),u=a("../../registry"),v=a("../../lib"),w=a("../../components/color"),x=a("../../components/drawing"),y=a("../plots"),z=a("../cartesian/axes"),A=a("../../components/dragelement"),B=a("../cartesian/dragbox"),C=a("../../components/fx"),D=a("../../components/titles"),E=a("../cartesian/select"),F=a("../../lib/setcursor"),G=a("../../constants/alignment").MID_SHIFT,H=v._,I=v.deg2rad,J=v.rad2deg,K=v.wrap360,L=v.wrap180,M=a("./helpers").setConvertAngular,N=a("./constants"),O=d.prototype;b.exports=function(a,b){return new d(a,b)},O.plot=function(a,b){var c=this,d=b[c.id];c._hasClipOnAxisFalse=!1;for(var e=0;e<a.length;e++){if(!1===a[e][0].trace.cliponaxis){c._hasClipOnAxisFalse=!0;break}}c.updateLayers(b,d),c.updateLayout(b,d),y.generalUpdatePerTraceModule(c.gd,c,a,d),c.updateFx(b,d)},O.updateLayers=function(a,b){var c=this,d=c.layers,e=b.radialaxis,f=b.angularaxis,g=N.layerNames,h=g.indexOf("frontplot"),i=g.slice(0,h),j="below traces"===f.layer,k="below traces"===e.layer;j&&i.push("angular-axis"),k&&i.push("radial-axis"),j&&i.push("angular-line"),k&&i.push("radial-line"),i.push("frontplot"),j||i.push("angular-axis"),k||i.push("radial-axis"),j||i.push("angular-line"),k||i.push("radial-line");var l=c.framework.selectAll(".polarsublayer").data(i,String);l.enter().append("g").attr("class",function(a){return"polarsublayer "+a}).each(function(a){var b=d[a]=r.select(this);switch(a){case"frontplot":b.append("g").classed("scatterlayer",!0);break;case"backplot":b.append("g").classed("maplayer",!0);break;case"plotbg":d.bgcircle=b.append("path");break;case"radial-grid":b.style("fill","none"),b.append("g").classed("x",1);break;case"angular-grid":b.style("fill","none"),b.append("g").classed("angular",1);break;case"radial-line":b.append("line").style("fill","none");break;case"angular-line":b.append("path").style("fill","none")}}),l.order()},O.updateLayout=function(a,b){var c=this,d=c.layers,e=a._size,f=b.domain.x,h=b.domain.y;c.xOffset=e.l+e.w*f[0],c.yOffset=e.t+e.h*(1-h[1])
;var j,k,l,n,o,p=c.xLength=e.w*(f[1]-f[0]),q=c.yLength=e.h*(h[1]-h[0]),r=c.sector=b.sector,s=c.sectorBBox=g(r),t=s[2]-s[0],u=s[3]-s[1],v=q/p,y=Math.abs(u/t);v>y?(j=p,k=p*y,o=(q-k)/e.h/2,l=[f[0],f[1]],n=[h[0]+o,h[1]-o]):(j=q/y,k=q,o=(p-j)/e.w/2,l=[f[0]+o,f[1]-o],n=[h[0],h[1]]),c.xLength2=j,c.yLength2=k,c.xDomain2=l,c.yDomain2=n;var A=c.xOffset2=e.l+e.w*l[0],B=c.yOffset2=e.t+e.h*(1-n[1]),C=c.radius=j/t,D=c.cx=A-C*s[0],E=c.cy=B+C*s[3],F=c.cxx=D-A,G=c.cyy=E-B;c.updateRadialAxis(a,b),c.updateRadialAxisTitle(a,b),c.updateAngularAxis(a,b);var H=c.radialAxis.range,I=H[1]-H[0],J=c.xaxis={type:"linear",_id:"x",range:[s[0]*I,s[2]*I],domain:l};z.setConvert(J,a),J.setScale();var K=c.yaxis={type:"linear",_id:"y",range:[s[1]*I,s[3]*I],domain:n};z.setConvert(K,a),K.setScale(),J.isPtWithinRange=function(a){return c.isPtWithinSector(a)},K.isPtWithinRange=function(){return!0},d.frontplot.attr("transform",m(A,B)).call(x.setClipUrl,c._hasClipOnAxisFalse?null:c.clipIds.circle),d.bgcircle.attr({d:i(C,r),transform:m(D,E)}).call(w.fill,b.bgcolor),c.clipPaths.circle.select("path").attr("d",i(C,r)).attr("transform",m(F,G)),c.framework.selectAll(".crisp").classed("crisp",0)},O.updateRadialAxis=function(a,b){var c=this,d=c.gd,g=c.layers,i=c.radius,j=c.cx,k=c.cy,o=a._size,p=b.radialaxis,q=b.sector,r=K(q[0]);c.fillViewInitialKey("radialaxis.angle",p.angle);var s=c.radialAxis=v.extendFlat({},p,{_axislayer:g["radial-axis"],_gridlayer:g["radial-grid"],_id:"x",_pos:0,side:{counterclockwise:"top",clockwise:"bottom"}[p.side],domain:[0,i/o.w],anchor:"free",position:0,_counteraxis:!0});e(s,p,a),z.doAutoRange(s),p.range=s.range.slice(),p._input.range=s.range.slice(),c.fillViewInitialKey("radialaxis.range",s.range.slice()),"auto"===s.tickangle&&r>90&&r<=270&&(s.tickangle=180),s._transfn=function(a){return"translate("+s.l2p(a.x)+",0)"},s._gridpath=function(a){return h(s.r2p(a.x),q)};var t=f(p);c.radialTickLayout!==t&&(g["radial-axis"].selectAll(".xtick").remove(),c.radialTickLayout=t),z.doTicks(d,s,!0),l(g["radial-axis"],p.showticklabels||p.ticks,{transform:m(j,k)+n(-p.angle)}),l(g["radial-grid"],p.showgrid,{transform:m(j,k)}).selectAll("path").attr("transform",null),l(g["radial-line"].select("line"),p.showline,{x1:0,y1:0,x2:i,y2:0,transform:m(j,k)+n(-p.angle)}).attr("stroke-width",p.linewidth).call(w.stroke,p.linecolor)},O.updateRadialAxisTitle=function(a,b,c){var d=this,e=d.gd,f=d.radius,g=d.cx,h=d.cy,i=b.radialaxis,j=d.id+"title",k=void 0!==c?c:i.angle,l=I(k),m=Math.cos(l),n=Math.sin(l),o=0;if(i.title){var p=x.bBox(d.layers["radial-axis"].node()).height,q=i.titlefont.size;o="counterclockwise"===i.side?-p-.4*q:p+.8*q}d.layers["radial-axis-title"]=D.draw(e,j,{propContainer:i,propName:d.id+".radialaxis.title",placeholder:H(e,"Click to enter radial axis title"),attributes:{x:g+f/2*m+o*n,y:h-f/2*n+o*m,"text-anchor":"middle"},transform:{rotate:-k}})},O.updateAngularAxis=function(a,b){function c(a){return A.c2rad(a.x,"degrees")}function d(a){return[o*Math.cos(a),o*Math.sin(a)]}var g=this,h=g.gd,j=g.layers,o=g.radius,s=g.cx,t=g.cy,u=b.angularaxis,x=b.sector,y=x.map(I);g.fillViewInitialKey("angularaxis.rotation",u.rotation);var A=g.angularAxis=v.extendFlat({},u,{_axislayer:j["angular-axis"],_gridlayer:j["angular-grid"],_id:"angular",_pos:0,side:"right",domain:[0,Math.PI],anchor:"free",position:0,_counteraxis:!0});"linear"===A.type?(A.autorange=!1,k(x)?A.range=x.slice():A.range=y.map(A.unTransformRad).map(J),"radians"===A.thetaunit&&(A.tick0=J(A.tick0),A.dtick=J(A.dtick))):"category"===A.type&&(A._tickFilter=function(a){return g.isPtWithinSector({r:g.radialAxis.range[1],rad:A.c2rad(a.x)})}),e(A,u,a),z.doAutoRange(A),A._transfn=function(a){var b=c(a),e=d(b),f=m(s+e[0],t-e[1]),g=r.select(this);return g&&g.node()&&g.classed("ticks")&&(f+=n(-J(b))),f},A._gridpath=function(a){var b=c(a),e=d(b);return"M0,0L"+-e[0]+","+e[1]};var B="outside"!==u.ticks?.7:.5;A._labelx=function(a){var b=c(a),d=A._labelStandoff,e=A._pad;return(0===q(b)?0:Math.cos(b)*(d+e+B*a.fontSize))+p(b)*(a.dx+d+e)},A._labely=function(a){var b=c(a),d=A._labelStandoff,e=A._labelShift,f=A._pad;return a.dy+a.fontSize*G-e+-Math.sin(b)*(d+f+B*a.fontSize)},A._labelanchor=function(a,b){var d=c(b);return 0===q(d)?p(d)>0?"start":"end":"middle"};var C=f(u);g.angularTickLayout!==C&&(j["angular-axis"].selectAll(".angulartick").remove(),g.angularTickLayout=C),z.doTicks(h,A,!0),l(j["angular-line"].select("path"),u.showline,{d:i(o,x),transform:m(s,t)}).attr("stroke-width",u.linewidth).call(w.stroke,u.linecolor)},O.updateFx=function(a,b){this.gd._context.staticPlot||(this.updateAngularDrag(a,b),this.updateRadialDrag(a,b),this.updateMainDrag(a,b))},O.updateMainDrag=function(a,b){function c(a,b){var c=a-x,d=b-y;return Math.sqrt(c*c+d*d)}function d(a,b){return Math.atan2(y-b,a-x)}function e(a,b){return[a*Math.cos(b),a*Math.sin(-b)]}function f(a,b){var c=N.cornerLen,d=N.cornerHalfWidth;if(0===a)return i(2*d,z);var f=c/a/2,g=b-f,h=b+f,j=Math.max(0,Math.min(a,u)),k=j-d,l=j+d;return"M"+e(k,g)+"A"+[k,k]+" 0,0,0 "+e(k,h)+"L"+e(l,h)+"A"+[l,l]+" 0,0,1 "+e(l,g)+"Z"}function g(){H=null,I=null,J=i(u,z),K=!1;var a=l._fullLayout[k.id];L=s(a.bgcolor).getLuminance(),M=B.makeZoombox(o,L,v,w,J),M.attr("fill-rule","evenodd"),O=B.makeCorners(o,v,w),B.clearSelect(o)}function h(a,b){var e=F+a,g=G+b,h=c(F,G),j=Math.min(c(e,g),u),k=d(F,G),l=d(e,g);h<q?h=0:u-h<q?h=u:j<q?j=0:u-j<q&&(j=u);var m,n;Math.abs(j-h)>p?(h<j?(H=h,I=j):(H=j,I=h,l=[k,k=l][0]),m=J+i(I,z)+i(H,z),n=f(H,k)+f(I,l)):(H=null,I=null,m=J,n="M0,0Z"),M.attr("d",m),O.attr("d",n),B.transitionZoombox(M,O,K,L),K=!0}function j(){if(B.removeZoombox(l),null!==H&&null!==I){B.showDoubleClickNotifier(l);var a=k.radialAxis,b=a.range,c=b[1]-b[0],d={};d[k.id+".radialaxis.range"]=[b[0]+H*c/u,b[0]+I*c/u],t.relayout(l,d)}}var k=this,l=k.gd,n=k.layers,o=a._zoomlayer,p=N.MINZOOM,q=N.OFFEDGE,u=k.radius,v=k.cx,w=k.cy,x=k.cxx,y=k.cyy,z=b.sector,D=B.makeDragger(n,"path","maindrag","crosshair");r.select(D).attr("d",i(u,z)).attr("transform",m(v,w));var F,G,H,I,J,K,L,M,O,P={element:D,gd:l,subplot:k.id,plotinfo:{xaxis:k.xaxis,yaxis:k.yaxis},xaxes:[k.xaxis],yaxes:[k.yaxis]};P.prepFn=function(a,b,c){var d=l._fullLayout.dragmode,e=D.getBoundingClientRect();switch(F=b-e.left,G=c-e.top,d){case"zoom":P.moveFn=h,P.doneFn=j,g();break;case"select":case"lasso":E(a,b,c,P,d)}},P.clickFn=function(a,b){if(B.removeZoombox(l),2===a){var c={};for(var d in k.viewInitial)c[k.id+"."+d]=k.viewInitial[d];l.emit("plotly_doubleclick",null),t.relayout(l,c)}C.click(l,b,k.id)},D.onmousemove=function(a){C.hover(l,a,k.id),l._fullLayout._lasthover=D,l._fullLayout._hoversubplot=k.id},D.onmouseout=function(a){l._dragging||A.unhover(l,a)},A.init(P)},O.updateRadialDrag=function(a,b){function c(a,b){if(G)G(a,b);else{var c=[a,-b],d=[Math.cos(q),Math.sin(q)],g=Math.abs(v.dot(c,d)/Math.sqrt(v.dot(c,c)));isNaN(g)||(G=g<.5?e:f)}}function d(){null!==H?t.relayout(h,g.id+".radialaxis.angle",H):null!==K&&t.relayout(h,g.id+".radialaxis.range[1]",K)}function e(a,b){var c=E+a,d=F+b;H=J(Math.atan2(l-d,c-k));var e=m(k,l)+n(-H);i["radial-axis"].attr("transform",e),i["radial-line"].select("line").attr("transform",e);var f=g.gd._fullLayout,h=f[g.id];g.updateRadialAxisTitle(f,h,H)}function f(a,b){var c=v.dot([a,-b],[Math.cos(q),Math.sin(q)]),d=s[1]-w*c/j*.75;if(w>0==d>s[0]){K=o.range[1]=d,z.doTicks(h,g.radialAxis,!0),i["radial-grid"].attr("transform",m(k,l)).selectAll("path").attr("transform",null);var e=K-s[0],f=g.sectorBBox;g.xaxis.range=[f[0]*e,f[2]*e],g.yaxis.range=[f[1]*e,f[3]*e],g.xaxis.setScale(),g.yaxis.setScale();for(var n in g.traceHash){var p=g.traceHash[n],r=v.filterVisible(p),t=p[0][0].trace._module,x=h._fullLayout[g.id];if(t.plot(h,g,r,x),!u.traceIs(n,"gl"))for(var y=0;y<r.length;y++)t.style(h,r[y])}}}var g=this,h=g.gd,i=g.layers,j=g.radius,k=g.cx,l=g.cy,o=g.radialAxis,p=b.radialaxis,q=I(p.angle),s=o.range.slice(),w=s[1]-s[0],x=N.radialDragBoxSize,y=x/2;if(p.visible){var C=B.makeRectDragger(i,"radialdrag","crosshair",-y,-y,x,x),D={element:C,gd:h},E=k+(j+y)*Math.cos(q),F=l-(j+y)*Math.sin(q);r.select(C).attr("transform",m(E,F));var G,H,K;D.prepFn=function(){G=null,H=null,K=null,D.moveFn=c,D.doneFn=d,B.clearSelect(a._zoomlayer)},D.clampFn=function(a,b){return Math.sqrt(a*a+b*b)<N.MINDRAG&&(a=0,b=0),[a,b]},A.init(D)}},O.updateAngularDrag=function(a,b){function c(a,b){return Math.atan2(q+w-b,a-p-w)}function d(a,b){var d=D+a,e=E+b,i=c(d,e),j=J(i-O);H=G+j,h.frontplot.attr("transform",m(f.xOffset2,f.yOffset2)+n([-j,p,q])),f.clipPaths.circle.select("path").attr("transform",m(p,q)+n(j)),Q.each(function(){var a=r.select(this),b=x.getTranslate(a);a.attr("transform",m(b.x,b.y)+n([j]))}),R.each(function(){var a=r.select(this),b=a.select("text"),c=x.getTranslate(a);a.attr("transform",n([j,b.attr("x"),b.attr("y")])+m(c.x,c.y))});var l=f.angularAxis;l.rotation=L(H),"linear"!==l.type||k(s)||(l.range=K.map(I).map(l.unTransformRad).map(J)),M(l),z.doTicks(g,l,!0),f._hasClipOnAxisFalse&&!k(s)&&(f.sector=[K[0]-j,K[1]-j],P.call(x.hideOutsideRangePoints,f));for(var o in f.traceHash)if(u.traceIs(o,"gl")){var t=f.traceHash[o],w=v.filterVisible(t),y=t[0][0].trace._module,A=g._fullLayout[f.id];y.plot(g,f,w,A)}}function e(){R.select("text").attr("transform",null);var a={};a[f.id+".angularaxis.rotation"]=H,t.relayout(g,a)}var f=this,g=f.gd,h=f.layers,i=f.radius,l=f.cx,o=f.cy,p=f.cxx,q=f.cyy,s=b.sector,w=N.angularDragBoxSize,y=B.makeDragger(h,"path","angulardrag","move"),C={element:y,gd:g};r.select(y).attr("d",j(i,i+w,s)).attr("transform",m(l,o)).call(F,"move");var D,E,G,H,K,O,P=h.frontplot.select(".scatterlayer").selectAll(".trace"),Q=P.selectAll(".point"),R=P.selectAll(".textpoint");C.prepFn=function(b,g,h){var i=a[f.id];K=i.sector.slice(),G=i.angularaxis.rotation;var j=y.getBoundingClientRect();D=g-j.left,E=h-j.top,O=c(D,E),C.moveFn=d,C.doneFn=e,B.clearSelect(a._zoomlayer)},A.init(C)},O.isPtWithinSector=function(a){var b=this.sector,c=this.radialAxis,d=c.range,e=c.c2r(a.r),f=K(b[0]),g=K(b[1]);f>g&&(g+=360);var h,i,j=K(J(a.rad)),l=j+360;return d[1]>=d[0]?(h=d[0],i=d[1]):(h=d[1],i=d[0]),e>=h&&e<=i&&(k(b)||j>=f&&j<=g||l>=f&&l<=g)},O.fillViewInitialKey=function(a,b){a in this.viewInitial||(this.viewInitial[a]=b)}},{"../../components/color":618,"../../components/dragelement":640,"../../components/drawing":643,"../../components/fx":660,"../../components/titles":709,"../../constants/alignment":716,"../../lib":743,"../../lib/setcursor":762,"../../plotly":784,"../../registry":873,"../cartesian/axes":789,"../cartesian/dragbox":797,"../cartesian/select":807,"../plots":852,"./constants":853,"./helpers":854,d3:128,tinycolor2:546}],865:[function(a,b,c){"use strict";var d=a("../lib");b.exports=function(a,b,c,e){function f(a,b){return d.coerce(g,h,j,a,b)}for(var g,h,i=e.type,j=e.attributes,k=e.handleDefaults,l=e.partition||"x",m=b._subplots[i],n=m.length,o=0;o<n;o++){var p=m[o];g=a[p]?a[p]:a[p]={},b[p]=h={},f("domain."+l,[o/n,(o+1)/n]),f("domain."+{x:"y",y:"x"}[l]),e.id=p,k(g,h,f,e)}}},{"../lib":743}],866:[function(a,b,c){"use strict";var d=a("./ternary"),e=a("../../plots/get_data").getSubplotCalcData,f=a("../../lib").counterRegex;c.name="ternary",c.attr="subplot",c.idRoot="ternary",c.idRegex=c.attrRegex=f("ternary"),c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){for(var b=a._fullLayout,c=a.calcdata,f=b._subplots.ternary,g=0;g<f.length;g++){var h=f[g],i=e(c,"ternary",h),j=b[h]._subplot;j||(j=new d({id:h,graphDiv:a,container:b._ternarylayer.node()},b),b[h]._subplot=j),j.plot(i,b,a._promises)}},c.clean=function(a,b,c,d){for(var e=d._subplots.ternary||[],f=0;f<e.length;f++){var g=e[f],h=d[g]._subplot;!b[g]&&h&&(h.plotContainer.remove(),h.clipDef.remove(),h.clipDefRelative.remove(),h.layers["a-title"].remove(),h.layers["b-title"].remove(),h.layers["c-title"].remove())}}},{"../../lib":743,"../../plots/get_data":826,"./layout/attributes":867,"./layout/defaults":870,"./layout/layout_attributes":871,"./ternary":872}],867:[function(a,b,c){"use strict";b.exports={subplot:{valType:"subplotid",dflt:"ternary",editType:"calc"}}},{}],868:[function(a,b,c){"use strict";var d=a("../../cartesian/layout_attributes"),e=a("../../../lib/extend").extendFlat;b.exports={title:d.title,titlefont:d.titlefont,color:d.color,tickmode:d.tickmode,nticks:e({},d.nticks,{dflt:6,min:1}),tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:d.ticks,ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,showtickprefix:d.showtickprefix,tickprefix:d.tickprefix,showticksuffix:d.showticksuffix,ticksuffix:d.ticksuffix,showexponent:d.showexponent,exponentformat:d.exponentformat,separatethousands:d.separatethousands,tickfont:d.tickfont,tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,hoverformat:d.hoverformat,showline:e({},d.showline,{dflt:!0}),linecolor:d.linecolor,linewidth:d.linewidth,showgrid:e({},d.showgrid,{dflt:!0}),gridcolor:d.gridcolor,gridwidth:d.gridwidth,layer:d.layer,min:{valType:"number",dflt:0,min:0}}},{"../../../lib/extend":732,"../../cartesian/layout_attributes":801}],869:[function(a,b,c){"use strict";var d=a("../../../lib"),e=a("./axis_attributes"),f=a("../../cartesian/tick_label_defaults"),g=a("../../cartesian/tick_mark_defaults"),h=a("../../cartesian/tick_value_defaults"),i=a("../../cartesian/line_grid_defaults");b.exports=function(a,b,c){function j(c,f){return d.coerce(a,b,e,c,f)}b.type="linear";var k=j("color"),l=k===a.color?k:c.font.color,m=b._name,n=m.charAt(0).toUpperCase(),o="Component "+n,p=j("title",o);b._hovertitle=p===o?p:n,d.coerceFont(j,"titlefont",{family:c.font.family,size:Math.round(1.2*c.font.size),color:l}),j("min"),h(a,b,j,"linear"),f(a,b,j,"linear",{noHover:!1}),g(a,b,j,{outerTicks:!0}),j("showticklabels")&&(d.coerceFont(j,"tickfont",{family:c.font.family,size:c.font.size,color:l}),j("tickangle"),j("tickformat")),i(a,b,j,{dfltColor:k,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:e}),j("hoverformat"),j("layer")}},{"../../../lib":743,"../../cartesian/line_grid_defaults":803,"../../cartesian/tick_label_defaults":809,"../../cartesian/tick_mark_defaults":810,"../../cartesian/tick_value_defaults":811,"./axis_attributes":868}],870:[function(a,b,c){"use strict";function d(a,b,c,d){var f=c("bgcolor"),g=c("sum");d.bgColor=e.combine(f,d.paper_bgcolor);for(var j,k,l,m=0;m<i.length;m++)j=i[m],k=a[j]||{},l=b[j]={_name:j,type:"linear"},h(k,l,d);var n=b.aaxis,o=b.baxis,p=b.caxis;n.min+o.min+p.min>=g&&(n.min=0,o.min=0,p.min=0,a.aaxis&&delete a.aaxis.min,a.baxis&&delete a.baxis.min,a.caxis&&delete a.caxis.min)}var e=a("../../../components/color"),f=a("../../subplot_defaults"),g=a("./layout_attributes"),h=a("./axis_defaults"),i=["aaxis","baxis","caxis"];b.exports=function(a,b,c){f(a,b,c,{type:"ternary",attributes:g,handleDefaults:d,font:b.font,paper_bgcolor:b.paper_bgcolor})}},{"../../../components/color":618,"../../subplot_defaults":865,"./axis_defaults":869,"./layout_attributes":871}],871:[function(a,b,c){"use strict";var d=a("../../../components/color/attributes"),e=a("../../domain_attributes"),f=a("./axis_attributes"),g=a("../../../plot_api/edit_types").overrideAll;b.exports=g({domain:e({name:"ternary"}),bgcolor:{valType:"color",dflt:d.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root")},{"../../../components/color/attributes":617,"../../../plot_api/edit_types":773,"../../domain_attributes":815,"./axis_attributes":868}],872:[function(a,b,c){"use strict";function d(a,b){this.id=a.id,this.graphDiv=a.graphDiv,this.init(b),this.makeFramework(b)}function e(a){f.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var f=a("d3"),g=a("tinycolor2"),h=a("../../plotly"),i=a("../../lib"),j=i._,k=a("../../components/color"),l=a("../../components/drawing"),m=a("../cartesian/set_convert"),n=a("../../lib/extend").extendFlat,o=a("../plots"),p=a("../cartesian/axes"),q=a("../../components/dragelement"),r=a("../../components/fx"),s=a("../../components/titles"),t=a("../cartesian/select"),u=a("../cartesian/constants");b.exports=d;var v=d.prototype;v.init=function(a){this.container=a._ternarylayer,this.defs=a._defs,this.layoutId=a._uid,this.traceHash={},this.layers={}},v.plot=function(a,b){var c=this,d=b[c.id],e=b._size;c._hasClipOnAxisFalse=!1;for(var f=0;f<a.length;f++){if(!1===a[f][0].trace.cliponaxis){c._hasClipOnAxisFalse=!0;break}}c.updateLayers(d),c.adjustLayout(d,e),o.generalUpdatePerTraceModule(c.graphDiv,c,a,d),c.layers.plotbg.select("path").call(k.fill,d.bgcolor)},v.makeFramework=function(a){var b=this,c=a[b.id],d=b.clipId="clip"+b.layoutId+b.id;b.clipDef=a._clips.selectAll("#"+d).data([0]),b.clipDef.enter().append("clipPath").attr("id",d).append("path").attr("d","M0,0Z");var e=b.clipIdRelative="clip-relative"+b.layoutId+b.id;b.clipDefRelative=a._clips.selectAll("#"+e).data([0]),b.clipDefRelative.enter().append("clipPath").attr("id",e).append("path").attr("d","M0,0Z"),b.plotContainer=b.container.selectAll("g."+b.id).data([0]),b.plotContainer.enter().append("g").classed(b.id,!0),b.updateLayers(c),l.setClipUrl(b.layers.backplot,d),l.setClipUrl(b.layers.grids,d)},v.updateLayers=function(a){var b=this,c=b.layers,d=["draglayer","plotbg","backplot","grids"];"below traces"===a.aaxis.layer&&d.push("aaxis","aline"),"below traces"===a.baxis.layer&&d.push("baxis","bline"),"below traces"===a.caxis.layer&&d.push("caxis","cline"),d.push("frontplot"),"above traces"===a.aaxis.layer&&d.push("aaxis","aline"),"above traces"===a.baxis.layer&&d.push("baxis","bline"),"above traces"===a.caxis.layer&&d.push("caxis","cline");var e=b.plotContainer.selectAll("g.toplevel").data(d,String),g=["agrid","bgrid","cgrid"];e.enter().append("g").attr("class",function(a){return"toplevel "+a}).each(function(a){var b=f.select(this);c[a]=b,"frontplot"===a?b.append("g").classed("scatterlayer",!0):"backplot"===a?b.append("g").classed("maplayer",!0):"plotbg"===a?b.append("path").attr("d","M0,0Z"):"aline"===a||"bline"===a||"cline"===a?b.append("path"):"grids"===a&&g.forEach(function(a){c[a]=b.append("g").classed("grid "+a,!0);var d="bgrid"===a?"x":"y";c[a].append("g").classed(d,!0)})}),e.order()};var w=Math.sqrt(4/3);v.adjustLayout=function(a,b){var c,d,e,f,g,h,i=this,j=a.domain,o=(j.x[0]+j.x[1])/2,p=(j.y[0]+j.y[1])/2,q=j.x[1]-j.x[0],r=j.y[1]-j.y[0],s=q*b.w,t=r*b.h,u=a.sum,v=a.aaxis.min,x=a.baxis.min,y=a.caxis.min;s>w*t?(f=t,e=f*w):(e=s,f=e/w),g=q*e/s,h=r*f/t,c=b.l+b.w*o-e/2,d=b.t+b.h*(1-p)-f/2,i.x0=c,i.y0=d,i.w=e,i.h=f,i.sum=u,i.xaxis={type:"linear",range:[v+2*y-u,u-v-2*x],domain:[o-g/2,o+g/2],_id:"x"},m(i.xaxis,i.graphDiv._fullLayout),i.xaxis.setScale(),i.xaxis.isPtWithinRange=function(a){return a.a>=i.aaxis.range[0]&&a.a<=i.aaxis.range[1]&&a.b>=i.baxis.range[1]&&a.b<=i.baxis.range[0]&&a.c>=i.caxis.range[1]&&a.c<=i.caxis.range[0]},i.yaxis={type:"linear",range:[v,u-x-y],domain:[p-h/2,p+h/2],_id:"y"},m(i.yaxis,i.graphDiv._fullLayout),i.yaxis.setScale(),i.yaxis.isPtWithinRange=function(){return!0};var z=i.yaxis.domain[0],A=i.aaxis=n({},a.aaxis,{visible:!0,range:[v,u-x-y],side:"left",_counterangle:30,tickangle:(+a.aaxis.tickangle||0)-30,domain:[z,z+h*w],_axislayer:i.layers.aaxis,_gridlayer:i.layers.agrid,_pos:0,_id:"y",_length:e,_gridpath:"M0,0l"+f+",-"+e/2});m(A,i.graphDiv._fullLayout),A.setScale();var B=i.baxis=n({},a.baxis,{visible:!0,range:[u-v-y,x],side:"bottom",_counterangle:30,domain:i.xaxis.domain,_axislayer:i.layers.baxis,_gridlayer:i.layers.bgrid,_counteraxis:i.aaxis,_pos:0,_id:"x",_length:e,_gridpath:"M0,0l-"+e/2+",-"+f});m(B,i.graphDiv._fullLayout),B.setScale(),A._counteraxis=B;var C=i.caxis=n({},a.caxis,{visible:!0,range:[u-v-x,y],side:"right",_counterangle:30,tickangle:(+a.caxis.tickangle||0)+30,domain:[z,z+h*w],_axislayer:i.layers.caxis,_gridlayer:i.layers.cgrid,_counteraxis:i.baxis,_pos:0,_id:"y",_length:e,_gridpath:"M0,0l-"+f+","+e/2});m(C,i.graphDiv._fullLayout),C.setScale();var D="M"+c+","+(d+f)+"h"+e+"l-"+e/2+",-"+f+"Z";i.clipDef.select("path").attr("d",D),i.layers.plotbg.select("path").attr("d",D);var E="M0,"+f+"h"+e+"l-"+e/2+",-"+f+"Z";i.clipDefRelative.select("path").attr("d",E);var F="translate("+c+","+d+")";i.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",F),i.clipDefRelative.select("path").attr("transform",null);var G="translate("+(c-B._offset)+","+(d+f)+")";i.layers.baxis.attr("transform",G),i.layers.bgrid.attr("transform",G);var H="translate("+(c+e/2)+","+d+")rotate(30)translate(0,-"+A._offset+")";i.layers.aaxis.attr("transform",H),i.layers.agrid.attr("transform",H);var I="translate("+(c+e/2)+","+d+")rotate(-30)translate(0,-"+C._offset+")";i.layers.caxis.attr("transform",I),i.layers.cgrid.attr("transform",I),i.drawAxes(!0),i.plotContainer.selectAll(".crisp").classed("crisp",!1),i.layers.aline.select("path").attr("d",A.showline?"M"+c+","+(d+f)+"l"+e/2+",-"+f:"M0,0").call(k.stroke,A.linecolor||"#000").style("stroke-width",(A.linewidth||0)+"px"),i.layers.bline.select("path").attr("d",B.showline?"M"+c+","+(d+f)+"h"+e:"M0,0").call(k.stroke,B.linecolor||"#000").style("stroke-width",(B.linewidth||0)+"px"),i.layers.cline.select("path").attr("d",C.showline?"M"+(c+e/2)+","+d+"l"+e/2+","+f:"M0,0").call(k.stroke,C.linecolor||"#000").style("stroke-width",(C.linewidth||0)+"px"),i.graphDiv._context.staticPlot||i.initInteractions(),l.setClipUrl(i.layers.frontplot,i._hasClipOnAxisFalse?null:i.clipId)},v.drawAxes=function(a){var b=this,c=b.graphDiv,d=b.id.substr(7)+"title",e=b.aaxis,f=b.baxis,g=b.caxis;if(p.doTicks(c,e,!0),p.doTicks(c,f,!0),p.doTicks(c,g,!0),a){var h=Math.max(e.showticklabels?e.tickfont.size/2:0,(g.showticklabels?.75*g.tickfont.size:0)+("outside"===g.ticks?.87*g.ticklen:0));b.layers["a-title"]=s.draw(c,"a"+d,{propContainer:e,propName:b.id+".aaxis.title",placeholder:j(c,"Click to enter Component A title"),attributes:{x:b.x0+b.w/2,y:b.y0-e.titlefont.size/3-h,"text-anchor":"middle"}});var i=(f.showticklabels?f.tickfont.size:0)+("outside"===f.ticks?f.ticklen:0)+3;b.layers["b-title"]=s.draw(c,"b"+d,{propContainer:f,propName:b.id+".baxis.title",placeholder:j(c,"Click to enter Component B title"),attributes:{x:b.x0-i,y:b.y0+b.h+.83*f.titlefont.size+i,"text-anchor":"middle"}}),b.layers["c-title"]=s.draw(c,"c"+d,{propContainer:g,propName:b.id+".caxis.title",placeholder:j(c,"Click to enter Component C title"),attributes:{x:b.x0+b.w+i,y:b.y0+b.h+.83*g.titlefont.size+i,"text-anchor":"middle"}})}};var x=u.MINZOOM/2+.87,y="m-0.87,.5h"+x+"v3h-"+(x+5.2)+"l"+(x/2+2.6)+",-"+(.87*x+4.5)+"l2.6,1.5l-"+x/2+","+.87*x+"Z",z="m0.87,.5h-"+x+"v3h"+(x+5.2)+"l-"+(x/2+2.6)+",-"+(.87*x+4.5)+"l-2.6,1.5l"+x/2+","+.87*x+"Z",A="m0,1l"+x/2+","+.87*x+"l2.6,-1.5l-"+(x/2+2.6)+",-"+(.87*x+4.5)+"l-"+(x/2+2.6)+","+(.87*x+4.5)+"l2.6,1.5l"+x/2+",-"+.87*x+"Z",B=!0;v.initInteractions=function(){function a(a,b,c){var d=L.getBoundingClientRect();v=b-d.left,x=c-d.top,C={a:K.aaxis.range[0],b:K.baxis.range[1],c:K.caxis.range[1]},E=C,D=K.aaxis.range[1]-C.a,F=g(K.graphDiv._fullLayout[K.id].bgcolor).getLuminance(),G="M0,"+K.h+"L"+K.w/2+", 0L"+K.w+","+K.h+"Z",H=!1,I=N.append("path").attr("class","zoombox").attr("transform","translate("+K.x0+", "+K.y0+")").style({fill:F>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",G),J=N.append("path").attr("class","zoombox-corners").attr("transform","translate("+K.x0+", "+K.y0+")").style({fill:k.background,stroke:k.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),s()}function b(a,b){return 1-b/K.h}function c(a,b){return 1-(a+(K.h-b)/Math.sqrt(3))/K.w}function d(a,b){return(a-(K.h-b)/Math.sqrt(3))/K.w}function f(a,e){var f=v+a,g=x+e,h=Math.max(0,Math.min(1,b(v,x),b(f,g))),i=Math.max(0,Math.min(1,c(v,x),c(f,g))),j=Math.max(0,Math.min(1,d(v,x),d(f,g))),k=(h/2+j)*K.w,l=(1-h/2-i)*K.w,m=(k+l)/2,n=l-k,o=(1-h)*K.h,p=o-n/w;n<u.MINZOOM?(E=C,I.attr("d",G),J.attr("d","M0,0Z")):(E={a:C.a+h*D,b:C.b+i*D,c:C.c+j*D},I.attr("d",G+"M"+k+","+o+"H"+l+"L"+m+","+p+"L"+k+","+o+"Z"),J.attr("d","M"+v+","+x+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+k+","+o+y+"M"+l+","+o+z+"M"+m+","+p+A)),H||(I.transition().style("fill",F>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),J.transition().style("opacity",1).duration(200),H=!0)}function m(){if(e(M),E!==C){var a={};a[K.id+".aaxis.min"]=E.a,a[K.id+".baxis.min"]=E.b,a[K.id+".caxis.min"]=E.c,h.relayout(M,a),B&&M.data&&M._context.showTips&&(i.notifier(j(M,"Double-click to zoom back out"),"long"),B=!1)}}function n(){C={a:K.aaxis.range[0],b:K.baxis.range[1],c:K.caxis.range[1]},E=C}function o(a,b){var c=a/K.xaxis._m,d=b/K.yaxis._m;E={a:C.a-d,b:C.b+(c+d)/2,c:C.c-(c-d)/2};var e=[E.a,E.b,E.c].sort(),f={a:e.indexOf(E.a),b:e.indexOf(E.b),c:e.indexOf(E.c)};e[0]<0&&(e[1]+e[0]/2<0?(e[2]+=e[0]+e[1],e[0]=e[1]=0):(e[2]+=e[0]/2,e[1]+=e[0]/2,e[0]=0),E={a:e[f.a],b:e[f.b],c:e[f.c]},b=(C.a-E.a)*K.yaxis._m,a=(C.c-E.c-C.b+E.b)*K.xaxis._m);var g="translate("+(K.x0+a)+","+(K.y0+b)+")";K.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",g);var h="translate("+-a+","+-b+")";K.clipDefRelative.select("path").attr("transform",h),K.aaxis.range=[E.a,K.sum-E.b-E.c],K.baxis.range=[K.sum-E.a-E.c,E.b],K.caxis.range=[K.sum-E.a-E.b,E.c],K.drawAxes(!1),K.plotContainer.selectAll(".crisp").classed("crisp",!1),K._hasClipOnAxisFalse&&K.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,K)}function p(){var a={};a[K.id+".aaxis.min"]=E.a,a[K.id+".baxis.min"]=E.b,a[K.id+".caxis.min"]=E.c,h.relayout(M,a)}function s(){N.selectAll(".select-outline").remove()}var v,x,C,D,E,F,G,H,I,J,K=this,L=K.layers.plotbg.select("path").node(),M=K.graphDiv,N=M._fullLayout._zoomlayer,O={element:L,gd:M,plotinfo:{xaxis:K.xaxis,yaxis:K.yaxis},subplot:K.id,prepFn:function(b,c,d){O.xaxes=[K.xaxis],O.yaxes=[K.yaxis];var e=M._fullLayout.dragmode;b.shiftKey&&(e="pan"===e?"zoom":"pan"),O.minDrag="lasso"===e?1:void 0,"zoom"===e?(O.moveFn=f,O.doneFn=m,a(b,c,d)):"pan"===e?(O.moveFn=o,O.doneFn=p,n(),s()):"select"!==e&&"lasso"!==e||t(b,c,d,O,e)},clickFn:function(a,b){if(e(M),2===a){var c={};c[K.id+".aaxis.min"]=0,c[K.id+".baxis.min"]=0,c[K.id+".caxis.min"]=0,M.emit("plotly_doubleclick",null),h.relayout(M,c)}r.click(M,b,K.id)}};L.onmousemove=function(a){r.hover(M,a,K.id),M._fullLayout._lasthover=L,M._fullLayout._hoversubplot=K.id},L.onmouseout=function(a){M._dragging||q.unhover(M,a)},q.init(O)}},{"../../components/color":618,"../../components/dragelement":640,"../../components/drawing":643,"../../components/fx":660,"../../components/titles":709,"../../lib":743,"../../lib/extend":732,"../../plotly":784,"../cartesian/axes":789,"../cartesian/constants":794,"../cartesian/select":807,"../cartesian/set_convert":808,"../plots":852,d3:128,tinycolor2:546}],873:[function(a,b,c){"use strict";function d(a){if(a.layoutAttributes){var b=a.layoutAttributes._arrayAttrRegexps;if(b)for(var d=0;d<b.length;d++)k(c.layoutArrayRegexes,b[d])}}function e(a,b){var d=c.componentsRegistry[a].schema;if(d&&d.traces){var e=d.traces[b];e&&n(c.modules[b]._module.attributes,e)}}function f(a,b){var d=c.componentsRegistry[a].schema;if(d&&d.transforms){var e=d.transforms[b];e&&n(c.transformsRegistry[b].attributes,e)}}function g(a,b){var d=c.componentsRegistry[a].schema;if(d&&d.subplots){var e=c.subplotsRegistry[b],f=e.layoutAttributes,g="subplot"===e.attr?e.name:e.attr;Array.isArray(g)&&(g=g[0]);var h=d.subplots[g];f&&h&&n(f,h)}}function h(a){return"object"==typeof a&&(a=a.type),a}var i=a("./lib/loggers"),j=a("./lib/noop"),k=a("./lib/push_unique"),l=a("./lib/extend"),m=l.extendFlat,n=l.extendDeepAll,o=a("./plots/attributes"),p=a("./plots/layout_attributes");c.modules={},c.allCategories={},c.allTypes=[],c.subplotsRegistry={},c.transformsRegistry={},c.componentsRegistry={},c.layoutArrayContainers=[],c.layoutArrayRegexes=[],c.traceLayoutAttributes={},c.localeRegistry={},c.register=function(a,b,d,f){if(c.modules[b])return void i.log("Type "+b+" already registered");for(var g={},h=0;h<d.length;h++)g[d[h]]=!0,c.allCategories[d[h]]=!0;c.modules[b]={_module:a,categories:g},f&&Object.keys(f).length&&(c.modules[b].meta=f),c.allTypes.push(b);for(var j in c.componentsRegistry)e(j,b);a.layoutAttributes&&m(c.traceLayoutAttributes,a.layoutAttributes)},c.registerSubplot=function(a){var b=a.name;if(c.subplotsRegistry[b])return void i.log("Plot type "+b+" already registered.");d(a),c.subplotsRegistry[b]=a;for(var e in c.componentsRegistry)g(e,a.name)},c.registerComponent=function(a){var b=a.name;c.componentsRegistry[b]=a,a.layoutAttributes&&(a.layoutAttributes._isLinkedToArray&&k(c.layoutArrayContainers,b),d(a));for(var h in c.modules)e(b,h);for(var i in c.subplotsRegistry)g(b,i);for(var j in c.transformsRegistry)f(b,j);a.schema&&a.schema.layout&&n(p,a.schema.layout)},c.registerTransform=function(a){c.transformsRegistry[a.name]=a;for(var b in c.componentsRegistry)f(b,a.name)},c.getModule=function(a){var b=c.modules[h(a)];return!!b&&b._module},c.traceIs=function(a,b){if("various"===(a=h(a)))return!1;var d=c.modules[a];return d||(a&&"area"!==a&&i.log("Unrecognized trace type "+a+"."),d=c.modules[o.type.dflt]),!!d.categories[b]},c.getTransformIndices=function(a,b){for(var c=[],d=a.transforms||[],e=0;e<d.length;e++)d[e].type===b&&c.push(e);return c},c.hasTransform=function(a,b){for(var c=a.transforms||[],d=0;d<c.length;d++)if(c[d].type===b)return!0;return!1},c.getComponentMethod=function(a,b){var d=c.componentsRegistry[a];return d?d[b]||j:j},c.registerLocale=function(a){var b=a.name,d=b.split("-")[0],e=a.dictionary,f=a.format,g=e&&Object.keys(e).length,h=f&&Object.keys(f).length,i=c.localeRegistry,j=i[b];if(j||(i[b]=j={}),d!==b){var k=i[d];k||(i[d]=k={}),g&&k.dictionary===j.dictionary&&(k.dictionary=e),h&&k.format===j.format&&(k.format=f)}g&&(j.dictionary=e),h&&(j.format=f)}},{"./lib/extend":732,"./lib/loggers":748,"./lib/noop":752,"./lib/push_unique":756,"./plots/attributes":787,"./plots/layout_attributes":843}],874:[function(a,b,c){"use strict";function d(a){var b;switch(a){case"themes__thumb":b={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":b={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:b={}}return b}function e(a){return["xaxis","yaxis","zaxis"].indexOf(a.slice(0,5))>-1}var f=a("../lib"),g=f.extendFlat,h=f.extendDeep;b.exports=function(a,b){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var c,f=a.data,i=a.layout,j=h([],f),k=h({},i,d(b.tileClass)),l=a._context||{};if(b.width&&(k.width=b.width),b.height&&(k.height=b.height),"thumbnail"===b.tileClass||"themes__thumb"===b.tileClass){k.annotations=[];var m=Object.keys(k);for(c=0;c<m.length;c++)e(m[c])&&(k[m[c]].title="");for(c=0;c<j.length;c++){var n=j[c];n.showscale=!1,n.marker&&(n.marker.showscale=!1),"pie"===n.type&&(n.textposition="none")}}if(Array.isArray(b.annotations))for(c=0;c<b.annotations.length;c++)k.annotations.push(b.annotations[c]);var o=Object.keys(k).filter(function(a){return a.match(/^scene\d*$/)});if(o.length){var p={};for("thumbnail"===b.tileClass&&(p={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),c=0;c<o.length;c++){var q=k[o[c]];q.xaxis||(q.xaxis={}),q.yaxis||(q.yaxis={}),q.zaxis||(q.zaxis={}),g(q.xaxis,p),g(q.yaxis,p),g(q.zaxis,p),q._scene=null}}var r=document.createElement("div");b.tileClass&&(r.className=b.tileClass);var s={gd:r,td:r,layout:k,data:j,config:{staticPlot:void 0===b.staticPlot||b.staticPlot,plotGlPixelRatio:void 0===b.plotGlPixelRatio?2:b.plotGlPixelRatio,displaylogo:b.displaylogo||!1,showLink:b.showLink||!1,showTips:b.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return"transparent"!==b.setBackground&&(s.config.setBackground=b.setBackground||"opaque"),s.gd.defaultLayout=d(b.tileClass),s}},{"../lib":743}],875:[function(a,b,c){"use strict";function d(a,b){return b=b||{},b.format=b.format||"png",new Promise(function(c,d){a._snapshotInProgress&&d(new Error("Snapshotting already in progress.")),
f.isIE()&&"svg"!==b.format&&d(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),a._snapshotInProgress=!0;var h=e(a,b),i=b.filename||a.fn||"newplot";i+="."+b.format,h.then(function(b){return a._snapshotInProgress=!1,g(b,i)}).then(function(a){c(a)}).catch(function(b){a._snapshotInProgress=!1,d(b)})})}var e=a("../plot_api/to_image"),f=a("../lib"),g=a("./filesaver");b.exports=d},{"../lib":743,"../plot_api/to_image":782,"./filesaver":876}],876:[function(a,b,c){"use strict";var d=function(a,b){var c=document.createElement("a"),d="download"in c,e=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(f,g){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&g(new Error("IE < 10 unsupported")),e&&(document.location.href="data:application/octet-stream"+a.slice(a.search(/[,;]/)),f(b)),b||(b="download"),d&&(c.href=a,c.download=b,document.body.appendChild(c),c.click(),document.body.removeChild(c),f(b)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var h=a.split(/^data:image\/svg\+xml,/)[1],i=decodeURIComponent(h);navigator.msSaveBlob(new Blob([i]),b),f(b)}g(new Error("download error"))})};b.exports=d},{}],877:[function(a,b,c){"use strict";c.getDelay=function(a){return a._has&&(a._has("gl3d")||a._has("gl2d"))?500:0},c.getRedrawFunc=function(a){var b=a._fullLayout||{};if(b._has&&b._has("polar")||!a.data||!a.data[0]||!a.data[0].r)return function(){(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()})}}},{}],878:[function(a,b,c){"use strict";var d=a("./helpers"),e={getDelay:d.getDelay,getRedrawFunc:d.getRedrawFunc,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage"),downloadImage:a("./download")};b.exports=e},{"./cloneplot":874,"./download":875,"./helpers":877,"./svgtoimg":879,"./toimage":880,"./tosvg":881}],879:[function(a,b,c){"use strict";function d(a){var b=a.emitter||new f,c=new Promise(function(d,f){var g=window.Image,h=a.svg,i=a.format||"png";if(e.isIE()&&"svg"!==i){var j=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return f(j),a.promise?c:b.emit("error",j)}var k=a.canvas,l=a.scale||1,m=a.width||300,n=a.height||150,o=l*m,p=l*n,q=k.getContext("2d"),r=new g,s="data:image/svg+xml,"+encodeURIComponent(h);k.width=o,k.height=p,r.onload=function(){var c;switch("svg"!==i&&q.drawImage(r,0,0,o,p),i){case"jpeg":c=k.toDataURL("image/jpeg");break;case"png":c=k.toDataURL("image/png");break;case"webp":c=k.toDataURL("image/webp");break;case"svg":c=s;break;default:var e="Image format is not jpeg, png, svg or webp.";if(f(new Error(e)),!a.promise)return b.emit("error",e)}d(c),a.promise||b.emit("success",c)},r.onerror=function(c){if(f(c),!a.promise)return b.emit("error",c)},r.src=s});return a.promise?c:b}var e=a("../lib"),f=a("events").EventEmitter;b.exports=d},{"../lib":743,events:138}],880:[function(a,b,c){"use strict";function d(a,b){function c(){var a=h.getDelay(m._fullLayout);setTimeout(function(){var a=j(m),c=document.createElement("canvas");c.id=g.randstr(),d=k({format:b.format,width:m._fullLayout.width,height:m._fullLayout.height,canvas:c,emitter:d,svg:a}),d.clean=function(){m&&document.body.removeChild(m)}},a)}var d=new e,l=i(a,{format:"png"}),m=l.gd;m.style.position="absolute",m.style.left="-5000px",document.body.appendChild(m);var n=h.getRedrawFunc(m);return f.plot(m,l.data,l.layout,l.config).then(n).then(c).catch(function(a){d.emit("error",a)}),d}var e=a("events").EventEmitter,f=a("../plotly"),g=a("../lib"),h=a("./helpers"),i=a("./cloneplot"),j=a("./tosvg"),k=a("./svgtoimg");b.exports=d},{"../lib":743,"../plotly":784,"./cloneplot":874,"./helpers":877,"./svgtoimg":879,"./tosvg":881,events:138}],881:[function(a,b,c){"use strict";function d(a){var b=f.select("body").append("div").style({display:"none"}).html(""),c=a.replace(/(&[^;]*;)/gi,function(a){return"&lt;"===a?"&#60;":"&rt;"===a?"&#62;":-1!==a.indexOf("<")||-1!==a.indexOf(">")?"":b.html(a).text()});return b.remove(),c}function e(a){return a.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}var f=a("d3"),g=a("../lib"),h=a("../components/drawing"),i=a("../components/color"),j=a("../constants/xmlns_namespaces"),k=/"/g,l=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");b.exports=function(a,b,c){var m,n=a._fullLayout,o=n._paper,p=n._toppaper,q=n.width,r=n.height;o.insert("rect",":first-child").call(h.setRect,0,0,q,r).call(i.fill,n.paper_bgcolor);var s=n._basePlotModules||[];for(m=0;m<s.length;m++){var t=s[m];t.toSVG&&t.toSVG(a)}if(p){var u=p.node().childNodes,v=Array.prototype.slice.call(u);for(m=0;m<v.length;m++){var w=v[m];w.childNodes.length&&o.node().appendChild(w)}}n._draggers&&n._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var a=f.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)return void a.remove();a.style({visibility:null,display:null});var b=this.style.fontFamily;b&&-1!==b.indexOf('"')&&a.style("font-family",b.replace(k,"TOBESTRIPPED"))}),o.selectAll(".point,.scatterpts").each(function(){var a=f.select(this),b=this.style.fill;b&&-1!==b.indexOf("url(")&&a.style("fill",b.replace(k,"TOBESTRIPPED"))}),"pdf"!==b&&"eps"!==b||o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(j.xmlns,"xmlns",j.svg),o.node().setAttributeNS(j.xmlns,"xmlns:xlink",j.xlink),"svg"===b&&c&&(o.attr("width",c*q),o.attr("height",c*r),o.attr("viewBox","0 0 "+q+" "+r));var x=(new window.XMLSerializer).serializeToString(o.node());return x=d(x),x=e(x),x=x.replace(l,"'"),g.isIE()&&(x=x.replace(/"/gi,"'"),x=x.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),x=x.replace(/(\\')/gi,'"')),x}},{"../components/color":618,"../components/drawing":643,"../constants/xmlns_namespaces":723,"../lib":743,d3:128}],882:[function(a,b,c){"use strict";var d=a("../../lib").mergeArray;b.exports=function(a,b){for(var c=0;c<a.length;c++)a[c].i=c;d(b.text,a,"tx"),d(b.hovertext,a,"htx");var e=b.marker;if(e){d(e.opacity,a,"mo"),d(e.color,a,"mc");var f=e.line;f&&(d(f.color,a,"mlc"),d(f.width,a,"mlw"))}}},{"../../lib":743}],883:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/color_attributes"),f=a("../../components/errorbars/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../plots/font_attributes"),i=a("../../lib/extend").extendFlat,j=h({editType:"calc",arrayOk:!0}),k=d.marker,l=k.line,m=i({},l.width,{dflt:0}),n=i({width:m,editType:"calc"},e("marker.line")),o=i({line:n,editType:"calc"},e("marker"),{showscale:k.showscale,colorbar:g,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});b.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,hovertext:d.hovertext,textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:i({},j,{}),insidetextfont:i({},j,{}),outsidetextfont:i({},j,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:o,selected:{marker:{opacity:d.selected.marker.opacity,color:d.selected.marker.color,editType:"style"},textfont:d.selected.textfont,editType:"style"},unselected:{marker:{opacity:d.unselected.marker.opacity,color:d.unselected.marker.color,editType:"style"},textfont:d.unselected.textfont,editType:"style"},r:d.r,t:d.t,error_y:f,error_x:f,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":619,"../../components/colorscale/color_attributes":626,"../../components/errorbars/attributes":645,"../../lib/extend":732,"../../plots/font_attributes":816,"../scatter/attributes":1066}],884:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),f=a("../../components/colorscale/has_colorscale"),g=a("../../components/colorscale/calc"),h=a("./arrays_to_calcdata"),i=a("../scatter/calc_selection");b.exports=function(a,b){var c,j,k,l,m,n=e.getFromId(a,b.xaxis||"x"),o=e.getFromId(a,b.yaxis||"y"),p=b.orientation||(b.x&&!b.y?"h":"v");"h"===p?(c=n,k=n.makeCalcdata(b,"x"),j=o.makeCalcdata(b,"y"),m=b.xcalendar):(c=o,k=o.makeCalcdata(b,"y"),j=n.makeCalcdata(b,"x"),m=b.ycalendar);var q=Math.min(j.length,k.length),r=new Array(q);for(l=0;l<q;l++)r[l]={p:j[l],s:k[l]},b.ids&&(r[l].id=String(b.ids[l]));var s,t=b.base;if(Array.isArray(t)){for(l=0;l<Math.min(t.length,r.length);l++)s=c.d2c(t[l],0,m),d(s)?(r[l].b=+s,r[l].hasB=1):r[l].b=0;for(;l<r.length;l++)r[l].b=0}else{s=c.d2c(t,0,m);var u=d(s);for(s=u?s:0,l=0;l<r.length;l++)r[l].b=s,u&&(r[l].hasB=1)}return f(b,"marker")&&g(b,b.marker.color,"marker","c"),f(b,"marker.line")&&g(b,b.marker.line.color,"marker.line","c"),h(r,b),i(r,b),r}},{"../../components/colorscale/calc":625,"../../components/colorscale/has_colorscale":632,"../../plots/cartesian/axes":789,"../scatter/calc_selection":1068,"./arrays_to_calcdata":882,"fast-isnumeric":140}],885:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("../scatter/xy_defaults"),g=a("../bar/style_defaults"),h=a("../../components/errorbars/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=d.coerceFont;if(!f(a,b,j,k))return void(b.visible=!1);k("orientation",b.x&&!b.y?"h":"v"),k("base"),k("offset"),k("width"),k("text"),k("hovertext");var m=k("textposition"),n=Array.isArray(m)||"auto"===m,o=n||"inside"===m,p=n||"outside"===m;if(o||p){var q=l(k,"textfont",j.font);o&&l(k,"insidetextfont",q),p&&l(k,"outsidetextfont",q),k("constraintext"),k("selected.textfont.color"),k("unselected.textfont.color")}g(a,b,k,c,j),h(a,b,e.defaultLine,{axis:"y"}),h(a,b,e.defaultLine,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(b,k)}},{"../../components/color":618,"../../components/errorbars/defaults":648,"../../lib":743,"../bar/style_defaults":895,"../scatter/xy_defaults":1090,"./attributes":883}],886:[function(a,b,c){"use strict";var d=a("../../components/fx"),e=a("../../components/errorbars"),f=a("../../components/color"),g=a("../scatter/fill_hover_text");b.exports=function(a,b,c,h){function i(a){return a[o]-a.w/2}function j(a){return a[o]+a.w/2}function k(a){return d.inbox(w(a)-m,x(a)-m)}function l(a){return d.inbox(a.b-n,a[p]-n)+(a[p]-n)/(a[p]-a.b)}var m,n,o,p,q,r,s=a.cd,t=s[0].trace,u=s[0].t,v="closest"===h,w=v?i:function(a){return Math.min(i(a),a.p-u.bardelta/2)},x=v?j:function(a){return Math.max(j(a),a.p+u.bardelta/2)};"h"===t.orientation?(m=c,n=b,o="y",p="x",q=l,r=k):(m=b,n=c,o="x",p="y",r=l,q=k);var y=a[o+"a"],z=a[p+"a"],A=d.getDistanceFunction(h,q,r);if(d.getClosest(s,A,a),!1!==a.index){v||(w=function(a){return Math.min(i(a),a.p-u.bargroupwidth/2)},x=function(a){return Math.max(j(a),a.p+u.bargroupwidth/2)});var B=a.index,C=s[B],D=C.mcc||t.marker.color,E=C.mlcc||t.marker.line.color,F=C.mlw||t.marker.line.width;f.opacity(D)?a.color=D:f.opacity(E)&&F&&(a.color=E);var G=t.base?C.b+C.s:C.s;return a[p+"0"]=a[p+"1"]=z.c2p(C[p],!0),a[p+"LabelVal"]=G,a[o+"0"]=y.c2p(w(C),!0),a[o+"1"]=y.c2p(x(C),!0),a[o+"LabelVal"]=C.p,g(C,t,a),e.hoverInfo(C,t,a),[a]}}},{"../../components/color":618,"../../components/errorbars":649,"../../components/fx":660,"../scatter/fill_hover_text":1074}],887:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("./layout_attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("./layout_defaults"),d.calc=a("./calc"),d.setPositions=a("./set_positions"),d.colorbar=a("../scatter/colorbar"),d.arraysToCalcdata=a("./arrays_to_calcdata"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="bar",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"../scatter/colorbar":1070,"./arrays_to_calcdata":882,"./attributes":883,"./calc":884,"./defaults":885,"./hover":886,"./layout_attributes":888,"./layout_defaults":889,"./plot":890,"./select":891,"./set_positions":892,"./style":894}],888:[function(a,b,c){"use strict";b.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],889:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../plots/cartesian/axes"),f=a("../../lib"),g=a("./layout_attributes");b.exports=function(a,b,c){function h(c,d){return f.coerce(a,b,g,c,d)}for(var i=!1,j=!1,k=!1,l={},m=0;m<c.length;m++){var n=c[m];if(d.traceIs(n,"bar")){if(i=!0,"overlay"!==a.barmode&&"stack"!==a.barmode){var o=n.xaxis+n.yaxis;l[o]&&(k=!0),l[o]=!0}if(n.visible&&"histogram"===n.type){"category"!==e.getFromId({_fullLayout:b},n["v"===n.orientation?"xaxis":"yaxis"]).type&&(j=!0)}}}if(i){"overlay"!==h("barmode")&&h("barnorm"),h("bargap",j&&!k?0:.2),h("bargroupgap")}}},{"../../lib":743,"../../plots/cartesian/axes":789,"../../registry":873,"./layout_attributes":888}],890:[function(a,b,c){"use strict";function d(a,b,c,d,g,m,n,o){function p(b,c,d){return b.append("text").text(c).attr({class:"bartext bartext-"+q,transform:"","text-anchor":"middle","data-notex":1}).call(y.font,d).call(w.convertToTspans,a)}var q,r=c[0].trace,s=r.orientation,t=h(r,d);if(t&&"none"!==(q=i(r,d))){var u,v,x,z,A=j(r,d,a._fullLayout.font),B=k(r,d,A),C=l(r,d,A),D=a._fullLayout.barmode,E="stack"===D,F="relative"===D,H=E||F,I=c[d],J=!H||I._outmost,K=Math.abs(m-g)-2*G,L=Math.abs(o-n)-2*G;if("outside"===q&&(J||(q="inside")),"auto"===q)if(J){q="inside",u=p(b,t,B),v=y.bBox(u.node()),x=v.width,z=v.height;var M=x>0&&z>0,N=x<=K&&z<=L,O=x<=L&&z<=K,P="h"===s?K>=x*(L/z):L>=z*(K/x);M&&(N||O||P)?q="inside":(q="outside",u.remove(),u=null)}else q="inside";if(!u&&(u=p(b,t,"outside"===q?C:B),v=y.bBox(u.node()),x=v.width,z=v.height,x<=0||z<=0))return void u.remove();var Q,R;"outside"===q?(R="both"===r.constraintext||"outside"===r.constraintext,Q=f(g,m,n,o,v,s,R)):(R="both"===r.constraintext||"inside"===r.constraintext,Q=e(g,m,n,o,v,s,R)),u.attr("transform",Q)}}function e(a,b,c,d,e,f,h){var i,j,k,l,m,n=e.width,o=e.height,p=(e.left+e.right)/2,q=(e.top+e.bottom)/2,r=Math.abs(b-a),s=Math.abs(d-c);r>2*G&&s>2*G?(m=G,r-=2*m,s-=2*m):m=0;var t,u;return n<=r&&o<=s?(t=!1,u=1):n<=s&&o<=r?(t=!0,u=1):n<o==r<s?(t=!1,u=h?Math.min(r/n,s/o):1):(t=!0,u=h?Math.min(s/n,r/o):1),t&&(t=90),t?(i=u*o,j=u*n):(i=u*n,j=u*o),"h"===f?b<a?(k=b+m+i/2,l=(c+d)/2):(k=b-m-i/2,l=(c+d)/2):d>c?(k=(a+b)/2,l=d-m-j/2):(k=(a+b)/2,l=d+m+j/2),g(p,q,k,l,u,t)}function f(a,b,c,d,e,f,h){var i,j="h"===f?Math.abs(d-c):Math.abs(b-a);j>2*G&&(i=G);var k=1;h&&(k="h"===f?Math.min(1,j/e.height):Math.min(1,j/e.width));var l,m,n,o,p=(e.left+e.right)/2,q=(e.top+e.bottom)/2;return l=k*e.width,m=k*e.height,"h"===f?b<a?(n=b-i-l/2,o=(c+d)/2):(n=b+i+l/2,o=(c+d)/2):d>c?(n=(a+b)/2,o=d+i+m/2):(n=(a+b)/2,o=d-i-m/2),g(p,q,n,o,k,!1)}function g(a,b,c,d,e,f){var g,h;return e<1?g="scale("+e+") ":(e=1,g=""),h=f?"rotate("+f+" "+a+" "+b+") ":"","translate("+(c-e*a)+" "+(d-e*b)+")"+g+h}function h(a,b){var c=n(a.text,b);return o(B,c)}function i(a,b){var c=n(a.textposition,b);return p(C,c)}function j(a,b,c){return m(D,a.textfont,b,c)}function k(a,b,c){return m(E,a.insidetextfont,b,c)}function l(a,b,c){return m(F,a.outsidetextfont,b,c)}function m(a,b,c,d){b=b||{};var e=n(b.family,c),f=n(b.size,c),g=n(b.color,c);return{family:o(a.family,e,d.family),size:q(a.size,f,d.size),color:r(a.color,g,d.color)}}function n(a,b){var c;return Array.isArray(a)?b<a.length&&(c=a[b]):c=a,c}function o(a,b,c){if("string"==typeof b){if(b||!a.noBlank)return b}else if("number"==typeof b&&!a.strict)return String(b);return void 0!==c?c:a.dflt}function p(a,b,c){return a.coerceNumber&&(b=+b),-1!==a.values.indexOf(b)?b:void 0!==c?c:a.dflt}function q(a,b,c){if(t(b)){b=+b;var d=a.min,e=a.max;if(!(void 0!==d&&b<d||void 0!==e&&b>e))return b}return void 0!==c?c:a.dflt}function r(a,b,c){return u(b).isValid()?b:void 0!==c?c:a.dflt}var s=a("d3"),t=a("fast-isnumeric"),u=a("tinycolor2"),v=a("../../lib"),w=a("../../lib/svg_text_utils"),x=a("../../components/color"),y=a("../../components/drawing"),z=a("../../components/errorbars"),A=a("./attributes"),B=A.text,C=A.textposition,D=A.textfont,E=A.insidetextfont,F=A.outsidetextfont,G=3;b.exports=function(a,b,c){var e=b.xaxis,f=b.yaxis,g=a._fullLayout,h=b.plot.select(".barlayer").selectAll("g.trace.bars").data(c);h.enter().append("g").attr("class","trace bars"),h.each(function(a){a[0].node3=s.select(this)}),h.append("g").attr("class","points").each(function(b){var c=s.select(this),h=b[0].t,i=b[0].trace,j=h.poffset,k=Array.isArray(j);c.selectAll("g.point").data(v.identity).enter().append("g").classed("point",!0).each(function(c,h){function l(a){return 0===g.bargap&&0===g.bargroupgap?s.round(Math.round(a)-z,2):a}function m(a,b){return Math.abs(a-b)>=2?l(a):a>b?Math.ceil(a):Math.floor(a)}var n,o,p,q,r=c.p+(k?j[h]:j),u=r+c.w,v=c.b,w=v+c.s;if("h"===i.orientation?(p=f.c2p(r,!0),q=f.c2p(u,!0),n=e.c2p(v,!0),o=e.c2p(w,!0),c.ct=[o,(p+q)/2]):(n=e.c2p(r,!0),o=e.c2p(u,!0),p=f.c2p(v,!0),q=f.c2p(w,!0),c.ct=[(n+o)/2,q]),!(t(n)&&t(o)&&t(p)&&t(q)&&n!==o&&p!==q))return void s.select(this).remove();var y=(c.mlw+1||i.marker.line.width+1||(c.trace?c.trace.marker.line.width:0)+1)-1,z=s.round(y/2%1,2);if(!a._context.staticPlot){var A=x.opacity(c.mc||i.marker.color),B=A<1||y>.01?l:m;n=B(n,o),o=B(o,n),p=B(p,q),q=B(q,p)}var C=s.select(this);C.append("path").style("vector-effect","non-scaling-stroke").attr("d","M"+n+","+p+"V"+q+"H"+o+"V"+p+"Z"),d(a,C,b,h,n,o,p,q)})}),h.call(z.plot,b)}},{"../../components/color":618,"../../components/drawing":643,"../../components/errorbars":649,"../../lib":743,"../../lib/svg_text_utils":766,"./attributes":883,d3:128,"fast-isnumeric":140,tinycolor2:546}],891:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d=a.cd,e=a.xaxis,f=a.yaxis,g=[];if(!1===b)for(c=0;c<d.length;c++)d[c].selected=0;else for(c=0;c<d.length;c++){var h=d[c];b.contains(h.ct)?(g.push({pointNumber:c,x:e.c2d(h.x),y:f.c2d(h.y)}),h.selected=1):h.selected=0}return g}},{}],892:[function(a,b,c){"use strict";function d(a,b,c,d){if(d.length){var h,i,j,k,l,m=a._fullLayout.barmode,n="overlay"===m,o="group"===m;if(n)e(a,b,c,d);else if(o){for(h=[],i=[],j=0;j<d.length;j++)k=d[j],l=k[0].trace,void 0===l.offset?i.push(k):h.push(k);i.length&&f(a,b,c,i),h.length&&e(a,b,c,h)}else{for(h=[],i=[],j=0;j<d.length;j++)k=d[j],l=k[0].trace,void 0===l.base?i.push(k):h.push(k);i.length&&g(a,b,c,i),h.length&&e(a,b,c,h)}}}function e(a,b,c,d){for(var e=a._fullLayout.barnorm,f=!e,g=0;g<d.length;g++){var i=d[g],j=new w([i],!1,f);h(a,b,j),e?(p(a,c,j),q(a,c,j)):n(a,c,j)}}function f(a,b,c,d){var e=a._fullLayout,f=e.barnorm,g=!f,h=new w(d,!1,g);i(a,b,h),f?(p(a,c,h),q(a,c,h)):n(a,c,h)}function g(a,b,c,d){var e=a._fullLayout,f=e.barmode,g="stack"===f,i="relative"===f,j=a._fullLayout.barnorm,k=i,l=!(j||g||i),m=new w(d,k,l);h(a,b,m),o(a,c,m);for(var n=0;n<d.length;n++)for(var p=d[n],r=0;r<p.length;r++){var s=p[r];if(s.s!==t){var u=s.b+s.s===m.get(s.p,s.s);u&&(s._outmost=!0)}}j&&q(a,c,m)}function h(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.bargap,m=h.bargroupgap,n=c.minDiff,o=c.traces,p=n*(1-i),q=p,r=q*(1-m),s=-r/2;for(d=0;d<o.length;d++)e=o[d],f=e[0],g=f.t,g.barwidth=r,g.poffset=s,g.bargroupwidth=p,g.bardelta=n;c.binWidth=o[0][0].t.barwidth/100,j(c),k(a,b,c),l(a,b,c)}function i(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.bargap,m=h.bargroupgap,n=c.positions,o=c.distinctPositions,p=c.minDiff,q=c.traces,r=n.length!==o.length,s=q.length,t=p*(1-i),u=r?t/s:t,v=u*(1-m);for(d=0;d<s;d++){e=q[d],f=e[0];var w=r?((2*d+1-s)*u-v)/2:-v/2;g=f.t,g.barwidth=v,g.poffset=w,g.bargroupwidth=t,g.bardelta=p}c.binWidth=q[0][0].t.barwidth/100,j(c),k(a,b,c),l(a,b,c,r)}function j(a){var b,c,d,e,f,g,h=a.traces;for(b=0;b<h.length;b++){c=h[b],d=c[0],e=d.trace,g=d.t;var i,j=e.offset,k=g.poffset;if(Array.isArray(j)){for(i=j.slice(0,c.length),f=0;f<i.length;f++)s(i[f])||(i[f]=k);for(f=i.length;f<c.length;f++)i.push(k);g.poffset=i}else void 0!==j&&(g.poffset=j);var l=e.width,m=g.barwidth;if(Array.isArray(l)){var n=l.slice(0,c.length);for(f=0;f<n.length;f++)s(n[f])||(n[f]=m);for(f=n.length;f<c.length;f++)n.push(m);if(g.barwidth=n,void 0===j){for(i=[],f=0;f<c.length;f++)i.push(k+(m-n[f])/2);g.poffset=i}}else void 0!==l&&(g.barwidth=l,void 0===j&&(g.poffset=k+(m-l)/2))}}function k(a,b,c){for(var d=c.traces,e=r(b),f=0;f<d.length;f++)for(var g=d[f],h=g[0].t,i=h.poffset,j=Array.isArray(i),k=h.barwidth,l=Array.isArray(k),m=0;m<g.length;m++){var n=g[m],o=n.w=l?k[m]:k;n[e]=n.p+(j?i[m]:i)+o/2}}function l(a,b,c,d){var e=c.traces,f=c.distinctPositions,g=f[0],h=c.minDiff,i=h/2;v.minDtick(b,h,g,d);for(var j=Math.min.apply(Math,f)-i,k=Math.max.apply(Math,f)+i,l=0;l<e.length;l++){var m=e[l],n=m[0],o=n.trace;if(void 0!==o.width||void 0!==o.offset)for(var p=n.t,q=p.poffset,r=p.barwidth,s=Array.isArray(q),t=Array.isArray(r),u=0;u<m.length;u++){var w=m[u],x=s?q[u]:q,y=t?r[u]:r,z=w.p,A=z+x,B=A+y;j=Math.min(j,A),k=Math.max(k,B)}}v.expand(b,[j,k],{padded:!1})}function m(a,b){s(a[0])?a[0]=Math.min(a[0],b):a[0]=b,s(a[1])?a[1]=Math.max(a[1],b):a[1]=b}function n(a,b,c){for(var d=c.traces,e=r(b),f=[null,null],g=0;g<d.length;g++)for(var h=d[g],i=0;i<h.length;i++){var j=h[i],k=j.b,l=k+j.s;j[e]=l,s(b.c2l(l))&&m(f,l),j.hasB&&s(b.c2l(k))&&m(f,k)}v.expand(b,f,{tozero:!0,padded:!0})}function o(a,b,c){var d,e,f,g,h=a._fullLayout,i=h.barnorm,j=r(b),k=c.traces,l=[null,null];for(d=0;d<k.length;d++)for(e=k[d],f=0;f<e.length;f++)if(g=e[f],g.s!==t){var n=c.put(g.p,g.b+g.s),o=n+g.b+g.s;g.b=n,g[j]=o,i||(s(b.c2l(o))&&m(l,o),g.hasB&&s(b.c2l(n))&&m(l,n))}i||v.expand(b,l,{tozero:!0,padded:!0})}function p(a,b,c){for(var d=c.traces,e=0;e<d.length;e++)for(var f=d[e],g=0;g<f.length;g++){var h=f[g];h.s!==t&&c.put(h.p,h.b+h.s)}}function q(a,b,c){function d(a){s(b.c2l(a))&&(a<i-h||a>j+h||!s(i))&&(l=!0,m(k,a))}for(var e=c.traces,f=r(b),g="fraction"===a._fullLayout.barnorm?1:100,h=g/1e9,i=b.l2c(b.c2l(0)),j="stack"===a._fullLayout.barmode?g:i,k=[i,j],l=!1,n=0;n<e.length;n++)for(var o=e[n],p=0;p<o.length;p++){var q=o[p];if(q.s!==t){var u=Math.abs(g/c.get(q.p,q.s));q.b*=u,q.s*=u;var w=q.b,x=w+q.s;q[f]=x,d(x),q.hasB&&d(w)}}v.expand(b,k,{tozero:!0,padded:l})}function r(a){return a._id.charAt(0)}var s=a("fast-isnumeric"),t=a("../../constants/numerical").BADNUM,u=a("../../registry"),v=a("../../plots/cartesian/axes"),w=a("./sieve.js");b.exports=function(a,b){var c,e=b.xaxis,f=b.yaxis,g=a._fullData,h=a.calcdata,i=[],j=[];for(c=0;c<g.length;c++){var k=g[c];!0===k.visible&&u.traceIs(k,"bar")&&k.xaxis===e._id&&k.yaxis===f._id&&("h"===k.orientation?i.push(h[c]):j.push(h[c]))}d(a,e,f,j),d(a,f,e,i)}},{"../../constants/numerical":721,"../../plots/cartesian/axes":789,"../../registry":873,"./sieve.js":893,"fast-isnumeric":140}],893:[function(a,b,c){"use strict";function d(a,b,c){this.traces=a,this.separateNegativeValues=b,this.dontMergeOverlappingData=c;for(var d=1/0,g=[],h=0;h<a.length;h++){for(var i=a[h],j=0;j<i.length;j++){var k=i[j];k.p!==f&&g.push(k.p)}i[0]&&i[0].width1&&(d=Math.min(i[0].width1,d))}this.positions=g;var l=e.distinctVals(g);this.distinctPositions=l.vals,1===l.vals.length&&d!==1/0?this.minDiff=d:this.minDiff=Math.min(l.minDiff,d),this.binWidth=this.minDiff,this.bins={}}b.exports=d;var e=a("../../lib"),f=a("../../constants/numerical").BADNUM;d.prototype.put=function(a,b){var c=this.getLabel(a,b),d=this.bins[c]||0;return this.bins[c]=d+b,d},d.prototype.get=function(a,b){var c=this.getLabel(a,b);return this.bins[c]||0},d.prototype.getLabel=function(a,b){return(b<0&&this.separateNegativeValues?"v":"^")+(this.dontMergeOverlappingData?a:Math.round(a/this.binWidth))}},{"../../constants/numerical":721,"../../lib":743}],894:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/drawing"),f=a("../../components/errorbars");b.exports=function(a,b){var c=b?b[0].node3:d.select(a).selectAll("g.trace.bars"),g=c.size(),h=a._fullLayout;c.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){("stack"===h.barmode&&g>1||0===h.bargap&&0===h.bargroupgap&&!a[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),c.selectAll("g.points").each(function(b){var c=d.select(this),f=c.selectAll("path"),g=c.selectAll("text"),h=b[0].trace;e.pointStyle(f,h,a),e.selectedPointStyle(f,h),g.each(function(a){function b(b){var d=c[b];return Array.isArray(d)?d[a.i]:d}var c,f=d.select(this);f.classed("bartext-inside")?c=h.insidetextfont:f.classed("bartext-outside")&&(c=h.outsidetextfont),c||(c=h.textfont),e.font(f,b("family"),b("size"),b("color"))}),e.selectedTextStyle(g,h)}),f.style(c)}},{"../../components/drawing":643,"../../components/errorbars":649,d3:128}],895:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("../../components/colorscale/has_colorscale"),f=a("../../components/colorscale/defaults");b.exports=function(a,b,c,g,h){c("marker.color",g),e(a,"marker")&&f(a,b,h,c,{prefix:"marker.",cLetter:"c"}),c("marker.line.color",d.defaultLine),e(a,"marker.line")&&f(a,b,h,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width"),c("marker.opacity"),c("selected.marker.color"),c("unselected.marker.color")}},{"../../components/color":618,"../../components/colorscale/defaults":628,"../../components/colorscale/has_colorscale":632}],896:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/color/attributes"),f=a("../../lib/extend").extendFlat,g=d.marker,h=g.line;b.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},name:{valType:"string",editType:"calc+clearAxisTypes"},text:f({},d.text,{}),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calcIfAutorange"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers",editType:"calcIfAutorange"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1,editType:"calcIfAutorange"},jitter:{valType:"number",min:0,max:1,editType:"calcIfAutorange"},pointpos:{valType:"number",min:-2,max:2,editType:"calcIfAutorange"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:f({},g.symbol,{arrayOk:!1,editType:"plot"}),opacity:f({},g.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:f({},g.size,{arrayOk:!1,editType:"calcIfAutorange"}),color:f({},g.color,{arrayOk:!1,editType:"style"}),line:{color:f({},h.color,{arrayOk:!1,dflt:e.defaultLine,editType:"style"}),width:f({},h.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,selected:{marker:d.selected.marker,editType:"style"},unselected:{marker:d.unselected.marker,editType:"style"},hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":617,"../../lib/extend":732,"../scatter/attributes":1066}],897:[function(a,b,c){"use strict";function d(a,b,c,d,e){if(b in a)return c.makeCalcdata(a,b);var f;f=b+"0"in a?a[b+"0"]:"name"in a&&("category"===c.type||k(a.name)&&-1!==["linear","log"].indexOf(c.type)||l.isDateTime(a.name)&&"date"===c.type)?a.name:e;var g=c.d2c(f,0,a[b+"calendar"]);return d.map(function(){return g})}function e(a,b){for(var c=a.length,d=new Array(c+1),e=0;e<c;e++)d[e]=a[e]-b;return d[c]=a[c-1]+b,d}function f(a){for(var b=new Array(a),c=0;c<a;c++)b[c]=[];return b}function g(a,b,c){var d={text:"tx"};for(var e in d)Array.isArray(b[e])&&(a[d[e]]=b[e][c])}function h(a,b){if(Array.isArray(b.selectedpoints))for(var c=0;c<a.length;c++){for(var d=a[c].pts||[],e={},f=0;f<d.length;f++)e[d[f].i]=f;l.tagSelected(d,b,e)}}function i(a,b){return a.v-b.v}function j(a){return a.v}var k=a("fast-isnumeric"),l=a("../../lib"),m=l._,n=a("../../plots/cartesian/axes");b.exports=function(a,b){var c,o,p,q,r,s=a._fullLayout,t=n.getFromId(a,b.xaxis||"x"),u=n.getFromId(a,b.yaxis||"y"),v=[],w="violin"===b.type?"_numViolins":"_numBoxes";"h"===b.orientation?(o=t,p="x",q=u,r="y"):(o=u,p="y",q=t,r="x");var x=o.makeCalcdata(b,p),y=d(b,r,q,x,s[w]),z=l.distinctVals(y),A=z.vals,B=z.minDiff/2,C=e(A,B),D=x.length,E=A.length,F=f(E);for(c=0;c<D;c++){var G=x[c];if(k(G)){var H=l.findBin(y[c],C);if(H>=0&&H<E){var I={v:G,i:c};g(I,b,c),F[H].push(I)}}}for(c=0;c<E;c++)if(F[c].length>0){var J=F[c].sort(i),K=J.map(j),L=K.length,M={pos:A[c],pts:J};M.min=K[0],M.max=K[L-1],M.mean=l.mean(K,L),M.sd=l.stdev(K,L,M.mean),M.q1=l.interp(K,.25),M.med=l.interp(K,.5),M.q3=l.interp(K,.75),M.lf=Math.min(M.q1,K[Math.min(l.findBin(2.5*M.q1-1.5*M.q3,K,!0)+1,L-1)]),M.uf=Math.max(M.q3,K[Math.max(l.findBin(2.5*M.q3-1.5*M.q1,K),0)]),M.lo=4*M.q1-3*M.q3,M.uo=4*M.q3-3*M.q1,v.push(M)}return h(v,b),n.expand(o,x,{padded:!0}),v.length>0?(v[0].t={num:s[w],dPos:B,posLetter:r,valLetter:p,labels:{med:m(a,"median:"),min:m(a,"min:"),q1:m(a,"q1:"),q3:m(a,"q3:"),max:m(a,"max:"),mean:"sd"===b.boxmean?m(a,"mean ± σ:"):m(a,"mean:"),lf:m(a,"lower fence:"),uf:m(a,"upper fence:")}},b._fullInput&&"candlestick"===b._fullInput.type&&delete v[0].t.labels,s[w]++,v):[{t:{empty:!0}}]}},{"../../lib":743,"../../plots/cartesian/axes":789,"fast-isnumeric":140}],898:[function(a,b,c){"use strict";function d(a,b,c,d){function h(c,d){return g.coerce(a,b,j,c,d)}e(a,b,h,d),!1!==b.visible&&(h("line.color",(a.marker||{}).color||c),h("line.width"),h("fillcolor",i.addOpacity(b.line.color,.5)),h("whiskerwidth"),h("boxmean"),f(a,b,h,{prefix:"box"}))}function e(a,b,c,d){var e,f=c("y"),g=c("x");if(f&&f.length)e="v",g||c("x0");else{if(!g||!g.length)return void(b.visible=!1);e="h",c("y0")}h.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y"],d),c("orientation",e)}function f(a,b,c,d){var e=d.prefix,f=g.coerce2(a,b,j,"marker.outliercolor"),h=c("marker.line.outliercolor"),i=c(e+"points",f||h?"suspectedoutliers":void 0);i?(c("jitter","all"===i?.3:0),c("pointpos","all"===i?-1.5:0),c("marker.symbol"),c("marker.opacity"),c("marker.size"),c("marker.color",b.line.color),c("marker.line.color"),c("marker.line.width"),"suspectedoutliers"===i&&(c("marker.line.outliercolor",b.marker.color),c("marker.line.outlierwidth")),c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size"),c("text")):delete b.marker,c("hoveron"),g.coerceSelectionMarkerOpacity(b,c)}var g=a("../../lib"),h=a("../../registry"),i=a("../../components/color"),j=a("./attributes");b.exports={supplyDefaults:d,handleSampleDefaults:e,handlePointsDefaults:f}},{"../../components/color":618,"../../lib":743,"../../registry":873,"./attributes":896}],899:[function(a,b,c){"use strict";function d(a,b,c,d){var g,h=a.cd,i=h[0].trace,j=i.hoveron,k=[];return-1!==j.indexOf("boxes")&&(k=k.concat(e(a,b,c,d))),-1!==j.indexOf("points")&&(g=f(a,b,c)),"closest"===d?g?[g]:k:g?(k.push(g),k):k}function e(a,b,c,d){var e,f,k,l,m,n,o,p,q,r=a.cd,s=a.xa,t=a.ya,u=r[0].trace,v=r[0].t,w="violin"===u.type,x=[],y="closest"!==d||w?v.bdPos:2.5*v.bdPos,z=function(a){return a.pos+v.bPos-n};w&&"both"!==u.side?("positive"===u.side&&(q=function(a){var b=z(a);return i.inbox(b,b+y)}),"negative"===u.side&&(q=function(a){var b=z(a);return i.inbox(b-y,b)})):q=function(a){var b=z(a);return i.inbox(b-y,b+y)}
;var A;A=w?function(a){return i.inbox(a.span[0]-m,a.span[1]-m)}:function(a){return i.inbox(a.min-m,a.max-m)},"h"===u.orientation?(m=b,n=c,o=A,p=q,e="y",k=t,f="x",l=s):(m=c,n=b,o=q,p=A,e="x",k=s,f="y",l=t);var B=i.getDistanceFunction(d,o,p);if(i.getClosest(r,B,a),!1===a.index)return[];var C=r[a.index],D=u.line.color,E=(u.marker||{}).color;j.opacity(D)&&u.line.width?a.color=D:j.opacity(E)&&u.boxpoints?a.color=E:a.color=u.fillcolor,a[e+"0"]=k.c2p(C.pos+v.bPos-v.bdPos,!0),a[e+"1"]=k.c2p(C.pos+v.bPos+v.bdPos,!0),g.tickText(k,k.c2l(C.pos),"hover").text,a[e+"LabelVal"]=C.pos;var F={},G=["med","min","q1","q3","max"];(u.boxmean||(u.meanline||{}).visible)&&G.push("mean"),(u.boxpoints||u.points)&&G.push("lf","uf");for(var H=0;H<G.length;H++){var I=G[H];if(I in C&&!(C[I]in F)){F[C[I]]=!0;var J=C[I],K=l.c2p(J,!0),L=h.extendFlat({},a);L[f+"0"]=L[f+"1"]=K,L[f+"LabelVal"]=J,L[f+"Label"]=(v.labels?v.labels[I]+" ":"")+g.hoverLabelText(l,J),"mean"===I&&"sd"in C&&"sd"===u.boxmean&&(L[f+"err"]=C.sd),a.name="",x.push(L)}}return x}function f(a,b,c){for(var d,e,f,g=a.cd,j=a.xa,l=a.ya,m=g[0].trace,n=j.c2p(b),o=l.c2p(c),p=function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(j.c2p(a.x)-n)-b,1-3/b)},q=function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(l.c2p(a.y)-o)-b,1-3/b)},r=i.quadrature(p,q),s=!1,t=0;t<g.length;t++){e=g[t];for(var u=0;u<(e.pts||[]).length;u++){f=e.pts[u];var v=r(f);v<=a.distance&&(a.distance=v,s=[t,u])}}if(!s)return!1;e=g[s[0]],f=e.pts[s[1]];var w=j.c2p(f.x,!0),x=l.c2p(f.y,!0),y=f.mrc||1;return d=h.extendFlat({},a,{index:f.i,color:(m.marker||{}).color,name:m.name,x0:w-y,x1:w+y,xLabelVal:f.x,y0:x-y,y1:x+y,yLabelVal:f.y}),k(f,m,d),d}var g=a("../../plots/cartesian/axes"),h=a("../../lib"),i=a("../../components/fx"),j=a("../../components/color"),k=a("../scatter/fill_hover_text");b.exports={hoverPoints:d,hoverOnBoxes:e,hoverOnPoints:f}},{"../../components/color":618,"../../components/fx":660,"../../lib":743,"../../plots/cartesian/axes":789,"../scatter/fill_hover_text":1074}],900:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("./layout_attributes"),d.supplyDefaults=a("./defaults").supplyDefaults,d.supplyLayoutDefaults=a("./layout_defaults").supplyLayoutDefaults,d.calc=a("./calc"),d.setPositions=a("./set_positions").setPositions,d.plot=a("./plot").plot,d.style=a("./style"),d.hoverPoints=a("./hover").hoverPoints,d.selectPoints=a("./select"),d.moduleType="trace",d.name="box",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","symbols","oriented","box-violin","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"./attributes":896,"./calc":897,"./defaults":898,"./hover":899,"./layout_attributes":901,"./layout_defaults":902,"./plot":903,"./select":904,"./set_positions":905,"./style":906}],901:[function(a,b,c){"use strict";b.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],902:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f,g=0;g<c.length;g++)if(c[g].type===e){f=!0;break}f&&(d(e+"mode"),d(e+"gap"),d(e+"groupgap"))}function e(a,b,c){function e(c,d){return f.coerce(a,b,g,c,d)}d(a,b,c,e,"box")}var f=a("../../lib"),g=a("./layout_attributes");b.exports={supplyLayoutDefaults:e,_supply:d}},{"../../lib":743,"./layout_attributes":901}],903:[function(a,b,c){"use strict";function d(){m=2e9}function e(){var a=m;return m=(69069*m+1)%4294967296,Math.abs(m-a)<429496729?e():m/4294967296}function f(a,b,c){var d=a._fullLayout,e=b.xaxis,f=b.yaxis;b.plot.select(".boxlayer").selectAll("g.trace.boxes").data(c).enter().append("g").attr("class","trace boxes").each(function(a){var b=a[0],c=b.t,k=b.trace,l=b.node3=j.select(this),m=d._numBoxes,n="group"===d.boxmode&&m>1,o=c.dPos*(1-d.boxgap)*(1-d.boxgroupgap)/(n?m:1),p=n?2*c.dPos*((c.num+.5)/m-.5)*(1-d.boxgap):0,q=o*k.whiskerwidth;if(!0!==k.visible||c.empty)return void j.select(this).remove();var r,s;"h"===k.orientation?(r=f,s=e):(r=e,s=f),c.bPos=p,c.bdPos=o,c.wdPos=q,g(l,{pos:r,val:s},k,c),k.boxpoints&&h(l,{x:e,y:f},k,c),k.boxmean&&i(l,{pos:r,val:s},k,c)})}function g(a,b,c,d){var e,f,g=b.pos,h=b.val,i=d.bPos,l=d.wdPos||0,m=d.bPosPxOffset||0,n=c.whiskerwidth||0;Array.isArray(d.bdPos)?(e=d.bdPos[0],f=d.bdPos[1]):(e=d.bdPos,f=d.bdPos),a.selectAll("path.box").data(k.identity).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box").each(function(a){var b=a.pos,d=g.c2p(b+i,!0)+m,o=g.c2p(b+i-e,!0)+m,p=g.c2p(b+i+f,!0)+m,q=g.c2p(b+i-l,!0)+m,r=g.c2p(b+i+l,!0)+m,s=h.c2p(a.q1,!0),t=h.c2p(a.q3,!0),u=k.constrain(h.c2p(a.med,!0),Math.min(s,t)+1,Math.max(s,t)-1),v=h.c2p(!1===c.boxpoints?a.min:a.lf,!0),w=h.c2p(!1===c.boxpoints?a.max:a.uf,!0);"h"===c.orientation?j.select(this).attr("d","M"+u+","+o+"V"+p+"M"+s+","+o+"V"+p+"H"+t+"V"+o+"ZM"+s+","+d+"H"+v+"M"+t+","+d+"H"+w+(0===n?"":"M"+v+","+q+"V"+r+"M"+w+","+q+"V"+r)):j.select(this).attr("d","M"+o+","+u+"H"+p+"M"+o+","+s+"H"+p+"V"+t+"H"+o+"ZM"+d+","+s+"V"+v+"M"+d+","+t+"V"+w+(0===n?"":"M"+q+","+v+"H"+r+"M"+q+","+w+"H"+r))})}function h(a,b,c,f){var g=b.x,h=b.y,i=f.bdPos,j=f.bPos,m=c.boxpoints||c.points;d(),a.selectAll("g.points").data(function(a){return a.forEach(function(a){a.t=f,a.trace=c}),a}).enter().append("g").attr("class","points").selectAll("path").data(function(a){var b,d,f="all"===m?a.pts:a.pts.filter(function(b){return b.v<a.lf||b.v>a.uf}),g=Math.max((a.max-a.min)/10,a.q3-a.q1),h=1e-9*g,l=g*o,p=[],q=0;if(c.jitter){if(0===g)for(q=1,p=new Array(f.length),b=0;b<f.length;b++)p[b]=1;else for(b=0;b<f.length;b++){var r=Math.max(0,b-n),s=f[r].v,t=Math.min(f.length-1,b+n),u=f[t].v;"all"!==m&&(f[b].v<a.lf?u=Math.min(u,a.lf):s=Math.max(s,a.uf));var v=Math.sqrt(l*(t-r)/(u-s+h))||0;v=k.constrain(Math.abs(v),0,1),p.push(v),q=Math.max(v,q)}d=2*c.jitter/q}for(b=0;b<f.length;b++){var w=f[b],x=w.v,y=c.jitter?d*p[b]*(e()-.5):0,z=a.pos+j+i*(c.pointpos+y);"h"===c.orientation?(w.y=z,w.x=x):(w.x=z,w.y=x),"suspectedoutliers"===m&&x<a.uo&&x>a.lo&&(w.so=!0)}return f}).enter().append("path").classed("point",!0).call(l.translatePoints,g,h)}function i(a,b,c,d){var e,f,g=b.pos,h=b.val,i=d.bPos,l=d.bPosPxOffset||0;Array.isArray(d.bdPos)?(e=d.bdPos[0],f=d.bdPos[1]):(e=d.bdPos,f=d.bdPos),a.selectAll("path.mean").data(k.identity).enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}).each(function(a){var b=g.c2p(a.pos+i,!0)+l,d=g.c2p(a.pos+i-e,!0)+l,k=g.c2p(a.pos+i+f,!0)+l,m=h.c2p(a.mean,!0),n=h.c2p(a.mean-a.sd,!0),o=h.c2p(a.mean+a.sd,!0);"h"===c.orientation?j.select(this).attr("d","M"+m+","+d+"V"+k+("sd"===c.boxmean?"m0,0L"+n+","+b+"L"+m+","+d+"L"+o+","+b+"Z":"")):j.select(this).attr("d","M"+d+","+m+"H"+k+("sd"===c.boxmean?"m0,0L"+b+","+n+"L"+d+","+m+"L"+b+","+o+"Z":""))})}var j=a("d3"),k=a("../../lib"),l=a("../../components/drawing"),m=2e9,n=5,o=.01;b.exports={plot:f,plotBoxAndWhiskers:g,plotPoints:h,plotBoxMean:i}},{"../../components/drawing":643,"../../lib":743,d3:128}],904:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d,e=a.cd,f=a.xaxis,g=a.yaxis,h=[];if(!1===b)for(c=0;c<e.length;c++)for(d=0;d<(e[c].pts||[]).length;d++)e[c].pts[d].selected=0;else for(c=0;c<e.length;c++)for(d=0;d<(e[c].pts||[]).length;d++){var i=e[c].pts[d],j=f.c2p(i.x),k=g.c2p(i.y);b.contains([j,k])?(h.push({pointNumber:i.i,x:f.c2d(i.x),y:g.c2d(i.y)}),i.selected=1):i.selected=0}return h}},{}],905:[function(a,b,c){"use strict";function d(a,b){for(var c=a.calcdata,d=b.xaxis,f=b.yaxis,g=0;g<h.length;g++){for(var i=h[g],j="h"===i?f:d,k=[],l=0,m=0,n=0;n<c.length;n++){var o=c[n],p=o[0].t,q=o[0].trace;!0!==q.visible||"box"!==q.type||p.empty||q.orientation!==i||q.xaxis!==d._id||q.yaxis!==f._id||(k.push(n),!1!==q.boxpoints&&(l=Math.max(l,q.jitter-q.pointpos-1),m=Math.max(m,q.jitter+q.pointpos-1)))}e("box",a,k,j,[l,m])}}function e(a,b,c,d,e){var h,i,j,k=b.calcdata,l=b._fullLayout,m=[],n="violin"===a?"_numViolins":"_numBoxes";for(h=0;h<c.length;h++)for(j=k[c[h]],i=0;i<j.length;i++)m.push(j[i].pos);if(m.length){var o=g.distinctVals(m),p=o.minDiff/2;for(m.length===o.vals.length&&(l[n]=1),f.minDtick(d,o.minDiff,o.vals[0],!0),h=0;h<c.length;h++)j=k[c[h]],j[0].t.dPos=p;var q=l[a+"gap"],r=l[a+"groupgap"],s=(1-q)*(1-r)*p/l[n];f.expand(d,o.vals,{vpadminus:p+e[0]*s,vpadplus:p+e[1]*s})}}var f=a("../../plots/cartesian/axes"),g=a("../../lib"),h=["v","h"];b.exports={setPositions:d,setPositionOffset:e}},{"../../lib":743,"../../plots/cartesian/axes":789}],906:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/color"),f=a("../../components/drawing");b.exports=function(a,b){var c=b?b[0].node3:d.select(a).selectAll("g.trace.boxes");c.style("opacity",function(a){return a[0].trace.opacity}),c.each(function(b){var c=d.select(this),g=b[0].trace,h=g.line.width;c.selectAll("path.box").style("stroke-width",h+"px").call(e.stroke,g.line.color).call(e.fill,g.fillcolor),c.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(e.stroke,g.line.color);var i=c.selectAll("path.point");f.pointStyle(i,g,a),f.selectedPointStyle(i,g)})}},{"../../components/color":618,"../../components/drawing":643,d3:128}],907:[function(a,b,c){"use strict";function d(a){return{name:f.increasing.name,showlegend:f.increasing.showlegend,line:{color:e({},g.line.color,{dflt:a}),width:g.line.width,editType:"style"},fillcolor:g.fillcolor,editType:"style"}}var e=a("../../lib").extendFlat,f=a("../ohlc/attributes"),g=a("../box/attributes");b.exports={x:f.x,open:f.open,high:f.high,low:f.low,close:f.close,line:{width:e({},g.line.width,{}),editType:"style"},increasing:d(f.increasing.line.color.dflt),decreasing:d(f.decreasing.line.color.dflt),text:f.text,whiskerwidth:e({},g.whiskerwidth,{dflt:0})}},{"../../lib":743,"../box/attributes":896,"../ohlc/attributes":1024}],908:[function(a,b,c){"use strict";function d(a,b,c,d){g(a,b,c,d),c(d+".line.color"),c(d+".line.width",b.line.width),c(d+".fillcolor")}var e=a("../../lib"),f=a("../ohlc/ohlc_defaults"),g=a("../ohlc/direction_defaults"),h=a("../ohlc/helpers"),i=a("./attributes");b.exports=function(a,b,c,g){function j(c,d){return e.coerce(a,b,i,c,d)}if(h.pushDummyTransformOpts(a,b),0===f(a,b,j,g))return void(b.visible=!1);j("line.width"),d(a,b,j,"increasing"),d(a,b,j,"decreasing"),j("text"),j("whiskerwidth")}},{"../../lib":743,"../ohlc/direction_defaults":1026,"../ohlc/helpers":1027,"../ohlc/ohlc_defaults":1029,"./attributes":907}],909:[function(a,b,c){"use strict";var d=a("../../plot_api/register");b.exports={moduleType:"trace",name:"candlestick",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","showLegend","candlestick"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults")},d(a("../box")),d(a("./transform"))},{"../../plot_api/register":779,"../../plots/cartesian":800,"../box":900,"./attributes":907,"./defaults":908,"./transform":910}],910:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"box",boxpoints:!1,visible:a.visible,hoverinfo:a.hoverinfo,opacity:a.opacity,xaxis:a.xaxis,yaxis:a.yaxis,transforms:g.makeTransform(a,b,c)},e=a[c];return e&&f.extendFlat(d,{x:a.x||[0],xcalendar:a.xcalendar,y:[].concat(a.low).concat(a.high),whiskerwidth:a.whiskerwidth,text:a.text,name:e.name,showlegend:e.showlegend,line:e.line,fillcolor:e.fillcolor}),d}var e=a("fast-isnumeric"),f=a("../../lib"),g=a("../ohlc/helpers");c.moduleType="transform",c.name="candlestick",c.attributes={},c.supplyDefaults=function(a,b,c,d){return g.clearEphemeralTransformOpts(d),g.copyOHLC(a,b),a},c.transform=function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e];"candlestick"===f.type?c.push(d(f,b,"increasing"),d(f,b,"decreasing")):c.push(f)}return g.addRangeSlider(c,b.layout),c},c.calcTransform=function(a,b,c){for(var d=c.direction,f=g.getFilterFn(d),h=b.open,i=b.high,j=b.low,k=b.close,l=h.length,m=[],n=[],o=b._fullInput.x?function(a){var c=b.x[a];m.push(c,c,c,c,c,c)}:function(a){m.push(a,a,a,a,a,a)},p=0;p<l;p++)f(h[p],k[p])&&e(i[p])&&e(j[p])&&(o(p),function(a,b,c,d){n.push(c,a,d,d,d,b)}(h[p],i[p],j[p],k[p]));b.x=m,b.y=n}},{"../../lib":743,"../ohlc/helpers":1027,"fast-isnumeric":140}],911:[function(a,b,c){"use strict";function d(a,b,c,d){["aaxis","baxis"].forEach(function(f){var g=f.charAt(0),h=a[f]||{},i={},j={tickfont:"x",id:g+"axis",letter:g,font:b.font,name:f,data:a[g],calendar:b.calendar,dfltColor:d,bgColor:c.paper_bgcolor,fullLayout:c};e(h,i,j),i._categories=i._categories||[],b[f]=i,a[f]||"-"===h.type||(a[f]={type:h.type})})}var e=a("./axis_defaults");b.exports=function(a,b,c,e,f){e("a")||(e("da"),e("a0")),e("b")||(e("db"),e("b0")),d(a,b,c,f)}},{"./axis_defaults":916}],912:[function(a,b,c){"use strict";function d(a,b){if(!Array.isArray(a)||b>=10)return null;for(var c=1/0,e=-1/0,f=a.length,g=0;g<f;g++){var h=a[g];if(Array.isArray(h)){var i=d(h,b+1);i&&(c=Math.min(i[0],c),e=Math.max(i[1],e))}else c=Math.min(h,c),e=Math.max(h,e)}return[c,e]}b.exports=function(a){return d(a,0)}},{}],913:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("./axis_attributes"),f=a("../../components/color/attributes"),g=d({editType:"calc"});g.family.dflt='"Open Sans", verdana, arial, sans-serif',g.size.dflt=12,g.color.dflt=f.defaultLine,b.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:e,baxis:e,font:g,color:{valType:"color",dflt:f.defaultLine,editType:"plot"}}},{"../../components/color/attributes":617,"../../plots/font_attributes":816,"./axis_attributes":915}],914:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r=Array.isArray(c)?"a":"b",s="a"===r?a.aaxis:a.baxis,t=s.smoothing,u="a"===r?a.a2i:a.b2j,v="a"===r?c:d,w="a"===r?d:c,x="a"===r?b.a.length:b.b.length,y="a"===r?b.b.length:b.a.length,z=Math.floor("a"===r?a.b2j(w):a.a2i(w)),A="a"===r?function(b){return a.evalxy([],b,z)}:function(b){return a.evalxy([],z,b)};t&&(g=Math.max(0,Math.min(y-2,z)),h=z-g,f="a"===r?function(b,c){return a.dxydi([],b,g,c,h)}:function(b,c){return a.dxydj([],g,b,h,c)});var B=u(v[0]),C=u(v[1]),D=B<C?1:-1,E=1e-8*(C-B),F=D>0?Math.floor:Math.ceil,G=D>0?Math.ceil:Math.floor,H=D>0?Math.min:Math.max,I=D>0?Math.max:Math.min,J=F(B+E),K=G(C-E);k=A(B);var L=[[k]];for(e=J;e*D<K*D;e+=D)i=[],o=I(B,e),p=H(C,e+D),q=p-o,j=Math.max(0,Math.min(x-2,Math.floor(.5*(o+p)))),l=A(p),t&&(m=f(j,o-j),n=f(j,p-j),i.push([k[0]+m[0]/3*q,k[1]+m[1]/3*q]),i.push([l[0]-n[0]/3*q,l[1]-n[1]/3*q])),i.push(l),L.push(i),k=l;return L}},{}],915:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../../components/color/attributes"),f=a("../../plots/cartesian/layout_attributes"),g=a("../../plot_api/edit_types").overrideAll;b.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{valType:"string",editType:"calc"},titlefont:d({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:d({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:g(f.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:e.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:e.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},editType:"calc"}},{"../../components/color/attributes":617,"../../plot_api/edit_types":773,"../../plots/cartesian/layout_attributes":801,"../../plots/font_attributes":816}],916:[function(a,b,c){"use strict";function d(a,b){if("-"===a.type){var c=a._id,d=c.charAt(0),e=d+"calendar",f=a[e];a.type=n(b,f)}}var e=a("./attributes"),f=a("../../components/color").addOpacity,g=a("../../registry"),h=a("../../lib"),i=a("../../plots/cartesian/tick_value_defaults"),j=a("../../plots/cartesian/tick_label_defaults"),k=a("../../plots/cartesian/category_order_defaults"),l=a("../../plots/cartesian/set_convert"),m=a("../../plots/cartesian/ordered_categories"),n=a("../../plots/cartesian/axis_autotype");b.exports=function(a,b,c){function n(c,d){return h.coerce(a,b,r,c,d)}function o(c,d){return h.coerce2(a,b,r,c,d)}var p=c.letter,q=c.font||{},r=e[p+"axis"];c.noHover=!0,c.name&&(b._name=c.name,b._id=c.name);var s=n("type");if("-"===s&&(c.data&&d(b,c.data),"-"===b.type?b.type="linear":s=a.type=b.type),n("smoothing"),n("cheatertype"),n("showticklabels"),n("labelprefix",p+" = "),n("labelsuffix"),n("showtickprefix"),n("showticksuffix"),n("separatethousands"),n("tickformat"),n("exponentformat"),n("showexponent"),n("categoryorder"),n("tickmode"),n("tickvals"),n("ticktext"),n("tick0"),n("dtick"),"array"===b.tickmode&&(n("arraytick0"),n("arraydtick")),n("labelpadding"),b._hovertitle=p,"date"===s){g.getComponentMethod("calendars","handleDefaults")(a,b,"calendar",c.calendar)}l(b,c.fullLayout);var t=n("color",c.dfltColor),u=t===a.color?t:q.color;n("title"),h.coerceFont(n,"titlefont",{family:q.family,size:Math.round(1.2*q.size),color:u}),n("titleoffset"),n("tickangle"),n("autorange",!b.isValidRange(a.range))&&n("rangemode"),n("range"),b.cleanRange(),n("fixedrange"),i(a,b,n,s),j(a,b,n,s,c),k(a,b,n);var v=o("gridcolor",f(t,.3)),w=o("gridwidth"),x=n("showgrid");x||(delete b.gridcolor,delete b.gridwidth);var y=o("startlinecolor",t),z=o("startlinewidth",w);n("startline",b.showgrid||!!y||!!z)||(delete b.startlinecolor,delete b.startlinewidth);var A=o("endlinecolor",t),B=o("endlinewidth",w);return n("endline",b.showgrid||!!A||!!B)||(delete b.endlinecolor,delete b.endlinewidth),x?(n("minorgridcount"),n("minorgridwidth",w),n("minorgridcolor",f(v,.06)),b.minorgridcount||(delete b.minorgridwidth,delete b.minorgridcolor)):(delete b.gridcolor,delete b.gridWidth),b._initialCategories="category"===s?m(p,b.categoryorder,b.categoryarray,c.data):[],"none"===b.showticklabels&&(delete b.tickfont,delete b.tickangle,delete b.showexponent,delete b.exponentformat,delete b.tickformat,delete b.showticksuffix,delete b.showtickprefix),b.showticksuffix||delete b.ticksuffix,b.showtickprefix||delete b.tickprefix,n("tickmode"),(!b.title||b.title&&0===b.title.length)&&(delete b.titlefont,delete b.titleoffset),b}},{"../../components/color":618,"../../lib":743,"../../plots/cartesian/axis_autotype":790,"../../plots/cartesian/category_order_defaults":793,"../../plots/cartesian/ordered_categories":804,"../../plots/cartesian/set_convert":808,"../../plots/cartesian/tick_label_defaults":809,"../../plots/cartesian/tick_value_defaults":811,"../../registry":873,"./attributes":913}],917:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("./cheater_basis"),f=a("./array_minmax"),g=a("./map_2d_array"),h=a("./calc_gridlines"),i=a("./calc_labels"),j=a("./calc_clippath"),k=a("../heatmap/clean_2d_array"),l=a("./smooth_fill_2d_array");b.exports=function(a,b){var c,m=d.getFromId(a,b.xaxis||"x"),n=d.getFromId(a,b.yaxis||"y"),o=b.aaxis,p=b.baxis,q=b._a=b.a,r=b._b=b.b,s={},t=b.y;if(b._cheater){var u="index"===o.cheatertype?q.length:q,v="index"===p.cheatertype?r.length:r;b.x=c=e(u,v,b.cheaterslope)}else c=b.x;b._x=b.x=c=k(c),b._y=b.y=t=k(t),l(c,q,r),l(t,q,r),b.setScale(),s.xp=b.xp=g(b.xp,c,m.c2p),s.yp=b.yp=g(b.yp,t,n.c2p);var w=f(c),x=f(t),y=.5*(w[1]-w[0]),z=.5*(w[1]+w[0]),A=.5*(x[1]-x[0]),B=.5*(x[1]+x[0]);return w=[z-1.3*y,z+1.3*y],x=[B-1.3*A,B+1.3*A],d.expand(m,w,{padded:!0}),d.expand(n,x,{padded:!0}),h(b,s,"a","b"),h(b,s,"b","a"),i(b,o),i(b,p),s.clipsegments=j(b.xctrl,b.yctrl,o,p),s.x=c,s.y=t,s.a=q,s.b=r,[s]}},{"../../plots/cartesian/axes":789,"../heatmap/clean_2d_array":979,"./array_minmax":912,"./calc_clippath":918,"./calc_gridlines":919,"./calc_labels":920,"./cheater_basis":922,"./map_2d_array":934,"./smooth_fill_2d_array":938}],918:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e,f,g,h=[],i=!!c.smoothing,j=!!d.smoothing,k=a[0].length-1,l=a.length-1;for(e=0,f=[],g=[];e<=k;e++)f[e]=a[0][e],g[e]=b[0][e];for(h.push({x:f,y:g,bicubic:i}),e=0,f=[],g=[];e<=l;e++)f[e]=a[e][k],g[e]=b[e][k];for(h.push({x:f,y:g,bicubic:j}),e=k,f=[],g=[];e>=0;e--)f[k-e]=a[l][e],g[k-e]=b[l][e];for(h.push({x:f,y:g,bicubic:i}),e=l,f=[],g=[];e>=0;e--)f[l-e]=a[e][0],g[l-e]=b[e][0];return h.push({x:f,y:g,bicubic:j}),h}},{}],919:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../../lib/extend").extendFlat;b.exports=function(a,b,c,f){function g(b){var d,e,g,h,i,j,k,l,m,n,o,q,r=[],s=[],t={};if("b"===c)for(e=a.b2j(b),g=Math.floor(Math.max(0,Math.min(I-2,e))),h=e-g,t.length=I,t.crossLength=H,t.xy=function(b){return a.evalxy([],b,e)},t.dxy=function(b,c){return a.dxydi([],b,g,c,h)},d=0;d<H;d++)j=Math.min(H-2,d),k=d-j,l=a.evalxy([],d,e),C.smoothing&&d>0&&(m=a.dxydi([],d-1,g,0,h),r.push(i[0]+m[0]/3),s.push(i[1]+m[1]/3),n=a.dxydi([],d-1,g,1,h),r.push(l[0]-n[0]/3),s.push(l[1]-n[1]/3)),r.push(l[0]),s.push(l[1]),i=l;else for(d=a.a2i(b),j=Math.floor(Math.max(0,Math.min(H-2,d))),k=d-j,t.length=H,t.crossLength=I,t.xy=function(b){return a.evalxy([],d,b)},t.dxy=function(b,c){return a.dxydj([],j,b,k,c)},e=0;e<I;e++)g=Math.min(I-2,e),h=e-g,l=a.evalxy([],d,e),C.smoothing&&e>0&&(o=a.dxydj([],j,e-1,k,0),r.push(i[0]+o[0]/3),s.push(i[1]+o[1]/3),q=a.dxydj([],j,e-1,k,1),r.push(l[0]-q[0]/3),s.push(l[1]-q[1]/3)),r.push(l[0]),s.push(l[1]),i=l;return t.axisLetter=c,t.axis=x,t.crossAxis=C,t.value=b,t.constvar=f,t.index=p,t.x=r,t.y=s,t.smoothing=C.smoothing,t}function h(b){var d,e,g,h,i,j=[],k=[],l={};if(l.length=w.length,l.crossLength=B.length,"b"===c)for(g=Math.max(0,Math.min(I-2,b)),i=Math.min(1,Math.max(0,b-g)),l.xy=function(c){return a.evalxy([],c,b)},l.dxy=function(b,c){return a.dxydi([],b,g,c,i)},d=0;d<F;d++)j[d]=D[b*J][d],k[d]=E[b*J][d];else for(e=Math.max(0,Math.min(H-2,b)),h=Math.min(1,Math.max(0,b-e)),l.xy=function(c){return a.evalxy([],b,c)},l.dxy=function(b,c){return a.dxydj([],e,b,h,c)},d=0;d<G;d++)j[d]=D[d][b*J],k[d]=E[d][b*J];return l.axisLetter=c,l.axis=x,l.crossAxis=C,l.value=w[b],l.constvar=f,l.index=b,l.x=j,l.y=k,l.smoothing=C.smoothing,l}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=a[c],x=a[c+"axis"],y=x._gridlines=[],z=x._minorgridlines=[],A=x._boundarylines=[],B=a[f],C=a[f+"axis"];if("array"===x.tickmode)for(x.tickvals=[],i=0;i<w.length;i++)x.tickvals.push(w[i]);var D=a.xctrl,E=a.yctrl,F=D[0].length,G=D.length,H=a.a.length,I=a.b.length;d.calcTicks(x);var J=x.smoothing?3:1;if("array"===x.tickmode){for(l=5e-15,m=[Math.floor((w.length-1-x.arraytick0)/x.arraydtick*(1+l)),Math.ceil(-x.arraytick0/x.arraydtick/(1+l))].sort(function(a,b){return a-b}),n=m[0]-1,o=m[1]+1,p=n;p<o;p++)(j=x.arraytick0+x.arraydtick*p)<0||j>w.length-1||y.push(e(h(j),{color:x.gridcolor,width:x.gridwidth}));for(p=n;p<o;p++)if(k=x.arraytick0+x.arraydtick*p,s=Math.min(k+x.arraydtick,w.length-1),!(k<0||k>w.length-1||s<0||s>w.length-1))for(t=w[k],u=w[s],i=0;i<x.minorgridcount;i++)(v=s-k)<=0||(r=t+(u-t)*(i+1)/(x.minorgridcount+1)*(x.arraydtick/v))<w[0]||r>w[w.length-1]||z.push(e(g(r),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&A.push(e(h(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&A.push(e(h(w.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(l=5e-15,m=[Math.floor((w[w.length-1]-x.tick0)/x.dtick*(1+l)),Math.ceil((w[0]-x.tick0)/x.dtick/(1+l))].sort(function(a,b){return a-b}),n=m[0],o=m[1],p=n;p<=o;p++)q=x.tick0+x.dtick*p,y.push(e(g(q),{color:x.gridcolor,width:x.gridwidth}));for(p=n-1;p<o+1;p++)for(q=x.tick0+x.dtick*p,i=0;i<x.minorgridcount;i++)(r=q+x.dtick*(i+1)/(x.minorgridcount+1))<w[0]||r>w[w.length-1]||z.push(e(g(r),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&A.push(e(g(w[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&A.push(e(g(w[w.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},{"../../lib/extend":732,"../../plots/cartesian/axes":789}],920:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../../lib/extend").extendFlat;b.exports=function(a,b){var c,f,g,h=b._labels=[],i=b._gridlines;for(c=0;c<i.length;c++)g=i[c],-1!==["start","both"].indexOf(b.showticklabels)&&(f=d.tickText(b,g.value),e(f,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:g.xy(0),dxy:g.dxy(0,0),axis:g.axis,length:g.crossAxis.length,font:g.axis.tickfont,isFirst:0===c,isLast:c===i.length-1}),h.push(f)),-1!==["end","both"].indexOf(b.showticklabels)&&(f=d.tickText(b,g.value),e(f,{endAnchor:!1,xy:g.xy(g.crossLength-1),dxy:g.dxy(g.crossLength-2,1),axis:g.axis,length:g.crossAxis.length,font:g.axis.tickfont,isFirst:0===c,isLast:c===i.length-1}),h.push(f))}},{"../../lib/extend":732,"../../plots/cartesian/axes":789}],921:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=a[0]-b[0],f=a[1]-b[1],g=c[0]-b[0],h=c[1]-b[1],i=Math.pow(e*e+f*f,.25),j=Math.pow(g*g+h*h,.25),k=(j*j*e-i*i*g)*d,l=(j*j*f-i*i*h)*d,m=j*(i+j)*3,n=i*(i+j)*3;return[[b[0]+(m&&k/m),b[1]+(m&&l/m)],[b[0]-(n&&k/n),b[1]-(n&&l/n)]]}},{}],922:[function(a,b,c){"use strict";var d=a("../../lib").isArray;b.exports=function(a,b,c){var e,f,g,h,i,j,k=[],l=d(a)?a.length:a,m=d(b)?b.length:b,n=d(a)?a:null,o=d(b)?b:null;n&&(g=(n.length-1)/(n[n.length-1]-n[0])/(l-1)),o&&(h=(o.length-1)/(o[o.length-1]-o[0])/(m-1));var p,q=1/0,r=-1/0;for(f=0;f<m;f++)for(k[f]=[],j=o?(o[f]-o[0])*h:f/(m-1),e=0;e<l;e++)i=n?(n[e]-n[0])*g:e/(l-1),p=i-j*c,q=Math.min(p,q),r=Math.max(p,r),k[f][e]=p;var s=1/(r-q),t=-q*s;for(f=0;f<m;f++)for(e=0;e<l;e++)k[f][e]=s*k[f][e]+t;return k}},{"../../lib":743}],923:[function(a,b,c){"use strict";function d(a,b,c){var d=-.5*c[0]+1.5*b[0],e=-.5*c[1]+1.5*b[1];return[(2*d+a[0])/3,(2*e+a[1])/3]}var e=a("./catmull_rom"),f=a("../../lib").ensureArray;b.exports=function(a,b,c,g,h,i){var j,k,l,m,n,o,p,q,r,s,t=c[0].length,u=c.length,v=h?3*t-2:t,w=i?3*u-2:u;for(a=f(a,w),b=f(b,w),l=0;l<w;l++)a[l]=f(a[l],v),b[l]=f(b[l],v);for(k=0,m=0;k<u;k++,m+=i?3:1)for(n=a[m],o=b[m],p=c[k],q=g[k],j=0,l=0;j<t;j++,l+=h?3:1)n[l]=p[j],o[l]=q[j];if(h)for(k=0,m=0;k<u;k++,m+=i?3:1){for(j=1,l=3;j<t-1;j++,l+=3)r=e([c[k][j-1],g[k][j-1]],[c[k][j],g[k][j]],[c[k][j+1],g[k][j+1]],h),a[m][l-1]=r[0][0],b[m][l-1]=r[0][1],a[m][l+1]=r[1][0],b[m][l+1]=r[1][1];s=d([a[m][0],b[m][0]],[a[m][2],b[m][2]],[a[m][3],b[m][3]]),a[m][1]=s[0],b[m][1]=s[1],s=d([a[m][v-1],b[m][v-1]],[a[m][v-3],b[m][v-3]],[a[m][v-4],b[m][v-4]]),a[m][v-2]=s[0],b[m][v-2]=s[1]}if(i)for(l=0;l<v;l++){for(m=3;m<w-3;m+=3)r=e([a[m-3][l],b[m-3][l]],[a[m][l],b[m][l]],[a[m+3][l],b[m+3][l]],i),a[m-1][l]=r[0][0],b[m-1][l]=r[0][1],a[m+1][l]=r[1][0],b[m+1][l]=r[1][1];s=d([a[0][l],b[0][l]],[a[2][l],b[2][l]],[a[3][l],b[3][l]]),a[1][l]=s[0],b[1][l]=s[1],s=d([a[w-1][l],b[w-1][l]],[a[w-3][l],b[w-3][l]],[a[w-4][l],b[w-4][l]]),a[w-2][l]=s[0],b[w-2][l]=s[1]}if(h&&i)for(m=1;m<w;m+=(m+1)%3==0?2:1){for(l=3;l<v-3;l+=3)r=e([a[m][l-3],b[m][l-3]],[a[m][l],b[m][l]],[a[m][l+3],b[m][l+3]],h),a[m][l-1]=.5*(a[m][l-1]+r[0][0]),b[m][l-1]=.5*(b[m][l-1]+r[0][1]),a[m][l+1]=.5*(a[m][l+1]+r[1][0]),b[m][l+1]=.5*(b[m][l+1]+r[1][1]);s=d([a[m][0],b[m][0]],[a[m][2],b[m][2]],[a[m][3],b[m][3]]),a[m][1]=.5*(a[m][1]+s[0]),b[m][1]=.5*(b[m][1]+s[1]),s=d([a[m][v-1],b[m][v-1]],[a[m][v-3],b[m][v-3]],[a[m][v-4],b[m][v-4]]),a[m][v-2]=.5*(a[m][v-2]+s[0]),b[m][v-2]=.5*(b[m][v-2]+s[1])}return[a,b]}},{"../../lib":743,"./catmull_rom":921}],924:[function(a,b,c){"use strict";b.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],925:[function(a,b,c){"use strict";b.exports=function(a,b,c){return b&&c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;c*=3,d*=3;var m=e*e,n=1-e,o=n*n,p=n*e*2,q=-3*o,r=3*(o-p),s=3*(p-m),t=3*m,u=f*f,v=u*f,w=1-f,x=w*w,y=x*w;for(l=0;l<a.length;l++)k=a[l],g=q*k[d][c]+r*k[d][c+1]+s*k[d][c+2]+t*k[d][c+3],h=q*k[d+1][c]+r*k[d+1][c+1]+s*k[d+1][c+2]+t*k[d+1][c+3],i=q*k[d+2][c]+r*k[d+2][c+1]+s*k[d+2][c+2]+t*k[d+2][c+3],j=q*k[d+3][c]+r*k[d+3][c+1]+s*k[d+3][c+2]+t*k[d+3][c+3],b[l]=y*g+3*(x*f*h+w*u*i)+v*j;return b}:b?function(b,c,d,e,f){b||(b=[]);var g,h,i,j;c*=3;var k=e*e,l=1-e,m=l*l,n=l*e*2,o=-3*m,p=3*(m-n),q=3*(n-k),r=3*k,s=1-f;for(i=0;i<a.length;i++)j=a[i],g=o*j[d][c]+p*j[d][c+1]+q*j[d][c+2]+r*j[d][c+3],h=o*j[d+1][c]+p*j[d+1][c+1]+q*j[d+1][c+2]+r*j[d+1][c+3],b[i]=s*g+f*h;return b}:c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;d*=3;var m=f*f,n=m*f,o=1-f,p=o*o,q=p*o;for(k=0;k<a.length;k++)l=a[k],g=l[d][c+1]-l[d][c],h=l[d+1][c+1]-l[d+1][c],i=l[d+2][c+1]-l[d+2][c],j=l[d+3][c+1]-l[d+3][c],b[k]=q*g+3*(p*f*h+o*m*i)+n*j;return b}:function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k=1-f;for(i=0;i<a.length;i++)j=a[i],g=j[d][c+1]-j[d][c],h=j[d+1][c+1]-j[d+1][c],b[i]=k*g+f*h;return b}}},{}],926:[function(a,b,c){"use strict";b.exports=function(a,b,c){return b&&c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;c*=3,d*=3;var m=e*e,n=m*e,o=1-e,p=o*o,q=p*o,r=f*f,s=1-f,t=s*s,u=s*f*2,v=-3*t,w=3*(t-u),x=3*(u-r),y=3*r;for(l=0;l<a.length;l++)k=a[l],g=v*k[d][c]+w*k[d+1][c]+x*k[d+2][c]+y*k[d+3][c],h=v*k[d][c+1]+w*k[d+1][c+1]+x*k[d+2][c+1]+y*k[d+3][c+1],i=v*k[d][c+2]+w*k[d+1][c+2]+x*k[d+2][c+2]+y*k[d+3][c+2],j=v*k[d][c+3]+w*k[d+1][c+3]+x*k[d+2][c+3]+y*k[d+3][c+3],b[l]=q*g+3*(p*e*h+o*m*i)+n*j;return b}:b?function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k,l;c*=3
;var m=f*f,n=m*f,o=1-f,p=o*o,q=p*o;for(k=0;k<a.length;k++)l=a[k],g=l[d+1][c]-l[d][c],h=l[d+1][c+1]-l[d][c+1],i=l[d+1][c+2]-l[d][c+2],j=l[d+1][c+3]-l[d][c+3],b[k]=q*g+3*(p*f*h+o*m*i)+n*j;return b}:c?function(b,c,d,e,f){b||(b=[]);var g,h,i,j;d*=3;var k=1-e,l=f*f,m=1-f,n=m*m,o=m*f*2,p=-3*n,q=3*(n-o),r=3*(o-l),s=3*l;for(i=0;i<a.length;i++)j=a[i],g=p*j[d][c]+q*j[d+1][c]+r*j[d+2][c]+s*j[d+3][c],h=p*j[d][c+1]+q*j[d+1][c+1]+r*j[d+2][c+1]+s*j[d+3][c+1],b[i]=k*g+e*h;return b}:function(b,c,d,e,f){b||(b=[]);var g,h,i,j,k=1-e;for(i=0;i<a.length;i++)j=a[i],g=j[d+1][c]-j[d][c],h=j[d+1][c+1]-j[d][c+1],b[i]=k*g+e*h;return b}}},{}],927:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=b-2,g=c-2;return d&&e?function(b,c,d){b||(b=[]);var e,h,i,j,k,l,m=Math.max(0,Math.min(Math.floor(c),f)),n=Math.max(0,Math.min(Math.floor(d),g)),o=Math.max(0,Math.min(1,c-m)),p=Math.max(0,Math.min(1,d-n));m*=3,n*=3;var q=o*o,r=q*o,s=1-o,t=s*s,u=t*s,v=p*p,w=v*p,x=1-p,y=x*x,z=y*x;for(l=0;l<a.length;l++)k=a[l],e=u*k[n][m]+3*(t*o*k[n][m+1]+s*q*k[n][m+2])+r*k[n][m+3],h=u*k[n+1][m]+3*(t*o*k[n+1][m+1]+s*q*k[n+1][m+2])+r*k[n+1][m+3],i=u*k[n+2][m]+3*(t*o*k[n+2][m+1]+s*q*k[n+2][m+2])+r*k[n+2][m+3],j=u*k[n+3][m]+3*(t*o*k[n+3][m+1]+s*q*k[n+3][m+2])+r*k[n+3][m+3],b[l]=z*e+3*(y*p*h+x*v*i)+w*j;return b}:d?function(b,c,d){b||(b=[]);var e,h,i,j,k,l,m=Math.max(0,Math.min(Math.floor(c),f)),n=Math.max(0,Math.min(Math.floor(d),g)),o=Math.max(0,Math.min(1,c-m)),p=Math.max(0,Math.min(1,d-n));m*=3;var q=o*o,r=q*o,s=1-o,t=s*s,u=t*s,v=1-p;for(k=0;k<a.length;k++)l=a[k],e=v*l[n][m]+p*l[n+1][m],h=v*l[n][m+1]+p*l[n+1][m+1],i=v*l[n][m+2]+p*l[n+1][m+1],j=v*l[n][m+3]+p*l[n+1][m+1],b[k]=u*e+3*(t*o*h+s*q*i)+r*j;return b}:e?function(b,c,d){b||(b=[]);var e,h,i,j,k,l,m=Math.max(0,Math.min(Math.floor(c),f)),n=Math.max(0,Math.min(Math.floor(d),g)),o=Math.max(0,Math.min(1,c-m)),p=Math.max(0,Math.min(1,d-n));n*=3;var q=p*p,r=q*p,s=1-p,t=s*s,u=t*s,v=1-o;for(k=0;k<a.length;k++)l=a[k],e=v*l[n][m]+o*l[n][m+1],h=v*l[n+1][m]+o*l[n+1][m+1],i=v*l[n+2][m]+o*l[n+2][m+1],j=v*l[n+3][m]+o*l[n+3][m+1],b[k]=u*e+3*(t*p*h+s*q*i)+r*j;return b}:function(b,c,d){b||(b=[]);var e,h,i,j,k=Math.max(0,Math.min(Math.floor(c),f)),l=Math.max(0,Math.min(Math.floor(d),g)),m=Math.max(0,Math.min(1,c-k)),n=Math.max(0,Math.min(1,d-l)),o=1-n,p=1-m;for(i=0;i<a.length;i++)j=a[i],e=p*j[l][k]+m*j[l][k+1],h=p*j[l+1][k]+m*j[l+1][k+1],b[i]=o*e+n*h;return b}}},{}],928:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./xy_defaults"),f=a("./ab_defaults"),g=a("./set_convert"),h=a("./attributes"),i=a("../../components/color/attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,h,c,e)}b._clipPathId="clip"+b.uid+"carpet";var l=k("color",i.defaultLine);if(d.coerceFont(k,"font"),k("carpet"),f(a,b,j,k,l),!b.a||!b.b)return void(b.visible=!1);b.a.length<3&&(b.aaxis.smoothing=0),b.b.length<3&&(b.baxis.smoothing=0);var m=e(a,b,k);g(b),b._cheater&&k("cheaterslope"),m||(b.visible=!1)}},{"../../components/color/attributes":617,"../../lib":743,"./ab_defaults":911,"./attributes":913,"./set_convert":937,"./xy_defaults":939}],929:[function(a,b,c){"use strict";b.exports=function(a){return Array.isArray(a[0])}},{}],930:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.plot=a("./plot"),d.calc=a("./calc"),d.animatable=!0,d.moduleType="trace",d.name="carpet",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","carpet","carpetAxis","notLegendIsolatable"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"./attributes":913,"./calc":917,"./defaults":928,"./plot":936}],931:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c,d=a._fullData.length,e=0;e<d;e++){var f=a._fullData[e];if(f.index!==b.index&&("carpet"===f.type&&(c||(c=f),f.carpet===b.carpet)))return f}return c}},{}],932:[function(a,b,c){"use strict";b.exports=function(a,b,c){if(0===a.length)return"";var d,e=[],f=c?3:1;for(d=0;d<a.length;d+=f)e.push(a[d]+","+b[d]),c&&d<a.length-f&&(e.push("C"),e.push([a[d+1]+","+b[d+1],a[d+2]+","+b[d+2]+" "].join(" ")));return e.join(c?"":"L")}},{}],933:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d;for(Array.isArray(a)?a.length>b.length&&(a=a.slice(0,b.length)):a=[],d=0;d<b.length;d++)a[d]=c(b[d]);return a}},{}],934:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d,e;for(Array.isArray(a)?a.length>b.length&&(a=a.slice(0,b.length)):a=[],d=0;d<b.length;d++)for(Array.isArray(a[d])?a[d].length>b.length&&(a[d]=a[d].slice(0,b.length)):a[d]=[],e=0;e<b[0].length;e++)a[d][e]=c(b[d][e]);return a}},{}],935:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e,f){var g=e[0]*a.dpdx(b),h=e[1]*a.dpdy(c),i=1,j=1;if(f){var k=Math.sqrt(e[0]*e[0]+e[1]*e[1]),l=Math.sqrt(f[0]*f[0]+f[1]*f[1]),m=(e[0]*f[0]+e[1]*f[1])/k/l;j=Math.max(0,m)}var n=180*Math.atan2(h,g)/Math.PI;return n<-90?(n+=180,i=-i):n>90&&(n-=180,i=-i),{angle:n,flip:i,p:a.c2p(d,b,c),offsetMultplier:j}}},{}],936:[function(a,b,c){"use strict";function d(a,b,c){var d=a.selectAll(b+"."+c).data([0]);return d.enter().append(b).classed(c,!0),d}function e(a,b,c){var e=c[0],j=c[0].trace,k=b.xaxis,l=b.yaxis,m=j.aaxis,n=j.baxis,o=a._fullLayout,p=b.plot.selectAll(".carpetlayer"),q=o._clips,r=d(p,"g","carpet"+j.uid).classed("trace",!0),s=d(r,"g","minorlayer"),t=d(r,"g","majorlayer"),u=d(r,"g","boundarylayer"),v=d(r,"g","labellayer");r.style("opacity",j.opacity),g(k,l,t,m,"a",m._gridlines),g(k,l,t,n,"b",n._gridlines),g(k,l,s,m,"a",m._minorgridlines),g(k,l,s,n,"b",n._minorgridlines),g(k,l,u,m,"a-boundary",m._boundarylines),g(k,l,u,n,"b-boundary",n._boundarylines),i(a,v,j,e,k,l,h(a,k,l,j,e,v,m._labels,"a-label"),h(a,k,l,j,e,v,n._labels,"b-label")),f(j,e,q,k,l)}function f(a,b,c,e,f){var g,h,i,j,k=c.select("#"+a._clipPathId);k.size()||(k=c.append("clipPath").classed("carpetclip",!0));var l=d(k,"path","carpetboundary"),o=b.clipsegments,p=[];for(j=0;j<o.length;j++)g=o[j],h=m([],g.x,e.c2p),i=m([],g.y,f.c2p),p.push(n(h,i,g.bicubic));var q="M"+p.join("L")+"Z";k.attr("id",a._clipPathId),l.attr("d",q)}function g(a,b,c,d,e,f){var g="const-"+e+"-lines",h=c.selectAll("."+g).data(f);h.enter().append("path").classed(g,!0).style("vector-effect","non-scaling-stroke"),h.each(function(c){var d=c,e=d.x,f=d.y,g=m([],e,a.c2p),h=m([],f,b.c2p),i="M"+n(g,h,d.smoothing);k.select(this).attr("d",i).style("stroke-width",d.width).style("stroke",d.color).style("fill","none")}),h.exit().remove()}function h(a,b,c,d,e,f,g,h){var i=f.selectAll("text."+h).data(g);i.enter().append("text").classed(h,!0);var j=0;return i.each(function(e){var f;if("auto"===e.axis.tickangle)f=o(d,b,c,e.xy,e.dxy);else{var g=(e.axis.tickangle+180)*Math.PI/180;f=o(d,b,c,e.xy,[Math.cos(g),Math.sin(g)])}var h=(e.endAnchor?-1:1)*f.flip,i=k.select(this).attr({"text-anchor":h>0?"start":"end","data-notex":1}).call(l.font,e.font).text(e.text).call(p.convertToTspans,a),m=l.bBox(this);i.attr("transform","translate("+f.p[0]+","+f.p[1]+") rotate("+f.angle+")translate("+e.axis.labelpadding*h+","+.3*m.height+")"),j=Math.max(j,m.width+e.axis.labelpadding)}),i.exit().remove(),j}function i(a,b,c,d,e,f,g,h){var i,k,l,m;i=.5*(c.a[0]+c.a[c.a.length-1]),k=c.b[0],l=c.ab2xy(i,k,!0),m=c.dxyda_rough(i,k),j(a,b,c,d,l,m,c.aaxis,e,f,g,"a-title"),i=c.a[0],k=.5*(c.b[0]+c.b[c.b.length-1]),l=c.ab2xy(i,k,!0),m=c.dxydb_rough(i,k),j(a,b,c,d,l,m,c.baxis,e,f,h,"b-title")}function j(a,b,c,d,e,f,g,h,i,j,m){var n=[];g.title&&n.push(g.title);var q=b.selectAll("text."+m).data(n);q.enter().append("text").classed(m,!0),q.each(function(){var b=o(c,h,i,e,f);-1===["start","both"].indexOf(g.showticklabels)&&(j=0),j+=g.titlefont.size+g.titleoffset,k.select(this).text(g.title||"").call(p.convertToTspans,a).attr("transform","translate("+b.p[0]+","+b.p[1]+") rotate("+b.angle+") translate(0,"+j+")").classed("user-select-none",!0).attr("text-anchor","middle").call(l.font,g.titlefont)}),q.exit().remove()}var k=a("d3"),l=a("../../components/drawing"),m=a("./map_1d_array"),n=a("./makepath"),o=a("./orient_text"),p=a("../../lib/svg_text_utils");b.exports=function(a,b,c){for(var d=0;d<c.length;d++)e(a,b,c[d])}},{"../../components/drawing":643,"../../lib/svg_text_utils":766,"./makepath":932,"./map_1d_array":933,"./orient_text":935,d3:128}],937:[function(a,b,c){"use strict";var d=a("./constants"),e=a("../../lib/search").findBin,f=a("./compute_control_points"),g=a("./create_spline_evaluator"),h=a("./create_i_derivative_evaluator"),i=a("./create_j_derivative_evaluator");b.exports=function(a){var b=a.a,c=a.b,j=a.a.length,k=a.b.length,l=a.aaxis,m=a.baxis,n=b[0],o=b[j-1],p=c[0],q=c[k-1],r=b[b.length-1]-b[0],s=c[c.length-1]-c[0],t=r*d.RELATIVE_CULL_TOLERANCE,u=s*d.RELATIVE_CULL_TOLERANCE;n-=t,o+=t,p-=u,q+=u,a.isVisible=function(a,b){return a>n&&a<o&&b>p&&b<q},a.isOccluded=function(a,b){return a<n||a>o||b<p||b>q},l.c2p=function(a){return a},m.c2p=function(a){return a},a.setScale=function(){var b=a.x,c=a.y,d=f(a.xctrl,a.yctrl,b,c,l.smoothing,m.smoothing);a.xctrl=d[0],a.yctrl=d[1],a.evalxy=g([a.xctrl,a.yctrl],j,k,l.smoothing,m.smoothing),a.dxydi=h([a.xctrl,a.yctrl],l.smoothing,m.smoothing),a.dxydj=i([a.xctrl,a.yctrl],l.smoothing,m.smoothing)},a.i2a=function(a){var c=Math.max(0,Math.floor(a[0]),j-2),d=a[0]-c;return(1-d)*b[c]+d*b[c+1]},a.j2b=function(a){var b=Math.max(0,Math.floor(a[1]),j-2),d=a[1]-b;return(1-d)*c[b]+d*c[b+1]},a.ij2ab=function(b){return[a.i2a(b[0]),a.j2b(b[1])]},a.a2i=function(a){var c=Math.max(0,Math.min(e(a,b),j-2)),d=b[c],f=b[c+1];return Math.max(0,Math.min(j-1,c+(a-d)/(f-d)))},a.b2j=function(a){var b=Math.max(0,Math.min(e(a,c),k-2)),d=c[b],f=c[b+1];return Math.max(0,Math.min(k-1,b+(a-d)/(f-d)))},a.ab2ij=function(b){return[a.a2i(b[0]),a.b2j(b[1])]},a.i2c=function(b,c){return a.evalxy([],b,c)},a.ab2xy=function(d,e,f){if(!f&&(d<b[0]||d>b[j-1]|e<c[0]||e>c[k-1]))return[!1,!1];var g=a.a2i(d),h=a.b2j(e),i=a.evalxy([],g,h);if(f){var l,m,n,o,p=0,q=0,r=[];d<b[0]?(l=0,m=0,p=(d-b[0])/(b[1]-b[0])):d>b[j-1]?(l=j-2,m=1,p=(d-b[j-1])/(b[j-1]-b[j-2])):(l=Math.max(0,Math.min(j-2,Math.floor(g))),m=g-l),e<c[0]?(n=0,o=0,q=(e-c[0])/(c[1]-c[0])):e>c[k-1]?(n=k-2,o=1,q=(e-c[k-1])/(c[k-1]-c[k-2])):(n=Math.max(0,Math.min(k-2,Math.floor(h))),o=h-n),p&&(a.dxydi(r,l,n,m,o),i[0]+=r[0]*p,i[1]+=r[1]*p),q&&(a.dxydj(r,l,n,m,o),i[0]+=r[0]*q,i[1]+=r[1]*q)}return i},a.c2p=function(a,b,c){return[b.c2p(a[0]),c.c2p(a[1])]},a.p2x=function(a,b,c){return[b.p2c(a[0]),c.p2c(a[1])]},a.dadi=function(a){var c=Math.max(0,Math.min(b.length-2,a));return b[c+1]-b[c]},a.dbdj=function(a){var b=Math.max(0,Math.min(c.length-2,a));return c[b+1]-c[b]},a.dxyda=function(b,c,d,e){var f=a.dxydi(null,b,c,d,e),g=a.dadi(b,d);return[f[0]/g,f[1]/g]},a.dxydb=function(b,c,d,e){var f=a.dxydj(null,b,c,d,e),g=a.dbdj(c,e);return[f[0]/g,f[1]/g]},a.dxyda_rough=function(b,c,d){var e=r*(d||.1),f=a.ab2xy(b+e,c,!0),g=a.ab2xy(b-e,c,!0);return[.5*(f[0]-g[0])/e,.5*(f[1]-g[1])/e]},a.dxydb_rough=function(b,c,d){var e=s*(d||.1),f=a.ab2xy(b,c+e,!0),g=a.ab2xy(b,c-e,!0);return[.5*(f[0]-g[0])/e,.5*(f[1]-g[1])/e]},a.dpdx=function(a){return a._m},a.dpdy=function(a){return a._m}}},{"../../lib/search":761,"./compute_control_points":923,"./constants":924,"./create_i_derivative_evaluator":925,"./create_j_derivative_evaluator":926,"./create_spline_evaluator":927}],938:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c){var e,f,g,h=[],i=[],j=a[0].length,k=a.length,l=0;for(e=0;e<j;e++)for(f=0;f<k;f++)void 0===a[f][e]&&(h.push(e),i.push(f),a[f][e]=function(b,c){var d,e=0,f=0;return b>0&&void 0!==(d=a[c][b-1])&&(f++,e+=d),b<j-1&&void 0!==(d=a[c][b+1])&&(f++,e+=d),c>0&&void 0!==(d=a[c-1][b])&&(f++,e+=d),c<k-1&&void 0!==(d=a[c+1][b])&&(f++,e+=d),e/Math.max(1,f)}(e,f)),l=Math.max(l,Math.abs(a[f][e]));if(!h.length)return a;var m,n,o,p,q,r,s,t,u,v,w,x=0,y=0,z=h.length;do{for(x=0,g=0;g<z;g++){e=h[g],f=i[g];var A,B,C,D,E,F,G=0,H=0;0===e?(E=Math.min(j-1,2),C=b[E],D=b[1],A=a[f][E],B=a[f][1],H+=B+(B-A)*(b[0]-D)/(D-C),G++):e===j-1&&(E=Math.max(0,j-3),C=b[E],D=b[j-2],A=a[f][E],B=a[f][j-2],H+=B+(B-A)*(b[j-1]-D)/(D-C),G++),(0===e||e===j-1)&&f>0&&f<k-1&&(m=c[f+1]-c[f],n=c[f]-c[f-1],H+=(n*a[f+1][e]+m*a[f-1][e])/(n+m),G++),0===f?(F=Math.min(k-1,2),C=c[F],D=c[1],A=a[F][e],B=a[1][e],H+=B+(B-A)*(c[0]-D)/(D-C),G++):f===k-1&&(F=Math.max(0,k-3),C=c[F],D=c[k-2],A=a[F][e],B=a[k-2][e],H+=B+(B-A)*(c[k-1]-D)/(D-C),G++),(0===f||f===k-1)&&e>0&&e<j-1&&(m=b[e+1]-b[e],n=b[e]-b[e-1],H+=(n*a[f][e+1]+m*a[f][e-1])/(n+m),G++),G?H/=G:(o=b[e+1]-b[e],p=b[e]-b[e-1],q=c[f+1]-c[f],r=c[f]-c[f-1],s=o*p*(o+p),t=q*r*(q+r),H=(s*(r*a[f+1][e]+q*a[f-1][e])+t*(p*a[f][e+1]+o*a[f][e-1]))/(t*(p+o)+s*(r+q))),u=H-a[f][e],v=u/l,x+=v*v,w=G?0:.85,a[f][e]+=u*(1+w)}x=Math.sqrt(x)}while(y++<100&&x>1e-5);return d.log("Smoother converged to",x,"after",y,"iterations"),a}},{"../../lib":743}],939:[function(a,b,c){"use strict";var d=a("./has_columns"),e=a("../heatmap/convert_column_xyz");b.exports=function(a,b,c){var f=[],g=c("x");g&&!d(g)&&f.push("x"),b._cheater=!g;var h=c("y");if(h&&!d(h)&&f.push("y"),g||h)return f.length&&e(b,b.aaxis,b.baxis,"a","b",f),!0}},{"../heatmap/convert_column_xyz":981,"./has_columns":929}],940:[function(a,b,c){"use strict";var d=a("../scattergeo/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../plots/attributes"),h=a("../../lib/extend"),i=h.extendFlat,j=h.extendDeepAll,k=d.marker.line;b.exports=i({locations:{valType:"data_array",editType:"calc"},locationmode:d.locationmode,z:{valType:"data_array",editType:"calc"},text:i({},d.text,{}),marker:{line:{color:k.color,width:i({},k.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:d.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:d.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:i({},g.hoverinfo,{editType:"calc",flags:["location","z","text","name"]})},j({},e,{zmax:{editType:"calc"},zmin:{editType:"calc"}}),{colorbar:f})},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../lib/extend":732,"../../plots/attributes":787,"../scattergeo/attributes":1104}],941:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../constants/numerical").BADNUM,f=a("../../components/colorscale/calc"),g=a("../scatter/arrays_to_calcdata"),h=a("../scatter/calc_selection");b.exports=function(a,b){for(var c=b.locations.length,i=new Array(c),j=0;j<c;j++){var k=i[j]={},l=b.locations[j],m=b.z[j];k.loc="string"==typeof l?l:null,k.z=d(m)?m:e}return g(i,b),f(b,b.z,"","z"),h(i,b),i}},{"../../components/colorscale/calc":625,"../../constants/numerical":721,"../scatter/arrays_to_calcdata":1065,"../scatter/calc_selection":1068,"fast-isnumeric":140}],942:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/colorscale/defaults"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,e){return d.coerce(a,b,f,c,e)}var i,j=h("locations");if(j&&(i=j.length),!j||!i)return void(b.visible=!1);var k=h("z");if(!Array.isArray(k))return void(b.visible=!1);k.length>i&&(b.z=k.slice(0,i)),h("locationmode"),h("text"),h("marker.line.color"),h("marker.line.width"),h("marker.opacity"),e(a,b,g,h,{prefix:"",cLetter:"z"}),d.coerceSelectionMarkerOpacity(b,h)}},{"../../components/colorscale/defaults":628,"../../lib":743,"./attributes":940}],943:[function(a,b,c){"use strict";b.exports=function(a,b){return a.location=b.location,a.z=b.z,a}},{}],944:[function(a,b,c){"use strict";function d(a,b,c,d){var h=c.hi||b.hoverinfo,i="all"===h?f.hoverinfo.flags:h.split("+"),j=-1!==i.indexOf("name"),k=-1!==i.indexOf("location"),l=-1!==i.indexOf("z"),m=-1!==i.indexOf("text"),n=!j&&k,o=[];n?a.nameOverride=c.loc:(j&&(a.nameOverride=b.name),k&&o.push(c.loc)),l&&o.push(function(a){return e.tickText(d,d.c2l(a),"hover").text}(c.z)),m&&g(c,b,o),a.extraText=o.join("<br>")}var e=a("../../plots/cartesian/axes"),f=a("./attributes"),g=a("../scatter/fill_hover_text");b.exports=function(a,b,c){var e,f,g,h,i=a.cd,j=i[0].trace,k=a.subplot;for(f=0;f<i.length;f++)if(e=i[f],h=!1,e._polygons){for(g=0;g<e._polygons.length;g++)e._polygons[g].contains([b,c])&&(h=!h),e._polygons[g].contains([b+360,c])&&(h=!h);if(h)break}if(h&&e)return a.x0=a.x1=a.xa.c2p(e.ct),a.y0=a.y1=a.ya.c2p(e.ct),a.index=e.index,a.location=e.loc,a.z=e.z,d(a,j,e,k.mockAxis),[a]}},{"../../plots/cartesian/axes":789,"../scatter/fill_hover_text":1074,"./attributes":940}],945:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../heatmap/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="choropleth",d.basePlotModule=a("../../plots/geo"),d.categories=["geo","noOpacity"],d.meta={},b.exports=d},{"../../plots/geo":820,"../heatmap/colorbar":980,"./attributes":940,"./calc":941,"./defaults":942,"./event_data":943,"./hover":944,"./plot":946,"./select":947,"./style":948}],946:[function(a,b,c){"use strict";function d(a,b){for(var c=a[0].trace,d=a.length,f=i(c,b),g=0;g<d;g++){var h=a[g],k=j(c.locationmode,h.loc,f);k?(h.geojson=k,h.ct=k.properties.ct,h.index=g,h._polygons=e(k)):h.geojson=null}}function e(a){function b(a){for(var b=0;b<a.length-1;b++)if(a[b][0]>0&&a[b+1][0]<0)return b;return null}var c,d,e,f,g=a.geometry,i=g.coordinates,j=a.id,k=[];switch(c="RUS"===j||"FJI"===j?function(a){var c;if(null===b(a))c=a;else for(c=new Array(a.length),f=0;f<a.length;f++)c[f]=[a[f][0]<0?a[f][0]+360:a[f][0],a[f][1]];k.push(h.tester(c))}:"ATA"===j?function(a){var c=b(a);if(null===c)return k.push(h.tester(a));var d=new Array(a.length+1),e=0;for(f=0;f<a.length;f++)f>c?d[e++]=[a[f][0]+360,a[f][1]]:f===c?(d[e++]=a[f],d[e++]=[a[f][0],-90]):d[e++]=a[f];var g=h.tester(d);g.pts.pop(),k.push(g)}:function(a){k.push(h.tester(a))},g.type){case"MultiPolygon":for(d=0;d<i.length;d++)for(e=0;e<i[d].length;e++)c(i[d][e]);break;case"Polygon":for(d=0;d<i.length;d++)c(i[d])}return k}var f=a("d3"),g=a("../../lib"),h=a("../../lib/polygon"),i=a("../../lib/topojson_utils").getTopojsonFeatures,j=a("../../lib/geo_location_utils").locationToFeature,k=a("./style");b.exports=function(a,b,c){function e(a){return a[0].trace.uid}for(var h=0;h<c.length;h++)d(c[h],b.topojson);var i=b.layers.backplot.select(".choroplethlayer").selectAll("g.trace.choropleth").data(c,e);i.enter().append("g").attr("class","trace choropleth"),i.exit().remove(),i.each(function(b){var c=b[0].node3=f.select(this),d=c.selectAll("path.choroplethlocation").data(g.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),k(a,b)})}},{"../../lib":743,"../../lib/geo_location_utils":735,"../../lib/polygon":755,"../../lib/topojson_utils":769,"./style":948,d3:128}],947:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d,e,f,g,h=a.cd,i=a.xaxis,j=a.yaxis,k=[];if(!1===b)for(c=0;c<h.length;c++)h[c].selected=0;else for(c=0;c<h.length;c++)d=h[c],(e=d.ct)&&(f=i.c2p(e),g=j.c2p(e),b.contains([f,g])?(k.push({pointNumber:c,lon:e[0],lat:e[1]}),d.selected=1):d.selected=0);return k}},{}],948:[function(a,b,c){"use strict";function d(a,b){var c=b[0].trace,d=b[0].node3,i=d.selectAll(".choroplethlocation"),j=c.marker||{},k=j.line||{},l=h.makeColorScaleFunc(h.extractScale(c.colorscale,c.zmin,c.zmax));i.each(function(a){e.select(this).attr("fill",l(a.z)).call(f.stroke,a.mlc||k.color).call(g.dashLine,"",a.mlw||k.width||0).style("opacity",j.opacity)}),g.selectedPointStyle(i,c)}var e=a("d3"),f=a("../../components/color"),g=a("../../components/drawing"),h=a("../../components/colorscale");b.exports=function(a,b){b&&d(a,b)}},{"../../components/color":618,"../../components/colorscale":633,"../../components/drawing":643,d3:128}],949:[function(a,b,c){"use strict";var d=a("../heatmap/attributes"),e=a("../scatter/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../components/drawing/attributes").dash,i=a("../../plots/font_attributes"),j=a("../../lib/extend").extendFlat,k=e.line;b.exports=j({z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,zhoverformat:d.zhoverformat,connectgaps:d.connectgaps,autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:i({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:j({},k.color,{editType:"style+colorbars"}),width:j({},k.width,{editType:"style+colorbars"}),dash:h,smoothing:j({},k.smoothing,{}),editType:"plot"}},f,{autocolorscale:j({},f.autocolorscale,{dflt:!1}),zmin:j({},f.zmin,{editType:"calc"}),zmax:j({},f.zmax,{editType:"calc"})},{colorbar:g})},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../components/drawing/attributes":642,"../../lib/extend":732,"../../plots/font_attributes":816,"../heatmap/attributes":977,"../scatter/attributes":1066}],950:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"linear",range:[a,b]};return e.autoTicks(d,(b-a)/(c||15)),d}var e=a("../../plots/cartesian/axes"),f=a("../../lib").extendFlat,g=a("../heatmap/calc");b.exports=function(a,b){var c=g(a,b),h=b.contours;if(!1!==b.autocontour){var i=d(b.zmin,b.zmax,b.ncontours);h.size=i.dtick,h.start=e.tickFirst(i),i.range.reverse(),h.end=e.tickFirst(i),h.start===b.zmin&&(h.start+=h.size),h.end===b.zmax&&(h.end-=h.size),h.start>h.end&&(h.start=h.end=(h.start+h.end)/2),b._input.contours||(b._input.contours={}),f(b._input.contours,{start:h.start,end:h.end,size:h.size}),b._input.autocontour=!0}else{var j=h.start,k=h.end,l=b._input.contours;if(j>k&&(h.start=l.start=k,k=h.end=l.end=j,j=h.start),!(h.size>0)){var m;m=j===k?1:d(j,k,b.ncontours).dtick,l.size=h.size=m}}return c}},{"../../lib":743,"../../plots/cartesian/axes":789,"../heatmap/calc":978}],951:[function(a,b,c){"use strict";var d=a("../../plots/plots"),e=a("../../components/colorbar/draw"),f=a("./make_color_map"),g=a("./end_plus");b.exports=function(a,b){var c=b[0].trace,h="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+h).remove(),!c.showscale)return void d.autoMargin(a,h);var i=e(a,h);b[0].t.cb=i;var j=c.contours,k=c.line,l=j.size||1,m=j.coloring,n=f(c,{isColorbar:!0});"heatmap"===m&&i.filllevels({start:c.zmin,end:c.zmax,size:(c.zmax-c.zmin)/254}),i.fillcolor("fill"===m||"heatmap"===m?n:"").line({color:"lines"===m?n:k.color,width:!1!==j.showlines?k.width:0,dash:k.dash}).levels({start:j.start,end:g(j),size:l}).options(c.colorbar)()}},{"../../components/colorbar/draw":622,"../../plots/plots":852,"./end_plus":955,"./make_color_map":959}],952:[function(a,b,c){"use strict";b.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],953:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c){var f,g=d.coerce2(a,b,e,"contours.start"),h=d.coerce2(a,b,e,"contours.end"),i=!1===g||!1===h,j=c("contours.size");!(f=i?b.autocontour=!0:c("autocontour",!1))&&j||c("ncontours")}},{"../../lib":743,"./attributes":949}],954:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../heatmap/has_columns"),f=a("../heatmap/xyz_defaults"),g=a("./contours_defaults"),h=a("./style_defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}if(!f(a,b,k,j))return void(b.visible=!1);k("text"),k("connectgaps",e(b)),g(a,b,k),h(a,b,k,j)}},{"../../lib":743,"../heatmap/has_columns":984,"../heatmap/xyz_defaults":993,"./attributes":949,"./contours_defaults":953,"./style_defaults":963}],955:[function(a,b,c){"use strict";b.exports=function(a){return a.end+a.size/1e6}},{}],956:[function(a,b,c){"use strict";function d(a,b,c,d){return Math.abs(a[0]-b[0])<c&&Math.abs(a[1]-b[1])<d}function e(a,b){var c=a[2]-b[2],d=a[3]-b[3];return Math.sqrt(c*c+d*d)}function f(a,b,c,f,k){function l(a){return r[a%r.length]}var m,n=b.join(","),o=n,p=a.crossings[o],q=g(p,c,b),r=[h(a,b,[-q[0],-q[1]])],s=q.join(","),t=a.z.length,u=a.z[0].length;for(m=0;m<1e4;m++){if(p>20?(p=j.CHOOSESADDLE[p][(q[0]||q[1])<0?0:1],a.crossings[o]=j.SADDLEREMAINDER[p]):delete a.crossings[o],!(q=j.NEWDELTA[p])){i.log("Found bad marching index:",p,b,a.level);break}r.push(h(a,b,q)),b[0]+=q[0],b[1]+=q[1],d(r[r.length-1],r[r.length-2],f,k)&&r.pop(),o=b.join(",");var v=q[0]&&(b[0]<0||b[0]>u-2)||q[1]&&(b[1]<0||b[1]>t-2);if(o===n&&q.join(",")===s||c&&v)break;p=a.crossings[o]}1e4===m&&i.log("Infinite loop in contour?");var w,x,y,z,A,B,C,D,E,F,G,H=d(r[0],r[r.length-1],f,k),I=0,J=.2*a.smoothing,K=[],L=0;for(m=1;m<r.length;m++)C=e(r[m],r[m-1]),I+=C,K.push(C);var M=I/K.length*J;for(m=r.length-2;m>=L;m--)if((w=K[m])<M){for(y=0,x=m-1;x>=L&&w+K[x]<M;x--)w+=K[x];if(H&&m===r.length-2)for(y=0;y<x&&w+K[y]<M;y++)w+=K[y];A=m-x+y+1,B=Math.floor((m+x+y+2)/2),z=H||m!==r.length-2?H||-1!==x?A%2?l(B):[(l(B)[0]+l(B+1)[0])/2,(l(B)[1]+l(B+1)[1])/2]:r[0]:r[r.length-1],r.splice(x+1,m-x+1,z),m=x+1,y&&(L=y),H&&(m===r.length-2?r[y]=r[r.length-1]:0===m&&(r[r.length-1]=r[0]))}for(r.splice(0,L),m=0;m<r.length;m++)r[m].length=2;if(!(r.length<2))if(H)r.pop(),a.paths.push(r);else{c||i.log("Unclosed interior contour?",a.level,n,r.join("L"));var N=!1;for(D=0;D<a.edgepaths.length;D++)if(F=a.edgepaths[D],!N&&d(F[0],r[r.length-1],f,k)){r.pop(),N=!0;var O=!1;for(E=0;E<a.edgepaths.length;E++)if(G=a.edgepaths[E],d(G[G.length-1],r[0],f,k)){O=!0,r.shift(),a.edgepaths.splice(D,1),E===D?a.paths.push(r.concat(G)):(E>D&&E--,a.edgepaths[E]=G.concat(r,F));break}O||(a.edgepaths[D]=r.concat(F))}for(D=0;D<a.edgepaths.length&&!N;D++)F=a.edgepaths[D],d(F[F.length-1],r[0],f,k)&&(r.shift(),a.edgepaths[D]=F.concat(r),N=!0);N||a.edgepaths.push(r)}}function g(a,b,c){var d=0,e=0;return a>20&&b?208===a||1114===a?d=0===c[0]?1:-1:e=0===c[1]?1:-1:-1!==j.BOTTOMSTART.indexOf(a)?e=1:-1!==j.LEFTSTART.indexOf(a)?d=1:-1!==j.TOPSTART.indexOf(a)?e=-1:d=-1,[d,e]}function h(a,b,c){var d=b[0]+Math.max(c[0],0),e=b[1]+Math.max(c[1],0),f=a.z[e][d],g=a.xaxis,h=a.yaxis;if(c[1]){var i=(a.level-f)/(a.z[e][d+1]-f);return[g.c2p((1-i)*a.x[d]+i*a.x[d+1],!0),h.c2p(a.y[e],!0),d+i,e]}var j=(a.level-f)/(a.z[e+1][d]-f);return[g.c2p(a.x[d],!0),h.c2p((1-j)*a.y[e]+j*a.y[e+1],!0),d,e+j]}var i=a("../../lib"),j=a("./constants");b.exports=function(a,b,c){var d,e,g,h,j;for(b=b||.01,c=c||.01,g=0;g<a.length;g++){for(h=a[g],j=0;j<h.starts.length;j++)e=h.starts[j],f(h,e,"edge",b,c);for(d=0;Object.keys(h.crossings).length&&d<1e4;)d++,e=Object.keys(h.crossings)[0].split(",").map(Number),f(h,e,void 0,b,c);1e4===d&&i.log("Infinite loop in contour?")}}},{"../../lib":743,"./constants":952}],957:[function(a,b,c){"use strict";var d=a("../heatmap/hover");b.exports=function(a,b,c,e,f){return d(a,b,c,e,f,!0)}},{"../heatmap/hover":985}],958:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot").plot,d.style=a("./style"),d.colorbar=a("./colorbar"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="contour",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","contour"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"./attributes":949,"./calc":950,"./colorbar":951,"./defaults":954,"./hover":957,"./plot":961,"./style":962}],959:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/colorscale"),f=a("./end_plus");b.exports=function(a){var b=a.contours,c=b.start,g=f(b),h=b.size||1,i=Math.floor((g-c)/h)+1,j="lines"===b.coloring?0:1;isFinite(h)||(h=1,i=1);var k,l,m=a.colorscale,n=m.length,o=new Array(n),p=new Array(n);if("heatmap"===b.coloring){for(a.zauto&&!1===a.autocontour&&(a.zmin=c-h/2,a.zmax=a.zmin+i*h),l=0;l<n;l++)k=m[l],o[l]=k[0]*(a.zmax-a.zmin)+a.zmin,p[l]=k[1];var q=d.extent([a.zmin,a.zmax,b.start,b.start+h*(i-1)]),r=q[a.zmin<a.zmax?0:1],s=q[a.zmin<a.zmax?1:0];r!==a.zmin&&(o.splice(0,0,r),p.splice(0,0,Range[0])),s!==a.zmax&&(o.push(s),p.push(p[p.length-1]))}else for(l=0;l<n;l++)k=m[l],o[l]=(k[0]*(i+j-1)-j/2)*h+c,p[l]=k[1];return e.makeColorScaleFunc({domain:o,range:p},{noNumericCheck:!0})}},{"../../components/colorscale":633,"./end_plus":955,d3:128}],960:[function(a,b,c){"use strict";function d(a,b){var c=(b[0][0]>a?0:1)+(b[0][1]>a?0:2)+(b[1][1]>a?0:4)+(b[1][0]>a?0:8);if(5===c||10===c){return a>(b[0][0]+b[0][1]+b[1][0]+b[1][1])/4?5===c?713:1114:5===c?104:208}return 15===c?0:c}var e=a("./constants");b.exports=function(a){var b,c,f,g,h,i,j,k,l,m=a[0].z,n=m.length,o=m[0].length,p=2===n||2===o;for(c=0;c<n-1;c++)for(g=[],0===c&&(g=g.concat(e.BOTTOMSTART)),c===n-2&&(g=g.concat(e.TOPSTART)),b=0;b<o-1;b++)for(f=g.slice(),0===b&&(f=f.concat(e.LEFTSTART)),b===o-2&&(f=f.concat(e.RIGHTSTART)),h=b+","+c,i=[[m[c][b],m[c][b+1]],[m[c+1][b],m[c+1][b+1]]],l=0;l<a.length;l++)k=a[l],(j=d(k.level,i))&&(k.crossings[h]=j,-1!==f.indexOf(j)&&(k.starts.push([b,c]),p&&-1!==f.indexOf(j,f.indexOf(j)+1)&&k.starts.push([b,c])))}},{"./constants":952}],961:[function(a,b,c){"use strict";function d(a,b,d){var h=d[0].trace,j=d[0].x,l=d[0].y,m=h.contours,n=h.uid,o=b.xaxis,p=b.yaxis,q=a._fullLayout,r="contour"+n,v=e(m,b,d[0]);if(!0!==h.visible)return q._paper.selectAll("."+r+",.hm"+n).remove(),void q._infolayer.selectAll(".cb"+n).remove();"heatmap"===m.coloring?(h.zauto&&!1===h.autocontour&&(h._input.zmin=h.zmin=m.start-m.size/2,h._input.zmax=h.zmax=h.zmin+v.length*m.size),s(a,b,[d])):(q._paper.selectAll(".hm"+n).remove(),q._infolayer.selectAll("g.rangeslider-container").selectAll(".hm"+n).remove()),t(v),u(v);var w=o.c2p(j[0],!0),x=o.c2p(j[j.length-1],!0),y=p.c2p(l[0],!0),z=p.c2p(l[l.length-1],!0),A=[[w,z],[x,z],[x,y],[w,y]],B=c.makeContourGroup(b,d,r);f(B,A,m),g(B,v,A,m),i(B,v,a,d[0],m,A),k(B,b,q._clips,d[0],A)}function e(a,b,c){for(var d=a.size,e=[],f=v(a),g=a.start;g<f;g+=d)if(e.push({level:g,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:c.x,y:c.y,z:c.z,smoothing:c.trace.line.smoothing}),e.length>1e3){n.warn("Too many contours, clipping at 1000",a);break}return e}function f(a,b,c){var d=a.selectAll("g.contourbg").data([0]);d.enter().append("g").classed("contourbg",!0);var e=d.selectAll("path").data("fill"===c.coloring?[0]:[]);e.enter().append("path"),e.exit().remove(),e.attr("d","M"+b.join("L")+"Z").style("stroke","none")}function g(a,b,c,d){var e=a.selectAll("g.contourfill").data([0]);e.enter().append("g").classed("contourfill",!0);var f=e.selectAll("path").data("fill"===d.coloring?b:[]);f.enter().append("path"),f.exit().remove(),f.each(function(a){var b=h(a,c);b?m.select(this).attr("d",b).style("stroke","none"):m.select(this).remove()})}function h(a,b){function c(a){return Math.abs(a[0]-b[2][0])<.01}for(var d,e,f,g,h,i,j=Math.min(a.z[0][0],a.z[0][1]),k=a.edgepaths.length||j<=a.level?"":"M"+b.join("L")+"Z",l=0,m=a.edgepaths.map(function(a,b){return b}),p=!0;m.length;){for(i=o.smoothopen(a.edgepaths[l],a.smoothing),k+=p?i:i.replace(/^M/,"L"),m.splice(m.indexOf(l),1),d=a.edgepaths[l][a.edgepaths[l].length-1],g=-1,f=0;f<4;f++){
if(!d){n.log("Missing end?",l,a);break}for(!function(a){return Math.abs(a[1]-b[0][1])<.01}(d)||c(d)?!function(a){return Math.abs(a[0]-b[0][0])<.01}(d)?!function(a){return Math.abs(a[1]-b[2][1])<.01}(d)?c(d)&&(e=b[2]):e=b[3]:e=b[0]:e=b[1],h=0;h<a.edgepaths.length;h++){var q=a.edgepaths[h][0];Math.abs(d[0]-e[0])<.01?Math.abs(d[0]-q[0])<.01&&(q[1]-d[1])*(e[1]-q[1])>=0&&(e=q,g=h):Math.abs(d[1]-e[1])<.01?Math.abs(d[1]-q[1])<.01&&(q[0]-d[0])*(e[0]-q[0])>=0&&(e=q,g=h):n.log("endpt to newendpt is not vert. or horz.",d,e,q)}if(d=e,g>=0)break;k+="L"+e}if(g===a.edgepaths.length){n.log("unclosed perimeter path");break}l=g,p=-1===m.indexOf(l),p&&(l=m[0],k+="Z")}for(l=0;l<a.paths.length;l++)k+=o.smoothclosed(a.paths[l],a.smoothing);return k}function i(a,b,d,e,f,g){var h=a.selectAll("g.contourlines").data([0]);h.enter().append("g").classed("contourlines",!0);var i=!1!==f.showlines,j=f.showlabels,k=i&&j,l=c.createLines(h,i||j,b),p=c.createLineClip(h,k,d._fullLayout._clips,e.trace.uid),q=a.selectAll("g.contourlabels").data(j?[0]:[]);if(q.exit().remove(),q.enter().append("g").classed("contourlabels",!0),j){var r=[g],s=[];n.clearLocationCache();var t=c.labelFormatter(f,e.t.cb,d._fullLayout),u=o.tester.append("text").attr("data-notex",1).call(o.font,f.labelfont),v=b[0].xaxis._length,x=b[0].yaxis._length,y={left:Math.max(g[0][0],0),right:Math.min(g[2][0],v),top:Math.max(g[0][1],0),bottom:Math.min(g[2][1],x)};y.middle=(y.top+y.bottom)/2,y.center=(y.left+y.right)/2;var z=Math.sqrt(v*v+x*x),A=w.LABELDISTANCE*z/Math.max(1,b.length/w.LABELINCREASE);l.each(function(a){var b=c.calcTextOpts(a.level,t,u,d);m.select(this).selectAll("path").each(function(){var a=this,d=n.getVisibleSegment(a,y,b.height/2);if(d&&!(d.len<(b.width+b.height)*w.LABELMIN))for(var e=Math.min(Math.ceil(d.len/A),w.LABELMAX),f=0;f<e;f++){var g=c.findBestTextLocation(a,d,b,s,y);if(!g)break;c.addLabelData(g,b,s,r)}})}),u.remove(),c.drawLabels(q,s,d,p,k?r:null)}j&&!i&&l.remove()}function j(a,b,c,d){var e=b.width/2,f=b.height/2,g=a.x,h=a.y,i=a.theta,j=Math.cos(i)*e,k=Math.sin(i)*e,l=(g>d.center?d.right-g:g-d.left)/(j+Math.abs(Math.sin(i)*f)),m=(h>d.middle?d.bottom-h:h-d.top)/(Math.abs(k)+Math.cos(i)*f);if(l<1||m<1)return 1/0;var o=x.EDGECOST*(1/(l-1)+1/(m-1));o+=x.ANGLECOST*i*i;for(var p=g-j,q=h-k,r=g+j,s=h+k,t=0;t<c.length;t++){var u=c[t],v=Math.cos(u.theta)*u.width/2,w=Math.sin(u.theta)*u.width/2,y=2*n.segmentDistance(p,q,r,s,u.x-v,u.y-w,u.x+v,u.y+w)/(b.height+u.height),z=u.level===b.level,A=z?x.SAMELEVELDISTANCE:1;if(y<=A)return 1/0;o+=x.NEIGHBORCOST*(z?x.SAMELEVELFACTOR:1)/(y-A)}return o}function k(a,b,c,d,e){var f="clip"+d.trace.uid,g=c.selectAll("#"+f).data(d.trace.connectgaps?[]:[0]);if(g.enter().append("clipPath").classed("contourclip",!0).attr("id",f),g.exit().remove(),!1===d.trace.connectgaps){var i={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:d.x,y:d.y,z:l(d),smoothing:0};t([i]),u([i]);var j=h(i,e),k=g.selectAll("path").data([0]);k.enter().append("path"),k.attr("d",j)}else f=null;a.call(o.setClipUrl,f),b.plot.selectAll(".hm"+d.trace.uid).call(o.setClipUrl,f)}function l(a){var b,c,d=a.trace._emptypoints,e=[],f=a.z.length,g=a.z[0].length,h=[];for(b=0;b<g;b++)h.push(1);for(b=0;b<f;b++)e.push(h.slice());for(b=0;b<d.length;b++)c=d[b],e[c[0]][c[1]]=0;return a.zmask=e,e}var m=a("d3"),n=a("../../lib"),o=a("../../components/drawing"),p=a("../../lib/svg_text_utils"),q=a("../../plots/cartesian/axes"),r=a("../../plots/cartesian/set_convert"),s=a("../heatmap/plot"),t=a("./make_crossings"),u=a("./find_all_paths"),v=a("./end_plus"),w=a("./constants"),x=w.LABELOPTIMIZER;c.plot=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])},c.makeContourGroup=function(a,b,c){var d=a.plot.select(".maplayer").selectAll("g.contour."+c).data(b);return d.enter().append("g").classed("contour",!0).classed(c,!0),d.exit().remove(),d},c.createLines=function(a,b,c){var d=c[0].smoothing,e=a.selectAll("g.contourlevel").data(b?c:[]);if(e.exit().remove(),e.enter().append("g").classed("contourlevel",!0),b){var f=e.selectAll("path.openline").data(function(a){return a.pedgepaths||a.edgepaths});f.exit().remove(),f.enter().append("path").classed("openline",!0),f.attr("d",function(a){return o.smoothopen(a,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var g=e.selectAll("path.closedline").data(function(a){return a.ppaths||a.paths});g.exit().remove(),g.enter().append("path").classed("closedline",!0),g.attr("d",function(a){return o.smoothclosed(a,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return e},c.createLineClip=function(a,b,c,d){var e=b?"clipline"+d:null,f=c.selectAll("#"+e).data(b?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",e),o.setClipUrl(a,e),f},c.labelFormatter=function(a,b,c){if(a.labelformat)return c._d3locale.numberFormat(a.labelformat);var d;return b?d=b.axis:(d={type:"linear",_id:"ycontour",nticks:(a.end-a.start)/a.size,showexponent:"all",range:[a.start,a.end]},r(d,c),q.calcTicks(d),d._tmin=null,d._tmax=null),function(a){return q.tickText(d,a).text}},c.calcTextOpts=function(a,b,c,d){var e=b(a);c.text(e).call(p.convertToTspans,d);var f=o.bBox(c.node(),!0);return{text:e,width:f.width,height:f.height,level:a,dy:(f.top+f.bottom)/2}},c.findBestTextLocation=function(a,b,c,d,e){var f,g,h,i,k,l=c.width;b.isClosed?(g=b.len/x.INITIALSEARCHPOINTS,f=b.min+g/2,h=b.max):(g=(b.len-l)/(x.INITIALSEARCHPOINTS+1),f=b.min+g+l/2,h=b.max-(g+l)/2);for(var m=1/0,o=0;o<x.ITERATIONS;o++){for(var p=f;p<h;p+=g){var q=n.getTextLocation(a,b.total,p,l),r=j(q,c,d,e);r<m&&(m=r,k=q,i=p)}if(m>2*x.MAXCOST)break;o&&(g/=2),f=i-g/2,h=f+1.5*g}if(m<=x.MAXCOST)return k},c.addLabelData=function(a,b,c,d){var e=b.width/2,f=b.height/2,g=a.x,h=a.y,i=a.theta,j=Math.sin(i),k=Math.cos(i),l=e*k,m=f*j,n=e*j,o=-f*k,p=[[g-l-m,h-n-o],[g+l-m,h+n-o],[g+l+m,h+n+o],[g-l+m,h-n+o]];c.push({text:b.text,x:g,y:h,dy:b.dy,theta:i,level:b.level,width:b.width,height:b.height}),d.push(p)},c.drawLabels=function(a,b,c,d,e){var f=a.selectAll("text").data(b,function(a){return a.text+","+a.x+","+a.y+","+a.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(a){var b=a.x+Math.sin(a.theta)*a.dy,d=a.y-Math.cos(a.theta)*a.dy;m.select(this).text(a.text).attr({x:b,y:d,transform:"rotate("+180*a.theta/Math.PI+" "+b+" "+d+")"}).call(p.convertToTspans,c)}),e){for(var g="",h=0;h<e.length;h++)g+="M"+e[h].join("L")+"Z";var i=d.selectAll("path").data([0]);i.enter().append("path"),i.attr("d",g)}}},{"../../components/drawing":643,"../../lib":743,"../../lib/svg_text_utils":766,"../../plots/cartesian/axes":789,"../../plots/cartesian/set_convert":808,"../heatmap/plot":990,"./constants":952,"./end_plus":955,"./find_all_paths":956,"./make_crossings":960,d3:128}],962:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/drawing"),f=a("../heatmap/style"),g=a("./make_color_map");b.exports=function(a){var b=d.select(a).selectAll("g.contour");b.style("opacity",function(a){return a.trace.opacity}),b.each(function(a){var b=d.select(this),c=a.trace,f=c.contours,h=c.line,i=f.size||1,j=f.start,k="constraint"===f.type,l=!k&&"lines"===f.coloring,m=!k&&"fill"===f.coloring,n=l||m?g(c):null;b.selectAll("g.contourlevel").each(function(a){d.select(this).selectAll("path").call(e.lineGroupStyle,h.width,l?n(a.level):h.color,h.dash)});var o=f.labelfont;if(b.selectAll("g.contourlabels text").each(function(a){e.font(d.select(this),{family:o.family,size:o.size,color:o.color||(l?n(a.level):h.color)})}),k)b.selectAll("g.contourfill path").style("fill",c.fillcolor);else if(m){var p;b.selectAll("g.contourfill path").style("fill",function(a){return void 0===p&&(p=a.level),n(a.level+.5*i)}),void 0===p&&(p=j),b.selectAll("g.contourbg path").style("fill",n(p-.5*i))}}),f(a)}},{"../../components/drawing":643,"../heatmap/style":991,"./make_color_map":959,d3:128}],963:[function(a,b,c){"use strict";var d=a("../../components/colorscale/defaults"),e=a("../../lib");b.exports=function(a,b,c,f,g){g||(g={});var h,i=c("contours.coloring"),j="";if("fill"===i&&(h=c("contours.showlines")),!1!==h&&("lines"!==i&&(j=c("line.color",g.defaultColor||"#000")),c("line.width",void 0===g.defaultWidth?.5:g.defaultWidth),c("line.dash")),c("line.smoothing"),"none"!==i&&d(a,b,f,c,{prefix:"",cLetter:"z"}),c("contours.showlabels")){var k=f.font;e.coerceFont(c,"contours.labelfont",{family:k.family,size:k.size,color:j}),c("contours.labelformat")}!1!==g.hasHover&&c("zhoverformat")}},{"../../components/colorscale/defaults":628,"../../lib":743}],964:[function(a,b,c){"use strict";var d=a("../heatmap/attributes"),e=a("../contour/attributes"),f=e.contours,g=a("../scatter/attributes"),h=a("../../components/colorscale/attributes"),i=a("../../components/colorbar/attributes"),j=a("../../lib/extend").extendFlat,k=g.line,l=a("./constants");b.exports=j({},{carpet:{valType:"string",editType:"calc"},z:d.z,a:d.x,a0:d.x0,da:d.dx,b:d.y,b0:d.y0,db:d.dy,text:d.text,transpose:d.transpose,atype:d.xtype,btype:d.ytype,mode:{valType:"flaglist",flags:["lines","fill"],extras:["none"],editType:"calc"},connectgaps:d.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:e.autocontour,ncontours:e.ncontours,contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:f.start,end:f.end,size:f.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:f.showlines,showlabels:f.showlabels,labelfont:f.labelfont,labelformat:f.labelformat,operation:{valType:"enumerated",values:[].concat(l.INEQUALITY_OPS).concat(l.INTERVAL_OPS).concat(l.SET_OPS),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc"},line:{color:j({},k.color,{}),width:k.width,dash:k.dash,smoothing:j({},k.smoothing,{}),editType:"plot"}},h,{autocolorscale:j({},h.autocolorscale,{dflt:!1})},{colorbar:i})},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../lib/extend":732,"../contour/attributes":949,"../heatmap/attributes":977,"../scatter/attributes":1066,"./constants":967}],965:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"linear",range:[a,b]};return f.autoTicks(d,(b-a)/(c||15)),d}function e(a,b){var c,d,e,f,g,p,q,r=b.carpetTrace,s=r.aaxis,t=r.baxis;s._minDtick=0,t._minDtick=0,i(b)&&j(b,s,t,"a","b",["z"]),c=b.a?s.makeCalcdata(b,"a"):[],f=b.b?t.makeCalcdata(b,"b"):[],d=b.a0||0,e=b.da||1,g=b.b0||0,p=b.db||1,q=k(b.z,b.transpose),b._emptypoints=n(q),b._interpz=m(q,b._emptypoints,b._interpz);var u=l(q),v="scaled"===b.xtype?"":c,w=o(b,v,d,e,u,s),x="scaled"===b.ytype?"":f,y=o(b,x,g,p,q.length,t),z={a:w,b:y,z:q};return"levels"===b.contours.type&&h(b,q,"","z"),[z]}var f=a("../../plots/cartesian/axes"),g=a("../../lib").extendFlat,h=a("../../components/colorscale/calc"),i=a("../heatmap/has_columns"),j=a("../heatmap/convert_column_xyz"),k=a("../heatmap/clean_2d_array"),l=a("../heatmap/max_row_length"),m=a("../heatmap/interp2d"),n=a("../heatmap/find_empties"),o=a("../heatmap/make_bound_array"),p=a("./defaults"),q=a("../carpet/lookup_carpetid");b.exports=function(a,b){var c=b.carpetTrace=q(a,b);if(c&&c.visible&&"legendonly"!==c.visible){if(!b.a||!b.b){var h=a.data[c.index],i=a.data[b.index];i.a||(i.a=h.a),i.b||(i.b=h.b),p(i,b,b._defaultColor,a._fullLayout)}var j=e(a,b),k=b.contours;if(!0===b.autocontour){var l=d(b.zmin,b.zmax,b.ncontours);k.size=l.dtick,k.start=f.tickFirst(l),l.range.reverse(),k.end=f.tickFirst(l),k.start===b.zmin&&(k.start+=k.size),k.end===b.zmax&&(k.end-=k.size),k.start>k.end&&(k.start=k.end=(k.start+k.end)/2),b._input.contours=g({},k)}else{var m=k.start,n=k.end,o=b._input.contours;if(m>n&&(k.start=o.start=n,n=k.end=o.end=m,m=k.start),!(k.size>0)){var r;r=m===n?1:d(m,n,b.ncontours).dtick,o.size=k.size=r}}return j}}},{"../../components/colorscale/calc":625,"../../lib":743,"../../plots/cartesian/axes":789,"../carpet/lookup_carpetid":931,"../heatmap/clean_2d_array":979,"../heatmap/convert_column_xyz":981,"../heatmap/find_empties":983,"../heatmap/has_columns":984,"../heatmap/interp2d":987,"../heatmap/make_bound_array":988,"../heatmap/max_row_length":989,"./defaults":971}],966:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e,f,g,h=d.a.length,i=d.b.length,j=d.z,k=-1/0,l=1/0;for(e=0;e<i;e++)l=Math.min(l,j[e][0]),l=Math.min(l,j[e][h-1]),k=Math.max(k,j[e][0]),k=Math.max(k,j[e][h-1]);for(e=1;e<h-1;e++)l=Math.min(l,j[0][e]),l=Math.min(l,j[i-1][e]),k=Math.max(k,j[0][e]),k=Math.max(k,j[i-1][e]);switch(b){case">":case">=":d.contours.value>k&&(a[0].prefixBoundary=!0);break;case"<":case"<=":d.contours.value<l&&(a[0].prefixBoundary=!0);break;case"[]":case"()":f=Math.min.apply(null,d.contours.value),g=Math.max.apply(null,d.contours.value),g<l&&(a[0].prefixBoundary=!0),f>k&&(a[0].prefixBoundary=!0);break;case"][":case")(":f=Math.min.apply(null,d.contours.value),g=Math.max.apply(null,d.contours.value),f<l&&g>k&&(a[0].prefixBoundary=!0)}}},{}],967:[function(a,b,c){"use strict";b.exports={INEQUALITY_OPS:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"]}},{}],968:[function(a,b,c){"use strict";function d(a,b){function c(a){return h(a)?+a:null}var d,e=Array.isArray(b);return-1!==g.INEQUALITY_OPS.indexOf(a)?d=c(e?b[0]:b):-1!==g.INTERVAL_OPS.indexOf(a)?d=e?[c(b[0]),c(b[1])]:[c(b),c(b)]:-1!==g.SET_OPS.indexOf(a)&&(d=e?b.map(c):[c(b)]),d}function e(a){return function(b){b=d(a,b);var c=Math.min(b[0],b[1]),e=Math.max(b[0],b[1]);return{start:c,end:e,size:e-c}}}function f(a){return function(b){return b=d(a,b),{start:b,end:1/0,size:1/0}}}var g=a("./constants"),h=a("fast-isnumeric");b.exports["[]"]=e("[]"),b.exports["()"]=e("()"),b.exports["[)"]=e("[)"),b.exports["(]"]=e("(]"),b.exports["]["]=e("]["),b.exports[")("]=e(")("),b.exports[")["]=e(")["),b.exports["]("]=e("]("),b.exports[">"]=f(">"),b.exports[">="]=f(">="),b.exports["<"]=f("<"),b.exports["<="]=f("<="),b.exports["="]=f("=")},{"./constants":967,"fast-isnumeric":140}],969:[function(a,b,c){"use strict";var d=a("./constraint_mapping"),e=a("fast-isnumeric");b.exports=function(a,b){var c;-1===["=","<","<=",">",">="].indexOf(b.operation)?(a("contours.value",[0,1]),Array.isArray(b.value)?b.value.length>2?b.value=b.value.slice(2):0===b.length?b.value=[0,1]:b.length<2?(c=parseFloat(b.value[0]),b.value=[c,c+1]):b.value=[parseFloat(b.value[0]),parseFloat(b.value[1])]:e(b.value)&&(c=parseFloat(b.value),b.value=[c,c+1])):(a("contours.value",0),e(b.value)||(Array.isArray(b.value)?b.value=parseFloat(b.value[0]):b.value=0));var f=d[b.operation](b.value);b.start=f.start,b.end=f.end,b.size=f.size}},{"./constraint_mapping":968,"fast-isnumeric":140}],970:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){var c,e,f,g=function(a){return a.reverse()},h=function(a){return a};switch(b){case"][":case")[":case"](":case")(":var i=g;g=h,h=i;case"[]":case"[)":case"(]":case"()":if(2!==a.length)return void d.warn("Contour data invalid for the specified inequality range operation.");for(e=a[0],f=a[1],c=0;c<e.edgepaths.length;c++)e.edgepaths[c]=g(e.edgepaths[c]);for(c=0;c<e.paths.length;c++)e.paths[c]=g(e.paths[c]);for(;f.edgepaths.length;)e.edgepaths.push(h(f.edgepaths.shift()));for(;f.paths.length;)e.paths.push(h(f.paths.shift()));a.pop();break;case">=":case">":if(1!==a.length)return void d.warn("Contour data invalid for the specified inequality operation.");for(e=a[0],c=0;c<e.edgepaths.length;c++)e.edgepaths[c]=g(e.edgepaths[c]);for(c=0;c<e.paths.length;c++)e.paths[c]=g(e.paths[c])}}},{"../../lib":743}],971:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../heatmap/xyz_defaults"),f=a("./attributes"),g=a("../contour/style_defaults"),h=a("../scatter/fillcolor_defaults"),i=a("../../plots/attributes"),j=a("./constraint_value_defaults"),k=a("../../components/color").addOpacity;b.exports=function(a,b,c,l){function m(c,e){return d.coerce(a,b,f,c,e)}if(m("carpet"),a.a&&a.b){var n,o,p,q,r;if(!e(a,b,m,l,"a","b"))return void(b.visible=!1);m("text"),m("contours.type");var s=b.contours;if("constraint"===s.type){m("contours.operation"),j(m,s),d.coerce(a,b,i,"showlegend",!0),m("contours.coloring","="===s.operation?"lines":"fill"),m("contours.showlines",!0),"="===s.operation&&(s.coloring="lines"),h(a,b,c,m);var t=b.fillcolor?k(b.fillcolor,1):c;g(a,b,m,l,{hasHover:!1,defaultColor:t,defaultWidth:2}),"="===s.operation&&(m("line.color",c),"fill"===s.coloring&&(s.coloring="lines"),"lines"===s.coloring&&delete b.fillcolor),delete b.showscale,delete b.autocontour,delete b.autocolorscale,delete b.colorscale,delete b.ncontours,delete b.colorbar,b.line&&(delete b.line.autocolorscale,delete b.line.colorscale,delete b.line.mincolor,delete b.line.maxcolor)}else d.coerce(a,b,i,"showlegend",!1),o=d.coerce2(a,b,f,"contours.start"),p=d.coerce2(a,b,f,"contours.end"),n=m("contours.size"),m("contours.coloring"),q=!1===o||!1===p,r=q?b.autocontour=!0:m("autocontour",!1),!r&&n||m("ncontours"),g(a,b,m,l,{hasHover:!1}),delete b.value,delete b.operation}else b._defaultColor=c}},{"../../components/color":618,"../../lib":743,"../../plots/attributes":787,"../contour/style_defaults":963,"../heatmap/xyz_defaults":993,"../scatter/fillcolor_defaults":1075,"./attributes":964,"./constraint_value_defaults":969}],972:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c){for(var e=a.size,f=[],g=c.trace.carpetTrace,h=a.start;h<a.end+e/10;h+=e)if(f.push({level:h,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:g.aaxis,yaxis:g.baxis,x:c.a,y:c.b,z:c.z,smoothing:c.trace.line.smoothing}),f.length>1e3){d.warn("Too many contours, clipping at 1000",a);break}return f}},{"../../lib":743}],973:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../contour/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("../contour/style"),d.moduleType="trace",d.name="contourcarpet",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","carpet","contour","symbols","showLegend","hasLines","carpetDependent"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"../contour/colorbar":951,"../contour/style":962,"./attributes":964,"./calc":965,"./defaults":971,"./plot":976}],974:[function(a,b,c){"use strict";var d=a("../../components/drawing"),e=a("../carpet/axis_aligned_line"),f=a("../../lib");b.exports=function(a,b,c,g,h,i,j,k){function l(a){return Math.abs(a[1]-c[0][1])<B}function m(a){return Math.abs(a[1]-c[2][1])<B}function n(a){return Math.abs(a[0]-c[0][0])<A}function o(a){return Math.abs(a[0]-c[2][0])<A}function p(a,b){var c,d,f,g,p="";for(l(a)&&!o(a)||m(a)&&!n(a)?(g=h.aaxis,f=e(h,i,[a[0],b[0]],.5*(a[1]+b[1]))):(g=h.baxis,f=e(h,i,.5*(a[0]+b[0]),[a[1],b[1]])),c=1;c<f.length;c++)for(p+=g.smoothing?"C":"L",d=0;d<f[c].length;d++){var q=f[c][d];p+=[j.c2p(q[0]),k.c2p(q[1])]+" "}return p}var q,r,s,t,u,v,w,x="",y=b.edgepaths.map(function(a,b){return b}),z=!0,A=1e-4*Math.abs(c[0][0]-c[2][0]),B=1e-4*Math.abs(c[0][1]-c[2][1]);for(q=0,r=null;y.length;){var C=b.edgepaths[q][0];for(r&&(x+=p(r,C)),w=d.smoothopen(b.edgepaths[q].map(g),b.smoothing),x+=z?w:w.replace(/^M/,"L"),y.splice(y.indexOf(q),1),r=b.edgepaths[q][b.edgepaths[q].length-1],u=-1,t=0;t<4;t++){if(!r){f.log("Missing end?",q,b);break}for(l(r)&&!o(r)?s=c[1]:n(r)?s=c[0]:m(r)?s=c[3]:o(r)&&(s=c[2]),v=0;v<b.edgepaths.length;v++){var D=b.edgepaths[v][0];Math.abs(r[0]-s[0])<A?Math.abs(r[0]-D[0])<A&&(D[1]-r[1])*(s[1]-D[1])>=0&&(s=D,u=v):Math.abs(r[1]-s[1])<B?Math.abs(r[1]-D[1])<B&&(D[0]-r[0])*(s[0]-D[0])>=0&&(s=D,u=v):f.log("endpt to newendpt is not vert. or horz.",r,s,D)}if(u>=0)break;x+=p(r,s),r=s}if(u===b.edgepaths.length){f.log("unclosed perimeter path");break}q=u,z=-1===y.indexOf(q),z&&(q=y[0],x+=p(r,s)+"Z",r=null)}for(q=0;q<b.paths.length;q++)x+=d.smoothclosed(b.paths[q].map(g),b.smoothing);return x}},{"../../components/drawing":643,"../../lib":743,"../carpet/axis_aligned_line":914}],975:[function(a,b,c){"use strict";b.exports=function(a,b){var c,d,e,f,g,h,i,j,k;for(c=0;c<a.length;c++){for(f=a[c],g=f.pedgepaths=[],h=f.ppaths=[],d=0;d<f.edgepaths.length;d++){for(k=f.edgepaths[d],i=[],e=0;e<k.length;e++)i[e]=b(k[e]);g.push(i)}for(d=0;d<f.paths.length;d++){for(k=f.paths[d],j=[],e=0;e<k.length;e++)j[e]=b(k[e]);h.push(j)}}}},{}],976:[function(a,b,c){"use strict";function d(a,b,c){function d(a){var b=g.ab2xy(a[0],a[1],!0);return[v.c2p(b[0]),A.c2p(b[1])]}var f=c[0].trace,g=f.carpetTrace=y(a,f),h=a.calcdata[g.index][0];if(g.visible&&"legendonly"!==g.visible){var i=c[0].a,l=c[0].b,p=f.contours,t=f.uid,v=b.xaxis,A=b.yaxis,B=a._fullLayout,C="contour"+t,D=w(p,b,c[0]),E="constraint"===f.contours.type;if(!0!==f.visible)return void B._infolayer.selectAll(".cb"+t).remove();var F=[[i[0],l[l.length-1]],[i[i.length-1],l[l.length-1]],[i[i.length-1],l[0]],[i[0],l[0]]];q(D);var G=1e-8*(i[i.length-1]-i[0]),H=1e-8*(l[l.length-1]-l[0]);r(D,G,H),"constraint"===f.contours.type&&(u(D,f.contours.operation),z(D,f.contours.operation,F,f)),x(D,d);var I,J,K,L,M=s.makeContourGroup(b,c,C),N=[];for(L=h.clipsegments.length-1;L>=0;L--)I=h.clipsegments[L],J=m([],I.x,v.c2p),K=m([],I.y,A.c2p),J.reverse(),K.reverse(),N.push(n(J,K,I.bicubic));var O="M"+N.join("L")+"Z";j(M,h.clipsegments,v,A,E,p.coloring),k(f,M,v,A,D,F,d,g,h,p.coloring,O),e(M,D,a,c[0],p,b,g),o.setClipUrl(M,g._clipPathId)}}function e(a,b,c,d,e,g,h){var i=a.selectAll("g.contourlines").data([0]);i.enter().append("g").classed("contourlines",!0);var j=!1!==e.showlines,k=e.showlabels,m=j&&k,n=s.createLines(i,j||k,b),q=s.createLineClip(i,m,c._fullLayout._defs,d.trace.uid),r=a.selectAll("g.contourlabels").data(k?[0]:[]);if(r.exit().remove(),r.enter().append("g").classed("contourlabels",!0),k){var u=g.xaxis,v=g.yaxis,w=u._length,x=v._length,y=[[[0,0],[w,0],[w,x],[0,x]]],z=[];p.clearLocationCache();var A=s.labelFormatter(e,d.t.cb,c._fullLayout),B=o.tester.append("text").attr("data-notex",1).call(o.font,e.labelfont),C={left:0,right:w,center:w/2,top:0,bottom:x,middle:x/2},D=Math.sqrt(w*w+x*x),E=t.LABELDISTANCE*D/Math.max(1,b.length/t.LABELINCREASE);n.each(function(a){var b=s.calcTextOpts(a.level,A,B,c);l.select(this).selectAll("path").each(function(c){var d=this,e=p.getVisibleSegment(d,C,b.height/2);if(e&&(f(d,c,a,e,h,b.height),!(e.len<(b.width+b.height)*t.LABELMIN)))for(var g=Math.min(Math.ceil(e.len/E),t.LABELMAX),i=0;i<g;i++){var j=s.findBestTextLocation(d,e,b,z,C);if(!j)break;s.addLabelData(j,b,z,y)}})}),B.remove(),s.drawLabels(r,z,c,q,m?y:null)}k&&!j&&n.remove()}function f(a,b,c,d,e,f){function j(a,b){var c,d=0;return(Math.abs(a[0]-m)<.1||Math.abs(a[0]-n)<.1)&&(c=h(e.dxydb_rough(a[0],a[1],.1)),d=Math.max(d,f*i(b,c)/2)),(Math.abs(a[1]-o)<.1||Math.abs(a[1]-p)<.1)&&(c=h(e.dxyda_rough(a[0],a[1],.1)),d=Math.max(d,f*i(b,c)/2)),d}for(var k,l=0;l<c.pedgepaths.length;l++)b===c.pedgepaths[l]&&(k=c.edgepaths[l]);if(k){var m=e.a[0],n=e.a[e.a.length-1],o=e.b[0],p=e.b[e.b.length-1],q=g(a,0,1),r=g(a,d.total,d.total-1),s=j(k[0],q),t=d.total-j(k[k.length-1],r);d.min<s&&(d.min=s),d.max>t&&(d.max=t),d.len=d.max-d.min}}function g(a,b,c){var d=a.getPointAtLength(b),e=a.getPointAtLength(c),f=e.x-d.x,g=e.y-d.y,h=Math.sqrt(f*f+g*g);return[f/h,g/h]}function h(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return[a[0]/b,a[1]/b]}function i(a,b){var c=Math.abs(a[0]*b[0]+a[1]*b[1]);return Math.sqrt(1-c*c)/c}function j(a,b,c,d,e,f){var g,h,i,j,k=a.selectAll("g.contourbg").data([0]);k.enter().append("g").classed("contourbg",!0);var l=k.selectAll("path").data("fill"!==f||e?[]:[0]);l.enter().append("path"),l.exit().remove();var o=[];for(j=0;j<b.length;j++)g=b[j],h=m([],g.x,c.c2p),i=m([],g.y,d.c2p),o.push(n(h,i,g.bicubic));l.attr("d","M"+o.join("L")+"Z").style("stroke","none")}function k(a,b,c,d,e,f,g,h,i,j,k){var m=b.selectAll("g.contourfill").data([0]);m.enter().append("g").classed("contourfill",!0);var n=m.selectAll("path").data("fill"===j?e:[]);n.enter().append("path"),n.exit().remove(),n.each(function(b){var e=v(a,b,f,g,h,i,c,d);b.prefixBoundary&&(e=k+e),e?l.select(this).attr("d",e).style("stroke","none"):l.select(this).remove()})}var l=a("d3"),m=a("../carpet/map_1d_array"),n=a("../carpet/makepath"),o=a("../../components/drawing"),p=a("../../lib"),q=a("../contour/make_crossings"),r=a("../contour/find_all_paths"),s=a("../contour/plot"),t=a("../contour/constants"),u=a("./convert_to_constraints"),v=a("./join_all_paths"),w=a("./empty_pathinfo"),x=a("./map_pathinfo"),y=a("../carpet/lookup_carpetid"),z=a("./close_boundaries");b.exports=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])}},{"../../components/drawing":643,"../../lib":743,"../carpet/lookup_carpetid":931,"../carpet/makepath":932,"../carpet/map_1d_array":933,"../contour/constants":952,"../contour/find_all_paths":956,"../contour/make_crossings":960,"../contour/plot":961,"./close_boundaries":966,"./convert_to_constraints":970,"./empty_pathinfo":972,"./join_all_paths":974,"./map_pathinfo":975,d3:128}],977:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../lib/extend").extendFlat;b.exports=g({},{z:{valType:"data_array",editType:"calc"},x:g({},d.x,{impliedEdits:{xtype:"array"}}),x0:g({},d.x0,{impliedEdits:{xtype:"scaled"}}),dx:g({},d.dx,{impliedEdits:{xtype:"scaled"}}),y:g({},d.y,{impliedEdits:{ytype:"array"}}),y0:g({},d.y0,{impliedEdits:{ytype:"scaled"}}),dy:g({},d.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"}},e,{autocolorscale:g({},e.autocolorscale,{dflt:!1})},{colorbar:f})},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../lib/extend":732,"../scatter/attributes":1066}],978:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=a("../histogram2d/calc"),h=a("../../components/colorscale/calc"),i=a("./has_columns"),j=a("./convert_column_xyz"),k=a("./max_row_length"),l=a("./clean_2d_array"),m=a("./interp2d"),n=a("./find_empties"),o=a("./make_bound_array");b.exports=function(a,b){function c(a){D=b._input.zsmooth=b.zsmooth=!1,e.warn('cannot use zsmooth: "fast": '+a)}var p,q,r,s,t,u,v,w,x,y=f.getFromId(a,b.xaxis||"x"),z=f.getFromId(a,b.yaxis||"y"),A=d.traceIs(b,"contour"),B=d.traceIs(b,"histogram"),C=d.traceIs(b,"gl2d"),D=A?"best":b.zsmooth;if(y._minDtick=0,z._minDtick=0,B?(x=g(a,b),p=x.x,q=x.x0,r=x.dx,s=x.y,t=x.y0,u=x.dy,v=x.z):(i(b)?(j(b,y,z,"x","y",["z"]),p=b.x,s=b.y):(p=b.x?y.makeCalcdata(b,"x"):[],s=b.y?z.makeCalcdata(b,"y"):[]),q=b.x0||0,r=b.dx||1,t=b.y0||0,u=b.dy||1,v=l(b.z,b.transpose),(A||b.connectgaps)&&(b._emptypoints=n(v),b._interpz=m(v,b._emptypoints,b._interpz))),"fast"===D)if("log"===y.type||"log"===z.type)c("log axis found");else if(!B){if(p.length){var E=(p[p.length-1]-p[0])/(p.length-1),F=Math.abs(E/100);for(w=0;w<p.length-1;w++)if(Math.abs(p[w+1]-p[w]-E)>F){c("x scale is not linear");break}}if(s.length&&"fast"===D){var G=(s[s.length-1]-s[0])/(s.length-1),H=Math.abs(G/100);for(w=0;w<s.length-1;w++)if(Math.abs(s[w+1]-s[w]-G)>H){c("y scale is not linear");break}}}var I=k(v),J="scaled"===b.xtype?"":p,K=o(b,J,q,r,I,y),L="scaled"===b.ytype?"":s,M=o(b,L,t,u,v.length,z);C||(f.expand(y,K),f.expand(z,M));var N={x:K,y:M,z:v,text:b.text};if(B&&(N.xRanges=x.xRanges,N.yRanges=x.yRanges,N.pts=x.pts),h(b,v,"","z"),A&&b.contours&&"heatmap"===b.contours.coloring){var O={type:"contour"===b.type?"heatmap":"histogram2d",xcalendar:b.xcalendar,ycalendar:b.ycalendar};N.xfill=o(O,J,q,r,I,y),N.yfill=o(O,L,t,u,v.length,z)}return[N]}},{"../../components/colorscale/calc":625,"../../lib":743,"../../plots/cartesian/axes":789,"../../registry":873,"../histogram2d/calc":1010,"./clean_2d_array":979,"./convert_column_xyz":981,"./find_empties":983,"./has_columns":984,"./interp2d":987,"./make_bound_array":988,"./max_row_length":989}],979:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a,b){var c,e,f,g,h,i;if(b){for(c=0,h=0;h<a.length;h++)c=Math.max(c,a[h].length);if(0===c)return!1;f=function(a){return a.length},g=function(a,b,c){return a[c][b]}}else c=a.length,f=function(a,b){return a[b].length},g=function(a,b,c){return a[b][c]};var j=new Array(c);for(h=0;h<c;h++)for(e=f(a,h),j[h]=new Array(e),i=0;i<e;i++)j[h][i]=function(a){if(d(a))return+a}(g(a,h,i));return j}},{"fast-isnumeric":140}],980:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.zmin,k=c.zmax;if(d(j)||(j=e.aggNums(Math.min,null,c.z)),d(k)||(k=e.aggNums(Math.max,null,c.z)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var l=b[0].t.cb=h(a,i),m=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});l.fillcolor(m).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":622,"../../components/colorscale":633,"../../lib":743,"../../plots/plots":852,"fast-isnumeric":140}],981:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../constants/numerical").BADNUM;b.exports=function(a,b,c,f,g,h){f=f||"x",g=g||"y",h=h||["z"];var i,j,k,l,m,n=a[f].slice(),o=a[g].slice(),p=a.text,q=Math.min(n.length,o.length),r=void 0!==p&&!Array.isArray(p[0]),s=a[f+"calendar"],t=a[g+"calendar"];for(i=0;i<h.length;i++)(k=a[h[i]])&&(q=Math.min(q,k.length));for(q<n.length&&(n=n.slice(0,q)),q<o.length&&(o=o.slice(0,q)),i=0;i<q;i++)n[i]=b.d2c(n[i],0,s),o[i]=c.d2c(o[i],0,t);var u=d.distinctVals(n),v=u.vals,w=d.distinctVals(o),x=w.vals,y=[];for(i=0;i<h.length;i++)y[i]=d.init2dArray(x.length,v.length);var z,A,B;for(r&&(B=d.init2dArray(x.length,v.length)),i=0;i<q;i++)if(n[i]!==e&&o[i]!==e){for(z=d.findBin(n[i]+u.minDiff/2,v),A=d.findBin(o[i]+w.minDiff/2,x),j=0;j<h.length;j++)m=h[j],k=a[m],l=y[j],l[A][z]=k[i];r&&(B[A][z]=p[i])}for(a[f]=v,a[g]=x,j=0;j<h.length;j++)a[h[j]]=y[j];r&&(a.text=B)}},{"../../constants/numerical":721,"../../lib":743}],982:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./has_columns"),f=a("./xyz_defaults"),g=a("./style_defaults"),h=a("../../components/colorscale/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}if(!f(a,b,k,j))return void(b.visible=!1);k("text"),g(a,b,k,j),k("connectgaps",e(b)&&!1!==b.zsmooth),h(a,b,j,k,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":628,"../../lib":743,"./attributes":977,"./has_columns":984,"./style_defaults":992,"./xyz_defaults":993}],983:[function(a,b,c){"use strict";var d=a("./max_row_length");b.exports=function(a){var b,c,e,f,g,h,i,j,k=[],l={},m=[],n=a[0],o=[],p=[0,0,0],q=d(a);for(c=0;c<a.length;c++)for(b=o,o=n,n=a[c+1]||[],e=0;e<q;e++)void 0===o[e]&&(h=(void 0!==o[e-1]?1:0)+(void 0!==o[e+1]?1:0)+(void 0!==b[e]?1:0)+(void 0!==n[e]?1:0),h?(0===c&&h++,0===e&&h++,c===a.length-1&&h++,e===o.length-1&&h++,h<4&&(l[[c,e]]=[c,e,h]),k.push([c,e,h])):m.push([c,e]));for(;m.length;){for(i={},j=!1,g=m.length-1;g>=0;g--)f=m[g],c=f[0],e=f[1],(h=((l[[c-1,e]]||p)[2]+(l[[c+1,e]]||p)[2]+(l[[c,e-1]]||p)[2]+(l[[c,e+1]]||p)[2])/20)&&(i[f]=[c,e,h],m.splice(g,1),j=!0);if(!j)throw"findEmpties iterated with no new neighbors";for(f in i)l[f]=i[f],k.push(i[f])}return k.sort(function(a,b){return b[2]-a[2]})}},{"./max_row_length":989}],984:[function(a,b,c){"use strict";b.exports=function(a){return!Array.isArray(a.z[0])}},{}],985:[function(a,b,c){"use strict"
;var d=a("../../components/fx"),e=a("../../lib"),f=a("../../plots/cartesian/axes"),g=d.constants.MAXDIST;b.exports=function(a,b,c,h,i,j){if(!(a.distance<g)){var k,l,m,n,o=a.cd[0],p=o.trace,q=a.xa,r=a.ya,s=o.x,t=o.y,u=o.z,v=o.zmask,w=[p.zmin,p.zmax],x=p.zhoverformat,y=s,z=t;if(!1!==a.index){try{m=Math.round(a.index[1]),n=Math.round(a.index[0])}catch(b){return void e.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index)}if(m<0||m>=u[0].length||n<0||n>u.length)return}else{if(d.inbox(b-s[0],b-s[s.length-1])>g||d.inbox(c-t[0],c-t[t.length-1])>g)return;if(j){var A;for(y=[2*s[0]-s[1]],A=1;A<s.length;A++)y.push((s[A]+s[A-1])/2);for(y.push([2*s[s.length-1]-s[s.length-2]]),z=[2*t[0]-t[1]],A=1;A<t.length;A++)z.push((t[A]+t[A-1])/2);z.push([2*t[t.length-1]-t[t.length-2]])}m=Math.max(0,Math.min(y.length-2,e.findBin(b,y))),n=Math.max(0,Math.min(z.length-2,e.findBin(c,z)))}var B=q.c2p(s[m]),C=q.c2p(s[m+1]),D=r.c2p(t[n]),E=r.c2p(t[n+1]);j?(C=B,k=s[m],E=D,l=t[n]):(k=(s[m]+s[m+1])/2,l=(t[n]+t[n+1])/2,p.zsmooth&&(B=C=(B+C)/2,D=E=(D+E)/2));var F=u[n][m];v&&!v[n][m]&&(F=void 0);var G;Array.isArray(o.text)&&Array.isArray(o.text[n])&&(G=o.text[n][m]);var H,I={type:"linear",range:w,hoverformat:x,_separators:q._separators,_numFormat:q._numFormat};return H=f.tickText(I,F,"hover").text,[e.extendFlat(a,{index:[n,m],distance:g+10,x0:B,x1:C,y0:D,y1:E,xLabelVal:k,yLabelVal:l,zLabelVal:F,zLabel:H,text:G})]}}},{"../../components/fx":660,"../../lib":743,"../../plots/cartesian/axes":789}],986:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.moduleType="trace",d.name="heatmap",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"./attributes":977,"./calc":978,"./colorbar":980,"./defaults":982,"./hover":985,"./plot":990,"./style":991}],987:[function(a,b,c){"use strict";function d(a){return.5-.25*Math.min(1,.5*a)}function e(a,b,c){var d,e,f,h,i,j,k,l,m,n,o,p,q,r=0;for(h=0;h<b.length;h++){for(d=b[h],e=d[0],f=d[1],o=a[e][f],n=0,m=0,i=0;i<4;i++)j=g[i],(k=a[e+j[0]])&&void 0!==(l=k[f+j[1]])&&(0===n?p=q=l:(p=Math.min(p,l),q=Math.max(q,l)),m++,n+=l);if(0===m)throw"iterateInterp2d order is wrong: no defined neighbors";a[e][f]=n/m,void 0===o?m<4&&(r=1):(a[e][f]=(1+c)*a[e][f]-c*o,q>p&&(r=Math.max(r,Math.abs(a[e][f]-o)/(q-p))))}return r}var f=a("../../lib"),g=[[-1,0],[1,0],[0,-1],[0,1]];b.exports=function(a,b,c){var g,h,i=1;if(Array.isArray(c))for(g=0;g<b.length;g++)h=b[g],a[h[0]][h[1]]=c[h[0]][h[1]];else e(a,b);for(g=0;g<b.length&&!(b[g][2]<4);g++);for(b=b.slice(g),g=0;g<100&&i>.01;g++)i=e(a,b,d(i));return i>.01&&f.log("interp2d didn't converge quickly",i),a}},{"../../lib":743}],988:[function(a,b,c){"use strict";var d=a("../../registry");b.exports=function(a,b,c,e,f,g){var h,i,j,k=[],l=d.traceIs(a,"contour"),m=d.traceIs(a,"histogram"),n=d.traceIs(a,"gl2d");if(Array.isArray(b)&&b.length>1&&!m&&"category"!==g.type){var o=b.length;if(!(o<=f))return l?b.slice(0,f):b.slice(0,f+1);if(l||n)k=b.slice(0,f);else if(1===f)k=[b[0]-.5,b[0]+.5];else{for(k=[1.5*b[0]-.5*b[1]],j=1;j<o;j++)k.push(.5*(b[j-1]+b[j]));k.push(1.5*b[o-1]-.5*b[o-2])}if(o<f){var p=k[k.length-1],q=p-k[k.length-2];for(j=o;j<f;j++)p+=q,k.push(p)}}else{i=e||1;var r=a[g._id.charAt(0)+"calendar"];for(h=m||"category"===g.type?g.r2c(c,0,r)||0:Array.isArray(b)&&1===b.length?b[0]:void 0===c?0:g.d2c(c,0,r),j=l||n?0:-.5;j<f;j++)k.push(h+i*j)}return k}},{"../../registry":873}],989:[function(a,b,c){"use strict";b.exports=function(a){for(var b=0,c=0;c<a.length;c++)b=Math.max(b,a[c].length);return b}},{}],990:[function(a,b,c){"use strict";function d(a,b,c){function d(a,b){var c=b.length-2,d=g.constrain(g.findBin(a,b),0,c),e=b[d],f=b[d+1],h=g.constrain(d+(a-e)/(f-e)-.5,0,c),i=Math.round(h),j=Math.abs(h-i);return h&&h!==c&&j?{bin0:i,frac:j,bin1:Math.round(i+j/(h-i))}:{bin0:i,bin1:i,frac:0}}function k(a,b){if(void 0!==a){var c=S(a);return c[0]=Math.round(c[0]),c[1]=Math.round(c[1]),c[2]=Math.round(c[2]),ba+=b,ca+=c[0]*b,da+=c[1]*b,ea+=c[2]*b,c}return[0,0,0,0]}function l(a,b,c){a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=Math.round(255*c[3])}var m=c[0].trace,n=m.uid,o=b.xaxis,p=b.yaxis,q=a._fullLayout,r="hm"+n;if(q._paper.selectAll(".contour"+n).remove(),q._infolayer.selectAll("g.rangeslider-container").selectAll(".contour"+n).remove(),!0!==m.visible)return q._paper.selectAll("."+r).remove(),void q._infolayer.selectAll(".cb"+n).remove();var s,t,u,v,w,x,y=c[0].z,z=c[0].x,A=c[0].y,B=f.traceIs(m,"contour"),C=B?"best":m.zsmooth,D=y.length,E=j(y),F=!1,G=!1;for(x=0;void 0===s&&x<z.length-1;)s=o.c2p(z[x]),x++;for(x=z.length-1;void 0===t&&x>0;)t=o.c2p(z[x]),x--;for(t<s&&(u=t,t=s,s=u,F=!0),x=0;void 0===v&&x<A.length-1;)v=p.c2p(A[x]),x++;for(x=A.length-1;void 0===w&&x>0;)w=p.c2p(A[x]),x--;if(w<v&&(u=v,v=w,w=u,G=!0),B&&(z=c[0].xfill,A=c[0].yfill),"fast"!==C){var H="best"===C?0:.5;s=Math.max(-H*o._length,s),t=Math.min((1+H)*o._length,t),v=Math.max(-H*p._length,v),w=Math.min((1+H)*p._length,w)}var I=Math.round(t-s),J=Math.round(w-v),K=I<=0||J<=0,L=b.plot.select(".imagelayer").selectAll("g.hm."+r).data(K?[]:[0]);if(L.enter().append("g").classed("hm",!0).classed(r,!0),L.exit().remove(),!K){var M,N;"fast"===C?(M=E,N=D):(M=I,N=J);var O=document.createElement("canvas");O.width=M,O.height=N;var P,Q,R=O.getContext("2d"),S=h.makeColorScaleFunc(h.extractScale(m.colorscale,m.zmin,m.zmax),{noNumericCheck:!0,returnArray:!0});"fast"===C?(P=F?function(a){return E-1-a}:g.identity,Q=G?function(a){return D-1-a}:g.identity):(P=function(a){return g.constrain(Math.round(o.c2p(z[a])-s),0,I)},Q=function(a){return g.constrain(Math.round(p.c2p(A[a])-v),0,J)});var T,U,V,W,X,Y,Z=Q(0),$=[Z,Z],_=F?0:1,aa=G?0:1,ba=0,ca=0,da=0,ea=0;if(C){var fa,ga=0;try{fa=new Uint8Array(I*J*4)}catch(a){fa=new Array(I*J*4)}if("best"===C){var ha,ia,ja,ka=new Array(z.length),la=new Array(A.length),ma=new Array(I);for(x=0;x<z.length;x++)ka[x]=Math.round(o.c2p(z[x])-s);for(x=0;x<A.length;x++)la[x]=Math.round(p.c2p(A[x])-v);for(x=0;x<I;x++)ma[x]=d(x,ka);for(U=0;U<J;U++)for(ha=d(U,la),ia=y[ha.bin0],ja=y[ha.bin1],x=0;x<I;x++,ga+=4)Y=function(a,b,c,d){var e=a[c.bin0];if(void 0===e)return k(void 0,1);var f,g=a[c.bin1],h=b[c.bin0],i=b[c.bin1],j=g-e||0,l=h-e||0;return f=void 0===g?void 0===i?0:void 0===h?2*(i-e):2*(2*i-h-e)/3:void 0===i?void 0===h?0:2*(2*e-g-h)/3:void 0===h?2*(2*i-g-e)/3:i+e-g-h,k(e+c.frac*j+d.frac*(l+c.frac*f))}(ia,ja,ma[x],ha),l(fa,ga,Y)}else for(U=0;U<D;U++)for(X=y[U],$=Q(U),x=0;x<I;x++)Y=k(X[x],1),ga=4*($*I+P(x)),l(fa,ga,Y);var na=R.createImageData(I,J);try{na.data.set(fa)}catch(a){var oa=na.data,pa=oa.length;for(U=0;U<pa;U++)oa[U]=fa[U]}R.putImageData(na,0,0)}else{var qa=m.xgap,ra=m.ygap,sa=Math.floor(qa/2),ta=Math.floor(ra/2);for(U=0;U<D;U++)if(X=y[U],$.reverse(),$[aa]=Q(U+1),$[0]!==$[1]&&void 0!==$[0]&&void 0!==$[1])for(V=P(0),T=[V,V],x=0;x<E;x++)T.reverse(),T[_]=P(x+1),T[0]!==T[1]&&void 0!==T[0]&&void 0!==T[1]&&(W=X[x],Y=k(W,(T[1]-T[0])*($[1]-$[0])),R.fillStyle="rgba("+Y.join(",")+")",R.fillRect(T[0]+sa,$[0]+ta,T[1]-T[0]-qa,$[1]-$[0]-ra))}ca=Math.round(ca/ba),da=Math.round(da/ba),ea=Math.round(ea/ba);var ua=e("rgb("+ca+","+da+","+ea+")");a._hmpixcount=(a._hmpixcount||0)+ba,a._hmlumcount=(a._hmlumcount||0)+ba*ua.getLuminance();var va=L.selectAll("image").data(c);va.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),va.attr({height:J,width:I,x:s,y:v,"xlink:href":O.toDataURL("image/png")}),va.exit().remove()}}var e=a("tinycolor2"),f=a("../../registry"),g=a("../../lib"),h=a("../../components/colorscale"),i=a("../../constants/xmlns_namespaces"),j=a("./max_row_length");b.exports=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])}},{"../../components/colorscale":633,"../../constants/xmlns_namespaces":723,"../../lib":743,"../../registry":873,"./max_row_length":989,tinycolor2:546}],991:[function(a,b,c){"use strict";var d=a("d3");b.exports=function(a){d.select(a).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},{d3:128}],992:[function(a,b,c){"use strict";b.exports=function(a,b,c){!1===c("zsmooth")&&(c("xgap"),c("ygap")),c("zhoverformat")}},{}],993:[function(a,b,c){"use strict";function d(a,b){var c=b(a);return"scaled"===(c?b(a+"type","array"):"scaled")&&(b(a+"0"),b("d"+a)),c}function e(a){for(var b,c=!0,d=!1,e=!1,g=0;g<a.length;g++){if(b=a[g],!Array.isArray(b)){c=!1;break}b.length>0&&(d=!0);for(var h=0;h<b.length;h++)if(f(b[h])){e=!0;break}}return c&&d&&e}var f=a("fast-isnumeric"),g=a("../../registry"),h=a("./has_columns");b.exports=function(a,b,c,f,i,j){var k=c("z");i=i||"x",j=j||"y";var l,m;if(void 0===k||!k.length)return 0;if(h(a)){if(l=c(i),m=c(j),!l||!m)return 0}else{if(l=d(i,c),m=d(j,c),!e(k))return 0;c("transpose")}return g.getComponentMethod("calendars","handleTraceDefaults")(a,b,[i,j],f),b.z.length}},{"../../registry":873,"./has_columns":984,"fast-isnumeric":140}],994:[function(a,b,c){"use strict";for(var d=a("../heatmap/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../lib/extend").extendFlat,h=a("../../plot_api/edit_types").overrideAll,i=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],j={},k=0;k<i.length;k++){var l=i[k];j[l]=d[l]}g(j,e,{autocolorscale:g({},e.autocolorscale,{dflt:!1})},{colorbar:f}),b.exports=h(j,"calc","nested")},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../lib/extend":732,"../../plot_api/edit_types":773,"../heatmap/attributes":977}],995:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=g(a.glplot,this.options),this.heatmap._trace=this}function e(a){for(var b=a.colorscale,c=a.zmin,d=a.zmax,e=b.length,f=new Array(e),g=new Array(4*e),h=0;h<e;h++){var j=b[h],k=i(j[1]);f[h]=c+j[0]*(d-c);for(var l=0;l<4;l++)g[4*h+l]=k[l]}return{colorLevels:f,colorValues:g}}function f(a,b,c){var e=new d(a,b.uid);return e.update(b,c),e}var g=a("gl-heatmap2d"),h=a("../../plots/cartesian/axes"),i=a("../../lib/str2rgbarray"),j=d.prototype;j.handlePick=function(a){var b=this.options,c=b.shape,d=a.pointId,e=d%c[0],f=Math.floor(d/c[0]),g=d;return{trace:this,dataCoord:a.dataCoord,traceCoord:[b.x[e],b.y[f],b.z[g]],textLabel:this.textLabels[d],name:this.name,pointIndex:[f,e],hoverinfo:this.hoverinfo}},j.update=function(a,b){var c=b[0];this.index=a.index,this.name=a.name,this.hoverinfo=a.hoverinfo;var d=c.z;this.options.z=[].concat.apply([],d);var f=d[0].length,g=d.length;this.options.shape=[f,g],this.options.x=c.x,this.options.y=c.y;var i=e(a);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],a.text),this.heatmap.update(this.options),h.expand(this.scene.xaxis,c.x),h.expand(this.scene.yaxis,c.y)},j.dispose=function(){this.heatmap.dispose()},b.exports=f},{"../../lib/str2rgbarray":765,"../../plots/cartesian/axes":789,"gl-heatmap2d":173}],996:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("../heatmap/defaults"),d.colorbar=a("../heatmap/colorbar"),d.calc=a("../heatmap/calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="heatmapgl",d.basePlotModule=a("../../plots/gl2d"),d.categories=["gl","gl2d","2dMap"],d.meta={},b.exports=d},{"../../plots/gl2d":829,"../heatmap/calc":978,"../heatmap/colorbar":980,"../heatmap/defaults":982,"./attributes":994,"./convert":995}],997:[function(a,b,c){"use strict";function d(a){var b={};b["autobin"+a]=!1;var c={};return c["^autobin"+a]=!1,{start:{valType:"any",dflt:null,editType:"calc",impliedEdits:c},end:{valType:"any",dflt:null,editType:"calc",impliedEdits:c},size:{valType:"any",dflt:null,editType:"calc",impliedEdits:c},editType:"calc",impliedEdits:b}}var e=a("../bar/attributes");b.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:e.text,orientation:e.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},autobinx:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"xbins.start":void 0,"xbins.end":void 0,"xbins.size":void 0}},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:d("x"),autobiny:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"ybins.start":void 0,"ybins.end":void 0,"ybins.size":void 0}},nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:d("y"),marker:e.marker,selected:e.selected,unselected:e.unselected,error_y:e.error_y,error_x:e.error_x,_deprecated:{bardir:e._deprecated.bardir}}},{"../bar/attributes":883}],998:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c=a.length,d=0,e=0;e<c;e++)b[e]?(a[e]/=b[e],d+=a[e]):a[e]=null;return d}},{}],999:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){return c("histnorm"),d.forEach(function(a){c(a+"bins.start"),c(a+"bins.end"),c(a+"bins.size"),c("autobin"+a),c("nbins"+a)}),b}},{}],1e3:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports={count:function(a,b,c){return c[a]++,1},sum:function(a,b,c,e){var f=e[b];return d(f)?(f=Number(f),c[a]+=f,f):0},avg:function(a,b,c,e,f){var g=e[b];return d(g)&&(g=Number(g),c[a]+=g,f[a]++),0},min:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]>f){var g=f-c[a];return c[a]=f,g}}return 0},max:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]<f){var g=f-c[a];return c[a]=f,g}}return 0}}},{"fast-isnumeric":140}],1001:[function(a,b,c){"use strict";function d(a,b,c,d){if(a*b<=0)return 1/0;for(var g=Math.abs(b-a),h="date"===c.type,i=e(g,h),j=0;j<10;j++){var k=e(80*i,h);if(i===k)break;if(!f(k,a,b,h,c,d))break;i=k}return i}function e(a,b){return b&&a>n?a>k?a>1.1*i?i:a>1.1*j?j:k:a>l?l:a>m?m:n:Math.pow(10,Math.floor(Math.log(a)/Math.LN10))}function f(a,b,c,d,e,f){if(d&&a>k){var h=g(b,e,f),j=g(c,e,f),l=a===i?0:1;return h[l]!==j[l]}return Math.floor(c/a)-Math.floor(b/a)>.1}function g(a,b,c){var d=b.c2d(a,i,c).split("-");return""===d[0]&&(d.unshift(),d[0]="-"+d[0]),d}var h=a("../../constants/numerical"),i=h.ONEAVGYEAR,j=h.ONEAVGMONTH,k=h.ONEDAY,l=h.ONEHOUR,m=h.ONEMIN,n=h.ONESEC,o=a("../../plots/cartesian/axes").tickIncrement;b.exports=function(a,b,c,e,f){var g,h,j=-1.1*b,l=-.1*b,m=a-l,n=c[0],p=c[1],q=Math.min(d(n+l,n+m,e,f),d(p+l,p+m,e,f)),r=Math.min(d(n+j,n+l,e,f),d(p+j,p+l,e,f));if(q>r&&r<Math.abs(p-n)/4e3?(g=q,h=!1):(g=Math.min(q,r),h=!0),"date"===e.type&&g>k){var s=g===i?1:6,t=g===i?"M12":"M1";return function(b,c){var d=e.c2d(b,i,f),g=d.indexOf("-",s);g>0&&(d=d.substr(0,g));var j=e.d2c(d,0,f);if(j<b){var k=o(j,t,!1,f);(j+k)/2<b+a&&(j=k)}return c&&h?o(j,t,!0,f):j}}return function(b,c){var d=g*Math.round(b/g);return d+g/10<b&&d+.9*g<b+a&&(d+=g),c&&h&&(d-=g),d}}},{"../../constants/numerical":721,"../../plots/cartesian/axes":789}],1002:[function(a,b,c){"use strict";function d(a,b,c,d,h){var i,k,m,n,o,p=d+"bins",q="overlay"===a._fullLayout.barmode;if(b._autoBinFinished)delete b._autoBinFinished;else{var r=q?[b]:f(a,b),s=[],t=1/0,u=1/0,v=-1/0,w="autobin"+d;for(i=0;i<r.length;i++){k=r[i],o=k._pos0=c.makeCalcdata(k,d);var x=k[p];if(k[w]||!x||null===x.start||null===x.end){m=k[d+"calendar"];var y=k.cumulative;if(x=l.autoBin(o,c,k["nbins"+d],!1,m),q&&1===x._count&&"category"!==c.type){if(h)return[x,o,!0];x=e(a,b,c,d,p)}y.enabled&&"include"!==y.currentbin&&("decreasing"===y.direction?u=Math.min(u,c.r2c(x.start,0,m)-x.size):v=Math.max(v,c.r2c(x.end,0,m)+x.size)),s.push(k)}else n||(n={size:x.size,start:c.r2c(x.start,0,m),end:c.r2c(x.end,0,m)});t=g(t,x.size),u=Math.min(u,c.r2c(x.start,0,m)),v=Math.max(v,c.r2c(x.end,0,m)),i&&(k._autoBinFinished=1)}if(n&&j(n.size)&&j(t)){t=t>n.size/1.9?n.size:n.size/Math.ceil(n.size/t);var z=n.start+(n.size-t)/2;u=z-t*Math.ceil((z-u)/t)}for(i=0;i<s.length;i++)k=s[i],m=k[d+"calendar"],k._input[p]=k[p]={start:c.c2r(u,0,m),end:c.c2r(v,0,m),size:t},k._input[w]=k[w]}return o=b._pos0,delete b._pos0,[b[p],o]}function e(a,b,c,e,g){var h,i,j=f(a,b),l=!1,m=1/0,n=[b];for(h=0;h<j.length;h++)if((i=j[h])===b)l=!0;else if(l){var o=d(a,i,c,e,!0),p=o[0],q=o[2];i._autoBinFinished=1,i._pos0=o[1],q?n.push(i):m=Math.min(m,p.size)}else m=Math.min(m,i[g].size);var r=new Array(n.length);for(h=0;h<n.length;h++)for(var s=n[h]._pos0,t=0;t<s.length;t++)if(void 0!==s[t]){r[h]=s[t];break}for(isFinite(m)||(m=k.distinctVals(r).minDiff),h=0;h<n.length;h++){i=n[h];var u=i[e+"calendar"];i._input[g]=i[g]={start:c.c2r(r[h]-m/2,0,u),end:c.c2r(r[h]+m/2,0,u),size:m}}return b[g]}function f(a,b){for(var c=b.xaxis,d=b.yaxis,e=b.orientation,f=[],g=a._fullData,h=0;h<g.length;h++){var i=g[h];"histogram"===i.type&&i.orientation===e&&i.xaxis===c&&i.yaxis===d&&f.push(i)}return f}function g(a,b){if(a===1/0)return b;var c=h(a);return h(b)<c?b:a}function h(a){return j(a)?a:"string"==typeof a&&"M"===a.charAt(0)?r*+a.substr(1):1/0}function i(a,b,c){function d(b){h=a[b],a[b]/=2}function e(b){g=a[b],a[b]=h+g/2,h+=g}var f,g,h;if("half"===c)if("increasing"===b)for(d(0),f=1;f<a.length;f++)e(f);else for(d(a.length-1),f=a.length-2;f>=0;f--)e(f);else if("increasing"===b){for(f=1;f<a.length;f++)a[f]+=a[f-1];"exclude"===c&&(a.unshift(0),a.pop())}else{for(f=a.length-2;f>=0;f--)a[f]+=a[f+1];"exclude"===c&&(a.push(0),a.shift())}}var j=a("fast-isnumeric"),k=a("../../lib"),l=a("../../plots/cartesian/axes"),m=a("../bar/arrays_to_calcdata"),n=a("./bin_functions"),o=a("./norm_functions"),p=a("./average"),q=a("./clean_bins"),r=a("../../constants/numerical").ONEAVGMONTH,s=a("./bin_label_vals");b.exports=function(a,b){if(!0===b.visible){var c,e=[],f=[],g=l.getFromId(a,"h"===b.orientation?b.yaxis||"y":b.xaxis||"x"),h="h"===b.orientation?"y":"x",r={x:"y",y:"x"}[h],t=b[h+"calendar"],u=b.cumulative;q(b,g,h);var v,w,x,y=d(a,b,g,h),z=y[0],A=y[1],B="string"==typeof z.size,C=[],D=B?C:z,E=[],F=[],G=[],H=0,I=b.histnorm,J=b.histfunc,K=-1!==I.indexOf("density");u.enabled&&K&&(I=I.replace(/ ?density$/,""),K=!1);var L,M="max"===J||"min"===J,N=M?null:0,O=n.count,P=o[I],Q=!1,R=function(a){return g.r2c(a,0,t)};for(Array.isArray(b[r])&&"count"!==J&&(L=b[r],Q="avg"===J,O=n[J]),c=R(z.start),w=R(z.end)+(c-l.tickIncrement(c,z.size,!1,t))/1e6;c<w&&e.length<1e6&&(v=l.tickIncrement(c,z.size,!1,t),e.push((c+v)/2),f.push(N),G.push([]),C.push(c),K&&E.push(1/(v-c)),Q&&F.push(0),!(v<=c));)c=v;C.push(c),B||"date"!==g.type||(D={start:R(D.start),end:R(D.end),size:D.size});var S=f.length,T=!0,U=1/0,V=1/0,W={};for(c=0;c<A.length;c++){var X=A[c];x=k.findBin(X,D),x>=0&&x<S&&(H+=O(x,c,f,L,F),T&&G[x].length&&X!==A[G[x][0]]&&(T=!1),G[x].push(c),W[c]=x,U=Math.min(U,X-C[x]),V=Math.min(V,C[x+1]-X))}var Y;T||(Y=s(U,V,C,g,t)),Q&&(H=p(f,F)),P&&P(f,H,E),u.enabled&&i(f,u.direction,u.currentbin);var Z=Math.min(e.length,f.length),$=[],_=0,aa=Z-1;for(c=0;c<Z;c++)if(f[c]){_=c;break}for(c=Z-1;c>=_;c--)if(f[c]){aa=c;break}for(c=_;c<=aa;c++)if(j(e[c])&&j(f[c])){var ba={p:e[c],s:f[c],b:0};u.enabled||(ba.pts=G[c],T?ba.p0=ba.p1=G[c].length?A[G[c][0]]:e[c]:(ba.p0=Y(C[c]),ba.p1=Y(C[c+1],!0))),$.push(ba)}return 1===$.length&&($[0].width1=l.tickIncrement($[0].p,z.size,!1,t)-$[0].p),m($,b),Array.isArray(b.selectedpoints)&&k.tagSelected($,b,W),$}}},{"../../constants/numerical":721,"../../lib":743,"../../plots/cartesian/axes":789,"../bar/arrays_to_calcdata":882,"./average":998,"./bin_functions":1e3,"./bin_label_vals":1001,"./clean_bins":1003,"./norm_functions":1008,"fast-isnumeric":140}],1003:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib").cleanDate,f=a("../../constants/numerical"),g=f.ONEDAY,h=f.BADNUM;b.exports=function(a,b,c){var f=b.type,i=c+"bins",j=a[i];j||(j=a[i]={});var k="date"===f?function(a){return a||0===a?e(a,h,j.calendar):null}:function(a){return d(a)?Number(a):null};j.start=k(j.start),j.end=k(j.end);var l="date"===f?g:1,m=j.size;if(d(m))j.size=m>0?Number(m):l;else if("string"!=typeof m)j.size=l;else{var n=m.charAt(0),o=m.substr(1);o=d(o)?Number(o):0,(o<=0||"date"!==f||"M"!==n||o!==Math.round(o))&&(j.size=l)}var p="autobin"+c;"boolean"!=typeof a[p]&&(a[p]=!((j.start||0===j.start)&&(j.end||0===j.end))),a[p]||delete a["nbins"+c]}},{"../../constants/numerical":721,"../../lib":743,"fast-isnumeric":140}],1004:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../components/color"),g=a("./bin_defaults"),h=a("../bar/style_defaults"),i=a("../../components/errorbars/defaults"),j=a("./attributes");b.exports=function(a,b,c,k){function l(c,d){return e.coerce(a,b,j,c,d)}var m=l("x"),n=l("y");l("cumulative.enabled")&&(l("cumulative.direction"),l("cumulative.currentbin")),l("text");var o=l("orientation",n&&!m?"h":"v"),p=b["v"===o?"x":"y"];if(!p||!p.length)return void(b.visible=!1);d.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y"],k),b["h"===o?"x":"y"]&&l("histfunc"),g(a,b,l,"h"===o?["y"]:["x"]),h(a,b,l,c,k),i(a,b,f.defaultLine,{axis:"y"}),i(a,b,f.defaultLine,{axis:"x",inherit:"y"}),e.coerceSelectionMarkerOpacity(b,l)}},{"../../components/color":618,"../../components/errorbars/defaults":648,"../../lib":743,"../../registry":873,"../bar/style_defaults":895,"./attributes":997,"./bin_defaults":999}],1005:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){if(a.x="xVal"in b?b.xVal:b.x,a.y="yVal"in b?b.yVal:b.y,b.xa&&(a.xaxis=b.xa),b.ya&&(a.yaxis=b.ya),!(c.cumulative||{}).enabled){var f=Array.isArray(e)?d[0].pts[e[0]][e[1]]:d[e].pts;a.pointNumbers=f,a.binNumber=a.pointNumber,delete a.pointNumber,delete a.pointIndex;var g;if(c._indexToPoints){g=[];for(var h=0;h<f.length;h++)g=g.concat(c._indexToPoints[f[h]])}else g=f;a.pointIndices=g}return a}},{}],1006:[function(a,b,c){"use strict";var d=a("../bar/hover"),e=a("../../plots/cartesian/axes").hoverLabelText;b.exports=function(a,b,c,f){var g=d(a,b,c,f);if(g){a=g[0];var h=a.cd[a.index],i=a.cd[0].trace;if(!i.cumulative.enabled){var j="h"===i.orientation?"y":"x";a[j+"Label"]=e(a[j+"a"],h.p0,h.p1)}return g}}},{"../../plots/cartesian/axes":789,"../bar/hover":886}],1007:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.layoutAttributes=a("../bar/layout_attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("../bar/layout_defaults"),d.calc=a("./calc"),d.setPositions=a("../bar/set_positions"),d.plot=a("../bar/plot"),d.style=a("../bar/style"),d.colorbar=a("../scatter/colorbar"),d.hoverPoints=a("./hover"),d.selectPoints=a("../bar/select"),d.eventData=a("./event_data"),d.moduleType="trace",d.name="histogram",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"../bar/layout_attributes":888,"../bar/layout_defaults":889,"../bar/plot":890,"../bar/select":891,"../bar/set_positions":892,"../bar/style":894,"../scatter/colorbar":1070,"./attributes":997,"./calc":1002,"./defaults":1004,"./event_data":1005,"./hover":1006}],1008:[function(a,b,c){"use strict";b.exports={percent:function(a,b){for(var c=a.length,d=100/b,e=0;e<c;e++)a[e]*=d},probability:function(a,b){for(var c=a.length,d=0;d<c;d++)a[d]/=b},density:function(a,b,c,d){var e=a.length;d=d||1;for(var f=0;f<e;f++)a[f]*=c[f]*d},"probability density":function(a,b,c,d){var e=a.length;d&&(b/=d);for(var f=0;f<e;f++)a[f]*=c[f]/b}}},{}],1009:[function(a,b,c){"use strict";var d=a("../histogram/attributes"),e=a("../heatmap/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat;b.exports=h({},{x:d.x,y:d.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,xgap:e.xgap,ygap:e.ygap,zsmooth:e.zsmooth,zhoverformat:e.zhoverformat},f,{autocolorscale:h({},f.autocolorscale,{dflt:!1})},{colorbar:g})},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../lib/extend":732,"../heatmap/attributes":977,"../histogram/attributes":997}],1010:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){var h=b+"bins",j="autobin"+b,k=a[h];m(a,d,b),!a[j]&&k&&null!==k.start&&null!==k.end||(k=i.autoBin(c,d,a["nbins"+b],"2d",g),"histogram2dcontour"===a.type&&(k.start=f(i.tickIncrement(e(k.start),k.size,!0,g)),k.end=f(i.tickIncrement(e(k.end),k.size,!1,g))),a._input[h]=a[h]=k,a._input[j]=a[j])}function e(a,b,c,d){var e,f=new Array(a);if(d)for(e=0;e<a;e++)f[e]=1/(b[e+1]-b[e]);else{var g=1/c;for(e=0;e<a;e++)f[e]=g}return f}function f(a,b){return{start:a(b.start),end:a(b.end),size:b.size}}function g(a,b,c,d,e,f){var g,h=a.length-1,i=new Array(h);if(b)for(g=0;g<h;g++)i[g]=[b[g],b[g]];else{var j=n(c,d,a,e,f);for(g=0;g<h;g++)i[g]=[j(a[g]),j(a[g+1],!0)]}return i}var h=a("../../lib"),i=a("../../plots/cartesian/axes"),j=a("../histogram/bin_functions"),k=a("../histogram/norm_functions"),l=a("../histogram/average"),m=a("../histogram/clean_bins"),n=a("../histogram/bin_label_vals");b.exports=function(a,b){var c,m,n,o,p=i.getFromId(a,b.xaxis||"x"),q=b.x?p.makeCalcdata(b,"x"):[],r=i.getFromId(a,b.yaxis||"y"),s=b.y?r.makeCalcdata(b,"y"):[],t=b.xcalendar,u=b.ycalendar,v=function(a){return p.r2c(a,0,t)},w=function(a){return r.r2c(a,0,u)},x=function(a){return p.c2r(a,0,t)},y=function(a){return r.c2r(a,0,u)},z=Math.min(q.length,s.length);q.length>z&&q.splice(z,q.length-z),s.length>z&&s.splice(z,s.length-z),d(b,"x",q,p,v,x,t),d(b,"y",s,r,w,y,u);var A=[],B=[],C=[],D="string"==typeof b.xbins.size,E="string"==typeof b.ybins.size,F=[],G=[],H=D?F:b.xbins,I=E?G:b.ybins,J=0,K=[],L=[],M=b.histnorm,N=b.histfunc,O=-1!==M.indexOf("density"),P="max"===N||"min"===N,Q=P?null:0,R=j.count,S=k[M],T=!1,U=[],V=[],W="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";W&&"count"!==N&&(T="avg"===N,R=j[N]);var X=b.xbins,Y=v(X.start),Z=v(X.end)+(Y-i.tickIncrement(Y,X.size,!1,t))/1e6;for(c=Y;c<Z;c=i.tickIncrement(c,X.size,!1,t))B.push(Q),F.push(c),T&&C.push(0);F.push(c);var $=B.length,_=v(b.xbins.start),aa=(c-_)/$,ba=x(_+aa/2);for(X=b.ybins,Y=w(X.start),Z=w(X.end)+(Y-i.tickIncrement(Y,X.size,!1,u))/1e6,c=Y;c<Z;c=i.tickIncrement(c,X.size,!1,u)){A.push(B.slice()),G.push(c);var ca=new Array($);for(m=0;m<$;m++)ca[m]=[];L.push(ca),T&&K.push(C.slice())}G.push(c);var da=A.length,ea=w(b.ybins.start),fa=(c-ea)/da,ga=y(ea+fa/2);O&&(U=e(B.length,H,aa,D),V=e(A.length,I,fa,E)),D||"date"!==p.type||(H=f(v,H)),E||"date"!==r.type||(I=f(w,I));var ha=!0,ia=!0,ja=new Array($),ka=new Array(da),la=1/0,ma=1/0,na=1/0,oa=1/0;for(c=0;c<z;c++){var pa=q[c],qa=s[c];n=h.findBin(pa,H),o=h.findBin(qa,I),n>=0&&n<$&&o>=0&&o<da&&(J+=R(n,c,A[o],W,K[o]),L[o][n].push(c),ha&&(void 0===ja[n]?ja[n]=pa:ja[n]!==pa&&(ha=!1)),ia&&(void 0===ka[n]?ka[n]=qa:ka[n]!==qa&&(ia=!1)),la=Math.min(la,pa-F[n]),ma=Math.min(ma,F[n+1]-pa),na=Math.min(na,qa-G[o]),oa=Math.min(oa,G[o+1]-qa))}if(T)for(o=0;o<da;o++)J+=l(A[o],K[o]);if(S)for(o=0;o<da;o++)S(A[o],J,U,V[o]);return{x:q,xRanges:g(F,ha&&ja,la,ma,p,t),x0:ba,dx:aa,y:s,yRanges:g(G,ia&&ka,na,oa,r,u),y0:ga,dy:fa,z:A,pts:L}}},{"../../lib":743,"../../plots/cartesian/axes":789,"../histogram/average":998,"../histogram/bin_functions":1e3,"../histogram/bin_label_vals":1001,"../histogram/clean_bins":1003,"../histogram/norm_functions":1008}],1011:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./sample_defaults"),f=a("../heatmap/style_defaults"),g=a("../../components/colorscale/defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}e(a,b,j,i),!1!==b.visible&&(f(a,b,j,i),g(a,b,i,j,{prefix:"",cLetter:"z"}))}},{"../../components/colorscale/defaults":628,"../../lib":743,"../heatmap/style_defaults":992,"./attributes":1009,"./sample_defaults":1014}],1012:[function(a,b,c){"use strict";var d=a("../heatmap/hover"),e=a("../../plots/cartesian/axes").hoverLabelText;b.exports=function(a,b,c,f,g,h){var i=d(a,b,c,f,g,h);if(i){a=i[0];var j=a.index,k=j[0],l=j[1],m=a.cd[0],n=m.xRanges[l],o=m.yRanges[k];return a.xLabel=e(a.xa,n[0],n[1]),a.yLabel=e(a.ya,o[0],o[1]),i}}},{"../../plots/cartesian/axes":789,"../heatmap/hover":985}],1013:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../heatmap/calc"),d.plot=a("../heatmap/plot"),d.colorbar=a("../heatmap/colorbar"),d.style=a("../heatmap/style"),d.hoverPoints=a("./hover"),d.eventData=a("../histogram/event_data"),d.moduleType="trace",d.name="histogram2d",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","histogram"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"../heatmap/calc":978,"../heatmap/colorbar":980,"../heatmap/plot":990,"../heatmap/style":991,"../histogram/event_data":1005,"./attributes":1009,"./defaults":1011,"./hover":1012}],1014:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../histogram/bin_defaults");b.exports=function(a,b,c,f){var g=c("x"),h=c("y");if(!(g&&g.length&&h&&h.length))return void(b.visible=!1);d.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y"],f),(c("z")||c("marker.color"))&&c("histfunc"),e(a,b,c,["x","y"])}},{"../../registry":873,"../histogram/bin_defaults":999}],1015:[function(a,b,c){"use strict";var d=a("../histogram2d/attributes"),e=a("../contour/attributes"),f=a("../../components/colorscale/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat;b.exports=h({x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,autocontour:e.autocontour,ncontours:e.ncontours,contours:e.contours,line:e.line,zhoverformat:d.zhoverformat},f,{zmin:h({},f.zmin,{editType:"calc"}),zmax:h({},f.zmax,{editType:"calc"})},{colorbar:g})},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../lib/extend":732,"../contour/attributes":949,"../histogram2d/attributes":1009}],1016:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../histogram2d/sample_defaults"),f=a("../contour/contours_defaults"),g=a("../contour/style_defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}e(a,b,j,i),!1!==b.visible&&(f(a,b,j),g(a,b,j,i))}},{"../../lib":743,"../contour/contours_defaults":953,"../contour/style_defaults":963,"../histogram2d/sample_defaults":1014,"./attributes":1015}],1017:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../contour/calc"),d.plot=a("../contour/plot").plot,d.style=a("../contour/style"),d.colorbar=a("../contour/colorbar"),d.hoverPoints=a("../contour/hover"),d.moduleType="trace",d.name="histogram2dcontour",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","2dMap","contour","histogram"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"../contour/calc":950,"../contour/colorbar":951,"../contour/hover":957,"../contour/plot":961,"../contour/style":962,"./attributes":1015,"./defaults":1016}],1018:[function(a,b,c){"use strict";var d=a("../../components/colorscale/color_attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes"),g=a("../surface/attributes"),h=a("../../lib/extend").extendFlat;b.exports=h(d("","calc",!1),{x:{
valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},opacity:g.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:h({},g.contours.x.show,{}),color:g.contours.x.color,width:g.contours.x.width,editType:"calc"},showscale:e.showscale,colorbar:f,lightposition:{x:h({},g.lightposition.x,{dflt:1e5}),y:h({},g.lightposition.y,{dflt:1e5}),z:h({},g.lightposition.z,{dflt:0}),editType:"calc"},lighting:h({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},g.lighting)})},{"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../components/colorscale/color_attributes":626,"../../lib/extend":732,"../surface/attributes":1140}],1019:[function(a,b,c){"use strict";var d=a("../../components/colorscale/calc");b.exports=function(a,b){b.intensity&&d(b,b.intensity,"","c")}},{"../../components/colorscale/calc":625}],1020:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.cmin,k=c.cmax,l=c.intensity||[];if(d(j)||(j=e.aggNums(Math.min,null,l)),d(k)||(k=e.aggNums(Math.max,null,l)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var m=b[0].t.cb=h(a,i),n=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});m.fillcolor(n).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":622,"../../components/colorscale":633,"../../lib":743,"../../plots/plots":852,"fast-isnumeric":140}],1021:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.mesh=b,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function e(a){return a.map(function(a){var b=a[0],c=j(a[1]),d=c.toRgb();return{index:b,rgb:[d.r,d.g,d.b,1]}})}function f(a){return a.map(n)}function g(a,b,c){for(var d=new Array(a.length),e=0;e<a.length;++e)d[e]=[a[e],b[e],c[e]];return d}function h(a,b){var c=a.glplot.gl,e=i({gl:c}),f=new d(a,e,b.uid);return e._trace=f,f.update(b),a.glplot.add(e),f}var i=a("gl-mesh3d"),j=a("tinycolor2"),k=a("delaunay-triangulate"),l=a("alpha-shape"),m=a("convex-hull"),n=a("../../lib/str2rgbarray"),o=d.prototype;o.handlePick=function(a){if(a.object===this.mesh){var b=a.index=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},o.update=function(a){function b(a,b,c,d){return b.map(function(b){return a.d2l(b,0,d)*c})}var c=this.scene,d=c.fullSceneLayout;this.data=a;var h,i=g(b(d.xaxis,a.x,c.dataScale[0],a.xcalendar),b(d.yaxis,a.y,c.dataScale[1],a.ycalendar),b(d.zaxis,a.z,c.dataScale[2],a.zcalendar));if(a.i&&a.j&&a.k)h=g(a.i,a.j,a.k);else if(0===a.alphahull)h=m(i);else if(a.alphahull>0)h=l(a.alphahull,i);else{var j=["x","y","z"].indexOf(a.delaunayaxis);h=k(i.map(function(a){return[a[(j+1)%3],a[(j+2)%3]]}))}var o={positions:i,cells:h,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:n(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};a.intensity?(this.color="#fff",o.vertexIntensity=a.intensity,o.vertexIntensityBounds=[a.cmin,a.cmax],o.colormap=e(a.colorscale)):a.vertexcolor?(this.color=a.vertexcolor[0],o.vertexColors=f(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],o.cellColors=f(a.facecolor)):(this.color=a.color,o.meshColor=n(a.color)),this.mesh.update(o)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},b.exports=h},{"../../lib/str2rgbarray":765,"alpha-shape":47,"convex-hull":109,"delaunay-triangulate":130,"gl-mesh3d":210,tinycolor2:546}],1022:[function(a,b,c){"use strict";var d=a("../../registry"),e=a("../../lib"),f=a("../../components/colorscale/defaults"),g=a("./attributes");b.exports=function(a,b,c,h){function i(c,d){return e.coerce(a,b,g,c,d)}function j(a){var b=a.map(function(a){var b=i(a);return b&&Array.isArray(b)?b:null});return b.every(function(a){return a&&a.length===b[0].length})&&b}var k=j(["x","y","z"]),l=j(["i","j","k"]);if(!k)return void(b.visible=!1);l&&l.forEach(function(a){for(var b=0;b<a.length;++b)a[b]|=0}),d.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],h),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(a){i(a)}),"intensity"in a?(i("intensity"),f(a,b,h,i,{prefix:"",cLetter:"c"})):(b.showscale=!1,"facecolor"in a?i("facecolor"):"vertexcolor"in a?i("vertexcolor"):i("color",c))}},{"../../components/colorscale/defaults":628,"../../lib":743,"../../registry":873,"./attributes":1018}],1023:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.colorbar=a("./colorbar"),d.plot=a("./convert"),d.moduleType="trace",d.name="mesh3d",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d"],d.meta={},b.exports=d},{"../../plots/gl3d":832,"./attributes":1018,"./calc":1019,"./colorbar":1020,"./convert":1021,"./defaults":1022}],1024:[function(a,b,c){"use strict";function d(a){return{name:{valType:"string",editType:"style"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},line:{color:e({},h.color,{dflt:a}),width:h.width,dash:g,editType:"style"},editType:"style"}}var e=a("../../lib").extendFlat,f=a("../scatter/attributes"),g=a("../../components/drawing/attributes").dash,h=f.line;b.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",dflt:[],editType:"calc"},high:{valType:"data_array",dflt:[],editType:"calc"},low:{valType:"data_array",dflt:[],editType:"calc"},close:{valType:"data_array",dflt:[],editType:"calc"},line:{width:e({},h.width,{}),dash:e({},g,{}),editType:"style"},increasing:d("#3D9970"),decreasing:d("#FF4136"),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calcIfAutorange"}}},{"../../components/drawing/attributes":642,"../../lib":743,"../scatter/attributes":1066}],1025:[function(a,b,c){"use strict";function d(a,b,c,d){g(a,b,c,d),c(d+".line.color"),c(d+".line.width",b.line.width),c(d+".line.dash",b.line.dash)}var e=a("../../lib"),f=a("./ohlc_defaults"),g=a("./direction_defaults"),h=a("./attributes"),i=a("./helpers");b.exports=function(a,b,c,g){function j(c,d){return e.coerce(a,b,h,c,d)}if(i.pushDummyTransformOpts(a,b),0===f(a,b,j,g))return void(b.visible=!1);j("line.width"),j("line.dash"),d(a,b,j,"increasing"),d(a,b,j,"decreasing"),j("text"),j("tickwidth")}},{"../../lib":743,"./attributes":1024,"./direction_defaults":1026,"./helpers":1027,"./ohlc_defaults":1029}],1026:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){c(d+".showlegend"),!1===a.showlegend&&(b[d].showlegend=!1),c(d+".name",b.name+" - "+d)}},{}],1027:[function(a,b,c){"use strict";function d(a){function b(a,b){return a===b?b>g?f=!0:b<g&&(f=!1):f=a<b,g=b,f}function c(a,c){return e(a)&&e(c)&&b(+a,+c)}function d(a,c){return e(a)&&e(c)&&!b(+a,+c)}var f=!0,g=null;return"increasing"===a?c:d}var e=a("fast-isnumeric"),f=a("../../lib");c.pushDummyTransformOpts=function(a,b){var c={type:b.type,_ephemeral:!0};Array.isArray(a.transforms)?a.transforms.push(c):a.transforms=[c]},c.clearEphemeralTransformOpts=function(a){var b=a.transforms;if(Array.isArray(b)){for(var c=0;c<b.length;c++)b[c]._ephemeral&&b.splice(c,1);0===b.length&&delete a.transforms}},c.copyOHLC=function(a,b){a.open&&(b.open=a.open),a.high&&(b.high=a.high),a.low&&(b.low=a.low),a.close&&(b.close=a.close)},c.makeTransform=function(a,b,c){var d=f.extendFlat([],a.transforms);return d[b.transformIndex]={type:a.type,direction:c,open:a.open,high:a.high,low:a.low,close:a.close},d},c.getFilterFn=function(a){return new d(a)},c.addRangeSlider=function(a,b){for(var c=!1,d=0;d<a.length;d++)if(!0===a[d].visible){c=!0;break}c&&(b.xaxis||(b.xaxis={}),b.xaxis.rangeslider||(b.xaxis.rangeslider={}))}},{"../../lib":743,"fast-isnumeric":140}],1028:[function(a,b,c){"use strict";var d=a("../../plot_api/register");b.exports={moduleType:"trace",name:"ohlc",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","showLegend"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults")},d(a("../scatter")),d(a("./transform"))},{"../../plot_api/register":779,"../../plots/cartesian":800,"../scatter":1078,"./attributes":1024,"./defaults":1025,"./transform":1030}],1029:[function(a,b,c){"use strict";var d=a("../../registry");b.exports=function(a,b,c,e){var f,g=c("x"),h=c("open"),i=c("high"),j=c("low"),k=c("close");return d.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x"],e),f=Math.min(h.length,i.length,j.length,k.length),g&&(f=Math.min(f,g.length))<g.length&&(b.x=g.slice(0,f)),f<h.length&&(b.open=h.slice(0,f)),f<i.length&&(b.high=i.slice(0,f)),f<j.length&&(b.low=j.slice(0,f)),f<k.length&&(b.close=k.slice(0,f)),f}},{"../../registry":873}],1030:[function(a,b,c){"use strict";function d(a,b,c){var d={type:"scatter",mode:"lines",connectgaps:!1,visible:a.visible,opacity:a.opacity,xaxis:a.xaxis,yaxis:a.yaxis,hoverinfo:e(a),transforms:j.makeTransform(a,b,c)},f=a[c];return f&&h.extendFlat(d,{x:a.x||[0],xcalendar:a.xcalendar,y:[].concat(a.low).concat(a.high),text:a.text,name:f.name,showlegend:f.showlegend,line:f.line}),d}function e(a){var b=a.hoverinfo;if("all"===b)return"x+text+name";var c=b.split("+"),d=c.indexOf("y"),e=c.indexOf("text");return-1!==d&&(c.splice(d,1),-1===e&&c.push("text")),c.join("+")}function f(a,b,c){var d=c._fullInput,e=d.tickwidth,f=d._minDiff;if(!f){var g=a._fullData,i=[];f=1/0;var j;for(j=0;j<g.length;j++){var k=g[j]._fullInput;if("ohlc"===k.type&&!0===k.visible&&k.xaxis===b._id&&(i.push(k),k.x&&k.x.length>1)){var l=h.simpleMap(k.x,b.d2c,0,c.xcalendar),m=h.distinctVals(l).minDiff;f=Math.min(f,m)}}for(f===1/0&&(f=1),j=0;j<i.length;j++)i[j]._minDiff=f}return f*e}var g=a("fast-isnumeric"),h=a("../../lib"),i=h._,j=a("./helpers"),k=a("../../plots/cartesian/axes"),l=a("../../plots/cartesian/axis_ids");c.moduleType="transform",c.name="ohlc",c.attributes={},c.supplyDefaults=function(a,b,c,d){return j.clearEphemeralTransformOpts(d),j.copyOHLC(a,b),a},c.transform=function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e];"ohlc"===f.type?c.push(d(f,b,"increasing"),d(f,b,"decreasing")):c.push(f)}return j.addRangeSlider(c,b.layout),c},c.calcTransform=function(a,b,c){var d,e=c.direction,h=j.getFilterFn(e),m=l.getFromTrace(a,b,"x"),n=l.getFromTrace(a,b,"y"),o=f(a,m,b),p=b.open,q=b.high,r=b.low,s=b.close,t=b.text,u=i(a,"open:")+" ",v=i(a,"high:")+" ",w=i(a,"low:")+" ",x=i(a,"close:")+" ",y=p.length,z=[],A=[],B=[];d=b._fullInput.x?function(a){var c=b.x[a],d=b.xcalendar,e=m.d2c(c,0,d);z.push(m.c2d(e-o,0,d),c,c,c,c,m.c2d(e+o,0,d),null)}:function(a){z.push(a-o,a,a,a,a,a+o,null)};for(var C=function(a,b){return k.tickText(a,a.c2l(b),"hover").text},D=b._fullInput.hoverinfo,E=D.split("+"),F="all"===D,G=F||-1!==E.indexOf("y"),H=F||-1!==E.indexOf("text"),I=Array.isArray(t)?function(a){return t[a]||""}:function(){return t},J=0;J<y;J++)h(p[J],s[J])&&g(q[J])&&g(r[J])&&(d(J),function(a,b,c,d){A.push(a,a,b,c,d,d,null)}(p[J],q[J],r[J],s[J]),function(a,b,c,d,e){var f=[];G&&(f.push(u+C(n,b)),f.push(v+C(n,c)),f.push(w+C(n,d)),f.push(x+C(n,e))),H&&f.push(I(a));var g=f.join("<br>");B.push(g,g,g,g,g,g,null)}(J,p[J],q[J],r[J],s[J]));b.x=z,b.y=A,b.text=B}},{"../../lib":743,"../../plots/cartesian/axes":789,"../../plots/cartesian/axis_ids":792,"./helpers":1027,"fast-isnumeric":140}],1031:[function(a,b,c){"use strict";var d=a("../../components/colorscale/color_attributes"),e=a("../../components/colorbar/attributes"),f=a("../../components/colorscale/scales"),g=a("../../plots/cartesian/layout_attributes"),h=a("../../plots/font_attributes"),i=a("../../plots/domain_attributes"),j=a("../../lib/extend"),k=j.extendDeepAll,l=j.extendFlat;b.exports={domain:i({name:"parcoords",trace:!0,editType:"calc"}),labelfont:h({editType:"calc"}),tickfont:h({editType:"calc"}),rangefont:h({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},tickvals:l({},g.tickvals,{editType:"calc"}),ticktext:l({},g.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},editType:"calc"},line:l(k(d("line","calc"),{colorscale:{dflt:f.Viridis},autocolorscale:{dflt:!1}}),{showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:e,editType:"calc"})}},{"../../components/colorbar/attributes":619,"../../components/colorscale/color_attributes":626,"../../components/colorscale/scales":637,"../../lib/extend":732,"../../plots/cartesian/layout_attributes":801,"../../plots/domain_attributes":815,"../../plots/font_attributes":816}],1032:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plots/get_data").getModuleCalcData,f=a("./plot"),g=a("../../constants/xmlns_namespaces");c.name="parcoords",c.plot=function(a){var b=e(a.calcdata,"parcoords");b.length&&f(a,b)},c.clean=function(a,b,c,d){var e=d._has&&d._has("parcoords"),f=b._has&&b._has("parcoords");e&&!f&&(d._paperdiv.selectAll(".parcoords").remove(),d._glimages.selectAll("*").remove())},c.toSVG=function(a){function b(){var a=this,b=a.toDataURL("image/png");c.append("svg:image").attr({xmlns:g.svg,"xlink:href":b,preserveAspectRatio:"none",x:0,y:0,width:a.width,height:a.height})}var c=a._fullLayout._glimages,e=d.select(a).selectAll(".svg-container");e.filter(function(a,b){return b===e.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(b),window.setTimeout(function(){d.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":723,"../../plots/get_data":826,"./plot":1040,d3:128}],1033:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/calc"),f=a("../../lib"),g=a("../../lib/gup").wrap;b.exports=function(a,b){var c=!!b.line.colorscale&&f.isArray(b.line.color),h=c?b.line.color:Array.apply(0,Array(b.dimensions.reduce(function(a,b){return Math.max(a,b.values.length)},0))).map(function(){return.5}),i=c?b.line.colorscale:[[0,b.line.color],[1,b.line.color]];return d(b,"line")&&e(b,b.line.color,"line","c"),g({lineColor:h,cscale:i})}},{"../../components/colorscale/calc":625,"../../components/colorscale/has_colorscale":632,"../../lib":743,"../../lib/gup":740}],1034:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i=c.line,j="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+j).remove(),void 0===i||!i.showscale)return void f.autoMargin(a,j);var k=i.color,l=i.cmin,m=i.cmax;d(l)||(l=e.aggNums(Math.min,null,k)),d(m)||(m=e.aggNums(Math.max,null,k));var n=b[0].t.cb=h(a,j),o=g.makeColorScaleFunc(g.extractScale(i.colorscale,l,m),{noNumericCheck:!0});n.fillcolor(o).filllevels({start:l,end:m,size:(m-l)/254}).options(i.colorbar)()}},{"../../components/colorbar/draw":622,"../../components/colorscale":633,"../../lib":743,"../../plots/plots":852,"fast-isnumeric":140}],1035:[function(a,b,c){"use strict";b.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,scatter:!1,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,capturewidth:10,fillcolor:"magenta",fillopacity:1,strokecolor:"white",strokeopacity:1,strokewidth:1,handleheight:16,handleopacity:1,handleoverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1036:[function(a,b,c){"use strict";function d(a,b,c,d,e){e("line.color",c),h(a,"line")&&f.isArray(a.line.color)?(e("line.colorscale"),i(a,b,d,e,{prefix:"line.",cLetter:"c"})):e("line.color",c)}function e(a,b){function c(a,b){return f.coerce(d,e,g.dimensions,a,b)}var d,e,h,i=a.dimensions||[],k=b.dimensions=[],l=1/0;for(i.length>j&&(f.log("parcoords traces support up to "+j+" dimensions at the moment"),i.splice(j)),h=0;h<i.length;h++)if(d=i[h],e={},f.isPlainObject(d)){var m=c("values"),n=c("visible",m.length>0);n&&(c("label"),c("tickvals"),c("ticktext"),c("tickformat"),c("range"),c("constraintrange"),l=Math.min(l,e.values.length)),e._index=h,k.push(e)}if(isFinite(l))for(h=0;h<k.length;h++)e=k[h],e.visible&&e.values.length>l&&(e.values=e.values.slice(0,l));return k}var f=a("../../lib"),g=a("./attributes"),h=a("../../components/colorscale/has_colorscale"),i=a("../../components/colorscale/defaults"),j=a("./constants").maxDimensionCount;b.exports=function(a,b,c,h){function i(c,d){return f.coerce(a,b,g,c,d)}var j=e(a,b);d(a,b,c,h,i),i("domain.x"),i("domain.y"),Array.isArray(j)&&j.length||(b.visible=!1);var k={family:h.font.family,size:Math.round(h.font.size*(10/12)),color:h.font.color};f.coerceFont(i,"labelfont",k),f.coerceFont(i,"tickfont",k),f.coerceFont(i,"rangefont",k)}},{"../../components/colorscale/defaults":628,"../../components/colorscale/has_colorscale":632,"../../lib":743,"./attributes":1031,"./constants":1035}],1037:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.moduleType="trace",d.name="parcoords",d.basePlotModule=a("./base_plot"),d.categories=["gl","regl","noOpacity"],d.meta={},b.exports=d},{"./attributes":1031,"./base_plot":1032,"./calc":1033,"./colorbar":1034,"./defaults":1036,"./plot":1040}],1038:[function(a,b,c){"use strict";function d(a){a.read({x:0,y:0,width:1,height:1,data:t})}function e(a,b,c,d,e){var f=a._gl;f.enable(f.SCISSOR_TEST),f.scissor(b,c,d,e),a.clear({color:[0,0,0,0],depth:1})}function f(a,b,c,f,g,h){function i(d){var k;k=Math.min(f,g-d*f),h.offset=q*d*f,h.count=q*k,0===d&&(window.cancelAnimationFrame(c.currentRafs[j]),delete c.currentRafs[j],e(a,h.scissorX,h.scissorY,h.scissorWidth,h.viewBoxSize[1])),c.clearOnly||(b(h),d*f+k<g&&(c.currentRafs[j]=window.requestAnimationFrame(function(){i(d+1)})),c.drawCompleted=!1)}var j=h.key;c.drawCompleted||(d(a),c.drawCompleted=!0),i(0)}function g(a){return Math.max(o,Math.min(1-o,a))}function h(a,b,c){for(var d=[],e=0;e<256;e++){var f=a(e/255);d.push((b?s:f).concat(c))}return d}function i(a,b){return(a>>>8*b)%256/255}function j(a,b,c,d){for(var e=[],f=0;f<a;f++)for(var h=0;h<p;h++)e.push(h<b?c[h].paddedUnitValues[f]:h===p-1?g(d[f]):h>=p-4?i(f,p-2-h):.5);return e}function k(a,b,c){var d,e,f,g=[];for(e=0;e<a;e++)for(f=0;f<q;f++)for(d=0;d<r;d++)g.push(b[e*p+c*r+d]),c*r+d===p-1&&f%2==0&&(g[g.length-1]*=-1);return g}function l(a,b){var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],d=c.map(function(c){return k(a,b,c)}),e={};return d.forEach(function(a,b){e["p"+b.toString(16)]=a}),e}function m(a,b,c){return a+b<=c}var n=a("./constants"),o=1e-6,p=64,q=2,r=4,s=[119,119,119],t=new Uint8Array(4),u=new Uint8Array(4);b.exports=function(a,b,c){function d(a){Q[0]=a[0],Q[1]=a[1]}function g(a,b,c,d,e,f,g,h,i,j,k){var l,o,p,r,t=[a,b],u=n.verticalPadding/f,x=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})}),y=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(l=0;l<2;l++)for(r=t[l],o=0;o<4;o++)for(p=0;p<16;p++){var z=p+16*o;x[l][o][p]=p+16*o===r?1:0,y[l][o][p]=(!A&&m(p,16*o,K)?D[0===z?0:1+(z-1)%(D.length-1)].filter[l]:l)+(2*l-1)*u}return{key:g,resolution:[v,w],viewBoxPosition:[c+J,d],viewBoxSize:[e,f],i:a,ii:b,dim1A:x[0][0],dim1B:x[0][1],dim1C:x[0][2],dim1D:x[0][3],dim2A:x[1][0],dim2B:x[1][1],dim2C:x[1][2],dim2D:x[1][3],loA:y[0][0],loB:y[0][1],loC:y[0][2],loD:y[0][3],hiA:y[1][0],hiB:y[1][1],hiC:y[1][2],hiD:y[1][3],colorClamp:Q,scatter:h||0,scissorX:(i===j?0:c+J)+(q.pad.l-J)+q.layoutWidth*s.x[0],scissorWidth:(i===k?v-c+J:e+.5)+(i===j?c+J:0),scissorY:d+q.pad.b+q.layoutHeight*s.y[0],scissorHeight:f,viewportX:q.pad.l-J+q.layoutWidth*s.x[0],viewportY:q.pad.b+q.layoutHeight*s.y[0],viewportWidth:v,viewportHeight:w}}function i(a,b,d){var h,i,j,k=1/0,l=-1/0;for(h=0;h<K;h++)a[h].dim2.canvasX>l&&(l=a[h].dim2.canvasX,j=h),a[h].dim1.canvasX<k&&(k=a[h].dim1.canvasX,i=h);for(0===K&&e(N,0,0,v,w),h=0;h<K;h++){var m=a[h],n=m.dim1,o=n.crossfilterDimensionIndex,p=m.canvasX,q=m.canvasY,r=m.dim2,s=r.crossfilterDimensionIndex,u=m.panelSizeX,x=m.panelSizeY,y=p+u;if(b||!R[o]||R[o][0]!==p||R[o][1]!==y){R[o]=[p,y];var z=g(o,s,p,q,u,x,n.crossfilterDimensionIndex,c||n.scatter?1:0,h,i,j);C.clearOnly=d,f(N,P,C,b?t.blockLineCount:F,F,z)}}}function k(a,b){return N.read({x:a,y:b,width:1,height:1,data:u}),u}function o(a,b,c,d){var e=new Uint8Array(4*c*d);return N.read({x:a,y:b,width:c,height:d,data:e}),e}function p(){a.style["pointer-events"]="none",O.destroy()}var q=b.model,r=b.viewModel,s=q.domain,t=q.lines,v=q.canvasWidth,w=q.canvasHeight,x=r.dimensions,y=r.panels,z=q.unitToColor,A=b.context,B=b.pick,C={currentRafs:{},drawCompleted:!0,clearOnly:!1},D=x.slice(),E=D.length,F=D[0]?D[0].values.length:0,G=A,H=B?t.color.map(function(a,b){return b/t.color.length}):t.color,I=Math.max(1/255,Math.pow(1/H.length,1/3)),J=t.canvasOverdrag,K=y.length,L=j(F,E,D,H),M=l(F,L),N=b.regl,O=N.texture({shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest",data:h(z,A,Math.round(255*(A?I:1)))}),P=N({profile:!1,blend:{enable:G,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!G,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:N.prop("scissorX"),y:N.prop("scissorY"),width:N.prop("scissorWidth"),height:N.prop("scissorHeight")}},viewport:{x:N.prop("viewportX"),y:N.prop("viewportY"),width:N.prop("viewportWidth"),height:N.prop("viewportHeight")},dither:!1,vert:B?"precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // pick coloring\n    fragColor = vec4(pf.rgb, 1.0);\n}\n":"precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // visible coloring\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n",frag:"precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n",primitive:"lines",lineWidth:1,attributes:M,uniforms:{resolution:N.prop("resolution"),viewBoxPosition:N.prop("viewBoxPosition"),viewBoxSize:N.prop("viewBoxSize"),dim1A:N.prop("dim1A"),dim2A:N.prop("dim2A"),dim1B:N.prop("dim1B"),dim2B:N.prop("dim2B"),dim1C:N.prop("dim1C"),dim2C:N.prop("dim2C"),dim1D:N.prop("dim1D"),dim2D:N.prop("dim2D"),loA:N.prop("loA"),hiA:N.prop("hiA"),loB:N.prop("loB"),hiB:N.prop("hiB"),loC:N.prop("loC"),hiC:N.prop("hiC"),loD:N.prop("loD"),hiD:N.prop("hiD"),palette:O,colorClamp:N.prop("colorClamp"),scatter:N.prop("scatter")},offset:N.prop("offset"),count:N.prop("count")}),Q=[0,1],R=[];return{setColorDomain:d,render:i,readPixel:k,readPixels:o,destroy:p}}},{"./constants":1035}],1039:[function(a,b,c){"use strict";function d(a){return!("visible"in a)||a.visible}function e(a){var b=a.range?a.range[0]:s.min(a.values),c=a.range?a.range[1]:s.max(a.values);return!isNaN(b)&&isFinite(b)||(b=0),!isNaN(c)&&isFinite(c)||(c=0),b===c&&(void 0===b?(b=0,c=1):0===b?(b-=1,c+=1):(b*=.9,c*=1.1)),[b,c]}function f(a,b){var c,d,e,f,g;for(c=0,d=a.range(),e=1/0,f=d[0],g;c<d.length;c++){if((g=Math.abs(d[c]-b))>e)return f;e=g,f=d[c]}return d[d.length-1]}function g(a,b){return function(c,d){if(b){var e=b[d];return null===e||void 0===e?a(c):e}return a(c)}}function h(a,b,c){var d=e(c),f=c.ticktext;return c.tickvals?s.scale.ordinal().domain(c.tickvals.map(g(s.format(c.tickformat),f))).range(c.tickvals.map(function(a){return(a-d[0])/(d[1]-d[0])}).map(function(c){return a-b+c*(b-(a-b))})):s.scale.linear().domain(d).range([a-b,b])}function i(a,b){return s.scale.linear().range([a-b,b])}function j(a){return s.scale.linear().domain(e(a))}function k(a){var b=e(a);return a.tickvals&&s.scale.ordinal().domain(a.tickvals).range(a.tickvals.map(function(a){return(a-b[0])/(b[1]-b[0])}))}function l(a){var b=a.map(function(a){return a[0]}),c=a.map(function(a){return a[1]}),d=c.map(function(a){return s.rgb(a)}),e=function(a){return function(b){return b[a]}},f="rgb".split("").map(function(a){return s.scale.linear().clamp(!0).domain(b).range(d.map(e(a)))});return function(a){return f.map(function(b){return b(a)})}}function m(a,b,c){var e=w(b),f=e.trace,g=e.lineColor,h=e.cscale,i=f.line,k=f.domain,m=f.dimensions,n=a.width,o=f.labelfont,p=f.tickfont,s=f.rangefont,t=r.extendDeep({},i,{color:g.map(j({values:g,range:[i.cmin,i.cmax]})),blockLineCount:q.blockLineCount,canvasOverdrag:q.overdrag*q.canvasPixelRatio}),u=Math.floor(n*(k.x[1]-k.x[0])),v=Math.floor(a.height*(k.y[1]-k.y[0])),x=a.margin||{l:80,r:80,t:100,b:80},y=u,z=v;return{key:c,colCount:m.filter(d).length,dimensions:m,tickDistance:q.tickDistance,unitToColor:l(h),lines:t,labelFont:o,tickFont:p,rangeFont:s,layoutWidth:n,layoutHeight:a.height,domain:k,translateX:k.x[0]*n,translateY:a.height-k.y[1]*a.height,pad:x,canvasWidth:y*q.canvasPixelRatio+2*t.canvasOverdrag,canvasHeight:z*q.canvasPixelRatio,width:y,height:z,canvasPixelRatio:q.canvasPixelRatio}}function n(a){var b=a.width,c=a.height,e=a.dimensions,f=a.canvasPixelRatio,g=function(c){return b*c/Math.max(1,a.colCount-1)},l=q.verticalPadding/(c*f),m=1-2*l,n=function(a){return l+m*a},o={key:a.key,xScale:g,model:a},p={};return o.dimensions=e.filter(d).map(function(b,d){var e=j(b),l=p[b.label];return p[b.label]=(l||0)+1,{key:b.label+(l?"__"+l:""),label:b.label,tickFormat:b.tickformat,tickvals:b.tickvals,ticktext:b.ticktext,ordinal:!!b.tickvals,scatter:q.scatter||b.scatter,xIndex:d,crossfilterDimensionIndex:d,visibleIndex:b._index,height:c,values:b.values,paddedUnitValues:b.values.map(e).map(n),xScale:g,x:g(d),canvasX:g(d)*f,unitScale:i(c,q.verticalPadding),
domainScale:h(c,q.verticalPadding,b),ordinalScale:k(b),domainToUnitScale:e,filter:b.constraintrange?b.constraintrange.map(e):[0,1],parent:o,model:a}}),o}function o(a){a.classed(q.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}var p=a("./lines"),q=a("./constants"),r=a("../../lib"),s=a("d3"),t=a("../../components/drawing"),u=a("../../lib/gup").keyFun,v=a("../../lib/gup").repeat,w=a("../../lib/gup").unwrap;b.exports=function(a,b,c,d,e,g){function h(a){var b=a.selectAll("defs").data(v,u);b.enter().append("defs");var c=b.selectAll("#"+q.id.filterBarPattern).data(v,u);c.enter().append("pattern").attr("id",q.id.filterBarPattern).attr("patternUnits","userSpaceOnUse"),c.attr("x",-q.bar.width).attr("width",q.bar.capturewidth).attr("height",function(a){return a.model.height});var d=c.selectAll("rect").data(v,u);d.enter().append("rect").attr("shape-rendering","crispEdges"),d.attr("height",function(a){return a.model.height}).attr("width",q.bar.width).attr("x",q.bar.width/2).attr("fill",q.bar.fillcolor).attr("fill-opacity",q.bar.fillopacity).attr("stroke",q.bar.strokecolor).attr("stroke-opacity",q.bar.strokeopacity).attr("stroke-width",q.bar.strokewidth)}function i(a){return a.dimensions.some(function(a){return 0!==a.filter[0]||1!==a.filter[1]})}function j(a,b){for(var c=b.panels||(b.panels=[]),d=a.each(function(a){return a})[b.key].map(function(a){return a.__data__}),e=d.length-1,f=0;f<1;f++)for(var g=0;g<e;g++){var h=c[g+f*e]||(c[g+f*e]={}),i=d[g],j=d[g+1];h.dim1=i,h.dim2=j,h.canvasX=i.canvasX,h.panelSizeX=j.canvasX-i.canvasX,h.panelSizeY=b.model.canvasHeight/1,h.y=f*h.panelSizeY,h.canvasY=b.model.canvasHeight-h.y-h.panelSizeY}}function k(a,b){for(var c=b.panels||(b.panels=[]),d=a.each(function(a){return a})[b.key].map(function(a){return a.__data__}),e=d.length-1,f=e,g=0;g<e;g++)for(var h=0;h<e;h++){var i=c[h+g*e]||(c[h+g*e]={}),j=d[h],k=d[h+1];i.dim1=d[g+1],i.dim2=k,i.canvasX=j.canvasX,i.panelSizeX=k.canvasX-j.canvasX,i.panelSizeY=b.model.canvasHeight/f,i.y=g*i.panelSizeY,i.canvasY=b.model.canvasHeight-i.y-i.panelSizeY}}function l(a,b){return(q.scatter?k:j)(a,b)}function x(a){return a.ordinal?function(){return""}:s.format(a.tickFormat)}function y(){V=!0,B=!0}function z(a){C=!1;var b=a.parent,c=a.brush.extent(),d=b.dimensions,e=d[a.xIndex].filter,f=V&&c[0]===c[1];f&&(a.brush.clear(),s.select(this).select("rect.extent").attr("y",-100));var g=f?[0,1]:c.slice();if(g[0]!==e[0]||g[1]!==e[1]){d[a.xIndex].filter=g,b.focusLayer&&b.focusLayer.render(b.panels,!0);var h=i(b);!W&&h?(b.contextLayer&&b.contextLayer.render(b.panels,!0),W=!0):W&&!h&&(b.contextLayer&&b.contextLayer.render(b.panels,!0,!0),W=!1)}V=!1}function A(a){var b=a.parent,c=a.brush.extent(),d=c[0]===c[1],e=b.dimensions,h=e[a.xIndex].filter;if(!d&&a.ordinal&&(h[0]=f(a.ordinalScale,h[0]),h[1]=f(a.ordinalScale,h[1]),h[0]===h[1]&&(h[0]=Math.max(0,h[0]-.05),h[1]=Math.min(1,h[1]+.05)),s.select(this).transition().duration(150).call(a.brush.extent(h)),b.focusLayer.render(b.panels,!0)),b.pickLayer&&b.pickLayer.render(b.panels,!0),C=!0,B="ending",g&&g.filterChanged){var i=a.domainToUnitScale.invert,j=h.map(i);g.filterChanged(b.key,a.visibleIndex,j)}}var B=!1,C=!0,D=d.filter(function(a){return w(a).trace.visible}).map(m.bind(0,e)).map(n);c.each(function(a,b){return r.extendFlat(a,D[b])});var E=c.selectAll(".gl-canvas").each(function(a){a.viewModel=D[0],a.model=a.viewModel?a.viewModel.model:null}),F={renderers:[],dimensions:[]},G=null;E.filter(function(a){return a.pick}).style("pointer-events","auto").on("mousemove",function(a){if(C&&a.lineLayer&&g&&g.hover){var b=s.event,c=this.width,d=this.height,e=s.mouse(this),f=e[0],h=e[1];if(f<0||h<0||f>=c||h>=d)return;var i=a.lineLayer.readPixel(f,d-1-h),j=0!==i[3],k=j?i[2]+256*(i[1]+256*i[0]):null,l={x:f,y:h,clientX:b.clientX,clientY:b.clientY,dataIndex:a.model.key,curveNumber:k};k!==G&&(j?g.hover(l):g.unhover&&g.unhover(l),G=k)}}),E.style("opacity",function(a){return a.pick?.01:1}),b.style("background","rgba(255, 255, 255, 0)");var H=b.selectAll("."+q.cn.parcoords).data(D,u);H.exit().remove(),H.enter().append("g").classed(q.cn.parcoords,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","none").call(h),H.attr("width",function(a){return a.model.width+a.model.pad.l+a.model.pad.r}).attr("height",function(a){return a.model.height+a.model.pad.t+a.model.pad.b}).attr("transform",function(a){return"translate("+a.model.translateX+","+a.model.translateY+")"});var I=H.selectAll("."+q.cn.parcoordsControlView).data(v,u);I.enter().append("g").classed(q.cn.parcoordsControlView,!0).style("box-sizing","content-box"),I.attr("transform",function(a){return"translate("+a.model.pad.l+","+a.model.pad.t+")"});var J=I.selectAll("."+q.cn.yAxis).data(function(a){return a.dimensions},u);J.enter().append("g").classed(q.cn.yAxis,!0).each(function(a){F.dimensions.push(a)}),I.each(function(a){l(J,a)}),E.filter(function(a){return!!a.viewModel}).each(function(a){a.lineLayer=p(this,a,q.scatter),a.viewModel[a.key]=a.lineLayer,F.renderers.push(function(){a.lineLayer.render(a.viewModel.panels,!0)}),a.lineLayer.render(a.viewModel.panels,!a.context)}),J.attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"}),J.call(s.behavior.drag().origin(function(a){return a}).on("drag",function(a){var b=a.parent;C=!1,B||(a.x=Math.max(-q.overdrag,Math.min(a.model.width+q.overdrag,s.event.x)),a.canvasX=a.x*a.model.canvasPixelRatio,J.sort(function(a,b){return a.x-b.x}).each(function(b,c){b.xIndex=c,b.x=a===b?b.x:b.xScale(b.xIndex),b.canvasX=b.x*b.model.canvasPixelRatio}),l(J,b),J.filter(function(b){return 0!==Math.abs(a.xIndex-b.xIndex)}).attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"}),s.select(this).attr("transform","translate("+a.x+", 0)"),J.each(function(c,d,e){e===a.parent.key&&(b.dimensions[d]=c)}),b.contextLayer&&b.contextLayer.render(b.panels,!1,!i(b)),b.focusLayer.render&&b.focusLayer.render(b.panels))}).on("dragend",function(a){var b=a.parent;if(B)return void("ending"===B&&(B=!1));a.x=a.xScale(a.xIndex),a.canvasX=a.x*a.model.canvasPixelRatio,l(J,b),s.select(this).attr("transform",function(a){return"translate("+a.x+", 0)"}),b.contextLayer&&b.contextLayer.render(b.panels,!1,!i(b)),b.focusLayer&&b.focusLayer.render(b.panels),b.pickLayer&&b.pickLayer.render(b.panels,!0),C=!0,g&&g.axesMoved&&g.axesMoved(b.key,b.dimensions.map(function(a){return a.crossfilterDimensionIndex}))})),J.exit().remove();var K=J.selectAll("."+q.cn.axisOverlays).data(v,u);K.enter().append("g").classed(q.cn.axisOverlays,!0),K.selectAll("."+q.cn.axis).remove();var L=K.selectAll("."+q.cn.axis).data(v,u);L.enter().append("g").classed(q.cn.axis,!0),L.each(function(a){var b=a.model.height/a.model.tickDistance,c=a.domainScale,d=c.domain();s.select(this).call(s.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(b,a.tickFormat).tickValues(a.ordinal?d:null).tickFormat(a.ordinal?function(a){return a}:null).scale(c)),t.font(L.selectAll("text"),a.model.tickFont)}),L.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),L.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var M=K.selectAll("."+q.cn.axisHeading).data(v,u);M.enter().append("g").classed(q.cn.axisHeading,!0);var N=M.selectAll("."+q.cn.axisTitle).data(v,u);N.enter().append("text").classed(q.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto"),N.attr("transform","translate(0,"+-q.axisTitleOffset+")").text(function(a){return a.label}).each(function(a){t.font(N,a.model.labelFont)});var O=K.selectAll("."+q.cn.axisExtent).data(v,u);O.enter().append("g").classed(q.cn.axisExtent,!0);var P=O.selectAll("."+q.cn.axisExtentTop).data(v,u);P.enter().append("g").classed(q.cn.axisExtentTop,!0),P.attr("transform","translate(0,"+-q.axisExtentOffset+")");var Q=P.selectAll("."+q.cn.axisExtentTopText).data(v,u);Q.enter().append("text").classed(q.cn.axisExtentTopText,!0).call(o),Q.text(function(a){return x(a)(a.domainScale.domain().slice(-1)[0])}).each(function(a){t.font(Q,a.model.rangeFont)});var R=O.selectAll("."+q.cn.axisExtentBottom).data(v,u);R.enter().append("g").classed(q.cn.axisExtentBottom,!0),R.attr("transform",function(a){return"translate(0,"+(a.model.height+q.axisExtentOffset)+")"});var S=R.selectAll("."+q.cn.axisExtentBottomText).data(v,u);S.enter().append("text").classed(q.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(o),S.text(function(a){return x(a)(a.domainScale.domain()[0])}).each(function(a){t.font(S,a.model.rangeFont)});var T=K.selectAll("."+q.cn.axisBrush).data(v,u),U=T.enter().append("g").classed(q.cn.axisBrush,!0);T.each(function(a){a.brush||(a.brush=s.svg.brush().y(a.unitScale).on("brushstart",y).on("brush",z).on("brushend",A),0===a.filter[0]&&1===a.filter[1]||a.brush.extent(a.filter),s.select(this).call(a.brush))}),U.selectAll("rect").attr("x",-q.bar.capturewidth/2).attr("width",q.bar.capturewidth),U.selectAll("rect.extent").attr("fill","url(#"+q.id.filterBarPattern+")").style("cursor","ns-resize").filter(function(a){return 0===a.filter[0]&&1===a.filter[1]}).attr("y",-100),U.selectAll(".resize rect").attr("height",q.bar.handleheight).attr("opacity",0).style("visibility","visible"),U.selectAll(".resize.n rect").style("cursor","n-resize").attr("y",q.bar.handleoverlap-q.bar.handleheight),U.selectAll(".resize.s rect").style("cursor","s-resize").attr("y",q.bar.handleoverlap);var V=!1,W=!1;return F}},{"../../components/drawing":643,"../../lib":743,"../../lib/gup":740,"./constants":1035,"./lines":1038,d3:128}],1040:[function(a,b,c){(function(c){"use strict";var d=a("./parcoords"),e=a("regl");b.exports=function(a,b){var f=a._fullLayout,g=f._toppaper,h=f._paperdiv,i=f._glcontainer;f._glcanvas.each(function(b){b.regl||(b.regl=e({canvas:this,attributes:{antialias:!b.pick,preserveDrawingBuffer:!0},pixelRatio:a._context.plotGlPixelRatio||c.devicePixelRatio}))});var j={},k={},l=f._size;b.forEach(function(b,c){j[c]=a.data[c].dimensions,k[c]=a.data[c].dimensions.slice()});var m=function(b,c,d){var e=k[b][c],f=e.constraintrange;f&&2===f.length||(f=e.constraintrange=[]),f[0]=d[0],f[1]=d[1],a.emit("plotly_restyle")},n=function(b){a.emit("plotly_hover",b)},o=function(b){a.emit("plotly_unhover",b)},p=function(b,c){function d(a){return!("visible"in a)||a.visible}function e(a,b,c){var d=b.indexOf(c),e=a.indexOf(d);return-1===e&&(e+=b.length),e}var f=function(a){return function(b,d){return e(c,a,b)-e(c,a,d)}}(k[b].filter(d));j[b].sort(f),k[b].filter(function(a){return!d(a)}).sort(function(a){return k[b].indexOf(a)}).forEach(function(a){j[b].splice(j[b].indexOf(a),1),j[b].splice(k[b].indexOf(a),0,a)}),a.emit("plotly_restyle")};d(h,g,i,b,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:m,hover:n,unhover:o,axesMoved:p})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./parcoords":1039,regl:506}],1041:[function(a,b,c){"use strict";var d=a("../../components/color/attributes"),e=a("../../plots/font_attributes"),f=a("../../plots/attributes"),g=a("../../plots/domain_attributes"),h=a("../../lib/extend").extendFlat,i=e({editType:"calc",colorEditType:"style"});b.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:d.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:h({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:h({},i,{}),insidetextfont:h({},i,{}),outsidetextfont:h({},i,{}),domain:g({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}},{"../../components/color/attributes":617,"../../lib/extend":732,"../../plots/attributes":787,"../../plots/domain_attributes":815,"../../plots/font_attributes":816}],1042:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].trace;f._module===b&&!0===f.visible&&c.push(e)}return c}var e=a("../../registry");c.name="pie",c.plot=function(a){var b=e.getModule("pie"),c=d(a.calcdata,b);c.length&&b.plot(a,c)},c.clean=function(a,b,c,d){var e=d._has&&d._has("pie"),f=b._has&&b._has("pie");e&&!f&&d._pielayer.selectAll("g.trace").remove()}},{"../../registry":873}],1043:[function(a,b,c){"use strict";function d(a,b){if(!j){var c=h.defaults;j=e(c)}var d=b||j;return d[a%d.length]}function e(a){var b,c=a.slice();for(b=0;b<a.length;b++)c.push(g(a[b]).lighten(20).toHexString());for(b=0;b<a.length;b++)c.push(g(a[b]).darken(20).toHexString());return c}var f=a("fast-isnumeric"),g=a("tinycolor2"),h=a("../../components/color"),i=a("./helpers");b.exports=function(a,b){function c(a,b){return!!a&&(a=g(a),!!a.isValid()&&(a=h.addOpacity(a,a.getAlpha()),v[b]||(v[b]=a),a))}var j,k,l,m,n,o=b.values,p=Array.isArray(o)&&o.length,q=b.labels,r=b.marker.colors,s=[],t=a._fullLayout,u=t.colorway,v=t._piecolormap,w={},x=0,y=t.hiddenlabels||[];if(t._piecolorway||u===h.defaults||(t._piecolorway=e(u)),b.dlabel)for(q=new Array(o.length),j=0;j<o.length;j++)q[j]=String(b.label0+j*b.dlabel);var z=(p?o:q).length;for(j=0;j<z;j++){if(p){if(k=o[j],!f(k))continue;if((k=+k)<0)continue}else k=1;l=q[j],void 0!==l&&""!==l||(l=j),l=String(l);var A=w[l];void 0===A?(w[l]=s.length,m=-1!==y.indexOf(l),m||(x+=k),s.push({v:k,label:l,color:c(r[j]),i:j,pts:[j],hidden:m})):(n=s[A],n.v+=k,n.pts.push(j),n.hidden||(x+=k),!1===n.color&&r[j]&&(n.color=c(r[j],l)))}for(b.sort&&s.sort(function(a,b){return b.v-a.v}),j=0;j<s.length;j++)n=s[j],!1===n.color&&(v[n.label]?n.color=v[n.label]:(v[n.label]=n.color=d(t._piedefaultcolorcount,t._piecolorway),t._piedefaultcolorcount++));if(s[0]&&(s[0].vTotal=x),b.textinfo&&"none"!==b.textinfo){var B,C=-1!==b.textinfo.indexOf("label"),D=-1!==b.textinfo.indexOf("text"),E=-1!==b.textinfo.indexOf("value"),F=-1!==b.textinfo.indexOf("percent"),G=t.separators;for(j=0;j<s.length;j++){if(n=s[j],B=C?[n.label]:[],D){var H=i.getFirstFilled(b.text,n.pts);H&&B.push(H)}E&&B.push(i.formatPieValue(n.v,G)),F&&B.push(i.formatPiePercent(n.v/x,G)),n.text=B.join("<br>")}}return s};var j},{"../../components/color":618,"./helpers":1046,"fast-isnumeric":140,tinycolor2:546}],1044:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c,f){function g(c,f){return d.coerce(a,b,e,c,f)}var h=d.coerceFont,i=g("values"),j=g("labels");if(!Array.isArray(j)){if(!Array.isArray(i)||!i.length)return void(b.visible=!1);g("label0"),g("dlabel")}g("marker.line.width")&&g("marker.line.color");var k=g("marker.colors");Array.isArray(k)||(b.marker.colors=[]),g("scalegroup");var l=g("text"),m=g("textinfo",Array.isArray(l)?"text+percent":"percent");if(g("hovertext"),m&&"none"!==m){var n=g("textposition"),o=Array.isArray(n)||"auto"===n,p=o||"inside"===n,q=o||"outside"===n;if(p||q){var r=h(g,"textfont",f.font);p&&h(g,"insidetextfont",r),q&&h(g,"outsidetextfont",r)}}g("domain.x"),g("domain.y"),g("hole"),g("sort"),g("direction"),g("rotation"),g("pull")}},{"../../lib":743,"./attributes":1041}],1045:[function(a,b,c){"use strict";var d=a("../../components/fx/helpers").appendArrayMultiPointValues;b.exports=function(a,b){var c={curveNumber:b.index,pointNumbers:a.pts,data:b._input,fullData:b,label:a.label,color:a.color,value:a.v,v:a.v};return 1===a.pts.length&&(c.pointNumber=c.i=a.pts[0]),d(c,b,a.pts),c}},{"../../components/fx/helpers":657}],1046:[function(a,b,c){"use strict";var d=a("../../lib");c.formatPiePercent=function(a,b){var c=(100*a).toPrecision(3);return-1!==c.lastIndexOf(".")&&(c=c.replace(/[.]?0+$/,"")),d.numSeparate(c,b)+"%"},c.formatPieValue=function(a,b){var c=a.toPrecision(10);return-1!==c.lastIndexOf(".")&&(c=c.replace(/[.]?0+$/,"")),d.numSeparate(c,b)},c.getFirstFilled=function(a,b){if(Array.isArray(a))for(var c=0;c<b.length;c++){var d=a[b[c]];if(d||0===d)return d}},c.castOption=function(a,b){return Array.isArray(a)?c.getFirstFilled(a,b):a||void 0}},{"../../lib":743}],1047:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.supplyLayoutDefaults=a("./layout_defaults"),d.layoutAttributes=a("./layout_attributes"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.styleOne=a("./style_one"),d.moduleType="trace",d.name="pie",d.basePlotModule=a("./base_plot"),d.categories=["pie","showLegend"],d.meta={},b.exports=d},{"./attributes":1041,"./base_plot":1042,"./calc":1043,"./defaults":1044,"./layout_attributes":1048,"./layout_defaults":1049,"./plot":1050,"./style":1051,"./style_one":1052}],1048:[function(a,b,c){"use strict";b.exports={hiddenlabels:{valType:"data_array",editType:"calc"}}},{}],1049:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes");b.exports=function(a,b){!function(c,f){d.coerce(a,b,e,c,f)}("hiddenlabels")}},{"../../lib":743,"./layout_attributes":1048}],1050:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.sqrt(a.width*a.width+a.height*a.height),f=a.width/a.height,g=Math.PI*Math.min(b.v/c.vTotal,.5),h=1-c.trace.hole,i=e(b,c),j={scale:i*c.r*2/d,rCenter:1-i,rotate:0};if(j.scale>=1)return j;var k=f+1/(2*Math.tan(g)),l=c.r*Math.min(1/(Math.sqrt(k*k+.5)+k),h/(Math.sqrt(f*f+h/2)+f)),m={scale:2*l/a.height,rCenter:Math.cos(l/c.r)-l*f/c.r,rotate:(180/Math.PI*b.midangle+720)%180-90},n=1/f,o=n+1/(2*Math.tan(g)),p=c.r*Math.min(1/(Math.sqrt(o*o+.5)+o),h/(Math.sqrt(n*n+h/2)+n)),q={scale:2*p/a.width,rCenter:Math.cos(p/c.r)-p/f/c.r,rotate:(180/Math.PI*b.midangle+810)%180-90},r=q.scale>m.scale?q:m;return j.scale<1&&r.scale>j.scale?r:j}function e(a,b){if(a.v===b.vTotal&&!b.trace.hole)return 1;var c=Math.PI*Math.min(a.v/b.vTotal,.5);return Math.min(1/(1+1/Math.sin(c)),(1-b.trace.hole)/2)}function f(a,b){var c=b.pxmid[0],d=b.pxmid[1],e=a.width/2,f=a.height/2;return c<0&&(e*=-1),d<0&&(f*=-1),{scale:1,rCenter:1,rotate:0,x:e+Math.abs(f)*(e>0?1:-1)/2,y:f/(1+c*c/(d*d)),outside:!0}}function g(a,b){function c(a,b){return a.pxmid[1]-b.pxmid[1]}function d(a,b){return b.pxmid[1]-a.pxmid[1]}var e,f,g,h,i,j,k,l,m,n,p,q,r;for(f=0;f<2;f++)for(g=f?c:d,i=f?Math.max:Math.min,k=f?1:-1,e=0;e<2;e++){for(h=e?Math.max:Math.min,j=e?1:-1,l=a[f][e],l.sort(g),m=a[1-f][e],n=m.concat(l),q=[],p=0;p<l.length;p++)void 0!==l[p].yLabelMid&&q.push(l[p]);for(r=!1,p=0;f&&p<m.length;p++)if(void 0!==m[p].yLabelMid){r=m[p];break}for(p=0;p<q.length;p++){var s=p&&q[p-1];r&&!p&&(s=r),function(a,c){c||(c={});var d,e,g,l,m,p,q=c.labelExtraY+(f?c.yLabelMax:c.yLabelMin),r=f?a.yLabelMin:a.yLabelMax,s=f?a.yLabelMax:a.yLabelMin,t=a.cyFinal+i(a.px0[1],a.px1[1]),u=q-r;if(u*k>0&&(a.labelExtraY=u),Array.isArray(b.pull))for(e=0;e<n.length;e++)(g=n[e])===a||(o.castOption(b.pull,a.pts)||0)>=(o.castOption(b.pull,g.pts)||0)||((a.pxmid[1]-g.pxmid[1])*k>0?(l=g.cyFinal+i(g.px0[1],g.px1[1]),(u=l-r-a.labelExtraY)*k>0&&(a.labelExtraY+=u)):(s+a.labelExtraY-t)*k>0&&(d=3*j*Math.abs(e-n.indexOf(a)),m=g.cxFinal+h(g.px0[0],g.px1[0]),(p=m+d-(a.cxFinal+a.pxmid[0])-a.labelExtraX)*j>0&&(a.labelExtraX+=p)))}(q[p],s)}}}function h(a,b){var c,d,e,f,g,h,i,j,k,l=[];for(e=0;e<a.length;e++){if(g=a[e][0],h=g.trace,c=b.w*(h.domain.x[1]-h.domain.x[0]),d=b.h*(h.domain.y[1]-h.domain.y[0]),i=h.pull,Array.isArray(i))for(i=0,f=0;f<h.pull.length;f++)h.pull[f]>i&&(i=h.pull[f]);g.r=Math.min(c,d)/(2+2*i),g.cx=b.l+b.w*(h.domain.x[1]+h.domain.x[0])/2,g.cy=b.t+b.h*(2-h.domain.y[1]-h.domain.y[0])/2,h.scalegroup&&-1===l.indexOf(h.scalegroup)&&l.push(h.scalegroup)}for(f=0;f<l.length;f++){for(k=1/0,j=l[f],e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===j&&(k=Math.min(k,g.r*g.r/g.vTotal));for(e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===j&&(g.r=Math.sqrt(k*g.vTotal))}}function i(a){function b(a){return[f.r*Math.sin(a),-f.r*Math.cos(a)]}var c,d,e,f=a[0],g=f.trace,h=g.rotation*Math.PI/180,i=2*Math.PI/f.vTotal,j="px0",k="px1";if("counterclockwise"===g.direction){for(c=0;c<a.length&&a[c].hidden;c++);if(c===a.length)return;h+=i*a[c].v,i*=-1,j="px1",k="px0"}for(e=b(h),c=0;c<a.length;c++)d=a[c],d.hidden||(d[j]=e,h+=i*d.v/2,d.pxmid=b(h),d.midangle=h,h+=i*d.v/2,e=b(h),d[k]=e,d.largeArc=d.v>f.vTotal/2?1:0)}var j=a("d3"),k=a("../../components/fx"),l=a("../../components/color"),m=a("../../components/drawing"),n=a("../../lib/svg_text_utils"),o=a("./helpers"),p=a("./event_data");b.exports=function(a,b){var c=a._fullLayout;h(b,c._size);var q=c._pielayer.selectAll("g.trace").data(b);q.enter().append("g").attr({"stroke-linejoin":"round",class:"trace"}),q.exit().remove(),q.order(),q.each(function(b){var h=j.select(this),q=b[0],r=q.trace;i(b),h.each(function(){var h=j.select(this).selectAll("g.slice").data(b);h.enter().append("g").classed("slice",!0),h.exit().remove();var i=[[[],[]],[[],[]]],s=!1;h.each(function(b){function g(){var d=a._fullLayout,f=a._fullData[r.index];if(!a._dragging&&!1!==d.hovermode){var g=f.hoverinfo;if(Array.isArray(g)&&(g=k.castHoverinfo({hoverinfo:[o.castOption(g,b.pts)],_module:r._module},d,0)),"all"===g&&(g="label+text+value+percent+name"),"none"!==g&&"skip"!==g&&g){var h=e(b,q),i=u+b.pxmid[0]*(1-h),l=v+b.pxmid[1]*(1-h),m=c.separators,n=[];if(-1!==g.indexOf("label")&&n.push(b.label),-1!==g.indexOf("text")){var s=o.castOption(f.hovertext||f.text,b.pts);s&&n.push(s)}-1!==g.indexOf("value")&&n.push(o.formatPieValue(b.v,m)),-1!==g.indexOf("percent")&&n.push(o.formatPiePercent(b.v/q.vTotal,m));var t=r.hoverlabel,w=t.font;k.loneHover({x0:i-h*q.r,x1:i+h*q.r,y:l,text:n.join("<br>"),name:-1!==g.indexOf("name")?f.name:void 0,idealAlign:b.pxmid[0]<0?"left":"right",color:o.castOption(t.bgcolor,b.pts)||b.color,borderColor:o.castOption(t.bordercolor,b.pts),fontFamily:o.castOption(w.family,b.pts),fontSize:o.castOption(w.size,b.pts),fontColor:o.castOption(w.color,b.pts)},{container:d._hoverlayer.node(),outerContainer:d._paper.node(),gd:a}),y=!0}a.emit("plotly_hover",{points:[p(b,f)],event:j.event}),z=!0}}function h(c){var d=a._fullLayout,e=a._fullData[r.index];z&&(c.originalEvent=j.event,a.emit("plotly_unhover",{points:[p(b,e)],event:j.event}),z=!1),y&&(k.loneUnhover(d._hoverlayer.node()),y=!1)}function l(){var c=a._fullLayout,d=a._fullData[r.index];a._dragging||!1===c.hovermode||(a._hoverdata=[p(b,d)],k.click(a,j.event))}function t(a,c,d,e){return"a"+e*q.r+","+e*q.r+" 0 "+b.largeArc+(d?" 1 ":" 0 ")+e*(c[0]-a[0])+","+e*(c[1]-a[1])}if(b.hidden)return void j.select(this).selectAll("path,g").remove();b.pointNumber=b.i,b.curveNumber=r.index,i[b.pxmid[1]<0?0:1][b.pxmid[0]<0?0:1].push(b);var u=q.cx,v=q.cy,w=j.select(this),x=w.selectAll("path.surface").data([b]),y=!1,z=!1;if(x.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),w.select("path.textline").remove(),w.on("mouseover",g).on("mouseout",h).on("click",l),r.pull){var A=+o.castOption(r.pull,b.pts)||0;A>0&&(u+=A*b.pxmid[0],v+=A*b.pxmid[1])}b.cxFinal=u,b.cyFinal=v;var B=r.hole;if(b.v===q.vTotal){var C="M"+(u+b.px0[0])+","+(v+b.px0[1])+t(b.px0,b.pxmid,!0,1)+t(b.pxmid,b.px0,!0,1)+"Z";B?x.attr("d","M"+(u+B*b.px0[0])+","+(v+B*b.px0[1])+t(b.px0,b.pxmid,!1,B)+t(b.pxmid,b.px0,!1,B)+"Z"+C):x.attr("d",C)}else{var D=t(b.px0,b.px1,!0,1);if(B){var E=1-B;x.attr("d","M"+(u+B*b.px1[0])+","+(v+B*b.px1[1])+t(b.px1,b.px0,!1,B)+"l"+E*b.px0[0]+","+E*b.px0[1]+D+"Z")}else x.attr("d","M"+u+","+v+"l"+b.px0[0]+","+b.px0[1]+D+"Z")}var F=o.castOption(r.textposition,b.pts),G=w.selectAll("g.slicetext").data(b.text&&"none"!==F?[0]:[]);G.enter().append("g").classed("slicetext",!0),G.exit().remove(),G.each(function(){var c=j.select(this).selectAll("text").data([0]);c.enter().append("text").attr("data-notex",1),c.exit().remove(),c.text(b.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(m.font,"outside"===F?r.outsidetextfont:r.insidetextfont).call(n.convertToTspans,a);var e,g=m.bBox(c.node());"outside"===F?e=f(g,b):(e=d(g,b,q),"auto"===F&&e.scale<1&&(c.call(m.font,r.outsidetextfont),r.outsidetextfont.family===r.insidetextfont.family&&r.outsidetextfont.size===r.insidetextfont.size||(g=m.bBox(c.node())),e=f(g,b)));var h=u+b.pxmid[0]*e.rCenter+(e.x||0),i=v+b.pxmid[1]*e.rCenter+(e.y||0);e.outside&&(b.yLabelMin=i-g.height/2,b.yLabelMid=i,b.yLabelMax=i+g.height/2,b.labelExtraX=0,b.labelExtraY=0,s=!0),c.attr("transform","translate("+h+","+i+")"+(e.scale<1?"scale("+e.scale+")":"")+(e.rotate?"rotate("+e.rotate+")":"")+"translate("+-(g.left+g.right)/2+","+-(g.top+g.bottom)/2+")")})}),s&&g(i,r),h.each(function(a){if(a.labelExtraX||a.labelExtraY){var b=j.select(this),c=b.select("g.slicetext text");c.attr("transform","translate("+a.labelExtraX+","+a.labelExtraY+")"+c.attr("transform"));var d=a.cxFinal+a.pxmid[0],e=a.cyFinal+a.pxmid[1],f="M"+d+","+e,g=(a.yLabelMax-a.yLabelMin)*(a.pxmid[0]<0?-1:1)/4;if(a.labelExtraX){var h=a.labelExtraX*a.pxmid[1]/a.pxmid[0],i=a.yLabelMid+a.labelExtraY-(a.cyFinal+a.pxmid[1]);Math.abs(h)>Math.abs(i)?f+="l"+i*a.pxmid[0]/a.pxmid[1]+","+i+"H"+(d+a.labelExtraX+g):f+="l"+a.labelExtraX+","+h+"v"+(i-h)+"h"+g}else f+="V"+(a.yLabelMid+a.labelExtraY)+"h"+g;b.append("path").classed("textline",!0).call(l.stroke,r.outsidetextfont.color).attr({"stroke-width":Math.min(2,r.outsidetextfont.size/8),d:f,fill:"none"})}})})}),setTimeout(function(){q.selectAll("tspan").each(function(){var a=j.select(this);a.attr("dy")&&a.attr("dy",a.attr("dy"))})},0)}},{"../../components/color":618,"../../components/drawing":643,"../../components/fx":660,"../../lib/svg_text_utils":766,"./event_data":1045,"./helpers":1046,d3:128}],1051:[function(a,b,c){"use strict";var d=a("d3"),e=a("./style_one");b.exports=function(a){a._fullLayout._pielayer.selectAll(".trace").each(function(a){var b=a[0],c=b.trace,f=d.select(this);f.style({opacity:c.opacity}),f.selectAll("path.surface").each(function(a){d.select(this).call(e,a,c)})})}},{"./style_one":1052,d3:128}],1052:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("./helpers").castOption;b.exports=function(a,b,c){var f=c.marker.line,g=e(f.color,b.pts)||d.defaultLine,h=e(f.width,b.pts)||0;a.style({"stroke-width":h}).call(d.fill,b.color).call(d.stroke,g)}},{"../../components/color":618,"./helpers":1046}],1053:[function(a,b,c){"use strict";var d=a("../scatter/attributes");b.exports={x:d.x,y:d.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:d.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"}}},{"../scatter/attributes":1066}],1054:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=f(a.glplot,this.pointcloudOptions),this.pointcloud._trace=this}function e(a,b){var c=new d(a,b.uid);return c.update(b),c}var f=a("gl-pointcloud2d"),g=a("../../lib/str2rgbarray"),h=a("../scatter/get_trace_color"),i=["xaxis","yaxis"],j=d.prototype;j.handlePick=function(a){var b=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*b],this.pickXYData[2*b+1]]:[this.pickXData[b],this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}},j.update=function(a){this.index=a.index,this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(a),this.color=h(a,{})},j.updateFast=function(a){var b,c,d,e,f,h,i=this.xData=this.pickXData=a.x,j=this.yData=this.pickYData=a.y,k=this.pickXYData=a.xy,l=a.xbounds&&a.ybounds,m=a.indices,n=this.bounds;if(k){if(d=k,b=k.length>>>1,l)n[0]=a.xbounds[0],n[2]=a.xbounds[1],n[1]=a.ybounds[0],n[3]=a.ybounds[1];else for(h=0;h<b;h++)e=d[2*h],f=d[2*h+1],e<n[0]&&(n[0]=e),e>n[2]&&(n[2]=e),f<n[1]&&(n[1]=f),f>n[3]&&(n[3]=f);if(m)c=m;else for(c=new Int32Array(b),h=0;h<b;h++)c[h]=h}else for(b=i.length,d=new Float32Array(2*b),c=new Int32Array(b),h=0;h<b;h++)e=i[h],f=j[h],c[h]=h,d[2*h]=e,d[2*h+1]=f,e<n[0]&&(n[0]=e),e>n[2]&&(n[2]=e),f<n[1]&&(n[1]=f),f>n[3]&&(n[3]=f);this.idToIndex=c,this.pointcloudOptions.idToIndex=c,this.pointcloudOptions.positions=d;var o=g(a.marker.color),p=g(a.marker.border.color),q=a.opacity*a.marker.opacity;o[3]*=q,this.pointcloudOptions.color=o;var r=a.marker.blend;if(null===r){r=i.length<100||j.length<100}this.pointcloudOptions.blend=r,p[3]*=q,this.pointcloudOptions.borderColor=p;var s=a.marker.sizemin,t=Math.max(a.marker.sizemax,a.marker.sizemin);this.pointcloudOptions.sizeMin=s,this.pointcloudOptions.sizeMax=t,this.pointcloudOptions.areaRatio=a.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions),this.expandAxesFast(n,t/2)},j.expandAxesFast=function(a,b){for(var c,d,e,f=b||.5,g=0;g<2;g++)c=this.scene[i[g]],d=c._min,d||(d=[]),d.push({val:a[g],pad:f}),e=c._max,e||(e=[]),e.push({val:a[g+2],pad:f})},j.dispose=function(){this.pointcloud.dispose()},b.exports=e},{"../../lib/str2rgbarray":765,"../scatter/get_trace_color":1076,"gl-pointcloud2d":235}],1055:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c){function f(c,f){return d.coerce(a,b,e,c,f)}f("x"),f("y"),f("xbounds"),f("ybounds"),a.xy&&a.xy instanceof Float32Array&&(b.xy=a.xy),a.indices&&a.indices instanceof Int32Array&&(b.indices=a.indices),f("text"),f("marker.color",c),f("marker.opacity"),f("marker.blend"),f("marker.sizemin"),f("marker.sizemax"),f("marker.border.color",c),f("marker.border.arearatio")}},{"../../lib":743,"./attributes":1053}],1056:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("../scatter3d/calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="pointcloud",d.basePlotModule=a("../../plots/gl2d"),d.categories=["gl","gl2d","showLegend"],d.meta={},b.exports=d},{"../../plots/gl2d":829,"../scatter3d/calc":1092,"./attributes":1053,"./convert":1054,"./defaults":1055}],1057:[function(a,b,c){"use strict";var d=a("../../plots/font_attributes"),e=a("../../plots/attributes"),f=a("../../components/color/attributes"),g=a("../../components/fx/attributes"),h=a("../../plots/domain_attributes"),i=a("../../lib/extend").extendFlat,j=a("../../plot_api/edit_types").overrideAll;b.exports=j({
hoverinfo:i({},e.hoverinfo,{flags:["label","text","value","percent","name"]}),hoverlabel:g.hoverlabel,domain:h({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:d({}),node:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:f.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20}},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:f.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]}}},"calc","nested")},{"../../components/color/attributes":617,"../../components/fx/attributes":652,"../../lib/extend":732,"../../plot_api/edit_types":773,"../../plots/attributes":787,"../../plots/domain_attributes":815,"../../plots/font_attributes":816}],1058:[function(a,b,c){"use strict";var d=a("../../plot_api/edit_types").overrideAll,e=a("../../plots/get_data").getModuleCalcData,f=a("./plot"),g=a("../../components/fx/layout_attributes");c.name="sankey",c.baseLayoutAttrOverrides=d({hoverlabel:g.hoverlabel},"plot","nested"),c.plot=function(a){var b=e(a.calcdata,"sankey");f(a,b)},c.clean=function(a,b,c,d){var e=d._has&&d._has("sankey"),f=b._has&&b._has("sankey");e&&!f&&d._paperdiv.selectAll(".sankey").remove()}},{"../../components/fx/layout_attributes":661,"../../plot_api/edit_types":773,"../../plots/get_data":826,"./plot":1063}],1059:[function(a,b,c){"use strict";function d(a,b,c){for(var d=a.map(function(){return[]}),f=0;f<Math.min(b.length,c.length);f++){if(b[f]===c[f])return!0;d[b[f]].push(c[f])}return e(d).components.some(function(a){return a.length>1})}var e=a("strongly-connected-components"),f=a("../../lib"),g=a("../../lib/gup").wrap;b.exports=function(a,b){return d(b.node.label,b.link.source,b.link.target)&&(f.error("Circularity is present in the Sankey data. Removing all nodes and links."),b.link.label=[],b.link.source=[],b.link.target=[],b.link.value=[],b.link.color=[],b.node.label=[],b.node.color=[]),g({link:b.link,node:b.node})}},{"../../lib":743,"../../lib/gup":740,"strongly-connected-components":537}],1060:[function(a,b,c){"use strict";b.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"cubic-in-out",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1061:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes"),f=a("../../components/color/attributes").defaults,g=a("../../components/color"),h=a("tinycolor2");b.exports=function(a,b,c,i){function j(c,f){return d.coerce(a,b,e,c,f)}j("node.label"),j("node.pad"),j("node.thickness"),j("node.line.color"),j("node.line.width");var k=function(a){return f[a%f.length]};j("node.color",b.node.label.map(function(a,b){return g.addOpacity(k(b),.8)})),j("link.label"),j("link.source"),j("link.target"),j("link.value"),j("link.line.color"),j("link.line.width"),j("link.color",b.link.value.map(function(){return h(i.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)"})),j("domain.x"),j("domain.y"),j("orientation"),j("valueformat"),j("valuesuffix"),j("arrangement"),d.coerceFont(j,"textfont",d.extendFlat({},i.font));var l=function(a,c){return-1===b.link.source.indexOf(c)&&-1===b.link.target.indexOf(c)};b.node.label.some(l)&&d.warn("Some of the nodes are neither sources nor targets, they will not be displayed.")}},{"../../components/color":618,"../../components/color/attributes":617,"../../lib":743,"./attributes":1057,tinycolor2:546}],1062:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.moduleType="trace",d.name="sankey",d.basePlotModule=a("./base_plot"),d.categories=["noOpacity"],d.meta={},b.exports=d},{"./attributes":1057,"./base_plot":1058,"./calc":1059,"./defaults":1061,"./plot":1063}],1063:[function(a,b,c){"use strict";function d(a){return""!==a}function e(a,b){return a.filter(function(a){return a.key===b.traceId})}function f(a,b){o.select(a).select("path").style("fill-opacity",b),o.select(a).select("rect").style("fill-opacity",b)}function g(a){o.select(a).select("text.name").style("fill","black")}function h(a){return function(b){return-1!==a.node.sourceLinks.indexOf(b.link)||-1!==a.node.targetLinks.indexOf(b.link)}}function i(a){return function(b){return-1!==b.node.sourceLinks.indexOf(a.link)||-1!==b.node.targetLinks.indexOf(a.link)}}function j(a,b,c){b&&c&&e(c,b).selectAll("."+t.sankeyLink).filter(h(b)).call(l.bind(0,b,c,!1))}function k(a,b,c){b&&c&&e(c,b).selectAll("."+t.sankeyLink).filter(h(b)).call(m.bind(0,b,c,!1))}function l(a,b,c,d){var f=d.datum().link.label;d.style("fill-opacity",.4),f&&e(b,a).selectAll("."+t.sankeyLink).filter(function(a){return a.link.label===f}).style("fill-opacity",.4),c&&e(b,a).selectAll("."+t.sankeyNode).filter(i(a)).call(j)}function m(a,b,c,d){var f=d.datum().link.label;d.style("fill-opacity",function(a){return a.tinyColorAlpha}),f&&e(b,a).selectAll("."+t.sankeyLink).filter(function(a){return a.link.label===f}).style("fill-opacity",function(a){return a.tinyColorAlpha}),c&&e(b,a).selectAll(t.sankeyNode).filter(i(a)).call(k)}function n(a,b){var c=a.hoverlabel||{},d=s.nestedProperty(c,b).get();return!Array.isArray(d)&&d}var o=a("d3"),p=a("./render"),q=a("../../components/fx"),r=a("../../components/color"),s=a("../../lib"),t=a("./constants").cn,u=s._;b.exports=function(a,b){var c=a._fullLayout,e=c._paper,h=c._size,i=function(b,c){var d=c.link;d.originalEvent=o.event,a._hoverdata=[d],q.click(a,{target:!0})},s=function(b,c,d){o.select(b).call(l.bind(0,c,d,!0)),a.emit("plotly_hover",{event:o.event,points:[c.link]})},v=u(a,"source:")+" ",w=u(a,"target:")+" ",x=u(a,"incoming flow count:")+" ",y=u(a,"outgoing flow count:")+" ",z=function(b,e){var h=e.link.trace,i=a._fullLayout._paperdiv.node().getBoundingClientRect(),j=b.getBoundingClientRect(),k=j.left+j.width/2,l=j.top+j.height/2,m=q.loneHover({x:k-i.left,y:l-i.top,name:o.format(e.valueFormat)(e.link.value)+e.valueSuffix,text:[e.link.label||"",v+e.link.source.label,w+e.link.target.label].filter(d).join("<br>"),color:n(h,"bgcolor")||r.addOpacity(e.tinyColorHue,1),borderColor:n(h,"bordercolor"),fontFamily:n(h,"font.family"),fontSize:n(h,"font.size"),fontColor:n(h,"font.color"),idealAlign:o.event.x<k?"right":"left"},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:a});f(m,.65),g(m)},A=function(b,d,e){o.select(b).call(m.bind(0,d,e,!0)),a.emit("plotly_unhover",{event:o.event,points:[d.link]}),q.loneUnhover(c._hoverlayer.node())},B=function(b,c,d){var e=c.node;e.originalEvent=o.event,a._hoverdata=[e],o.select(b).call(k,c,d),q.click(a,{target:!0})},C=function(b,c,d){o.select(b).call(j,c,d),a.emit("plotly_hover",{event:o.event,points:[c.node]})},D=function(b,e){var h=e.node.trace,i=o.select(b).select("."+t.nodeRect),j=a._fullLayout._paperdiv.node().getBoundingClientRect(),k=i.node().getBoundingClientRect(),l=k.left-2-j.left,m=k.right+2-j.left,p=k.top+k.height/4-j.top,r=q.loneHover({x0:l,x1:m,y:p,name:o.format(e.valueFormat)(e.node.value)+e.valueSuffix,text:[e.node.label,x+e.node.targetLinks.length,y+e.node.sourceLinks.length].filter(d).join("<br>"),color:n(h,"bgcolor")||e.tinyColorHue,borderColor:n(h,"bordercolor"),fontFamily:n(h,"font.family"),fontSize:n(h,"font.size"),fontColor:n(h,"font.color"),idealAlign:"left"},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:a});f(r,.85),g(r)},E=function(b,d,e){o.select(b).call(k,d,e),a.emit("plotly_unhover",{event:o.event,points:[d.node]}),q.loneUnhover(c._hoverlayer.node())};p(e,b,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:s,follow:z,unhover:A,select:i},nodeEvents:{hover:C,follow:D,unhover:E,select:B}})}},{"../../components/color":618,"../../components/fx":660,"../../lib":743,"./constants":1060,"./render":1064,d3:128}],1064:[function(a,b,c){"use strict";function d(a){var b,c=[];for(b=0;b<a.length;b++)a[b].originalX=a[b].x,a[b].originalY=a[b].y,-1===c.indexOf(a[b].x)&&c.push(a[b].x);for(c.sort(function(a,b){return a-b}),b=0;b<a.length;b++)a[b].originalLayerIndex=c.indexOf(a[b].originalX),a[b].originalLayer=a[b].originalLayerIndex/(c.length-1)}function e(a){a.lastDraggedX=a.x,a.lastDraggedY=a.y}function f(a){return function(b){return b.node.originalX===a.node.originalX}}function g(a){for(var b=0;b<a.length;b++)a[b].y=a[b].y+a[b].dy/2}function h(a){for(var b=0;b<a.length;b++)a[b].y=a[b].y-a[b].dy/2}function i(a,b,c){for(var d,e=N(b).trace,f=e.domain,h=e.node,i=e.link,j=e.arrangement,k="h"===e.orientation,l=e.node.pad,m=e.node.thickness,n=e.node.line.color,o=e.node.line.width,p=e.link.line.color,q=e.link.line.width,r=e.valueformat,s=e.valuesuffix,t=e.textfont,u=a.width*(f.x[1]-f.x[0]),v=a.height*(f.y[1]-f.y[0]),w=h.label.map(function(a,b){return{pointNumber:b,label:a,color:K.isArray(h.color)?h.color[b]:h.color}}),x=i.value.map(function(a,b){return{pointNumber:b,label:i.label[b],color:K.isArray(i.color)?i.color[b]:i.color,source:i.source[b],target:i.target[b],value:a}}),y=I().size(k?[u,v]:[v,u]).nodeWidth(m).nodePadding(l).nodes(w).links(x).layout(D.sankeyIterations),z=y.nodes(),A=0;A<z.length;A++)d=z[A],d.width=u,d.height=v;return g(w),{key:c,trace:e,guid:Math.floor(1e12*(1+Math.random())),horizontal:k,width:u,height:v,nodePad:l,nodeLineColor:n,nodeLineWidth:o,linkLineColor:p,linkLineWidth:q,valueFormat:r,valueSuffix:s,textFont:t,translateX:f.x[0]*u+a.margin.l,translateY:a.height-f.y[1]*a.height+a.margin.t,dragParallel:k?v:u,dragPerpendicular:k?u:v,nodes:w,links:x,arrangement:j,sankey:y,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function j(a,b,c){var d=F(c.color),e=c.source.label+"|"+c.target.label,f=a[e];a[e]=(f||0)+1;var g=e+"__"+a[e];return c.trace=b.trace,c.curveNumber=b.trace.index,{key:g,traceId:b.key,link:c,tinyColorHue:G.tinyRGB(d),tinyColorAlpha:d.getAlpha(),linkLineColor:b.linkLineColor,linkLineWidth:b.linkLineWidth,valueFormat:b.valueFormat,valueSuffix:b.valueSuffix,sankey:b.sankey,interactionState:b.interactionState}}function k(a,b,c){var d=F(c.color),e=D.nodePadAcross,f=b.nodePad/2,g=c.dx,h=Math.max(.5,c.dy),i=c.label,j=a[i];a[i]=(j||0)+1;var k=i+"__"+a[i];return c.trace=b.trace,c.curveNumber=b.trace.index,{key:k,traceId:b.key,node:c,nodePad:b.nodePad,nodeLineColor:b.nodeLineColor,nodeLineWidth:b.nodeLineWidth,textFont:b.textFont,size:b.horizontal?b.height:b.width,visibleWidth:Math.ceil(g),visibleHeight:h,zoneX:-e,zoneY:-f,zoneWidth:g+2*e,zoneHeight:h+2*f,labelY:b.horizontal?c.dy/2+1:c.dx/2+1,left:1===c.originalLayer,sizeAcross:b.width,forceLayouts:b.forceLayouts,horizontal:b.horizontal,darkBackground:d.getBrightness()<=128,tinyColorHue:G.tinyRGB(d),tinyColorAlpha:d.getAlpha(),valueFormat:b.valueFormat,valueSuffix:b.valueSuffix,sankey:b.sankey,arrangement:b.arrangement,uniqueNodeLabelPathId:[b.guid,b.key,k].join(" "),interactionState:b.interactionState}}function l(a){a.attr("transform",function(a){return"translate("+a.node.x.toFixed(3)+", "+(a.node.y-a.node.dy/2).toFixed(3)+")"})}function m(a){var b=a.sankey.nodes();h(b);var c=a.sankey.link()(a.link);return g(b),c}function n(a){a.call(l)}function o(a,b){a.call(n),b.attr("d",m)}function p(a){a.attr("width",function(a){return a.visibleWidth}).attr("height",function(a){return a.visibleHeight})}function q(a){return a.link.dy>1||a.linkLineWidth>0}function r(a){return"translate("+a.translateX+","+a.translateY+")"+(a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function s(a){return"translate("+(a.horizontal?0:a.labelY)+" "+(a.horizontal?a.labelY:0)+")"}function t(a){return E.svg.line()([[a.horizontal?a.left?-a.sizeAcross:a.visibleWidth+D.nodeTextOffsetHorizontal:D.nodeTextOffsetHorizontal,0],[a.horizontal?a.left?-D.nodeTextOffsetHorizontal:a.sizeAcross:a.visibleHeight-D.nodeTextOffsetHorizontal,0]])}function u(a){return a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function v(a){return a.horizontal?"scale(1 1)":"scale(-1 1)"}function w(a){return a.darkBackground&&!a.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function x(a){return a.horizontal&&a.left?"100%":"0%"}function y(a,b,c){a.on(".basic",null).on("mouseover.basic",function(a){a.interactionState.dragInProgress||(c.hover(this,a,b),a.interactionState.hovered=[this,a])}).on("mousemove.basic",function(a){a.interactionState.dragInProgress||(c.follow(this,a),a.interactionState.hovered=[this,a])}).on("mouseout.basic",function(a){a.interactionState.dragInProgress||(c.unhover(this,a,b),a.interactionState.hovered=!1)}).on("click.basic",function(a){a.interactionState.hovered&&(c.unhover(this,a,b),a.interactionState.hovered=!1),a.interactionState.dragInProgress||c.select(this,a,b)})}function z(a,b,c){var d=E.behavior.drag().origin(function(a){return a.node}).on("dragstart",function(d){if("fixed"!==d.arrangement&&(K.raiseToTop(this),d.interactionState.dragInProgress=d.node,e(d.node),d.interactionState.hovered&&(c.nodeEvents.unhover.apply(0,d.interactionState.hovered),d.interactionState.hovered=!1),"snap"===d.arrangement)){var f=d.traceId+"|"+Math.floor(d.node.originalX);d.forceLayouts[f]?d.forceLayouts[f].alpha(1):A(a,f,d),B(a,b,d,f)}}).on("drag",function(c){if("fixed"!==c.arrangement){var d=E.event.x,g=E.event.y;"snap"===c.arrangement?(c.node.x=d,c.node.y=g):("freeform"===c.arrangement&&(c.node.x=d),c.node.y=Math.max(c.node.dy/2,Math.min(c.size-c.node.dy/2,g))),e(c.node),"snap"!==c.arrangement&&(c.sankey.relayout(),o(a.filter(f(c)),b))}}).on("dragend",function(a){a.interactionState.dragInProgress=!1});a.on(".drag",null).call(d)}function A(a,b,c){var d=c.sankey.nodes().filter(function(a){return a.originalX===c.node.originalX});c.forceLayouts[b]=J.forceSimulation(d).alphaDecay(0).force("collide",J.forceCollide().radius(function(a){return a.dy/2+c.nodePad/2}).strength(1).iterations(D.forceIterations)).force("constrain",C(a,b,d,c)).stop()}function B(a,b,c,d){window.requestAnimationFrame(function e(){for(var g=0;g<D.forceTicksPerFrame;g++)c.forceLayouts[d].tick();c.sankey.relayout(),o(a.filter(f(c)),b),c.forceLayouts[d].alpha()>0&&window.requestAnimationFrame(e)})}function C(a,b,c,d){return function(){for(var a=0,e=0;e<c.length;e++){var f=c[e];f===d.interactionState.dragInProgress?(f.x=f.lastDraggedX,f.y=f.lastDraggedY):(f.vx=(f.originalX-f.x)/D.forceTicksPerFrame,f.y=Math.min(d.size-f.dy/2,Math.max(f.dy/2,f.y))),a=Math.max(a,Math.abs(f.vx),Math.abs(f.vy))}!d.interactionState.dragInProgress&&a<.1&&d.forceLayouts[b].alpha()>0&&d.forceLayouts[b].alpha(0)}}var D=a("./constants"),E=a("d3"),F=a("tinycolor2"),G=a("../../components/color"),H=a("../../components/drawing"),I=a("@plotly/d3-sankey").sankey,J=a("d3-force"),K=a("../../lib"),L=a("../../lib/gup").keyFun,M=a("../../lib/gup").repeat,N=a("../../lib/gup").unwrap;b.exports=function(a,b,c,e){var f=a.selectAll("."+D.cn.sankey).data(b.filter(function(a){return N(a).trace.visible}).map(i.bind(null,c)),L);f.exit().remove(),f.enter().append("g").classed(D.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").style("box-sizing","content-box").attr("transform",r),f.transition().ease(D.ease).duration(D.duration).attr("transform",r);var g=f.selectAll("."+D.cn.sankeyLinks).data(M,L);g.enter().append("g").classed(D.cn.sankeyLinks,!0).style("fill","none");var h=g.selectAll("."+D.cn.sankeyLink).data(function(a){var b={};return a.sankey.links().filter(function(a){return a.value}).map(j.bind(null,b,a))},L);h.enter().append("path").classed(D.cn.sankeyLink,!0).attr("d",m).call(y,f,e.linkEvents),h.style("stroke",function(a){return q(a)?G.tinyRGB(F(a.linkLineColor)):a.tinyColorHue}).style("stroke-opacity",function(a){return q(a)?G.opacity(a.linkLineColor):a.tinyColorAlpha}).style("stroke-width",function(a){return q(a)?a.linkLineWidth:1}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha}),h.transition().ease(D.ease).duration(D.duration).attr("d",m),h.exit().transition().ease(D.ease).duration(D.duration).style("opacity",0).remove();var n=f.selectAll("."+D.cn.sankeyNodeSet).data(M,L);n.enter().append("g").classed(D.cn.sankeyNodeSet,!0),n.style("cursor",function(a){switch(a.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var o=n.selectAll("."+D.cn.sankeyNode).data(function(a){var b=a.sankey.nodes(),c={};return d(b),b.filter(function(a){return a.value}).map(k.bind(null,c,a))},L);o.enter().append("g").classed(D.cn.sankeyNode,!0).call(l).call(y,f,e.nodeEvents),o.call(z,h,e),o.transition().ease(D.ease).duration(D.duration).call(l),o.exit().transition().ease(D.ease).duration(D.duration).style("opacity",0).remove();var A=o.selectAll("."+D.cn.nodeRect).data(M);A.enter().append("rect").classed(D.cn.nodeRect,!0).call(p),A.style("stroke-width",function(a){return a.nodeLineWidth}).style("stroke",function(a){return G.tinyRGB(F(a.nodeLineColor))}).style("stroke-opacity",function(a){return G.opacity(a.nodeLineColor)}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha}),A.transition().ease(D.ease).duration(D.duration).call(p);var B=o.selectAll("."+D.cn.nodeCapture).data(M);B.enter().append("rect").classed(D.cn.nodeCapture,!0).style("fill-opacity",0),B.attr("x",function(a){return a.zoneX}).attr("y",function(a){return a.zoneY}).attr("width",function(a){return a.zoneWidth}).attr("height",function(a){return a.zoneHeight});var C=o.selectAll("."+D.cn.nodeCentered).data(M);C.enter().append("g").classed(D.cn.nodeCentered,!0).attr("transform",s),C.transition().ease(D.ease).duration(D.duration).attr("transform",s);var E=C.selectAll("."+D.cn.nodeLabelGuide).data(M);E.enter().append("path").classed(D.cn.nodeLabelGuide,!0).attr("id",function(a){return a.uniqueNodeLabelPathId}).attr("d",t).attr("transform",u),E.transition().ease(D.ease).duration(D.duration).attr("d",t).attr("transform",u);var I=C.selectAll("."+D.cn.nodeLabel).data(M);I.enter().append("text").classed(D.cn.nodeLabel,!0).attr("transform",v).style("user-select","none").style("cursor","default").style("fill","black"),I.style("text-shadow",function(a){return a.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(a){H.font(I,a.textFont)}),I.transition().ease(D.ease).duration(D.duration).attr("transform",v);var J=I.selectAll("."+D.cn.nodeLabelTextPath).data(M);J.enter().append("textPath").classed(D.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(a){return"#"+a.uniqueNodeLabelPathId}).attr("startOffset",x).style("fill",w),J.text(function(a){return a.horizontal||a.node.dy>5?a.node.label:""}).attr("text-anchor",function(a){return a.horizontal&&a.left?"end":"start"}),J.transition().ease(D.ease).duration(D.duration).attr("startOffset",x).style("fill",w)}},{"../../components/color":618,"../../components/drawing":643,"../../lib":743,"../../lib/gup":740,"./constants":1060,"@plotly/d3-sankey":41,d3:128,"d3-force":124,tinycolor2:546}],1065:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){for(var c=0;c<a.length;c++)a[c].i=c;d.mergeArray(b.text,a,"tx"),d.mergeArray(b.hovertext,a,"htx"),d.mergeArray(b.customdata,a,"data"),d.mergeArray(b.textposition,a,"tp"),b.textfont&&(d.mergeArray(b.textfont.size,a,"ts"),d.mergeArray(b.textfont.color,a,"tc"),d.mergeArray(b.textfont.family,a,"tf"));var e=b.marker;if(e){d.mergeArray(e.size,a,"ms"),d.mergeArray(e.opacity,a,"mo"),d.mergeArray(e.symbol,a,"mx"),d.mergeArray(e.color,a,"mc");var f=e.line;e.line&&(d.mergeArray(f.color,a,"mlc"),d.mergeArray(f.width,a,"mlw"));var g=e.gradient;g&&"none"!==g.type&&(d.mergeArray(g.type,a,"mgt"),d.mergeArray(g.color,a,"mgc"))}}},{"../../lib":743}],1066:[function(a,b,c){"use strict";var d=a("../../components/colorscale/color_attributes"),e=a("../../components/errorbars/attributes"),f=a("../../components/colorbar/attributes"),g=a("../../plots/font_attributes"),h=a("../../components/drawing/attributes").dash,i=a("../../components/drawing"),j=(a("./constants"),a("../../lib/extend").extendFlat);b.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:j({},h,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:j({symbol:{valType:"enumerated",values:i.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:f,line:j({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},d("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},d("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:g({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"},error_y:e,error_x:e}},{"../../components/colorbar/attributes":619,"../../components/colorscale/color_attributes":626,"../../components/drawing":643,"../../components/drawing/attributes":642,"../../components/errorbars/attributes":645,"../../lib/extend":732,"../../plots/font_attributes":816,"./constants":1072}],1067:[function(a,b,c){"use strict";function d(a,b){var c=g.getFromId(a,b.xaxis||"x"),d=g.getFromId(a,b.yaxis||"y"),m=c.makeCalcdata(b,"x"),n=d.makeCalcdata(b,"y"),o=Math.min(m.length,n.length);c._minDtick=0,d._minDtick=0,m.length>o&&m.splice(o,m.length-o),n.length>o&&n.splice(o,n.length-o);var p={padded:!0},q={padded:!0},r=e(b,o);r&&(p.ppad=q.ppad=r),!("tozerox"===b.fill||"tonextx"===b.fill&&a.firstscatter)||m[0]===m[o-1]&&n[0]===n[o-1]?b.error_y.visible||-1===["tonexty","tozeroy"].indexOf(b.fill)&&(i.hasMarkers(b)||i.hasText(b))||(p.padded=!1,p.ppad=0):p.tozero=!0,!("tozeroy"===b.fill||"tonexty"===b.fill&&a.firstscatter)||m[0]===m[o-1]&&n[0]===n[o-1]?-1!==["tonextx","tozerox"].indexOf(b.fill)&&(q.padded=!1):q.tozero=!0,g.expand(c,m,p),g.expand(d,n,q);for(var s=new Array(o),t=0;t<o;t++)s[t]=f(m[t])&&f(n[t])?{x:m[t],y:n[t]}:{x:h,y:h},b.ids&&(s[t].id=String(b.ids[t]));return k(s,b),j(b),l(s,b),a.firstscatter=!1,s}function e(a,b){if(i.hasMarkers(a)){var c,d=a.marker,e=1.6*(a.marker.sizeref||1);if(c="area"===a.marker.sizemode?function(a){return Math.max(Math.sqrt((a||0)/e),3)}:function(a){return Math.max((a||0)/e,3)},Array.isArray(d.size)){var f={type:"linear"};g.setConvert(f);var h=f.makeCalcdata(a.marker,"size");return h.length>b&&h.splice(b,h.length-b),h.map(c)}return c(d.size)}}var f=a("fast-isnumeric"),g=a("../../plots/cartesian/axes"),h=a("../../constants/numerical").BADNUM,i=a("./subtypes"),j=a("./colorscale_calc"),k=a("./arrays_to_calcdata"),l=a("./calc_selection");b.exports={calc:d,calcMarkerSize:e}},{"../../constants/numerical":721,"../../plots/cartesian/axes":789,"./arrays_to_calcdata":1065,"./calc_selection":1068,"./colorscale_calc":1071,"./subtypes":1088,"fast-isnumeric":140}],1068:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b){Array.isArray(b.selectedpoints)&&d.tagSelected(a,b)}},{"../../lib":743}],1069:[function(a,b,c){"use strict";b.exports=function(a){for(var b=0;b<a.length;b++){var c=a[b];if("scatter"===c.type){var d=c.fill;if("none"!==d&&"toself"!==d&&(c.opacity=void 0,"tonexty"===d||"tonextx"===d))for(var e=b-1;e>=0;e--){var f=a[e];if("scatter"===f.type&&f.xaxis===c.xaxis&&f.yaxis===c.yaxis){f.opacity=void 0;break}}}}}},{}],1070:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i=c.marker,j="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+j).remove(),void 0===i||!i.showscale)return void f.autoMargin(a,j);var k=i.color,l=i.cmin,m=i.cmax;d(l)||(l=e.aggNums(Math.min,null,k)),d(m)||(m=e.aggNums(Math.max,null,k));var n=b[0].t.cb=h(a,j),o=g.makeColorScaleFunc(g.extractScale(i.colorscale,l,m),{noNumericCheck:!0});n.fillcolor(o).filllevels({start:l,end:m,size:(m-l)/254}).options(i.colorbar)()}},{"../../components/colorbar/draw":622,"../../components/colorscale":633,"../../lib":743,"../../plots/plots":852,"fast-isnumeric":140}],1071:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/calc"),f=a("./subtypes");b.exports=function(a){f.hasLines(a)&&d(a,"line")&&e(a,a.line.color,"line","c"),f.hasMarkers(a)&&(d(a,"marker")&&e(a,a.marker.color,"marker","c"),d(a,"marker.line")&&e(a,a.marker.line.color,"marker.line","c"))}},{"../../components/colorscale/calc":625,"../../components/colorscale/has_colorscale":632,"./subtypes":1088}],1072:[function(a,b,c){"use strict";b.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],1073:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes"),f=a("./constants"),g=a("./subtypes"),h=a("./xy_defaults"),i=a("./marker_defaults"),j=a("./line_defaults"),k=a("./line_shape_defaults"),l=a("./text_defaults"),m=a("./fillcolor_defaults"),n=a("../../components/errorbars/defaults");b.exports=function(a,b,c,o){function p(c,f){return d.coerce(a,b,e,c,f)}var q=h(a,b,o,p),r=q<f.PTS_LINESONLY?"lines+markers":"lines";if(!q)return void(b.visible=!1);p("text"),p("hovertext"),p("mode",r),g.hasLines(b)&&(j(a,b,c,o,p),k(a,b,p),p("connectgaps"),p("line.simplify")),g.hasMarkers(b)&&i(a,b,c,o,p,{gradient:!0}),g.hasText(b)&&l(a,b,o,p);var s=[];(g.hasMarkers(b)||g.hasText(b))&&(p("cliponaxis"),p("marker.maxdisplayed"),s.push("points")),p("fill"),"none"!==b.fill&&(m(a,b,c,p),g.hasLines(b)||k(a,b,p)),"tonext"!==b.fill&&"toself"!==b.fill||s.push("fills"),p("hoveron",s.join("+")||"points"),n(a,b,c,{axis:"y"}),n(a,b,c,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(b,p)}},{"../../components/errorbars/defaults":648,"../../lib":743,"./attributes":1066,"./constants":1072,"./fillcolor_defaults":1075,"./line_defaults":1079,"./line_shape_defaults":1081,"./marker_defaults":1084,"./subtypes":1088,"./text_defaults":1089,"./xy_defaults":1090}],1074:[function(a,b,c){"use strict";function d(a){return a||0===a}var e=a("../../lib");b.exports=function(a,b,c){var f=Array.isArray(c)?function(a){c.push(a)}:function(a){c.text=a},g=e.extractOption(a,b,"htx","hovertext");if(d(g))return f(g);var h=e.extractOption(a,b,"tx","text");return d(h)?f(h):void 0}},{"../../lib":743}],1075:[function(a,b,c){"use strict";var d=a("../../components/color");b.exports=function(a,b,c,e){var f=!1;if(b.marker){var g=b.marker.color,h=(b.marker.line||{}).color;g&&!Array.isArray(g)?f=g:h&&!Array.isArray(h)&&(f=h)}e("fillcolor",d.addOpacity((b.line||{}).color||f||c,.5))}},{"../../components/color":618}],1076:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("./subtypes");b.exports=function(a,b){var c,f;if("lines"===a.mode)return c=a.line.color,c&&d.opacity(c)?c:a.fillcolor;if("none"===a.mode)return a.fill?a.fillcolor:"";var g=b.mcc||(a.marker||{}).color,h=b.mlcc||((a.marker||{}).line||{}).color;return f=g&&d.opacity(g)?g:h&&d.opacity(h)&&(b.mlw||((a.marker||{}).line||{}).width)?h:"",f?d.opacity(f)<.3?d.addOpacity(f,.3):f:(c=(a.line||{}).color,c&&d.opacity(c)&&e.hasLines(a)&&a.line.width?c:a.fillcolor)}},{"../../components/color":618,"./subtypes":1088}],1077:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/fx"),f=a("../../components/errorbars"),g=a("./get_trace_color"),h=a("../../components/color"),i=a("./fill_hover_text"),j=e.constants.MAXDIST;b.exports=function(a,b,c,k){var l=a.cd,m=l[0].trace,n=a.xa,o=a.ya,p=n.c2p(b),q=o.c2p(c),r=[p,q],s=m.hoveron||"",t=-1!==m.mode.indexOf("markers")?3:.5;if(-1!==s.indexOf("points")){var u=function(a){var b=Math.max(3,a.mrc||0),c=1-1/b,d=Math.abs(n.c2p(a.x)-p);return d<b?c*d/b:d-b+c},v=function(a){var b=Math.max(3,a.mrc||0),c=1-1/b,d=Math.abs(o.c2p(a.y)-q);return d<b?c*d/b:d-b+c},w=function(a){var b=Math.max(t,a.mrc||0),c=n.c2p(a.x)-p,d=o.c2p(a.y)-q;return Math.max(Math.sqrt(c*c+d*d)-b,1-t/b)},x=e.getDistanceFunction(k,u,v,w);if(e.getClosest(l,x,a),!1!==a.index){var y=l[a.index],z=n.c2p(y.x,!0),A=o.c2p(y.y,!0),B=y.mrc||1;return d.extendFlat(a,{color:g(m,y),x0:z-B,x1:z+B,xLabelVal:y.x,y0:A-B,y1:A+B,yLabelVal:y.y,kink:Math.max(t,y.mrc||0)}),i(y,m,a),f.hoverInfo(y,m,a),[a]}}if(-1!==s.indexOf("fills")&&m._polygons){var C,D,E,F,G,H,I,J,K,L=m._polygons,M=[],N=!1,O=1/0,P=-1/0,Q=1/0,R=-1/0;for(C=0;C<L.length;C++)E=L[C],E.contains(r)&&(N=!N,M.push(E),Q=Math.min(Q,E.ymin),R=Math.max(R,E.ymax));if(N){Q=Math.max(Q,0),R=Math.min(R,o._length);var S=(Q+R)/2;for(C=0;C<M.length;C++)for(F=M[C].pts,D=1;D<F.length;D++)J=F[D-1][1],K=F[D][1],J>S!=K>=S&&(H=F[D-1][0],I=F[D][0],K-J&&(G=H+(I-H)*(S-J)/(K-J),O=Math.min(O,G),P=Math.max(P,G)));O=Math.max(O,0),P=Math.min(P,n._length);var T=h.defaultLine;return h.opacity(m.fillcolor)?T=m.fillcolor:h.opacity((m.line||{}).color)&&(T=m.line.color),d.extendFlat(a,{distance:j+10,x0:O,x1:P,y0:S,y1:S,color:T}),delete a.index,m.text&&!Array.isArray(m.text)?a.text=String(m.text):a.text=m.name,[a]}}}},{
"../../components/color":618,"../../components/errorbars":649,"../../components/fx":660,"../../lib":743,"./fill_hover_text":1074,"./get_trace_color":1076}],1078:[function(a,b,c){"use strict";var d={},e=a("./subtypes");d.hasLines=e.hasLines,d.hasMarkers=e.hasMarkers,d.hasText=e.hasText,d.isBubble=e.isBubble,d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.cleanData=a("./clean_data"),d.calc=a("./calc").calc,d.arraysToCalcdata=a("./arrays_to_calcdata"),d.plot=a("./plot"),d.colorbar=a("./colorbar"),d.style=a("./style").style,d.hoverPoints=a("./hover"),d.selectPoints=a("./select"),d.animatable=!0,d.moduleType="trace",d.name="scatter",d.basePlotModule=a("../../plots/cartesian"),d.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"./arrays_to_calcdata":1065,"./attributes":1066,"./calc":1067,"./clean_data":1069,"./colorbar":1070,"./defaults":1073,"./hover":1077,"./plot":1085,"./select":1086,"./style":1087,"./subtypes":1088}],1079:[function(a,b,c){"use strict";var d=a("../../components/colorscale/has_colorscale"),e=a("../../components/colorscale/defaults");b.exports=function(a,b,c,f,g,h){var i=(a.marker||{}).color;if(g("line.color",c),d(a,"line"))e(a,b,f,g,{prefix:"line.",cLetter:"c"});else{g("line.color",!Array.isArray(i)&&i||c)}g("line.width"),(h||{}).noDash||g("line.dash")}},{"../../components/colorscale/defaults":628,"../../components/colorscale/has_colorscale":632}],1080:[function(a,b,c){"use strict";var d=a("../../constants/numerical").BADNUM,e=a("../../lib"),f=e.segmentsIntersect,g=e.constrain,h=a("./constants");b.exports=function(a,b){function c(b){var c=a[b],e=J.c2p(c.x),f=K.c2p(c.y);return e===d||f===d?c.intoCenter||!1:[e,f]}function i(a){var b=a[0]/J._length,c=a[1]/K._length;return(1+h.toleranceGrowth*Math.max(0,-b,b-1,-c,c-1))*N}function j(a,b){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)}function k(a,b){for(var c=[],d=0,e=0;e<4;e++){var g=ea[e],h=f(a[0],a[1],b[0],b[1],g[0],g[1],g[2],g[3]);h&&(!d||Math.abs(h.x-c[0][0])>1||Math.abs(h.y-c[0][1])>1)&&(h=[h.x,h.y],d&&j(h,a)<j(c[0],a)?c.unshift(h):c.push(h),d++)}return c}function l(a){if(a[0]<aa||a[0]>ba||a[1]<ca||a[1]>da)return[g(a[0],aa,ba),g(a[1],ca,da)]}function m(a,b){return a[0]===b[0]&&(a[0]===aa||a[0]===ba)||(a[1]===b[1]&&(a[1]===ca||a[1]===da)||void 0)}function n(a,b){var c=[],d=l(a),e=l(b);return d&&e&&m(d,e)?c:(d&&c.push(d),e&&c.push(e),c)}function o(a,b,c){return function(d,f){var g=l(d),h=l(f),i=[];if(g&&h&&m(g,h))return i;g&&i.push(g),h&&i.push(h);var j=2*e.constrain((d[a]+f[a])/2,b,c)-((g||d)[a]+(h||f)[a]);if(j){var k;k=g&&h?j>0==g[a]>h[a]?g:h:g||h,k[a]+=j}return i}}function p(a,b){var c=b[0]-a[0],d=(b[1]-a[1])/c;return(a[1]*b[0]-b[1]*a[0])/c>0?[d>0?aa:ba,da]:[d>0?ba:aa,ca]}function q(a){var b=a[0],c=a[1],d=b===S[T-1][0],e=c===S[T-1][1];if(!d||!e)if(T>1){var f=b===S[T-2][0],g=c===S[T-2][1];d&&(b===aa||b===ba)&&f?g?T--:S[T-1]=a:e&&(c===ca||c===da)&&g?f?T--:S[T-1]=a:S[T++]=a}else S[T++]=a}function r(a){S[T-1][0]!==a[0]&&S[T-1][1]!==a[1]&&q([W,X]),q(a),Y=null,W=X=0}function s(a){if(U=a[0]<aa?aa:a[0]>ba?ba:0,V=a[1]<ca?ca:a[1]>da?da:0,U||V){if(T)if(Y){var b=$(Y,a);b.length>1&&(r(b[0]),S[T++]=b[1])}else Z=$(S[T-1],a)[0],S[T++]=Z;else S[T++]=[U||a[0],V||a[1]];var c=S[T-1];U&&V&&(c[0]!==U||c[1]!==V)?(Y&&(W!==U&&X!==V?q(W&&X?p(Y,a):[W||U,X||V]):W&&X&&q([W,X])),q([U,V])):W-U&&X-V&&q([U||W,V||X]),Y=a,W=U,X=V}else Y&&r($(Y,a)[0]),S[T++]=a}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=b.xaxis,K=b.yaxis,L=b.simplify,M=b.connectGaps,N=b.baseTolerance,O=b.shape,P="linear"===O,Q=[],R=h.minTolerance,S=new Array(a.length),T=0;L||(N=R=-1);var U,V,W,X,Y,Z,$,_=h.maxScreensAway,aa=-J._length*_,ba=J._length*(1+_),ca=-K._length*_,da=K._length*(1+_),ea=[[aa,ca,ba,ca],[ba,ca,ba,da],[ba,da,aa,da],[aa,da,aa,ca]];for("linear"===O||"spline"===O?$=k:"hv"===O||"vh"===O?$=n:"hvh"===O?$=o(0,aa,ba):"vhv"===O&&($=o(1,ca,da)),t=0;t<a.length;t++)if(u=c(t)){for(T=0,Y=null,s(u),t++;t<a.length;t++){if(!(w=c(t))){if(M)continue;break}if(P){if(!((C=j(w,u))<i(w)*R)){for(A=[(w[0]-u[0])/C,(w[1]-u[1])/C],x=u,D=C,E=G=H=0,z=!1,v=w,t++;t<a.length;t++){if(!(y=c(t))){if(M)continue;break}if(B=[y[0]-u[0],y[1]-u[1]],I=B[0]*A[1]-B[1]*A[0],G=Math.min(G,I),(H=Math.max(H,I))-G>i(y))break;v=y,F=B[0]*A[0]+B[1]*A[1],F>D?(D=F,w=y,z=!1):F<E&&(E=F,x=y,z=!0)}if(z?(s(w),v!==x&&s(x)):(x!==u&&s(x),v!==w&&s(w)),s(v),t>=a.length||!y)break;s(y),u=y}}else s(w)}Y&&q([W||Y[0],X||Y[1]]),Q.push(S.slice(0,T))}return Q}},{"../../constants/numerical":721,"../../lib":743,"./constants":1072}],1081:[function(a,b,c){"use strict";b.exports=function(a,b,c){"spline"===c("line.shape")&&c("line.smoothing")}},{}],1082:[function(a,b,c){"use strict";b.exports=function(a,b,c){for(var d,e,f=null,g=0;g<c.length;++g)d=c[g],e=d[0].trace,!0===e.visible?(e._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(e.fill)&&(e._prevtrace=f,f&&(f._nexttrace=e)),f=e):e._prevtrace=e._nexttrace=null}},{}],1083:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports=function(a){var b=a.marker,c=b.sizeref||1,e=b.sizemin||0,f="area"===b.sizemode?function(a){return Math.sqrt(a/c)}:function(a){return a/c};return function(a){var b=f(a/2);return d(b)&&b>0?Math.max(b,e):0}}},{"fast-isnumeric":140}],1084:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("../../components/colorscale/has_colorscale"),f=a("../../components/colorscale/defaults"),g=a("./subtypes");b.exports=function(a,b,c,h,i,j){var k,l=g.isBubble(a),m=(a.line||{}).color;if(j=j||{},m&&(c=m),i("marker.symbol"),i("marker.opacity",l?.7:1),i("marker.size"),i("marker.color",c),e(a,"marker")&&f(a,b,h,i,{prefix:"marker.",cLetter:"c"}),j.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),j.noLine||(k=m&&!Array.isArray(m)&&b.marker.color!==m?m:l?d.background:d.defaultLine,i("marker.line.color",k),e(a,"marker.line")&&f(a,b,h,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",l?1:0)),l&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),j.gradient){"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}}},{"../../components/color":618,"../../components/colorscale/defaults":628,"../../components/colorscale/has_colorscale":632,"./subtypes":1088}],1085:[function(a,b,c){"use strict";function d(a,b,c){var d;b.selectAll("g.trace").each(function(a){var b=g.select(this);if(d=a[0].trace,d._nexttrace){if(d._nextFill=b.select(".js-fill.js-tonext"),!d._nextFill.size()){var e=":first-child";b.select(".js-fill.js-tozero").size()&&(e+=" + *"),d._nextFill=b.insert("path",e).attr("class","js-fill js-tonext")}}else b.selectAll(".js-fill.js-tonext").remove(),d._nextFill=null;d.fill&&("tozero"===d.fill.substr(0,6)||"toself"===d.fill||"to"===d.fill.substr(0,2)&&!d._prevtrace)?(d._ownFill=b.select(".js-fill.js-tozero"),d._ownFill.size()||(d._ownFill=b.insert("path",":first-child").attr("class","js-fill js-tozero"))):(b.selectAll(".js-fill.js-tozero").remove(),d._ownFill=null),b.selectAll(".js-fill").call(i.setClipUrl,c.layerClipId)})}function e(a,b,c,d,e,m,o){function p(a){return x?a.transition():a}function q(a){return a.filter(function(a){return a.vis})}function r(a){return a.id}function s(a){if(a.ids)return r}function t(){return!1}function u(b){var d,e,f,j=b[0].trace,l=g.select(this),m=k.hasMarkers(j),n=k.hasText(j),o=s(j),r=t,u=t;m&&(r=j.marker.maxdisplayed||j._needsCull?q:h.identity),n&&(u=j.marker.maxdisplayed||j._needsCull?q:h.identity),e=l.selectAll("path.point"),d=e.data(r,o);var v=d.enter().append("path").classed("point",!0);x&&v.call(i.pointStyle,j,a).call(i.translatePoints,y,z).style("opacity",0).transition().style("opacity",1);var w=m&&i.tryColorscale(j.marker,""),A=m&&i.tryColorscale(j.marker,"line");d.order(),d.each(function(b){var d=g.select(this),e=p(d);f=i.translatePoint(b,e,y,z),f?(i.singlePointStyle(b,e,j,w,A,a),c.layerClipId&&i.hideOutsideRangePoint(b,e,y,z,j.xcalendar,j.ycalendar),j.customdata&&d.classed("plotly-customdata",null!==b.data&&void 0!==b.data)):e.remove()}),x?d.exit().transition().style("opacity",0).remove():d.exit().remove(),e=l.selectAll("g"),d=e.data(u,o),d.enter().append("g").classed("textpoint",!0).append("text"),d.order(),d.each(function(a){var b=g.select(this),d=p(b.select("text"));f=i.translatePoint(a,d,y,z),f?c.layerClipId&&i.hideOutsideRangePoint(a,b,y,z,j.xcalendar,j.ycalendar):b.remove()}),d.selectAll("text").call(i.textPointStyle,j,a).each(function(a){var b=y.c2p(a.x),c=z.c2p(a.y);g.select(this).selectAll("tspan.line").each(function(){p(g.select(this)).attr({x:b,y:c})})}),d.exit().remove()}var v,w;f(a,b,c,d,e);var x=!!o&&o.duration>0,y=c.xaxis,z=c.yaxis,A=d[0].trace,B=A.line,C=g.select(m);if(C.call(j.plot,c,o),!0===A.visible){p(C).style("opacity",A.opacity);var D,E,F=A.fill.charAt(A.fill.length-1);"x"!==F&&"y"!==F&&(F=""),d[0].node3=C;var G="",H=[],I=A._prevtrace;I&&(G=I._prevRevpath||"",E=I._nextFill,H=I._polygons);var J,K,L,M,N,O,P,Q,R,S="",T="",U=[],V=h.noop;if(D=A._ownFill,k.hasLines(A)||"none"!==A.fill){for(E&&E.datum(d),-1!==["hv","vh","hvh","vhv"].indexOf(B.shape)?(L=i.steps(B.shape),M=i.steps(B.shape.split("").reverse().join(""))):L=M="spline"===B.shape?function(a){var b=a[a.length-1];return a.length>1&&a[0][0]===b[0]&&a[0][1]===b[1]?i.smoothclosed(a.slice(1),B.smoothing):i.smoothopen(a,B.smoothing)}:function(a){return"M"+a.join("L")},N=function(a){return M(a.reverse())},U=l(d,{xaxis:y,yaxis:z,connectGaps:A.connectgaps,baseTolerance:Math.max(B.width||1,3)/4,shape:B.shape,simplify:B.simplify}),R=A._polygons=new Array(U.length),w=0;w<U.length;w++)A._polygons[w]=n(U[w]);U.length&&(O=U[0][0],P=U[U.length-1],Q=P[P.length-1]),V=function(a){return function(b){if(J=L(b),K=N(b),S?F?(S+="L"+J.substr(1),T=K+"L"+T.substr(1)):(S+="Z"+J,T=K+"Z"+T):(S=J,T=K),k.hasLines(A)&&b.length>1){var c=g.select(this);if(c.datum(d),a)p(c.style("opacity",0).attr("d",J).call(i.lineGroupStyle)).style("opacity",1);else{var e=p(c);e.attr("d",J),i.singleLineStyle(d,e)}}}}}var W=C.selectAll(".js-line").data(U);p(W.exit()).style("opacity",0).remove(),W.each(V(!1)),W.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(i.lineGroupStyle).each(V(!0)),i.setClipUrl(W,c.layerClipId),U.length&&(D?O&&Q&&(F?("y"===F?O[1]=Q[1]=z.c2p(0,!0):"x"===F&&(O[0]=Q[0]=y.c2p(0,!0)),p(D).attr("d","M"+Q+"L"+O+"L"+S.substr(1)).call(i.singleFillStyle)):p(D).attr("d",S+"Z").call(i.singleFillStyle)):"tonext"===A.fill.substr(0,6)&&S&&G&&("tonext"===A.fill?p(E).attr("d",S+"Z"+G+"Z").call(i.singleFillStyle):p(E).attr("d",S+"L"+G.substr(1)+"Z").call(i.singleFillStyle),A._polygons=A._polygons.concat(H)),A._prevRevpath=T,A._prevPolygons=R);var X=C.selectAll(".points");v=X.data([d]),X.each(u),v.enter().append("g").classed("points",!0).each(u),v.exit().remove(),v.each(function(a){var b=!1===a[0].trace.cliponaxis;i.setClipUrl(g.select(this),b?null:c.layerClipId)})}}function f(a,b,c,d,e){var f=c.xaxis,i=c.yaxis,j=g.extent(h.simpleMap(f.range,f.r2c)),l=g.extent(h.simpleMap(i.range,i.r2c)),m=d[0].trace;if(k.hasMarkers(m)){var n=m.marker.maxdisplayed;if(0!==n){var o=d.filter(function(a){return a.x>=j[0]&&a.x<=j[1]&&a.y>=l[0]&&a.y<=l[1]}),p=Math.ceil(o.length/n),q=0;e.forEach(function(a,c){var d=a[0].trace;k.hasMarkers(d)&&d.marker.maxdisplayed>0&&c<b&&q++});var r=Math.round(q*p/3+Math.floor(q/3)*p/7.1);d.forEach(function(a){delete a.vis}),o.forEach(function(a,b){0===Math.round((b+r)%p)&&(a.vis=!0)})}}}var g=a("d3"),h=a("../../lib"),i=a("../../components/drawing"),j=a("../../components/errorbars"),k=a("./subtypes"),l=a("./line_points"),m=a("./link_traces"),n=a("../../lib/polygon").tester;b.exports=function(a,b,c,f,h){var i,j,k,l,n,o=b.plot.select("g.scatterlayer"),p=!f,q=!!f&&f.duration>0;for(k=o.selectAll("g.trace"),l=k.data(c,function(a){return a[0].trace.uid}),l.enter().append("g").attr("class",function(a){return"trace scatter trace"+a[0].trace.uid}).style("stroke-miterlimit",2),m(a,b,c),d(a,o,b),i=0,j={};i<c.length;i++)j[c[i][0].trace.uid]=i;if(o.selectAll("g.trace").sort(function(a,b){return j[a[0].trace.uid]>j[b[0].trace.uid]?1:-1}),q){h&&(n=h());g.transition().duration(f.duration).ease(f.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()}).each(function(){o.selectAll("g.trace").each(function(d,g){e(a,g,b,d,c,this,f)})})}else o.selectAll("g.trace").each(function(d,g){e(a,g,b,d,c,this,f)});p&&l.exit().remove(),o.selectAll("path:not([d])").remove()}},{"../../components/drawing":643,"../../components/errorbars":649,"../../lib":743,"../../lib/polygon":755,"./line_points":1080,"./link_traces":1082,"./subtypes":1088,d3:128}],1086:[function(a,b,c){"use strict";var d=a("./subtypes");b.exports=function(a,b){var c,e,f,g,h=a.cd,i=a.xaxis,j=a.yaxis,k=[],l=h[0].trace;if(!d.hasMarkers(l)&&!d.hasText(l))return[];if(!1===b)for(c=0;c<h.length;c++)h[c].selected=0;else for(c=0;c<h.length;c++)e=h[c],f=i.c2p(e.x),g=j.c2p(e.y),b.contains([f,g])?(k.push({pointNumber:c,x:i.c2d(e.x),y:j.c2d(e.y)}),e.selected=1):e.selected=0;return k}},{"./subtypes":1088}],1087:[function(a,b,c){"use strict";function d(a,b){var c=b?b[0].node3:f.select(a).selectAll("g.trace.scatter");c.style("opacity",function(a){return a[0].trace.opacity}),c.selectAll("g.points").each(function(b){e(f.select(this),b.trace||b[0].trace,a)}),c.selectAll("g.trace path.js-line").call(g.lineGroupStyle),c.selectAll("g.trace path.js-fill").call(g.fillGroupStyle),c.call(h.style)}function e(a,b,c){var d=a.selectAll("path.point"),e=a.selectAll("text");g.pointStyle(d,b,c),g.textPointStyle(e,b,c),g.selectedPointStyle(d,b),g.selectedTextStyle(e,b)}var f=a("d3"),g=a("../../components/drawing"),h=a("../../components/errorbars");b.exports={style:d,stylePoints:e}},{"../../components/drawing":643,"../../components/errorbars":649,d3:128}],1088:[function(a,b,c){"use strict";var d=a("../../lib");b.exports={hasLines:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("lines")},hasMarkers:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("markers")},hasText:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("text")},isBubble:function(a){return d.isPlainObject(a.marker)&&Array.isArray(a.marker.size)}}},{"../../lib":743}],1089:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c,e,f){f=f||{},e("textposition"),d.coerceFont(e,"textfont",c.font),f.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":743}],1090:[function(a,b,c){"use strict";var d=a("../../registry");b.exports=function(a,b,c,e){var f,g=e("x"),h=e("y");if(d.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y"],c),g)h?(f=Math.min(g.length,h.length),f<g.length&&(b.x=g.slice(0,f)),f<h.length&&(b.y=h.slice(0,f))):(f=g.length,e("y0"),e("dy"));else{if(!h)return 0;f=b.y.length,e("x0"),e("dx")}return f}},{"../../registry":873}],1091:[function(a,b,c){"use strict";function d(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var e=a("../scatter/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/errorbars/attributes"),h=a("../../constants/gl3d_dashes"),i=a("../../constants/gl3d_markers"),j=a("../../lib/extend").extendFlat,k=a("../../plot_api/edit_types").overrideAll,l=e.line,m=e.marker,n=m.line,o=b.exports=k({x:e.x,y:e.y,z:{valType:"data_array"},text:j({},e.text,{}),hovertext:j({},e.hovertext,{}),mode:j({},e.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:d("x"),y:d("y"),z:d("z")},connectgaps:e.connectgaps,line:j({width:l.width,dash:{valType:"enumerated",values:Object.keys(h),dflt:"solid"},showscale:{valType:"boolean",dflt:!1}},f("line")),marker:j({symbol:{valType:"enumerated",values:Object.keys(i),dflt:"circle",arrayOk:!0},size:j({},m.size,{dflt:8}),sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:j({},m.opacity,{arrayOk:!1}),showscale:m.showscale,colorbar:m.colorbar,line:j({width:j({},n.width,{arrayOk:!1})},f("marker.line"))},f("marker")),textposition:j({},e.textposition,{dflt:"top center"}),textfont:e.textfont,error_x:g,error_y:g,error_z:g},"calc","nested");o.x.editType=o.y.editType=o.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/color_attributes":626,"../../components/errorbars/attributes":645,"../../constants/gl3d_dashes":718,"../../constants/gl3d_markers":719,"../../lib/extend":732,"../../plot_api/edit_types":773,"../scatter/attributes":1066}],1092:[function(a,b,c){"use strict";var d=a("../scatter/arrays_to_calcdata"),e=a("../scatter/colorscale_calc");b.exports=function(a,b){var c=[{x:!1,y:!1,trace:b,t:{}}];return d(c,b),e(b),c}},{"../scatter/arrays_to_calcdata":1065,"../scatter/colorscale_calc":1071}],1093:[function(a,b,c){"use strict";function d(a,b,c){if(!b||!b.visible)return null;for(var d=g(b),e=new Array(a.length),f=0;f<a.length;f++){var h=d(+a[f],f);e[f]=[-h[0]*c,h[1]*c]}return e}function e(a){for(var b=0;b<a.length;b++)if(a[b])return a[b].length;return 0}function f(a,b){var c=[d(a.x,a.error_x,b[0]),d(a.y,a.error_y,b[1]),d(a.z,a.error_z,b[2])],f=e(c);if(0===f)return null;for(var g=new Array(f),h=0;h<f;h++){for(var i=[[0,0,0],[0,0,0]],j=0;j<3;j++)if(c[j])for(var k=0;k<2;k++)i[k][j]=c[j][h][k];g[h]=i}return g}var g=a("../../components/errorbars/compute_error");b.exports=f},{"../../components/errorbars/compute_error":647}],1094:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}function e(a,b,c){var d,e=(c+1)%3,f=(c+2)%3,g=[],h=[];for(d=0;d<a.length;++d){var i=a[d];!isNaN(i[e])&&isFinite(i[e])&&!isNaN(i[f])&&isFinite(i[f])&&(g.push([i[e],i[f]]),h.push(d))}var j=r(g);for(d=0;d<j.length;++d)for(var k=j[d],l=0;l<k.length;++l)k[l]=h[k[l]];return{positions:a,cells:j,meshColor:b}}function f(a){for(var b=[0,0,0],c=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0],e=0;e<3;e++){var f=a[e];f&&!1!==f.copy_zstyle&&(f=a[2]),f&&(b[e]=f.width/2,c[e]=t(f.color),d=f.thickness)}return{capSize:b,color:c,lineWidth:d}}function g(a){var b=[0,0];return Array.isArray(a)?[0,-1]:(a.indexOf("bottom")>=0&&(b[1]+=1),a.indexOf("top")>=0&&(b[1]-=1),a.indexOf("left")>=0&&(b[0]-=1),a.indexOf("right")>=0&&(b[0]+=1),b)}function h(a,b){return b(4*a)}function i(a){return x[a]}function j(a,b,c,d,e){var f=null;if(Array.isArray(a)){f=[];for(var g=0;g<b;g++)void 0===a[g]?f[g]=d:f[g]=c(a[g],e)}else f=c(a,s.identity);return f}function k(a,b){var c,d,e,k,l,m,n=[],o=a.fullSceneLayout,p=a.dataScale,q=o.xaxis,r=o.yaxis,w=o.zaxis,x=b.marker,z=b.line,A=b.x||[],B=b.y||[],C=b.z||[],D=A.length,E=b.xcalendar,F=b.ycalendar,G=b.zcalendar;for(d=0;d<D;d++)e=q.d2l(A[d],0,E)*p[0],k=r.d2l(B[d],0,F)*p[1],l=w.d2l(C[d],0,G)*p[2],n[d]=[e,k,l];if(Array.isArray(b.text))m=b.text;else if(void 0!==b.text)for(m=new Array(D),d=0;d<D;d++)m[d]=b.text;if(c={position:n,mode:b.mode,text:m},"line"in b&&(c.lineColor=u(z,1,D),c.lineWidth=z.width,c.lineDashes=z.dash),"marker"in b){var H=v(b);c.scatterColor=u(x,1,D),c.scatterSize=j(x.size,D,h,20,H),c.scatterMarker=j(x.symbol,D,i,"●"),c.scatterLineWidth=x.line.width,c.scatterLineColor=u(x.line,1,D),c.scatterAngle=0}"textposition"in b&&(c.textOffset=g(b.textposition),c.textColor=u(b.textfont,1,D),c.textSize=j(b.textfont.size,D,s.identity,12),c.textFont=b.textfont.family,c.textAngle=0);var I=["x","y","z"];for(c.project=[!1,!1,!1],c.projectScale=[1,1,1],c.projectOpacity=[1,1,1],d=0;d<3;++d){var J=b.projection[I[d]];(c.project[d]=J.show)&&(c.projectOpacity[d]=J.opacity,c.projectScale[d]=J.scale)}c.errorBounds=y(b,p);var K=f([b.error_x,b.error_y,b.error_z]);return c.errorColor=K.color,c.errorLineWidth=K.lineWidth,c.errorCapSize=K.capSize,c.delaunayAxis=b.surfaceaxis,c.delaunayColor=t(b.surfacecolor),c}function l(a){if(Array.isArray(a)){var b=a[0];return Array.isArray(b)&&(a=b),"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)})+")"}return null}function m(a,b){var c=new d(a,b.uid);return c.update(b),c}var n=a("gl-line3d"),o=a("gl-scatter3d"),p=a("gl-error3d"),q=a("gl-mesh3d"),r=a("delaunay-triangulate"),s=a("../../lib"),t=a("../../lib/str2rgbarray"),u=a("../../lib/gl_format_color"),v=a("../scatter/make_bubble_size_func"),w=a("../../constants/gl3d_dashes"),x=a("../../constants/gl3d_markers"),y=a("./calc_errors"),z=d.prototype;z.handlePick=function(a){if(a.object&&(a.object===this.linePlot||a.object===this.delaunayMesh||a.object===this.textMarkers||a.object===this.scatterPlot)){a.object.highlight&&a.object.highlight(null),this.scatterPlot&&(a.object=this.scatterPlot,this.scatterPlot.highlight(a.data)),this.textLabels?void 0!==this.textLabels[a.data.index]?a.textLabel=this.textLabels[a.data.index]:a.textLabel=this.textLabels:a.textLabel="";var b=a.index=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},z.update=function(a){var b,c,d,f,g=this.scene.glplot.gl,h=w.solid;this.data=a;var i=k(this.scene,a);"mode"in i&&(this.mode=i.mode),"lineDashes"in i&&i.lineDashes in w&&(h=w[i.lineDashes]),this.color=l(i.scatterColor)||l(i.lineColor),this.dataPoints=i.position,b={gl:g,position:i.position,color:i.lineColor,lineWidth:i.lineWidth||1,dashes:h[0],dashScale:h[1],opacity:a.opacity,connectGaps:a.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(b):(this.linePlot=n(b),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=a.opacity;if(a.marker&&a.marker.opacity&&(j*=a.marker.opacity),c={gl:g,position:i.position,color:i.scatterColor,size:i.scatterSize,glyph:i.scatterMarker,opacity:j,orthographic:!0,lineWidth:i.scatterLineWidth,lineColor:i.scatterLineColor,project:i.project,projectScale:i.projectScale,projectOpacity:i.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(c):(this.scatterPlot=o(c),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),f={gl:g,position:i.position,glyph:i.text,color:i.textColor,size:i.textSize,angle:i.textAngle,alignment:i.textOffset,font:i.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:a.opacity},this.textLabels=a.hovertext||a.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(f):(this.textMarkers=o(f),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),d={gl:g,position:i.position,color:i.errorColor,error:i.errorBounds,lineWidth:i.errorLineWidth,capSize:i.errorCapSize,opacity:a.opacity},this.errorBars?i.errorBounds?this.errorBars.update(d):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):i.errorBounds&&(this.errorBars=p(d),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),i.delaunayAxis>=0){var m=e(i.position,i.delaunayColor,i.delaunayAxis);m.opacity=a.opacity,this.delaunayMesh?this.delaunayMesh.update(m):(m.gl=g,this.delaunayMesh=q(m),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},z.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},b.exports=m},{"../../constants/gl3d_dashes":718,"../../constants/gl3d_markers":719,"../../lib":743,"../../lib/gl_format_color":739,"../../lib/str2rgbarray":765,"../scatter/make_bubble_size_func":1083,"./calc_errors":1093,"delaunay-triangulate":130,"gl-error3d":168,"gl-line3d":177,"gl-mesh3d":210,"gl-scatter3d":239}],1095:[function(a,b,c){"use strict";function d(a,b,c,d){var f=0,g=c("x"),h=c("y"),i=c("z");return e.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],d),g&&h&&i&&(f=Math.min(g.length,h.length,i.length),f<g.length&&(b.x=g.slice(0,f)),f<h.length&&(b.y=h.slice(0,f)),f<i.length&&(b.z=i.slice(0,f))),f}var e=a("../../registry"),f=a("../../lib"),g=a("../scatter/subtypes"),h=a("../scatter/marker_defaults"),i=a("../scatter/line_defaults"),j=a("../scatter/text_defaults"),k=a("../../components/errorbars/defaults"),l=a("./attributes");b.exports=function(a,b,c,e){function m(c,d){return f.coerce(a,b,l,c,d)}if(!d(a,b,m,e))return void(b.visible=!1);m("text"),m("hovertext"),m("mode"),g.hasLines(b)&&(m("connectgaps"),i(a,b,c,e,m)),g.hasMarkers(b)&&h(a,b,c,e,m,{noSelect:!0}),g.hasText(b)&&j(a,b,e,m,{noSelect:!0});var n=(b.line||{}).color,o=(b.marker||{}).color;m("surfaceaxis")>=0&&m("surfacecolor",n||o);for(var p=["x","y","z"],q=0;q<3;++q){var r="projection."+p[q];m(r+".show")&&(m(r+".opacity"),m(r+".scale"))}k(a,b,c,{axis:"z"}),k(a,b,c,{axis:"y",inherit:"z"}),k(a,b,c,{axis:"x",inherit:"z"})}},{"../../components/errorbars/defaults":648,"../../lib":743,"../../registry":873,"../scatter/line_defaults":1079,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"../scatter/text_defaults":1089,"./attributes":1091}],1096:[function(a,b,c){"use strict";var d={};d.plot=a("./convert"),d.attributes=a("./attributes"),d.markerSymbols=a("../../constants/gl3d_markers"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.moduleType="trace",d.name="scatter3d",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d","symbols","markerColorscale","showLegend"],d.meta={},b.exports=d},{"../../constants/gl3d_markers":719,"../../plots/gl3d":832,"../scatter/colorbar":1070,"./attributes":1091,"./calc":1092,"./convert":1094,"./defaults":1095}],1097:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat,i=d.marker,j=d.line,k=i.line;b.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:h({},d.mode,{dflt:"markers"}),text:h({},d.text,{}),line:{color:j.color,width:j.width,dash:j.dash,shape:h({},j.shape,{values:["linear","spline"]}),smoothing:j.smoothing,editType:"calc"},connectgaps:d.connectgaps,fill:h({},d.fill,{values:["none","toself","tonext"]}),fillcolor:d.fillcolor,marker:h({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:h({width:k.width,editType:"calc"},f("marker".line)),gradient:i.gradient,editType:"calc"},f("marker"),{showscale:i.showscale,colorbar:g}),textfont:d.textfont,textposition:d.textposition,selected:d.selected,unselected:d.unselected,hoverinfo:h({},e.hoverinfo,{flags:["a","b","text","name"]}),hoveron:d.hoveron}},{"../../components/colorbar/attributes":619,"../../components/colorscale/color_attributes":626,"../../lib/extend":732,"../../plots/attributes":787,"../scatter/attributes":1066}],1098:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../scatter/colorscale_calc"),f=a("../scatter/arrays_to_calcdata"),g=a("../scatter/calc_selection"),h=a("../scatter/calc").calcMarkerSize,i=a("../carpet/lookup_carpetid");b.exports=function(a,b){var c=b.carpetTrace=i(a,b);if(c&&c.visible&&"legendonly"!==c.visible){var j;b.xaxis=c.xaxis,b.yaxis=c.yaxis;var k,l,m=b.a.length,n=new Array(m),o=!1;for(j=0;j<m;j++)if(k=b.a[j],l=b.b[j],d(k)&&d(l)){var p=c.ab2xy(+k,+l,!0),q=c.isVisible(+k,+l);q||(o=!0),n[j]={x:p[0],y:p[1],a:k,b:l,vis:q}}else n[j]={x:!1,y:!1};return b._needsCull=o,n[0].carpet=c,n[0].trace=b,h(b,m),e(b),f(n,b),g(n,b),n}}},{"../carpet/lookup_carpetid":931,"../scatter/arrays_to_calcdata":1065,"../scatter/calc":1067,"../scatter/calc_selection":1068,"../scatter/colorscale_calc":1071,"fast-isnumeric":140}],1099:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/line_shape_defaults"),j=a("../scatter/text_defaults"),k=a("../scatter/fillcolor_defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}n("carpet"),b.xaxis="x",b.yaxis="y";var o,p=n("a"),q=n("b");if(!(o=Math.min(p.length,q.length)))return void(b.visible=!1);p&&o<p.length&&(b.a=p.slice(0,o)),q&&o<q.length&&(b.b=q.slice(0,o)),n("text"),n("mode",o<e.PTS_LINESONLY?"lines+markers":"lines"),f.hasLines(b)&&(h(a,b,c,m,n),i(a,b,n),n("connectgaps")),f.hasMarkers(b)&&g(a,b,c,m,n,{gradient:!0}),f.hasText(b)&&j(a,b,m,n);var r=[];(f.hasMarkers(b)||f.hasText(b))&&(n("marker.maxdisplayed"),r.push("points")),n("fill"),"none"!==b.fill&&(k(a,b,c,n),f.hasLines(b)||i(a,b,n)),"tonext"!==b.fill&&"toself"!==b.fill||r.push("fills"),n("hoveron",r.join("+")||"points"),d.coerceSelectionMarkerOpacity(b,n)}},{"../../lib":743,"../scatter/constants":1072,"../scatter/fillcolor_defaults":1075,"../scatter/line_defaults":1079,"../scatter/line_shape_defaults":1081,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"../scatter/text_defaults":1089,"./attributes":1097}],1100:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){var f=d[e];return a.a=f.a,a.b=f.b,a}},{}],1101:[function(a,b,c){"use strict";var d=a("../scatter/hover");b.exports=function(a,b,c,e){function f(a,b){var c;c=a.labelprefix&&a.labelprefix.length>0?a.labelprefix.replace(/ = $/,""):a._hovertitle,r.push(c+": "+b.toFixed(3)+a.labelsuffix)}var g=d(a,b,c,e);if(g&&!1!==g[0].index){var h=g[0];if(void 0===h.index){var i=1-h.y0/a.ya._length,j=a.xa._length,k=j*i/2,l=j-k;return h.x0=Math.max(Math.min(h.x0,l),k),h.x1=Math.max(Math.min(h.x1,l),k),g}var m=h.cd[h.index];h.a=m.a,h.b=m.b,h.xLabelVal=void 0,h.yLabelVal=void 0;var n=h.trace,o=n._carpet,p=m.hi||n.hoverinfo,q=p.split("+"),r=[];-1!==q.indexOf("all")&&(q=["a","b"]),-1!==q.indexOf("a")&&f(o.aaxis,m.a),-1!==q.indexOf("b")&&f(o.baxis,m.b);var s=o.ab2ij([m.a,m.b]),t=Math.floor(s[0]),u=s[0]-t,v=Math.floor(s[1]),w=s[1]-v,x=o.evalxy([],t,v,u,w);return r.push("y: "+x[1].toFixed(3)),h.extraText=r.join("<br>"),g}}},{"../scatter/hover":1077}],1102:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("../scatter/style").style,d.hoverPoints=a("./hover"),d.selectPoints=a("../scatter/select"),d.eventData=a("./event_data"),d.moduleType="trace",d.name="scattercarpet",d.basePlotModule=a("../../plots/cartesian"),d.categories=["carpet","symbols","markerColorscale","showLegend","carpetDependent"],d.meta={},b.exports=d},{"../../plots/cartesian":800,"../scatter/colorbar":1070,"../scatter/select":1086,"../scatter/style":1087,"./attributes":1097,"./calc":1098,"./defaults":1099,"./event_data":1100,"./hover":1101,"./plot":1103}],1103:[function(a,b,c){"use strict";var d=a("../scatter/plot"),e=a("../../plots/cartesian/axes"),f=a("../../components/drawing");b.exports=function(a,b,c){var g,h,i,j=c[0][0].carpet,k={xaxis:e.getFromId(a,j.xaxis||"x"),yaxis:e.getFromId(a,j.yaxis||"y"),plot:b.plot};for(d(a,k,c),g=0;g<c.length;g++)h=c[g][0].trace,i=k.plot.selectAll("g.trace"+h.uid+" .js-line"),f.setClipUrl(i,j._clipPathId)}},{"../../components/drawing":643,"../../plots/cartesian/axes":789,"../scatter/plot":1085}],1104:[function(a,b,c){"use strict"
;var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/drawing/attributes").dash,h=a("../../lib/extend").extendFlat,i=a("../../plot_api/edit_types").overrideAll,j=d.marker,k=d.line,l=j.line;b.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:h({},d.mode,{dflt:"markers"}),text:h({},d.text,{}),hovertext:h({},d.hovertext,{}),textfont:d.textfont,textposition:d.textposition,line:{color:k.color,width:k.width,dash:g},connectgaps:d.connectgaps,marker:h({symbol:j.symbol,opacity:j.opacity,size:j.size,sizeref:j.sizeref,sizemin:j.sizemin,sizemode:j.sizemode,showscale:j.showscale,colorbar:j.colorbar,line:h({width:l.width},f("marker.line")),gradient:j.gradient},f("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:d.fillcolor,selected:d.selected,unselected:d.unselected,hoverinfo:h({},e.hoverinfo,{flags:["lon","lat","location","text","name"]})},"calc","nested")},{"../../components/colorscale/color_attributes":626,"../../components/drawing/attributes":642,"../../lib/extend":732,"../../plot_api/edit_types":773,"../../plots/attributes":787,"../scatter/attributes":1066}],1105:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../constants/numerical").BADNUM,f=a("../scatter/colorscale_calc"),g=a("../scatter/arrays_to_calcdata"),h=a("../scatter/calc_selection"),i=a("../../lib")._;b.exports=function(a,b){for(var c=Array.isArray(b.locations),j=c?b.locations.length:b.lon.length,k=new Array(j),l=0;l<j;l++){var m=k[l]={};if(c){var n=b.locations[l];m.loc="string"==typeof n?n:null}else{var o=b.lon[l],p=b.lat[l];d(o)&&d(p)?m.lonlat=[+o,+p]:m.lonlat=[e,e]}}return g(k,b),f(b),h(k,b),j&&(k[0].t={labels:{lat:i(a,"lat:")+" ",lon:i(a,"lon:")+" "}}),k}},{"../../constants/numerical":721,"../../lib":743,"../scatter/arrays_to_calcdata":1065,"../scatter/calc_selection":1068,"../scatter/colorscale_calc":1071,"fast-isnumeric":140}],1106:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=0,g=c("locations");return g?(c("locationmode"),f=g.length):(d=c("lon")||[],e=c("lat")||[],f=Math.min(d.length,e.length),f<d.length&&(b.lon=d.slice(0,f)),f<e.length&&(b.lat=e.slice(0,f)),f)}var e=a("../../lib"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/text_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("./attributes");b.exports=function(a,b,c,l){function m(c,d){return e.coerce(a,b,k,c,d)}if(!d(a,b,m))return void(b.visible=!1);m("text"),m("hovertext"),m("mode"),f.hasLines(b)&&(h(a,b,c,l,m),m("connectgaps")),f.hasMarkers(b)&&g(a,b,c,l,m,{gradient:!0}),f.hasText(b)&&i(a,b,l,m),m("fill"),"none"!==b.fill&&j(a,b,c,m)}},{"../../lib":743,"../scatter/fillcolor_defaults":1075,"../scatter/line_defaults":1079,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"../scatter/text_defaults":1089,"./attributes":1104}],1107:[function(a,b,c){"use strict";b.exports=function(a,b){return a.lon=b.lon,a.lat=b.lat,a.location=b.loc?b.loc:null,a}},{}],1108:[function(a,b,c){"use strict";function d(a,b,c,d){function e(a){return f.tickText(c,c.c2l(a),"hover").text+"°"}var g=b.hi||a.hoverinfo,h="all"===g?j.hoverinfo.flags:g.split("+"),k=-1!==h.indexOf("location")&&Array.isArray(a.locations),l=-1!==h.indexOf("lon"),m=-1!==h.indexOf("lat"),n=-1!==h.indexOf("text"),o=[];return k?o.push(b.loc):l&&m?o.push("("+e(b.lonlat[0])+", "+e(b.lonlat[1])+")"):l?o.push(d.lon+e(b.lonlat[0])):m&&o.push(d.lat+e(b.lonlat[1])),n&&i(b,a,o),o.join("<br>")}var e=a("../../components/fx"),f=a("../../plots/cartesian/axes"),g=a("../../constants/numerical").BADNUM,h=a("../scatter/get_trace_color"),i=a("../scatter/fill_hover_text"),j=a("./attributes");b.exports=function(a,b,c){function f(a){var d=a.lonlat;if(d[0]===g)return 1/0;if(n(d))return 1/0;var e=o(d),f=o([b,c]),h=Math.abs(e[0]-f[0]),i=Math.abs(e[1]-f[1]),j=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(h*h+i*i)-j,1-3/j)}var i=a.cd,j=i[0].trace,k=a.xa,l=a.ya,m=a.subplot,n=m.projection.isLonLatOverEdges,o=m.project;if(e.getClosest(i,f,a),!1!==a.index){var p=i[a.index],q=p.lonlat,r=[k.c2p(q),l.c2p(q)],s=p.mrc||1;return a.x0=r[0]-s,a.x1=r[0]+s,a.y0=r[1]-s,a.y1=r[1]+s,a.loc=p.loc,a.lon=q[0],a.lat=q[1],a.color=h(j,p),a.extraText=d(j,p,m.mockAxis,i[0].t.labels),[a]}}},{"../../components/fx":660,"../../constants/numerical":721,"../../plots/cartesian/axes":789,"../scatter/fill_hover_text":1074,"../scatter/get_trace_color":1076,"./attributes":1104}],1109:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("./style"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.selectPoints=a("./select"),d.moduleType="trace",d.name="scattergeo",d.basePlotModule=a("../../plots/geo"),d.categories=["geo","symbols","markerColorscale","showLegend","scatter-like"],d.meta={},b.exports=d},{"../../plots/geo":820,"../scatter/colorbar":1070,"./attributes":1104,"./calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./plot":1110,"./select":1111,"./style":1112}],1110:[function(a,b,c){"use strict";function d(a,b){var c=a[0].trace;if(Array.isArray(c.locations))for(var d=h(c,b),e=c.locationmode,f=0;f<a.length;f++){var j=a[f],k=i(e,j.loc,d);j.lonlat=k?k.properties.ct:[g,g]}}var e=a("d3"),f=a("../../lib"),g=a("../../constants/numerical").BADNUM,h=a("../../lib/topojson_utils").getTopojsonFeatures,i=a("../../lib/geo_location_utils").locationToFeature,j=a("../../lib/geojson_utils"),k=a("../scatter/subtypes"),l=a("./style");b.exports=function(a,b,c){function h(a){return a[0].trace.uid}function i(a,b){a.lonlat[0]===g&&e.select(b).remove()}for(var m=0;m<c.length;m++)d(c[m],b.topojson);var n=b.layers.frontplot.select(".scatterlayer").selectAll("g.trace.scattergeo").data(c,h);n.enter().append("g").attr("class","trace scattergeo"),n.exit().remove(),n.selectAll("*").remove(),n.each(function(b){var c=b[0].node3=e.select(this),d=b[0].trace;if(k.hasLines(d)||"none"!==d.fill){var g=j.calcTraceToLineCoords(b),h="none"!==d.fill?j.makePolygon(g):j.makeLine(g);c.selectAll("path.js-line").data([{geojson:h,trace:d}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}k.hasMarkers(d)&&c.selectAll("path.point").data(f.identity).enter().append("path").classed("point",!0).each(function(a){i(a,this)}),k.hasText(d)&&c.selectAll("g").data(f.identity).enter().append("g").append("text").each(function(a){i(a,this)}),l(a,b)})}},{"../../constants/numerical":721,"../../lib":743,"../../lib/geo_location_utils":735,"../../lib/geojson_utils":736,"../../lib/topojson_utils":769,"../scatter/subtypes":1088,"./style":1112,d3:128}],1111:[function(a,b,c){"use strict";var d=a("../scatter/subtypes");b.exports=function(a,b){var c,e,f,g,h,i=a.cd,j=a.xaxis,k=a.yaxis,l=[],m=i[0].trace;if(!d.hasMarkers(m)&&!d.hasText(m))return[];if(!1===b)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)c=i[h],e=c.lonlat,f=j.c2p(e),g=k.c2p(e),b.contains([f,g])?(l.push({pointNumber:h,lon:e[0],lat:e[1]}),c.selected=1):c.selected=0;return l}},{"../scatter/subtypes":1088}],1112:[function(a,b,c){"use strict";function d(a,b){var c=b[0].trace,d=b[0].node3;d.style("opacity",b[0].trace.opacity),h(d,c,a),d.selectAll("path.js-line").style("fill","none").each(function(a){var b=e.select(this),c=a.trace,d=c.line||{};b.call(g.stroke,d.color).call(f.dashLine,d.dash||"",d.width||0),"none"!==c.fill&&b.call(g.fill,c.fillcolor)})}var e=a("d3"),f=a("../../components/drawing"),g=a("../../components/color"),h=a("../scatter/style").stylePoints;b.exports=function(a,b){b&&d(a,b)}},{"../../components/color":618,"../../components/drawing":643,"../scatter/style":1087,d3:128}],1113:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../components/colorscale/color_attributes"),f=a("../../constants/gl2d_dashes"),g=a("../../lib/extend").extendFlat,h=a("../../plot_api/edit_types").overrideAll,i=d.line,j=d.marker,k=j.line,l=b.exports=h({x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:g({},d.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:i.color,width:i.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},marker:g({},e("marker"),{symbol:j.symbol,size:j.size,sizeref:j.sizeref,sizemin:j.sizemin,sizemode:j.sizemode,opacity:j.opacity,showscale:j.showscale,colorbar:j.colorbar,line:g({},e("marker.line"),{width:k.width})}),connectgaps:d.connectgaps,fill:d.fill,fillcolor:d.fillcolor,hoveron:d.hoveron,selected:{marker:d.selected.marker},unselected:{marker:d.unselected.marker},error_y:d.error_y,error_x:d.error_x},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes"},{"../../components/colorscale/color_attributes":626,"../../constants/gl2d_dashes":717,"../../lib/extend":732,"../../plot_api/edit_types":773,"../scatter/attributes":1066}],1114:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/xy_defaults"),h=a("../scatter/marker_defaults"),i=a("../scatter/line_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("../../components/errorbars/defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}var o=!!a.marker&&/-open/.test(a.marker.symbol),p=f.isBubble(a),q=g(a,b,m,n);if(!q)return void(b.visible=!1);n("text"),n("mode",q<e.PTS_LINESONLY?"lines+markers":"lines"),f.hasLines(b)&&(n("connectgaps"),i(a,b,c,m,n));var r=[];f.hasMarkers(b)&&(h(a,b,c,m,n),n("marker.line.width",o||p?1:0),r.push("points")),n("fill"),"none"!==b.fill&&j(a,b,c,n),"tonext"!==b.fill&&"toself"!==b.fill||r.push("fills"),n("hoveron",r.join("+")||"points"),k(a,b,c,{axis:"y"}),k(a,b,c,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(b,n)}},{"../../components/errorbars/defaults":648,"../../lib":743,"../scatter/constants":1072,"../scatter/fillcolor_defaults":1075,"../scatter/line_defaults":1079,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"../scatter/xy_defaults":1090,"./attributes":1113}],1115:[function(a,b,c){(function(c){"use strict";function d(a,b){var c,d,g,h,i,j=a._fullLayout,k={},l=p.getFromId(a,b.xaxis),m=p.getFromId(a,b.yaxis),n=j._plots[b.xaxis+b.yaxis],o="linear"===l.type?b.x:l.makeCalcdata(b,"x"),r="linear"===m.type?b.y:m.makeCalcdata(b,"y"),s=(o||r).length;if(!o)for(o=Array(s),d=0;d<s;d++)o[d]=d;if(!r)for(r=Array(s),d=0;d<s;d++)r[d]=d;var u,v;if("log"===l.type)for(u=Array(o.length),d=0,g=o.length;d<g;d++)u[d]=o[d],o[d]=l.d2l(o[d]);else for(u=o,d=0,g=o.length;d<g;d++)o[d]=parseFloat(o[d]);if("log"===m.type)for(v=Array(r.length),d=0,g=r.length;d<g;d++)v[d]=r[d],r[d]=m.d2l(r[d]);else for(v=r,d=0,g=r.length;d<g;d++)r[d]=parseFloat(r[d]);for(c=new Array(2*s),d=0;d<s;d++)h=G(o[d])?+o[d]:NaN,i=G(r[d])?+r[d]:NaN,c[2*d]=h,c[2*d+1]=i;if("log"!==l.type&&"log"!==m.type)k.tree=q(c,512);else{var w=k.ids=Array(s);for(d=0;d<s;d++)w[d]=d}t(b);var x=e(a,n,b,c);if(x.markers)if(Array.isArray(x.markers.sizes)){var y=x.markers.sizes;p.expand(l,u,{padded:!0,ppad:y}),p.expand(m,v,{padded:!0,ppad:y})}else{var z=[1/0,-1/0],A=[1/0,-1/0],B=x.markers.size;for(d=0;d<s;d++)h=o[d],i=r[d],z[0]>h&&(z[0]=h),z[1]<h&&(z[1]=h),A[0]>i&&(A[0]=i),A[1]<i&&(A[1]=i);s<N?(p.expand(l,u,{padded:!0,ppad:B}),p.expand(m,v,{padded:!0,ppad:B})):(l._min&&l._min.push({val:z[0],pad:B}),l._max&&l._max.push({val:z[1],pad:B}),m._min&&m._min.push({val:A[0],pad:B}),m._max&&m._max.push({val:A[1],pad:B}))}else p.expand(l,u,{padded:!0}),p.expand(m,v,{padded:!0});var C=f(a,n);return x.fill&&!C.fill2d&&(C.fill2d=!0),x.marker&&!C.scatter2d&&(C.scatter2d=!0),x.line&&!C.line2d&&(C.line2d=!0),!x.errorX&&!x.errorY||C.error2d||(C.error2d=!0),C.lineOptions.push(x.line),C.errorXOptions.push(x.errorX),C.errorYOptions.push(x.errorY),C.fillOptions.push(x.fill),C.markerOptions.push(x.marker),C.selectedOptions.push(x.selected),C.unselectedOptions.push(x.unselected),C.count++,k.scene=C,k.index=C.count-1,k.x=o,k.y=r,k.rawx=u,k.rawy=v,k.positions=c,k.count=s,[{x:!1,y:!1,t:k,trace:b}]}function e(a,b,c,d){function e(a){var b,d,e,f={},h=Array.isArray(a.symbol);if(h||(d=/-open/.test(a.symbol)),h||Array.isArray(a.color)||Array.isArray(a.line.color)||Array.isArray(a.line)||Array.isArray(a.opacity)){f.colors=new Array(r),f.borderColors=new Array(r);var i=x(a,a.opacity,r),j=x(a.line,a.opacity,r);if(!Array.isArray(j[0])){var k=j;for(j=Array(r),b=0;b<r;b++)j[b]=k}if(!Array.isArray(i[0])){var l=i;for(i=Array(r),b=0;b<r;b++)i[b]=l}for(f.colors=i,f.borderColors=j,b=0;b<r;b++)h&&(e=a.symbol[b],d=/-open/.test(e)),d&&(j[b]=i[b].slice(),i[b]=i[b].slice(),i[b][3]=0);f.opacity=c.opacity}else d?(f.color=C(a.color,"uint8"),f.color[3]=0,f.borderColor=C(a.color,"uint8")):(f.color=C(a.color,"uint8"),f.borderColor=C(a.line.color,"uint8")),f.opacity=c.opacity*a.opacity;if(Array.isArray(a.symbol))for(f.markers=new Array(r),b=0;b<r;++b)f.markers[b]=g(a.symbol[b]);else f.marker=g(a.symbol);var m,n,o=a&&(Array.isArray(a.size)||Array.isArray(a.line.width)),p=v(c);if(o){n=f.sizes=new Array(r);var q=f.borderSizes=new Array(r);if(Array.isArray(a.size))for(b=0;b<r;++b)n[b]=p(a.size[b]);else for(m=p(a.size),b=0;b<r;++b)n[b]=m;if(Array.isArray(a.line.width))for(b=0;b<r;++b)q[b]=p(a.line.width[b]);else for(m=p(a.line.width),b=0;b<r;++b)q[b]=m}else m=f.size=p(a&&a.size||10),f.borderSizes=p(a.line.width);return f}var f,h,i,j,k,l,m,q=a._fullLayout,r=d.length/2,t=c.marker,u=0,y=0,z=p.getFromId(a,c.xaxis),A=p.getFromId(a,c.yaxis);!0!==c.visible?(h=!1,i=!1,j=!1,l=!1,m=!1):(h=s.hasLines(c)&&d.length>1,i=c.error_x&&!0===c.error_x.visible,j=c.error_y&&!0===c.error_y.visible,k=i||j,l=s.hasMarkers(c),m=!!c.fill&&"none"!==c.fill);var B,D,E,F,G,H,I,J,K=k?n.calcFromTrace(c,q):null;if(i){E={},E.positions=d;var L=new Float64Array(4*r);if("log"===z.type)for(f=0;f<r;++f)L[u++]=d[2*f]-z.d2l(K[f].xs)||0,L[u++]=z.d2l(K[f].xh)-d[2*f]||0,L[u++]=0,L[u++]=0;else for(f=0;f<r;++f)L[u++]=d[2*f]-K[f].xs||0,L[u++]=K[f].xh-d[2*f]||0,L[u++]=0,L[u++]=0;c.error_x.copy_ystyle&&(c.error_x=c.error_y),E.errors=L,E.capSize=2*c.error_x.width,E.lineWidth=c.error_x.thickness,E.color=c.error_x.color}if(j){F={},F.positions=d;var M=new Float64Array(4*r);if("log"===A.type)for(f=0;f<r;++f)M[y++]=0,M[y++]=0,M[y++]=d[2*f+1]-A.d2l(K[f].ys)||0,M[y++]=A.d2l(K[f].yh)-d[2*f+1]||0;else for(f=0;f<r;++f)M[y++]=0,M[y++]=0,M[y++]=d[2*f+1]-K[f].ys||0,M[y++]=K[f].yh-d[2*f+1]||0;F.errors=M,F.capSize=2*c.error_y.width,F.lineWidth=c.error_y.thickness,F.color=c.error_y.color}if(h){B={},B.thickness=c.line.width,B.color=c.line.color,B.opacity=c.opacity,B.overlay=!0;var O=(w[c.line.dash]||[1]).slice();for(f=0;f<O.length;++f)O[f]*=B.thickness;if(B.dashes=O,"hv"===c.line.shape){for(J=[],f=0;f<Math.floor(d.length/2)-1;f++)isNaN(d[2*f])||isNaN(d[2*f+1])?(J.push(NaN),J.push(NaN),J.push(NaN),J.push(NaN)):(J.push(d[2*f]),J.push(d[2*f+1]),J.push(d[2*f+2]),J.push(d[2*f+1]));J.push(d[d.length-2]),J.push(d[d.length-1])}else if("vh"===c.line.shape){for(J=[],f=0;f<Math.floor(d.length/2)-1;f++)isNaN(d[2*f])||isNaN(d[2*f+1])?(J.push(NaN),J.push(NaN),J.push(NaN),J.push(NaN)):(J.push(d[2*f]),J.push(d[2*f+1]),J.push(d[2*f]),J.push(d[2*f+3]));J.push(d[d.length-2]),J.push(d[d.length-1])}else J=d;var P=!1;for(f=0;f<J.length;f++)if(isNaN(J[f])){P=!0;break}if(B.join=P||J.length>N?"rect":l?"rect":"round",P&&c.connectgaps){var Q=J[0],R=J[1];for(f=0;f<J.length;f+=2)isNaN(J[f])||isNaN(J[f+1])?(J[f]=Q,J[f+1]=R):(Q=J[f],R=J[f+1])}B.positions=J}return m&&(G={},G.fill=c.fillcolor,G.thickness=0,G.closed=!0),l&&(D=e(t),H=c.selected?e(o({},t,c.selected.marker)):D,I=c.unselected?e(o({},t,c.unselected.marker)):D,D.positions=d),{line:B,marker:D,errorX:E,errorY:F,fill:G,selected:H,unselected:I}}function f(a,b){var c=b._scene,d=a._fullLayout;return b._scene||(c=b._scene={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],selectedOptions:[],unselectedOptions:[],errorXOptions:[],errorYOptions:[],selectBatch:null,unselectBatch:null,fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,select2d:null},c.update=function(a){for(var b=Array(c.count),d=0;d<c.count;d++)b[d]=a;c.fill2d&&c.fill2d.update(b),c.scatter2d&&c.scatter2d.update(b),c.line2d&&c.line2d.update(b),c.error2d&&c.error2d.update(b.concat(b)),c.select2d&&c.select2d.update(b),c.draw()},c.draw=function(){var a;for(a=0;a<c.count;a++)c.fill2d&&c.fill2d.draw(a);for(a=0;a<c.count;a++)c.line2d&&c.line2d.draw(a),c.error2d&&(c.error2d.draw(a),c.error2d.draw(a+c.count)),c.scatter2d&&!c.selectBatch&&c.scatter2d.draw(a);c.select2d&&c.selectBatch&&(c.select2d.draw(c.selectBatch),c.scatter2d.draw(c.unselectBatch)),c.dirty=!1},c.clear=function(){var a,e,f,g=d._size,h=d.width,i=d.height,j=b.xaxis,k=b.yaxis;a=j&&j.domain&&k&&k.domain?[g.l+j.domain[0]*g.w,g.b+k.domain[0]*g.h,h-g.r-(1-j.domain[1])*g.w,i-g.t-(1-k.domain[1])*g.h]:[g.l,g.b,h-g.r,i-g.t],c.select2d&&(f=c.select2d.regl,e=f._gl,e.enable(e.SCISSOR_TEST),e.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),c.scatter2d&&(f=c.scatter2d.regl,e=f._gl,e.enable(e.SCISSOR_TEST),e.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT))},c.clearSelect=function(){c.selectBatch&&(c.selectBatch=null,c.unselectBatch=null,c.scatter2d.update(c.markerOptions),c.clear(),c.draw())},c.destroy=function(){c.fill2d&&c.fill2d.destroy(),c.scatter2d&&c.scatter2d.destroy(),c.error2d&&c.error2d.destroy(),c.line2d&&c.line2d.destroy(),c.select2d&&c.select2d.destroy(),c.lineOptions=null,c.fillOptions=null,c.markerOptions=null,c.selectedOptions=null,c.unselectedOptions=null,c.errorXOptions=null,c.errorYOptions=null,c.selectBatch=null,c.unselectBatch=null,delete b._scene}),c.dirty||(c.dirty=!0,c.count=0,c.lineOptions=[],c.fillOptions=[],c.markerOptions=[],c.selectedOptions=[],c.unselectedOptions=[],c.errorXOptions=[],c.errorYOptions=[]),c}function g(a){if("circle"===a)return null;var b,c,d=u.symbolNumber(a),e=u.symbolFuncs[d%100],f=!!u.symbolNoDot[d%100],g=!!u.symbolNoFill[d%100],h=O.test(a);return L[a]?L[a]:(b=h&&!f?e(1.1*J)+M:e(J),c=D(b,{w:I,h:I,viewBox:[-J,-J,J,J],stroke:g?K:-K}),L[a]=c,c||null)}function h(a,b,d){if(d.length){var e=a._fullLayout,f=d[0][0].t,g=f.scene;if(g){var h=e._size,i=e.width,j=e.height;e._glcanvas.each(function(b){b.regl||b.pick||(b.regl=E({canvas:this,attributes:{antialias:!b.pick,preserveDrawingBuffer:!0},extensions:["ANGLE_instanced_arrays","OES_element_index_uint"],pixelRatio:a._context.plotGlPixelRatio||c.devicePixelRatio}))});var k=e._glcanvas.data()[0].regl;if(y(a,b,d),g.dirty){if(!0===g.error2d&&(g.error2d=B(k)),!0===g.line2d&&(g.line2d=A(k)),!0===g.scatter2d&&(g.scatter2d=z(k)),!0===g.fill2d&&(g.fill2d=A(k)),g.line2d&&g.line2d.update(g.lineOptions),g.error2d){var l=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(l)}g.scatter2d&&(g.selectBatch?(g.scatter2d.update(g.unselectedOptions),g.select2d.update(g.selectedOptions)):g.scatter2d.update(g.markerOptions)),g.fill2d&&(g.fillOptions.forEach(function(a,b){var c=d[b];if(a&&c&&c[0]&&c[0].trace){var e,f,h=c[0],i=h.trace,j=h.t,k=g.lineOptions[b],l=[],m=k&&k.positions||j.positions;if("tozeroy"===i.fill)l=[m[0],0],l=l.concat(m),l.push(m[m.length-2]),l.push(0);else if("tozerox"===i.fill)l=[0,m[1]],l=l.concat(m),l.push(0),l.push(m[m.length-1]);else if("toself"===i.fill||"tonext"===i.fill){for(l=[],e=0,f=0;f<m.length;f+=2)(isNaN(m[f])||isNaN(m[f+1]))&&(l=l.concat(m.slice(e,f)),l.push(m[e],m[e+1]),e=f+2);l=l.concat(m.slice(e)),e&&l.push(m[e],m[e+1])}else{var n=i._nexttrace;if(n){var o=g.lineOptions[b+1];if(o){var p=o.positions;if("tonexty"===i.fill){for(l=m.slice(),b=Math.floor(p.length/2);b--;){var q=p[2*b],r=p[2*b+1];isNaN(q)||isNaN(r)||(l.push(q),l.push(r))}a.fill=n.fillcolor}}}}if(i._prevtrace&&"tonext"===i._prevtrace.fill){var s=g.lineOptions[b-1].positions,t=l.length/2;e=t;var u=[e];for(f=0;f<s.length;f+=2)(isNaN(s[f])||isNaN(s[f+1]))&&(u.push(f/2+t+1),e=f+2);l=l.concat(s),a.hole=u}a.opacity=i.opacity,a.positions=l}}),g.fill2d.update(g.fillOptions))}var m=e.dragmode;"lasso"!==m&&"select"!==m||g.select2d&&g.selectBatch&&g.scatter2d.update(g.unselectedOptions);var n=d.map(function(c){if(c&&c[0]&&c[0].trace){var d,f=c[0],k=f.trace,l=f.t,n=l.rawx,o=l.rawy,q=b.xaxis||p.getFromId(a,k.xaxis||"x"),r=b.yaxis||p.getFromId(a,k.yaxis||"y"),s=[(q._rl||q.range)[0],(r._rl||r.range)[0],(q._rl||q.range)[1],(r._rl||r.range)[1]],t=[h.l+q.domain[0]*h.w,h.b+r.domain[0]*h.h,i-h.r-(1-q.domain[1])*h.w,j-h.t-(1-r.domain[1])*h.h];if(k.selectedpoints||"lasso"===m||"select"===m){if(!g.select2d&&g.scatter2d){var u=e._glcanvas.data()[1].regl;g.select2d=z(u,{clone:g.scatter2d}),g.select2d.update(g.selectedOptions),k.selectedpoints&&!g.selectBatch&&(g.selectBatch=Array(g.count),g.unselectBatch=Array(g.count),g.scatter2d.update(g.unselectedOptions))}else g.select2d.update(g.selectedOptions);if(k.selectedpoints&&!g.unselectBatch[l.index]){g.selectBatch[l.index]=k.selectedpoints;var v=k.selectedpoints,w={};for(d=0;d<v.length;d++)w[v[d]]=!0;var x=[];for(d=0;d<l.count;d++)w[d]||x.push(d);g.unselectBatch[l.index]=x}var y=Array(l.count),A=Array(l.count);for(d=0;d<l.count;d++)y[d]=q.c2p(n[d]),A[d]=r.c2p(o[d]);l.xpx=y,l.ypx=A}else l.xpx=l.ypx=null;return k.visible?{viewport:t,range:s}:null}});g.fill2d&&g.fill2d.update(n),g.line2d&&g.line2d.update(n),g.error2d&&g.error2d.update(n.concat(n)),g.scatter2d&&g.scatter2d.update(n),g.select2d&&g.select2d.update(n),g.draw()}}}function i(a,b,c,d){var e,f=a.cd,g=f[0].t,h=f[0].trace,i=a.xa,j=a.ya,k=g.rawx,o=g.rawy,p=i.c2p(b),q=j.c2p(c);if(g.tree){var r=i.p2c(p-H),s=i.p2c(p+H),t=j.p2c(q-H),u=j.p2c(q+H);e="x"===d?g.tree.range(Math.min(r,s),Math.min(j._rl[0],j._rl[1]),Math.max(r,s),Math.max(j._rl[0],j._rl[1])):g.tree.range(Math.min(r,s),Math.min(t,u),Math.max(r,s),Math.max(t,u))}else{if(!g.ids)return[a];e=g.ids}var v,w,x,y,z,A,B,C=H;if("x"===d)for(y=0;y<e.length;y++)w=k[e[y]],(z=Math.abs(i.c2p(w)-p))<C&&(C=z,v=e[y]);else for(y=0;y<e.length;y++)w=k[e[y]],x=o[e[y]],z=i.c2p(w)-p,A=j.c2p(x)-q,(B=Math.sqrt(z*z+A*A))<C&&(C=B,v=e[y]);if(a.index=v,void 0===v)return[a];var D={pointNumber:v,x:k[v],y:o[v]};D.tx=Array.isArray(h.text)?h.text[v]:h.text,D.htx=Array.isArray(h.hovertext)?h.hovertext[v]:h.hovertext,D.data=Array.isArray(h.customdata)?h.customdata[v]:h.customdata,D.tp=Array.isArray(h.textposition)?h.textposition[v]:h.textposition;var E=h.textfont;E&&(D.ts=Array.isArray(E.size)?E.size[v]:E.size,D.tc=Array.isArray(E.color)?E.color[v]:E.color,D.tf=Array.isArray(E.family)?E.family[v]:E.family);var G=h.marker;G&&(D.ms=Array.isArray(G.size)?G.size[v]:G.size,D.mo=Array.isArray(G.opacity)?G.opacity[v]:G.opacity,D.mx=Array.isArray(G.symbol)?G.symbol[v]:G.symbol,D.mc=Array.isArray(G.color)?G.color[v]:G.color);var I=G&&G.line;I&&(D.mlc=Array.isArray(I.color)?I.color[v]:I.color,D.mlw=Array.isArray(I.width)?I.width[v]:I.width);var J=G&&G.gradient;J&&"none"!==J.type&&(D.mgt=Array.isArray(J.type)?J.type[v]:J.type,D.mgc=Array.isArray(J.color)?J.color[v]:J.color);var K=i.c2p(D.x,!0),L=j.c2p(D.y,!0),M=D.mrc||1,N=h.hoverlabel;N&&(D.hbg=Array.isArray(N.bgcolor)?N.bgcolor[v]:N.bgcolor,D.hbc=Array.isArray(N.bordercolor)?N.bordercolor[v]:N.bordercolor,D.hts=Array.isArray(N.font.size)?N.font.size[v]:N.font.size,D.htc=Array.isArray(N.font.color)?N.font.color[v]:N.font.color,D.htf=Array.isArray(N.font.family)?N.font.family[v]:N.font.family,D.hnl=Array.isArray(N.namelength)?N.namelength[v]:N.namelength);var O=h.hoverinfo;O&&(D.hi=Array.isArray(O)?O[v]:O);var P={};return P[a.index]=D,l.extendFlat(a,{color:m(h,D),x0:K-M,x1:K+M,xLabelVal:D.x,y0:L-M,y1:L+M,yLabelVal:D.y,cd:P}),D.htx?a.text=D.htx:D.tx?a.text=D.tx:h.text&&(a.text=h.text),F(D,h,a),n.hoverInfo(D,h,a),[a]}function j(a,b){var c=a.cd,d=[],e=c[0].trace,f=c[0].t,g=f.x,h=f.y,i=f.rawx,j=f.rawy,k=f.scene;if(!k)return d;var l=!s.hasMarkers(e)&&!s.hasText(e);if(!0!==e.visible||l)return d;var m,n=null,o=null;if(!1===b||b.degenerate)for(o=Array(f.count),m=0;m<f.count;m++)o[m]=m;else for(n=[],o=[],m=0;m<f.count;m++)b.contains([f.xpx[m],f.ypx[m]])?(n.push(m),d.push({pointNumber:m,x:i?i[m]:g[m],y:j?j[m]:h[m]})):o.push(m);return k.selectBatch||(k.selectBatch=Array(k.count),k.unselectBatch=Array(k.count),k.scatter2d.update(k.unselectedOptions)),k.selectBatch[f.index]=n,k.unselectBatch[f.index]=o,d}function k(a,b){if(b){var c=b[0].t,d=c.scene;d.clear(),d.draw()}}var l=a("../../lib"),m=a("../scatter/get_trace_color"),n=a("../../components/errorbars"),o=a("object-assign"),p=a("../../plots/cartesian/axes"),q=a("kdgrass"),r=a("../../components/fx"),s=a("../scatter/subtypes"),t=a("../scatter/colorscale_calc"),u=a("../../components/drawing"),v=a("../scatter/make_bubble_size_func"),w=a("../../constants/gl2d_dashes"),x=a("../../lib/gl_format_color"),y=a("../scatter/link_traces"),z=a("regl-scatter2d"),A=a("regl-line2d"),B=a("regl-error2d"),C=a("color-normalize"),D=a("svg-path-sdf"),E=a("regl"),F=a("../scatter/fill_hover_text"),G=a("fast-isnumeric"),H=r.constants.MAXDIST,I=200,J=20,K=J/20,L={},M=u.symbolFuncs[0](.05*J),N=1e5,O=/-dot/;b.exports={moduleType:"trace",name:"scattergl",basePlotModule:a("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","markerColorscale","showLegend","scatter-like"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),cleanData:a("../scatter/clean_data"),colorbar:a("../scatter/colorbar"),calc:d,plot:h,hoverPoints:i,style:k,selectPoints:j,sceneOptions:e,sceneUpdate:f,meta:{}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../components/drawing":643,"../../components/errorbars":649,"../../components/fx":660,"../../constants/gl2d_dashes":717,"../../lib":743,"../../lib/gl_format_color":739,"../../plots/cartesian":800,"../../plots/cartesian/axes":789,"../scatter/clean_data":1069,"../scatter/colorbar":1070,"../scatter/colorscale_calc":1071,"../scatter/fill_hover_text":1074,"../scatter/get_trace_color":1076,"../scatter/link_traces":1082,"../scatter/make_bubble_size_func":1083,"../scatter/subtypes":1088,"./attributes":1113,"./defaults":1114,"color-normalize":99,"fast-isnumeric":140,kdgrass:292,"object-assign":462,regl:506,"regl-error2d":500,"regl-line2d":501,"regl-scatter2d":503,"svg-path-sdf":544}],1116:[function(a,b,c){"use strict";var d=a("../scattergeo/attributes"),e=a("../scatter/attributes"),f=a("../../plots/mapbox/layout_attributes"),g=a("../../plots/attributes"),h=a("../../components/colorbar/attributes"),i=a("../../lib/extend").extendFlat,j=a("../../plot_api/edit_types").overrideAll,k=d.line,l=d.marker;b.exports=j({lon:d.lon,lat:d.lat,mode:i({},e.mode,{dflt:"markers"}),text:i({},e.text,{}),hovertext:i({},e.hovertext,{}),line:{color:k.color,width:k.width},connectgaps:e.connectgaps,marker:{symbol:{valType:"string",dflt:"circle",arrayOk:!0},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,color:l.color,colorscale:l.colorscale,cauto:l.cauto,cmax:l.cmax,cmin:l.cmin,autocolorscale:l.autocolorscale,reversescale:l.reversescale,showscale:l.showscale,colorbar:h},fill:d.fill,fillcolor:e.fillcolor,textfont:f.layers.symbol.textfont,textposition:f.layers.symbol.textposition,selected:{marker:{opacity:e.selected.marker.opacity}},unselected:{marker:{opacity:e.unselected.marker.opacity}},hoverinfo:i({},g.hoverinfo,{flags:["lon","lat","text","name"]})},"calc","nested")},{"../../components/colorbar/attributes":619,"../../lib/extend":732,"../../plot_api/edit_types":773,"../../plots/attributes":787,"../../plots/mapbox/layout_attributes":848,"../scatter/attributes":1066,"../scattergeo/attributes":1104}],1117:[function(a,b,c){"use strict";function d(){return{geojson:q.makeBlank(),layout:{visibility:"none"},paint:{}}}function e(a,b){function c(a,c,d,e){void 0===b[c][d]&&(b[c][d]=e),a[c]=b[c][d]}var d,e=a[0].trace,f=e.marker;r.hasColorscale(e,"marker")?d=r.makeColorScaleFunc(r.extractScale(f.colorscale,f.cmin,f.cmax)):Array.isArray(f.color)&&(d=o.identity);var g;t.isBubble(e)&&(g=s(e));var h;h=e.selectedpoints?function(a,b){return e.opacity*b*(a.selected?1:v)}:function(a,b){return e.opacity*b};var i;Array.isArray(f.opacity)?i=function(a){var b=n(a.mo)?+o.constrain(a.mo,0,1):0;return h(a,b)}:e.selectedpoints&&(i=function(a){return h(a,f.opacity)});for(var j=[],k=0;k<a.length;k++){var l=a[k],p=l.lonlat;if(!m(p)){var q={};if(d){var u=l.mcc=d(l.mc);c(q,w,u,k)}g&&c(q,x,g(l.ms),k),i&&c(q,y,i(l),k),j.push({type:"Feature",geometry:{type:"Point",coordinates:p},properties:q})}}return{type:"FeatureCollection",features:j}}function f(a){for(var b=a[0].trace,c=b.marker||{},d=c.symbol,e=b.text,f="circle"!==d?j(d):k,g=t.hasText(b)?j(e):k,h=[],i=0;i<a.length;i++){var l=a[i];m(l.lonlat)||h.push({type:"Feature",geometry:{type:"Point",coordinates:l.lonlat},properties:{symbol:f(l.mx),text:g(l.tx)}})}return{type:"FeatureCollection",features:h}}function g(a,b){var c,d=a.marker;if(Array.isArray(d.color)){for(var e=Object.keys(b[w]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[w][h],h])}c={property:w,stops:f}}else c=d.color;return c}function h(a,b){var c,d=a.marker;if(Array.isArray(d.size)){for(var e=Object.keys(b[x]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[x][h],+h])}c={property:x,stops:f.sort(l)}}else c=d.size/2;return c}function i(a,b){var c,d=a.marker;if(Array.isArray(d.opacity)||a.selectedpoints){for(var e=Object.keys(b[y]),f=[],g=0;g<e.length;g++){var h=e[g];f.push([b[y][h],+h])}c={property:y,stops:f.sort(l)}}else c=a.opacity*d.opacity;return c}function j(a){return Array.isArray(a)?function(a){return a}:a?function(){return a}:k}function k(){return""}function l(a,b){return a[0]-b[0]}function m(a){return a[0]===p}var n=a("fast-isnumeric"),o=a("../../lib"),p=a("../../constants/numerical").BADNUM,q=a("../../lib/geojson_utils"),r=a("../../components/colorscale"),s=a("../scatter/make_bubble_size_func"),t=a("../scatter/subtypes"),u=a("../../plots/mapbox/convert_text_opts"),v=a("../../constants/interactions").DESELECTDIM,w="circle-color",x="circle-radius",y="circle-opacity";b.exports=function(a){var b=a[0].trace,c=!0===b.visible,j="none"!==b.fill,k=t.hasLines(b),l=t.hasMarkers(b),m=t.hasText(b),n=l&&"circle"===b.marker.symbol,p=l&&"circle"!==b.marker.symbol,r=d(),s=d(),v=d(),z=d(),A={fill:r,line:s,circle:v,symbol:z};if(!c)return A;var B;if((j||k)&&(B=q.calcTraceToLineCoords(a)),j&&(r.geojson=q.makePolygon(B),r.layout.visibility="visible",o.extendFlat(r.paint,{"fill-color":b.fillcolor})),k&&(s.geojson=q.makeLine(B),s.layout.visibility="visible",o.extendFlat(s.paint,{"line-width":b.line.width,"line-color":b.line.color,"line-opacity":b.opacity})),n){var C={};C[w]={},C[x]={},C[y]={},v.geojson=e(a,C),v.layout.visibility="visible",o.extendFlat(v.paint,{"circle-opacity":i(b,C),"circle-color":g(b,C),"circle-radius":h(b,C)})}if((p||m)&&(z.geojson=f(a),o.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),p&&(o.extendFlat(z.layout,{"icon-size":b.marker.size/10}),o.extendFlat(z.paint,{"icon-opacity":b.opacity*b.marker.opacity,"icon-color":b.marker.color})),m)){var D=(b.marker||{}).size,E=u(b.textposition,D);o.extendFlat(z.layout,{"text-size":b.textfont.size,"text-anchor":E.anchor,"text-offset":E.offset}),o.extendFlat(z.paint,{"text-color":b.textfont.color,"text-opacity":b.opacity})}return A}},{"../../components/colorscale":633,"../../constants/interactions":720,"../../constants/numerical":721,"../../lib":743,"../../lib/geojson_utils":736,"../../plots/mapbox/convert_text_opts":845,"../scatter/make_bubble_size_func":1083,"../scatter/subtypes":1088,"fast-isnumeric":140}],1118:[function(a,b,c){"use strict";function d(a,b,c){var d=c("lon")||[],e=c("lat")||[],f=Math.min(d.length,e.length);return f<d.length&&(b.lon=d.slice(0,f)),f<e.length&&(b.lat=e.slice(0,f)),f}
var e=a("../../lib"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/text_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("./attributes");b.exports=function(a,b,c,l){function m(c,d){return e.coerce(a,b,k,c,d)}if(!d(a,b,m))return void(b.visible=!1);if(m("text"),m("hovertext"),m("mode"),f.hasLines(b)&&(h(a,b,c,l,m,{noDash:!0}),m("connectgaps")),f.hasMarkers(b)){g(a,b,c,l,m,{noLine:!0,noSelect:!0});var n=b.marker;n.line={width:0},"circle"!==n.symbol&&(Array.isArray(n.size)&&(n.size=n.size[0]),Array.isArray(n.color)&&(n.color=n.color[0]))}f.hasText(b)&&i(a,b,l,m,{noSelect:!0}),m("fill"),"none"!==b.fill&&j(a,b,c,m),e.coerceSelectionMarkerOpacity(b,m)}},{"../../lib":743,"../scatter/fillcolor_defaults":1075,"../scatter/line_defaults":1079,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"../scatter/text_defaults":1089,"./attributes":1116}],1119:[function(a,b,c){"use strict";b.exports=function(a,b){return a.lon=b.lon,a.lat=b.lat,a}},{}],1120:[function(a,b,c){"use strict";function d(a,b,c){function d(a){return a+"°"}var e=b.hi||a.hoverinfo,f=e.split("+"),h=-1!==f.indexOf("all"),i=-1!==f.indexOf("lon"),j=-1!==f.indexOf("lat"),k=b.lonlat,l=[];return h||i&&j?l.push("("+d(k[0])+", "+d(k[1])+")"):i?l.push(c.lon+d(k[0])):j&&l.push(c.lat+d(k[1])),(h||-1!==f.indexOf("text"))&&g(b,a,l),l.join("<br>")}var e=a("../../components/fx"),f=a("../scatter/get_trace_color"),g=a("../scatter/fill_hover_text"),h=a("../../constants/numerical").BADNUM;b.exports=function(a,b,c){function g(a){var b=a.lonlat;if(b[0]===h)return 1/0;var d=Math.abs(k.c2p(b)-k.c2p([o,b[1]])),e=Math.abs(l.c2p(b)-l.c2p([b[0],c])),f=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(d*d+e*e)-f,1-3/f)}var i=a.cd,j=i[0].trace,k=a.xa,l=a.ya,m=b>=0?Math.floor((b+180)/360):Math.ceil((b-180)/360),n=360*m,o=b-n;if(e.getClosest(i,g,a),!1!==a.index){var p=i[a.index],q=p.lonlat,r=[q[0]+n,q[1]],s=k.c2p(r),t=l.c2p(r),u=p.mrc||1;return a.x0=s-u,a.x1=s+u,a.y0=t-u,a.y1=t+u,a.color=f(j,p),a.extraText=d(j,p,i[0].t.labels),[a]}}},{"../../components/fx":660,"../../constants/numerical":721,"../scatter/fill_hover_text":1074,"../scatter/get_trace_color":1076}],1121:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("../scattergeo/calc"),d.plot=a("./plot"),d.hoverPoints=a("./hover"),d.eventData=a("./event_data"),d.selectPoints=a("./select"),d.style=function(a,b){if(b){b[0].trace._glTrace.update(b)}},d.moduleType="trace",d.name="scattermapbox",d.basePlotModule=a("../../plots/mapbox"),d.categories=["mapbox","gl","symbols","markerColorscale","showLegend","scatterlike"],d.meta={},b.exports=d},{"../../plots/mapbox":846,"../scatter/colorbar":1070,"../scattergeo/calc":1105,"./attributes":1116,"./defaults":1118,"./event_data":1119,"./hover":1120,"./plot":1122,"./select":1123}],1122:[function(a,b,c){"use strict";function d(a,b){this.mapbox=a,this.map=a.map,this.uid=b,this.idSourceFill=b+"-source-fill",this.idSourceLine=b+"-source-line",this.idSourceCircle=b+"-source-circle",this.idSourceSymbol=b+"-source-symbol",this.idLayerFill=b+"-layer-fill",this.idLayerLine=b+"-layer-line",this.idLayerCircle=b+"-layer-circle",this.idLayerSymbol=b+"-layer-symbol",this.mapbox.initSource(this.idSourceFill),this.mapbox.initSource(this.idSourceLine),this.mapbox.initSource(this.idSourceCircle),this.mapbox.initSource(this.idSourceSymbol),this.map.addLayer({id:this.idLayerFill,source:this.idSourceFill,type:"fill"}),this.map.addLayer({id:this.idLayerLine,source:this.idSourceLine,type:"line"}),this.map.addLayer({id:this.idLayerCircle,source:this.idSourceCircle,type:"circle"}),this.map.addLayer({id:this.idLayerSymbol,source:this.idSourceSymbol,type:"symbol"})}function e(a){return"visible"===a.layout.visibility}var f=a("./convert"),g=d.prototype;g.update=function(a){var b=this.mapbox,c=f(a);b.setOptions(this.idLayerFill,"setLayoutProperty",c.fill.layout),b.setOptions(this.idLayerLine,"setLayoutProperty",c.line.layout),b.setOptions(this.idLayerCircle,"setLayoutProperty",c.circle.layout),b.setOptions(this.idLayerSymbol,"setLayoutProperty",c.symbol.layout),e(c.fill)&&(b.setSourceData(this.idSourceFill,c.fill.geojson),b.setOptions(this.idLayerFill,"setPaintProperty",c.fill.paint)),e(c.line)&&(b.setSourceData(this.idSourceLine,c.line.geojson),b.setOptions(this.idLayerLine,"setPaintProperty",c.line.paint)),e(c.circle)&&(b.setSourceData(this.idSourceCircle,c.circle.geojson),b.setOptions(this.idLayerCircle,"setPaintProperty",c.circle.paint)),e(c.symbol)&&(b.setSourceData(this.idSourceSymbol,c.symbol.geojson),b.setOptions(this.idLayerSymbol,"setPaintProperty",c.symbol.paint)),a[0].trace._glTrace=this},g.dispose=function(){var a=this.map;a.removeLayer(this.idLayerFill),a.removeLayer(this.idLayerLine),a.removeLayer(this.idLayerCircle),a.removeLayer(this.idLayerSymbol),a.removeSource(this.idSourceFill),a.removeSource(this.idSourceLine),a.removeSource(this.idSourceCircle),a.removeSource(this.idSourceSymbol)},b.exports=function(a,b){var c=b[0].trace,e=new d(a,c.uid);return e.update(b),e}},{"./convert":1117}],1123:[function(a,b,c){"use strict";var d=a("../scatter/subtypes");b.exports=function(a,b){var c,e,f,g,h,i=a.cd,j=a.xaxis,k=a.yaxis,l=[],m=i[0].trace;if(!d.hasMarkers(m))return[];if(!1===b)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)c=i[h],e=c.lonlat,f=j.c2p(e),g=k.c2p(e),b.contains([f,g])?(l.push({pointNumber:h,lon:e[0],lat:e[1]}),c.selected=1):c.selected=0;return l}},{"../scatter/subtypes":1088}],1124:[function(a,b,c){"use strict";var d=a("../../lib/extend").extendFlat,e=a("../scatter/attributes"),f=a("../../plots/attributes"),g=e.line;b.exports={mode:e.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:e.text,hovertext:e.hovertext,line:{color:g.color,width:g.width,dash:g.dash,shape:d({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:e.connectgaps,marker:e.marker,cliponaxis:d({},e.cliponaxis,{dflt:!1}),textposition:e.textposition,textfont:e.textfont,fill:d({},e.fill,{values:["none","toself","tonext"]}),fillcolor:e.fillcolor,hoverinfo:d({},f.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:e.hoveron,selected:e.selected,unselected:e.unselected}},{"../../lib/extend":732,"../../plots/attributes":787,"../scatter/attributes":1066}],1125:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../constants/numerical").BADNUM,f=a("../../plots/cartesian/axes"),g=a("../scatter/colorscale_calc"),h=a("../scatter/arrays_to_calcdata"),i=a("../scatter/calc_selection"),j=a("../scatter/calc").calcMarkerSize;b.exports=function(a,b){for(var c=a._fullLayout,k=b.subplot,l=c[k].radialaxis,m=c[k].angularaxis,n=l.makeCalcdata(b,"r"),o=m.makeCalcdata(b,"theta"),p=n.length,q=new Array(p),r=0;r<p;r++){var s=n[r],t=o[r],u=q[r]={};d(s)&&d(t)?(u.r=s,u.theta=t,u.rad=function(a){return m.c2rad(a,b.thetaunit)}(t)):u.r=e}var v=j(b,p);return f.expand(l,n,{ppad:v}),"linear"!==m.type&&(m.autorange=!0,f.expand(m,o)),g(b),h(q,b),i(q,b),q}},{"../../constants/numerical":721,"../../plots/cartesian/axes":789,"../scatter/arrays_to_calcdata":1065,"../scatter/calc":1067,"../scatter/calc_selection":1068,"../scatter/colorscale_calc":1071,"fast-isnumeric":140}],1126:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/subtypes"),f=a("../scatter/marker_defaults"),g=a("../scatter/line_defaults"),h=a("../scatter/line_shape_defaults"),i=a("../scatter/text_defaults"),j=a("../scatter/fillcolor_defaults"),k=a("../scatter/constants").PTS_LINESONLY,l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}var o=n("r"),p=n("theta"),q=o&&p?Math.min(o.length,p.length):0;if(!q)return void(b.visible=!1);q<o.length&&(b.r=o.slice(0,q)),q<p.length&&(b.theta=p.slice(0,q)),n("thetaunit"),n("mode",q<k?"lines+markers":"lines"),n("text"),n("hovertext"),e.hasLines(b)&&(g(a,b,c,m,n),h(a,b,n),n("connectgaps")),e.hasMarkers(b)&&f(a,b,c,m,n,{gradient:!0}),e.hasText(b)&&i(a,b,m,n);var r=[];(e.hasMarkers(b)||e.hasText(b))&&(n("cliponaxis"),n("marker.maxdisplayed"),r.push("points")),n("fill"),"none"!==b.fill&&(j(a,b,c,n),e.hasLines(b)||h(a,b,n)),"tonext"!==b.fill&&"toself"!==b.fill||r.push("fills"),n("hoveron",r.join("+")||"points"),d.coerceSelectionMarkerOpacity(b,n)}},{"../../lib":743,"../scatter/constants":1072,"../scatter/fillcolor_defaults":1075,"../scatter/line_defaults":1079,"../scatter/line_shape_defaults":1081,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"../scatter/text_defaults":1089,"./attributes":1124}],1127:[function(a,b,c){"use strict";function d(a,b,c,d){var g=f(a,b,c,d);if(g&&!1!==g[0].index){var h=g[0];if(void 0===h.index)return g;var i=a.subplot,j=h.cd[h.index],k=h.trace;if(i.isPtWithinSector(j))return h.xLabelVal=void 0,h.yLabelVal=void 0,h.extraText=e(j,k,i),g}}function e(a,b,c){function d(a,b){k.push(a._hovertitle+": "+g.tickText(a,b,"hover").text)}var e=c.radialAxis,f=c.angularAxis,i=a.hi||b.hoverinfo,j=i.split("+"),k=[];e._hovertitle="r",f._hovertitle="θ";var l,m=f._c2rad(a.theta,b.thetaunit);return l="linear"===f.type&&b.thetaunit!==f.thetaunit?"degrees"===f.thetaunit?h.rad2deg(m):m:a.theta,-1!==j.indexOf("all")&&(j=["r","theta"]),-1!==j.indexOf("r")&&d(e,e.c2r(a.r)),-1!==j.indexOf("theta")&&d(f,l),k.join("<br>")}var f=a("../scatter/hover"),g=a("../../plots/cartesian/axes"),h=a("../../lib");b.exports={hoverPoints:d,makeHoverPointText:e}},{"../../lib":743,"../../plots/cartesian/axes":789,"../scatter/hover":1077}],1128:[function(a,b,c){"use strict";b.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:a("../../plots/polar"),categories:["polar","symbols","markerColorscale","showLegend","scatter-like"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,hoverPoints:a("./hover").hoverPoints,selectPoints:a("../scatter/select"),meta:{}}},{"../../plots/polar":855,"../scatter/select":1086,"../scatter/style":1087,"./attributes":1124,"./calc":1125,"./defaults":1126,"./hover":1127,"./plot":1129}],1129:[function(a,b,c){"use strict";var d=a("../scatter/plot"),e=a("../../constants/numerical").BADNUM;b.exports=function(a,b,c){var f,g,h,i={xaxis:b.xaxis,yaxis:b.yaxis,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.circle:null},j=b.radialAxis,k=j.range;for(h=k[0]>k[1]?function(a){return a<=0}:function(a){return a>=0},f=0;f<c.length;f++)for(g=0;g<c[f].length;g++){var l=c[f][g],m=l.r;if(m!==e){var n=j.c2r(m)-k[0];if(h(n)){var o=l.rad;l.x=n*Math.cos(o),l.y=n*Math.sin(o);continue}l.intoCenter=[b.cxx,b.cyy]}l.x=e,l.y=e}d(a,i,c)}},{"../../constants/numerical":721,"../scatter/plot":1085}],1130:[function(a,b,c){"use strict";var d=a("../scatterpolar/attributes"),e=a("../scattergl/attributes");b.exports={mode:d.mode,r:d.r,theta:d.theta,thetaunit:d.thetaunit,text:d.text,line:e.line,connectgaps:e.connectgaps,marker:e.marker,fill:e.fill,fillcolor:e.fillcolor,hoverinfo:d.hoverinfo,hoveron:d.hoveron,selected:d.selected,unselected:d.unselected}},{"../scattergl/attributes":1113,"../scatterpolar/attributes":1124}],1131:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/subtypes"),f=a("../scatter/marker_defaults"),g=a("../scatter/line_defaults"),h=a("../scatter/fillcolor_defaults"),i=a("../scatter/constants").PTS_LINESONLY,j=a("./attributes");b.exports=function(a,b,c,k){function l(c,e){return d.coerce(a,b,j,c,e)}var m=l("r"),n=l("theta"),o=m&&n?Math.min(m.length,n.length):0;if(!o)return void(b.visible=!1);o<m.length&&(b.r=m.slice(0,o)),o<n.length&&(b.theta=n.slice(0,o)),l("thetaunit"),l("mode",o<i?"lines+markers":"lines"),l("text"),e.hasLines(b)&&(g(a,b,c,k,l),l("connectgaps"));var p=[];e.hasMarkers(b)&&(f(a,b,c,k,l),p.push("points")),l("fill"),"none"!==b.fill&&h(a,b,c,l),"tonext"!==b.fill&&"toself"!==b.fill||p.push("fills"),l("hoveron",p.join("+")||"points"),d.coerceSelectionMarkerOpacity(b,l)}},{"../../lib":743,"../scatter/constants":1072,"../scatter/fillcolor_defaults":1075,"../scatter/line_defaults":1079,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"./attributes":1130}],1132:[function(a,b,c){"use strict";function d(a,b){var c=a._fullLayout,d=b.subplot,e=c[d].radialaxis,f=c[d].angularaxis,g=e.makeCalcdata(b,"r"),h=f.makeCalcdata(b,"theta"),i={};return j(b),i.r=g,i.theta=h,k.expand(e,g,{tozero:!0}),"linear"!==f.type&&(f.autorange=!0,k.expand(f,h)),[{x:!1,y:!1,t:i,trace:b}]}function e(a,b,c){var d=b.radialAxis,e=b.angularAxis,f=d.range,j=i.sceneUpdate(a,b);return j.clear(),c.forEach(function(k,l){if(k&&k[0]&&k[0].trace){var n,o,p,q,r,s=k[0],t=s.trace,u=s.t,v=u.r,w=u.theta,x=v.slice(),y=w.slice();for(n=0;n<v.length;n++)o=v[n],q=w[n],r=e.c2rad(q,t.thetaunit),b.isPtWithinSector({r:o,rad:r})||(x[n]=NaN,y[n]=NaN);var z=v.length,A=new Array(2*z),B=Array(z),C=Array(z);for(n=0;n<z;n++)o=x[n],q=y[n],h(o)&&h(q)&&o>=0?(p=d.c2r(o)-f[0],r=function(a){return e.c2rad(a,t.thetaunit)}(q),B[n]=A[2*n]=p*Math.cos(r),C[n]=A[2*n+1]=p*Math.sin(r)):B[n]=C[n]=A[2*n]=A[2*n+1]=NaN;var D=i.sceneOptions(a,b,t,A);D.fill&&!j.fill2d&&(j.fill2d=!0),D.marker&&!j.scatter2d&&(j.scatter2d=!0),D.line&&!j.line2d&&(j.line2d=!0),!D.errorX&&!D.errorY||j.error2d||(j.error2d=!0),m.hasMarkers(t)&&(D.selected.positions=D.unselected.positions=D.marker.positions),j.lineOptions.push(D.line),j.errorXOptions.push(D.errorX),j.errorYOptions.push(D.errorY),j.fillOptions.push(D.fill),j.markerOptions.push(D.marker),j.selectedOptions.push(D.selected),j.unselectedOptions.push(D.unselected),j.count=c.length,u.scene=j,u.index=l,u.x=B,u.y=C,u.rawx=B,u.rawy=C,u.r=v,u.theta=w,u.positions=A,u.count=z,u.tree=g(A,512)}}),i.plot(a,b,c)}function f(a,b,c,d){var e=a.cd,f=e[0].t,g=f.r,h=f.theta,j=i.hoverPoints(a,b,c,d);if(j&&!1!==j[0].index){var k=j[0];if(void 0===k.index)return j;var m=a.subplot,n=m.angularAxis,o=k.cd[k.index],p=k.trace;if(o.r=g[k.index],o.theta=h[k.index],o.rad=n.c2rad(o.theta,p.thetaunit),m.isPtWithinSector(o))return k.xLabelVal=void 0,k.yLabelVal=void 0,k.extraText=l(o,p,m),j}}var g=a("kdgrass"),h=a("fast-isnumeric"),i=a("../scattergl"),j=a("../scatter/colorscale_calc"),k=a("../../plots/cartesian/axes"),l=a("../scatterpolar/hover").makeHoverPointText,m=a("../scatter/subtypes");b.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:a("../../plots/polar"),categories:["gl","regl","polar","symbols","markerColorscale","showLegend","scatter-like"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:d,plot:e,hoverPoints:f,style:i.style,selectPoints:i.selectPoints,meta:{}}},{"../../plots/cartesian/axes":789,"../../plots/polar":855,"../scatter/colorscale_calc":1071,"../scatter/subtypes":1088,"../scattergl":1115,"../scatterpolar/hover":1127,"./attributes":1130,"./defaults":1131,"fast-isnumeric":140,kdgrass:292}],1133:[function(a,b,c){"use strict";var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../components/colorscale/color_attributes"),g=a("../../components/colorbar/attributes"),h=a("../../components/drawing/attributes").dash,i=a("../../lib/extend").extendFlat,j=d.marker,k=d.line,l=j.line;b.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},d.mode,{dflt:"markers"}),text:i({},d.text,{}),hovertext:i({},d.hovertext,{}),line:{color:k.color,width:k.width,dash:h,shape:i({},k.shape,{values:["linear","spline"]}),smoothing:k.smoothing,editType:"calc"},connectgaps:d.connectgaps,cliponaxis:d.cliponaxis,fill:i({},d.fill,{values:["none","toself","tonext"]}),fillcolor:d.fillcolor,marker:i({symbol:j.symbol,opacity:j.opacity,maxdisplayed:j.maxdisplayed,size:j.size,sizeref:j.sizeref,sizemin:j.sizemin,sizemode:j.sizemode,line:i({width:l.width,editType:"calc"},f("marker.line")),gradient:j.gradient,editType:"calc"},f("marker"),{showscale:j.showscale,colorbar:g}),textfont:d.textfont,textposition:d.textposition,selected:d.selected,unselected:d.unselected,hoverinfo:i({},e.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:d.hoveron}},{"../../components/colorbar/attributes":619,"../../components/colorscale/color_attributes":626,"../../components/drawing/attributes":642,"../../lib/extend":732,"../../plots/attributes":787,"../scatter/attributes":1066}],1134:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../scatter/colorscale_calc"),f=a("../scatter/arrays_to_calcdata"),g=a("../scatter/calc_selection"),h=a("../scatter/calc").calcMarkerSize,i=["a","b","c"],j={a:["b","c"],b:["a","c"],c:["a","b"]};b.exports=function(a,b){var c,k,l,m,n,o,p=a._fullLayout[b.subplot],q=p.sum,r=b.sum||q;for(c=0;c<i.length;c++)if(l=i[c],!b[l]){for(n=b[j[l][0]],o=b[j[l][1]],m=new Array(n.length),k=0;k<n.length;k++)m[k]=r-n[k]-o[k];b[l]=m}var s,t,u,v,w,x,y=b.a.length,z=new Array(y);for(c=0;c<y;c++)s=b.a[c],t=b.b[c],u=b.c[c],d(s)&&d(t)&&d(u)?(s=+s,t=+t,u=+u,v=q/(s+t+u),1!==v&&(s*=v,t*=v,u*=v),x=s,w=u-t,z[c]={x:w,y:x,a:s,b:t,c:u}):z[c]={x:!1,y:!1};return h(b,y),e(b),f(z,b),g(z,b),z}},{"../scatter/arrays_to_calcdata":1065,"../scatter/calc":1067,"../scatter/calc_selection":1068,"../scatter/colorscale_calc":1071,"fast-isnumeric":140}],1135:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),g=a("../scatter/marker_defaults"),h=a("../scatter/line_defaults"),i=a("../scatter/line_shape_defaults"),j=a("../scatter/text_defaults"),k=a("../scatter/fillcolor_defaults"),l=a("./attributes");b.exports=function(a,b,c,m){function n(c,e){return d.coerce(a,b,l,c,e)}var o,p=n("a"),q=n("b"),r=n("c");if(p?(o=p.length,q?(o=Math.min(o,q.length),r&&(o=Math.min(o,r.length))):o=r?Math.min(o,r.length):0):q&&r&&(o=Math.min(q.length,r.length)),!o)return void(b.visible=!1);p&&o<p.length&&(b.a=p.slice(0,o)),q&&o<q.length&&(b.b=q.slice(0,o)),r&&o<r.length&&(b.c=r.slice(0,o)),n("sum"),n("text"),n("hovertext"),n("mode",o<e.PTS_LINESONLY?"lines+markers":"lines"),f.hasLines(b)&&(h(a,b,c,m,n),i(a,b,n),n("connectgaps")),f.hasMarkers(b)&&g(a,b,c,m,n,{gradient:!0}),f.hasText(b)&&j(a,b,m,n);var s=[];(f.hasMarkers(b)||f.hasText(b))&&(n("cliponaxis"),n("marker.maxdisplayed"),s.push("points")),n("fill"),"none"!==b.fill&&(k(a,b,c,n),f.hasLines(b)||i(a,b,n)),"tonext"!==b.fill&&"toself"!==b.fill||s.push("fills"),n("hoveron",s.join("+")||"points"),d.coerceSelectionMarkerOpacity(b,n)}},{"../../lib":743,"../scatter/constants":1072,"../scatter/fillcolor_defaults":1075,"../scatter/line_defaults":1079,"../scatter/line_shape_defaults":1081,"../scatter/marker_defaults":1084,"../scatter/subtypes":1088,"../scatter/text_defaults":1089,"./attributes":1133}],1136:[function(a,b,c){"use strict";b.exports=function(a,b,c,d,e){if(b.xa&&(a.xaxis=b.xa),b.ya&&(a.yaxis=b.ya),d[e]){var f=d[e];a.a=f.a,a.b=f.b,a.c=f.c}else a.a=b.a,a.b=b.b,a.c=b.c;return a}},{}],1137:[function(a,b,c){"use strict";var d=a("../scatter/hover"),e=a("../../plots/cartesian/axes");b.exports=function(a,b,c,f){function g(a,b){s.push(a._hovertitle+": "+e.tickText(a,b,"hover").text)}var h=d(a,b,c,f);if(h&&!1!==h[0].index){var i=h[0];if(void 0===i.index){var j=1-i.y0/a.ya._length,k=a.xa._length,l=k*j/2,m=k-l;return i.x0=Math.max(Math.min(i.x0,m),l),i.x1=Math.max(Math.min(i.x1,m),l),h}var n=i.cd[i.index];i.a=n.a,i.b=n.b,i.c=n.c,i.xLabelVal=void 0,i.yLabelVal=void 0;var o=i.trace,p=i.subplot,q=n.hi||o.hoverinfo,r=q.split("+"),s=[];return-1!==r.indexOf("all")&&(r=["a","b","c"]),-1!==r.indexOf("a")&&g(p.aaxis,n.a),-1!==r.indexOf("b")&&g(p.baxis,n.b),-1!==r.indexOf("c")&&g(p.caxis,n.c),i.extraText=s.join("<br>"),h}}},{"../../plots/cartesian/axes":789,"../scatter/hover":1077}],1138:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("../scatter/colorbar"),d.calc=a("./calc"),d.plot=a("./plot"),d.style=a("../scatter/style").style,d.hoverPoints=a("./hover"),d.selectPoints=a("../scatter/select"),d.eventData=a("./event_data"),d.moduleType="trace",d.name="scatterternary",d.basePlotModule=a("../../plots/ternary"),d.categories=["ternary","symbols","markerColorscale","showLegend","scatter-like"],d.meta={},b.exports=d},{"../../plots/ternary":866,"../scatter/colorbar":1070,"../scatter/select":1086,"../scatter/style":1087,"./attributes":1133,"./calc":1134,"./defaults":1135,"./event_data":1136,"./hover":1137,"./plot":1139}],1139:[function(a,b,c){"use strict";var d=a("../scatter/plot");b.exports=function(a,b,c){var e=b.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var f={xaxis:b.xaxis,yaxis:b.yaxis,plot:e,layerClipId:b._hasClipOnAxisFalse?b.clipIdRelative:null};d(a,f,c)}},{"../scatter/plot":1085}],1140:[function(a,b,c){"use strict";function d(a){return{valType:"boolean",dflt:!1}}function e(a){return{show:{valType:"boolean",dflt:!1},project:{x:d("x"),y:d("y"),z:d("z")},color:{valType:"color",dflt:f.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:f.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=a("../../components/color"),g=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),i=a("../../lib/extend").extendFlat,j=a("../../plot_api/edit_types").overrideAll,k=b.exports=j({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},surfacecolor:{valType:"data_array"},cauto:g.zauto,cmin:g.zmin,cmax:g.zmax,colorscale:g.colorscale,autocolorscale:i({},g.autocolorscale,{dflt:!1}),reversescale:g.reversescale,showscale:g.showscale,colorbar:h,contours:{x:e("x"),y:e("y"),z:e("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:i({},g.zauto,{}),zmin:i({},g.zmin,{}),zmax:i({},g.zmax,{})}},"calc","nested");k.x.editType=k.y.editType=k.z.editType="calc+clearAxisTypes"},{"../../components/color":618,"../../components/colorbar/attributes":619,"../../components/colorscale/attributes":624,"../../lib/extend":732,"../../plot_api/edit_types":773}],1141:[function(a,b,c){"use strict";var d=a("../../components/colorscale/calc");b.exports=function(a,b){b.surfacecolor?d(b,b.surfacecolor,"","c"):d(b,b.z,"","c")}},{"../../components/colorscale/calc":625}],1142:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../../plots/plots"),g=a("../../components/colorscale"),h=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,i="cb"+c.uid,j=c.cmin,k=c.cmax,l=c.surfacecolor||c.z;if(d(j)||(j=e.aggNums(Math.min,null,l)),d(k)||(k=e.aggNums(Math.max,null,l)),a._fullLayout._infolayer.selectAll("."+i).remove(),!c.showscale)return void f.autoMargin(a,i);var m=b[0].t.cb=h(a,i),n=g.makeColorScaleFunc(g.extractScale(c.colorscale,j,k),{noNumericCheck:!0});m.fillcolor(n).filllevels({start:j,end:k,size:(k-j)/254}).options(c.colorbar)()}},{"../../components/colorbar/draw":622,"../../components/colorscale":633,"../../lib":743,"../../plots/plots":852,"fast-isnumeric":140}],1143:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.surface=b,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function e(a,b){return void 0===b&&(b=1),a.map(function(a){var c=a[0],d=o(a[1]),e=d.toRgb();return{index:c,rgb:[e.r,e.g,e.b,b]}})}function f(a){var b=a[0].rgb,c=a[a.length-1].rgb;return b[0]===c[0]&&b[1]===c[1]&&b[2]===c[2]&&b[3]===c[3]}function g(a){var b=a.shape,c=[b[0]+2,b[1]+2],d=k(new Float32Array(c[0]*c[1]),c);return n.assign(d.lo(1,1).hi(b[0],b[1]),a),n.assign(d.lo(1).hi(b[0],1),a.hi(b[0],1)),n.assign(d.lo(1,c[1]-1).hi(b[0],1),a.lo(0,b[1]-1).hi(b[0],1)),n.assign(d.lo(0,1).hi(1,b[1]),a.hi(1)),n.assign(d.lo(c[0]-1,1).hi(1,b[1]),a.lo(b[0]-1)),d.set(0,0,a.get(0,0)),d.set(0,c[1]-1,a.get(0,b[1]-1)),d.set(c[0]-1,0,a.get(b[0]-1,0)),d.set(c[0]-1,c[1]-1,a.get(b[0]-1,b[1]-1)),d}function h(a){var b=Math.max(a[0].shape[0],a[0].shape[1]);if(b<q){for(var c=q/b,d=[0|Math.floor(a[0].shape[0]*c+1),0|Math.floor(a[0].shape[1]*c+1)],e=d[0]*d[1],f=0;f<a.length;++f){var h=g(a[f]),i=k(new Float32Array(e),d);l(i,h,[c,0,0,0,c,0,0,0,1]),a[f]=i}return c}return 1}function i(a,b){var c=a.glplot.gl,e=j({gl:c}),f=new d(a,e,b.uid);return e._trace=f,f.update(b),a.glplot.add(e),f}var j=a("gl-surface3d"),k=a("ndarray"),l=a("ndarray-homography"),m=a("ndarray-fill"),n=a("ndarray-ops"),o=a("tinycolor2"),p=a("../../lib/str2rgbarray"),q=128,r=d.prototype;r.handlePick=function(a){if(a.object===this.surface){var b=a.index=[Math.min(0|Math.round(a.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(a.data.index[1]/this.dataScale-1),this.data.z.length-1)],c=[0,0,0];Array.isArray(this.data.x[0])?c[0]=this.data.x[b[1]][b[0]]:c[0]=this.data.x[b[0]],Array.isArray(this.data.y[0])?c[1]=this.data.y[b[1]][b[0]]:c[1]=this.data.y[b[1]],c[2]=this.data.z[b[1]][b[0]],a.traceCoordinate=c;var d=this.scene.fullSceneLayout;a.dataCoordinate=[d.xaxis.d2l(c[0],0,this.data.xcalendar)*this.scene.dataScale[0],d.yaxis.d2l(c[1],0,this.data.ycalendar)*this.scene.dataScale[1],d.zaxis.d2l(c[2],0,this.data.zcalendar)*this.scene.dataScale[2]];var e=this.data.text;return e&&e[b[1]]&&void 0!==e[b[1]][b[0]]?a.textLabel=e[b[1]][b[0]]:a.textLabel="",a.data.dataCoordinate=a.dataCoordinate.slice(),this.surface.highlight(a.data),this.scene.glplot.spikes.position=a.dataCoordinate,!0}},r.setContourLevels=function(){for(var a=[[],[],[]],b=!1,c=0;c<3;++c)this.showContour[c]&&(b=!0,a[c]=this.scene.contourLevels[c]);b&&this.surface.update({levels:a})},r.update=function(a){var b,c=this.scene,d=c.fullSceneLayout,g=this.surface,i=a.opacity,j=e(a.colorscale,i),l=a.z,n=a.x,o=a.y,q=d.xaxis,r=d.yaxis,s=d.zaxis,t=c.dataScale,u=l[0].length,v=l.length,w=[k(new Float32Array(u*v),[u,v]),k(new Float32Array(u*v),[u,v]),k(new Float32Array(u*v),[u,v])],x=w[0],y=w[1],z=c.contourLevels;this.data=a;var A=a.xcalendar,B=a.ycalendar,C=a.zcalendar;m(w[2],function(a,b){return s.d2l(l[b][a],0,C)*t[2]}),Array.isArray(n[0])?m(x,function(a,b){return q.d2l(n[b][a],0,A)*t[0]}):m(x,function(a){return q.d2l(n[a],0,A)*t[0]}),Array.isArray(o[0])?m(y,function(a,b){return r.d2l(o[b][a],0,B)*t[1]}):m(y,function(a,b){return r.d2l(o[b],0,B)*t[1]});var D={colormap:j,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:a.opacity};if(D.intensityBounds=[a.cmin,a.cmax],a.surfacecolor){var E=k(new Float32Array(u*v),[u,v]);m(E,function(b,c){return a.surfacecolor[c][b]}),w.push(E)}else D.intensityBounds[0]*=t[2],D.intensityBounds[1]*=t[2];this.dataScale=h(w),a.surfacecolor&&(D.intensity=w.pop());var F=[!0,!0,!0],G=["x","y","z"];for(b=0;b<3;++b){var H=a.contours[G[b]];F[b]=H.highlight,D.showContour[b]=H.show||H.highlight,D.showContour[b]&&(D.contourProject[b]=[H.project.x,H.project.y,H.project.z],H.show?(this.showContour[b]=!0,D.levels[b]=z[b],g.highlightColor[b]=D.contourColor[b]=p(H.color),H.usecolormap?g.highlightTint[b]=D.contourTint[b]=0:g.highlightTint[b]=D.contourTint[b]=1,D.contourWidth[b]=H.width):this.showContour[b]=!1,H.highlight&&(D.dynamicColor[b]=p(H.highlightcolor),D.dynamicWidth[b]=H.highlightwidth))}f(j)&&(D.vertexColor=!0),D.coords=w,g.update(D),g.visible=a.visible,g.enableDynamic=F,g.snapToData=!0,"lighting"in a&&(g.ambientLight=a.lighting.ambient,g.diffuseLight=a.lighting.diffuse,g.specularLight=a.lighting.specular,g.roughness=a.lighting.roughness,g.fresnel=a.lighting.fresnel),"lightposition"in a&&(g.lightPosition=[a.lightposition.x,a.lightposition.y,a.lightposition.z]),i&&i<1&&(g.supportsTransparency=!0)},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},b.exports=i},{"../../lib/str2rgbarray":765,"gl-surface3d":254,ndarray:458,"ndarray-fill":448,"ndarray-homography":450,"ndarray-ops":452,tinycolor2:546}],1144:[function(a,b,c){"use strict";function d(a,b,c){b in a&&!(c in a)&&(a[c]=a[b])}var e=a("../../registry"),f=a("../../lib"),g=a("../../components/colorscale/defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,d){return f.coerce(a,b,h,c,d)}var k,l,m=j("z");if(!m)return void(b.visible=!1);var n=m[0].length,o=m.length;if(j("x"),j("y"),e.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],i),!Array.isArray(b.x))for(b.x=[],k=0;k<n;++k)b.x[k]=k;if(j("text"),!Array.isArray(b.y))for(b.y=[],k=0;k<o;++k)b.y[k]=k;["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","opacity"].forEach(function(a){j(a)});var p=j("surfacecolor");j("colorscale");var q=["x","y","z"];for(k=0;k<3;++k){var r="contours."+q[k],s=j(r+".show"),t=j(r+".highlight");if(s||t)for(l=0;l<3;++l)j(r+".project."+q[l]);s&&(j(r+".color"),j(r+".width"),j(r+".usecolormap")),t&&(j(r+".highlightcolor"),j(r+".highlightwidth"))}p||(d(a,"zmin","cmin"),d(a,"zmax","cmax"),d(a,"zauto","cauto")),g(a,b,i,j,{prefix:"",cLetter:"c"})}},{"../../components/colorscale/defaults":628,"../../lib":743,"../../registry":873,"./attributes":1140}],1145:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.colorbar=a("./colorbar"),d.calc=a("./calc"),d.plot=a("./convert"),d.moduleType="trace",d.name="surface",d.basePlotModule=a("../../plots/gl3d"),d.categories=["gl3d","2dMap","noOpacity"],d.meta={},b.exports=d},{"../../plots/gl3d":832,"./attributes":1140,"./calc":1141,"./colorbar":1142,"./convert":1143,"./defaults":1144}],1146:[function(a,b,c){"use strict";var d=a("../../components/annotations/attributes"),e=a("../../lib/extend").extendFlat,f=a("../../plot_api/edit_types").overrideAll,g=a("../../plots/font_attributes"),h=a("../../plots/domain_attributes");b.exports=f({domain:h({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:e({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:e({},g({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:e({},d.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:e({},g({arrayOk:!0}))}},"calc","from-root")},{"../../components/annotations/attributes":601,"../../lib/extend":732,"../../plot_api/edit_types":773,"../../plots/domain_attributes":815,"../../plots/font_attributes":816}],1147:[function(a,b,c){"use strict";var d=a("../../plots/get_data").getModuleCalcData,e=a("./plot");c.name="table",c.plot=function(a){var b=d(a.calcdata,"table");b.length&&e(a,b)},c.clean=function(a,b,c,d){var e=d._has&&d._has("table"),f=b._has&&b._has("table");e&&!f&&d._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":826,
"./plot":1154}],1148:[function(a,b,c){"use strict";var d=a("../../lib/gup").wrap;b.exports=function(a,b){return d(b)}},{"../../lib/gup":740}],1149:[function(a,b,c){"use strict";b.exports={maxDimensionCount:60,overdrag:45,cellPad:8,latexCheck:/^\$.*\$$/,wrapSplitCharacter:" ",wrapSpacer:" ",lineBreaker:"<br>",uplift:5,goldenRatio:1.618,columnTitleOffset:28,columnExtentOffset:10,transitionEase:"cubic-out",transitionDuration:100,releaseTransitionEase:"cubic-out",releaseTransitionDuration:120,scrollbarWidth:8,scrollbarCaptureWidth:18,scrollbarOffset:5,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1150:[function(a,b,c){"use strict";function d(a){return a.calcdata.columns.reduce(function(b,c){return c.xIndex<a.xIndex?b+c.columnWidth:b},0)}function e(a,b){return Object.keys(a).map(function(c){return i({},a[c],{auxiliaryBlocks:b})})}function f(a,b){for(var c,d={},e=0,f=0,h=g(),i=0,j=0,k=0;k<a.length;k++)c=a[k],h.rows.push({rowIndex:k,rowHeight:c}),((f+=c)>=b||k===a.length-1)&&(d[e]=h,h.key=j++,h.firstRowIndex=i,h.lastRowIndex=k,h=g(),e+=f,i=k+1,f=0);return d}function g(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var h=a("./constants"),i=a("../../lib/extend").extendFlat,j=a("fast-isnumeric");b.exports=function(a,b){var c=b.header.values.map(function(a){return Array.isArray(a)?a:[a]}),g=b.cells.values,k=b.domain,l=Math.floor(a._fullLayout._size.w*(k.x[1]-k.x[0])),m=Math.floor(a._fullLayout._size.h*(k.y[1]-k.y[0])),n=c.length?c[0].map(function(){return b.header.height}):[],o=g.length?g[0].map(function(){return b.cells.height}):[],p=n.reduce(function(a,b){return a+b},0),q=m-p,r=q+h.uplift,s=f(o,r),t=f(n,p),u=e(t,[]),v=e(s,u),w={},x=b._fullInput.columnorder,y=c.map(function(a,c){var d=Array.isArray(b.columnwidth)?b.columnwidth[Math.min(c,b.columnwidth.length-1)]:b.columnwidth;return j(d)?Number(d):1}),z=y.reduce(function(a,b){return a+b},0);y=y.map(function(a){return a/z*l});var A={key:b.index,translateX:k.x[0]*a._fullLayout._size.w,translateY:a._fullLayout._size.h*(1-k.y[1]),size:a._fullLayout._size,width:l,height:m,columnOrder:x,groupHeight:m,rowBlocks:v,headerRowBlocks:u,scrollY:0,cells:b.cells,headerCells:i({},b.header,{values:c}),gdColumns:c.map(function(a){return a[0]}),gdColumnsOriginalOrder:c.map(function(a){return a[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:c.map(function(a,b){var c=w[a];return w[a]=(c||0)+1,{key:a+"__"+w[a],label:a,specIndex:b,xIndex:x[b],xScale:d,x:void 0,calcdata:void 0,columnWidth:y[b]}})};return A.columns.forEach(function(a){a.calcdata=A,a.x=d(a)}),A}},{"../../lib/extend":732,"./constants":1149,"fast-isnumeric":140}],1151:[function(a,b,c){"use strict";function d(a){var b=a.rowBlocks[a.page],c=b?b.rows[0].rowIndex:0;return[c,b?c+b.rows.length:0]}var e=a("../../lib/extend").extendFlat;c.splitToPanels=function(a){var b=[0,0],c=e({},a,{key:"header",type:"header",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!0,values:a.calcdata.headerCells.values[a.specIndex],rowBlocks:a.calcdata.headerRowBlocks,calcdata:e({},a.calcdata,{cells:a.calcdata.headerCells})});return[e({},a,{key:"cells1",type:"cells",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks}),e({},a,{key:"cells2",type:"cells",page:1,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks}),c]},c.splitToCells=function(a){var b=d(a);return a.values.slice(b[0],b[1]).map(function(c,d){return{keyWithinBlock:d+("string"==typeof c&&c.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:b[0]+d,column:a,calcdata:a.calcdata,page:a.page,rowBlocks:a.rowBlocks,value:c}})}},{"../../lib/extend":732}],1152:[function(a,b,c){"use strict";function d(a,b){for(var c=a.columnorder||[],d=a.header.values.length,e=c.slice(0,d),f=e.slice().sort(function(a,b){return a-b}),g=e.map(function(a){return f.indexOf(a)}),h=g.length;h<d;h++)g.push(h);b("columnorder",g)}var e=a("../../lib"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,d){return e.coerce(a,b,f,c,d)}h("domain.x"),h("domain.y"),h("columnwidth"),h("header.values"),h("header.format"),h("header.align"),h("header.prefix"),h("header.suffix"),h("header.height"),h("header.line.width"),h("header.line.color"),h("header.fill.color"),e.coerceFont(h,"header.font",e.extendFlat({},g.font)),d(b,h),h("cells.values"),h("cells.format"),h("cells.align"),h("cells.prefix"),h("cells.suffix"),h("cells.height"),h("cells.line.width"),h("cells.line.color"),h("cells.fill.color"),e.coerceFont(h,"cells.font",e.extendFlat({},g.font))}},{"../../lib":743,"./attributes":1146}],1153:[function(a,b,c){"use strict";var d={};d.attributes=a("./attributes"),d.supplyDefaults=a("./defaults"),d.calc=a("./calc"),d.plot=a("./plot"),d.moduleType="trace",d.name="table",d.basePlotModule=a("./base_plot"),d.categories=["noOpacity"],d.meta={},b.exports=d},{"./attributes":1146,"./base_plot":1147,"./calc":1148,"./defaults":1152,"./plot":1154}],1154:[function(a,b,c){"use strict";function d(a,b){return"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key}function e(a,b){return"clip"+a._fullLayout._uid+"_columnBoundaryClippath_"+b.calcdata.key+"_"+b.specIndex}function f(a){return[].concat.apply([],a.map(function(a){return a})).map(function(a){return a.__data__})}function g(a,b,c){function d(a){var b=a.rowBlocks;return H(b,b.length-1)+(b.length?I(b[b.length-1],1/0):1)}var e=a.selectAll("."+M.cn.scrollbarKit).data(O.repeat,O.keyFun);e.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),e.each(function(a){var b=a.scrollbarState;b.totalHeight=d(a),b.scrollableAreaHeight=a.groupHeight-y(a),b.currentlyVisibleHeight=Math.min(b.totalHeight,b.scrollableAreaHeight),b.ratio=b.currentlyVisibleHeight/b.totalHeight,b.barLength=Math.max(b.ratio*b.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),b.barWiggleRoom=b.currentlyVisibleHeight-b.barLength,b.wiggleRoom=Math.max(0,b.totalHeight-b.scrollableAreaHeight),b.topY=0===b.barWiggleRoom?0:a.scrollY/b.wiggleRoom*b.barWiggleRoom,b.bottomY=b.topY+b.barLength,b.dragMultiplier=b.wiggleRoom/b.barWiggleRoom}).attr("transform",function(a){return"translate("+(a.width+M.scrollbarWidth/2+M.scrollbarOffset)+" "+y(a)+")"});var f=e.selectAll("."+M.cn.scrollbar).data(O.repeat,O.keyFun);f.enter().append("g").classed(M.cn.scrollbar,!0);var g=f.selectAll("."+M.cn.scrollbarSlider).data(O.repeat,O.keyFun);g.enter().append("g").classed(M.cn.scrollbarSlider,!0),g.attr("transform",function(a){return"translate(0 "+(a.scrollbarState.topY||0)+")"});var h=g.selectAll("."+M.cn.scrollbarGlyph).data(O.repeat,O.keyFun);h.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),h.attr("y2",function(a){return a.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(a){return a.columnDragInProgress||!a.scrollbarState.barWiggleRoom||c?0:.4}),h.transition().delay(0).duration(0),h.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var i=f.selectAll("."+M.cn.scrollbarCaptureZone).data(O.repeat,O.keyFun);i.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(c){var d=N.event.y,e=this.getBoundingClientRect(),f=c.scrollbarState,g=d-e.top,h=N.scale.linear().domain([0,f.scrollableAreaHeight]).range([0,f.totalHeight]).clamp(!0);f.topY<=g&&g<=f.bottomY||B(b,a,null,h(g-f.barLength/2))(c)}).call(N.behavior.drag().origin(function(a){return N.event.stopPropagation(),a.scrollbarState.scrollbarScrollInProgress=!0,a}).on("drag",B(b,a)).on("dragend",function(){})),i.attr("y2",function(a){return a.scrollbarState.scrollableAreaHeight})}function h(a,b,c,d){var e=i(c),f=j(e);n(f),p(k(f));var g=m(f),h=l(g);o(h),q(h,b,d,a),G(f)}function i(a){var b=a.selectAll("."+M.cn.columnCells).data(O.repeat,O.keyFun);return b.enter().append("g").classed(M.cn.columnCells,!0),b.exit().remove(),b}function j(a){var b=a.selectAll("."+M.cn.columnCell).data(U.splitToCells,function(a){return a.keyWithinBlock});return b.enter().append("g").classed(M.cn.columnCell,!0),b.exit().remove(),b}function k(a){var b=a.selectAll("."+M.cn.cellRect).data(O.repeat,function(a){return a.keyWithinBlock});return b.enter().append("rect").classed(M.cn.cellRect,!0),b}function l(a){var b=a.selectAll("."+M.cn.cellText).data(O.repeat,function(a){return a.keyWithinBlock});return b.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){N.event.stopPropagation()}),b}function m(a){var b=a.selectAll("."+M.cn.cellTextHolder).data(O.repeat,function(a){return a.keyWithinBlock});return b.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),b}function n(a){a.each(function(a,b){var c=a.calcdata.cells.font,d=a.column.specIndex,e={size:u(c.size,d,b),color:u(c.color,d,b),family:u(c.family,d,b)};a.rowNumber=a.key,a.align=u(a.calcdata.cells.align,d,b),a.cellBorderWidth=u(a.calcdata.cells.line.width,d,b),a.font=e})}function o(a){a.each(function(a){P.font(N.select(this),a.font)})}function p(a){a.attr("width",function(a){return a.column.columnWidth}).attr("stroke-width",function(a){return a.cellBorderWidth}).each(function(a){var b=N.select(this);V.stroke(b,u(a.calcdata.cells.line.color,a.column.specIndex,a.rowNumber)),V.fill(b,u(a.calcdata.cells.fill.color,a.column.specIndex,a.rowNumber))})}function q(a,b,c,d){a.text(function(a){var b=a.column.specIndex,c=a.rowNumber,d=a.value,e="string"==typeof d,f=e&&d.match(/<br>/i),g=!e||f;a.mayHaveMarkup=e&&d.match(/[<&>]/);var h=r(d);a.latex=h;var i,j=h?"":u(a.calcdata.cells.prefix,b,c)||"",k=h?"":u(a.calcdata.cells.suffix,b,c)||"",l=h?null:u(a.calcdata.cells.format,b,c)||null,m=j+(l?N.format(l)(a.value):a.value)+k;a.wrappingNeeded=!a.wrapped&&!g&&!h&&(i=s(m)),a.cellHeightMayIncrease=f||h||a.mayHaveMarkup||(void 0===i?s(m):i),a.needsConvertToTspans=a.mayHaveMarkup||a.wrappingNeeded||a.latex;var n;if(a.wrappingNeeded){var o=" "===M.wrapSplitCharacter?m.replace(/<a href=/gi,"<a_href="):m,p=o.split(M.wrapSplitCharacter),q=" "===M.wrapSplitCharacter?p.map(function(a){return a.replace(/<a_href=/gi,"<a href=")}):p;a.fragments=q.map(function(a){return{text:a,width:null}}),a.fragments.push({fragment:M.wrapSpacer,width:null}),n=q.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete a.fragments,n=m;return n}).attr("dy",function(a){return a.needsConvertToTspans?0:"0.75em"}).each(function(a){var e=this,f=N.select(e),g=a.wrappingNeeded?D:E;a.needsConvertToTspans?Q.convertToTspans(f,d,g(c,e,b,d,a)):N.select(e.parentNode).attr("transform",function(a){return"translate("+F(a)+" "+M.cellPad+")"}).attr("text-anchor",function(a){return{left:"start",center:"middle",right:"end"}[a.align]})})}function r(a){return"string"==typeof a&&a.match(M.latexCheck)}function s(a){return-1!==a.indexOf(M.wrapSplitCharacter)}function t(a,b,c){var d=b.gdColumnsOriginalOrder;b.gdColumns.sort(function(a,b){return c[d.indexOf(a)]-c[d.indexOf(b)]}),b.columnorder=c,a.emit("plotly_restyle")}function u(a,b,c){if(Array.isArray(a)){var d=a[Math.min(b,a.length-1)];return Array.isArray(d)?d[Math.min(c,d.length-1)]:d}return a}function v(a,b,c){a.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform","translate("+b.x+" "+c+")")}function w(a){return"cells"===a.type}function x(a){return"header"===a.type}function y(a){return(a.rowBlocks.length?a.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(a,b){return a+I(b,1/0)},0)}function z(a,b,c){for(var d=[],e=0,f=0;f<a.length;f++){for(var g=a[f],h=g.rows,i=0,j=0;j<h.length;j++)i+=h[j].rowHeight;g.allRowsHeight=i;var k=e+i,l=b,m=l+c;l<k&&m>e&&d.push(f),e+=i}return d}function A(a,b,c){var d=f(b)[0];if(void 0!==d){var e=d.rowBlocks,h=d.calcdata,i=H(e,e.length),j=d.calcdata.groupHeight-y(d),k=h.scrollY=Math.max(0,Math.min(i-j,h.scrollY)),l=z(e,k,j);1===l.length&&(l[0]===e.length-1?l.unshift(l[0]-1):l.push(l[0]+1)),l[0]%2&&l.reverse(),b.each(function(a,b){a.page=l[b],a.scrollY=k}),b.attr("transform",function(a){return"translate(0 "+(H(a.rowBlocks,a.page)-a.scrollY)+")"}),a&&(C(a,c,b,l,d.prevPages,d,0),C(a,c,b,l,d.prevPages,d,1),g(c,a))}}function B(a,b,c,d){return function(e){var f=e.calcdata?e.calcdata:e,g=b.filter(function(a){return f.key===a.key}),h=c||f.scrollbarState.dragMultiplier;f.scrollY=void 0===d?f.scrollY+h*N.event.dy:d;var i=g.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(w);A(a,i,g)}}function C(a,b,c,d,e,f,g){d[g]!==e[g]&&(clearTimeout(f.currentRepaint[g]),f.currentRepaint[g]=setTimeout(function(){var f=c.filter(function(a,b){return b===g&&d[b]!==e[b]});h(a,b,f,c),e[g]=d[g]}))}function D(a,b,c){return function(){var d=N.select(b.parentNode);d.each(function(a){var b=a.fragments;d.selectAll("tspan.line").each(function(a,c){b[c].width=this.getComputedTextLength()});var c,e,f=b[b.length-1].width,g=b.slice(0,-1),h=[],i=0,j=a.column.columnWidth-2*M.cellPad;for(a.value="";g.length;)c=g.shift(),e=c.width+f,i+e>j&&(a.value+=h.join(M.wrapSpacer)+M.lineBreaker,h=[],i=0),h.push(c.text),i+=e;i&&(a.value+=h.join(M.wrapSpacer)),a.wrapped=!0}),d.selectAll("tspan.line").remove(),q(d.select("."+M.cn.cellText),c,a),N.select(b.parentNode.parentNode).call(G)}}function E(a,b,c,d,e){return function(){if(!e.settledY){var f=N.select(b.parentNode),h=K(e),i=e.key-h.firstRowIndex,j=h.rows[i].rowHeight,k=e.cellHeightMayIncrease?b.parentNode.getBoundingClientRect().height+2*M.cellPad:j,l=Math.max(k,j);l-h.rows[i].rowHeight&&(h.rows[i].rowHeight=l,a.selectAll("."+M.cn.columnCell).call(G),A(null,a.filter(w),0),g(c,d,!0)),f.attr("transform",function(){var a=this,b=a.parentNode,c=b.getBoundingClientRect(),d=N.select(a.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),f=a.transform.baseVal.consolidate(),g=d.top-c.top+(f?f.matrix.f:M.cellPad);return"translate("+F(e,N.select(a.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+g+")"}),e.settledY=!0}}}function F(a,b){switch(a.align){case"left":return M.cellPad;case"right":return a.column.columnWidth-(b||0)-M.cellPad;case"center":return(a.column.columnWidth-(b||0))/2;default:return M.cellPad}}function G(a){a.attr("transform",function(a){var b=a.rowBlocks[0].auxiliaryBlocks.reduce(function(a,b){return a+I(b,1/0)},0);return"translate(0 "+(I(K(a),a.key)+b)+")"}).selectAll("."+M.cn.cellRect).attr("height",function(a){return L(K(a),a.key).rowHeight})}function H(a,b){for(var c=0,d=b-1;d>=0;d--)c+=J(a[d]);return c}function I(a,b){for(var c=0,d=0;d<a.rows.length&&a.rows[d].rowIndex<b;d++)c+=a.rows[d].rowHeight;return c}function J(a){var b=a.allRowsHeight;if(void 0!==b)return b;for(var c=0,d=0;d<a.rows.length;d++)c+=a.rows[d].rowHeight;return a.allRowsHeight=c,c}function K(a){return a.rowBlocks[a.page]}function L(a,b){return a.rows[b-a.firstRowIndex]}var M=a("./constants"),N=a("d3"),O=a("../../lib/gup"),P=a("../../components/drawing"),Q=a("../../lib/svg_text_utils"),R=a("../../lib").raiseToTop,S=a("../../lib").cancelTransition,T=a("./data_preparation_helper"),U=a("./data_split_helpers"),V=a("../../components/color");b.exports=function(a,b){var c=a._fullLayout._paper.selectAll("."+M.cn.table).data(b.map(function(b){var c=O.unwrap(b),d=c.trace;return T(a,d)}),O.keyFun);c.exit().remove(),c.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),c.attr("width",function(a){return a.width+a.size.l+a.size.r}).attr("height",function(a){return a.height+a.size.t+a.size.b}).attr("transform",function(a){return"translate("+a.translateX+","+a.translateY+")"});var i=c.selectAll("."+M.cn.tableControlView).data(O.repeat,O.keyFun);i.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box").on("mousemove",function(b){i.filter(function(a){return b===a}).call(g,a)}).on("mousewheel",function(b){b.scrollbarState.wheeling||(b.scrollbarState.wheeling=!0,N.event.stopPropagation(),N.event.preventDefault(),B(a,i,null,b.scrollY+N.event.deltaY)(b),b.scrollbarState.wheeling=!1)}).call(g,a,!0),i.attr("transform",function(a){return"translate("+a.size.l+" "+a.size.t+")"});var j=i.selectAll("."+M.cn.scrollBackground).data(O.repeat,O.keyFun);j.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),j.attr("width",function(a){return a.width}).attr("height",function(a){return a.height}),i.each(function(b){P.setClipUrl(N.select(this),d(a,b))});var k=i.selectAll("."+M.cn.yColumn).data(function(a){return a.columns},O.keyFun);k.enter().append("g").classed(M.cn.yColumn,!0),k.exit().remove(),k.attr("transform",function(a){return"translate("+a.x+" 0)"}).call(N.behavior.drag().origin(function(b){return v(N.select(this),b,-M.uplift),R(this),b.calcdata.columnDragInProgress=!0,g(i.filter(function(a){return b.calcdata.key===a.key}),a),b}).on("drag",function(a){var b=N.select(this),c=function(b){return(a===b?N.event.x:b.x)+b.columnWidth/2};a.x=Math.max(-M.overdrag,Math.min(a.calcdata.width+M.overdrag-a.columnWidth,N.event.x)),f(k).filter(function(b){return b.calcdata.key===a.calcdata.key}).sort(function(a,b){return c(a)-c(b)}).forEach(function(b,c){b.xIndex=c,b.x=a===b?b.x:b.xScale(b)}),k.filter(function(b){return a!==b}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(a){return"translate("+a.x+" 0)"}),b.call(S).attr("transform","translate("+a.x+" -"+M.uplift+" )")}).on("dragend",function(b){var c=N.select(this),d=b.calcdata;b.x=b.xScale(b),b.calcdata.columnDragInProgress=!1,v(c,b,0),t(a,d,d.columns.map(function(a){return a.xIndex}))})),k.each(function(b){P.setClipUrl(N.select(this),e(a,b))});var l=k.selectAll("."+M.cn.columnBlock).data(U.splitToPanels,O.keyFun);l.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(a){return a.key}),l.style("cursor",function(a){return a.dragHandle?"ew-resize":a.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var m=l.filter(x),n=l.filter(w);n.call(N.behavior.drag().origin(function(a){return N.event.stopPropagation(),a}).on("drag",B(a,i,-1)).on("dragend",function(){})),h(a,i,m,l),h(a,i,n,l);var o=i.selectAll("."+M.cn.scrollAreaClip).data(O.repeat,O.keyFun);o.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(b){return d(a,b)});var p=o.selectAll("."+M.cn.scrollAreaClipRect).data(O.repeat,O.keyFun);p.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),p.attr("width",function(a){return a.width+2*M.overdrag}).attr("height",function(a){return a.height+M.uplift}),k.selectAll("."+M.cn.columnBoundary).data(O.repeat,O.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var q=k.selectAll("."+M.cn.columnBoundaryClippath).data(O.repeat,O.keyFun);q.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),q.attr("id",function(b){return e(a,b)});var r=q.selectAll("."+M.cn.columnBoundaryRect).data(O.repeat,O.keyFun);r.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),r.attr("width",function(a){return a.columnWidth}).attr("height",function(a){return a.calcdata.height+M.uplift}),A(null,n,i)}},{"../../components/color":618,"../../components/drawing":643,"../../lib":743,"../../lib/gup":740,"../../lib/svg_text_utils":766,"./constants":1149,"./data_preparation_helper":1150,"./data_split_helpers":1151,d3:128}],1155:[function(a,b,c){"use strict";var d=a("../box/attributes"),e=a("../../lib/extend").extendFlat;b.exports={y:d.y,x:d.x,x0:d.x0,y0:d.y0,name:d.name,orientation:e({},d.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:d.fillcolor,points:e({},d.boxpoints,{}),jitter:e({},d.jitter,{}),pointpos:e({},d.pointpos,{}),marker:d.marker,text:d.text,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"plot"},selected:d.selected,unselected:d.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":732,"../box/attributes":896}],1156:[function(a,b,c){"use strict";function d(a,b,c){return 1.059*Math.min(b,c/1.349)*Math.pow(a.length,-.2)}function e(a,b,c,d){function e(d){var e=i[d],f=c.d2c(e,0,a[b.valLetter+"calendar"]);return f===j?l[d]:f}var f,h=a.spanmode,i=a.span||[],k=[b.min,b.max],l=[b.min-2*d,b.max+2*d];f="soft"===h?l:"hard"===h?k:[e(0),e(1)];var m={type:"linear",range:f};return g.setConvert(m),m.cleanRange(),f}var f=a("../../lib"),g=a("../../plots/cartesian/axes"),h=a("../box/calc"),i=a("./helpers"),j=a("../../constants/numerical").BADNUM;b.exports=function(a,b){var c=h(a,b);if(c[0].t.empty)return c;var j=a._fullLayout,k=g.getFromId(a,b["h"===b.orientation?"xaxis":"yaxis"]),l=j._violinScaleGroupStats,m=b.scalegroup,n=l[m];n||(n=l[m]={maxWidth:0,maxCount:0});for(var o=0;o<c.length;o++){var p=c[o],q=p.pts.map(i.extractVal),r=q.length,s=f.stdev(q,r-1,p.mean),t=d(q,s,p.q3-p.q1),u=p.bandwidth=b.bandwidth||t,v=p.span=e(b,p,k,u),w=v[1]-v[0],x=Math.ceil(w/(Math.min(t,u)/3)),y=w/x;if(!isFinite(y)||!isFinite(x))return f.error("Something went wrong with computing the violin span"),c[0].t.empty=!0,c;var z=i.makeKDE(p,b,q);p.density=new Array(x);for(var A=0,B=v[0];B<v[1]+y/2;A++,B+=y){var C=z(B);n.maxWidth=Math.max(n.maxWidth,C),p.density[A]={v:C,t:B}}g.expand(k,v,{padded:!0}),n.maxCount=Math.max(n.maxCount,q.length)}return c[0].t.labels.kde=f._(a,"kde:"),c}},{"../../constants/numerical":721,"../../lib":743,"../../plots/cartesian/axes":789,"../box/calc":897,"./helpers":1158}],1157:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("../box/defaults"),g=a("./attributes");b.exports=function(a,b,c,h){function i(c,e){return d.coerce(a,b,g,c,e)}function j(c,e){return d.coerce2(a,b,g,c,e)}if(f.handleSampleDefaults(a,b,i,h),!1!==b.visible){i("bandwidth"),i("scalegroup",b.name),i("scalemode"),i("side");var k,l=i("span");Array.isArray(l)&&(k="manual"),i("spanmode",k);var m=i("line.color",(a.marker||{}).color||c),n=i("line.width"),o=i("fillcolor",e.addOpacity(b.line.color,.5));f.handlePointsDefaults(a,b,i,{prefix:""});var p=j("box.width"),q=j("box.fillcolor",o),r=j("box.line.color",m),s=j("box.line.width",n);i("box.visible",Boolean(p||q||r||s))||delete b.box;var t=j("meanline.color",m),u=j("meanline.width",n);i("meanline.visible",Boolean(t||u))||delete b.meanline}}},{"../../components/color":618,"../../lib":743,"../box/defaults":898,"./attributes":1155}],1158:[function(a,b,c){"use strict";var d=a("../../lib"),e={gaussian:function(a){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*a*a)}};c.makeKDE=function(a,b,c){var d=c.length,f=e.gaussian,g=a.bandwidth,h=1/(d*g);return function(a){for(var b=0,e=0;e<d;e++)b+=f((a-c[e])/g);return h*b}},c.getPositionOnKdePath=function(a,b,c){var e,f;"h"===b.orientation?(e="y",f="x"):(e="x",f="y");var g=d.findPointOnPath(a.path,c,f,{pathLength:a.pathLength}),h=a.posCenterPx,i=g[e];return[i,"both"===b.side?2*h-i:h]},c.getKdeValue=function(a,b,d){var e=a.pts.map(c.extractVal);return c.makeKDE(a,b,e)(d)/a.posDensityScale},c.extractVal=function(a){return a.v}},{"../../lib":743}],1159:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("../box/hover"),g=a("./helpers");b.exports=function(a,b,c,h,i){var j,k,l=a.cd,m=l[0].trace,n=m.hoveron,o=-1!==n.indexOf("violins"),p=-1!==n.indexOf("kde"),q=[];if(o||p){var r=f.hoverOnBoxes(a,b,c,h);if(o&&(q=q.concat(r)),p&&r.length>0){var s,t,u,v,w,x=a.xa,y=a.ya;"h"===m.orientation?(w=b,s="y",u=y,t="x",v=x):(w=c,s="x",u=x,t="y",v=y);var z=l[a.index];if(w>=z.span[0]&&w<=z.span[1]){var A=d.extendFlat({},a),B=v.c2p(w,!0),C=g.getKdeValue(z,m,w),D=g.getPositionOnKdePath(z,m,B),E=u._offset,F=u._length;A[s+"0"]=D[0],A[s+"1"]=D[1],A[t+"0"]=A[t+"1"]=B,A[t+"Label"]=t+": "+e.hoverLabelText(v,w)+", "+l[0].t.labels.kde+" "+C.toFixed(3),q.push(A),k={stroke:a.color},k[s+"1"]=d.constrain(E+D[0],E,E+F),k[s+"2"]=d.constrain(E+D[1],E,E+F),k[t+"1"]=k[t+"2"]=v._offset+B}}}-1!==n.indexOf("points")&&(j=f.hoverOnPoints(a,b,c));var G=i.selectAll(".violinline-"+m.uid).data(k?[0]:[]);return G.enter().append("line").classed("violinline-"+m.uid,!0).attr("stroke-width",1.5),G.exit().remove(),G.attr(k),"closest"===h?j?[j]:q:j?(q.push(j),q):q}},{"../../lib":743,"../../plots/cartesian/axes":789,"../box/hover":899,"./helpers":1158}],1160:[function(a,b,c){"use strict";b.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),setPositions:a("./set_positions"),plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover"),selectPoints:a("../box/select"),moduleType:"trace",name:"violin",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","symbols","oriented","box-violin","showLegend"],meta:{}}},{"../../plots/cartesian":800,"../box/select":904,"./attributes":1155,"./calc":1156,"./defaults":1157,"./hover":1159,"./layout_attributes":1161,"./layout_defaults":1162,"./plot":1163,"./set_positions":1164,"./style":1165}],1161:[function(a,b,c){"use strict";var d=a("../box/layout_attributes"),e=a("../../lib").extendFlat;b.exports={violinmode:e({},d.boxmode,{}),violingap:e({},d.boxgap,{}),violingroupgap:e({},d.boxgroupgap,{})}},{"../../lib":743,"../box/layout_attributes":901}],1162:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes"),f=a("../box/layout_defaults");b.exports=function(a,b,c){function g(c,f){return d.coerce(a,b,e,c,f)}f._supply(a,b,c,g,"violin")}},{"../../lib":743,"../box/layout_defaults":902,"./layout_attributes":1161}],1163:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../lib"),f=a("../../components/drawing"),g=a("../box/plot"),h=a("../scatter/line_points"),i=a("./helpers");b.exports=function(a,b,c){function j(a){var b=h(a,{xaxis:l,yaxis:m,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0});return f.smoothopen(b[0],1)}var k=a._fullLayout,l=b.xaxis,m=b.yaxis;b.plot.select(".violinlayer").selectAll("g.trace.violins").data(c).enter().append("g").attr("class","trace violins").each(function(a){var c=a[0],f=c.t,h=c.trace,n=c.node3=d.select(this),o=k._numViolins,p="group"===k.violinmode&&o>1,q=f.bdPos=f.dPos*(1-k.violingap)*(1-k.violingroupgap)/(p?o:1),r=f.bPos=p?2*f.dPos*((f.num+.5)/o-.5)*(1-k.violingap):0;if(!0!==h.visible||f.empty)return void d.select(this).remove();var s=b[f.valLetter+"axis"],t=b[f.posLetter+"axis"],u="both"===h.side,v=u||"positive"===h.side,w=u||"negative"===h.side,x=h.box&&h.box.visible,y=h.meanline&&h.meanline.visible,z=k._violinScaleGroupStats[h.scalegroup];if(n.selectAll("path.violin").data(e.identity).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin").each(function(a){var b,c=d.select(this),e=a.density,g=e.length,i=a.pos+r,k=t.c2p(i);switch(h.scalemode){case"width":b=z.maxWidth/q;break;case"count":b=z.maxWidth/q*(z.maxCount/a.pts.length)}var l,m,n,o,p,x,y;if(v){for(x=new Array(g),o=0;o<g;o++)y=x[o]={},y[f.posLetter]=i+e[o].v/b,y[f.valLetter]=e[o].t;l=j(x)}if(w){for(x=new Array(g),p=0,o=g-1;p<g;p++,o--)y=x[p]={},y[f.posLetter]=i-e[o].v/b,y[f.valLetter]=e[o].t;m=j(x)}if(u)n=l+"L"+m.substr(1)+"Z";else{var A=[k,s.c2p(e[0].t)],B=[k,s.c2p(e[g-1].t)];"h"===h.orientation&&(A.reverse(),B.reverse()),n=v?"M"+A+"L"+l.substr(1)+"L"+B:"M"+B+"L"+m.substr(1)+"L"+A}c.attr("d",n),a.posCenterPx=k,a.posDensityScale=b*q,a.path=c.node(),a.pathLength=a.path.getTotalLength()/(u?2:1)}),x){var A,B,C=h.box.width,D=h.box.line.width;u?(A=q*C,B=0):v?(A=[0,q*C/2],B=-D):(A=[q*C/2,0],B=D),h.whiskerwidth=0,g.plotBoxAndWhiskers(n,{pos:t,val:s},h,{bPos:r,bdPos:A,bPosPxOffset:B}),y&&g.plotBoxMean(n,{pos:t,val:s},h,{bPos:r,bdPos:A,bPosPxOffset:B})}else y&&n.selectAll("path.mean").data(e.identity).enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}).each(function(a){var b=s.c2p(a.mean,!0),c=i.getPositionOnKdePath(a,h,b);d.select(this).attr("d","h"===h.orientation?"M"+b+","+c[0]+"V"+c[1]:"M"+c[0]+","+b+"H"+c[1])});h.points&&g.plotPoints(n,{x:l,y:m},h,f)})}},{"../../components/drawing":643,"../../lib":743,"../box/plot":903,"../scatter/line_points":1080,"./helpers":1158,d3:128}],1164:[function(a,b,c){"use strict";var d=a("../box/set_positions").setPositionOffset,e=["v","h"];b.exports=function(a,b){for(var c=a.calcdata,f=b.xaxis,g=b.yaxis,h=0;h<e.length;h++){for(var i=e[h],j="h"===i?g:f,k=[],l=0,m=0,n=0;n<c.length;n++){var o=c[n],p=o[0].t,q=o[0].trace;!0!==q.visible||"violin"!==q.type||p.empty||q.orientation!==i||q.xaxis!==f._id||q.yaxis!==g._id||(k.push(n),!1!==q.points&&(l=Math.max(l,q.jitter-q.pointpos-1),m=Math.max(m,q.jitter+q.pointpos-1)))}d("violin",a,k,j,[l,m])}}},{"../box/set_positions":905}],1165:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../components/color"),f=a("../scatter/style").stylePoints;b.exports=function(a,b){var c=b?b[0].node3:d.select(a).selectAll("g.trace.violins");c.style("opacity",function(a){return a[0].trace.opacity}),c.each(function(b){var c=b[0].trace,g=d.select(this),h=c.box||{},i=h.line||{},j=c.meanline||{},k=j.width;g.selectAll("path.violin").style("stroke-width",c.line.width+"px").call(e.stroke,c.line.color).call(e.fill,c.fillcolor),g.selectAll("path.box").style("stroke-width",i.width+"px").call(e.stroke,i.color).call(e.fill,h.fillcolor),g.selectAll("path.mean").style({"stroke-width":k+"px","stroke-dasharray":2*k+"px,"+k+"px"}).call(e.stroke,j.color),f(g,c,a)})}},{"../../components/color":618,"../scatter/style":1087,d3:128}],1166:[function(a,b,c){"use strict";function d(a,b,c,d){if(d.enabled){for(var f=d.target,g=j.nestedProperty(b,f),h=g.get(),k=i.getDataConversions(a,b,f,h),l=e(d,k),m=new Array(c.length),n=0;n<c.length;n++)m[n]=l(h,c[n]);g.set(m)}}function e(a,b){var c=a.func,d=b.d2c,e=b.c2d;switch(c){case"count":return f;case"first":return g;case"last":return h;case"sum":return function(a,b){for(var c=0,f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&(c+=g)}return e(c)};case"avg":return function(a,b){for(var c=0,f=0,g=0;g<b.length;g++){var h=d(a[b[g]]);h!==m&&(c+=h,f++)}return f?e(c/f):m}
;case"min":return function(a,b){for(var c=1/0,f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&(c=Math.min(c,g))}return c===1/0?m:e(c)};case"max":return function(a,b){for(var c=-1/0,f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&(c=Math.max(c,g))}return c===-1/0?m:e(c)};case"median":return function(a,b){for(var c=[],f=0;f<b.length;f++){var g=d(a[b[f]]);g!==m&&c.push(g)}if(!c.length)return m;c.sort();var h=(c.length-1)/2;return e((c[Math.floor(h)]+c[Math.ceil(h)])/2)};case"mode":return function(a,b){for(var c={},f=0,g=m,h=0;h<b.length;h++){var i=d(a[b[h]]);if(i!==m){var j=c[i]=(c[i]||0)+1;j>f&&(f=j,g=i)}}return f?e(g):m};case"rms":return function(a,b){for(var c=0,f=0,g=0;g<b.length;g++){var h=d(a[b[g]]);h!==m&&(c+=h*h,f++)}return f?e(Math.sqrt(c/f)):m};case"stddev":return function(b,c){var e,f=0,g=0,h=1,i=m;for(e=0;e<c.length&&i===m;e++)i=d(b[c[e]]);if(i===m)return m;for(;e<c.length;e++){var j=d(b[c[e]]);if(j!==m){var k=j-i;f+=k,g+=k*k,h++}}var l="sample"===a.funcmode?h-1:h;return l?Math.sqrt((g-f*f/h)/l):0}}}function f(a,b){return b.length}function g(a,b){return a[b[0]]}function h(a,b){return a[b[b.length-1]]}var i=a("../plots/cartesian/axes"),j=a("../lib"),k=a("../plot_api/plot_schema"),l=a("./helpers").pointsAccessorFunction,m=a("../constants/numerical").BADNUM;c.moduleType="transform",c.name="aggregate";var n=c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},o=n.aggregations;c.supplyDefaults=function(a,b){function c(b,c){return j.coerce(a,f,n,b,c)}function d(a,b){return j.coerce(m[e],l,o,a,b)}var e,f={};if(!c("enabled"))return f;var g=k.findArrayAttributes(b),h={};for(e=0;e<g.length;e++)h[g[e]]=1;var i=c("groups");if(!Array.isArray(i)){if(!h[i])return void(f.enabled=!1);h[i]=0}var l,m=a.aggregations||[],p=f.aggregations=new Array(m.length);for(e=0;e<m.length;e++){l={_index:e};var q=d("target"),r=d("func");d("enabled")&&q&&(h[q]||"count"===r&&void 0===h[q])?("stddev"===r&&d("funcmode"),h[q]=0,p[e]=l):p[e]={enabled:!1,_index:e}}for(e=0;e<g.length;e++)h[g[e]]&&p.push({target:g[e],func:o.func.dflt,enabled:!0,_index:-1});return f},c.calcTransform=function(a,b,c){if(c.enabled){var e=c.groups,f=j.getTargetArray(b,{target:e});if(f){var g,h,i,k,m={},n={},o=[],p=l(b.transforms,c);for(g=0;g<f.length;g++)h=f[g],i=m[h],void 0===i?(m[h]=o.length,k=[g],o.push(k),n[m[h]]=p(g)):(o[i].push(g),n[m[h]]=(n[m[h]]||[]).concat(p(g)));c._indexToPoints=n;var q=c.aggregations;for(g=0;g<q.length;g++)d(a,b,o,q[g]);"string"==typeof e&&d(a,b,o,{target:e,func:"first",enabled:!0})}}}},{"../constants/numerical":721,"../lib":743,"../plot_api/plot_schema":778,"../plots/cartesian/axes":789,"./helpers":1169}],1167:[function(a,b,c){"use strict";function d(a,b,c){function d(a){return-1!==a.indexOf(f)}var e,f=a.operation,g=a.value,h=Array.isArray(g),l=function(c){return b(c,0,a.valuecalendar)},m=function(a){return b(a,0,c)};switch(d(i)?e=l(h?g[0]:g):d(j)?e=h?[l(g[0]),l(g[1])]:[l(g),l(g)]:d(k)&&(e=h?g.map(l):[l(g)]),f){case"=":return function(a){return m(a)===e};case"!=":return function(a){return m(a)!==e};case"<":return function(a){return m(a)<e};case"<=":return function(a){return m(a)<=e};case">":return function(a){return m(a)>e};case">=":return function(a){return m(a)>=e};case"[]":return function(a){var b=m(a);return b>=e[0]&&b<=e[1]};case"()":return function(a){var b=m(a);return b>e[0]&&b<e[1]};case"[)":return function(a){var b=m(a);return b>=e[0]&&b<e[1]};case"(]":return function(a){var b=m(a);return b>e[0]&&b<=e[1]};case"][":return function(a){var b=m(a);return b<=e[0]||b>=e[1]};case")(":return function(a){var b=m(a);return b<e[0]||b>e[1]};case"](":return function(a){var b=m(a);return b<=e[0]||b>e[1]};case")[":return function(a){var b=m(a);return b<e[0]||b>=e[1]};case"{}":return function(a){return-1!==e.indexOf(m(a))};case"}{":return function(a){return-1===e.indexOf(m(a))}}}var e=a("../lib"),f=a("../registry"),g=a("../plots/cartesian/axes"),h=a("./helpers").pointsAccessorFunction,i=["=","!=","<",">=",">","<="],j=["[]","()","[)","(]","][",")(","](",")["],k=["{}","}{"];c.moduleType="transform",c.name="filter",c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(i).concat(j).concat(k),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},c.supplyDefaults=function(a){function b(b,f){return e.coerce(a,d,c.attributes,b,f)}var d={};if(b("enabled")){b("preservegaps"),b("operation"),b("value"),b("target");var g=f.getComponentMethod("calendars","handleDefaults");g(a,d,"valuecalendar",null),g(a,d,"targetcalendar",null)}return d},c.calcTransform=function(a,b,c){function f(a,c){for(var d=0;d<m.length;d++){a(e.nestedProperty(b,m[d]),c)}}if(c.enabled){var i=e.getTargetArray(b,c);if(i){var j=c.target,k=i.length,l=c.targetcalendar,m=b._arrayAttrs;if("string"==typeof j){var n=e.nestedProperty(b,j+"calendar").get();n&&(l=n)}var o,p,q=g.getDataToCoordFunc(a,b,j,i),r=d(c,q,l),s={},t={},u=0;c.preservegaps?(o=function(a){s[a.astr]=e.extendDeep([],a.get()),a.set(new Array(k))},p=function(a,b){var c=s[a.astr][b];a.get()[b]=c}):(o=function(a){s[a.astr]=e.extendDeep([],a.get()),a.set([])},p=function(a,b){var c=s[a.astr][b];a.get().push(c)}),f(o);for(var v=h(b.transforms,c),w=0;w<k;w++){r(i[w])&&(f(p,w),t[u++]=v(w))}c._indexToPoints=t}}}},{"../lib":743,"../plots/cartesian/axes":789,"../registry":873,"./helpers":1169}],1168:[function(a,b,c){"use strict";function d(a,b){var c,d,i,j,k,l,m,n,o,p,q=b.transform,r=a.transforms[b.transformIndex].groups,s=h(a.transforms,q);if(!Array.isArray(r)||0===r.length)return[a];var t=e.filterUnique(r),u=new Array(t.length),v=r.length,w=f.findArrayAttributes(a),x=q.styles||[],y={};for(c=0;c<x.length;c++)y[x[c].target]=x[c].value;q.styles&&(p=e.keyedContainer(q,"styles","target","value.name"));var z={},A={};for(c=0;c<t.length;c++){l=t[c],z[l]=c,A[l]=0,m=u[c]=e.extendDeepNoArrays({},a),m._group=l,m.transforms[b.transformIndex]._indexToPoints={};var B=null;for(p&&(B=p.get(l)),m.name=B||e.templateString(q.nameformat,{trace:a.name,group:l}),n=m.transforms,m.transforms=[],d=0;d<n.length;d++)m.transforms[d]=e.extendDeepNoArrays({},n[d]);for(d=0;d<w.length;d++)e.nestedProperty(m,w[d]).set([])}for(i=0;i<w.length;i++){for(j=w[i],d=0,o=[];d<t.length;d++)o[d]=e.nestedProperty(u[d],j).get();for(k=e.nestedProperty(a,j).get(),d=0;d<v;d++)o[z[r[d]]].push(k[d])}for(d=0;d<v;d++){m=u[z[r[d]]];m.transforms[b.transformIndex]._indexToPoints[A[r[d]]]=s(d),A[r[d]]++}for(c=0;c<t.length;c++)l=t[c],m=u[c],g.clearExpandedTraceDefaultColors(m),m=e.extendDeepNoArrays(m,y[l]||{});return u}var e=a("../lib"),f=a("../plot_api/plot_schema"),g=a("../plots/plots"),h=a("./helpers").pointsAccessorFunction;c.moduleType="transform",c.name="groupby",c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc"},editType:"calc"},editType:"calc"},c.supplyDefaults=function(a,b,d){function f(b,d){return e.coerce(a,h,c.attributes,b,d)}var g,h={};if(!f("enabled"))return h;f("groups"),f("nameformat",d._dataLength>1?"%{group} (%{trace})":"%{group}");var i=a.styles,j=h.styles=[];if(i)for(g=0;g<i.length;g++)j[g]={},e.coerce(i[g],j[g],c.attributes.styles,"target"),e.coerce(i[g],j[g],c.attributes.styles,"value");return h},c.transform=function(a,b){var c,e,f,g=[];for(e=0;e<a.length;e++)for(c=d(a[e],b),f=0;f<c.length;f++)g.push(c[f]);return g}},{"../lib":743,"../plot_api/plot_schema":778,"../plots/plots":852,"./helpers":1169}],1169:[function(a,b,c){"use strict";c.pointsAccessorFunction=function(a,b){for(var c,d,e=0;e<a.length&&(c=a[e])!==b;e++)c._indexToPoints&&!1!==c.enabled&&(d=c._indexToPoints);return d?function(a){return d[a]}:function(a){return[a]}}},{}],1170:[function(a,b,c){"use strict";function d(a,b,c){for(var d=b.length,f=new Array(d),g=b.slice().sort(e(a,c)),h=0;h<d;h++)for(var i=b[h],j=0;j<d;j++){var k=g[j];if(i===k){f[j]=h,g[j]=null;break}}return f}function e(a,b){switch(a.order){case"ascending":return function(a,c){return b(a)-b(c)};case"descending":return function(a,c){return b(c)-b(a)}}}var f=a("../lib"),g=a("../plots/cartesian/axes"),h=a("./helpers").pointsAccessorFunction;c.moduleType="transform",c.name="sort",c.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},c.supplyDefaults=function(a){function b(b,e){return f.coerce(a,d,c.attributes,b,e)}var d={};return b("enabled")&&(b("target"),b("order")),d},c.calcTransform=function(a,b,c){if(c.enabled){var e=f.getTargetArray(b,c);if(e){var i,j,k=c.target,l=e.length,m=b._arrayAttrs,n=g.getDataToCoordFunc(a,b,k,e),o=d(c,e,n),p=h(b.transforms,c),q={};for(i=0;i<m.length;i++){var r=f.nestedProperty(b,m[i]),s=r.get(),t=new Array(l);for(j=0;j<l;j++)t[j]=s[o[j]];r.set(t)}for(j=0;j<l;j++)q[j]=p(o[j]);c._indexToPoints=q}}}},{"../lib":743,"../plots/cartesian/axes":789,"./helpers":1169}]},{},[20])(20)}),angular.module("angularPlotly",[]).directive("angularPlotly",["$window",function(a,b){return{restrict:"E",template:"<div></div>",scope:{plotlyData:"=",plotlyLayout:"=",plotlyOptions:"=",plotlyEvents:"=",plotlyManualDataUpdate:"="},link:function(b,c){function d(a){b.plotlyEvents(a)}function e(){if(!b.plotlyData)return void(h&&(Plotly.Plots.purge(g),g.innerHTML=""));h||(h=!0,Plotly.newPlot(g,b.plotlyData,b.plotlyLayout,b.plotlyOptions),b.plotlyEvents&&d(g)),g.layout=angular.copy(b.plotlyLayout),g.data=angular.copy(b.plotlyData),Plotly.plot(g,b.plotlyData,b.plotlyLayout),Plotly.Plots.resize(g)}function f(){if(h&&b.plotlyData){var a=window.getComputedStyle(g).display;if(a&&"none"!==a&&h&&b.plotlyData)try{Plotly.Plots.resize(g)}catch(a){}}}var g=c[0].children[0],h=!1;b.$watch(function(a){return a.plotlyLayout},function(a,b){angular.equals(a,b)&&h||e()},!0),b.plotlyManualDataUpdate||b.$watch(function(a){return a.plotlyData},function(a,b){angular.equals(a,b)&&h||e()},!1),b.$on("tracesUpdated",function(){e()}),b.$watch(function(){return{h:c[0].offsetHeight,w:c[0].offsetWidth}},function(a,b){angular.equals(a,b)||f()},!0),angular.element(a).bind("resize",f)}}}]),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Dygraph=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./bars"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function(){};f.prototype=new e.default,f.prototype.extractSeries=function(a,b,c){for(var d,e,f,g=[],h=c.get("logscale"),i=0;i<a.length;i++)d=a[i][0],f=a[i][b],h&&null!==f&&(f[0]<=0||f[1]<=0||f[2]<=0)&&(f=null),null!==f?(e=f[1],null===e||isNaN(e)?g.push([d,e,[e,e]]):g.push([d,e,[f[0],f[2]]])):g.push([d,null,[null,null]]);return g},f.prototype.rollingAverage=function(a,b,c){b=Math.min(b,a.length);var d,e,f,g,h,i,j,k=[];for(e=0,g=0,f=0,h=0,i=0;i<a.length;i++){if(d=a[i][1],j=a[i][2],k[i]=a[i],null===d||isNaN(d)||(e+=j[0],g+=d,f+=j[1],h+=1),i-b>=0){var l=a[i-b];null===l[1]||isNaN(l[1])||(e-=l[2][0],g-=l[1],f-=l[2][1],h-=1)}k[i]=h?[a[i][0],1*g/h,[1*e/h,1*f/h]]:[a[i][0],null,[null,null]]}return k},c.default=f,b.exports=c.default},{"./bars":5}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./bars"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function(){};f.prototype=new e.default,f.prototype.extractSeries=function(a,b,c){for(var d,e,f,g,h=[],i=c.get("sigma"),j=c.get("logscale"),k=0;k<a.length;k++)d=a[k][0],g=a[k][b],j&&null!==g&&(g[0]<=0||g[0]-i*g[1]<=0)&&(g=null),null!==g?(e=g[0],null===e||isNaN(e)?h.push([d,e,[e,e,e]]):(f=i*g[1],h.push([d,e,[e-f,e+f,g[1]]]))):h.push([d,null,[null,null,null]]);return h},f.prototype.rollingAverage=function(a,b,c){b=Math.min(b,a.length);var d,e,f,g,h,i,j,k,l,m=[],n=c.get("sigma");for(d=0;d<a.length;d++){for(h=0,k=0,i=0,e=Math.max(0,d-b+1);e<d+1;e++)null===(f=a[e][1])||isNaN(f)||(i++,h+=f,k+=Math.pow(a[e][2][2],2));i?(j=Math.sqrt(k)/i,l=h/i,m[d]=[a[d][0],l,[l-n*j,l+n*j]]):(g=1==b?a[d][1]:null,m[d]=[a[d][0],g,[g,g]])}return m},c.default=f,b.exports=c.default},{"./bars":5}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./bars"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function(){};f.prototype=new e.default,f.prototype.extractSeries=function(a,b,c){for(var d,e,f,g,h,i,j,k,l=[],m=c.get("sigma"),n=c.get("logscale"),o=0;o<a.length;o++)d=a[o][0],f=a[o][b],n&&null!==f&&(f[0]<=0||f[1]<=0)&&(f=null),null!==f?(g=f[0],h=f[1],null===g||isNaN(g)?l.push([d,g,[g,g,g,h]]):(i=h?g/h:0,j=h?m*Math.sqrt(i*(1-i)/h):1,k=100*j,e=100*i,l.push([d,e,[e-k,e+k,g,h]]))):l.push([d,null,[null,null,null,null]]);return l},f.prototype.rollingAverage=function(a,b,c){b=Math.min(b,a.length);var d,e,f,g,h=[],i=c.get("sigma"),j=c.get("wilsonInterval"),k=0,l=0;for(f=0;f<a.length;f++){k+=a[f][2][2],l+=a[f][2][3],f-b>=0&&(k-=a[f-b][2][2],l-=a[f-b][2][3]);var m=a[f][0],n=l?k/l:0;if(j)if(l){var o=n<0?0:n,p=l,q=i*Math.sqrt(o*(1-o)/p+i*i/(4*p*p)),r=1+i*i/l;d=(o+i*i/(2*l)-q)/r,e=(o+i*i/(2*l)+q)/r,h[f]=[m,100*o,[100*d,100*e]]}else h[f]=[m,0,[0,0]];else g=l?i*Math.sqrt(n*(1-n)/l):1,h[f]=[m,100*n,[100*(n-g),100*(n+g)]]}return h},c.default=f,b.exports=c.default},{"./bars":5}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./datahandler"),f=d(e),g=a("../dygraph-layout"),h=d(g),i=function(){f.default.call(this)};i.prototype=new f.default,i.prototype.extractSeries=function(a,b,c){},i.prototype.rollingAverage=function(a,b,c){},i.prototype.onPointsCreated_=function(a,b){for(var c=0;c<a.length;++c){var d=a[c],e=b[c];e.y_top=NaN,e.y_bottom=NaN,e.yval_minus=f.default.parseFloat(d[2][0]),e.yval_plus=f.default.parseFloat(d[2][1])}},i.prototype.getExtremeYValues=function(a,b,c){for(var d,e=null,f=null,g=a.length-1,h=0;h<=g;h++)if(null!==(d=a[h][1])&&!isNaN(d)){var i=a[h][2][0],j=a[h][2][1];i>d&&(i=d),j<d&&(j=d),(null===f||j>f)&&(f=j),(null===e||i<e)&&(e=i)}return[e,f]},i.prototype.onLineEvaluated=function(a,b,c){for(var d,e=0;e<a.length;e++)d=a[e],d.y_top=h.default.calcYNormal_(b,d.yval_minus,c),d.y_bottom=h.default.calcYNormal_(b,d.yval_plus,c)},c.default=i,b.exports=c.default},{"../dygraph-layout":13,"./datahandler":6}],6:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){},e=d;e.X=0,e.Y=1,e.EXTRAS=2,e.prototype.extractSeries=function(a,b,c){},e.prototype.seriesToPoints=function(a,b,c){for(var d=[],f=0;f<a.length;++f){var g=a[f],h=g[1],i=null===h?null:e.parseFloat(h),j={x:NaN,y:NaN,xval:e.parseFloat(g[0]),yval:i,name:b,idx:f+c};d.push(j)}return this.onPointsCreated_(a,d),d},e.prototype.onPointsCreated_=function(a,b){},e.prototype.rollingAverage=function(a,b,c){},e.prototype.getExtremeYValues=function(a,b,c){},e.prototype.onLineEvaluated=function(a,b,c){},e.parseFloat=function(a){return null===a?NaN:a},c.default=d,b.exports=c.default},{}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./datahandler"),f=(d(e),a("./default")),g=d(f),h=function(){};h.prototype=new g.default,h.prototype.extractSeries=function(a,b,c){for(var d,e,f,g,h,i,j=[],k=c.get("logscale"),l=0;l<a.length;l++)d=a[l][0],f=a[l][b],k&&null!==f&&(f[0]<=0||f[1]<=0)&&(f=null),null!==f?(g=f[0],h=f[1],null===g||isNaN(g)?j.push([d,g,[g,h]]):(i=h?g/h:0,e=100*i,j.push([d,e,[g,h]]))):j.push([d,null,[null,null]]);return j},h.prototype.rollingAverage=function(a,b,c){b=Math.min(b,a.length);var d,e=[],f=0,g=0;for(d=0;d<a.length;d++){f+=a[d][2][0],g+=a[d][2][1],d-b>=0&&(f-=a[d-b][2][0],g-=a[d-b][2][1]);var h=a[d][0],i=g?f/g:0;e[d]=[h,100*i]}return e},c.default=h,b.exports=c.default},{"./datahandler":6,"./default":8}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./datahandler"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function(){};f.prototype=new e.default,f.prototype.extractSeries=function(a,b,c){for(var d=[],e=c.get("logscale"),f=0;f<a.length;f++){var g=a[f][0],h=a[f][b];e&&h<=0&&(h=null),d.push([g,h])}return d},f.prototype.rollingAverage=function(a,b,c){b=Math.min(b,a.length);var d,e,f,g,h,i=[];if(1==b)return a;for(d=0;d<a.length;d++){for(g=0,h=0,e=Math.max(0,d-b+1);e<d+1;e++)null===(f=a[e][1])||isNaN(f)||(h++,g+=a[e][1]);i[d]=h?[a[d][0],g/h]:[a[d][0],null]}return i},f.prototype.getExtremeYValues=function(a,b,c){for(var d,e=null,f=null,g=a.length-1,h=0;h<=g;h++)null===(d=a[h][1])||isNaN(d)||((null===f||d>f)&&(f=d),(null===e||d<e)&&(e=d));return[e,f]},c.default=f,b.exports=c.default},{"./datahandler":6}],9:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./dygraph-utils"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=a("./dygraph"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(a,b,c,d){if(this.dygraph_=a,this.layout=d,this.element=b,this.elementContext=c,this.height=a.height_,this.width=a.width_,!e.isCanvasSupported(this.element))throw"Canvas is not supported.";this.area=d.getPlotArea();var f=this.dygraph_.canvas_ctx_;f.beginPath(),f.rect(this.area.x,this.area.y,this.area.w,this.area.h),f.clip(),f=this.dygraph_.hidden_ctx_,f.beginPath(),f.rect(this.area.x,this.area.y,this.area.w,this.area.h),f.clip()};h.prototype.clear=function(){this.elementContext.clearRect(0,0,this.width,this.height)},h.prototype.render=function(){this._updatePoints(),this._renderLineChart()},h._getIteratorPredicate=function(a){return a?h._predicateThatSkipsEmptyPoints:null},h._predicateThatSkipsEmptyPoints=function(a,b){return null!==a[b].yval},h._drawStyledLine=function(a,b,c,d,f,g,i){var j=a.dygraph,k=j.getBooleanOption("stepPlot",a.setName);e.isArrayLike(d)||(d=null);var l=j.getBooleanOption("drawGapEdgePoints",a.setName),m=a.points,n=a.setName,o=e.createIterator(m,0,m.length,h._getIteratorPredicate(j.getBooleanOption("connectSeparatedPoints",n))),p=d&&d.length>=2,q=a.drawingContext;q.save(),p&&q.setLineDash&&q.setLineDash(d);var r=h._drawSeries(a,o,c,i,f,l,k,b);h._drawPointsOnLine(a,r,g,b,i),p&&q.setLineDash&&q.setLineDash([]),q.restore()},h._drawSeries=function(a,b,c,d,e,f,g,h){var i,j,k=null,l=null,m=null,n=[],o=!0,p=a.drawingContext;p.beginPath(),p.strokeStyle=h,p.lineWidth=c;for(var q=b.array_,r=b.end_,s=b.predicate_,t=b.start_;t<r;t++){if(j=q[t],s){for(;t<r&&!s(q,t);)t++;if(t==r)break;j=q[t]}if(null===j.canvasy||j.canvasy!=j.canvasy)g&&null!==k&&(p.moveTo(k,l),p.lineTo(j.canvasx,l)),k=l=null;else{if(i=!1,f||null===k){b.nextIdx_=t,b.next(),m=b.hasNext?b.peek.canvasy:null;var u=null===m||m!=m;i=null===k&&u,f&&(!o&&null===k||b.hasNext&&u)&&(i=!0)}null!==k?c&&(g&&(p.moveTo(k,l),p.lineTo(j.canvasx,l)),p.lineTo(j.canvasx,j.canvasy)):p.moveTo(j.canvasx,j.canvasy),(e||i)&&n.push([j.canvasx,j.canvasy,j.idx]),k=j.canvasx,l=j.canvasy}o=!1}return p.stroke(),n},h._drawPointsOnLine=function(a,b,c,d,e){for(var f=a.drawingContext,g=0;g<b.length;g++){var h=b[g];f.save(),c.call(a.dygraph,a.dygraph,a.setName,f,h[0],h[1],d,e,h[2]),f.restore()}},h.prototype._updatePoints=function(){for(var a=this.layout.points,b=a.length;b--;)for(var c=a[b],d=c.length;d--;){var e=c[d];e.canvasx=this.area.w*e.x+this.area.x,e.canvasy=this.area.h*e.y+this.area.y}},h.prototype._renderLineChart=function(a,b){var c,d,f=b||this.elementContext,g=this.layout.points,h=this.layout.setNames;this.colors=this.dygraph_.colorsMap_;var i=this.dygraph_.getOption("plotter"),j=i;e.isArrayLike(j)||(j=[j]);var k={};for(c=0;c<h.length;c++){d=h[c];var l=this.dygraph_.getOption("plotter",d);l!=i&&(k[d]=l)}for(c=0;c<j.length;c++)for(var m=j[c],n=c==j.length-1,o=0;o<g.length;o++)if(d=h[o],!a||d==a){var p=g[o],q=m;if(d in k){if(!n)continue;q=k[d]}var r=this.colors[d],s=this.dygraph_.getOption("strokeWidth",d);f.save(),f.strokeStyle=r,f.lineWidth=s,q({points:p,setName:d,drawingContext:f,color:r,strokeWidth:s,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(d),plotArea:this.area,seriesIndex:o,seriesCount:g.length,singleSeriesName:a,allSeriesPoints:g}),f.restore()}},h._Plotters={linePlotter:function(a){h._linePlotter(a)},fillPlotter:function(a){h._fillPlotter(a)},errorPlotter:function(a){h._errorPlotter(a)}},h._linePlotter=function(a){var b=a.dygraph,c=a.setName,d=a.strokeWidth,f=b.getNumericOption("strokeBorderWidth",c),g=b.getOption("drawPointCallback",c)||e.Circles.DEFAULT,i=b.getOption("strokePattern",c),j=b.getBooleanOption("drawPoints",c),k=b.getNumericOption("pointSize",c);f&&d&&h._drawStyledLine(a,b.getOption("strokeBorderColor",c),d+2*f,i,j,g,k),h._drawStyledLine(a,a.color,d,i,j,g,k)},h._errorPlotter=function(a){var b=a.dygraph,c=a.setName;if(b.getBooleanOption("errorBars")||b.getBooleanOption("customBars")){b.getBooleanOption("fillGraph",c)&&console.warn("Can't use fillGraph option with error bars");var d,f=a.drawingContext,g=a.color,i=b.getNumericOption("fillAlpha",c),j=b.getBooleanOption("stepPlot",c),k=a.points,l=e.createIterator(k,0,k.length,h._getIteratorPredicate(b.getBooleanOption("connectSeparatedPoints",c))),m=NaN,n=NaN,o=[-1,-1],p=e.toRGB_(g),q="rgba("+p.r+","+p.g+","+p.b+","+i+")";f.fillStyle=q,f.beginPath();for(var r=function(a){return null===a||void 0===a||isNaN(a)};l.hasNext;){var s=l.next();!j&&r(s.y)||j&&!isNaN(n)&&r(n)?m=NaN:(d=[s.y_bottom,s.y_top],j&&(n=s.y),isNaN(d[0])&&(d[0]=s.y),isNaN(d[1])&&(d[1]=s.y),d[0]=a.plotArea.h*d[0]+a.plotArea.y,d[1]=a.plotArea.h*d[1]+a.plotArea.y,isNaN(m)||(j?(f.moveTo(m,o[0]),f.lineTo(s.canvasx,o[0]),f.lineTo(s.canvasx,o[1])):(f.moveTo(m,o[0]),f.lineTo(s.canvasx,d[0]),f.lineTo(s.canvasx,d[1])),f.lineTo(m,o[1]),f.closePath()),o=d,m=s.canvasx)}f.fill()}},h._fastCanvasProxy=function(a){var b=[],c=null,d=null,e=0,f=function(a){if(!(b.length<=1)){for(var c=b.length-1;c>0;c--){var d=b[c];if(2==d[0]){var e=b[c-1];e[1]==d[1]&&e[2]==d[2]&&b.splice(c,1)}}for(var c=0;c<b.length-1;){var d=b[c];2==d[0]&&2==b[c+1][0]?b.splice(c,1):c++}if(b.length>2&&!a){var f=0;2==b[0][0]&&f++;for(var g=null,h=null,c=f;c<b.length;c++){var d=b[c];if(1==d[0])if(null===g&&null===h)g=c,h=c;else{var i=d[2];i<b[g][2]?g=c:i>b[h][2]&&(h=c)}}var j=b[g],k=b[h];b.splice(f,b.length-f),g<h?(b.push(j),b.push(k)):g>h?(b.push(k),b.push(j)):b.push(j)}}},g=function(c){f(c);for(var g=0,h=b.length;g<h;g++){var i=b[g];1==i[0]?a.lineTo(i[1],i[2]):2==i[0]&&a.moveTo(i[1],i[2])}b.length&&(d=b[b.length-1][1]),e+=b.length,b=[]},h=function(a,e,f){var h=Math.round(e);if(null===c||h!=c){var i=c-d>1,j=h-c>1;g(i||j),c=h}b.push([a,e,f])};return{moveTo:function(a,b){h(2,a,b)},lineTo:function(a,b){h(1,a,b)},stroke:function(){g(!0),a.stroke()},fill:function(){g(!0),a.fill()},beginPath:function(){g(!0),a.beginPath()},closePath:function(){g(!0),a.closePath()},_count:function(){return e}}},h._fillPlotter=function(a){if(!a.singleSeriesName&&0===a.seriesIndex){for(var b=a.dygraph,c=b.getLabels().slice(1),d=c.length;d>=0;d--)b.visibility()[d]||c.splice(d,1);if(function(){for(var a=0;a<c.length;a++)if(b.getBooleanOption("fillGraph",c[a]))return!0;return!1}())for(var f,i,j=a.plotArea,k=a.allSeriesPoints,l=k.length,m=b.getBooleanOption("stackedGraph"),n=b.getColors(),o={},p=function(a,b,c,d){if(a.lineTo(b,c),m)for(var e=d.length-1;e>=0;e--){var f=d[e];a.lineTo(f[0],f[1])}},q=l-1;q>=0;q--){var r=a.drawingContext,s=c[q];if(b.getBooleanOption("fillGraph",s)){var t=b.getNumericOption("fillAlpha",s),u=b.getBooleanOption("stepPlot",s),v=n[q],w=b.axisPropertiesForSeries(s),x=1+w.minyval*w.yscale;x<0?x=0:x>1&&(x=1),x=j.h*x+j.y;var y,z=k[q],A=e.createIterator(z,0,z.length,h._getIteratorPredicate(b.getBooleanOption("connectSeparatedPoints",s))),B=NaN,C=[-1,-1],D=e.toRGB_(v),E="rgba("+D.r+","+D.g+","+D.b+","+t+")";r.fillStyle=E,r.beginPath();var F,G=!0;(z.length>2*b.width_||g.default.FORCE_FAST_PROXY)&&(r=h._fastCanvasProxy(r));for(var H,I=[];A.hasNext;)if(H=A.next(),e.isOK(H.y)||u){if(m){if(!G&&F==H.xval)continue;G=!1,F=H.xval,f=o[H.canvasx];var J;J=void 0===f?x:i?f[0]:f,y=[H.canvasy,J],u?-1===C[0]?o[H.canvasx]=[H.canvasy,x]:o[H.canvasx]=[H.canvasy,C[0]]:o[H.canvasx]=H.canvasy}else y=isNaN(H.canvasy)&&u?[j.y+j.h,x]:[H.canvasy,x];isNaN(B)?(r.moveTo(H.canvasx,y[1]),r.lineTo(H.canvasx,y[0])):(u?(r.lineTo(H.canvasx,C[0]),r.lineTo(H.canvasx,y[0])):r.lineTo(H.canvasx,y[0]),m&&(I.push([B,C[1]]),i&&f?I.push([H.canvasx,f[1]]):I.push([H.canvasx,y[1]]))),C=y,B=H.canvasx}else p(r,B,C[1],I),I=[],B=NaN,null===H.y_stacked||isNaN(H.y_stacked)||(o[H.canvasx]=j.h*H.y_stacked+j.y);i=u,y&&H&&(p(r,H.canvasx,y[1],I),I=[]),r.fill()}}}},c.default=h,b.exports=c.default},{"./dygraph":18,"./dygraph-utils":17}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./dygraph-tickers"),g=e(f),h=a("./dygraph-interaction-model"),i=d(h),j=a("./dygraph-canvas"),k=d(j),l=a("./dygraph-utils"),m=e(l),n={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,highlightSeriesBackgroundColor:"rgb(255, 255, 255)",labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,rightGap:5,showRoller:!1,offset:0,xValueParser:void 0,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelWidth:75,gridLineColor:"rgb(128,128,128)",interactionModel:i.default.defaultModel,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillGradientColor:"white",rangeSelectorPlotFillColor:"#A7B1C4",rangeSelectorBackgroundStrokeColor:"gray",rangeSelectorBackgroundLineWidth:1,rangeSelectorPlotLineWidth:1.5,rangeSelectorForegroundStrokeColor:"black",rangeSelectorForegroundLineWidth:1,rangeSelectorAlpha:.6,showInRangeSelector:null,plotter:[k.default._fillPlotter,k.default._errorPlotter,k.default._linePlotter],plugins:[],axes:{x:{pixelsPerLabel:70,axisLabelWidth:60,axisLabelFormatter:m.dateAxisLabelFormatter,valueFormatter:m.dateValueFormatter,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:g.dateTicker},y:{axisLabelWidth:75,pixelsPerLabel:30,valueFormatter:function(a){return parseFloat(a)},axisLabelFormatter:function(a){return parseFloat(a)},drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:g.numericTicks},y2:{axisLabelWidth:75,pixelsPerLabel:30,valueFormatter:function(a){return parseFloat(a)},axisLabelFormatter:function(a){return parseFloat(a)},drawAxis:!0,drawGrid:!1,independentTicks:!1,ticker:g.numericTicks}}};c.default=n,b.exports=c.default},{"./dygraph-canvas":9,"./dygraph-interaction-model":12,"./dygraph-tickers":16,"./dygraph-utils":17}],11:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./dygraph"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=function(a){this.container=a};f.prototype.draw=function(a,b){this.container.innerHTML="",void 0!==this.date_graph&&this.date_graph.destroy(),this.date_graph=new e.default(this.container,a,b)},f.prototype.setSelection=function(a){var b=!1;a.length&&(b=a[0].row),this.date_graph.setSelection(b)},f.prototype.getSelection=function(){var a=[],b=this.date_graph.getSelection();if(b<0)return a;for(var c=this.date_graph.layout_.points,d=0;d<c.length;++d)a.push({row:b,column:d+1});return a},c.default=f,b.exports=c.default},{"./dygraph":18}],12:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./dygraph-utils"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f={};f.maybeTreatMouseOpAsClick=function(a,b,c){c.dragEndX=e.dragGetX_(a,c),c.dragEndY=e.dragGetY_(a,c);var d=Math.abs(c.dragEndX-c.dragStartX),g=Math.abs(c.dragEndY-c.dragStartY);d<2&&g<2&&void 0!==b.lastx_&&-1!=b.lastx_&&f.treatMouseOpAsClick(b,a,c),c.regionWidth=d,c.regionHeight=g},f.startPan=function(a,b,c){var d,f;c.isPanning=!0;var g=b.xAxisRange();if(b.getOptionForAxis("logscale","x")?(c.initialLeftmostDate=e.log10(g[0]),c.dateRange=e.log10(g[1])-e.log10(g[0])):(c.initialLeftmostDate=g[0],c.dateRange=g[1]-g[0]),c.xUnitsPerPixel=c.dateRange/(b.plotter_.area.w-1),b.getNumericOption("panEdgeFraction")){
var h=b.width_*b.getNumericOption("panEdgeFraction"),i=b.xAxisExtremes(),j=b.toDomXCoord(i[0])-h,k=b.toDomXCoord(i[1])+h,l=b.toDataXCoord(j),m=b.toDataXCoord(k);c.boundedDates=[l,m];var n=[],o=b.height_*b.getNumericOption("panEdgeFraction");for(d=0;d<b.axes_.length;d++){f=b.axes_[d];var p=f.extremeRange,q=b.toDomYCoord(p[0],d)+o,r=b.toDomYCoord(p[1],d)-o,s=b.toDataYCoord(q,d),t=b.toDataYCoord(r,d);n[d]=[s,t]}c.boundedValues=n}for(c.is2DPan=!1,c.axes=[],d=0;d<b.axes_.length;d++){f=b.axes_[d];var u={},v=b.yAxisRange(d);b.attributes_.getForAxis("logscale",d)?(u.initialTopValue=e.log10(v[1]),u.dragValueRange=e.log10(v[1])-e.log10(v[0])):(u.initialTopValue=v[1],u.dragValueRange=v[1]-v[0]),u.unitsPerPixel=u.dragValueRange/(b.plotter_.area.h-1),c.axes.push(u),f.valueRange&&(c.is2DPan=!0)}},f.movePan=function(a,b,c){c.dragEndX=e.dragGetX_(a,c),c.dragEndY=e.dragGetY_(a,c);var d=c.initialLeftmostDate-(c.dragEndX-c.dragStartX)*c.xUnitsPerPixel;c.boundedDates&&(d=Math.max(d,c.boundedDates[0]));var f=d+c.dateRange;if(c.boundedDates&&f>c.boundedDates[1]&&(d-=f-c.boundedDates[1],f=d+c.dateRange),b.getOptionForAxis("logscale","x")?b.dateWindow_=[Math.pow(e.LOG_SCALE,d),Math.pow(e.LOG_SCALE,f)]:b.dateWindow_=[d,f],c.is2DPan)for(var g=c.dragEndY-c.dragStartY,h=0;h<b.axes_.length;h++){var i=b.axes_[h],j=c.axes[h],k=g*j.unitsPerPixel,l=c.boundedValues?c.boundedValues[h]:null,m=j.initialTopValue+k;l&&(m=Math.min(m,l[1]));var n=m-j.dragValueRange;l&&n<l[0]&&(m-=n-l[0],n=m-j.dragValueRange),b.attributes_.getForAxis("logscale",h)?i.valueRange=[Math.pow(e.LOG_SCALE,n),Math.pow(e.LOG_SCALE,m)]:i.valueRange=[n,m]}b.drawGraph_(!1)},f.endPan=f.maybeTreatMouseOpAsClick,f.startZoom=function(a,b,c){c.isZooming=!0,c.zoomMoved=!1},f.moveZoom=function(a,b,c){c.zoomMoved=!0,c.dragEndX=e.dragGetX_(a,c),c.dragEndY=e.dragGetY_(a,c);var d=Math.abs(c.dragStartX-c.dragEndX),f=Math.abs(c.dragStartY-c.dragEndY);c.dragDirection=d<f/2?e.VERTICAL:e.HORIZONTAL,b.drawZoomRect_(c.dragDirection,c.dragStartX,c.dragEndX,c.dragStartY,c.dragEndY,c.prevDragDirection,c.prevEndX,c.prevEndY),c.prevEndX=c.dragEndX,c.prevEndY=c.dragEndY,c.prevDragDirection=c.dragDirection},f.treatMouseOpAsClick=function(a,b,c){for(var d=a.getFunctionOption("clickCallback"),e=a.getFunctionOption("pointClickCallback"),f=null,g=-1,h=Number.MAX_VALUE,i=0;i<a.selPoints_.length;i++){var j=a.selPoints_[i],k=Math.pow(j.canvasx-c.dragEndX,2)+Math.pow(j.canvasy-c.dragEndY,2);!isNaN(k)&&(-1==g||k<h)&&(h=k,g=i)}var l=a.getNumericOption("highlightCircleSize")+2;if(h<=l*l&&(f=a.selPoints_[g]),f){var m={cancelable:!0,point:f,canvasx:c.dragEndX,canvasy:c.dragEndY};if(a.cascadeEvents_("pointClick",m))return;e&&e.call(a,b,f)}var m={cancelable:!0,xval:a.lastx_,pts:a.selPoints_,canvasx:c.dragEndX,canvasy:c.dragEndY};a.cascadeEvents_("click",m)||d&&d.call(a,b,a.lastx_,a.selPoints_)},f.endZoom=function(a,b,c){b.clearZoomRect_(),c.isZooming=!1,f.maybeTreatMouseOpAsClick(a,b,c);var d=b.getArea();if(c.regionWidth>=10&&c.dragDirection==e.HORIZONTAL){var g=Math.min(c.dragStartX,c.dragEndX),h=Math.max(c.dragStartX,c.dragEndX);g=Math.max(g,d.x),h=Math.min(h,d.x+d.w),g<h&&b.doZoomX_(g,h),c.cancelNextDblclick=!0}else if(c.regionHeight>=10&&c.dragDirection==e.VERTICAL){var i=Math.min(c.dragStartY,c.dragEndY),j=Math.max(c.dragStartY,c.dragEndY);i=Math.max(i,d.y),j=Math.min(j,d.y+d.h),i<j&&b.doZoomY_(i,j),c.cancelNextDblclick=!0}c.dragStartX=null,c.dragStartY=null},f.startTouch=function(a,b,c){a.preventDefault(),a.touches.length>1&&(c.startTimeForDoubleTapMs=null);for(var d=[],e=0;e<a.touches.length;e++){var f=a.touches[e];d.push({pageX:f.pageX,pageY:f.pageY,dataX:b.toDataXCoord(f.pageX),dataY:b.toDataYCoord(f.pageY)})}if(c.initialTouches=d,1==d.length)c.initialPinchCenter=d[0],c.touchDirections={x:!0,y:!0};else if(d.length>=2){c.initialPinchCenter={pageX:.5*(d[0].pageX+d[1].pageX),pageY:.5*(d[0].pageY+d[1].pageY),dataX:.5*(d[0].dataX+d[1].dataX),dataY:.5*(d[0].dataY+d[1].dataY)};var g=180/Math.PI*Math.atan2(c.initialPinchCenter.pageY-d[0].pageY,d[0].pageX-c.initialPinchCenter.pageX);g=Math.abs(g),g>90&&(g=90-g),c.touchDirections={x:g<67.5,y:g>22.5}}c.initialRange={x:b.xAxisRange(),y:b.yAxisRange()}},f.moveTouch=function(a,b,c){c.startTimeForDoubleTapMs=null;var d,e=[];for(d=0;d<a.touches.length;d++){var f=a.touches[d];e.push({pageX:f.pageX,pageY:f.pageY})}var g,h=c.initialTouches,i=c.initialPinchCenter;g=1==e.length?e[0]:{pageX:.5*(e[0].pageX+e[1].pageX),pageY:.5*(e[0].pageY+e[1].pageY)};var j={pageX:g.pageX-i.pageX,pageY:g.pageY-i.pageY},k=c.initialRange.x[1]-c.initialRange.x[0],l=c.initialRange.y[0]-c.initialRange.y[1];j.dataX=j.pageX/b.plotter_.area.w*k,j.dataY=j.pageY/b.plotter_.area.h*l;var m,n;if(1==e.length)m=1,n=1;else if(e.length>=2){var o=h[1].pageX-i.pageX;m=(e[1].pageX-g.pageX)/o;var p=h[1].pageY-i.pageY;n=(e[1].pageY-g.pageY)/p}m=Math.min(8,Math.max(.125,m)),n=Math.min(8,Math.max(.125,n));var q=!1;if(c.touchDirections.x&&(b.dateWindow_=[i.dataX-j.dataX+(c.initialRange.x[0]-i.dataX)/m,i.dataX-j.dataX+(c.initialRange.x[1]-i.dataX)/m],q=!0),c.touchDirections.y)for(d=0;d<1;d++){var r=b.axes_[d],s=b.attributes_.getForAxis("logscale",d);s||(r.valueRange=[i.dataY-j.dataY+(c.initialRange.y[0]-i.dataY)/n,i.dataY-j.dataY+(c.initialRange.y[1]-i.dataY)/n],q=!0)}if(b.drawGraph_(!1),q&&e.length>1&&b.getFunctionOption("zoomCallback")){var t=b.xAxisRange();b.getFunctionOption("zoomCallback").call(b,t[0],t[1],b.yAxisRanges())}},f.endTouch=function(a,b,c){if(0!==a.touches.length)f.startTouch(a,b,c);else if(1==a.changedTouches.length){var d=(new Date).getTime(),e=a.changedTouches[0];c.startTimeForDoubleTapMs&&d-c.startTimeForDoubleTapMs<500&&c.doubleTapX&&Math.abs(c.doubleTapX-e.screenX)<50&&c.doubleTapY&&Math.abs(c.doubleTapY-e.screenY)<50?b.resetZoom():(c.startTimeForDoubleTapMs=d,c.doubleTapX=e.screenX,c.doubleTapY=e.screenY)}};var g=function(a,b,c){return a<b?b-a:a>c?a-c:0},h=function(a,b){var c=e.findPos(b.canvas_),d={left:c.x,right:c.x+b.canvas_.offsetWidth,top:c.y,bottom:c.y+b.canvas_.offsetHeight},f={x:e.pageX(a),y:e.pageY(a)},h=g(f.x,d.left,d.right),i=g(f.y,d.top,d.bottom);return Math.max(h,i)};f.defaultModel={mousedown:function(a,b,c){if(!a.button||2!=a.button){c.initializeMouseDown(a,b,c),a.altKey||a.shiftKey?f.startPan(a,b,c):f.startZoom(a,b,c);var d=function(a){if(c.isZooming){h(a,b)<100?f.moveZoom(a,b,c):null!==c.dragEndX&&(c.dragEndX=null,c.dragEndY=null,b.clearZoomRect_())}else c.isPanning&&f.movePan(a,b,c)},g=function a(g){c.isZooming?null!==c.dragEndX?f.endZoom(g,b,c):f.maybeTreatMouseOpAsClick(g,b,c):c.isPanning&&f.endPan(g,b,c),e.removeEvent(document,"mousemove",d),e.removeEvent(document,"mouseup",a),c.destroy()};b.addAndTrackEvent(document,"mousemove",d),b.addAndTrackEvent(document,"mouseup",g)}},willDestroyContextMyself:!0,touchstart:function(a,b,c){f.startTouch(a,b,c)},touchmove:function(a,b,c){f.moveTouch(a,b,c)},touchend:function(a,b,c){f.endTouch(a,b,c)},dblclick:function(a,b,c){if(c.cancelNextDblclick)return void(c.cancelNextDblclick=!1);var d={canvasx:c.dragEndX,canvasy:c.dragEndY,cancelable:!0};b.cascadeEvents_("dblclick",d)||a.altKey||a.shiftKey||b.resetZoom()}},f.nonInteractiveModel_={mousedown:function(a,b,c){c.initializeMouseDown(a,b,c)},mouseup:f.maybeTreatMouseOpAsClick},f.dragIsPanInteractionModel={mousedown:function(a,b,c){c.initializeMouseDown(a,b,c),f.startPan(a,b,c)},mousemove:function(a,b,c){c.isPanning&&f.movePan(a,b,c)},mouseup:function(a,b,c){c.isPanning&&f.endPan(a,b,c)}},c.default=f,b.exports=c.default},{"./dygraph-utils":17}],13:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./dygraph-utils"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=function(a){this.dygraph_=a,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};f.prototype.addDataset=function(a,b){this.points.push(b),this.setNames.push(a)},f.prototype.getPlotArea=function(){return this.area_},f.prototype.computePlotArea=function(){var a={x:0,y:0};a.w=this.dygraph_.width_-a.x-this.dygraph_.getOption("rightGap"),a.h=this.dygraph_.height_;var b={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(b){var c={x:a.x,y:a.y,w:b,h:a.h};return a.x+=b,a.w-=b,c},reserveSpaceRight:function(b){var c={x:a.x+a.w-b,y:a.y,w:b,h:a.h};return a.w-=b,c},reserveSpaceTop:function(b){var c={x:a.x,y:a.y,w:a.w,h:b};return a.y+=b,a.h-=b,c},reserveSpaceBottom:function(b){var c={x:a.x,y:a.y+a.h-b,w:a.w,h:b};return a.h-=b,c},chartRect:function(){return{x:a.x,y:a.y,w:a.w,h:a.h}}};this.dygraph_.cascadeEvents_("layout",b),this.area_=a},f.prototype.setAnnotations=function(a){this.annotations=[];for(var b=this.dygraph_.getOption("xValueParser")||function(a){return a},c=0;c<a.length;c++){var d={};if(!a[c].xval&&void 0===a[c].x)return void console.error("Annotations must have an 'x' property");if(a[c].icon&&(!a[c].hasOwnProperty("width")||!a[c].hasOwnProperty("height")))return void console.error("Must set width and height when setting annotation.icon property");e.update(d,a[c]),d.xval||(d.xval=b(d.x)),this.annotations.push(d)}},f.prototype.setXTicks=function(a){this.xTicks_=a},f.prototype.setYAxes=function(a){this.yAxes_=a},f.prototype.evaluate=function(){this._xAxis={},this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},f.prototype._evaluateLimits=function(){var a=this.dygraph_.xAxisRange();this._xAxis.minval=a[0],this._xAxis.maxval=a[1];var b=a[1]-a[0];this._xAxis.scale=0!==b?1/b:1,this.dygraph_.getOptionForAxis("logscale","x")&&(this._xAxis.xlogrange=e.log10(this._xAxis.maxval)-e.log10(this._xAxis.minval),this._xAxis.xlogscale=0!==this._xAxis.xlogrange?1/this._xAxis.xlogrange:1);for(var c=0;c<this.yAxes_.length;c++){var d=this.yAxes_[c];d.minyval=d.computedValueRange[0],d.maxyval=d.computedValueRange[1],d.yrange=d.maxyval-d.minyval,d.yscale=0!==d.yrange?1/d.yrange:1,this.dygraph_.getOption("logscale")&&(d.ylogrange=e.log10(d.maxyval)-e.log10(d.minyval),d.ylogscale=0!==d.ylogrange?1/d.ylogrange:1,isFinite(d.ylogrange)&&!isNaN(d.ylogrange)||console.error("axis "+c+" of graph at "+d.g+" can't be displayed in log scale for range ["+d.minyval+" - "+d.maxyval+"]"))}},f.calcXNormal_=function(a,b,c){return c?(e.log10(a)-e.log10(b.minval))*b.xlogscale:(a-b.minval)*b.scale},f.calcYNormal_=function(a,b,c){if(c){var d=1-(e.log10(b)-e.log10(a.minyval))*a.ylogscale;return isFinite(d)?d:NaN}return 1-(b-a.minyval)*a.yscale},f.prototype._evaluateLineCharts=function(){for(var a=this.dygraph_.getOption("stackedGraph"),b=this.dygraph_.getOptionForAxis("logscale","x"),c=0;c<this.points.length;c++){for(var d=this.points[c],e=this.setNames[c],g=this.dygraph_.getOption("connectSeparatedPoints",e),h=this.dygraph_.axisPropertiesForSeries(e),i=this.dygraph_.attributes_.getForSeries("logscale",e),j=0;j<d.length;j++){var k=d[j];k.x=f.calcXNormal_(k.xval,this._xAxis,b);var l=k.yval;a&&(k.y_stacked=f.calcYNormal_(h,k.yval_stacked,i),null===l||isNaN(l)||(l=k.yval_stacked)),null===l&&(l=NaN,g||(k.yval=NaN)),k.y=f.calcYNormal_(h,l,i)}this.dygraph_.dataHandler_.onLineEvaluated(d,h,i)}},f.prototype._evaluateLineTicks=function(){var a,b,c,d,e,f;for(this.xticks=[],a=0;a<this.xTicks_.length;a++)b=this.xTicks_[a],c=b.label,f=!("label_v"in b),e=f?b.v:b.label_v,(d=this.dygraph_.toPercentXCoord(e))>=0&&d<1&&this.xticks.push({pos:d,label:c,has_tick:f});for(this.yticks=[],a=0;a<this.yAxes_.length;a++)for(var g=this.yAxes_[a],h=0;h<g.ticks.length;h++)b=g.ticks[h],c=b.label,f=!("label_v"in b),e=f?b.v:b.label_v,(d=this.dygraph_.toPercentYCoord(e,a))>0&&d<=1&&this.yticks.push({axis:a,pos:d,label:c,has_tick:f})},f.prototype._evaluateAnnotations=function(){var a,b={};for(a=0;a<this.annotations.length;a++){var c=this.annotations[a];b[c.xval+","+c.series]=c}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var d=0;d<this.points.length;d++){var e=this.points[d];for(a=0;a<e.length;a++){var f=e[a],g=f.xval+","+f.name;g in b&&(f.annotation=b[g],this.annotated_points.push(f))}}},f.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]},c.default=f,b.exports=c.default},{"./dygraph-utils":17}],14:[function(a,b,c){(function(a){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=null;if(void 0!==a){d={xValueParser:{default:"parseFloat() or Date.parse()*",labels:["CSV parsing"],type:"function(str) -> number",description:"A function which parses x-values (i.e. the dependent series). Must return a number, even when the values are dates. In this case, millis since epoch are used. This is used primarily for parsing CSV data. *=Dygraphs is slightly more accepting in the dates which it will parse. See code for details."},stackedGraph:{default:"false",labels:["Data Line display"],type:"boolean",description:"If set, stack series on top of one another rather than drawing them independently. The first series specified in the input data will wind up on top of the chart and the last will be on bottom. NaN values are drawn as white areas without a line on top, see stackedGraphNaNFill for details."},stackedGraphNaNFill:{default:"all",labels:["Data Line display"],type:"string",description:'Controls handling of NaN values inside a stacked graph. NaN values are interpolated/extended for stacking purposes, but the actual point value remains NaN in the legend display. Valid option values are "all" (interpolate internally, repeat leftmost and rightmost value as needed), "inside" (interpolate internally only, use zero outside leftmost and rightmost value), and "none" (treat NaN as zero everywhere).'},pointSize:{default:"1",labels:["Data Line display"],type:"integer",description:'The size of the dot to draw on each point in pixels (see drawPoints). A dot is always drawn when a point is "isolated", i.e. there is a missing point on either side of it. This also controls the size of those dots.'},drawPoints:{default:"false",labels:["Data Line display"],type:"boolean",description:"Draw a small dot at each point, in addition to a line going through the point. This makes the individual data points easier to see, but can increase visual clutter in the chart. The small dot can be replaced with a custom rendering by supplying a <a href='#drawPointCallback'>drawPointCallback</a>."},drawGapEdgePoints:{default:"false",labels:["Data Line display"],type:"boolean",description:"Draw points at the edges of gaps in the data. This improves visibility of small data segments or other data irregularities."},drawPointCallback:{default:"null",labels:["Data Line display"],type:"function(g, seriesName, canvasContext, cx, cy, color, pointSize)",parameters:[["g","the reference graph"],["seriesName","the name of the series"],["canvasContext","the canvas to draw on"],["cx","center x coordinate"],["cy","center y coordinate"],["color","series color"],["pointSize","the radius of the image."],["idx","the row-index of the point in the data."]],description:"Draw a custom item when drawPoints is enabled. Default is a small dot matching the series color. This method should constrain drawing to within pointSize pixels from (cx, cy).  Also see <a href='#drawHighlightPointCallback'>drawHighlightPointCallback</a>"},height:{default:"320",labels:["Overall display"],type:"integer",description:"Height, in pixels, of the chart. If the container div has been explicitly sized, this will be ignored."},zoomCallback:{default:"null",labels:["Callbacks"],type:"function(minDate, maxDate, yRanges)",parameters:[["minDate","milliseconds since epoch"],["maxDate","milliseconds since epoch."],["yRanges","is an array of [bottom, top] pairs, one for each y-axis."]],description:"A function to call when the zoom window is changed (either by zooming in or out). When animatedZooms is set, zoomCallback is called once at the end of the transition (it will not be called for intermediate frames)."},pointClickCallback:{snippet:"function(e, point){<br>&nbsp;&nbsp;alert(point);<br>}",default:"null",labels:["Callbacks","Interactive Elements"],type:"function(e, point)",parameters:[["e","the event object for the click"],["point","the point that was clicked See <a href='#point_properties'>Point properties</a> for details"]],description:"A function to call when a data point is clicked. and the point that was clicked."},color:{default:"(see description)",labels:["Data Series Colors"],type:"string",example:"red",description:"A per-series color definition. Used in conjunction with, and overrides, the colors option."},colors:{default:"(see description)",labels:["Data Series Colors"],type:"array<string>",example:"['red', '#00FF00']",description:'List of colors for the data series. These can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow", etc. If not specified, equally-spaced points around a color wheel are used. Overridden by the \'color\' option.'},connectSeparatedPoints:{default:"false",labels:["Data Line display"],type:"boolean",description:"Usually, when Dygraphs encounters a missing value in a data series, it interprets this as a gap and draws it as such. If, instead, the missing values represents an x-value for which only a different series has data, then you'll want to connect the dots by setting this to true. To explicitly include a gap with this option set, use a value of NaN."},highlightCallback:{default:"null",labels:["Callbacks"],type:"function(event, x, points, row, seriesName)",description:"When set, this callback gets called every time a new point is highlighted.",parameters:[["event","the JavaScript mousemove event"],["x","the x-coordinate of the highlighted points"],["points","an array of highlighted points: <code>[ {name: 'series', yval: y-value}, &hellip; ]</code>"],["row","integer index of the highlighted row in the data table, starting from 0"],["seriesName","name of the highlighted series, only present if highlightSeriesOpts is set."]]},drawHighlightPointCallback:{default:"null",labels:["Data Line display"],type:"function(g, seriesName, canvasContext, cx, cy, color, pointSize)",parameters:[["g","the reference graph"],["seriesName","the name of the series"],["canvasContext","the canvas to draw on"],["cx","center x coordinate"],["cy","center y coordinate"],["color","series color"],["pointSize","the radius of the image."],["idx","the row-index of the point in the data."]],description:"Draw a custom item when a point is highlighted.  Default is a small dot matching the series color. This method should constrain drawing to within pointSize pixels from (cx, cy) Also see <a href='#drawPointCallback'>drawPointCallback</a>"},highlightSeriesOpts:{default:"null",labels:["Interactive Elements"],type:"Object",description:"When set, the options from this object are applied to the timeseries closest to the mouse pointer for interactive highlighting. See also 'highlightCallback'. Example: highlightSeriesOpts: { strokeWidth: 3 }."},highlightSeriesBackgroundAlpha:{default:"0.5",labels:["Interactive Elements"],type:"float",description:"Fade the background while highlighting series. 1=fully visible background (disable fading), 0=hiddden background (show highlighted series only)."},highlightSeriesBackgroundColor:{default:"rgb(255, 255, 255)",labels:["Interactive Elements"],type:"string",description:"Sets the background color used to fade out the series in conjunction with 'highlightSeriesBackgroundAlpha'."},includeZero:{default:"false",labels:["Axis display"],type:"boolean",description:"Usually, dygraphs will use the range of the data plus some padding to set the range of the y-axis. If this option is set, the y-axis will always include zero, typically as the lowest value. This can be used to avoid exaggerating the variance in the data"},rollPeriod:{default:"1",labels:["Error Bars","Rolling Averages"],type:"integer &gt;= 1",description:"Number of days over which to average data. Discussed extensively above."},unhighlightCallback:{default:"null",labels:["Callbacks"],type:"function(event)",parameters:[["event","the mouse event"]],description:"When set, this callback gets called every time the user stops highlighting any point by mousing out of the graph."},axisTickSize:{default:"3.0",labels:["Axis display"],type:"number",description:"The size of the line to display next to each tick mark on x- or y-axes."},labelsSeparateLines:{default:"false",labels:["Legend"],type:"boolean",description:"Put <code>&lt;br/&gt;</code> between lines in the label string. Often used in conjunction with <strong>labelsDiv</strong>."},valueFormatter:{default:"Depends on the type of your data.",labels:["Legend","Value display/formatting"],type:"function(num or millis, opts, seriesName, dygraph, row, col)",description:"Function to provide a custom display format for the values displayed on mouseover. This does not affect the values that appear on tick marks next to the axes. To format those, see axisLabelFormatter. This is usually set on a <a href='per-axis.html'>per-axis</a> basis. .",parameters:[["num_or_millis","The value to be formatted. This is always a number. For date axes, it's millis since epoch. You can call new Date(millis) to get a Date object."],["opts","This is a function you can call to access various options (e.g. opts('labelsKMB')). It returns per-axis values for the option when available."],["seriesName","The name of the series from which the point came, e.g. 'X', 'Y', 'A', etc."],["dygraph","The dygraph object for which the formatting is being done"],["row","The row of the data from which this point comes. g.getValue(row, 0) will return the x-value for this point."],["col","The column of the data from which this point comes. g.getValue(row, col) will return the original y-value for this point. This can be used to get the full confidence interval for the point, or access un-rolled values for the point."]]},annotationMouseOverHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",description:"If provided, this function is called whenever the user mouses over an annotation."},annotationMouseOutHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",parameters:[["annotation","the annotation left"],["point","the point associated with the annotation"],["dygraph","the reference graph"],["event","the mouse event"]],description:"If provided, this function is called whenever the user mouses out of an annotation."},annotationClickHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",parameters:[["annotation","the annotation left"],["point","the point associated with the annotation"],["dygraph","the reference graph"],["event","the mouse event"]],description:"If provided, this function is called whenever the user clicks on an annotation."},annotationDblClickHandler:{default:"null",labels:["Annotations"],type:"function(annotation, point, dygraph, event)",parameters:[["annotation","the annotation left"],["point","the point associated with the annotation"],["dygraph","the reference graph"],["event","the mouse event"]],description:"If provided, this function is called whenever the user double-clicks on an annotation."},drawCallback:{default:"null",labels:["Callbacks"],type:"function(dygraph, is_initial)",parameters:[["dygraph","The graph being drawn"],["is_initial","True if this is the initial draw, false for subsequent draws."]],description:"When set, this callback gets called every time the dygraph is drawn. This includes the initial draw, after zooming and repeatedly while panning."},labelsKMG2:{default:"false",labels:["Value display/formatting"],type:"boolean",description:"Show k/M/G for kilo/Mega/Giga on y-axis. This is different than <code>labelsKMB</code> in that it uses base 2, not 10."},delimiter:{default:",",labels:["CSV parsing"],type:"string",description:"The delimiter to look for when separating fields of a CSV file. Setting this to a tab is not usually necessary, since tab-delimited data is auto-detected."},axisLabelFontSize:{default:"14",labels:["Axis display"],type:"integer",description:"Size of the font (in pixels) to use in the axis labels, both x- and y-axis."},underlayCallback:{default:"null",labels:["Callbacks"],type:"function(context, area, dygraph)",parameters:[["context","the canvas drawing context on which to draw"],["area","An object with {x,y,w,h} properties describing the drawing area."],["dygraph","the reference graph"]],description:"When set, this callback gets called before the chart is drawn. It details on how to use this."},width:{default:"480",labels:["Overall display"],type:"integer",description:"Width, in pixels, of the chart. If the container div has been explicitly sized, this will be ignored."},pixelRatio:{default:"(devicePixelRatio / context.backingStoreRatio)",labels:["Overall display"],type:"float",description:"Overrides the pixel ratio scaling factor for the canvas's 2d context. Ordinarily, this is set to the devicePixelRatio / (context.backingStoreRatio || 1), so on mobile devices, where the devicePixelRatio can be somewhere around 3, performance can be improved by overriding this value to something less precise, like 1, at the expense of resolution."},interactionModel:{default:"...",labels:["Interactive Elements"],type:"Object",description:"TODO(konigsberg): document this"},ticker:{default:"Dygraph.dateTicker or Dygraph.numericTicks",labels:["Axis display"],type:"function(min, max, pixels, opts, dygraph, vals) -> [{v: ..., label: ...}, ...]",parameters:[["min",""],["max",""],["pixels",""],["opts",""],["dygraph","the reference graph"],["vals",""]],description:"This lets you specify an arbitrary function to generate tick marks on an axis. The tick marks are an array of (value, label) pairs. The built-in functions go to great lengths to choose good tick marks so, if you set this option, you'll most likely want to call one of them and modify the result. See dygraph-tickers.js for an extensive discussion. This is set on a <a href='per-axis.html'>per-axis</a> basis."},xAxisHeight:{default:"(null)",labels:["Axis display"],type:"integer",description:"Height, in pixels, of the x-axis. If not set explicitly, this is computed based on axisLabelFontSize and axisTickSize."},showLabelsOnHighlight:{default:"true",labels:["Interactive Elements","Legend"],type:"boolean",description:"Whether to show the legend upon mouseover."},axis:{default:"(none)",labels:["Axis display"],type:"string",description:"Set to either 'y1' or 'y2' to assign a series to a y-axis (primary or secondary). Must be set per-series."},pixelsPerLabel:{default:"70 (x-axis) or 30 (y-axes)",labels:["Axis display","Grid"],type:"integer",description:"Number of pixels to require between each x- and y-label. Larger values will yield a sparser axis with fewer ticks. This is set on a <a href='per-axis.html'>per-axis</a> basis."},labelsDiv:{default:"null",labels:["Legend"],type:"DOM element or string",example:"<code style='font-size: small'>document.getElementById('foo')</code>or<code>'foo'",description:"Show data labels in an external div, rather than on the graph.  This value can either be a div element or a div id."},fractions:{default:"false",labels:["CSV parsing","Error Bars"],type:"boolean",description:'When set, attempt to parse each cell in the CSV file as "a/b", where a and b are integers. The ratio will be plotted. This allows computation of Wilson confidence intervals (see below).'},logscale:{default:"false",labels:["Axis display"],type:"boolean",description:"When set for the y-axis or x-axis, the graph shows that axis in log scale. Any values less than or equal to zero are not displayed. Showing log scale with ranges that go below zero will result in an unviewable graph.\n\n Not compatible with showZero. connectSeparatedPoints is ignored. This is ignored for date-based x-axes."},strokeWidth:{default:"1.0",labels:["Data Line display"],type:"float",example:"0.5, 2.0",description:"The width of the lines connecting data points. This can be used to increase the contrast or some graphs."},strokePattern:{default:"null",labels:["Data Line display"],type:"array<integer>",example:"[10, 2, 5, 2]",description:"A custom pattern array where the even index is a draw and odd is a space in pixels. If null then it draws a solid line. The array should have a even length as any odd lengthed array could be expressed as a smaller even length array. This is used to create dashed lines."},strokeBorderWidth:{default:"null",labels:["Data Line display"],type:"float",example:"1.0",description:"Draw a border around graph lines to make crossing lines more easily distinguishable. Useful for graphs with many lines."},strokeBorderColor:{default:"white",labels:["Data Line display"],type:"string",example:"red, #ccffdd",description:"Color for the line border used if strokeBorderWidth is set."},wilsonInterval:{default:"true",labels:["Error Bars"],type:"boolean",description:'Use in conjunction with the "fractions" option. Instead of plotting +/- N standard deviations, dygraphs will compute a Wilson confidence interval and plot that. This has more reasonable behavior for ratios close to 0 or 1.'},fillGraph:{default:"false",labels:["Data Line display"],type:"boolean",description:"Should the area underneath the graph be filled? This option is not compatible with error bars. This may be set on a <a href='per-axis.html'>per-series</a> basis."},highlightCircleSize:{default:"3",labels:["Interactive Elements"],type:"integer",description:"The size in pixels of the dot drawn over highlighted points."},gridLineColor:{default:"rgb(128,128,128)",labels:["Grid"],type:"red, blue",description:"The color of the gridlines. This may be set on a per-axis basis to define each axis' grid separately."},gridLinePattern:{default:"null",labels:["Grid"],type:"array<integer>",example:"[10, 2, 5, 2]",description:"A custom pattern array where the even index is a draw and odd is a space in pixels. If null then it draws a solid line. The array should have a even length as any odd lengthed array could be expressed as a smaller even length array. This is used to create dashed gridlines."},visibility:{default:"[true, true, ...]",labels:["Data Line display"],type:"Array of booleans",description:"Which series should initially be visible? Once the Dygraph has been constructed, you can access and modify the visibility of each series using the <code>visibility</code> and <code>setVisibility</code> methods."},valueRange:{default:"Full range of the input is shown",labels:["Axis display"],type:"Array of two numbers",example:"[10, 110]",description:"Explicitly set the vertical range of the graph to [low, high]. This may be set on a per-axis basis to define each y-axis separately. If either limit is unspecified, it will be calculated automatically (e.g. [null, 30] to automatically calculate just the lower bound)"},colorSaturation:{default:"1.0",labels:["Data Series Colors"],type:"float (0.0 - 1.0)",description:"If <strong>colors</strong> is not specified, saturation of the automatically-generated data series colors."},hideOverlayOnMouseOut:{default:"true",labels:["Interactive Elements","Legend"],type:"boolean",description:"Whether to hide the legend when the mouse leaves the chart area."},legend:{default:"onmouseover",labels:["Legend"],type:"string",description:'When to display the legend. By default, it only appears when a user mouses over the chart. Set it to "always" to always display a legend of some sort. When set to "follow", legend follows highlighted points.'},legendFormatter:{default:"null",labels:["Legend"],type:"function(data): string",params:[["data",'An object containing information about the selection (or lack of a selection). This includes formatted values and series information. See <a href="https://github.com/danvk/dygraphs/pull/683">here</a> for sample values.']],
description:'Set this to supply a custom formatter for the legend. See <a href="https://github.com/danvk/dygraphs/pull/683">this comment</a> and the <a href="tests/legend-formatter.html">legendFormatter demo</a> for usage.'},labelsShowZeroValues:{default:"true",labels:["Legend"],type:"boolean",description:"Show zero value labels in the labelsDiv."},stepPlot:{default:"false",labels:["Data Line display"],type:"boolean",description:"When set, display the graph as a step plot instead of a line plot. This option may either be set for the whole graph or for single series."},offset:{default:"0",labels:["Value display/formatting"],type:"string",description:"When set, display the graph dates with this offset."},labelsUTC:{default:"false",labels:["Value display/formatting","Axis display"],type:"boolean",description:"Show date/time labels according to UTC (instead of local time)."},labelsKMB:{default:"false",labels:["Value display/formatting"],type:"boolean",description:"Show K/M/B for thousands/millions/billions on y-axis."},rightGap:{default:"5",labels:["Overall display"],type:"integer",description:"Number of pixels to leave blank at the right edge of the Dygraph. This makes it easier to highlight the right-most data point."},drawAxesAtZero:{default:"false",labels:["Axis display"],type:"boolean",description:"When set, draw the X axis at the Y=0 position and the Y axis at the X=0 position if those positions are inside the graph's visible area. Otherwise, draw the axes at the bottom or left graph edge as usual."},xRangePad:{default:"0",labels:["Axis display"],type:"float",description:"Add the specified amount of extra space (in pixels) around the X-axis value range to ensure points at the edges remain visible."},yRangePad:{default:"null",labels:["Axis display"],type:"float",description:"If set, add the specified amount of extra space (in pixels) around the Y-axis value range to ensure points at the edges remain visible. If unset, use the traditional Y padding algorithm."},axisLabelFormatter:{default:"Depends on the data type",labels:["Axis display"],type:"function(number or Date, granularity, opts, dygraph)",parameters:[["number or date","Either a number (for a numeric axis) or a Date object (for a date axis)"],["granularity","specifies how fine-grained the axis is. For date axes, this is a reference to the time granularity enumeration, defined in dygraph-tickers.js, e.g. Dygraph.WEEKLY."],["opts","a function which provides access to various options on the dygraph, e.g. opts('labelsKMB')."],["dygraph","the referenced graph"]],description:"Function to call to format the tick values that appear along an axis. This is usually set on a <a href='per-axis.html'>per-axis</a> basis."},clickCallback:{snippet:"function(e, date_millis){<br>&nbsp;&nbsp;alert(new Date(date_millis));<br>}",default:"null",labels:["Callbacks"],type:"function(e, x, points)",parameters:[["e","The event object for the click"],["x","The x value that was clicked (for dates, this is milliseconds since epoch)"],["points","The closest points along that date. See <a href='#point_properties'>Point properties</a> for details."]],description:"A function to call when the canvas is clicked."},labels:{default:'["X", "Y1", "Y2", ...]*',labels:["Legend"],type:"array<string>",description:"A name for each data series, including the independent (X) series. For CSV files and DataTable objections, this is determined by context. For raw data, this must be specified. If it is not, default values are supplied and a warning is logged."},dateWindow:{default:"Full range of the input is shown",labels:["Axis display"],type:"Array of two numbers",example:"[<br>&nbsp;&nbsp;Date.parse('2006-01-01'),<br>&nbsp;&nbsp;(new Date()).valueOf()<br>]",description:"Initially zoom in on a section of the graph. Is of the form [earliest, latest], where earliest/latest are milliseconds since epoch. If the data for the x-axis is numeric, the values in dateWindow must also be numbers."},showRoller:{default:"false",labels:["Interactive Elements","Rolling Averages"],type:"boolean",description:"If the rolling average period text box should be shown."},sigma:{default:"2.0",labels:["Error Bars"],type:"float",description:"When errorBars is set, shade this many standard deviations above/below each point."},customBars:{default:"false",labels:["CSV parsing","Error Bars"],type:"boolean",description:'When set, parse each CSV cell as "low;middle;high". Error bars will be drawn for each point between low and high, with the series itself going through middle.'},colorValue:{default:"1.0",labels:["Data Series Colors"],type:"float (0.0 - 1.0)",description:"If colors is not specified, value of the data series colors, as in hue/saturation/value. (0.0-1.0, default 0.5)"},errorBars:{default:"false",labels:["CSV parsing","Error Bars"],type:"boolean",description:"Does the data contain standard deviations? Setting this to true alters the input format (see above)."},displayAnnotations:{default:"false",labels:["Annotations"],type:"boolean",description:"Only applies when Dygraphs is used as a GViz chart. Causes string columns following a data series to be interpreted as annotations on points in that series. This is the same format used by Google's AnnotatedTimeLine chart."},panEdgeFraction:{default:"null",labels:["Axis display","Interactive Elements"],type:"float",description:"A value representing the farthest a graph may be panned, in percent of the display. For example, a value of 0.1 means that the graph can only be panned 10% passed the edges of the displayed values. null means no bounds."},title:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display above the chart. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the 'dygraph-label' or 'dygraph-title' classes."},titleHeight:{default:"18",labels:["Chart labels"],type:"integer",description:"Height of the chart title, in pixels. This also controls the default font size of the title. If you style the title on your own, this controls how much space is set aside above the chart for the title's div."},xlabel:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display below the chart's x-axis. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the 'dygraph-label' or 'dygraph-xlabel' classes."},xLabelHeight:{labels:["Chart labels"],type:"integer",default:"18",description:"Height of the x-axis label, in pixels. This also controls the default font size of the x-axis label. If you style the label on your own, this controls how much space is set aside below the chart for the x-axis label's div."},ylabel:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display to the left of the chart's y-axis. You can supply any HTML for this value, not just text. If you wish to style it using CSS, use the 'dygraph-label' or 'dygraph-ylabel' classes. The text will be rotated 90 degrees by default, so CSS rules may behave in unintuitive ways. No additional space is set aside for a y-axis label. If you need more space, increase the width of the y-axis tick labels using the yAxisLabelWidth option. If you need a wider div for the y-axis label, either style it that way with CSS (but remember that it's rotated, so width is controlled by the 'height' property) or set the yLabelWidth option."},y2label:{labels:["Chart labels"],type:"string",default:"null",description:"Text to display to the right of the chart's secondary y-axis. This label is only displayed if a secondary y-axis is present. See <a href='http://dygraphs.com/tests/two-axes.html'>this test</a> for an example of how to do this. The comments for the 'ylabel' option generally apply here as well. This label gets a 'dygraph-y2label' instead of a 'dygraph-ylabel' class."},yLabelWidth:{labels:["Chart labels"],type:"integer",default:"18",description:"Width of the div which contains the y-axis label. Since the y-axis label appears rotated 90 degrees, this actually affects the height of its div."},drawGrid:{default:"true for x and y, false for y2",labels:["Grid"],type:"boolean",description:"Whether to display gridlines in the chart. This may be set on a per-axis basis to define the visibility of each axis' grid separately."},independentTicks:{default:"true for y, false for y2",labels:["Axis display","Grid"],type:"boolean",description:"Only valid for y and y2, has no effect on x: This option defines whether the y axes should align their ticks or if they should be independent. Possible combinations: 1.) y=true, y2=false (default): y is the primary axis and the y2 ticks are aligned to the the ones of y. (only 1 grid) 2.) y=false, y2=true: y2 is the primary axis and the y ticks are aligned to the the ones of y2. (only 1 grid) 3.) y=true, y2=true: Both axis are independent and have their own ticks. (2 grids) 4.) y=false, y2=false: Invalid configuration causes an error."},drawAxis:{default:"true for x and y, false for y2",labels:["Axis display"],type:"boolean",description:"Whether to draw the specified axis. This may be set on a per-axis basis to define the visibility of each axis separately. Setting this to false also prevents axis ticks from being drawn and reclaims the space for the chart grid/lines."},gridLineWidth:{default:"0.3",labels:["Grid"],type:"float",description:"Thickness (in pixels) of the gridlines drawn under the chart. The vertical/horizontal gridlines can be turned off entirely by using the drawGrid option. This may be set on a per-axis basis to define each axis' grid separately."},axisLineWidth:{default:"0.3",labels:["Axis display"],type:"float",description:"Thickness (in pixels) of the x- and y-axis lines."},axisLineColor:{default:"black",labels:["Axis display"],type:"string",description:"Color of the x- and y-axis lines. Accepts any value which the HTML canvas strokeStyle attribute understands, e.g. 'black' or 'rgb(0, 100, 255)'."},fillAlpha:{default:"0.15",labels:["Error Bars","Data Series Colors"],type:"float (0.0 - 1.0)",description:"Error bars (or custom bars) for each series are drawn in the same color as the series, but with partial transparency. This sets the transparency. A value of 0.0 means that the error bars will not be drawn, whereas a value of 1.0 means that the error bars will be as dark as the line for the series itself. This can be used to produce chart lines whose thickness varies at each point."},axisLabelWidth:{default:"50 (y-axis), 60 (x-axis)",labels:["Axis display","Chart labels"],type:"integer",description:"Width (in pixels) of the containing divs for x- and y-axis labels. For the y-axis, this also controls the width of the y-axis. Note that for the x-axis, this is independent from pixelsPerLabel, which controls the spacing between labels."},sigFigs:{default:"null",labels:["Value display/formatting"],type:"integer",description:"By default, dygraphs displays numbers with a fixed number of digits after the decimal point. If you'd prefer to have a fixed number of significant figures, set this option to that number of sig figs. A value of 2, for instance, would cause 1 to be display as 1.0 and 1234 to be displayed as 1.23e+3."},digitsAfterDecimal:{default:"2",labels:["Value display/formatting"],type:"integer",description:"Unless it's run in scientific mode (see the <code>sigFigs</code> option), dygraphs displays numbers with <code>digitsAfterDecimal</code> digits after the decimal point. Trailing zeros are not displayed, so with a value of 2 you'll get '0', '0.1', '0.12', '123.45' but not '123.456' (it will be rounded to '123.46'). Numbers with absolute value less than 0.1^digitsAfterDecimal (i.e. those which would show up as '0.00') will be displayed in scientific notation."},maxNumberWidth:{default:"6",labels:["Value display/formatting"],type:"integer",description:"When displaying numbers in normal (not scientific) mode, large numbers will be displayed with many trailing zeros (e.g. 100000000 instead of 1e9). This can lead to unwieldy y-axis labels. If there are more than <code>maxNumberWidth</code> digits to the left of the decimal in a number, dygraphs will switch to scientific notation, even when not operating in scientific mode. If you'd like to see all those digits, set this to something large, like 20 or 30."},file:{default:"(set when constructed)",labels:["Data"],type:"string (URL of CSV or CSV), GViz DataTable or 2D Array",description:"Sets the data being displayed in the chart. This can only be set when calling updateOptions; it cannot be set from the constructor. For a full description of valid data formats, see the <a href='http://dygraphs.com/data.html'>Data Formats</a> page."},timingName:{default:"null",labels:["Debugging","Deprecated"],type:"string",description:"Set this option to log timing information. The value of the option will be logged along with the timimg, so that you can distinguish multiple dygraphs on the same page."},showRangeSelector:{default:"false",labels:["Range Selector"],type:"boolean",description:"Show or hide the range selector widget."},rangeSelectorHeight:{default:"40",labels:["Range Selector"],type:"integer",description:"Height, in pixels, of the range selector widget. This option can only be specified at Dygraph creation time."},rangeSelectorPlotStrokeColor:{default:"#808FAB",labels:["Range Selector"],type:"string",description:'The range selector mini plot stroke color. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow". You can also specify null or "" to turn off stroke.'},rangeSelectorPlotFillColor:{default:"#A7B1C4",labels:["Range Selector"],type:"string",description:'The range selector mini plot fill color. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow". You can also specify null or "" to turn off fill.'},rangeSelectorPlotFillGradientColor:{default:"white",labels:["Range Selector"],type:"string",description:'The top color for the range selector mini plot fill color gradient. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "rgba(255,100,200,42)" or "yellow". You can also specify null or "" to disable the gradient and fill with one single color.'},rangeSelectorBackgroundStrokeColor:{default:"gray",labels:["Range Selector"],type:"string",description:'The color of the lines below and on both sides of the range selector mini plot. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow".'},rangeSelectorBackgroundLineWidth:{default:"1",labels:["Range Selector"],type:"float",description:"The width of the lines below and on both sides of the range selector mini plot."},rangeSelectorPlotLineWidth:{default:"1.5",labels:["Range Selector"],type:"float",description:"The width of the range selector mini plot line."},rangeSelectorForegroundStrokeColor:{default:"black",labels:["Range Selector"],type:"string",description:'The color of the lines in the interactive layer of the range selector. This can be of the form "#AABBCC" or "rgb(255,100,200)" or "yellow".'},rangeSelectorForegroundLineWidth:{default:"1",labels:["Range Selector"],type:"float",description:"The width the lines in the interactive layer of the range selector."},rangeSelectorAlpha:{default:"0.6",labels:["Range Selector"],type:"float (0.0 - 1.0)",description:"The transparency of the veil that is drawn over the unselected portions of the range selector mini plot. A value of 0 represents full transparency and the unselected portions of the mini plot will appear as normal. A value of 1 represents full opacity and the unselected portions of the mini plot will be hidden."},showInRangeSelector:{default:"null",labels:["Range Selector"],type:"boolean",description:"Mark this series for inclusion in the range selector. The mini plot curve will be an average of all such series. If this is not specified for any series, the default behavior is to average all the visible series. Setting it for one series will result in that series being charted alone in the range selector. Once it's set for a single series, it needs to be set for all series which should be included (regardless of visibility)."},animatedZooms:{default:"false",labels:["Interactive Elements"],type:"boolean",description:"Set this option to animate the transition between zoom windows. Applies to programmatic and interactive zooms. Note that if you also set a drawCallback, it will be called several times on each zoom. If you set a zoomCallback, it will only be called after the animation is complete."},plotter:{default:"[DygraphCanvasRenderer.Plotters.fillPlotter, DygraphCanvasRenderer.Plotters.errorPlotter, DygraphCanvasRenderer.Plotters.linePlotter]",labels:["Data Line display"],type:"array or function",description:"A function (or array of functions) which plot each data series on the chart. TODO(danvk): more details! May be set per-series."},axes:{default:"null",labels:["Configuration"],type:"Object",description:"Defines per-axis options. Valid keys are 'x', 'y' and 'y2'. Only some options may be set on a per-axis basis. If an option may be set in this way, it will be noted on this page. See also documentation on <a href='http://dygraphs.com/per-axis.html'>per-series and per-axis options</a>."},series:{default:"null",labels:["Series"],type:"Object",description:"Defines per-series options. Its keys match the y-axis label names, and the values are dictionaries themselves that contain options specific to that series."},plugins:{default:"[]",labels:["Configuration"],type:"Array<plugin>",description:"Defines per-graph plugins. Useful for per-graph customization"},dataHandler:{default:"(depends on data)",labels:["Data"],type:"Dygraph.DataHandler",description:"Custom DataHandler. This is an advanced customization. See http://bit.ly/151E7Aq."}};var e,f=function(a){window.console&&window.console.warn(a)},g=["type","default","description"],h=["Annotations","Axis display","Chart labels","CSV parsing","Callbacks","Data","Data Line display","Data Series Colors","Error Bars","Grid","Interactive Elements","Range Selector","Legend","Overall display","Rolling Averages","Series","Value display/formatting","Zooming","Debugging","Configuration","Deprecated"],i={};for(e=0;e<h.length;e++)i[h[e]]=!0;for(var j in d)if(d.hasOwnProperty(j)){var k=d[j];for(e=0;e<g.length;e++)k.hasOwnProperty(g[e])?"string"!=typeof k[g[e]]&&f(j+"."+g[e]+" must be of type string"):f("Option "+j+' missing "'+g[e]+'" property');var l=k.labels;if("object"!=typeof l)f('Option "'+j+'" is missing a "labels": [...] option');else for(e=0;e<l.length;e++)i.hasOwnProperty(l[e])||f('Option "'+j+'" has label "'+l[e]+'", which is invalid.')}}c.default=d,b.exports=c.default}).call(this,a("_process"))},{_process:1}],15:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./dygraph-utils"),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(f),h=a("./dygraph-default-attrs"),i=e(h),j=a("./dygraph-options-reference"),k=e(j),l=function(a){this.dygraph_=a,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get("highlightSeriesOpts")||{},this.reparseSeries()};if(l.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},l.axisToIndex_=function(a){if("string"==typeof a){if(l.AXIS_STRING_MAPPINGS_.hasOwnProperty(a))return l.AXIS_STRING_MAPPINGS_[a];throw"Unknown axis : "+a}if("number"==typeof a){if(0===a||1===a)return a;throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(a)throw"Unknown axis : "+a;return 0},l.prototype.reparseSeries=function(){var a=this.get("labels");if(a){this.labels_=a.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};for(var b=this.user_.series||{},c=0;c<this.labels_.length;c++){var e=this.labels_[c],f=b[e]||{},h=l.axisToIndex_(f.axis);this.series_[e]={idx:c,yAxis:h,options:f},this.yAxes_[h]?this.yAxes_[h].series.push(e):this.yAxes_[h]={series:[e],options:{}}}var i=this.user_.axes||{};g.update(this.yAxes_[0].options,i.y||{}),this.yAxes_.length>1&&g.update(this.yAxes_[1].options,i.y2||{}),g.update(this.xAxis_.options,i.x||{}),void 0!==d&&this.validateOptions_()}},l.prototype.get=function(a){var b=this.getGlobalUser_(a);return null!==b?b:this.getGlobalDefault_(a)},l.prototype.getGlobalUser_=function(a){return this.user_.hasOwnProperty(a)?this.user_[a]:null},l.prototype.getGlobalDefault_=function(a){return this.global_.hasOwnProperty(a)?this.global_[a]:i.default.hasOwnProperty(a)?i.default[a]:null},l.prototype.getForAxis=function(a,b){var c,d;if("number"==typeof b)c=b,d=0===c?"y":"y2";else{if("y1"==b&&(b="y"),"y"==b)c=0;else if("y2"==b)c=1;else{if("x"!=b)throw"Unknown axis "+b;c=-1}d=b}var e=-1==c?this.xAxis_:this.yAxes_[c];if(e){var f=e.options;if(f.hasOwnProperty(a))return f[a]}if("x"!==b||"logscale"!==a){var g=this.getGlobalUser_(a);if(null!==g)return g}var h=i.default.axes[d];return h.hasOwnProperty(a)?h[a]:this.getGlobalDefault_(a)},l.prototype.getForSeries=function(a,b){if(b===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(a))return this.highlightSeries_[a];if(!this.series_.hasOwnProperty(b))throw"Unknown series: "+b;var c=this.series_[b],d=c.options;return d.hasOwnProperty(a)?d[a]:this.getForAxis(a,c.yAxis)},l.prototype.numAxes=function(){return this.yAxes_.length},l.prototype.axisForSeries=function(a){return this.series_[a].yAxis},l.prototype.axisOptions=function(a){return this.yAxes_[a].options},l.prototype.seriesForAxis=function(a){return this.yAxes_[a].series},l.prototype.seriesNames=function(){return this.labels_},void 0!==d){l.prototype.validateOptions_=function(){if(void 0===k.default)throw"Called validateOptions_ in prod build.";for(var a=this,b=[this.xAxis_.options,this.yAxes_[0].options,this.yAxes_[1]&&this.yAxes_[1].options,this.global_,this.user_,this.highlightSeries_],c=this.seriesNames(),d=0;d<c.length;d++){var e=c[d];this.series_.hasOwnProperty(e)&&b.push(this.series_[e].options)}for(var d=0;d<b.length;d++){var f=b[d];if(f)for(var g in f)f.hasOwnProperty(g)&&function(b){k.default[b]||a.warnInvalidOption_(b)}(g)}};var m={};l.prototype.warnInvalidOption_=function(a){if(!m[a]){m[a]=!0;throw this.labels_.indexOf(a)>=0?console.warn("Use new-style per-series options (saw "+a+" as top-level options key). See http://bit.ly/1tceaJs"):console.warn("Unknown option "+a+" (full list of options at dygraphs.com/options.html"),"invalid option "+a}},l.resetWarnings_=function(){m={}}}c.default=l,b.exports=c.default}).call(this,a("_process"))},{"./dygraph-default-attrs":10,"./dygraph-options-reference":14,"./dygraph-utils":17,_process:1}],16:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./dygraph-utils"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=function(a,b,c,d,e,f){return g(a,b,c,function(a){return"logscale"!==a&&d(a)},e,f)};c.numericLinearTicks=f;var g=function(a,b,c,d,f,g){var h,i,j,k,m=d("pixelsPerLabel"),n=[];if(g)for(h=0;h<g.length;h++)n.push({v:g[h]});else{if(d("logscale")){k=Math.floor(c/m);var o=e.binarySearch(a,l,1),p=e.binarySearch(b,l,-1);-1==o&&(o=0),-1==p&&(p=l.length-1);var q=null;if(p-o>=k/4){for(var r=p;r>=o;r--){var s=l[r],t=Math.log(s/a)/Math.log(b/a)*c,u={v:s};null===q?q={tickValue:s,pixel_coord:t}:Math.abs(t-q.pixel_coord)>=m?q={tickValue:s,pixel_coord:t}:u.label="",n.push(u)}n.reverse()}}if(0===n.length){var v,w,x=d("labelsKMG2");x?(v=[1,2,4,8,16,32,64,128,256],w=16):(v=[1,2,5,10,20,50,100],w=10);var y,z,A,B=Math.ceil(c/m),C=Math.abs(b-a)/B,D=Math.floor(Math.log(C)/Math.log(w)),E=Math.pow(w,D);for(i=0;i<v.length&&(y=E*v[i],z=Math.floor(a/y)*y,A=Math.ceil(b/y)*y,k=Math.abs(A-z)/y,!(c/k>m));i++);for(z>A&&(y*=-1),h=0;h<=k;h++)j=z+h*y,n.push({v:j})}}var F=d("axisLabelFormatter");for(h=0;h<n.length;h++)void 0===n[h].label&&(n[h].label=F.call(f,n[h].v,0,d,f));return n};c.numericTicks=g;var h=function(a,b,c,d,e,f){var g=m(a,b,c,d);return g>=0?o(a,b,g,d,e):[]};c.dateTicker=h;var i={MILLISECONDLY:0,TWO_MILLISECONDLY:1,FIVE_MILLISECONDLY:2,TEN_MILLISECONDLY:3,FIFTY_MILLISECONDLY:4,HUNDRED_MILLISECONDLY:5,FIVE_HUNDRED_MILLISECONDLY:6,SECONDLY:7,TWO_SECONDLY:8,FIVE_SECONDLY:9,TEN_SECONDLY:10,THIRTY_SECONDLY:11,MINUTELY:12,TWO_MINUTELY:13,FIVE_MINUTELY:14,TEN_MINUTELY:15,THIRTY_MINUTELY:16,HOURLY:17,TWO_HOURLY:18,SIX_HOURLY:19,DAILY:20,TWO_DAILY:21,WEEKLY:22,MONTHLY:23,QUARTERLY:24,BIANNUAL:25,ANNUAL:26,DECADAL:27,CENTENNIAL:28,NUM_GRANULARITIES:29};c.Granularity=i;var j={DATEFIELD_Y:0,DATEFIELD_M:1,DATEFIELD_D:2,DATEFIELD_HH:3,DATEFIELD_MM:4,DATEFIELD_SS:5,DATEFIELD_MS:6,NUM_DATEFIELDS:7},k=[];k[i.MILLISECONDLY]={datefield:j.DATEFIELD_MS,step:1,spacing:1},k[i.TWO_MILLISECONDLY]={datefield:j.DATEFIELD_MS,step:2,spacing:2},k[i.FIVE_MILLISECONDLY]={datefield:j.DATEFIELD_MS,step:5,spacing:5},k[i.TEN_MILLISECONDLY]={datefield:j.DATEFIELD_MS,step:10,spacing:10},k[i.FIFTY_MILLISECONDLY]={datefield:j.DATEFIELD_MS,step:50,spacing:50},k[i.HUNDRED_MILLISECONDLY]={datefield:j.DATEFIELD_MS,step:100,spacing:100},k[i.FIVE_HUNDRED_MILLISECONDLY]={datefield:j.DATEFIELD_MS,step:500,spacing:500},k[i.SECONDLY]={datefield:j.DATEFIELD_SS,step:1,spacing:1e3},k[i.TWO_SECONDLY]={datefield:j.DATEFIELD_SS,step:2,spacing:2e3},k[i.FIVE_SECONDLY]={datefield:j.DATEFIELD_SS,step:5,spacing:5e3},k[i.TEN_SECONDLY]={datefield:j.DATEFIELD_SS,step:10,spacing:1e4},k[i.THIRTY_SECONDLY]={datefield:j.DATEFIELD_SS,step:30,spacing:3e4},k[i.MINUTELY]={datefield:j.DATEFIELD_MM,step:1,spacing:6e4},k[i.TWO_MINUTELY]={datefield:j.DATEFIELD_MM,step:2,spacing:12e4},k[i.FIVE_MINUTELY]={datefield:j.DATEFIELD_MM,step:5,spacing:3e5},k[i.TEN_MINUTELY]={datefield:j.DATEFIELD_MM,step:10,spacing:6e5},k[i.THIRTY_MINUTELY]={datefield:j.DATEFIELD_MM,step:30,spacing:18e5},k[i.HOURLY]={datefield:j.DATEFIELD_HH,step:1,spacing:36e5},k[i.TWO_HOURLY]={datefield:j.DATEFIELD_HH,step:2,spacing:72e5},k[i.SIX_HOURLY]={datefield:j.DATEFIELD_HH,step:6,spacing:216e5},k[i.DAILY]={datefield:j.DATEFIELD_D,step:1,spacing:864e5},k[i.TWO_DAILY]={datefield:j.DATEFIELD_D,step:2,spacing:1728e5},k[i.WEEKLY]={datefield:j.DATEFIELD_D,step:7,spacing:6048e5},k[i.MONTHLY]={datefield:j.DATEFIELD_M,step:1,spacing:2629817280},k[i.QUARTERLY]={datefield:j.DATEFIELD_M,step:3,spacing:216e5*365.2524},k[i.BIANNUAL]={datefield:j.DATEFIELD_M,step:6,spacing:432e5*365.2524},k[i.ANNUAL]={datefield:j.DATEFIELD_Y,step:1,spacing:864e5*365.2524},k[i.DECADAL]={datefield:j.DATEFIELD_Y,step:10,spacing:315578073600},k[i.CENTENNIAL]={datefield:j.DATEFIELD_Y,step:100,spacing:3155780736e3};var l=function(){for(var a=[],b=-39;b<=39;b++)for(var c=Math.pow(10,b),d=1;d<=9;d++){var e=c*d;a.push(e)}return a}(),m=function(a,b,c,d){for(var e=d("pixelsPerLabel"),f=0;f<i.NUM_GRANULARITIES;f++){if(c/n(a,b,f)>=e)return f}return-1},n=function(a,b,c){var d=k[c].spacing;return Math.round(1*(b-a)/d)},o=function(a,b,c,d,f){var g=d("axisLabelFormatter"),h=d("labelsUTC"),l=h?e.DateAccessorsUTC:e.DateAccessorsLocal,m=k[c].datefield,n=k[c].step,o=k[c].spacing,p=new Date(a),q=[];q[j.DATEFIELD_Y]=l.getFullYear(p,d("offset")),q[j.DATEFIELD_M]=l.getMonth(p,d("offset")),q[j.DATEFIELD_D]=l.getDate(p,d("offset")),q[j.DATEFIELD_HH]=l.getHours(p,d("offset")),q[j.DATEFIELD_MM]=l.getMinutes(p,d("offset")),q[j.DATEFIELD_SS]=l.getSeconds(p,d("offset")),q[j.DATEFIELD_MS]=l.getMilliseconds(p,d("offset"));var r=q[m]%n;c==i.WEEKLY&&(r=l.getDay(p,d("offset"))),q[m]-=r;for(var s=m+1;s<j.NUM_DATEFIELDS;s++)q[s]=s===j.DATEFIELD_D?1:0;q.push(d("offset"));var t=[],u=l.makeDate.apply(null,q),v=u.getTime();if(c<=i.HOURLY)for(v<a&&(v+=o,u=new Date(v));v<=b;)t.push({v:v,label:g.call(f,u,c,d,f)}),v+=o,u=new Date(v);else for(v<a&&(q[m]+=n,u=l.makeDate.apply(null,q),v=u.getTime());v<=b;)(c>=i.DAILY||l.getHours(u,d("offset"))%n==0)&&t.push({v:v,label:g.call(f,u,c,d,f)}),q[m]+=n,u=l.makeDate.apply(null,q),v=u.getTime();return t};c.getDateAxis=o},{"./dygraph-utils":17}],17:[function(a,b,c){"use strict";function d(a,b,c){a.removeEventListener(b,c,!1)}function e(a){return a=a||window.event,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1}function f(a,b,c){var d,e,f;if(0===b)d=c,e=c,f=c;else{var g=Math.floor(6*a),h=6*a-g,i=c*(1-b),j=c*(1-b*h),k=c*(1-b*(1-h));switch(g){case 1:d=j,e=c,f=i;break;case 2:d=i,e=c,f=k;break;case 3:d=i,e=j,f=c;break;case 4:d=k,e=i,f=c;break;case 5:d=c,e=i,f=j;break;case 6:case 0:d=c,e=k,f=i}}return d=Math.floor(255*d+.5),e=Math.floor(255*e+.5),f=Math.floor(255*f+.5),"rgb("+d+","+e+","+f+")"}function g(a){var b=a.getBoundingClientRect(),c=window,d=document.documentElement;return{x:b.left+(c.pageXOffset||d.scrollLeft),y:b.top+(c.pageYOffset||d.scrollTop)}}function h(a){return!a.pageX||a.pageX<0?0:a.pageX}function i(a){return!a.pageY||a.pageY<0?0:a.pageY}function j(a,b){return h(a)-b.px}function k(a,b){return i(a)-b.py}function l(a){return!!a&&!isNaN(a)}function m(a,b){return!!a&&(null!==a.yval&&(null!==a.x&&void 0!==a.x&&(null!==a.y&&void 0!==a.y&&!(isNaN(a.x)||!b&&isNaN(a.y)))))}function n(a,b){var c=Math.min(Math.max(1,b||2),21);return Math.abs(a)<.001&&0!==a?a.toExponential(c-1):a.toPrecision(c)}function o(a){return a<10?"0"+a:""+a}function p(a,b,c,d){var e=o(a)+":"+o(b);if(c&&(e+=":"+o(c),d)){var f=""+d;e+="."+("000"+f).substring(f.length)}return e}function q(a,b,c){var d=b?ba:_,e=new Date(a),f=d.getFullYear(e,c),g=d.getMonth(e,c),h=d.getDate(e,c),i=d.getHours(e,c),j=d.getMinutes(e,c),k=d.getSeconds(e,c),l=d.getMilliseconds(e,c),m=""+f,n=o(g+1),q=o(h),r=3600*i+60*j+k+.001*l,s=m+"/"+n+"/"+q;return r&&(s+=" "+p(i,j,k,l)),s}function r(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}function s(a,b,c,d,e){for(var f=!0;f;){var g=a,h=b,i=c,j=d,k=e;if(f=!1,null!==j&&void 0!==j&&null!==k&&void 0!==k||(j=0,k=h.length-1),j>k)return-1;null!==i&&void 0!==i||(i=0);var l,m=function(a){return a>=0&&a<h.length},n=parseInt((j+k)/2,10),o=h[n];if(o==g)return n;if(o>g){if(i>0&&(l=n-1,m(l)&&h[l]<g))return n;a=g,b=h,c=i,d=j,e=n-1,f=!0,m=n=o=l=void 0}else{if(!(o<g))return-1;if(i<0&&(l=n+1,m(l)&&h[l]>g))return n;a=g,b=h,c=i,d=n+1,e=k,f=!0,m=n=o=l=void 0}}}function t(a){var b,c;if((-1==a.search("-")||-1!=a.search("T")||-1!=a.search("Z"))&&(c=u(a))&&!isNaN(c))return c;if(-1!=a.search("-")){for(b=a.replace("-","/","g");-1!=b.search("-");)b=b.replace("-","/");c=u(b)}else 8==a.length?(b=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2),c=u(b)):c=u(a);return c&&!isNaN(c)||console.error("Couldn't parse "+a+" as a date"),c}function u(a){return new Date(a).getTime()}function v(a,b){if(void 0!==b&&null!==b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function w(a,b){if(void 0!==b&&null!==b)for(var c in b)b.hasOwnProperty(c)&&(null===b[c]?a[c]=null:x(b[c])?a[c]=b[c].slice():!function(a){return"object"==typeof Node?a instanceof Node:"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName}(b[c])&&"object"==typeof b[c]?("object"==typeof a[c]&&null!==a[c]||(a[c]={}),w(a[c],b[c])):a[c]=b[c]);return a}function x(a){var b=typeof a;return("object"==b||"function"==b&&"function"==typeof a.item)&&null!==a&&"number"==typeof a.length&&3!==a.nodeType}function y(a){return"object"==typeof a&&null!==a&&"function"==typeof a.getTime}function z(a){for(var b=[],c=0;c<a.length;c++)x(a[c])?b.push(z(a[c])):b.push(a[c]);return b}function A(){return document.createElement("canvas")}function B(a){try{var b=window.devicePixelRatio,c=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return void 0!==b?b/c:1}catch(a){return 1}}function C(a,b,c,d){b=b||0,c=c||a.length,this.hasNext=!0,this.peek=null,this.start_=b,this.array_=a,this.predicate_=d,this.end_=Math.min(a.length,b+c),this.nextIdx_=b-1,this.next()}function D(a,b,c,d){
return new C(a,b,c,d)}function E(a,b,c,d){var e,f=0,g=(new Date).getTime();if(a(f),1==b)return void d();var h=b-1;!function i(){f>=b||ca.call(window,function(){var b=(new Date).getTime(),j=b-g;e=f,f=Math.floor(j/c);var k=f-e;f+k>h||f>=h?(a(h),d()):(0!==k&&a(f),i())})}()}function F(a,b){var c={};if(a)for(var d=1;d<a.length;d++)c[a[d]]=!0;var e=function(a){for(var b in a)if(a.hasOwnProperty(b)&&!da[b])return!0;return!1};for(var f in b)if(b.hasOwnProperty(f))if("highlightSeriesOpts"==f||c[f]&&!b.series){if(e(b[f]))return!0}else if("series"==f||"axes"==f){var g=b[f];for(var h in g)if(g.hasOwnProperty(h)&&e(g[h]))return!0}else if(!da[f])return!0;return!1}function G(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);if("\r"===c)return b+1<a.length&&"\n"===a.charAt(b+1)?"\r\n":c;if("\n"===c)return b+1<a.length&&"\r"===a.charAt(b+1)?"\n\r":c}return null}function H(a,b){if(null===b||null===a)return!1;for(var c=a;c&&c!==b;)c=c.parentNode;return c===b}function I(a,b){return b<0?1/Math.pow(a,-b):Math.pow(a,b)}function J(a){var b=fa.exec(a);if(!b)return null;var c=parseInt(b[1],10),d=parseInt(b[2],10),e=parseInt(b[3],10);return b[4]?{r:c,g:d,b:e,a:parseFloat(b[4])}:{r:c,g:d,b:e}}function K(a){var b=J(a);if(b)return b;var c=document.createElement("div");c.style.backgroundColor=a,c.style.visibility="hidden",document.body.appendChild(c);var d=window.getComputedStyle(c,null).backgroundColor;return document.body.removeChild(c),J(d)}function L(a){try{(a||document.createElement("canvas")).getContext("2d")}catch(a){return!1}return!0}function M(a,b,c){var d=parseFloat(a);if(!isNaN(d))return d;if(/^ *$/.test(a))return null;if(/^ *nan *$/i.test(a))return NaN;var e="Unable to parse '"+a+"' as a number";return void 0!==c&&void 0!==b&&(e+=" on line "+(1+(b||0))+" ('"+c+"') of CSV."),console.error(e),null}function N(a,b){var c=b("sigFigs");if(null!==c)return n(a,c);var d,e=b("digitsAfterDecimal"),f=b("maxNumberWidth"),g=b("labelsKMB"),h=b("labelsKMG2");if(d=0!==a&&(Math.abs(a)>=Math.pow(10,f)||Math.abs(a)<Math.pow(10,-e))?a.toExponential(e):""+r(a,e),g||h){var i,j=[],k=[];g&&(i=1e3,j=ga),h&&(g&&console.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),i=1024,j=ha,k=ia);for(var l=Math.abs(a),m=I(i,j.length),o=j.length-1;o>=0;o--,m/=i)if(l>=m){d=r(a/m,e)+j[o];break}if(h){var p=String(a.toExponential()).split("e-");2===p.length&&p[1]>=3&&p[1]<=24&&(d=p[1]%3>0?r(p[0]/I(10,p[1]%3),e):Number(p[0]).toFixed(2),d+=k[Math.floor(p[1]/3)-1])}}return d}function O(a,b,c){return N.call(this,a,c)}function P(a,b,c){var d=c("labelsUTC"),e=d?ba:_,f=e.getFullYear(a,c("offset")),g=e.getMonth(a,c("offset")),h=e.getDate(a,c("offset")),i=e.getHours(a,c("offset")),j=e.getMinutes(a,c("offset")),k=e.getSeconds(a,c("offset")),l=e.getMilliseconds(a,c("offset"));if(b>=S.Granularity.DECADAL)return""+f;if(b>=S.Granularity.MONTHLY)return ja[g]+"&#160;"+f;if(0===3600*i+60*j+k+.001*l||b>=S.Granularity.DAILY)return o(h)+"&#160;"+ja[g];if(b<S.Granularity.SECONDLY){var m=""+l;return o(k)+"."+("000"+m).substring(m.length)}return b>S.Granularity.MINUTELY?p(i,j,k,0):p(i,j,k,l)}function Q(a,b){return q(a,b("labelsUTC"),b("offset"))}Object.defineProperty(c,"__esModule",{value:!0}),c.removeEvent=d,c.cancelEvent=e,c.hsvToRGB=f,c.findPos=g,c.pageX=h,c.pageY=i,c.dragGetX_=j,c.dragGetY_=k,c.isOK=l,c.isValidPoint=m,c.floatFormat=n,c.zeropad=o,c.hmsString_=p,c.dateString_=q,c.round_=r,c.binarySearch=s,c.dateParser=t,c.dateStrToMillis=u,c.update=v,c.updateDeep=w,c.isArrayLike=x,c.isDateLike=y,c.clone=z,c.createCanvas=A,c.getContextPixelRatio=B,c.Iterator=C,c.createIterator=D,c.repeatAndCleanup=E,c.isPixelChangingOptionList=F,c.detectLineDelimiter=G,c.isNodeContainedBy=H,c.pow=I,c.toRGB_=K,c.isCanvasSupported=L,c.parseFloat_=M,c.numberValueFormatter=N,c.numberAxisLabelFormatter=O,c.dateAxisLabelFormatter=P,c.dateValueFormatter=Q;var R=a("./dygraph-tickers"),S=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(R);c.LOG_SCALE=10;var T=Math.log(10);c.LN_TEN=T;var U=function(a){return Math.log(a)/T};c.log10=U;var V=function(a,b,c){var d=U(a),e=U(b),f=d+c*(e-d);return Math.pow(10,f)};c.logRangeFraction=V;var W=[2,2];c.DOTTED_LINE=W;var X=[7,3];c.DASHED_LINE=X;var Y=[7,2,2,2];c.DOT_DASH_LINE=Y;c.HORIZONTAL=1;c.VERTICAL=2;var Z=function(a){return a.getContext("2d")};c.getContext=Z;var $=function(a,b,c){a.addEventListener(b,c,!1)};c.addEvent=$;var _={getFullYear:function(a){return a.getFullYear()},getMonth:function(a){return a.getMonth()},getDate:function(a){return a.getDate()},getHours:function(a){return a.getHours()},getMinutes:function(a){return a.getMinutes()},getSeconds:function(a){return a.getSeconds()},getMilliseconds:function(a){return a.getMilliseconds()},getDay:function(a){return a.getDay()},makeDate:function(a,b,c,d,e,f,g){return new Date(a,b,c,d,e,f,g)}};c.DateAccessorsLocal=_;var aa=function(a,b,c){return b?moment(a).utcOffset(c,!0):moment(a).utcOffset(c,!1)},ba={getFullYear:function(a,b){return aa(a,!1,b).year()},getMonth:function(a,b){return aa(a,!1,b).month()},getDate:function(a,b){return aa(a,!1,b).date()},getHours:function(a,b){return aa(a,!1,b).hour()},getMinutes:function(a,b){return aa(a,!1,b).minute()},getSeconds:function(a,b){return aa(a,!1,b).second()},getMilliseconds:function(a,b){return aa(a,!1,b).millisecond()},getDay:function(a,b){return aa(a,!1,b).day()},makeDate:function(a,b,c,d,e,f,g,h){return aa(new Date(a,b,c,d,e,f,g),!0,h).toDate()}};c.DateAccessorsUTC=ba,C.prototype.next=function(){if(!this.hasNext)return null;for(var a=this.peek,b=this.nextIdx_+1,c=!1;b<this.end_;){if(!this.predicate_||this.predicate_(this.array_,b)){this.peek=this.array_[b],c=!0;break}b++}return this.nextIdx_=b,c||(this.hasNext=!1,this.peek=null),a};var ca=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();c.requestAnimFrame=ca;var da={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,labelsDiv:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotFillGradientColor:!0,rangeSelectorPlotStrokeColor:!0,rangeSelectorBackgroundStrokeColor:!0,rangeSelectorBackgroundLineWidth:!0,rangeSelectorPlotLineWidth:!0,rangeSelectorForegroundStrokeColor:!0,rangeSelectorForegroundLineWidth:!0,rangeSelectorAlpha:!0,showLabelsOnHighlight:!0,showRoller:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,zoomCallback:!0},ea={DEFAULT:function(a,b,c,d,e,f,g){c.beginPath(),c.fillStyle=f,c.arc(d,e,g,0,2*Math.PI,!1),c.fill()}};c.Circles=ea;var fa=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/,ga=["K","M","B","T","Q"],ha=["k","M","G","T","P","E","Z","Y"],ia=["m","u","n","p","f","a","z","y"],ja=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},{"./dygraph-tickers":16}],18:[function(a,b,c){(function(d){"use strict";function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function f(a){return a&&a.__esModule?a:{default:a}}function g(a){var b=a[0],c=b[0];if("number"!=typeof c&&!t.isDateLike(c))throw new Error("Expected number or date but got "+typeof c+": "+c+".");for(var d=1;d<b.length;d++){var e=b[d];if(null!==e&&void 0!==e&&("number"!=typeof e&&!t.isArrayLike(e)))throw new Error("Expected number or array but got "+typeof e+": "+e+".")}}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a("./dygraph-layout"),j=f(i),k=a("./dygraph-canvas"),l=f(k),m=a("./dygraph-options"),n=f(m),o=a("./dygraph-interaction-model"),p=f(o),q=a("./dygraph-tickers"),r=e(q),s=a("./dygraph-utils"),t=e(s),u=a("./dygraph-default-attrs"),v=f(u),w=a("./dygraph-options-reference"),x=f(w),y=a("./iframe-tarp"),z=f(y),A=a("./datahandler/default"),B=f(A),C=a("./datahandler/bars-error"),D=f(C),E=a("./datahandler/bars-custom"),F=f(E),G=a("./datahandler/default-fractions"),H=f(G),I=a("./datahandler/bars-fractions"),J=f(I),K=a("./datahandler/bars"),L=f(K),M=a("./plugins/annotations"),N=f(M),O=a("./plugins/axes"),P=f(O),Q=a("./plugins/chart-labels"),R=f(Q),S=a("./plugins/grid"),T=f(S),U=a("./plugins/legend"),V=f(U),W=a("./plugins/range-selector"),X=f(W),Y=a("./dygraph-gviz"),Z=f(Y),$=function(a,b,c){this.__init__(a,b,c)};$.NAME="Dygraph",$.VERSION="2.1.0",$.DEFAULT_ROLL_PERIOD=1,$.DEFAULT_WIDTH=480,$.DEFAULT_HEIGHT=320,$.ANIMATION_STEPS=12,$.ANIMATION_DURATION=200,$.Plotters=l.default._Plotters,$.addedAnnotationCSS=!1,$.prototype.__init__=function(a,b,c){if(this.is_initial_draw_=!0,this.readyFns_=[],null!==c&&void 0!==c||(c={}),c=$.copyUserAttrs_(c),"string"==typeof a&&(a=document.getElementById(a)),!a)throw new Error("Constructing dygraph with a non-existent div!");this.maindiv_=a,this.file_=b,this.rollPeriod_=c.rollPeriod||$.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=c.fractions||!1,this.dateWindow_=c.dateWindow||null,this.annotations_=[],a.innerHTML="",""===a.style.width&&c.width&&(a.style.width=c.width+"px"),""===a.style.height&&c.height&&(a.style.height=c.height+"px"),""===a.style.height&&0===a.clientHeight&&(a.style.height=$.DEFAULT_HEIGHT+"px",""===a.style.width&&(a.style.width=$.DEFAULT_WIDTH+"px")),this.width_=a.clientWidth||c.width||0,this.height_=a.clientHeight||c.height||0,c.stackedGraph&&(c.fillGraph=!0),this.user_attrs_={},t.update(this.user_attrs_,c),this.attrs_={},t.updateDeep(this.attrs_,v.default),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new n.default(this),this.createInterface_(),this.plugins_=[];for(var d=$.PLUGINS.concat(this.getOption("plugins")),e=0;e<d.length;e++){var f,g=d[e];f=void 0!==g.activate?g:new g;var h={plugin:f,events:{},options:{},pluginOptions:{}},i=f.activate(this);for(var j in i)i.hasOwnProperty(j)&&(h.events[j]=i[j]);this.plugins_.push(h)}for(var e=0;e<this.plugins_.length;e++){var k=this.plugins_[e];for(var j in k.events)if(k.events.hasOwnProperty(j)){var l=k.events[j],m=[k.plugin,l];j in this.eventListeners_?this.eventListeners_[j].push(m):this.eventListeners_[j]=[m]}}this.createDragInterface_(),this.start_()},$.prototype.cascadeEvents_=function(a,b){if(!(a in this.eventListeners_))return!1;var c={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!c.cancelable)throw"Cannot call preventDefault on non-cancelable event.";c.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){c.propagationStopped=!0}};t.update(c,b);var d=this.eventListeners_[a];if(d)for(var e=d.length-1;e>=0;e--){var f=d[e][0],g=d[e][1];if(g.call(f,c),c.propagationStopped)break}return c.defaultPrevented},$.prototype.getPluginInstance_=function(a){for(var b=0;b<this.plugins_.length;b++){var c=this.plugins_[b];if(c.plugin instanceof a)return c.plugin}return null},$.prototype.isZoomed=function(a){var b=!!this.dateWindow_;if("x"===a)return b;var c=this.axes_.map(function(a){return!!a.valueRange}).indexOf(!0)>=0;if(null===a||void 0===a)return b||c;if("y"===a)return c;throw new Error("axis parameter is ["+a+"] must be null, 'x' or 'y'.")},$.prototype.toString=function(){var a=this.maindiv_;return"[Dygraph "+(a&&a.id?a.id:a)+"]"},$.prototype.attr_=function(a,b){return void 0!==d&&(void 0===x.default?console.error("Must include options reference JS for testing"):x.default.hasOwnProperty(a)||(console.error("Dygraphs is using property "+a+", which has no entry in the Dygraphs.OPTIONS_REFERENCE listing."),x.default[a]=!0)),b?this.attributes_.getForSeries(a,b):this.attributes_.get(a)},$.prototype.getOption=function(a,b){return this.attr_(a,b)},$.prototype.getNumericOption=function(a,b){return this.getOption(a,b)},$.prototype.getStringOption=function(a,b){return this.getOption(a,b)},$.prototype.getBooleanOption=function(a,b){return this.getOption(a,b)},$.prototype.getFunctionOption=function(a,b){return this.getOption(a,b)},$.prototype.getOptionForAxis=function(a,b){return this.attributes_.getForAxis(a,b)},$.prototype.optionsViewForAxis_=function(a){var b=this;return function(c){var d=b.user_attrs_.axes;return d&&d[a]&&d[a].hasOwnProperty(c)?d[a][c]:("x"!==a||"logscale"!==c)&&(void 0!==b.user_attrs_[c]?b.user_attrs_[c]:(d=b.attrs_.axes,d&&d[a]&&d[a].hasOwnProperty(c)?d[a][c]:"y"==a&&b.axes_[0].hasOwnProperty(c)?b.axes_[0][c]:"y2"==a&&b.axes_[1].hasOwnProperty(c)?b.axes_[1][c]:b.attr_(c)))}},$.prototype.rollPeriod=function(){return this.rollPeriod_},$.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},$.prototype.xAxisExtremes=function(){var a=this.getNumericOption("xRangePad")/this.plotter_.area.w;if(0===this.numRows())return[0-a,1+a];var b=this.rawData_[0][0],c=this.rawData_[this.rawData_.length-1][0];if(a){var d=c-b;b-=d*a,c+=d*a}return[b,c]},$.prototype.yAxisExtremes=function(){var a=this.gatherDatasets_(this.rolledSeries_,null),b=a.extremes,c=this.axes_;this.computeYAxisRanges_(b);var d=this.axes_;return this.axes_=c,d.map(function(a){return a.extremeRange})},$.prototype.yAxisRange=function(a){if(void 0===a&&(a=0),a<0||a>=this.axes_.length)return null;var b=this.axes_[a];return[b.computedValueRange[0],b.computedValueRange[1]]},$.prototype.yAxisRanges=function(){for(var a=[],b=0;b<this.axes_.length;b++)a.push(this.yAxisRange(b));return a},$.prototype.toDomCoords=function(a,b,c){return[this.toDomXCoord(a),this.toDomYCoord(b,c)]},$.prototype.toDomXCoord=function(a){if(null===a)return null;var b=this.plotter_.area,c=this.xAxisRange();return b.x+(a-c[0])/(c[1]-c[0])*b.w},$.prototype.toDomYCoord=function(a,b){var c=this.toPercentYCoord(a,b);if(null===c)return null;var d=this.plotter_.area;return d.y+c*d.h},$.prototype.toDataCoords=function(a,b,c){return[this.toDataXCoord(a),this.toDataYCoord(b,c)]},$.prototype.toDataXCoord=function(a){if(null===a)return null;var b=this.plotter_.area,c=this.xAxisRange();if(this.attributes_.getForAxis("logscale","x")){var d=(a-b.x)/b.w;return t.logRangeFraction(c[0],c[1],d)}return c[0]+(a-b.x)/b.w*(c[1]-c[0])},$.prototype.toDataYCoord=function(a,b){if(null===a)return null;var c=this.plotter_.area,d=this.yAxisRange(b);if(void 0===b&&(b=0),this.attributes_.getForAxis("logscale",b)){var e=(a-c.y)/c.h;return t.logRangeFraction(d[1],d[0],e)}return d[0]+(c.y+c.h-a)/c.h*(d[1]-d[0])},$.prototype.toPercentYCoord=function(a,b){if(null===a)return null;void 0===b&&(b=0);var c,d=this.yAxisRange(b);if(this.attributes_.getForAxis("logscale",b)){var e=t.log10(d[0]),f=t.log10(d[1]);c=(f-t.log10(a))/(f-e)}else c=(d[1]-a)/(d[1]-d[0]);return c},$.prototype.toPercentXCoord=function(a){if(null===a)return null;var b,c=this.xAxisRange();if(!0===this.attributes_.getForAxis("logscale","x")){var d=t.log10(c[0]),e=t.log10(c[1]);b=(t.log10(a)-d)/(e-d)}else b=(a-c[0])/(c[1]-c[0]);return b},$.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length:0},$.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},$.prototype.getValue=function(a,b){return a<0||a>this.rawData_.length?null:b<0||b>this.rawData_[a].length?null:this.rawData_[a][b]},$.prototype.createInterface_=function(){var a=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.textAlign="left",this.graphDiv.style.position="relative",a.appendChild(this.graphDiv),this.canvas_=t.createCanvas(),this.canvas_.style.position="absolute",this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.canvas_ctx_=t.getContext(this.canvas_),this.hidden_ctx_=t.getContext(this.hidden_),this.resizeElements_(),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new j.default(this);var b=this;this.mouseMoveHandler_=function(a){b.mouseMove_(a)},this.mouseOutHandler_=function(a){var c=a.target||a.fromElement,d=a.relatedTarget||a.toElement;t.isNodeContainedBy(c,b.graphDiv)&&!t.isNodeContainedBy(d,b.graphDiv)&&b.mouseOut_(a)},this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(a){setTimeout(function(){b.resize()},100)},this.addAndTrackEvent(window,"resize",this.resizeHandler_))},$.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px";var a=this.getNumericOption("pixelRatio"),b=a||t.getContextPixelRatio(this.canvas_ctx_);this.canvas_.width=this.width_*b,this.canvas_.height=this.height_*b,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",1!==b&&this.canvas_ctx_.scale(b,b);var c=a||t.getContextPixelRatio(this.hidden_ctx_);this.hidden_.width=this.width_*c,this.hidden_.height=this.height_*c,this.hidden_.style.width=this.width_+"px",this.hidden_.style.height=this.height_+"px",1!==c&&this.hidden_ctx_.scale(c,c)},$.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();for(var a=this.plugins_.length-1;a>=0;a--){var b=this.plugins_.pop();b.plugin.destroy&&b.plugin.destroy()}this.removeTrackedEvents_(),t.removeEvent(window,"mouseout",this.mouseOutHandler_),t.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),t.removeEvent(window,"resize",this.resizeHandler_),this.resizeHandler_=null,function a(b){for(;b.hasChildNodes();)a(b.firstChild),b.removeChild(b.firstChild)}(this.maindiv_);var c=function(a){for(var b in a)"object"==typeof a[b]&&(a[b]=null)};c(this.layout_),c(this.plotter_),c(this)},$.prototype.createPlotKitCanvas_=function(a){var b=t.createCanvas();return b.style.position="absolute",b.style.top=a.style.top,b.style.left=a.style.left,b.width=this.width_,b.height=this.height_,b.style.width=this.width_+"px",b.style.height=this.height_+"px",b},$.prototype.createMouseEventElement_=function(){return this.canvas_},$.prototype.setColors_=function(){var a=this.getLabels(),b=a.length-1;this.colors_=[],this.colorsMap_={};for(var c=this.getNumericOption("colorSaturation")||1,d=this.getNumericOption("colorValue")||.5,e=Math.ceil(b/2),f=this.getOption("colors"),g=this.visibility(),h=0;h<b;h++)if(g[h]){var i=a[h+1],j=this.attributes_.getForSeries("color",i);if(!j)if(f)j=f[h%f.length];else{var k=h%2?e+(h+1)/2:Math.ceil((h+1)/2),l=1*k/(1+b);j=t.hsvToRGB(l,c,d)}this.colors_.push(j),this.colorsMap_[i]=j}},$.prototype.getColors=function(){return this.colors_},$.prototype.getPropertiesForSeries=function(a){for(var b=-1,c=this.getLabels(),d=1;d<c.length;d++)if(c[d]==a){b=d;break}return-1==b?null:{name:a,column:b,visible:this.visibility()[b-1],color:this.colorsMap_[a],axis:1+this.attributes_.axisForSeries(a)}},$.prototype.createRollInterface_=function(){var a=this,b=this.roller_;b||(this.roller_=b=document.createElement("input"),b.type="text",b.style.display="none",b.className="dygraph-roller",this.graphDiv.appendChild(b));var c=this.getBooleanOption("showRoller")?"block":"none",d=this.getArea(),e={top:d.y+d.h-25+"px",left:d.x+1+"px",display:c};b.size="2",b.value=this.rollPeriod_,t.update(b.style,e),b.onchange=function(){return a.adjustRoll(b.value)}},$.prototype.createDragInterface_=function(){var a={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new z.default,initializeMouseDown:function(a,b,c){a.preventDefault?a.preventDefault():(a.returnValue=!1,a.cancelBubble=!0);var d=t.findPos(b.canvas_);c.px=d.x,c.py=d.y,c.dragStartX=t.dragGetX_(a,c),c.dragStartY=t.dragGetY_(a,c),c.cancelNextDblclick=!1,c.tarp.cover()},destroy:function(){var a=this;if((a.isZooming||a.isPanning)&&(a.isZooming=!1,a.dragStartX=null,a.dragStartY=null),a.isPanning){a.isPanning=!1,a.draggingDate=null,a.dateRange=null;for(var b=0;b<c.axes_.length;b++)delete c.axes_[b].draggingValue,delete c.axes_[b].dragValueRange}a.tarp.uncover()}},b=this.getOption("interactionModel"),c=this;for(var d in b)b.hasOwnProperty(d)&&this.addAndTrackEvent(this.mouseEventElement_,d,function(b){return function(d){b(d,c,a)}}(b[d]));if(!b.willDestroyContextMyself){var e=function(b){a.destroy()};this.addAndTrackEvent(document,"mouseup",e)}},$.prototype.drawZoomRect_=function(a,b,c,d,e,f,g,h){var i=this.canvas_ctx_;f==t.HORIZONTAL?i.clearRect(Math.min(b,g),this.layout_.getPlotArea().y,Math.abs(b-g),this.layout_.getPlotArea().h):f==t.VERTICAL&&i.clearRect(this.layout_.getPlotArea().x,Math.min(d,h),this.layout_.getPlotArea().w,Math.abs(d-h)),a==t.HORIZONTAL?c&&b&&(i.fillStyle="rgba(128,128,128,0.33)",i.fillRect(Math.min(b,c),this.layout_.getPlotArea().y,Math.abs(c-b),this.layout_.getPlotArea().h)):a==t.VERTICAL&&e&&d&&(i.fillStyle="rgba(128,128,128,0.33)",i.fillRect(this.layout_.getPlotArea().x,Math.min(d,e),this.layout_.getPlotArea().w,Math.abs(e-d)))},$.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.width_,this.height_)},$.prototype.doZoomX_=function(a,b){this.currentZoomRectArgs_=null;var c=this.toDataXCoord(a),d=this.toDataXCoord(b);this.doZoomXDates_(c,d)},$.prototype.doZoomXDates_=function(a,b){var c=this,d=this.xAxisRange(),e=[a,b],f=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(d,e,null,null,function(){f&&f.call(c,a,b,c.yAxisRanges())})},$.prototype.doZoomY_=function(a,b){var c=this;this.currentZoomRectArgs_=null;for(var d=this.yAxisRanges(),e=[],f=0;f<this.axes_.length;f++){var g=this.toDataYCoord(a,f),i=this.toDataYCoord(b,f);e.push([i,g])}var j=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(null,null,d,e,function(){if(j){var a=c.xAxisRange(),b=h(a,2),d=b[0],e=b[1];j.call(c,d,e,c.yAxisRanges())}})},$.zoomAnimationFunction=function(a,b){return(1-Math.pow(1.5,-a))/(1-Math.pow(1.5,-b))},$.prototype.resetZoom=function(){var a=this,b=this.isZoomed("x"),c=this.isZoomed("y"),d=b||c;if(this.clearSelection(),d){var e=this.xAxisExtremes(),f=h(e,2),g=f[0],i=f[1],j=this.getBooleanOption("animatedZooms"),k=this.getFunctionOption("zoomCallback");if(!j)return this.dateWindow_=null,this.axes_.forEach(function(a){a.valueRange&&delete a.valueRange}),this.drawGraph_(),void(k&&k.call(this,g,i,this.yAxisRanges()));var l=null,m=null,n=null,o=null;b&&(l=this.xAxisRange(),m=[g,i]),c&&(n=this.yAxisRanges(),o=this.yAxisExtremes()),this.doAnimatedZoom(l,m,n,o,function(){a.dateWindow_=null,a.axes_.forEach(function(a){a.valueRange&&delete a.valueRange}),k&&k.call(a,g,i,a.yAxisRanges())})}},$.prototype.doAnimatedZoom=function(a,b,c,d,e){var f,g,h=this,i=this.getBooleanOption("animatedZooms")?$.ANIMATION_STEPS:1,j=[],k=[];if(null!==a&&null!==b)for(f=1;f<=i;f++)g=$.zoomAnimationFunction(f,i),j[f-1]=[a[0]*(1-g)+g*b[0],a[1]*(1-g)+g*b[1]];if(null!==c&&null!==d)for(f=1;f<=i;f++){g=$.zoomAnimationFunction(f,i);for(var l=[],m=0;m<this.axes_.length;m++)l.push([c[m][0]*(1-g)+g*d[m][0],c[m][1]*(1-g)+g*d[m][1]]);k[f-1]=l}t.repeatAndCleanup(function(a){if(k.length)for(var b=0;b<h.axes_.length;b++){var c=k[a][b];h.axes_[b].valueRange=[c[0],c[1]]}j.length&&(h.dateWindow_=j[a]),h.drawGraph_()},i,$.ANIMATION_DURATION/i,e)},$.prototype.getArea=function(){return this.plotter_.area},$.prototype.eventToDomCoords=function(a){if(a.offsetX&&a.offsetY)return[a.offsetX,a.offsetY];var b=t.findPos(this.mouseEventElement_);return[t.pageX(a)-b.x,t.pageY(a)-b.y]},$.prototype.findClosestRow=function(a){for(var b=1/0,c=-1,d=this.layout_.points,e=0;e<d.length;e++)for(var f=d[e],g=f.length,h=0;h<g;h++){var i=f[h];if(t.isValidPoint(i,!0)){var j=Math.abs(i.canvasx-a);j<b&&(b=j,c=i.idx)}}return c},$.prototype.findClosestPoint=function(a,b){for(var c,d,e,f,g,h,i,j=1/0,k=this.layout_.points.length-1;k>=0;--k)for(var l=this.layout_.points[k],m=0;m<l.length;++m)f=l[m],t.isValidPoint(f)&&(d=f.canvasx-a,e=f.canvasy-b,(c=d*d+e*e)<j&&(j=c,g=f,h=k,i=f.idx));return{row:i,seriesName:this.layout_.setNames[h],point:g}},$.prototype.findStackedPoint=function(a,b){for(var c,d,e=this.findClosestRow(a),f=0;f<this.layout_.points.length;++f){var g=this.getLeftBoundary_(f),h=e-g,i=this.layout_.points[f];if(!(h>=i.length)){var j=i[h];if(t.isValidPoint(j)){var k=j.canvasy;if(a>j.canvasx&&h+1<i.length){var l=i[h+1];if(t.isValidPoint(l)){var m=l.canvasx-j.canvasx;if(m>0){var n=(a-j.canvasx)/m;k+=n*(l.canvasy-j.canvasy)}}}else if(a<j.canvasx&&h>0){var o=i[h-1];if(t.isValidPoint(o)){var m=j.canvasx-o.canvasx;if(m>0){var n=(j.canvasx-a)/m;k+=n*(o.canvasy-j.canvasy)}}}(0===f||k<b)&&(c=j,d=f)}}}return{row:e,seriesName:this.layout_.setNames[d],point:c}},$.prototype.mouseMove_=function(a){var b=this.layout_.points;if(void 0!==b&&null!==b){var c=this.eventToDomCoords(a),d=c[0],e=c[1],f=this.getOption("highlightSeriesOpts"),g=!1;if(f&&!this.isSeriesLocked()){var h;h=this.getBooleanOption("stackedGraph")?this.findStackedPoint(d,e):this.findClosestPoint(d,e),g=this.setSelection(h.row,h.seriesName)}else{var i=this.findClosestRow(d);g=this.setSelection(i)}var j=this.getFunctionOption("highlightCallback");j&&g&&j.call(this,a,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},$.prototype.getLeftBoundary_=function(a){if(this.boundaryIds_[a])return this.boundaryIds_[a][0];for(var b=0;b<this.boundaryIds_.length;b++)if(void 0!==this.boundaryIds_[b])return this.boundaryIds_[b][0];return 0},$.prototype.animateSelection_=function(a){void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var b=this.fadeLevel,c=a<0?b:10-b;if(c<=0)return void(this.fadeLevel&&this.updateSelection_(1));var d=++this.animateId,e=this,f=function(){0!==e.fadeLevel&&a<0&&(e.fadeLevel=0,e.clearSelection())};t.repeatAndCleanup(function(b){e.animateId==d&&(e.fadeLevel+=a,0===e.fadeLevel?e.clearSelection():e.updateSelection_(e.fadeLevel/10))},c,30,f)},$.prototype.updateSelection_=function(a){this.cascadeEvents_("select",{selectedRow:-1===this.lastRow_?void 0:this.lastRow_,selectedX:-1===this.lastx_?void 0:this.lastx_,selectedPoints:this.selPoints_});var b,c=this.canvas_ctx_;if(this.getOption("highlightSeriesOpts")){c.clearRect(0,0,this.width_,this.height_);var d=1-this.getNumericOption("highlightSeriesBackgroundAlpha"),e=t.toRGB_(this.getOption("highlightSeriesBackgroundColor"));if(d){if(void 0===a)return void this.animateSelection_(1);d*=a,c.fillStyle="rgba("+e.r+","+e.g+","+e.b+","+d+")",c.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,c)}else if(this.previousVerticalX_>=0){var f=0,g=this.attr_("labels");for(b=1;b<g.length;b++){var h=this.getNumericOption("highlightCircleSize",g[b]);h>f&&(f=h)}var i=this.previousVerticalX_;c.clearRect(i-f-1,0,2*f+2,this.height_)}if(this.selPoints_.length>0){var j=this.selPoints_[0].canvasx;for(c.save(),b=0;b<this.selPoints_.length;b++){var k=this.selPoints_[b];if(!isNaN(k.canvasy)){var l=this.getNumericOption("highlightCircleSize",k.name),m=this.getFunctionOption("drawHighlightPointCallback",k.name),n=this.plotter_.colors[k.name];m||(m=t.Circles.DEFAULT),c.lineWidth=this.getNumericOption("strokeWidth",k.name),c.strokeStyle=n,c.fillStyle=n,m.call(this,this,k.name,c,j,k.canvasy,n,l,k.idx)}}c.restore(),this.previousVerticalX_=j}},$.prototype.setSelection=function(a,b,c){this.selPoints_=[];var d=!1;if(!1!==a&&a>=0){a!=this.lastRow_&&(d=!0),this.lastRow_=a;for(var e=0;e<this.layout_.points.length;++e){var f=this.layout_.points[e],g=a-this.getLeftBoundary_(e);if(g>=0&&g<f.length&&f[g].idx==a){var h=f[g];null!==h.yval&&this.selPoints_.push(h)}else for(var i=0;i<f.length;++i){var h=f[i];if(h.idx==a){null!==h.yval&&this.selPoints_.push(h);break}}}}else this.lastRow_>=0&&(d=!0),this.lastRow_=-1;return this.selPoints_.length?this.lastx_=this.selPoints_[0].xval:this.lastx_=-1,void 0!==b&&(this.highlightSet_!==b&&(d=!0),this.highlightSet_=b),void 0!==c&&(this.lockedSet_=c),d&&this.updateSelection_(void 0),d},$.prototype.mouseOut_=function(a){this.getFunctionOption("unhighlightCallback")&&this.getFunctionOption("unhighlightCallback").call(this,a),this.getBooleanOption("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},$.prototype.clearSelection=function(){if(this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel)return void this.animateSelection_(-1);this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,this.highlightSet_=null},$.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var a=0;a<this.layout_.points.length;a++)for(var b=this.layout_.points[a],c=0;c<b.length;c++)if(b[c].x==this.selPoints_[0].x)return b[c].idx;return-1},$.prototype.getHighlightSeries=function(){return this.highlightSet_},$.prototype.isSeriesLocked=function(){return this.lockedSet_},$.prototype.loadedEvent_=function(a){this.rawData_=this.parseCSV_(a),this.cascadeDataDidUpdateEvent_(),this.predraw_()},$.prototype.addXTicks_=function(){var a;a=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var b=this.optionsViewForAxis_("x"),c=b("ticker")(a[0],a[1],this.plotter_.area.w,b,this);this.layout_.setXTicks(c)},$.prototype.getHandlerClass_=function(){return this.attr_("dataHandler")?this.attr_("dataHandler"):this.fractions_?this.getBooleanOption("errorBars")?J.default:H.default:this.getBooleanOption("customBars")?F.default:this.getBooleanOption("errorBars")?D.default:B.default},$.prototype.predraw_=function(){var a=new Date;this.dataHandler_=new(this.getHandlerClass_()),this.layout_.computePlotArea(),this.computeYAxes_(),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new l.default(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rolledSeries_=[null];for(var b=1;b<this.numColumns();b++){var c=this.dataHandler_.extractSeries(this.rawData_,b,this.attributes_);this.rollPeriod_>1&&(c=this.dataHandler_.rollingAverage(c,this.rollPeriod_,this.attributes_)),this.rolledSeries_.push(c)}this.drawGraph_();var d=new Date;this.drawingTimeMs_=d-a},$.PointType=void 0,$.stackPoints_=function(a,b,c,d){for(var e=null,f=null,g=null,h=-1,i=0;i<a.length;++i){var j=a[i],k=j.xval;void 0===b[k]&&(b[k]=0);var l=j.yval;isNaN(l)||null===l?"none"==d?l=0:(!function(b){if(!(h>=b))for(var c=b;c<a.length;++c)if(g=null,!isNaN(a[c].yval)&&null!==a[c].yval){h=c,g=a[c];break}}(i),l=f&&g&&"none"!=d?f.yval+(g.yval-f.yval)*((k-f.xval)/(g.xval-f.xval)):f&&"all"==d?f.yval:g&&"all"==d?g.yval:0):f=j;var m=b[k];e!=k&&(m+=l,b[k]=m),e=k,j.yval_stacked=m,m>c[1]&&(c[1]=m),m<c[0]&&(c[0]=m)}},$.prototype.gatherDatasets_=function(a,b){var c,d,e,f,g,h,i=[],j=[],k=[],l={},m=a.length-1;for(c=m;c>=1;c--)if(this.visibility()[c-1]){if(b){h=a[c];var n=b[0],o=b[1];for(e=null,f=null,d=0;d<h.length;d++)h[d][0]>=n&&null===e&&(e=d),h[d][0]<=o&&(f=d);null===e&&(e=0);for(var p=e,q=!0;q&&p>0;)p--,q=null===h[p][1];null===f&&(f=h.length-1);var r=f
;for(q=!0;q&&r<h.length-1;)r++,q=null===h[r][1];p!==e&&(e=p),r!==f&&(f=r),i[c-1]=[e,f],h=h.slice(e,f+1)}else h=a[c],i[c-1]=[0,h.length-1];var s=this.attr_("labels")[c],t=this.dataHandler_.getExtremeYValues(h,b,this.getBooleanOption("stepPlot",s)),u=this.dataHandler_.seriesToPoints(h,s,i[c-1][0]);this.getBooleanOption("stackedGraph")&&(g=this.attributes_.axisForSeries(s),void 0===k[g]&&(k[g]=[]),$.stackPoints_(u,k[g],t,this.getBooleanOption("stackedGraphNaNFill"))),l[s]=t,j[c]=u}return{points:j,extremes:l,boundaryIds:i}},$.prototype.drawGraph_=function(){var a=new Date,b=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.getNumericOption("highlightCircleSize");var c=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),d=c.points,e=c.extremes;this.boundaryIds_=c.boundaryIds,this.setIndexByName_={};for(var f=this.attr_("labels"),g=0,h=1;h<d.length;h++)this.visibility()[h-1]&&(this.layout_.addDataset(f[h],d[h]),this.datasetIndex_[h]=g++);for(var h=0;h<f.length;h++)this.setIndexByName_[f[h]]=h;if(this.computeYAxisRanges_(e),this.layout_.setYAxes(this.axes_),this.addXTicks_(),this.layout_.evaluate(),this.renderGraph_(b),this.getStringOption("timingName")){var i=new Date;console.log(this.getStringOption("timingName")+" - drawGraph: "+(i-a)+"ms")}},$.prototype.renderGraph_=function(a){this.cascadeEvents_("clearChart"),this.plotter_.clear();var b=this.getFunctionOption("underlayCallback");b&&b.call(this,this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var c={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",c),this.plotter_.render(),this.cascadeEvents_("didDrawChart",c),this.lastRow_=-1,this.canvas_.getContext("2d").clearRect(0,0,this.width_,this.height_);var d=this.getFunctionOption("drawCallback");if(null!==d&&d.call(this,this,a),a)for(this.readyFired_=!0;this.readyFns_.length>0;){var e=this.readyFns_.pop();e(this)}},$.prototype.computeYAxes_=function(){var a,b,c;for(this.axes_=[],a=0;a<this.attributes_.numAxes();a++)b={g:this},t.update(b,this.attributes_.axisOptions(a)),this.axes_[a]=b;for(a=0;a<this.axes_.length;a++)if(0===a)b=this.optionsViewForAxis_("y"+(a?"2":"")),(c=b("valueRange"))&&(this.axes_[a].valueRange=c);else{var d=this.user_attrs_.axes;d&&d.y2&&(c=d.y2.valueRange)&&(this.axes_[a].valueRange=c)}},$.prototype.numAxes=function(){return this.attributes_.numAxes()},$.prototype.axisPropertiesForSeries=function(a){return this.axes_[this.attributes_.axisForSeries(a)]},$.prototype.computeYAxisRanges_=function(a){for(var b,c,d,e,f,g=function(a){return isNaN(parseFloat(a))},h=this.attributes_.numAxes(),i=0;i<h;i++){var j=this.axes_[i],k=this.attributes_.getForAxis("logscale",i),l=this.attributes_.getForAxis("includeZero",i),m=this.attributes_.getForAxis("independentTicks",i);d=this.attributes_.seriesForAxis(i),b=!0,e=.1;var n=this.getNumericOption("yRangePad");if(null!==n&&(b=!1,e=n/this.plotter_.area.h),0===d.length)j.extremeRange=[0,1];else{for(var o,p,q=1/0,r=-1/0,s=0;s<d.length;s++)a.hasOwnProperty(d[s])&&(o=a[d[s]][0],null!==o&&(q=Math.min(o,q)),null!==(p=a[d[s]][1])&&(r=Math.max(p,r)));l&&!k&&(q>0&&(q=0),r<0&&(r=0)),q==1/0&&(q=0),r==-1/0&&(r=1),c=r-q,0===c&&(0!==r?c=Math.abs(r):(r=1,c=1));var u=r,v=q;b&&(k?(u=r+e*c,v=q):(u=r+e*c,v=q-e*c,v<0&&q>=0&&(v=0),u>0&&r<=0&&(u=0))),j.extremeRange=[v,u]}if(j.valueRange){var w=g(j.valueRange[0])?j.extremeRange[0]:j.valueRange[0],x=g(j.valueRange[1])?j.extremeRange[1]:j.valueRange[1];j.computedValueRange=[w,x]}else j.computedValueRange=j.extremeRange;if(!b)if(w=j.computedValueRange[0],x=j.computedValueRange[1],w===x&&(w-=.5,x+=.5),k){var y=e/(2*e-1),z=(e-1)/(2*e-1);j.computedValueRange[0]=t.logRangeFraction(w,x,y),j.computedValueRange[1]=t.logRangeFraction(w,x,z)}else c=x-w,j.computedValueRange[0]=w-c*e,j.computedValueRange[1]=x+c*e;if(m){j.independentTicks=m;var A=this.optionsViewForAxis_("y"+(i?"2":"")),B=A("ticker");j.ticks=B(j.computedValueRange[0],j.computedValueRange[1],this.plotter_.area.h,A,this),f||(f=j)}}if(void 0===f)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(var i=0;i<h;i++){var j=this.axes_[i];if(!j.independentTicks){for(var A=this.optionsViewForAxis_("y"+(i?"2":"")),B=A("ticker"),C=f.ticks,D=f.computedValueRange[1]-f.computedValueRange[0],E=j.computedValueRange[1]-j.computedValueRange[0],F=[],G=0;G<C.length;G++){var H=(C[G].v-f.computedValueRange[0])/D,I=j.computedValueRange[0]+H*E;F.push(I)}j.ticks=B(j.computedValueRange[0],j.computedValueRange[1],this.plotter_.area.h,A,this,F)}}},$.prototype.detectTypeFromString_=function(a){var b=!1,c=a.indexOf("-");c>0&&"e"!=a[c-1]&&"E"!=a[c-1]||a.indexOf("/")>=0||isNaN(parseFloat(a))?b=!0:8==a.length&&a>"19700101"&&a<"20371231"&&(b=!0),this.setXAxisOptions_(b)},$.prototype.setXAxisOptions_=function(a){a?(this.attrs_.xValueParser=t.dateParser,this.attrs_.axes.x.valueFormatter=t.dateValueFormatter,this.attrs_.axes.x.ticker=r.dateTicker,this.attrs_.axes.x.axisLabelFormatter=t.dateAxisLabelFormatter):(this.attrs_.xValueParser=function(a){return parseFloat(a)},this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=r.numericTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},$.prototype.parseCSV_=function(a){var b,c,d=[],e=t.detectLineDelimiter(a),f=a.split(e||"\n"),g=this.getStringOption("delimiter");-1==f[0].indexOf(g)&&f[0].indexOf("\t")>=0&&(g="\t");var h=0;"labels"in this.user_attrs_||(h=1,this.attrs_.labels=f[0].split(g),this.attributes_.reparseSeries());for(var i,j=!1,k=this.attr_("labels").length,l=!1,m=h;m<f.length;m++){var n=f[m];if(m,0!==n.length&&"#"!=n[0]){var o=n.split(g);if(!(o.length<2)){var p=[];if(j||(this.detectTypeFromString_(o[0]),i=this.getFunctionOption("xValueParser"),j=!0),p[0]=i(o[0],this),this.fractions_)for(c=1;c<o.length;c++)b=o[c].split("/"),2!=b.length?(console.error('Expected fractional "num/den" values in CSV data but found a value \''+o[c]+"' on line "+(1+m)+" ('"+n+"') which is not of this form."),p[c]=[0,0]):p[c]=[t.parseFloat_(b[0],m,n),t.parseFloat_(b[1],m,n)];else if(this.getBooleanOption("errorBars"))for(o.length%2!=1&&console.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+m)+" has an odd number of values ("+(o.length-1)+"): '"+n+"'"),c=1;c<o.length;c+=2)p[(c+1)/2]=[t.parseFloat_(o[c],m,n),t.parseFloat_(o[c+1],m,n)];else if(this.getBooleanOption("customBars"))for(c=1;c<o.length;c++){var q=o[c];/^ *$/.test(q)?p[c]=[null,null,null]:(b=q.split(";"),3==b.length?p[c]=[t.parseFloat_(b[0],m,n),t.parseFloat_(b[1],m,n),t.parseFloat_(b[2],m,n)]:console.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+q+'" on line '+(1+m)))}else for(c=1;c<o.length;c++)p[c]=t.parseFloat_(o[c],m,n);if(d.length>0&&p[0]<d[d.length-1][0]&&(l=!0),p.length!=k&&console.error("Number of columns in line "+m+" ("+p.length+") does not agree with number of labels ("+k+") "+n),0===m&&this.attr_("labels")){var r=!0;for(c=0;r&&c<p.length;c++)p[c]&&(r=!1);if(r){console.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+n+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}d.push(p)}}}return l&&(console.warn("CSV is out of order; order it correctly to speed loading."),d.sort(function(a,b){return a[0]-b[0]})),d},$.prototype.parseArray_=function(a){if(0===a.length)return console.error("Can't plot empty data set"),null;if(0===a[0].length)return console.error("Data set cannot contain an empty row"),null;g(a);var b;if(null===this.attr_("labels")){for(console.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],b=1;b<a[0].length;b++)this.attrs_.labels.push("Y"+b);this.attributes_.reparseSeries()}else{var c=this.attr_("labels");if(c.length!=a[0].length)return console.error("Mismatch between number of labels ("+c+") and number of columns in array ("+a[0].length+")"),null}if(t.isDateLike(a[0][0])){this.attrs_.axes.x.valueFormatter=t.dateValueFormatter,this.attrs_.axes.x.ticker=r.dateTicker,this.attrs_.axes.x.axisLabelFormatter=t.dateAxisLabelFormatter;var d=t.clone(a);for(b=0;b<a.length;b++){if(0===d[b].length)return console.error("Row "+(1+b)+" of data is empty"),null;if(null===d[b][0]||"function"!=typeof d[b][0].getTime||isNaN(d[b][0].getTime()))return console.error("x value in row "+(1+b)+" is not a Date"),null;d[b][0]=d[b][0].getTime()}return d}return this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=r.numericTicks,this.attrs_.axes.x.axisLabelFormatter=t.numberAxisLabelFormatter,a},$.prototype.parseDataTable_=function(a){var b=a.getNumberOfColumns(),c=a.getNumberOfRows(),d=a.getColumnType(0);if("date"==d||"datetime"==d)this.attrs_.xValueParser=t.dateParser,this.attrs_.axes.x.valueFormatter=t.dateValueFormatter,this.attrs_.axes.x.ticker=r.dateTicker,this.attrs_.axes.x.axisLabelFormatter=t.dateAxisLabelFormatter;else{if("number"!=d)throw new Error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+d+"')");this.attrs_.xValueParser=function(a){return parseFloat(a)},this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=r.numericTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var e,f,g=[],h={},i=!1;for(e=1;e<b;e++){var j=a.getColumnType(e);if("number"==j)g.push(e);else{if("string"!=j||!this.getBooleanOption("displayAnnotations"))throw new Error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true");var k=g[g.length-1];h.hasOwnProperty(k)?h[k].push(e):h[k]=[e],i=!0}}var l=[a.getColumnLabel(0)];for(e=0;e<g.length;e++)l.push(a.getColumnLabel(g[e])),this.getBooleanOption("errorBars")&&(e+=1);this.attrs_.labels=l,b=l.length;var m=[],n=!1,o=[];for(e=0;e<c;e++){var p=[];if(void 0!==a.getValue(e,0)&&null!==a.getValue(e,0)){if("date"==d||"datetime"==d?p.push(a.getValue(e,0).getTime()):p.push(a.getValue(e,0)),this.getBooleanOption("errorBars"))for(f=0;f<b-1;f++)p.push([a.getValue(e,1+2*f),a.getValue(e,2+2*f)]);else{for(f=0;f<g.length;f++){var q=g[f];if(p.push(a.getValue(e,q)),i&&h.hasOwnProperty(q)&&null!==a.getValue(e,h[q][0])){var s={};s.series=a.getColumnLabel(q),s.xval=p[0],s.shortText=function(a){var b=String.fromCharCode(65+a%26);for(a=Math.floor(a/26);a>0;)b=String.fromCharCode(65+(a-1)%26)+b.toLowerCase(),a=Math.floor((a-1)/26);return b}(o.length),s.text="";for(var u=0;u<h[q].length;u++)u&&(s.text+="\n"),s.text+=a.getValue(e,h[q][u]);o.push(s)}}for(f=0;f<p.length;f++)isFinite(p[f])||(p[f]=null)}m.length>0&&p[0]<m[m.length-1][0]&&(n=!0),m.push(p)}else console.warn("Ignoring row "+e+" of DataTable because of undefined or null first column.")}n&&(console.warn("DataTable is out of order; order it correctly to speed loading."),m.sort(function(a,b){return a[0]-b[0]})),this.rawData_=m,o.length>0&&this.setAnnotations(o,!0),this.attributes_.reparseSeries()},$.prototype.cascadeDataDidUpdateEvent_=function(){this.cascadeEvents_("dataDidUpdate",{})},$.prototype.start_=function(){var a=this.file_;if("function"==typeof a&&(a=a()),t.isArrayLike(a))this.rawData_=this.parseArray_(a),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("object"==typeof a&&"function"==typeof a.getColumnRange)this.parseDataTable_(a),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("string"==typeof a){var b=t.detectLineDelimiter(a);if(b)this.loadedEvent_(a);else{var c;c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var d=this;c.onreadystatechange=function(){4==c.readyState&&(200!==c.status&&0!==c.status||d.loadedEvent_(c.responseText))},c.open("GET",a,!0),c.send(null)}}else console.error("Unknown data format: "+typeof a)},$.prototype.updateOptions=function(a,b){void 0===b&&(b=!1);var c=a.file,d=$.copyUserAttrs_(a);"rollPeriod"in d&&(this.rollPeriod_=d.rollPeriod),"dateWindow"in d&&(this.dateWindow_=d.dateWindow);var e=t.isPixelChangingOptionList(this.attr_("labels"),d);t.updateDeep(this.user_attrs_,d),this.attributes_.reparseSeries(),c?(this.cascadeEvents_("dataWillUpdate",{}),this.file_=c,b||this.start_()):b||(e?this.predraw_():this.renderGraph_(!1))},$.copyUserAttrs_=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&"file"!=c&&a.hasOwnProperty(c)&&(b[c]=a[c]);return b},$.prototype.resize=function(a,b){if(!this.resize_lock){this.resize_lock=!0,null===a!=(null===b)&&(console.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),a=b=null);var c=this.width_,d=this.height_;a?(this.maindiv_.style.width=a+"px",this.maindiv_.style.height=b+"px",this.width_=a,this.height_=b):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),c==this.width_&&d==this.height_||(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},$.prototype.adjustRoll=function(a){this.rollPeriod_=a,this.predraw_()},$.prototype.visibility=function(){for(this.getOption("visibility")||(this.attrs_.visibility=[]);this.getOption("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.getOption("visibility")},$.prototype.setVisibility=function(a,b){var c=this.visibility(),d=!1;if(Array.isArray(a)||(null!==a&&"object"==typeof a?d=!0:a=[a]),d)for(var e in a)a.hasOwnProperty(e)&&(e<0||e>=c.length?console.warn("Invalid series number in setVisibility: "+e):c[e]=a[e]);else for(var e=0;e<a.length;e++)"boolean"==typeof a[e]?e>=c.length?console.warn("Invalid series number in setVisibility: "+e):c[e]=a[e]:a[e]<0||a[e]>=c.length?console.warn("Invalid series number in setVisibility: "+a[e]):c[a[e]]=b;this.predraw_()},$.prototype.size=function(){return{width:this.width_,height:this.height_}},$.prototype.setAnnotations=function(a,b){if(this.annotations_=a,!this.layout_)return void console.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html");this.layout_.setAnnotations(this.annotations_),b||this.predraw_()},$.prototype.annotations=function(){return this.annotations_},$.prototype.getLabels=function(){var a=this.attr_("labels");return a?a.slice():null},$.prototype.indexFromSetName=function(a){return this.setIndexByName_[a]},$.prototype.getRowForX=function(a){for(var b=0,c=this.numRows()-1;b<=c;){var d=c+b>>1,e=this.getValue(d,0);if(e<a)b=d+1;else if(e>a)c=d-1;else{if(b==d)return d;c=d}}return null},$.prototype.ready=function(a){this.is_initial_draw_?this.readyFns_.push(a):a.call(this,this)},$.prototype.addAndTrackEvent=function(a,b,c){t.addEvent(a,b,c),this.registeredEvents_.push({elem:a,type:b,fn:c})},$.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var a=0;a<this.registeredEvents_.length;a++){var b=this.registeredEvents_[a];t.removeEvent(b.elem,b.type,b.fn)}this.registeredEvents_=[]},$.PLUGINS=[V.default,P.default,X.default,R.default,N.default,T.default],$.GVizChart=Z.default,$.DASHED_LINE=t.DASHED_LINE,$.DOT_DASH_LINE=t.DOT_DASH_LINE,$.dateAxisLabelFormatter=t.dateAxisLabelFormatter,$.toRGB_=t.toRGB_,$.findPos=t.findPos,$.pageX=t.pageX,$.pageY=t.pageY,$.dateString_=t.dateString_,$.defaultInteractionModel=p.default.defaultModel,$.nonInteractiveModel=$.nonInteractiveModel_=p.default.nonInteractiveModel_,$.Circles=t.Circles,$.Plugins={Legend:V.default,Axes:P.default,Annotations:N.default,ChartLabels:R.default,Grid:T.default,RangeSelector:X.default},$.DataHandlers={DefaultHandler:B.default,BarsHandler:L.default,CustomBarsHandler:F.default,DefaultFractionHandler:H.default,ErrorBarsHandler:D.default,FractionsBarsHandler:J.default},$.startPan=p.default.startPan,$.startZoom=p.default.startZoom,$.movePan=p.default.movePan,$.moveZoom=p.default.moveZoom,$.endPan=p.default.endPan,$.endZoom=p.default.endZoom,$.numericLinearTicks=r.numericLinearTicks,$.numericTicks=r.numericTicks,$.dateTicker=r.dateTicker,$.Granularity=r.Granularity,$.getDateAxis=r.getDateAxis,$.floatFormat=t.floatFormat,c.default=$,b.exports=c.default}).call(this,a("_process"))},{"./datahandler/bars":5,"./datahandler/bars-custom":2,"./datahandler/bars-error":3,"./datahandler/bars-fractions":4,"./datahandler/default":8,"./datahandler/default-fractions":7,"./dygraph-canvas":9,"./dygraph-default-attrs":10,"./dygraph-gviz":11,"./dygraph-interaction-model":12,"./dygraph-layout":13,"./dygraph-options":15,"./dygraph-options-reference":14,"./dygraph-tickers":16,"./dygraph-utils":17,"./iframe-tarp":19,"./plugins/annotations":20,"./plugins/axes":21,"./plugins/chart-labels":22,"./plugins/grid":23,"./plugins/legend":24,"./plugins/range-selector":25,_process:1}],19:[function(a,b,c){"use strict";function d(){this.tarps=[]}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./dygraph-utils"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e);d.prototype.cover=function(){for(var a=document.getElementsByTagName("iframe"),b=0;b<a.length;b++){var c=a[b],d=f.findPos(c),e=d.x,g=d.y,h=c.offsetWidth,i=c.offsetHeight,j=document.createElement("div");j.style.position="absolute",j.style.left=e+"px",j.style.top=g+"px",j.style.width=h+"px",j.style.height=i+"px",j.style.zIndex=999,document.body.appendChild(j),this.tarps.push(j)}},d.prototype.uncover=function(){for(var a=0;a<this.tarps.length;a++)this.tarps[a].parentNode.removeChild(this.tarps[a]);this.tarps=[]},c.default=d,b.exports=c.default},{"./dygraph-utils":17}],20:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){this.annotations_=[]};d.prototype.toString=function(){return"Annotations Plugin"},d.prototype.activate=function(a){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},d.prototype.detachLabels=function(){for(var a=0;a<this.annotations_.length;a++){var b=this.annotations_[a];b.parentNode&&b.parentNode.removeChild(b),this.annotations_[a]=null}this.annotations_=[]},d.prototype.clearChart=function(a){this.detachLabels()},d.prototype.didDrawChart=function(a){var b=a.dygraph,c=b.layout_.annotated_points;if(c&&0!==c.length)for(var d=a.canvas.parentNode,e=function(a,c,d){return function(e){var f=d.annotation;f.hasOwnProperty(a)?f[a](f,d,b,e):b.getOption(c)&&b.getOption(c)(f,d,b,e)}},f=a.dygraph.getArea(),g={},h=0;h<c.length;h++){var i=c[h];if(!(i.canvasx<f.x||i.canvasx>f.x+f.w||i.canvasy<f.y||i.canvasy>f.y+f.h)){var j=i.annotation,k=6;j.hasOwnProperty("tickHeight")&&(k=j.tickHeight);var l=document.createElement("div");l.style.fontSize=b.getOption("axisLabelFontSize")+"px";var m="dygraph-annotation";j.hasOwnProperty("icon")||(m+=" dygraphDefaultAnnotation dygraph-default-annotation"),j.hasOwnProperty("cssClass")&&(m+=" "+j.cssClass),l.className=m;var n=j.hasOwnProperty("width")?j.width:16,o=j.hasOwnProperty("height")?j.height:16;if(j.hasOwnProperty("icon")){var p=document.createElement("img");p.src=j.icon,p.width=n,p.height=o,l.appendChild(p)}else i.annotation.hasOwnProperty("shortText")&&l.appendChild(document.createTextNode(i.annotation.shortText));var q=i.canvasx-n/2;l.style.left=q+"px";var r=0;if(j.attachAtBottom){var s=f.y+f.h-o-k;g[q]?s-=g[q]:g[q]=0,g[q]+=k+o,r=s}else r=i.canvasy-o-k;l.style.top=r+"px",l.style.width=n+"px",l.style.height=o+"px",l.title=i.annotation.text,l.style.color=b.colorsMap_[i.name],l.style.borderColor=b.colorsMap_[i.name],j.div=l,b.addAndTrackEvent(l,"click",e("clickHandler","annotationClickHandler",i)),b.addAndTrackEvent(l,"mouseover",e("mouseOverHandler","annotationMouseOverHandler",i)),b.addAndTrackEvent(l,"mouseout",e("mouseOutHandler","annotationMouseOutHandler",i)),b.addAndTrackEvent(l,"dblclick",e("dblClickHandler","annotationDblClickHandler",i)),d.appendChild(l),this.annotations_.push(l);var t=a.drawingContext;if(t.save(),t.strokeStyle=j.hasOwnProperty("tickColor")?j.tickColor:b.colorsMap_[i.name],t.lineWidth=j.hasOwnProperty("tickWidth")?j.tickWidth:b.getOption("strokeWidth"),t.beginPath(),j.attachAtBottom){var s=r+o;t.moveTo(i.canvasx,s),t.lineTo(i.canvasx,s+k)}else t.moveTo(i.canvasx,i.canvasy),t.lineTo(i.canvasx,i.canvasy-2-k);t.closePath(),t.stroke(),t.restore()}}},d.prototype.destroy=function(){this.detachLabels()},c.default=d,b.exports=c.default},{}],21:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("../dygraph-utils"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=function(){this.xlabels_=[],this.ylabels_=[]};f.prototype.toString=function(){return"Axes Plugin"},f.prototype.activate=function(a){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},f.prototype.layout=function(a){var b=a.dygraph;if(b.getOptionForAxis("drawAxis","y")){var c=b.getOptionForAxis("axisLabelWidth","y")+2*b.getOptionForAxis("axisTickSize","y");a.reserveSpaceLeft(c)}if(b.getOptionForAxis("drawAxis","x")){var d;d=b.getOption("xAxisHeight")?b.getOption("xAxisHeight"):b.getOptionForAxis("axisLabelFontSize","x")+2*b.getOptionForAxis("axisTickSize","x"),a.reserveSpaceBottom(d)}if(2==b.numAxes()){if(b.getOptionForAxis("drawAxis","y2")){var c=b.getOptionForAxis("axisLabelWidth","y2")+2*b.getOptionForAxis("axisTickSize","y2");a.reserveSpaceRight(c)}}else b.numAxes()>2&&b.error("Only two y-axes are supported at this time. (Trying to use "+b.numAxes()+")")},f.prototype.detachLabels=function(){function a(a){for(var b=0;b<a.length;b++){var c=a[b];c.parentNode&&c.parentNode.removeChild(c)}}a(this.xlabels_),a(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},f.prototype.clearChart=function(a){this.detachLabels()},f.prototype.willDrawChart=function(a){function b(a){return Math.round(a)+.5}function c(a){return Math.round(a)-.5}var d=this,f=a.dygraph;if(f.getOptionForAxis("drawAxis","x")||f.getOptionForAxis("drawAxis","y")||f.getOptionForAxis("drawAxis","y2")){var g,h,i,j=a.drawingContext,k=a.canvas.parentNode,l=f.width_,m=f.height_,n=function(a){return{position:"absolute",fontSize:f.getOptionForAxis("axisLabelFontSize",a)+"px",width:f.getOptionForAxis("axisLabelWidth",a)+"px"}},o={x:n("x"),y:n("y"),y2:n("y2")},p=function(a,b,c){var d=document.createElement("div"),f=o["y2"==c?"y2":b];e.update(d.style,f);var g=document.createElement("div");return g.className="dygraph-axis-label dygraph-axis-label-"+b+(c?" dygraph-axis-label-"+c:""),g.innerHTML=a,d.appendChild(g),d};j.save();var q=f.layout_,r=a.dygraph.plotter_.area,s=function(a){return function(b){return f.getOptionForAxis(b,a)}};if(f.getOptionForAxis("drawAxis","y")){if(q.yticks&&q.yticks.length>0){var t=f.numAxes(),u=[s("y"),s("y2")];q.yticks.forEach(function(a){if(void 0!==a.label){h=r.x;var b="y1",c=u[0];1==a.axis&&(h=r.x+r.w,-1,b="y2",c=u[1]);var e=c("axisLabelFontSize");i=r.y+a.pos*r.h,g=p(a.label,"y",2==t?b:null);var f=i-e/2;f<0&&(f=0),f+e+3>m?g.style.bottom="0":g.style.top=f+"px",0===a.axis?(g.style.left=r.x-c("axisLabelWidth")-c("axisTickSize")+"px",g.style.textAlign="right"):1==a.axis&&(g.style.left=r.x+r.w+c("axisTickSize")+"px",g.style.textAlign="left"),g.style.width=c("axisLabelWidth")+"px",k.appendChild(g),d.ylabels_.push(g)}});var v=this.ylabels_[0],w=f.getOptionForAxis("axisLabelFontSize","y");parseInt(v.style.top,10)+w>m-w&&(v.style.top=parseInt(v.style.top,10)-w/2+"px")}var x;if(f.getOption("drawAxesAtZero")){var y=f.toPercentXCoord(0);(y>1||y<0||isNaN(y))&&(y=0),x=b(r.x+y*r.w)}else x=b(r.x);j.strokeStyle=f.getOptionForAxis("axisLineColor","y"),j.lineWidth=f.getOptionForAxis("axisLineWidth","y"),j.beginPath(),j.moveTo(x,c(r.y)),j.lineTo(x,c(r.y+r.h)),j.closePath(),j.stroke(),2==f.numAxes()&&(j.strokeStyle=f.getOptionForAxis("axisLineColor","y2"),j.lineWidth=f.getOptionForAxis("axisLineWidth","y2"),j.beginPath(),j.moveTo(c(r.x+r.w),c(r.y)),j.lineTo(c(r.x+r.w),c(r.y+r.h)),j.closePath(),j.stroke())}if(f.getOptionForAxis("drawAxis","x")){if(q.xticks){var z=s("x");q.xticks.forEach(function(a){if(void 0!==a.label){h=r.x+a.pos*r.w,i=r.y+r.h,g=p(a.label,"x"),g.style.textAlign="center",g.style.top=i+z("axisTickSize")+"px";var b=h-z("axisLabelWidth")/2;b+z("axisLabelWidth")>l&&(b=l-z("axisLabelWidth"),g.style.textAlign="right"),b<0&&(b=0,g.style.textAlign="left"),g.style.left=b+"px",g.style.width=z("axisLabelWidth")+"px",k.appendChild(g),d.xlabels_.push(g)}})}j.strokeStyle=f.getOptionForAxis("axisLineColor","x"),j.lineWidth=f.getOptionForAxis("axisLineWidth","x"),j.beginPath();var A;if(f.getOption("drawAxesAtZero")){var y=f.toPercentYCoord(0,0);(y>1||y<0)&&(y=1),A=c(r.y+y*r.h)}else A=c(r.y+r.h);j.moveTo(b(r.x),A),j.lineTo(b(r.x+r.w),A),j.closePath(),j.stroke()}j.restore()}},c.default=f,b.exports=c.default},{"../dygraph-utils":17}],22:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};d.prototype.toString=function(){return"ChartLabels Plugin"},d.prototype.activate=function(a){return{layout:this.layout,didDrawChart:this.didDrawChart}};var e=function(a){var b=document.createElement("div");return b.style.position="absolute",b.style.left=a.x+"px",b.style.top=a.y+"px",b.style.width=a.w+"px",b.style.height=a.h+"px",b};d.prototype.detachLabels_=function(){for(var a=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],b=0;b<a.length;b++){var c=a[b];c&&(c.parentNode&&c.parentNode.removeChild(c))}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var f=function(a,b,c,d,e){var f=document.createElement("div");f.style.position="absolute",f.style.left=1==c?"0px":b.x+"px",f.style.top=b.y+"px",f.style.width=b.w+"px",f.style.height=b.h+"px",f.style.fontSize=a.getOption("yLabelWidth")-2+"px";var g=document.createElement("div");g.style.position="absolute",g.style.width=b.h+"px",g.style.height=b.w+"px",g.style.top=b.h/2-b.w/2+"px",g.style.left=b.w/2-b.h/2+"px",g.className="dygraph-label-rotate-"+(1==c?"right":"left");var h=document.createElement("div");return h.className=d,h.innerHTML=e,g.appendChild(h),f.appendChild(g),f};d.prototype.layout=function(a){this.detachLabels_();var b=a.dygraph,c=a.chart_div;if(b.getOption("title")){var d=a.reserveSpaceTop(b.getOption("titleHeight"));this.title_div_=e(d),this.title_div_.style.fontSize=b.getOption("titleHeight")-8+"px";var g=document.createElement("div");g.className="dygraph-label dygraph-title",g.innerHTML=b.getOption("title"),this.title_div_.appendChild(g),c.appendChild(this.title_div_)}if(b.getOption("xlabel")){var h=a.reserveSpaceBottom(b.getOption("xLabelHeight"));this.xlabel_div_=e(h),this.xlabel_div_.style.fontSize=b.getOption("xLabelHeight")-2+"px";var g=document.createElement("div");g.className="dygraph-label dygraph-xlabel",g.innerHTML=b.getOption("xlabel"),this.xlabel_div_.appendChild(g),c.appendChild(this.xlabel_div_)}if(b.getOption("ylabel")){var i=a.reserveSpaceLeft(0);this.ylabel_div_=f(b,i,1,"dygraph-label dygraph-ylabel",b.getOption("ylabel")),c.appendChild(this.ylabel_div_)}if(b.getOption("y2label")&&2==b.numAxes()){var j=a.reserveSpaceRight(0);this.y2label_div_=f(b,j,2,"dygraph-label dygraph-y2label",b.getOption("y2label")),c.appendChild(this.y2label_div_)}},d.prototype.didDrawChart=function(a){var b=a.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=b.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=b.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=b.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=b.getOption("y2label"))},d.prototype.clearChart=function(){},d.prototype.destroy=function(){this.detachLabels_()},c.default=d,b.exports=c.default},{}],23:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){};d.prototype.toString=function(){return"Gridline Plugin"},d.prototype.activate=function(a){return{willDrawChart:this.willDrawChart}},d.prototype.willDrawChart=function(a){function b(a){return Math.round(a)+.5}function c(a){return Math.round(a)-.5}var d,e,f,g,h=a.dygraph,i=a.drawingContext,j=h.layout_,k=a.dygraph.plotter_.area;if(h.getOptionForAxis("drawGrid","y")){for(var l=["y","y2"],m=[],n=[],o=[],p=[],q=[],f=0;f<l.length;f++)o[f]=h.getOptionForAxis("drawGrid",l[f]),o[f]&&(m[f]=h.getOptionForAxis("gridLineColor",l[f]),n[f]=h.getOptionForAxis("gridLineWidth",l[f]),q[f]=h.getOptionForAxis("gridLinePattern",l[f]),p[f]=q[f]&&q[f].length>=2);g=j.yticks,i.save(),g.forEach(function(a){if(a.has_tick){var f=a.axis;o[f]&&(i.save(),p[f]&&i.setLineDash&&i.setLineDash(q[f]),i.strokeStyle=m[f],i.lineWidth=n[f],d=b(k.x),e=c(k.y+a.pos*k.h),i.beginPath(),i.moveTo(d,e),i.lineTo(d+k.w,e),i.stroke(),i.restore())}}),i.restore()}if(h.getOptionForAxis("drawGrid","x")){g=j.xticks,i.save();var q=h.getOptionForAxis("gridLinePattern","x"),p=q&&q.length>=2;p&&i.setLineDash&&i.setLineDash(q),i.strokeStyle=h.getOptionForAxis("gridLineColor","x"),i.lineWidth=h.getOptionForAxis("gridLineWidth","x"),g.forEach(function(a){a.has_tick&&(d=b(k.x+a.pos*k.w),e=c(k.y+k.h),i.beginPath(),i.moveTo(d,e),i.lineTo(d,k.y),i.closePath(),i.stroke())}),p&&i.setLineDash&&i.setLineDash([]),i.restore()}},d.prototype.destroy=function(){},c.default=d,b.exports=c.default},{}],24:[function(a,b,c){"use strict";function d(a,b,c){if(!a||a.length<=1)return'<div class="dygraph-legend-line" style="border-bottom-color: '+b+';"></div>';var d,e,f,g,h,i=0,j=0,k=[];for(d=0;d<=a.length;d++)i+=a[d%a.length];if((h=Math.floor(c/(i-a[0])))>1){for(d=0;d<a.length;d++)k[d]=a[d]/c;j=k.length}else{for(h=1,d=0;d<a.length;d++)k[d]=a[d]/i;j=k.length+1}var l="";for(e=0;e<h;e++)for(d=0;d<j;d+=2)f=k[d%k.length],g=d<a.length?k[(d+1)%k.length]:0,l+='<div class="dygraph-legend-dash" style="margin-right: '+g+"em; padding-left: "+f+'em;"></div>';return l}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../dygraph-utils"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=function(){this.legend_div_=null,this.is_generated_div_=!1};g.prototype.toString=function(){return"Legend Plugin"},g.prototype.activate=function(a){var b,c=a.getOption("labelsDiv");return c&&null!==c?b="string"==typeof c||c instanceof String?document.getElementById(c):c:(b=document.createElement("div"),b.className="dygraph-legend",a.graphDiv.appendChild(b),this.is_generated_div_=!0),this.legend_div_=b,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var h=function(a){var b=document.createElement("span");b.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),a.appendChild(b);var c=b.offsetWidth;return a.removeChild(b),c},i=function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};g.prototype.select=function(a){var b=a.selectedX,c=a.selectedPoints,d=a.selectedRow,e=a.dygraph.getOption("legend");if("never"===e)return void(this.legend_div_.style.display="none");if("follow"===e){var f=a.dygraph.plotter_.area,h=this.legend_div_.offsetWidth,i=a.dygraph.getOptionForAxis("axisLabelWidth","y"),j=c[0].x*f.w+50,k=c[0].y*f.h-50;j+h+1>f.w&&(j=j-100-h-(i-f.x)),a.dygraph.graphDiv.appendChild(this.legend_div_),this.legend_div_.style.left=i+j+"px",this.legend_div_.style.top=k+"px"}var l=g.generateLegendHTML(a.dygraph,b,c,this.one_em_width_,d);this.legend_div_.innerHTML=l,this.legend_div_.style.display=""},g.prototype.deselect=function(a){"always"!==a.dygraph.getOption("legend")&&(this.legend_div_.style.display="none");var b=h(this.legend_div_);this.one_em_width_=b;var c=g.generateLegendHTML(a.dygraph,void 0,void 0,b,null);this.legend_div_.innerHTML=c},g.prototype.didDrawChart=function(a){this.deselect(a)},g.prototype.predraw=function(a){if(this.is_generated_div_){
a.dygraph.graphDiv.appendChild(this.legend_div_);var b=a.dygraph.getArea(),c=this.legend_div_.offsetWidth;this.legend_div_.style.left=b.x+b.w-c-1+"px",this.legend_div_.style.top=b.y+"px"}},g.prototype.destroy=function(){this.legend_div_=null},g.generateLegendHTML=function(a,b,c,e,h){var j={dygraph:a,x:b,series:[]},k={},l=a.getLabels();if(l)for(var m=1;m<l.length;m++){var n=a.getPropertiesForSeries(l[m]),o=a.getOption("strokePattern",l[m]),p={dashHTML:d(o,n.color,e),label:l[m],labelHTML:i(l[m]),isVisible:n.visible,color:n.color};j.series.push(p),k[l[m]]=p}if(void 0!==b){var q=a.optionsViewForAxis_("x"),r=q("valueFormatter");j.xHTML=r.call(a,b,q,l[0],a,h,0);for(var s=[],t=a.numAxes(),m=0;m<t;m++)s[m]=a.optionsViewForAxis_("y"+(m?1+m:""));var u=a.getOption("labelsShowZeroValues"),v=a.getHighlightSeries();for(m=0;m<c.length;m++){var w=c[m],p=k[w.name];if(p.y=w.yval,0===w.yval&&!u||isNaN(w.canvasy))p.isVisible=!1;else{var n=a.getPropertiesForSeries(w.name),x=s[n.axis-1],y=x("valueFormatter"),z=y.call(a,w.yval,x,w.name,a,h,l.indexOf(w.name));f.update(p,{yHTML:z}),w.name==v&&(p.isHighlighted=!0)}}}return(a.getOption("legendFormatter")||g.defaultFormatter).call(a,j)},g.defaultFormatter=function(a){var b=a.dygraph;if(!0!==b.getOption("showLabelsOnHighlight"))return"";var c,d=b.getOption("labelsSeparateLines");if(void 0===a.x){if("always"!=b.getOption("legend"))return"";c="";for(var e=0;e<a.series.length;e++){var f=a.series[e];f.isVisible&&(""!==c&&(c+=d?"<br/>":" "),c+="<span style='font-weight: bold; color: "+f.color+";'>"+f.dashHTML+" "+f.labelHTML+"</span>")}return c}c=a.xHTML;for(var e=0;e<a.series.length;e++){var f=a.series[e];if(f.isVisible){d&&(c+="<br>");c+="<span"+(f.isHighlighted?' class="highlight"':"")+"> <b><span style='color: "+f.color+";'>"+f.labelHTML+"</span></b>:&#160;"+(void 0!==f.yHTML&&null!=f.yHTML?f.yHTML:"")+"</span>"}}return c},c.default=g,b.exports=c.default},{"../dygraph-utils":17}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../dygraph-utils"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=a("../dygraph-interaction-model"),h=d(g),i=a("../iframe-tarp"),j=d(i),k=function(){this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};k.prototype.toString=function(){return"RangeSelector Plugin"},k.prototype.activate=function(a){return this.dygraph_=a,this.getOption_("showRangeSelector")&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},k.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null},k.prototype.getOption_=function(a,b){return this.dygraph_.getOption(a,b)},k.prototype.setDefaultOption_=function(a,b){this.dygraph_.attrs_[a]=b},k.prototype.createInterface_=function(){this.createCanvases_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_("animatedZooms")&&(console.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},k.prototype.addToGraph_=function(){var a=this.graphDiv_=this.dygraph_.graphDiv;a.appendChild(this.bgcanvas_),a.appendChild(this.fgcanvas_),a.appendChild(this.leftZoomHandle_),a.appendChild(this.rightZoomHandle_)},k.prototype.removeFromGraph_=function(){var a=this.graphDiv_;a.removeChild(this.bgcanvas_),a.removeChild(this.fgcanvas_),a.removeChild(this.leftZoomHandle_),a.removeChild(this.rightZoomHandle_),this.graphDiv_=null},k.prototype.reserveSpace_=function(a){this.getOption_("showRangeSelector")&&a.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)},k.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},k.prototype.renderInteractiveLayer_=function(){this.updateVisibility_()&&!this.isChangingRange_&&(this.placeZoomHandles_(),this.drawInteractiveLayer_())},k.prototype.updateVisibility_=function(){var a=this.getOption_("showRangeSelector");if(a)this.interfaceCreated_?this.graphDiv_&&this.graphDiv_.parentNode||this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var b=this.dygraph_;setTimeout(function(){b.width_=0,b.resize()},1)}return a},k.prototype.resize_=function(){function a(a,b,c,d){var e=d||f.getContextPixelRatio(b);a.style.top=c.y+"px",a.style.left=c.x+"px",a.width=c.w*e,a.height=c.h*e,a.style.width=c.w+"px",a.style.height=c.h+"px",1!=e&&b.scale(e,e)}var b=this.dygraph_.layout_.getPlotArea(),c=0;this.dygraph_.getOptionForAxis("drawAxis","x")&&(c=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")),this.canvasRect_={x:b.x,y:b.y+b.h+c+4,w:b.w,h:this.getOption_("rangeSelectorHeight")};var d=this.dygraph_.getNumericOption("pixelRatio");a(this.bgcanvas_,this.bgcanvas_ctx_,this.canvasRect_,d),a(this.fgcanvas_,this.fgcanvas_ctx_,this.canvasRect_,d)},k.prototype.createCanvases_=function(){this.bgcanvas_=f.createCanvas(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=f.getContext(this.bgcanvas_),this.fgcanvas_=f.createCanvas(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=f.getContext(this.fgcanvas_)},k.prototype.createZoomHandles_=function(){var a=new Image;a.className="dygraph-rangesel-zoomhandle",a.style.position="absolute",a.style.zIndex=10,a.style.visibility="hidden",a.style.cursor="col-resize",a.width=9,a.height=16,a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=",this.isMobileDevice_&&(a.width*=2,a.height*=2),this.leftZoomHandle_=a,this.rightZoomHandle_=a.cloneNode(!1)},k.prototype.initInteraction_=function(){var a,b,c,d,e,g,i,k,l,m,n,o,p,q,r=this,s=document,t=0,u=null,v=!1,w=!1,x=!this.isMobileDevice_,y=new j.default;a=function(a){var b=r.dygraph_.xAxisExtremes(),c=(b[1]-b[0])/r.canvasRect_.w;return[b[0]+(a.leftHandlePos-r.canvasRect_.x)*c,b[0]+(a.rightHandlePos-r.canvasRect_.x)*c]},b=function(a){return f.cancelEvent(a),v=!0,t=a.clientX,u=a.target?a.target:a.srcElement,"mousedown"!==a.type&&"dragstart"!==a.type||(f.addEvent(s,"mousemove",c),f.addEvent(s,"mouseup",d)),r.fgcanvas_.style.cursor="col-resize",y.cover(),!0},c=function(a){if(!v)return!1;f.cancelEvent(a);var b=a.clientX-t;if(Math.abs(b)<4)return!0;t=a.clientX;var c,d=r.getZoomHandleStatus_();u==r.leftZoomHandle_?(c=d.leftHandlePos+b,c=Math.min(c,d.rightHandlePos-u.width-3),c=Math.max(c,r.canvasRect_.x)):(c=d.rightHandlePos+b,c=Math.min(c,r.canvasRect_.x+r.canvasRect_.w),c=Math.max(c,d.leftHandlePos+u.width+3));var g=u.width/2;return u.style.left=c-g+"px",r.drawInteractiveLayer_(),x&&e(),!0},d=function(a){return!!v&&(v=!1,y.uncover(),f.removeEvent(s,"mousemove",c),f.removeEvent(s,"mouseup",d),r.fgcanvas_.style.cursor="default",x||e(),!0)},e=function(){try{var b=r.getZoomHandleStatus_();if(r.isChangingRange_=!0,b.isZoomed){var c=a(b);r.dygraph_.doZoomXDates_(c[0],c[1])}else r.dygraph_.resetZoom()}finally{r.isChangingRange_=!1}},g=function(a){var b=r.leftZoomHandle_.getBoundingClientRect(),c=b.left+b.width/2;b=r.rightZoomHandle_.getBoundingClientRect();var d=b.left+b.width/2;return a.clientX>c&&a.clientX<d},i=function(a){return!(w||!g(a)||!r.getZoomHandleStatus_().isZoomed)&&(f.cancelEvent(a),w=!0,t=a.clientX,"mousedown"===a.type&&(f.addEvent(s,"mousemove",k),f.addEvent(s,"mouseup",l)),!0)},k=function(a){if(!w)return!1;f.cancelEvent(a);var b=a.clientX-t;if(Math.abs(b)<4)return!0;t=a.clientX;var c=r.getZoomHandleStatus_(),d=c.leftHandlePos,e=c.rightHandlePos,g=e-d;d+b<=r.canvasRect_.x?(d=r.canvasRect_.x,e=d+g):e+b>=r.canvasRect_.x+r.canvasRect_.w?(e=r.canvasRect_.x+r.canvasRect_.w,d=e-g):(d+=b,e+=b);var h=r.leftZoomHandle_.width/2;return r.leftZoomHandle_.style.left=d-h+"px",r.rightZoomHandle_.style.left=e-h+"px",r.drawInteractiveLayer_(),x&&m(),!0},l=function(a){return!!w&&(w=!1,f.removeEvent(s,"mousemove",k),f.removeEvent(s,"mouseup",l),x||m(),!0)},m=function(){try{r.isChangingRange_=!0,r.dygraph_.dateWindow_=a(r.getZoomHandleStatus_()),r.dygraph_.drawGraph_(!1)}finally{r.isChangingRange_=!1}},n=function(a){if(!v&&!w){var b=g(a)?"move":"default";b!=r.fgcanvas_.style.cursor&&(r.fgcanvas_.style.cursor=b)}},o=function(a){"touchstart"==a.type&&1==a.targetTouches.length?b(a.targetTouches[0])&&f.cancelEvent(a):"touchmove"==a.type&&1==a.targetTouches.length?c(a.targetTouches[0])&&f.cancelEvent(a):d(a)},p=function(a){"touchstart"==a.type&&1==a.targetTouches.length?i(a.targetTouches[0])&&f.cancelEvent(a):"touchmove"==a.type&&1==a.targetTouches.length?k(a.targetTouches[0])&&f.cancelEvent(a):l(a)},q=function(a,b){for(var c=["touchstart","touchend","touchmove","touchcancel"],d=0;d<c.length;d++)r.dygraph_.addAndTrackEvent(a,c[d],b)},this.setDefaultOption_("interactionModel",h.default.dragIsPanInteractionModel),this.setDefaultOption_("panEdgeFraction",1e-4);this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,"mousedown",b),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,"mousedown",b),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",i),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",n),this.hasTouchInterface_&&(q(this.leftZoomHandle_,o),q(this.rightZoomHandle_,o),q(this.fgcanvas_,p))},k.prototype.drawStaticLayer_=function(){var a=this.bgcanvas_ctx_;a.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(a){console.warn(a)}this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorBackgroundLineWidth"),a.strokeStyle=this.getOption_("rangeSelectorBackgroundStrokeColor"),a.beginPath(),a.moveTo(.5,.5),a.lineTo(.5,this.canvasRect_.h-.5),a.lineTo(this.canvasRect_.w-.5,this.canvasRect_.h-.5),a.lineTo(this.canvasRect_.w-.5,.5),a.stroke()},k.prototype.drawMiniPlot_=function(){var a=this.getOption_("rangeSelectorPlotFillColor"),b=this.getOption_("rangeSelectorPlotFillGradientColor"),c=this.getOption_("rangeSelectorPlotStrokeColor");if(a||c){var d=this.getOption_("stepPlot"),e=this.computeCombinedSeriesAndLimits_(),f=e.yMax-e.yMin,g=this.bgcanvas_ctx_,h=this.dygraph_.xAxisExtremes(),i=Math.max(h[1]-h[0],1e-30),j=(this.canvasRect_.w-.5)/i,k=(this.canvasRect_.h-.5)/f,l=this.canvasRect_.w-.5,m=this.canvasRect_.h-.5,n=null,o=null;g.beginPath(),g.moveTo(.5,m);for(var p=0;p<e.data.length;p++){var q=e.data[p],r=null!==q[0]?(q[0]-h[0])*j:NaN,s=null!==q[1]?m-(q[1]-e.yMin)*k:NaN;(d||null===n||Math.round(r)!=Math.round(n))&&(isFinite(r)&&isFinite(s)?(null===n?g.lineTo(r,m):d&&g.lineTo(r,o),g.lineTo(r,s),n=r,o=s):(null!==n&&(d?(g.lineTo(r,o),g.lineTo(r,m)):g.lineTo(n,m)),n=o=null))}if(g.lineTo(l,m),g.closePath(),a){var t=this.bgcanvas_ctx_.createLinearGradient(0,0,0,m);b&&t.addColorStop(0,b),t.addColorStop(1,a),this.bgcanvas_ctx_.fillStyle=t,g.fill()}c&&(this.bgcanvas_ctx_.strokeStyle=c,this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorPlotLineWidth"),g.stroke())}},k.prototype.computeCombinedSeriesAndLimits_=function(){var a,b=this.dygraph_,c=this.getOption_("logscale"),d=b.numColumns(),e=b.getLabels(),g=new Array(d),h=!1,i=b.visibility(),j=[];for(a=1;a<d;a++){var k=this.getOption_("showInRangeSelector",e[a]);j.push(k),null!==k&&(h=!0)}if(h)for(a=1;a<d;a++)g[a]=j[a-1];else for(a=1;a<d;a++)g[a]=i[a-1];var l=[],m=b.dataHandler_,n=b.attributes_;for(a=1;a<b.numColumns();a++)if(g[a]){var o=m.extractSeries(b.rawData_,a,n);b.rollPeriod()>1&&(o=m.rollingAverage(o,b.rollPeriod(),n)),l.push(o)}var p=[];for(a=0;a<l[0].length;a++){for(var q=0,r=0,s=0;s<l.length;s++){var t=l[s][a][1];null===t||isNaN(t)||(r++,q+=t)}p.push([l[0][a][0],q/r])}var u=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(a=0;a<p.length;a++){var w=p[a][1];null!==w&&isFinite(w)&&(!c||w>0)&&(u=Math.min(u,w),v=Math.max(v,w))}if(c)for(v=f.log10(v),v+=.25*v,u=f.log10(u),a=0;a<p.length;a++)p[a][1]=f.log10(p[a][1]);else{var x,y=v-u;x=y<=Number.MIN_VALUE?.25*v:.25*y,v+=x,u-=x}return{data:p,yMin:u,yMax:v}},k.prototype.placeZoomHandles_=function(){var a=this.dygraph_.xAxisExtremes(),b=this.dygraph_.xAxisRange(),c=a[1]-a[0],d=Math.max(0,(b[0]-a[0])/c),e=Math.max(0,(a[1]-b[1])/c),f=this.canvasRect_.x+this.canvasRect_.w*d,g=this.canvasRect_.x+this.canvasRect_.w*(1-e),h=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),i=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=f-i+"px",this.leftZoomHandle_.style.top=h+"px",this.rightZoomHandle_.style.left=g-i+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},k.prototype.drawInteractiveLayer_=function(){var a=this.fgcanvas_ctx_;a.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var b=this.canvasRect_.w-1,c=this.canvasRect_.h-1,d=this.getZoomHandleStatus_();if(a.strokeStyle=this.getOption_("rangeSelectorForegroundStrokeColor"),a.lineWidth=this.getOption_("rangeSelectorForegroundLineWidth"),d.isZoomed){var e=Math.max(1,d.leftHandlePos-this.canvasRect_.x),f=Math.min(b,d.rightHandlePos-this.canvasRect_.x);a.fillStyle="rgba(240, 240, 240, "+this.getOption_("rangeSelectorAlpha").toString()+")",a.fillRect(0,0,e,this.canvasRect_.h),a.fillRect(f,0,this.canvasRect_.w-f,this.canvasRect_.h),a.beginPath(),a.moveTo(1,1),a.lineTo(e,1),a.lineTo(e,c),a.lineTo(f,c),a.lineTo(f,1),a.lineTo(b,1),a.stroke()}else a.beginPath(),a.moveTo(1,1),a.lineTo(1,c),a.lineTo(b,c),a.lineTo(b,1),a.stroke()},k.prototype.getZoomHandleStatus_=function(){var a=this.leftZoomHandle_.width/2,b=parseFloat(this.leftZoomHandle_.style.left)+a,c=parseFloat(this.rightZoomHandle_.style.left)+a;return{leftHandlePos:b,rightHandlePos:c,isZoomed:b-1>this.canvasRect_.x||c+1<this.canvasRect_.x+this.canvasRect_.w}},c.default=k,b.exports=c.default},{"../dygraph-interaction-model":12,"../dygraph-utils":17,"../iframe-tarp":19}]},{},[18])(18)}),angular.module("angular-dygraphs",["ngSanitize"]).directive("ngDygraphs",["$window","$sce",function($window,$sce){return{restrict:"E",scope:{data:"=",options:"="},template:'<div class="ng-dygraphs"><div class="graph"></div></div>',link:function(scope,element,attrs){var parent=element.parent(),mainDiv=element.children()[0],chartDiv=$(mainDiv).children()[0],graph_initialized=!1,annotations=[],legendElement=null;scope.options.showLabelsOnHighlight?(scope.options.labelsDiv="legend_"+scope.$id,div=document.createElement("div"),div.id="legend_"+scope.$id,div.classList.add("dygraphs-legend"),mainDiv.appendChild(div),chartDiv.classList.add("with-legend")):$("#legend_"+scope.$id).remove(),scope.options.labelsSeparateLines=!0,scope.goals=scope.options.goals,scope.goalLineColors=scope.options.goalLineColors,delete scope.options.goals,delete scope.options.goalLineColors,scope.events=scope.options.events,scope.eventLineColors=scope.options.eventLineColors,delete scope.options.events,delete scope.options.eventLineColors,delete scope.options.legendPosition,scope.options.labelsDiv="legend_"+scope.$id,scope.options.interactionModel=Dygraph.nonInteractiveModel;var graph=new Dygraph(chartDiv,scope.data,scope.options);scope.$watch("data",function(){var a=scope.options;void 0===a&&(a={}),a.file=scope.data,a.underlayCallback=scope.underlayCallback,a.zoomCallback=scope.zoomCallback},!0),scope.$watch("options",function(a){graph.updateOptions(a)},!0),scope.zoomCallback=function(){},scope.underlayCallback=function(canvas,area,g){var goals=angular.copy(scope.goals);if(goals&&goals.length>0){for(var goalLineColors=angular.copy(scope.goalLineColors),colorsMapping={},x=0;x<goals.length;x++)goalLineColors[x]&&(colorsMapping[goals[x]]=goalLineColors[x]);goals.sort(function(a,b){return a-b});for(var x=goals.length-1;x>=0;x--){var goal=goals[x];if(colorsMapping[goal]){var splitDate=moment().valueOf(),coords=g.toDomCoords(splitDate,goal),splitX=coords[0],splitY=coords[1];canvas.fillStyle=colorsMapping[goal];var topHeight=splitY-area.y,bottomHeight=area.h-topHeight;canvas.fillRect(area.x,splitY,area.w,bottomHeight)}}}var events=eval(scope.events),eventLineColors,colorsMapping,x,x,dayOne,firstDateTime,nextDay,nextDateTime,canvas_left_x,canvas_right_x,canvas_width}}}}]),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.ClipboardJS=b():a.ClipboardJS=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c="data-clipboard-"+a;if(b.hasAttribute(c))return b.getAttribute(c)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=d(c(1)),i=d(c(3)),j=d(c(4)),k=function(a){function b(a,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.resolveOptions(c),d.listenClick(a),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,i.default),g(b,[{key:"resolveOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof a.action?a.action:this.defaultAction,this.target="function"==typeof a.target?a.target:this.defaultTarget,this.text="function"==typeof a.text?a.text:this.defaultText,this.container="object"===f(a.container)?a.container:document.body}},{key:"listenClick",value:function(a){var b=this;this.listener=(0,j.default)(a,"click",function(a){return b.onClick(a)})}},{key:"onClick",value:function(a){var b=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new h.default({action:this.action(b),target:this.target(b),text:this.text(b),container:this.container,trigger:b,emitter:this})}},{key:"defaultAction",value:function(a){return e("action",a)}},{key:"defaultTarget",value:function(a){var b=e("target",a);if(b)return document.querySelector(b)}},{key:"defaultText",value:function(a){return e("text",a)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],b="string"==typeof a?[a]:a,c=!!document.queryCommandSupported;return b.forEach(function(a){c=c&&!!document.queryCommandSupported(a)}),c}}]),b}();a.exports=k},function(a,b,c){"use strict";var d,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=(d=g)&&d.__esModule?d:{default:d},i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.resolveOptions(b),this.initSelection()}return f(a,[{key:"resolveOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=a.action,this.container=a.container,this.emitter=a.emitter,this.target=a.target,this.text=a.text,this.trigger=a.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,b="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return a.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[b?"right":"left"]="-9999px";var c=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=c+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,h.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,h.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var a=void 0;try{a=document.execCommand(this.action)}catch(b){a=!1}this.handleResult(a)}},{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=a,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(a){if(void 0!==a){if(!a||"object"!==(void 0===a?"undefined":e(a))||1!==a.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&a.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=a}},get:function(){return this._target}}]),a}();a.exports=i},function(a,b){a.exports=function(a){var b;if("SELECT"===a.nodeName)a.focus(),b=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),b=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var d=window.getSelection(),e=document.createRange();e.selectNodeContents(a),d.removeAllRanges(),d.addRange(e),b=d.toString()}return b}},function(a,b){function c(){}c.prototype={on:function(a,b,c){var d=this.e||(this.e={});return(d[a]||(d[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){function d(){e.off(a,d),b.apply(c,arguments)}var e=this;return d._=b,this.on(a,d,c)},emit:function(a){for(var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),d=0,e=c.length;d<e;d++)c[d].fn.apply(c[d].ctx,b);return this},off:function(a,b){var c=this.e||(this.e={}),d=c[a],e=[];if(d&&b)for(var f=0,g=d.length;f<g;f++)d[f].fn!==b&&d[f].fn._!==b&&e.push(d[f]);return e.length?c[a]=e:delete c[a],this}},a.exports=c},function(a,b,c){var d=c(5),e=c(6);a.exports=function(a,b,c){if(!a&&!b&&!c)throw new Error("Missing required arguments");if(!d.string(b))throw new TypeError("Second argument must be a String");if(!d.fn(c))throw new TypeError("Third argument must be a Function");if(d.node(a))return m=b,n=c,(l=a).addEventListener(m,n),{destroy:function(){l.removeEventListener(m,n)}};if(d.nodeList(a))return i=a,j=b,k=c,Array.prototype.forEach.call(i,function(a){a.addEventListener(j,k)}),{destroy:function(){Array.prototype.forEach.call(i,function(a){a.removeEventListener(j,k)})}};if(d.string(a))return f=a,g=b,h=c,e(document.body,f,g,h);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var f,g,h,i,j,k,l,m,n}},function(a,b){b.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType},b.nodeList=function(a){var c=Object.prototype.toString.call(a);return void 0!==a&&("[object NodeList]"===c||"[object HTMLCollection]"===c)&&"length"in a&&(0===a.length||b.node(a[0]))},b.string=function(a){return"string"==typeof a||a instanceof String},b.fn=function(a){return"[object Function]"===Object.prototype.toString.call(a)}},function(a,b,c){function d(a,b,c,d,f){var g=function(a,b,c,d){return function(c){c.delegateTarget=e(c.target,b),c.delegateTarget&&d.call(a,c)}}.apply(this,arguments);return a.addEventListener(c,g,f),{destroy:function(){a.removeEventListener(c,g,f)}}}var e=c(7);a.exports=function(a,b,c,e,f){return"function"==typeof a.addEventListener?d.apply(null,arguments):"function"==typeof c?d.bind(null,document).apply(null,arguments):("string"==typeof a&&(a=document.querySelectorAll(a)),Array.prototype.map.call(a,function(a){return d(a,b,c,e,f)}))}},function(a,b){if("undefined"!=typeof Element&&!Element.prototype.matches){var c=Element.prototype;c.matches=c.matchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.webkitMatchesSelector}a.exports=function(a,b){for(;a&&9!==a.nodeType;){if("function"==typeof a.matches&&a.matches(b))return a;a=a.parentNode}}}])}),function(){"use strict";var a,b;"object"==typeof module&&module.exports?(a=require("angular"),b=require("clipboard"),module.exports="ngclipboard"):(a=window.angular,b=window.ClipboardJS),a.module("ngclipboard",[]).directive("ngclipboard",function(){return{restrict:"A",scope:{ngclipboardSuccess:"&",ngclipboardError:"&"},link:function(a,c){var d=new b(c[0]);d.on("success",function(b){a.$apply(function(){a.ngclipboardSuccess({e:b})})}),d.on("error",function(b){a.$apply(function(){a.ngclipboardError({e:b})})}),c.on("$destroy",function(){d.destroy()})}}})}(),angular.module("ToggleSwitch",["toggle-switch"]),angular.module("ToggleSwitch").component("scriptrToggleSwitch",{bindings:{onLoad:"&onLoad",type:"@",size:"@",class:"@",api:"@",switchStatus:"<?",onLabel:"@",offLabel:"@",knobLabel:"@",isDisabled:"<?",msgTag:"@",apiParams:"<?",onSwitchChange:"&",publishApiParams:"<?",enableResize:"<?",onFormatData:"&"},templateUrl:"/UIComponents/dashboard/frontend/components/toggleSwitch/toggle_switch.html",controller:["$scope","$element","$window","$timeout","httpClient","wsClient",function(a,b,c,d,e,f){var g=this;this.$onInit=function(){this.switchStatus=void 0!==this.switchStatus&&this.switchStatus,this.onLabel=void 0!==this.onLabel?this.onLabel:"on",this.offLabel=void 0!==this.offLabel?this.offLabel:"off",this.knobLabel=void 0!==this.knobLabel?this.knobLabel:"",this.disabled=void 0!==this.isDisabled&&this.isDisabled,this.type=void 0!==this.type?this.type:"switch-success",this.size=void 0!==this.size?this.size:"switch-large",this.enableResize=void 0===this.enableResize||this.enableResize,this.class=this.type+" "+this.size,this.transport=this.transport?this.transport:"wss",this.msgTag=this.msgTag?this.msgTag:null,this.style={},angular.element(c).on("resize",function(){return null!=g.timeoutId&&d.cancel(g.timeoutId),g.timeoutId=d(g.resize,100)}),h(this.api,g.apiParams,this.transport)},this.$onDestroy=function(){console.log("destory toggle switch"),angular.element(c).off("resize"),g.msgTag&&f.unsubscribe(g.msgTag,null,a.$id)},this.publishData=function(){this.isDisabled||("function"==typeof this.onSwitchChange()&&this.onSwitchChange()(g.switchStatus),void 0===g.publishApiParams&&(g.publishApiParams={}),g.publishApiParams.value=this.switchStatus,h(g.api,g.publishApiParams,g.transport))},g.resize=function(){g.enableResize&&(g.timeoutId=null,g.style["margin-top"]=b.parent().outerHeight(!0)/2-b.outerHeight(!0)/2)},this.$postLink=function(){d(g.resize,100),null!=g.timeoutId&&d.cancel(g.timeoutId),g.timeoutId=d(g.resize,100)};var h=function(b,c,d){"wss"==d?f.onReady.then(function(){g.msgTag&&f.subscribe(g.msgTag,g.consumeData.bind(g),a.$id),b&&f.call(b,c,g.msgTag).then(function(a,b){g.consumeData(a)},function(a){console.log("reject published promise",a),g.consumeData()})}):"https"==d&&b&&("post"==g.httpsMethod?e.post(b,c).then(function(a,b){g.consumeData(a)},function(a){console.log("reject published promise",a)}):e.get(b,c).then(function(a,b){g.consumeData(a)},function(a){console.log("reject published promise",a)}))};this.consumeData=function(a,b){"function"==typeof this.onFormatData()&&(a=this.onFormatData()(a));var c=a.status,d=a.disabled;1!=c&&0!=c&&"true"!=c&&"false"!=c||(this.switchStatus=a),void 0!==d&&(this.isDisabled=d)}}]}),angular.module("toggle-switch",["ng"]).directive("toggleSwitch",["$compile",function(a){return{restrict:"EA",replace:!0,require:"ngModel",scope:{isDisabled:"=",onLabel:"@",offLabel:"@",knobLabel:"@",html:"=",onChange:"&"},template:'<div class="ats-switch" ng-click="toggle()" ng-keypress="onKeyPress($event)" ng-class="{ \'disabled\': isDisabled }" role="switch" aria-checked="{{!!model}}"><div class="switch-animate" ng-class="{\'switch-off\': !model, \'switch-on\': model}"><span class="switch-left"></span><span class="knob"></span><span class="switch-right"></span></div></div>',compile:function(b,c){return angular.isUndefined(c.onLabel)&&(c.onLabel="On"),angular.isUndefined(c.offLabel)&&(c.offLabel="Off"),angular.isUndefined(c.knobLabel)&&(c.knobLabel=" "),angular.isUndefined(c.isDisabled)&&(c.isDisabled=!1),angular.isUndefined(c.html)&&(c.html=!1),angular.isUndefined(c.tabindex)&&(c.tabindex=0),function(b,d,e,f){d.attr("tabindex",c.tabindex),b.toggle=function(){b.isDisabled||(b.model=!b.model,f.$setViewValue(b.model),b.onChange())};b.onKeyPress=function(a){32!=a.charCode||a.altKey||a.ctrlKey||a.metaKey||(b.toggle(),a.preventDefault())},f.$formatters.push(function(a){return a}),f.$parsers.push(function(a){return a}),f.$viewChangeListeners.push(function(){b.$eval(c.ngChange)
}),f.$render=function(){b.model=f.$viewValue};var g=function(c,d){c=angular.element(c);var e=!0===d?"ng-bind-html":"ng-bind";c.removeAttr("ng-bind-html"),c.removeAttr("ng-bind"),angular.element(c).hasClass("switch-left")&&c.attr(e,"onLabel"),c.hasClass("knob")&&c.attr(e,"knobLabel"),c.hasClass("switch-right")&&c.attr(e,"offLabel"),a(c)(b,function(a,b){c.replaceWith(a)})},h=function(a,b){angular.forEach(a[0].children[0].children,function(a,c){g(a,b)})};b.$watch("html",function(a){h(d,a)})}}}}]);